{
    "sourceFile": "src/components/DynamicMuscleCanvas.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1764758207267,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1765602127458,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,9 +91,9 @@\n         key={`line-${muscle.id}`}\n         d={pathData}\n         className={`transition-all duration-200 ${\n           muscle.isSelected \n-            ? 'stroke-red-500 stroke-2' \n+            ? 'stroke-red-500 stroke-1' \n             : 'stroke-blue-400 stroke-1'\n         }`}\n         fill=\"none\"\n         strokeLinecap=\"round\"\n@@ -107,11 +107,11 @@\n \n     return (\n       <div\n         key={`label-${muscle.id}`}\n-        className={`absolute text-xs font-medium transition-all duration-200 ${\n+        className={`absolute text-xs font-bold transition-all duration-200 ${\n           muscle.isSelected \n-            ? 'text-red-600 font-bold' \n+            ? 'text-red-600 font-black' \n             : 'text-blue-600'\n         }`}\n         style={{\n           left: `${muscle.text.x}%`,\n"
                }
            ],
            "date": 1764758207267,
            "name": "Commit-0",
            "content": "import React, { useRef } from 'react';\nimport { useDynamicMusclePoints } from '../hooks/useDynamicMusclePoints';\nimport { MusclePoint } from '../constants/muscleCoordinates';\n\ninterface DynamicMuscleCanvasProps {\n  muscleType: 'front' | 'back';\n  containerWidth: number;\n  containerHeight: number;\n  backgroundImage?: string;\n}\n\nexport const DynamicMuscleCanvas: React.FC<DynamicMuscleCanvasProps> = ({\n  muscleType,\n  containerWidth,\n  containerHeight,\n  backgroundImage\n}) => {\n  const canvasRef = useRef<HTMLDivElement>(null);\n  const { \n    frontMuscles, \n    backMuscles, \n    handleMuscleClick, \n    clearSelections, \n    selectedMuscle,\n    resetMusclePoint \n  } = useDynamicMusclePoints();\n\n  const muscles = muscleType === 'front' ? frontMuscles : backMuscles;\n\n  const handleCanvasClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!canvasRef.current) return;\n\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = ((event.clientX - rect.left) / rect.width) * 100;\n    const y = ((event.clientY - rect.top) / rect.height) * 100;\n\n    handleMuscleClick({ x, y }, muscleType);\n  };\n\n  const renderMusclePoint = (muscle: MusclePoint) => {\n    if (!muscle.point) return null;\n\n    return (\n      <div\n        key={`point-${muscle.id}`}\n        className={`absolute w-2 h-2 rounded-full transform -translate-x-1 -translate-y-1 transition-all duration-200 ${\n          muscle.isSelected \n            ? 'bg-red-500 ring-2 ring-red-300 ring-opacity-50 scale-125' \n            : 'bg-blue-500 hover:bg-blue-600'\n        }`}\n        style={{\n          left: `${muscle.point.x}%`,\n          top: `${muscle.point.y}%`,\n          zIndex: 10\n        }}\n        title={muscle.name}\n      />\n    );\n  };\n\n  const renderMuscleArea = (muscle: MusclePoint) => {\n    if (!muscle.areaPoints || muscle.areaPoints.length < 3) return null;\n\n    const pathData = muscle.areaPoints\n      .map((point, index) => `${index === 0 ? 'M' : 'L'} ${point.x} ${point.y}`)\n      .join(' ') + ' Z';\n\n    return (\n      <polygon\n        key={`area-${muscle.id}`}\n        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n        className={`transition-all duration-200 ${\n          muscle.isDynamic \n            ? 'fill-blue-100 fill-opacity-30 stroke-blue-300 stroke-1 hover:fill-opacity-50 cursor-pointer' \n            : 'fill-gray-100 fill-opacity-20 stroke-gray-300 stroke-1'\n        }`}\n        strokeDasharray={muscle.isDynamic ? '2,2' : 'none'}\n      />\n    );\n  };\n\n  const renderMuscleLines = (muscle: MusclePoint) => {\n    if (!muscle.point || !muscle.linePoints || muscle.linePoints.length < 2) return null;\n\n    const pathData = muscle.linePoints\n      .map((point, index) => `${index === 0 ? 'M' : 'L'} ${point.x} ${point.y}`)\n      .join(' ');\n\n    return (\n      <path\n        key={`line-${muscle.id}`}\n        d={pathData}\n        className={`transition-all duration-200 ${\n          muscle.isSelected \n            ? 'stroke-red-500 stroke-2' \n            : 'stroke-blue-400 stroke-1'\n        }`}\n        fill=\"none\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    );\n  };\n\n  const renderMuscleLabel = (muscle: MusclePoint) => {\n    if (!muscle.point || !muscle.text) return null;\n\n    return (\n      <div\n        key={`label-${muscle.id}`}\n        className={`absolute text-xs font-medium transition-all duration-200 ${\n          muscle.isSelected \n            ? 'text-red-600 font-bold' \n            : 'text-blue-600'\n        }`}\n        style={{\n          left: `${muscle.text.x}%`,\n          top: `${muscle.text.y}%`,\n          transform: 'translate(-50%, -50%)',\n          zIndex: 5\n        }}\n      >\n        {muscle.name}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"flex flex-col items-center space-y-4\">\n      {/* 컨트롤 버튼들 */}\n      <div className=\"flex space-x-2\">\n        <button\n          onClick={clearSelections}\n          className=\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors\"\n        >\n          모든 선택 해제\n        </button>\n        {selectedMuscle && (\n          <button\n            onClick={() => resetMusclePoint(selectedMuscle, muscleType)}\n            className=\"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors\"\n          >\n            선택된 포인트 리셋\n          </button>\n        )}\n      </div>\n\n      {/* 현재 선택된 근육 표시 */}\n      {selectedMuscle && (\n        <div className=\"text-sm text-gray-600\">\n          선택된 근육: <span className=\"font-semibold text-blue-600\">{muscles[selectedMuscle]?.name}</span>\n        </div>\n      )}\n\n      {/* 캔버스 영역 */}\n      <div\n        ref={canvasRef}\n        className=\"relative border border-gray-300 rounded-lg overflow-hidden cursor-crosshair\"\n        style={{ \n          width: containerWidth, \n          height: containerHeight,\n          backgroundImage: backgroundImage ? `url(${backgroundImage})` : undefined,\n          backgroundSize: 'contain',\n          backgroundRepeat: 'no-repeat',\n          backgroundPosition: 'center'\n        }}\n        onClick={handleCanvasClick}\n      >\n        {/* SVG 오버레이 */}\n        <svg \n          className=\"absolute inset-0 w-full h-full pointer-events-none\"\n          viewBox=\"0 0 100 100\"\n          preserveAspectRatio=\"none\"\n        >\n          {Object.values(muscles).map(renderMuscleArea)}\n          {Object.values(muscles).map(renderMuscleLines)}\n        </svg>\n\n        {/* 포인트들 */}\n        {Object.values(muscles).map(renderMusclePoint)}\n        \n        {/* 라벨들 */}\n        {Object.values(muscles).map(renderMuscleLabel)}\n      </div>\n\n      {/* 사용법 안내 */}\n      <div className=\"text-sm text-gray-500 max-w-md text-center\">\n        <p>파란색 점선 영역은 동적 포인트 영역입니다.</p>\n        <p>해당 영역을 클릭하면 포인트와 연결선이 클릭한 위치로 이동합니다.</p>\n      </div>\n    </div>\n  );\n};"
        }
    ]
}