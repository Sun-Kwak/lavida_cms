{
    "sourceFile": "src/components/Calendar/WeekView.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 25,
            "patches": [
                {
                    "date": 1760154018684,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1760154849525,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,8 +72,19 @@\n const ScrollableContent = styled.div`\n   flex: 1;\n   overflow-y: auto;\n   max-height: 600px;\n+  \n+  /* 스크롤바 숨김 - Webkit 브라우저 (Chrome, Safari, Edge) */\n+  &::-webkit-scrollbar {\n+    display: none;\n+  }\n+  \n+  /* 스크롤바 숨김 - Firefox */\n+  scrollbar-width: none;\n+  \n+  /* 스크롤바 숨김 - IE/Edge Legacy */\n+  -ms-overflow-style: none;\n `;\n \n const TimeGrid = styled.div`\n   display: flex;\n"
                },
                {
                    "date": 1760155134675,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,18 +27,22 @@\n const Header = styled.div`\n   display: flex;\n   background-color: ${AppColors.background};\n   border-bottom: 1px solid ${AppColors.borderLight};\n+  width: 100%;\n `;\n \n const TimeHeader = styled.div`\n   width: 80px;\n+  min-width: 80px;\n+  max-width: 80px;\n   padding: 12px 8px;\n   text-align: center;\n   font-size: ${AppTextStyles.body2.fontSize};\n   font-weight: 600;\n   color: ${AppColors.onSurface};\n   border-right: 1px solid ${AppColors.borderLight};\n+  box-sizing: border-box;\n `;\n \n const DayHeader = styled.div<{ isToday: boolean; isWeekend: boolean }>`\n   flex: 1;\n@@ -87,13 +91,17 @@\n `;\n \n const TimeGrid = styled.div`\n   display: flex;\n+  width: 100%;\n `;\n \n const TimeColumn = styled.div`\n   width: 80px;\n+  min-width: 80px;\n+  max-width: 80px;\n   border-right: 1px solid ${AppColors.borderLight};\n+  box-sizing: border-box;\n `;\n \n const TimeSlot = styled.div`\n   height: 60px;\n@@ -103,8 +111,10 @@\n   color: ${AppColors.onSurface}60;\n   display: flex;\n   align-items: flex-start;\n   justify-content: center;\n+  box-sizing: border-box;\n+  width: 100%;\n `;\n \n const DayGridColumn = styled.div<{ isToday: boolean; isWeekend: boolean }>`\n   flex: 1;\n@@ -114,8 +124,9 @@\n     props.isToday ? AppColors.primary + '05' : \n     props.isWeekend ? AppColors.surface + 'F0' : \n     'transparent'\n   };\n+  overflow: hidden;\n \n   &:last-child {\n     border-right: none;\n   }\n@@ -138,8 +149,9 @@\n   left: 0;\n   right: 0;\n   height: 100%;\n   pointer-events: none;\n+  overflow: hidden;\n `;\n \n const EventBlock = styled.div<{ \n   color: string; \n@@ -162,8 +174,12 @@\n   cursor: pointer;\n   z-index: 1;\n   pointer-events: auto;\n   opacity: ${props => props.opacity || 1};\n+  box-sizing: border-box;\n+  max-width: calc(100% - 2px);\n+  word-wrap: break-word;\n+  text-overflow: ellipsis;\n \n   &:hover {\n     background-color: ${props => props.color}30;\n     box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n@@ -176,8 +192,11 @@\n   font-weight: 500;\n   color: ${AppColors.onSurface};\n   line-height: 1.1;\n   margin-bottom: 1px;\n+  overflow: hidden;\n+  text-overflow: ellipsis;\n+  white-space: nowrap;\n `;\n \n const EventTime = styled.div`\n   font-size: 10px;\n@@ -279,11 +298,17 @@\n \n     const totalOverlapping = overlapping.length + 1;\n     const eventIndex = overlapping.findIndex(e => e.startTime <= targetEvent.startTime) + 1;\n \n+    // 컬럼을 벗어나지 않도록 약간의 여백 추가\n+    const margin = 1; // 1% 여백\n+    const availableWidth = 100 - (margin * 2);\n+    const eventWidth = availableWidth / totalOverlapping;\n+    const eventLeft = margin + (eventIndex * eventWidth);\n+\n     return {\n-      left: (eventIndex / totalOverlapping) * 100,\n-      width: 100 / totalOverlapping,\n+      left: Math.min(eventLeft, 100 - eventWidth),\n+      width: Math.min(eventWidth, availableWidth),\n       opacity: totalOverlapping > 1 ? 0.9 : 1\n     };\n   };\n \n"
                },
                {
                    "date": 1760156648998,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import styled from 'styled-components';\n import { AppColors } from '../../styles/colors';\n import { AppTextStyles } from '../../styles/textStyles';\n import { ScheduleEvent, StaffInfo } from './types';\n-import { getWeekDates, formatTime, isEventOnDate } from './utils';\n+import { getWeekDates, isEventOnDate } from './utils';\n \n interface WeekViewProps {\n   currentDate: Date;\n   events: ScheduleEvent[];\n@@ -165,9 +165,9 @@\n   left: ${props => props.left}%;\n   width: ${props => props.width}%;\n   top: ${props => props.top}px;\n   height: ${props => props.height}px;\n-  background-color: ${props => props.color}20;\n+  background-color: ${props => props.color}30;\n   border: 1px solid ${props => props.color};\n   border-radius: 3px;\n   padding: 2px 4px;\n   overflow: hidden;\n@@ -178,11 +178,14 @@\n   box-sizing: border-box;\n   max-width: calc(100% - 2px);\n   word-wrap: break-word;\n   text-overflow: ellipsis;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n \n   &:hover {\n-    background-color: ${props => props.color}30;\n+    background-color: ${props => props.color}50;\n     box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n     z-index: 2;\n   }\n `;\n@@ -191,27 +194,15 @@\n   font-size: ${AppTextStyles.label3.fontSize};\n   font-weight: 500;\n   color: ${AppColors.onSurface};\n   line-height: 1.1;\n-  margin-bottom: 1px;\n   overflow: hidden;\n   text-overflow: ellipsis;\n   white-space: nowrap;\n+  text-align: center;\n+  width: 100%;\n `;\n \n-const EventTime = styled.div`\n-  font-size: 10px;\n-  color: ${AppColors.onSurface}70;\n-  line-height: 1;\n-`;\n-\n-const EventStaff = styled.div`\n-  font-size: 10px;\n-  color: ${AppColors.primary};\n-  line-height: 1;\n-  margin-top: 1px;\n-`;\n-\n const StaffLegend = styled.div`\n   padding: 8px 12px;\n   background-color: ${AppColors.background};\n   border-top: 1px solid ${AppColors.borderLight};\n@@ -290,26 +281,39 @@\n   };\n \n   // 같은 시간대 이벤트들의 위치 조정\n   const getEventLayout = (dayEvents: ScheduleEvent[], targetEvent: ScheduleEvent) => {\n+    // 같은 시간대에 겹치는 이벤트들 찾기\n     const overlapping = dayEvents.filter(e => {\n       if (e.id === targetEvent.id) return false;\n       return (targetEvent.startTime < e.endTime && targetEvent.endTime > e.startTime);\n     });\n \n-    const totalOverlapping = overlapping.length + 1;\n-    const eventIndex = overlapping.findIndex(e => e.startTime <= targetEvent.startTime) + 1;\n+    // 겹치는 이벤트가 없으면 전체 너비 사용\n+    if (overlapping.length === 0) {\n+      return {\n+        left: 0,\n+        width: 100,\n+        opacity: 1\n+      };\n+    }\n \n-    // 컬럼을 벗어나지 않도록 약간의 여백 추가\n-    const margin = 1; // 1% 여백\n-    const availableWidth = 100 - (margin * 2);\n-    const eventWidth = availableWidth / totalOverlapping;\n-    const eventLeft = margin + (eventIndex * eventWidth);\n+    // 모든 겹치는 이벤트들을 ID 순으로 정렬 (일관된 순서 보장)\n+    const allOverlapping = [...overlapping, targetEvent].sort((a, b) => \n+      a.id.localeCompare(b.id)\n+    );\n \n+    const totalCount = allOverlapping.length;\n+    const eventIndex = allOverlapping.findIndex(e => e.id === targetEvent.id);\n+\n+    // 각 이벤트가 동일한 너비를 가지도록 계산\n+    const eventWidth = Math.floor(100 / totalCount);\n+    const eventLeft = eventIndex * eventWidth;\n+\n     return {\n-      left: Math.min(eventLeft, 100 - eventWidth),\n-      width: Math.min(eventWidth, availableWidth),\n-      opacity: totalOverlapping > 1 ? 0.9 : 1\n+      left: eventLeft,\n+      width: eventWidth,\n+      opacity: 0.95\n     };\n   };\n \n   const handleSlotClick = (dayDate: Date, hour: number) => {\n@@ -404,13 +408,9 @@\n                         width={layout.width}\n                         opacity={layout.opacity}\n                         onClick={() => onEventClick?.(event)}\n                       >\n-                        <EventTitle>{event.title}</EventTitle>\n-                        <EventTime>\n-                          {formatTime(event.startTime)}-{formatTime(event.endTime)}\n-                        </EventTime>\n-                        <EventStaff>{event.staffName}</EventStaff>\n+                        <EventTitle>{event.memberName || '예약자'}</EventTitle>\n                       </EventBlock>\n                     );\n                   })}\n                 </StaffEventsContainer>\n"
                },
                {
                    "date": 1760160406112,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -408,9 +408,11 @@\n                         width={layout.width}\n                         opacity={layout.opacity}\n                         onClick={() => onEventClick?.(event)}\n                       >\n-                        <EventTitle>{event.memberName || '예약자'}</EventTitle>\n+                        <EventTitle>\n+                          {event.title === '휴일' ? '휴일' : (event.memberName || '예약자')}\n+                        </EventTitle>\n                       </EventBlock>\n                     );\n                   })}\n                 </StaffEventsContainer>\n"
                },
                {
                    "date": 1760160713136,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,33 +43,33 @@\n   border-right: 1px solid ${AppColors.borderLight};\n   box-sizing: border-box;\n `;\n \n-const DayHeader = styled.div<{ isToday: boolean; isWeekend: boolean }>`\n+const DayHeader = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n   flex: 1;\n   padding: 12px 8px;\n   text-align: center;\n   border-right: 1px solid ${AppColors.borderLight};\n-  background-color: ${props => props.isToday ? AppColors.primary + '10' : 'transparent'};\n+  background-color: ${props => props.$isToday ? AppColors.primary + '10' : 'transparent'};\n   \n   &:last-child {\n     border-right: none;\n   }\n `;\n \n-const DayName = styled.div<{ isWeekend: boolean }>`\n+const DayName = styled.div<{ $isWeekend: boolean }>`\n   font-size: ${AppTextStyles.label2.fontSize};\n   font-weight: 500;\n-  color: ${props => props.isWeekend ? AppColors.error : AppColors.onSurface}80;\n+  color: ${props => props.$isWeekend ? AppColors.error : AppColors.onSurface}80;\n   margin-bottom: 4px;\n `;\n \n-const DayDate = styled.div<{ isToday: boolean; isWeekend: boolean }>`\n+const DayDate = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n   font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: ${props => props.isToday ? 600 : 500};\n+  font-weight: ${props => props.$isToday ? 600 : 500};\n   color: ${props => \n-    props.isToday ? AppColors.primary : \n-    props.isWeekend ? AppColors.error : \n+    props.$isToday ? AppColors.primary : \n+    props.$isWeekend ? AppColors.error : \n     AppColors.onSurface\n   };\n `;\n \n@@ -115,15 +115,15 @@\n   box-sizing: border-box;\n   width: 100%;\n `;\n \n-const DayGridColumn = styled.div<{ isToday: boolean; isWeekend: boolean }>`\n+const DayGridColumn = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n   flex: 1;\n   border-right: 1px solid ${AppColors.borderLight};\n   position: relative;\n   background-color: ${props => \n-    props.isToday ? AppColors.primary + '05' : \n-    props.isWeekend ? AppColors.surface + 'F0' : \n+    props.$isToday ? AppColors.primary + '05' : \n+    props.$isWeekend ? AppColors.surface + 'F0' : \n     'transparent'\n   };\n   overflow: hidden;\n \n@@ -153,29 +153,29 @@\n   overflow: hidden;\n `;\n \n const EventBlock = styled.div<{ \n-  color: string; \n-  top: number; \n-  height: number; \n-  left: number; \n-  width: number;\n-  opacity?: number;\n+  $color: string; \n+  $top: number; \n+  $height: number; \n+  $left: number; \n+  $width: number;\n+  $opacity?: number;\n }>`\n   position: absolute;\n-  left: ${props => props.left}%;\n-  width: ${props => props.width}%;\n-  top: ${props => props.top}px;\n-  height: ${props => props.height}px;\n-  background-color: ${props => props.color}30;\n-  border: 1px solid ${props => props.color};\n+  left: ${props => props.$left}%;\n+  width: ${props => props.$width}%;\n+  top: ${props => props.$top}px;\n+  height: ${props => props.$height}px;\n+  background-color: ${props => props.$color}30;\n+  border: 1px solid ${props => props.$color};\n   border-radius: 3px;\n   padding: 2px 4px;\n   overflow: hidden;\n   cursor: pointer;\n   z-index: 1;\n   pointer-events: auto;\n-  opacity: ${props => props.opacity || 1};\n+  opacity: ${props => props.$opacity || 1};\n   box-sizing: border-box;\n   max-width: calc(100% - 2px);\n   word-wrap: break-word;\n   text-overflow: ellipsis;\n@@ -183,9 +183,9 @@\n   align-items: center;\n   justify-content: center;\n \n   &:hover {\n-    background-color: ${props => props.color}50;\n+    background-color: ${props => props.$color}50;\n     box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n     z-index: 2;\n   }\n `;\n@@ -217,13 +217,13 @@\n   align-items: center;\n   gap: 6px;\n `;\n \n-const StaffColorDot = styled.div<{ color: string }>`\n+const StaffColorDot = styled.div<{ $color: string }>`\n   width: 8px;\n   height: 8px;\n   border-radius: 50%;\n-  background-color: ${props => props.color};\n+  background-color: ${props => props.$color};\n `;\n \n const StaffLegendName = styled.span`\n   font-size: ${AppTextStyles.label2.fontSize};\n@@ -345,13 +345,13 @@\n         <TimeHeader>시간</TimeHeader>\n         {weekDates.map(day => (\n           <DayHeader \n             key={day.date.toISOString()} \n-            isToday={day.isToday}\n-            isWeekend={day.isWeekend}\n+            $isToday={day.isToday}\n+            $isWeekend={day.isWeekend}\n           >\n-            <DayName isWeekend={day.isWeekend}>{day.dayName}</DayName>\n-            <DayDate isToday={day.isToday} isWeekend={day.isWeekend}>\n+            <DayName $isWeekend={day.isWeekend}>{day.dayName}</DayName>\n+            <DayDate $isToday={day.isToday} $isWeekend={day.isWeekend}>\n               {day.date.getDate()}\n             </DayDate>\n           </DayHeader>\n         ))}\n@@ -378,10 +378,10 @@\n \n             return (\n               <DayGridColumn \n                 key={day.date.toISOString()}\n-                isToday={day.isToday}\n-                isWeekend={day.isWeekend}\n+                $isToday={day.isToday}\n+                $isWeekend={day.isWeekend}\n               >\n                 {timeSlots.map(hour => (\n                   <DayTimeSlot\n                     key={`${day.date.toISOString()}-${hour}`}\n@@ -400,14 +400,14 @@\n \n                     return (\n                       <EventBlock\n                         key={event.id}\n-                        color={staff?.color || AppColors.primary}\n-                        top={position.top}\n-                        height={position.height}\n-                        left={layout.left}\n-                        width={layout.width}\n-                        opacity={layout.opacity}\n+                        $color={staff?.color || AppColors.primary}\n+                        $top={position.top}\n+                        $height={position.height}\n+                        $left={layout.left}\n+                        $width={layout.width}\n+                        $opacity={layout.opacity}\n                         onClick={() => onEventClick?.(event)}\n                       >\n                         <EventTitle>\n                           {event.title === '휴일' ? '휴일' : (event.memberName || '예약자')}\n@@ -433,9 +433,9 @@\n           코치:\n         </span>\n         {filteredStaff.map(staff => (\n           <StaffLegendItem key={staff.id}>\n-            <StaffColorDot color={staff.color || AppColors.primary} />\n+            <StaffColorDot $color={staff.color || AppColors.primary} />\n             <StaffLegendName>{staff.name}</StaffLegendName>\n           </StaffLegendItem>\n         ))}\n       </StaffLegend>\n"
                },
                {
                    "date": 1761457257191,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -409,9 +409,11 @@\n                         $opacity={layout.opacity}\n                         onClick={() => onEventClick?.(event)}\n                       >\n                         <EventTitle>\n-                          {event.title === '휴일' ? '휴일' : (event.memberName || '예약자')}\n+                          {event.type === 'holiday' ? '휴일' : \n+                           event.type === 'break' ? event.title :\n+                           (event.memberName || '예약자')}\n                         </EventTitle>\n                       </EventBlock>\n                     );\n                   })}\n"
                },
                {
                    "date": 1761460460516,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,9 @@\n   staffList: StaffInfo[];\n   selectedStaffIds: string[];\n   onEventClick?: (event: ScheduleEvent) => void;\n   onEventCreate?: (startTime: Date, endTime: Date, staffId?: string) => void;\n+  allowEmptyStaff?: boolean; // 코치가 없어도 달력 표시 허용\n }\n \n const WeekContainer = styled.div`\n   display: flex;\n@@ -235,9 +236,10 @@\n   events,\n   staffList,\n   selectedStaffIds,\n   onEventClick,\n-  onEventCreate\n+  onEventCreate,\n+  allowEmptyStaff = false\n }) => {\n   const weekDates = getWeekDates(currentDate);\n   const timeSlots = Array.from({ length: 17 }, (_, i) => 6 + i); // 6시부터 22시까지\n   \n@@ -327,9 +329,9 @@\n       onEventCreate(startTime, endTime);\n     }\n   };\n \n-  if (filteredStaff.length === 0) {\n+  if (!allowEmptyStaff && filteredStaff.length === 0) {\n     return (\n       <WeekContainer>\n         <div style={{ padding: '48px', textAlign: 'center', color: AppColors.onSurface + '60' }}>\n           표시할 코치를 선택해주세요.\n@@ -370,12 +372,16 @@\n           </TimeColumn>\n \n           {/* 각 날짜별 컬럼 */}\n           {weekDates.map(day => {\n-            const dayEvents = weekEvents.filter(event => \n-              isEventOnDate(event.startTime, event.endTime, day.date) &&\n-              selectedStaffIds.includes(event.staffId)\n-            );\n+            const dayEvents = allowEmptyStaff \n+              ? weekEvents.filter(event => \n+                  isEventOnDate(event.startTime, event.endTime, day.date)\n+                )\n+              : weekEvents.filter(event => \n+                  isEventOnDate(event.startTime, event.endTime, day.date) &&\n+                  selectedStaffIds.includes(event.staffId)\n+                );\n \n             return (\n               <DayGridColumn \n                 key={day.date.toISOString()}\n"
                },
                {
                    "date": 1761735362797,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,8 +12,9 @@\n   selectedStaffIds: string[];\n   onEventClick?: (event: ScheduleEvent) => void;\n   onEventCreate?: (startTime: Date, endTime: Date, staffId?: string) => void;\n   allowEmptyStaff?: boolean; // 코치가 없어도 달력 표시 허용\n+  programDuration?: number; // 프로그램 소요시간 (분 단위)\n }\n \n const WeekContainer = styled.div`\n   display: flex;\n@@ -237,13 +238,18 @@\n   staffList,\n   selectedStaffIds,\n   onEventClick,\n   onEventCreate,\n-  allowEmptyStaff = false\n+  allowEmptyStaff = false,\n+  programDuration\n }) => {\n   const weekDates = getWeekDates(currentDate);\n-  const timeSlots = Array.from({ length: 17 }, (_, i) => 6 + i); // 6시부터 22시까지\n   \n+  // 프로그램 소요시간에 따른 시간 슬롯 생성\n+  const timeSlots = programDuration && programDuration <= 30 \n+    ? Array.from({ length: 34 }, (_, i) => ({ hour: 6 + Math.floor(i / 2), minute: (i % 2) * 30 })) // 30분 단위\n+    : Array.from({ length: 17 }, (_, i) => ({ hour: 6 + i, minute: 0 })); // 1시간 단위\n+  \n   // 필터링된 직원 목록 (선택된 코치만)\n   const filteredStaff = staffList.filter(staff => \n     selectedStaffIds.includes(staff.id) && staff.role === '코치'\n   );\n@@ -317,15 +323,18 @@\n       opacity: 0.95\n     };\n   };\n \n-  const handleSlotClick = (dayDate: Date, hour: number) => {\n+  const handleSlotClick = (dayDate: Date, slot: { hour: number; minute: number }) => {\n     if (onEventCreate) {\n       const startTime = new Date(dayDate);\n-      startTime.setHours(hour, 0, 0, 0);\n+      startTime.setHours(slot.hour, slot.minute, 0, 0);\n       \n       const endTime = new Date(startTime);\n-      endTime.setHours(hour + 1); // 기본 1시간 슬롯\n+      // 프로그램 소요시간에 따른 종료시간 계산\n+      const duration = programDuration || 30; // 기본 30분\n+      const actualDuration = duration > 30 ? 60 : duration; // 50분은 1시간으로 처리\n+      endTime.setMinutes(endTime.getMinutes() + actualDuration);\n       \n       onEventCreate(startTime, endTime);\n     }\n   };\n@@ -363,11 +372,11 @@\n       <ScrollableContent>\n         <TimeGrid>\n           {/* 시간 컬럼 */}\n           <TimeColumn>\n-            {timeSlots.map(hour => (\n-              <TimeSlot key={hour}>\n-                {hour}:00\n+            {timeSlots.map(slot => (\n+              <TimeSlot key={`${slot.hour}-${slot.minute}`}>\n+                {slot.minute === 0 ? `${slot.hour}:00` : ''}\n               </TimeSlot>\n             ))}\n           </TimeColumn>\n \n@@ -387,12 +396,12 @@\n                 key={day.date.toISOString()}\n                 $isToday={day.isToday}\n                 $isWeekend={day.isWeekend}\n               >\n-                {timeSlots.map(hour => (\n+                {timeSlots.map(slot => (\n                   <DayTimeSlot\n-                    key={`${day.date.toISOString()}-${hour}`}\n-                    onClick={() => handleSlotClick(day.date, hour)}\n+                    key={`${day.date.toISOString()}-${slot.hour}-${slot.minute}`}\n+                    onClick={() => handleSlotClick(day.date, slot)}\n                   />\n                 ))}\n \n                 {/* 해당 날짜의 이벤트들 */}\n"
                },
                {
                    "date": 1761738930852,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import styled from 'styled-components';\n import { AppColors } from '../../styles/colors';\n import { AppTextStyles } from '../../styles/textStyles';\n import { ScheduleEvent, StaffInfo } from './types';\n-import { getWeekDates, isEventOnDate } from './utils';\n+import { getWeekDates, isEventOnDate, generateTimeSlots } from './utils';\n \n interface WeekViewProps {\n   currentDate: Date;\n   events: ScheduleEvent[];\n@@ -105,9 +105,9 @@\n   box-sizing: border-box;\n `;\n \n const TimeSlot = styled.div`\n-  height: 60px;\n+  height: 30px;\n   padding: 4px 8px;\n   border-bottom: 1px solid ${AppColors.borderLight}20;\n   font-size: ${AppTextStyles.label2.fontSize};\n   color: ${AppColors.onSurface}60;\n@@ -134,9 +134,9 @@\n   }\n `;\n \n const DayTimeSlot = styled.div`\n-  height: 60px;\n+  height: 30px;\n   border-bottom: 1px solid ${AppColors.borderLight}20;\n   position: relative;\n   cursor: pointer;\n \n@@ -243,12 +243,10 @@\n   programDuration\n }) => {\n   const weekDates = getWeekDates(currentDate);\n   \n-  // 프로그램 소요시간에 따른 시간 슬롯 생성\n-  const timeSlots = programDuration && programDuration <= 30 \n-    ? Array.from({ length: 34 }, (_, i) => ({ hour: 6 + Math.floor(i / 2), minute: (i % 2) * 30 })) // 30분 단위\n-    : Array.from({ length: 17 }, (_, i) => ({ hour: 6 + i, minute: 0 })); // 1시간 단위\n+  // 항상 30분 단위로 시간 슬롯 생성\n+  const timeSlots = generateTimeSlots(programDuration);\n   \n   // 필터링된 직원 목록 (선택된 코치만)\n   const filteredStaff = staffList.filter(staff => \n     selectedStaffIds.includes(staff.id) && staff.role === '코치'\n@@ -282,10 +280,10 @@\n     const startMinutes = (eventStart.getTime() - dayStart.getTime()) / (1000 * 60);\n     const durationMinutes = (eventEnd.getTime() - eventStart.getTime()) / (1000 * 60);\n \n     return {\n-      top: Math.max(0, (startMinutes / 60) * 60), // 1시간당 60px\n-      height: Math.max(20, (durationMinutes / 60) * 60)\n+      top: Math.max(0, (startMinutes / 30) * 30), // 30분당 30px (30분 단위로 조정)\n+      height: Math.max(15, (durationMinutes / 30) * 30)\n     };\n   };\n \n   // 같은 시간대 이벤트들의 위치 조정\n@@ -374,9 +372,9 @@\n           {/* 시간 컬럼 */}\n           <TimeColumn>\n             {timeSlots.map(slot => (\n               <TimeSlot key={`${slot.hour}-${slot.minute}`}>\n-                {slot.minute === 0 ? `${slot.hour}:00` : ''}\n+                {slot.minute === 0 ? slot.display : ''}\n               </TimeSlot>\n             ))}\n           </TimeColumn>\n \n"
                },
                {
                    "date": 1761740206438,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,9 @@\n   onEventClick?: (event: ScheduleEvent) => void;\n   onEventCreate?: (startTime: Date, endTime: Date, staffId?: string) => void;\n   allowEmptyStaff?: boolean; // 코치가 없어도 달력 표시 허용\n   programDuration?: number; // 프로그램 소요시간 (분 단위)\n+  disablePastTime?: boolean; // 과거 시간 비활성화 여부\n }\n \n const WeekContainer = styled.div`\n   display: flex;\n@@ -133,16 +134,18 @@\n     border-right: none;\n   }\n `;\n \n-const DayTimeSlot = styled.div`\n+const DayTimeSlot = styled.div<{ $isPastTime?: boolean }>`\n   height: 30px;\n   border-bottom: 1px solid ${AppColors.borderLight}20;\n   position: relative;\n-  cursor: pointer;\n+  cursor: ${props => props.$isPastTime ? 'not-allowed' : 'pointer'};\n+  opacity: ${props => props.$isPastTime ? 0.5 : 1};\n+  background-color: ${props => props.$isPastTime ? AppColors.onSurface + '05' : 'transparent'};\n \n   &:hover {\n-    background-color: ${AppColors.primary}08;\n+    background-color: ${props => props.$isPastTime ? AppColors.onSurface + '05' : AppColors.primary + '08'};\n   }\n `;\n \n const StaffEventsContainer = styled.div`\n@@ -239,9 +242,10 @@\n   selectedStaffIds,\n   onEventClick,\n   onEventCreate,\n   allowEmptyStaff = false,\n-  programDuration\n+  programDuration,\n+  disablePastTime = false\n }) => {\n   const weekDates = getWeekDates(currentDate);\n   \n   // 항상 30분 단위로 시간 슬롯 생성\n@@ -322,8 +326,19 @@\n     };\n   };\n \n   const handleSlotClick = (dayDate: Date, slot: { hour: number; minute: number }) => {\n+    // 과거 시간 체크 (disablePastTime이 true인 경우)\n+    if (disablePastTime) {\n+      const now = new Date();\n+      const slotTime = new Date(dayDate);\n+      slotTime.setHours(slot.hour, slot.minute, 0, 0);\n+      \n+      if (slotTime < now) {\n+        return; // 과거 시간인 경우 클릭 이벤트 무시\n+      }\n+    }\n+\n     if (onEventCreate) {\n       const startTime = new Date(dayDate);\n       startTime.setHours(slot.hour, slot.minute, 0, 0);\n       \n@@ -394,15 +409,26 @@\n                 key={day.date.toISOString()}\n                 $isToday={day.isToday}\n                 $isWeekend={day.isWeekend}\n               >\n-                {timeSlots.map(slot => (\n-                  <DayTimeSlot\n-                    key={`${day.date.toISOString()}-${slot.hour}-${slot.minute}`}\n-                    onClick={() => handleSlotClick(day.date, slot)}\n-                  />\n-                ))}\n+                {timeSlots.map(slot => {\n+                  // 과거 시간 체크\n+                  const isPastTime = disablePastTime && (() => {\n+                    const now = new Date();\n+                    const slotTime = new Date(day.date);\n+                    slotTime.setHours(slot.hour, slot.minute, 0, 0);\n+                    return slotTime < now;\n+                  })();\n \n+                  return (\n+                    <DayTimeSlot\n+                      key={`${day.date.toISOString()}-${slot.hour}-${slot.minute}`}\n+                      $isPastTime={isPastTime}\n+                      onClick={() => handleSlotClick(day.date, slot)}\n+                    />\n+                  );\n+                })}\n+\n                 {/* 해당 날짜의 이벤트들 */}\n                 <StaffEventsContainer>\n                   {dayEvents.map(event => {\n                     const position = getEventPosition(event, day.date);\n"
                },
                {
                    "date": 1761741030991,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,12 +10,17 @@\n   events: ScheduleEvent[];\n   staffList: StaffInfo[];\n   selectedStaffIds: string[];\n   onEventClick?: (event: ScheduleEvent) => void;\n-  onEventCreate?: (startTime: Date, endTime: Date, staffId?: string) => void;\n+  onEventCreate?: (startTime: Date, endTime: Date, staffId?: string, replaceEventId?: string) => void;\n   allowEmptyStaff?: boolean; // 코치가 없어도 달력 표시 허용\n   programDuration?: number; // 프로그램 소요시간 (분 단위)\n   disablePastTime?: boolean; // 과거 시간 비활성화 여부\n+  currentUser?: {\n+    id: string;\n+    role: 'master' | 'coach' | 'admin';\n+    name?: string;\n+  }; // 현재 사용자 정보\n }\n \n const WeekContainer = styled.div`\n   display: flex;\n@@ -243,9 +248,10 @@\n   onEventClick,\n   onEventCreate,\n   allowEmptyStaff = false,\n   programDuration,\n-  disablePastTime = false\n+  disablePastTime = false,\n+  currentUser\n }) => {\n   const weekDates = getWeekDates(currentDate);\n   \n   // 항상 30분 단위로 시간 슬롯 생성\n@@ -325,8 +331,22 @@\n       opacity: 0.95\n     };\n   };\n \n+  // 특정 시간이 휴일/휴게시간에 포함되는지 확인\n+  const isTimeInHolidayOrBreak = (staffId: string, dayDate: Date, hour: number, minute: number) => {\n+    const targetTime = new Date(dayDate);\n+    targetTime.setHours(hour, minute, 0, 0);\n+    \n+    // 휴일/휴게시간 이벤트 중에서 해당 시간이 포함되는 것이 있는지 확인\n+    return events.some(event => \n+      event.staffId === staffId &&\n+      (event.type === 'holiday' || event.type === 'break') &&\n+      targetTime >= event.startTime &&\n+      targetTime < event.endTime\n+    );\n+  };\n+\n   const handleSlotClick = (dayDate: Date, slot: { hour: number; minute: number }) => {\n     // 과거 시간 체크 (disablePastTime이 true인 경우)\n     if (disablePastTime) {\n       const now = new Date();\n@@ -337,8 +357,44 @@\n         return; // 과거 시간인 경우 클릭 이벤트 무시\n       }\n     }\n \n+    // WeekView에서는 선택된 코치가 하나일 때만 예약 생성\n+    if (filteredStaff.length !== 1) {\n+      alert('예약을 생성하려면 코치를 하나만 선택해주세요.');\n+      return;\n+    }\n+\n+    const staffId = filteredStaff[0].id;\n+\n+    // 해당 시간이 휴일/휴게시간에 포함되는지 확인\n+    const isInHolidayOrBreak = isTimeInHolidayOrBreak(staffId, dayDate, slot.hour, slot.minute);\n+    \n+    if (isInHolidayOrBreak) {\n+      // 휴일/휴게시간에 포함된 경우, 코치 권한이 있는지 확인\n+      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+        // 마스터이거나 본인 코치인 경우 허용\n+        if (window.confirm(`이 시간대는 휴일/휴게시간입니다. 예약을 생성하시겠습니까?`)) {\n+          // 예약 생성 진행\n+          if (onEventCreate) {\n+            const startTime = new Date(dayDate);\n+            startTime.setHours(slot.hour, slot.minute, 0, 0);\n+            \n+            const endTime = new Date(startTime);\n+            const duration = programDuration || 30;\n+            const actualDuration = duration > 30 ? 60 : duration;\n+            endTime.setMinutes(endTime.getMinutes() + actualDuration);\n+            \n+            onEventCreate(startTime, endTime, staffId);\n+          }\n+        }\n+      } else {\n+        // 일반 사용자는 휴일/휴게시간에 예약 불가\n+        alert('휴일 및 휴게시간에는 예약을 생성할 수 없습니다. 관리자 또는 해당 코치에게 문의하세요.');\n+      }\n+      return;\n+    }\n+\n     if (onEventCreate) {\n       const startTime = new Date(dayDate);\n       startTime.setHours(slot.hour, slot.minute, 0, 0);\n       \n@@ -347,9 +403,9 @@\n       const duration = programDuration || 30; // 기본 30분\n       const actualDuration = duration > 30 ? 60 : duration; // 50분은 1시간으로 처리\n       endTime.setMinutes(endTime.getMinutes() + actualDuration);\n       \n-      onEventCreate(startTime, endTime);\n+      onEventCreate(startTime, endTime, staffId);\n     }\n   };\n \n   if (!allowEmptyStaff && filteredStaff.length === 0) {\n"
                },
                {
                    "date": 1761741441372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import { AppColors } from '../../styles/colors';\n import { AppTextStyles } from '../../styles/textStyles';\n import { ScheduleEvent, StaffInfo } from './types';\n import { getWeekDates, isEventOnDate, generateTimeSlots } from './utils';\n+import type { WeeklyHolidaySettings } from '../../utils/db/types';\n \n interface WeekViewProps {\n   currentDate: Date;\n   events: ScheduleEvent[];\n@@ -14,8 +15,9 @@\n   onEventCreate?: (startTime: Date, endTime: Date, staffId?: string, replaceEventId?: string) => void;\n   allowEmptyStaff?: boolean; // 코치가 없어도 달력 표시 허용\n   programDuration?: number; // 프로그램 소요시간 (분 단위)\n   disablePastTime?: boolean; // 과거 시간 비활성화 여부\n+  weeklyHolidaySettings?: WeeklyHolidaySettings[]; // 주별 휴일설정 추가\n   currentUser?: {\n     id: string;\n     role: 'master' | 'coach' | 'admin';\n     name?: string;\n@@ -249,8 +251,9 @@\n   onEventCreate,\n   allowEmptyStaff = false,\n   programDuration,\n   disablePastTime = false,\n+  weeklyHolidaySettings = [],\n   currentUser\n }) => {\n   const weekDates = getWeekDates(currentDate);\n   \n@@ -331,17 +334,42 @@\n       opacity: 0.95\n     };\n   };\n \n-  // 특정 시간이 휴일/휴게시간에 포함되는지 확인\n-  const isTimeInHolidayOrBreak = (staffId: string, dayDate: Date, hour: number, minute: number) => {\n+  // 특정 시간이 휴일인지 확인 (WeeklyHolidaySettings 기반)\n+  const isTimeInHoliday = (staffId: string, dayDate: Date, hour: number, minute: number) => {\n+    if (!weeklyHolidaySettings || weeklyHolidaySettings.length === 0) return false;\n+    \n+    const dayOfWeek = dayDate.getDay(); // 0: 일요일, 1: 월요일, ..., 6: 토요일\n+    const weekStartDate = (() => {\n+      const monday = new Date(dayDate);\n+      monday.setDate(dayDate.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));\n+      return monday.toISOString().split('T')[0];\n+    })();\n+\n+    const weeklySettings = weeklyHolidaySettings.find(\n+      s => s.staffId === staffId && s.weekStartDate === weekStartDate\n+    );\n+\n+    if (weeklySettings) {\n+      const dayKeys = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n+      const dayKey = dayKeys[dayOfWeek] as keyof typeof weeklySettings.weekDays;\n+      const daySettings = weeklySettings.weekDays[dayKey];\n+\n+      return daySettings?.isHoliday || false;\n+    }\n+\n+    return false;\n+  };\n+\n+  // 특정 시간이 휴게시간에 포함되는지 확인\n+  const isTimeInBreak = (staffId: string, dayDate: Date, hour: number, minute: number) => {\n     const targetTime = new Date(dayDate);\n     targetTime.setHours(hour, minute, 0, 0);\n     \n-    // 휴일/휴게시간 이벤트 중에서 해당 시간이 포함되는 것이 있는지 확인\n     return events.some(event => \n       event.staffId === staffId &&\n-      (event.type === 'holiday' || event.type === 'break') &&\n+      event.type === 'break' &&\n       targetTime >= event.startTime &&\n       targetTime < event.endTime\n     );\n   };\n@@ -365,16 +393,16 @@\n     }\n \n     const staffId = filteredStaff[0].id;\n \n-    // 해당 시간이 휴일/휴게시간에 포함되는지 확인\n-    const isInHolidayOrBreak = isTimeInHolidayOrBreak(staffId, dayDate, slot.hour, slot.minute);\n+    // 해당 시간이 휴일인지 확인\n+    const isInHoliday = isTimeInHoliday(staffId, dayDate, slot.hour, slot.minute);\n     \n-    if (isInHolidayOrBreak) {\n-      // 휴일/휴게시간에 포함된 경우, 코치 권한이 있는지 확인\n+    if (isInHoliday) {\n+      // 휴일에 포함된 경우, 코치 권한이 있는지 확인\n       if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n         // 마스터이거나 본인 코치인 경우 허용\n-        if (window.confirm(`이 시간대는 휴일/휴게시간입니다. 예약을 생성하시겠습니까?`)) {\n+        if (window.confirm(`이 시간대는 휴일입니다. 예약을 생성하시겠습니까?`)) {\n           // 예약 생성 진행\n           if (onEventCreate) {\n             const startTime = new Date(dayDate);\n             startTime.setHours(slot.hour, slot.minute, 0, 0);\n@@ -387,14 +415,21 @@\n             onEventCreate(startTime, endTime, staffId);\n           }\n         }\n       } else {\n-        // 일반 사용자는 휴일/휴게시간에 예약 불가\n-        alert('휴일 및 휴게시간에는 예약을 생성할 수 없습니다. 관리자 또는 해당 코치에게 문의하세요.');\n+        // 일반 사용자는 휴일에 예약 불가\n+        alert('휴일에는 예약을 생성할 수 없습니다. 관리자 또는 해당 코치에게 문의하세요.');\n       }\n       return;\n     }\n \n+    // 휴게시간 체크\n+    const isInBreak = isTimeInBreak(staffId, dayDate, slot.hour, slot.minute);\n+    if (isInBreak) {\n+      alert('휴게시간에는 예약을 생성할 수 없습니다.');\n+      return;\n+    }\n+\n     if (onEventCreate) {\n       const startTime = new Date(dayDate);\n       startTime.setHours(slot.hour, slot.minute, 0, 0);\n       \n"
                },
                {
                    "date": 1761742563358,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,19 +141,40 @@\n     border-right: none;\n   }\n `;\n \n-const DayTimeSlot = styled.div<{ $isPastTime?: boolean }>`\n+const DayTimeSlot = styled.div<{ $isPastTime?: boolean; $isHoliday?: boolean }>`\n   height: 30px;\n   border-bottom: 1px solid ${AppColors.borderLight}20;\n   position: relative;\n   cursor: ${props => props.$isPastTime ? 'not-allowed' : 'pointer'};\n   opacity: ${props => props.$isPastTime ? 0.5 : 1};\n-  background-color: ${props => props.$isPastTime ? AppColors.onSurface + '05' : 'transparent'};\n+  background-color: ${props => {\n+    if (props.$isPastTime) return AppColors.onSurface + '05';\n+    if (props.$isHoliday) return '#f8717115'; // 휴일 배경색\n+    return 'transparent';\n+  }};\n+  border-left: ${props => props.$isHoliday ? '3px solid #f87171' : 'none'};\n \n   &:hover {\n-    background-color: ${props => props.$isPastTime ? AppColors.onSurface + '05' : AppColors.primary + '08'};\n+    background-color: ${props => {\n+      if (props.$isPastTime) return AppColors.onSurface + '05';\n+      if (props.$isHoliday) return '#f8717125'; // 휴일 호버 색상\n+      return AppColors.primary + '08';\n+    }};\n   }\n+\n+  &::after {\n+    content: ${props => props.$isHoliday ? '\"휴일\"' : 'none'};\n+    position: absolute;\n+    left: 8px;\n+    top: 50%;\n+    transform: translateY(-50%);\n+    font-size: 10px;\n+    color: #dc2626;\n+    font-weight: 500;\n+    pointer-events: none;\n+  }\n `;\n \n const StaffEventsContainer = styled.div`\n   position: absolute;\n@@ -336,29 +357,44 @@\n   };\n \n   // 특정 시간이 휴일인지 확인 (WeeklyHolidaySettings 기반)\n   const isTimeInHoliday = (staffId: string, dayDate: Date, hour: number, minute: number) => {\n-    if (!weeklyHolidaySettings || weeklyHolidaySettings.length === 0) return false;\n+    if (!weeklyHolidaySettings || weeklyHolidaySettings.length === 0) {\n+      console.log('WeekView - weeklyHolidaySettings가 없음:', weeklyHolidaySettings?.length);\n+      return false;\n+    }\n     \n     const dayOfWeek = dayDate.getDay(); // 0: 일요일, 1: 월요일, ..., 6: 토요일\n     const weekStartDate = (() => {\n       const monday = new Date(dayDate);\n       monday.setDate(dayDate.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));\n       return monday.toISOString().split('T')[0];\n     })();\n \n+    console.log('WeekView 휴일 체크:', { \n+      staffId, \n+      hour, \n+      minute, \n+      dayOfWeek, \n+      weekStartDate,\n+      settingsCount: weeklyHolidaySettings.length,\n+      dayDate: dayDate.toISOString().split('T')[0]\n+    });\n+\n     const weeklySettings = weeklyHolidaySettings.find(\n       s => s.staffId === staffId && s.weekStartDate === weekStartDate\n     );\n \n     if (weeklySettings) {\n       const dayKeys = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n       const dayKey = dayKeys[dayOfWeek] as keyof typeof weeklySettings.weekDays;\n       const daySettings = weeklySettings.weekDays[dayKey];\n-\n+      \n+      console.log('WeekView 휴일 설정 찾음:', { dayKey, isHoliday: daySettings?.isHoliday });\n       return daySettings?.isHoliday || false;\n     }\n \n+    console.log('WeekView 해당 주차 휴일 설정 없음');\n     return false;\n   };\n \n   // 특정 시간이 휴게시간에 포함되는지 확인\n@@ -509,12 +545,20 @@\n                     slotTime.setHours(slot.hour, slot.minute, 0, 0);\n                     return slotTime < now;\n                   })();\n \n+                  // 선택된 코치들의 휴일 체크\n+                  const isHolidayForAnyStaff = filteredStaff.length > 0 \n+                    ? filteredStaff.some(staff => \n+                        isTimeInHoliday(staff.id, day.date, slot.hour, slot.minute)\n+                      )\n+                    : false;\n+\n                   return (\n                     <DayTimeSlot\n                       key={`${day.date.toISOString()}-${slot.hour}-${slot.minute}`}\n                       $isPastTime={isPastTime}\n+                      $isHoliday={isHolidayForAnyStaff}\n                       onClick={() => handleSlotClick(day.date, slot)}\n                     />\n                   );\n                 })}\n"
                },
                {
                    "date": 1762171198316,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import styled from 'styled-components';\n import { AppColors } from '../../styles/colors';\n import { AppTextStyles } from '../../styles/textStyles';\n import { ScheduleEvent, StaffInfo } from './types';\n-import { getWeekDates, isEventOnDate, generateTimeSlots } from './utils';\n+import { getWeekDates, isEventOnDate, generateTimeSlots, getHolidayStaffNames, formatHolidayInfo } from './utils';\n import type { WeeklyHolidaySettings } from '../../utils/db/types';\n \n interface WeekViewProps {\n   currentDate: Date;\n@@ -82,8 +82,16 @@\n     AppColors.onSurface\n   };\n `;\n \n+const HolidayInfo = styled.div`\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  color: ${AppColors.error};\n+  font-weight: 500;\n+  margin-top: 2px;\n+  line-height: 1.2;\n+`;\n+\n const ScrollableContent = styled.div`\n   flex: 1;\n   overflow-y: auto;\n   max-height: 600px;\n@@ -493,20 +501,27 @@\n     <WeekContainer>\n       {/* 헤더 */}\n       <Header>\n         <TimeHeader>시간</TimeHeader>\n-        {weekDates.map(day => (\n-          <DayHeader \n-            key={day.date.toISOString()} \n-            $isToday={day.isToday}\n-            $isWeekend={day.isWeekend}\n-          >\n-            <DayName $isWeekend={day.isWeekend}>{day.dayName}</DayName>\n-            <DayDate $isToday={day.isToday} $isWeekend={day.isWeekend}>\n-              {day.date.getDate()}\n-            </DayDate>\n-          </DayHeader>\n-        ))}\n+        {weekDates.map(day => {\n+          // 각 날짜의 휴일 정보 가져오기\n+          const holidayStaffNames = getHolidayStaffNames(day.date, weeklyHolidaySettings || [], staffList);\n+          const holidayInfo = formatHolidayInfo(holidayStaffNames);\n+          \n+          return (\n+            <DayHeader \n+              key={day.date.toISOString()} \n+              $isToday={day.isToday}\n+              $isWeekend={day.isWeekend}\n+            >\n+              <DayName $isWeekend={day.isWeekend}>{day.dayName}</DayName>\n+              <DayDate $isToday={day.isToday} $isWeekend={day.isWeekend}>\n+                {day.date.getDate()}\n+              </DayDate>\n+              {holidayInfo && <HolidayInfo>{holidayInfo}</HolidayInfo>}\n+            </DayHeader>\n+          );\n+        })}\n       </Header>\n \n       {/* 스크롤 가능한 타임 그리드 */}\n       <ScrollableContent>\n"
                },
                {
                    "date": 1762171411258,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -149,40 +149,25 @@\n     border-right: none;\n   }\n `;\n \n-const DayTimeSlot = styled.div<{ $isPastTime?: boolean; $isHoliday?: boolean }>`\n+const DayTimeSlot = styled.div<{ $isPastTime?: boolean }>`\n   height: 30px;\n   border-bottom: 1px solid ${AppColors.borderLight}20;\n   position: relative;\n   cursor: ${props => props.$isPastTime ? 'not-allowed' : 'pointer'};\n   opacity: ${props => props.$isPastTime ? 0.5 : 1};\n   background-color: ${props => {\n     if (props.$isPastTime) return AppColors.onSurface + '05';\n-    if (props.$isHoliday) return '#f8717115'; // 휴일 배경색\n     return 'transparent';\n   }};\n-  border-left: ${props => props.$isHoliday ? '3px solid #f87171' : 'none'};\n \n   &:hover {\n     background-color: ${props => {\n       if (props.$isPastTime) return AppColors.onSurface + '05';\n-      if (props.$isHoliday) return '#f8717125'; // 휴일 호버 색상\n       return AppColors.primary + '08';\n     }};\n   }\n-\n-  &::after {\n-    content: ${props => props.$isHoliday ? '\"휴일\"' : 'none'};\n-    position: absolute;\n-    left: 8px;\n-    top: 50%;\n-    transform: translateY(-50%);\n-    font-size: 10px;\n-    color: #dc2626;\n-    font-weight: 500;\n-    pointer-events: none;\n-  }\n `;\n \n const StaffEventsContainer = styled.div`\n   position: absolute;\n@@ -363,49 +348,8 @@\n       opacity: 0.95\n     };\n   };\n \n-  // 특정 시간이 휴일인지 확인 (WeeklyHolidaySettings 기반)\n-  const isTimeInHoliday = (staffId: string, dayDate: Date, hour: number, minute: number) => {\n-    if (!weeklyHolidaySettings || weeklyHolidaySettings.length === 0) {\n-      console.log('WeekView - weeklyHolidaySettings가 없음:', weeklyHolidaySettings?.length);\n-      return false;\n-    }\n-    \n-    const dayOfWeek = dayDate.getDay(); // 0: 일요일, 1: 월요일, ..., 6: 토요일\n-    const weekStartDate = (() => {\n-      const monday = new Date(dayDate);\n-      monday.setDate(dayDate.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));\n-      return monday.toISOString().split('T')[0];\n-    })();\n-\n-    console.log('WeekView 휴일 체크:', { \n-      staffId, \n-      hour, \n-      minute, \n-      dayOfWeek, \n-      weekStartDate,\n-      settingsCount: weeklyHolidaySettings.length,\n-      dayDate: dayDate.toISOString().split('T')[0]\n-    });\n-\n-    const weeklySettings = weeklyHolidaySettings.find(\n-      s => s.staffId === staffId && s.weekStartDate === weekStartDate\n-    );\n-\n-    if (weeklySettings) {\n-      const dayKeys = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n-      const dayKey = dayKeys[dayOfWeek] as keyof typeof weeklySettings.weekDays;\n-      const daySettings = weeklySettings.weekDays[dayKey];\n-      \n-      console.log('WeekView 휴일 설정 찾음:', { dayKey, isHoliday: daySettings?.isHoliday });\n-      return daySettings?.isHoliday || false;\n-    }\n-\n-    console.log('WeekView 해당 주차 휴일 설정 없음');\n-    return false;\n-  };\n-\n   // 특정 시간이 휴게시간에 포함되는지 확인\n   const isTimeInBreak = (staffId: string, dayDate: Date, hour: number, minute: number) => {\n     const targetTime = new Date(dayDate);\n     targetTime.setHours(hour, minute, 0, 0);\n@@ -437,16 +381,17 @@\n     }\n \n     const staffId = filteredStaff[0].id;\n \n-    // 해당 시간이 휴일인지 확인\n-    const isInHoliday = isTimeInHoliday(staffId, dayDate, slot.hour, slot.minute);\n+    // 해당 날짜가 휴일인지 확인 (날짜 레벨에서)\n+    const holidayStaffNames = getHolidayStaffNames(dayDate, weeklyHolidaySettings || [], staffList);\n+    const isStaffOnHoliday = holidayStaffNames.includes(filteredStaff[0].name);\n     \n-    if (isInHoliday) {\n+    if (isStaffOnHoliday) {\n       // 휴일에 포함된 경우, 코치 권한이 있는지 확인\n       if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n         // 마스터이거나 본인 코치인 경우 허용\n-        if (window.confirm(`이 시간대는 휴일입니다. 예약을 생성하시겠습니까?`)) {\n+        if (window.confirm(`이 날짜는 휴일입니다. 예약을 생성하시겠습니까?`)) {\n           // 예약 생성 진행\n           if (onEventCreate) {\n             const startTime = new Date(dayDate);\n             startTime.setHours(slot.hour, slot.minute, 0, 0);\n@@ -560,20 +505,12 @@\n                     slotTime.setHours(slot.hour, slot.minute, 0, 0);\n                     return slotTime < now;\n                   })();\n \n-                  // 선택된 코치들의 휴일 체크\n-                  const isHolidayForAnyStaff = filteredStaff.length > 0 \n-                    ? filteredStaff.some(staff => \n-                        isTimeInHoliday(staff.id, day.date, slot.hour, slot.minute)\n-                      )\n-                    : false;\n-\n                   return (\n                     <DayTimeSlot\n                       key={`${day.date.toISOString()}-${slot.hour}-${slot.minute}`}\n                       $isPastTime={isPastTime}\n-                      $isHoliday={isHolidayForAnyStaff}\n                       onClick={() => handleSlotClick(day.date, slot)}\n                     />\n                   );\n                 })}\n"
                },
                {
                    "date": 1762253728619,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -362,8 +362,33 @@\n     );\n   };\n \n   const handleSlotClick = (dayDate: Date, slot: { hour: number; minute: number }) => {\n+    // WeekView에서는 선택된 코치가 하나일 때만 예약 생성\n+    if (filteredStaff.length !== 1) {\n+      alert('예약을 생성하려면 코치를 하나만 선택해주세요.');\n+      return;\n+    }\n+\n+    const staffId = filteredStaff[0].id;\n+    const staff = staffList.find(s => s.id === staffId);\n+\n+    // 계약 기간 체크\n+    if (staff?.contractStartDate && staff?.contractEndDate) {\n+      const contractStart = new Date(staff.contractStartDate);\n+      contractStart.setHours(0, 0, 0, 0);\n+      const contractEnd = new Date(staff.contractEndDate);\n+      contractEnd.setHours(0, 0, 0, 0);\n+      \n+      const selectedDate = new Date(dayDate);\n+      selectedDate.setHours(0, 0, 0, 0);\n+      \n+      if (selectedDate < contractStart || selectedDate > contractEnd) {\n+        alert('해당 코치의 계약 기간 외입니다. 예약을 생성할 수 없습니다.');\n+        return;\n+      }\n+    }\n+\n     // 과거 시간 체크 (disablePastTime이 true인 경우)\n     if (disablePastTime) {\n       const now = new Date();\n       const slotTime = new Date(dayDate);\n@@ -373,16 +398,8 @@\n         return; // 과거 시간인 경우 클릭 이벤트 무시\n       }\n     }\n \n-    // WeekView에서는 선택된 코치가 하나일 때만 예약 생성\n-    if (filteredStaff.length !== 1) {\n-      alert('예약을 생성하려면 코치를 하나만 선택해주세요.');\n-      return;\n-    }\n-\n-    const staffId = filteredStaff[0].id;\n-\n     // 해당 날짜가 휴일인지 확인 (날짜 레벨에서)\n     const holidayStaffNames = getHolidayStaffNames(dayDate, weeklyHolidaySettings || [], staffList);\n     const isStaffOnHoliday = holidayStaffNames.includes(filteredStaff[0].name);\n     \n"
                },
                {
                    "date": 1762254448800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -149,25 +149,46 @@\n     border-right: none;\n   }\n `;\n \n-const DayTimeSlot = styled.div<{ $isPastTime?: boolean }>`\n+const DayTimeSlot = styled.div<{ \n+  $isPastTime?: boolean; \n+  $isAvailable?: boolean; \n+  $isBreakTime?: boolean; \n+}>`\n   height: 30px;\n   border-bottom: 1px solid ${AppColors.borderLight}20;\n   position: relative;\n   cursor: ${props => props.$isPastTime ? 'not-allowed' : 'pointer'};\n-  opacity: ${props => props.$isPastTime ? 0.5 : 1};\n+  transition: background-color 0.2s ease;\n   background-color: ${props => {\n     if (props.$isPastTime) return AppColors.onSurface + '05';\n+    if (props.$isBreakTime) return '#fbbf2415'; // 휴게시간 배경색\n+    if (props.$isAvailable === false) return AppColors.onSurface + '10'; // 근무시간 외\n     return 'transparent';\n   }};\n+  border-left: ${props => props.$isBreakTime ? '3px solid #fbbf24' : 'none'};\n \n   &:hover {\n     background-color: ${props => {\n-      if (props.$isPastTime) return AppColors.onSurface + '05';\n+      if (props.$isPastTime) return AppColors.onSurface + '10';\n+      if (props.$isBreakTime) return '#fbbf2425'; // 휴게시간 호버 색상\n+      if (props.$isAvailable === false) return AppColors.onSurface + '15';\n       return AppColors.primary + '08';\n     }};\n   }\n+\n+  &::after {\n+    content: ${props => props.$isBreakTime ? '\"휴게\"' : 'none'};\n+    position: absolute;\n+    top: 50%;\n+    left: 50%;\n+    transform: translate(-50%, -50%);\n+    font-size: 10px;\n+    color: #fbbf24;\n+    font-weight: 500;\n+    pointer-events: none;\n+  }\n `;\n \n const StaffEventsContainer = styled.div`\n   position: absolute;\n"
                },
                {
                    "date": 1762254646600,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -382,8 +382,55 @@\n       targetTime < event.endTime\n     );\n   };\n \n+  // 특정 직원의 특정 시간대가 예약 가능한지 확인하는 함수\n+  const isTimeSlotAvailable = (staffId: string, hour: number, minute: number, targetDate: Date) => {\n+    const dayOfWeek = targetDate.getDay();\n+    const weekStartDate = (() => {\n+      const monday = new Date(targetDate);\n+      monday.setDate(targetDate.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));\n+      return monday.toISOString().split('T')[0];\n+    })();\n+\n+    if (!weeklyHolidaySettings) return true;\n+\n+    const weeklySettings = weeklyHolidaySettings.find(\n+      s => s.staffId === staffId && s.weekStartDate === weekStartDate\n+    );\n+\n+    if (weeklySettings) {\n+      const dayKeys = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n+      const dayKey = dayKeys[dayOfWeek] as keyof typeof weeklySettings.weekDays;\n+      const daySettings = weeklySettings.weekDays[dayKey];\n+\n+      if (daySettings) {\n+        // 휴일이면 예약 불가\n+        if (daySettings.isHoliday) return false;\n+\n+        // 근무시간 외면 예약 불가\n+        if (daySettings.workingHours) {\n+          const { start, end } = daySettings.workingHours;\n+          const currentTimeInMinutes = hour * 60 + minute;\n+          if (currentTimeInMinutes < start || currentTimeInMinutes >= end) return false;\n+        }\n+\n+        // 휴게시간이면 예약 불가\n+        if (daySettings.breakTimes) {\n+          for (const breakTime of daySettings.breakTimes) {\n+            const currentTimeInMinutes = hour * 60 + minute;\n+            if (currentTimeInMinutes >= breakTime.start && currentTimeInMinutes < breakTime.end) return false;\n+          }\n+        }\n+      }\n+    } else {\n+      // 주별 설정이 없으면 기본값 (주말은 휴일)\n+      if (dayOfWeek === 0 || dayOfWeek === 6) return false;\n+    }\n+\n+    return true;\n+  };\n+\n   const handleSlotClick = (dayDate: Date, slot: { hour: number; minute: number }) => {\n     // WeekView에서는 선택된 코치가 하나일 때만 예약 생성\n     if (filteredStaff.length !== 1) {\n       alert('예약을 생성하려면 코치를 하나만 선택해주세요.');\n@@ -448,15 +495,31 @@\n       }\n       return;\n     }\n \n-    // 휴게시간 체크\n+    // 휴게시간 체크 (마스터나 본인 코치는 예외)\n     const isInBreak = isTimeInBreak(staffId, dayDate, slot.hour, slot.minute);\n     if (isInBreak) {\n-      alert('휴게시간에는 예약을 생성할 수 없습니다.');\n-      return;\n+      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+        // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n+      } else {\n+        alert('휴게시간에는 예약을 생성할 수 없습니다.');\n+        return;\n+      }\n     }\n \n+    // 근무시간 체크 (마스터나 본인 코치는 예외)\n+    const isAvailable = isTimeSlotAvailable(staffId, slot.hour, slot.minute, dayDate);\n+    if (!isAvailable) {\n+      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+        // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n+      } else {\n+        // 일반 사용자는 근무시간 외/휴일/휴게시간에 예약 불가\n+        alert('이 시간대는 예약할 수 없습니다.');\n+        return;\n+      }\n+    }\n+\n     if (onEventCreate) {\n       const startTime = new Date(dayDate);\n       startTime.setHours(slot.hour, slot.minute, 0, 0);\n       \n@@ -543,12 +606,31 @@\n                     slotTime.setHours(slot.hour, slot.minute, 0, 0);\n                     return slotTime < now;\n                   })();\n \n+                  // 선택된 코치들 중 하나라도 해당 시간대를 사용할 수 있는지 체크\n+                  let isAnyAvailable = false;\n+                  let isAnyInBreak = false;\n+\n+                  if (filteredStaff.length > 0) {\n+                    for (const staff of filteredStaff) {\n+                      const isAvailable = isTimeSlotAvailable(staff.id, slot.hour, slot.minute, day.date);\n+                      const isInBreak = isTimeInBreak(staff.id, day.date, slot.hour, slot.minute);\n+                      \n+                      if (isAvailable) isAnyAvailable = true;\n+                      if (isInBreak) isAnyInBreak = true;\n+                    }\n+                  } else {\n+                    // 코치가 선택되지 않은 경우 기본값으로 사용 가능으로 표시\n+                    isAnyAvailable = true;\n+                  }\n+\n                   return (\n                     <DayTimeSlot\n                       key={`${day.date.toISOString()}-${slot.hour}-${slot.minute}`}\n                       $isPastTime={isPastTime}\n+                      $isAvailable={isAnyAvailable}\n+                      $isBreakTime={isAnyInBreak}\n                       onClick={() => handleSlotClick(day.date, slot)}\n                     />\n                   );\n                 })}\n"
                },
                {
                    "date": 1762254758202,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -382,9 +382,9 @@\n       targetTime < event.endTime\n     );\n   };\n \n-  // 특정 직원의 특정 시간대가 예약 가능한지 확인하는 함수\n+  // 특정 직원의 특정 시간대가 예약 가능한지 확인하는 함수 (휴일 제외, 근무시간과 휴게시간만 체크)\n   const isTimeSlotAvailable = (staffId: string, hour: number, minute: number, targetDate: Date) => {\n     const dayOfWeek = targetDate.getDay();\n     const weekStartDate = (() => {\n       const monday = new Date(targetDate);\n@@ -403,11 +403,8 @@\n       const dayKey = dayKeys[dayOfWeek] as keyof typeof weeklySettings.weekDays;\n       const daySettings = weeklySettings.weekDays[dayKey];\n \n       if (daySettings) {\n-        // 휴일이면 예약 불가\n-        if (daySettings.isHoliday) return false;\n-\n         // 근무시간 외면 예약 불가\n         if (daySettings.workingHours) {\n           const { start, end } = daySettings.workingHours;\n           const currentTimeInMinutes = hour * 60 + minute;\n@@ -421,11 +418,8 @@\n             if (currentTimeInMinutes >= breakTime.start && currentTimeInMinutes < breakTime.end) return false;\n           }\n         }\n       }\n-    } else {\n-      // 주별 설정이 없으면 기본값 (주말은 휴일)\n-      if (dayOfWeek === 0 || dayOfWeek === 6) return false;\n     }\n \n     return true;\n   };\n@@ -606,31 +600,24 @@\n                     slotTime.setHours(slot.hour, slot.minute, 0, 0);\n                     return slotTime < now;\n                   })();\n \n-                  // 선택된 코치들 중 하나라도 해당 시간대를 사용할 수 있는지 체크\n-                  let isAnyAvailable = false;\n-                  let isAnyInBreak = false;\n+                  // 코치가 하나만 선택된 경우에만 시간 가용성 체크\n+                  let isAvailable = true;\n+                  let isInBreak = false;\n \n-                  if (filteredStaff.length > 0) {\n-                    for (const staff of filteredStaff) {\n-                      const isAvailable = isTimeSlotAvailable(staff.id, slot.hour, slot.minute, day.date);\n-                      const isInBreak = isTimeInBreak(staff.id, day.date, slot.hour, slot.minute);\n-                      \n-                      if (isAvailable) isAnyAvailable = true;\n-                      if (isInBreak) isAnyInBreak = true;\n-                    }\n-                  } else {\n-                    // 코치가 선택되지 않은 경우 기본값으로 사용 가능으로 표시\n-                    isAnyAvailable = true;\n+                  if (filteredStaff.length === 1) {\n+                    const staff = filteredStaff[0];\n+                    isAvailable = isTimeSlotAvailable(staff.id, slot.hour, slot.minute, day.date);\n+                    isInBreak = isTimeInBreak(staff.id, day.date, slot.hour, slot.minute);\n                   }\n \n                   return (\n                     <DayTimeSlot\n                       key={`${day.date.toISOString()}-${slot.hour}-${slot.minute}`}\n                       $isPastTime={isPastTime}\n-                      $isAvailable={isAnyAvailable}\n-                      $isBreakTime={isAnyInBreak}\n+                      $isAvailable={filteredStaff.length === 1 ? isAvailable : true}\n+                      $isBreakTime={filteredStaff.length === 1 ? isInBreak : false}\n                       onClick={() => handleSlotClick(day.date, slot)}\n                     />\n                   );\n                 })}\n"
                },
                {
                    "date": 1762255243189,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,684 @@\n+import React from 'react';\n+import styled from 'styled-components';\n+import { AppColors } from '../../styles/colors';\n+import { AppTextStyles } from '../../styles/textStyles';\n+import { ScheduleEvent, StaffInfo } from './types';\n+import { getWeekDates, isEventOnDate, generateTimeSlots, getHolidayStaffNames, formatHolidayInfo } from './utils';\n+import type { WeeklyHolidaySettings } from '../../utils/db/types';\n+\n+interface WeekViewProps {\n+  currentDate: Date;\n+  events: ScheduleEvent[];\n+  staffList: StaffInfo[];\n+  selectedStaffIds: string[];\n+  onEventClick?: (event: ScheduleEvent) => void;\n+  onEventCreate?: (startTime: Date, endTime: Date, staffId?: string, replaceEventId?: string) => void;\n+  allowEmptyStaff?: boolean; // 코치가 없어도 달력 표시 허용\n+  programDuration?: number; // 프로그램 소요시간 (분 단위)\n+  disablePastTime?: boolean; // 과거 시간 비활성화 여부\n+  weeklyHolidaySettings?: WeeklyHolidaySettings[]; // 주별 휴일설정 추가\n+  currentUser?: {\n+    id: string;\n+    role: 'master' | 'coach' | 'admin';\n+    name?: string;\n+  }; // 현재 사용자 정보\n+}\n+\n+const WeekContainer = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  height: 100%;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  background-color: ${AppColors.surface};\n+  overflow: hidden;\n+`;\n+\n+const Header = styled.div`\n+  display: flex;\n+  background-color: ${AppColors.background};\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  width: 100%;\n+`;\n+\n+const TimeHeader = styled.div`\n+  width: 80px;\n+  min-width: 80px;\n+  max-width: 80px;\n+  padding: 12px 8px;\n+  text-align: center;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onSurface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  box-sizing: border-box;\n+`;\n+\n+const DayHeader = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n+  flex: 1;\n+  padding: 12px 8px;\n+  text-align: center;\n+  border-right: 1px solid ${AppColors.borderLight};\n+  background-color: ${props => props.$isToday ? AppColors.primary + '10' : 'transparent'};\n+  \n+  &:last-child {\n+    border-right: none;\n+  }\n+`;\n+\n+const DayName = styled.div<{ $isWeekend: boolean }>`\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  font-weight: 500;\n+  color: ${props => props.$isWeekend ? AppColors.error : AppColors.onSurface}80;\n+  margin-bottom: 4px;\n+`;\n+\n+const DayDate = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  font-weight: ${props => props.$isToday ? 600 : 500};\n+  color: ${props => \n+    props.$isToday ? AppColors.primary : \n+    props.$isWeekend ? AppColors.error : \n+    AppColors.onSurface\n+  };\n+`;\n+\n+const HolidayInfo = styled.div`\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  color: ${AppColors.error};\n+  font-weight: 500;\n+  margin-top: 2px;\n+  line-height: 1.2;\n+`;\n+\n+const ScrollableContent = styled.div`\n+  flex: 1;\n+  overflow-y: auto;\n+  max-height: 600px;\n+  \n+  /* 스크롤바 숨김 - Webkit 브라우저 (Chrome, Safari, Edge) */\n+  &::-webkit-scrollbar {\n+    display: none;\n+  }\n+  \n+  /* 스크롤바 숨김 - Firefox */\n+  scrollbar-width: none;\n+  \n+  /* 스크롤바 숨김 - IE/Edge Legacy */\n+  -ms-overflow-style: none;\n+`;\n+\n+const TimeGrid = styled.div`\n+  display: flex;\n+  width: 100%;\n+`;\n+\n+const TimeColumn = styled.div`\n+  width: 80px;\n+  min-width: 80px;\n+  max-width: 80px;\n+  border-right: 1px solid ${AppColors.borderLight};\n+  box-sizing: border-box;\n+`;\n+\n+const TimeSlot = styled.div`\n+  height: 30px;\n+  padding: 4px 8px;\n+  border-bottom: 1px solid ${AppColors.borderLight}20;\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  color: ${AppColors.onSurface}60;\n+  display: flex;\n+  align-items: flex-start;\n+  justify-content: center;\n+  box-sizing: border-box;\n+  width: 100%;\n+`;\n+\n+const DayGridColumn = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n+  flex: 1;\n+  border-right: 1px solid ${AppColors.borderLight};\n+  position: relative;\n+  background-color: ${props => \n+    props.$isToday ? AppColors.primary + '05' : \n+    props.$isWeekend ? AppColors.surface + 'F0' : \n+    'transparent'\n+  };\n+  overflow: hidden;\n+\n+  &:last-child {\n+    border-right: none;\n+  }\n+`;\n+\n+const DayTimeSlot = styled.div<{ \n+  $isPastTime?: boolean; \n+  $isAvailable?: boolean; \n+  $isBreakTime?: boolean; \n+}>`\n+  height: 30px;\n+  border-bottom: 1px solid ${AppColors.borderLight}20;\n+  position: relative;\n+  cursor: ${props => props.$isPastTime ? 'not-allowed' : 'pointer'};\n+  transition: background-color 0.2s ease;\n+  background-color: ${props => {\n+    if (props.$isPastTime) return AppColors.onSurface + '05';\n+    if (props.$isBreakTime) return '#fbbf2415'; // 휴게시간 배경색\n+    if (props.$isAvailable === false) return AppColors.onSurface + '10'; // 근무시간 외\n+    return 'transparent';\n+  }};\n+  border-left: ${props => props.$isBreakTime ? '3px solid #fbbf24' : 'none'};\n+\n+  &:hover {\n+    background-color: ${props => {\n+      if (props.$isPastTime) return AppColors.onSurface + '10';\n+      if (props.$isBreakTime) return '#fbbf2425'; // 휴게시간 호버 색상\n+      if (props.$isAvailable === false) return AppColors.onSurface + '15';\n+      return AppColors.primary + '08';\n+    }};\n+  }\n+\n+  &::after {\n+    content: ${props => props.$isBreakTime ? '\"휴게\"' : 'none'};\n+    position: absolute;\n+    top: 50%;\n+    left: 50%;\n+    transform: translate(-50%, -50%);\n+    font-size: 10px;\n+    color: #fbbf24;\n+    font-weight: 500;\n+    pointer-events: none;\n+  }\n+`;\n+\n+const StaffEventsContainer = styled.div`\n+  position: absolute;\n+  top: 0;\n+  left: 0;\n+  right: 0;\n+  height: 100%;\n+  pointer-events: none;\n+  overflow: hidden;\n+`;\n+\n+const EventBlock = styled.div<{ \n+  $color: string; \n+  $top: number; \n+  $height: number; \n+  $left: number; \n+  $width: number;\n+  $opacity?: number;\n+}>`\n+  position: absolute;\n+  left: ${props => props.$left}%;\n+  width: ${props => props.$width}%;\n+  top: ${props => props.$top}px;\n+  height: ${props => props.$height}px;\n+  background-color: ${props => props.$color}30;\n+  border: 1px solid ${props => props.$color};\n+  border-radius: 3px;\n+  padding: 2px 4px;\n+  overflow: hidden;\n+  cursor: pointer;\n+  z-index: 1;\n+  pointer-events: auto;\n+  opacity: ${props => props.$opacity || 1};\n+  box-sizing: border-box;\n+  max-width: calc(100% - 2px);\n+  word-wrap: break-word;\n+  text-overflow: ellipsis;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+\n+  &:hover {\n+    background-color: ${props => props.$color}50;\n+    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n+    z-index: 2;\n+  }\n+`;\n+\n+const EventTitle = styled.div`\n+  font-size: ${AppTextStyles.label3.fontSize};\n+  font-weight: 500;\n+  color: ${AppColors.onSurface};\n+  line-height: 1.1;\n+  overflow: hidden;\n+  text-overflow: ellipsis;\n+  white-space: nowrap;\n+  text-align: center;\n+  width: 100%;\n+`;\n+\n+const StaffLegend = styled.div`\n+  padding: 8px 12px;\n+  background-color: ${AppColors.background};\n+  border-top: 1px solid ${AppColors.borderLight};\n+  display: flex;\n+  flex-wrap: wrap;\n+  gap: 12px;\n+  align-items: center;\n+`;\n+\n+const StaffLegendItem = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 6px;\n+`;\n+\n+const StaffColorDot = styled.div<{ $color: string }>`\n+  width: 8px;\n+  height: 8px;\n+  border-radius: 50%;\n+  background-color: ${props => props.$color};\n+`;\n+\n+const StaffLegendName = styled.span`\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  color: ${AppColors.onSurface};\n+`;\n+\n+const WeekView: React.FC<WeekViewProps> = ({\n+  currentDate,\n+  events,\n+  staffList,\n+  selectedStaffIds,\n+  onEventClick,\n+  onEventCreate,\n+  allowEmptyStaff = false,\n+  programDuration,\n+  disablePastTime = false,\n+  weeklyHolidaySettings = [],\n+  currentUser\n+}) => {\n+  const weekDates = getWeekDates(currentDate);\n+  \n+  // 항상 30분 단위로 시간 슬롯 생성\n+  const timeSlots = generateTimeSlots(programDuration);\n+  \n+  // 필터링된 직원 목록 (선택된 코치만)\n+  const filteredStaff = staffList.filter(staff => \n+    selectedStaffIds.includes(staff.id) && staff.role === '코치'\n+  );\n+\n+  // 해당 주의 이벤트만 필터링\n+  const weekEvents = events.filter(event => \n+    weekDates.some(day => isEventOnDate(event.startTime, event.endTime, day.date))\n+  );\n+\n+  // 이벤트 위치 계산\n+  const getEventPosition = (event: ScheduleEvent, dayDate: Date) => {\n+    if (!isEventOnDate(event.startTime, event.endTime, dayDate)) {\n+      return null;\n+    }\n+\n+    const dayStart = new Date(dayDate);\n+    dayStart.setHours(6, 0, 0, 0);\n+\n+    const eventStart = new Date(event.startTime);\n+    const eventEnd = new Date(event.endTime);\n+\n+    // 시작/종료 시간이 당일 범위를 벗어나면 조정\n+    if (eventStart.toDateString() !== dayDate.toDateString()) {\n+      eventStart.setTime(dayStart.getTime());\n+    }\n+    if (eventEnd.toDateString() !== dayDate.toDateString()) {\n+      eventEnd.setHours(22, 0, 0, 0);\n+    }\n+\n+    const startMinutes = (eventStart.getTime() - dayStart.getTime()) / (1000 * 60);\n+    const durationMinutes = (eventEnd.getTime() - eventStart.getTime()) / (1000 * 60);\n+\n+    return {\n+      top: Math.max(0, (startMinutes / 30) * 30), // 30분당 30px (30분 단위로 조정)\n+      height: Math.max(15, (durationMinutes / 30) * 30)\n+    };\n+  };\n+\n+  // 같은 시간대 이벤트들의 위치 조정\n+  const getEventLayout = (dayEvents: ScheduleEvent[], targetEvent: ScheduleEvent) => {\n+    // 같은 시간대에 겹치는 이벤트들 찾기\n+    const overlapping = dayEvents.filter(e => {\n+      if (e.id === targetEvent.id) return false;\n+      return (targetEvent.startTime < e.endTime && targetEvent.endTime > e.startTime);\n+    });\n+\n+    // 겹치는 이벤트가 없으면 전체 너비 사용\n+    if (overlapping.length === 0) {\n+      return {\n+        left: 0,\n+        width: 100,\n+        opacity: 1\n+      };\n+    }\n+\n+    // 모든 겹치는 이벤트들을 ID 순으로 정렬 (일관된 순서 보장)\n+    const allOverlapping = [...overlapping, targetEvent].sort((a, b) => \n+      a.id.localeCompare(b.id)\n+    );\n+\n+    const totalCount = allOverlapping.length;\n+    const eventIndex = allOverlapping.findIndex(e => e.id === targetEvent.id);\n+\n+    // 각 이벤트가 동일한 너비를 가지도록 계산\n+    const eventWidth = Math.floor(100 / totalCount);\n+    const eventLeft = eventIndex * eventWidth;\n+\n+    return {\n+      left: eventLeft,\n+      width: eventWidth,\n+      opacity: 0.95\n+    };\n+  };\n+\n+  // 특정 시간이 휴게시간에 포함되는지 확인\n+  const isTimeInBreak = (staffId: string, dayDate: Date, hour: number, minute: number) => {\n+    const targetTime = new Date(dayDate);\n+    targetTime.setHours(hour, minute, 0, 0);\n+    \n+    return events.some(event => \n+      event.staffId === staffId &&\n+      event.type === 'break' &&\n+      targetTime >= event.startTime &&\n+      targetTime < event.endTime\n+    );\n+  };\n+\n+  // 특정 직원의 특정 시간대가 예약 가능한지 확인하는 함수 (휴일 제외, 근무시간과 휴게시간만 체크)\n+  const isTimeSlotAvailable = (staffId: string, hour: number, minute: number, targetDate: Date) => {\n+    const dayOfWeek = targetDate.getDay();\n+    const weekStartDate = (() => {\n+      const monday = new Date(targetDate);\n+      monday.setDate(targetDate.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));\n+      return monday.toISOString().split('T')[0];\n+    })();\n+\n+    if (!weeklyHolidaySettings) return true;\n+\n+    const weeklySettings = weeklyHolidaySettings.find(\n+      s => s.staffId === staffId && s.weekStartDate === weekStartDate\n+    );\n+\n+    if (weeklySettings) {\n+      const dayKeys = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n+      const dayKey = dayKeys[dayOfWeek] as keyof typeof weeklySettings.weekDays;\n+      const daySettings = weeklySettings.weekDays[dayKey];\n+\n+      if (daySettings) {\n+        // 휴일이면 근무시간 체크 안함 (항상 true 반환)\n+        if (daySettings.isHoliday) return true;\n+\n+        // 근무시간 외면 예약 불가\n+        if (daySettings.workingHours) {\n+          const { start, end } = daySettings.workingHours;\n+          const currentTimeInMinutes = hour * 60 + minute;\n+          if (currentTimeInMinutes < start || currentTimeInMinutes >= end) return false;\n+        }\n+\n+        // 휴게시간이면 예약 불가\n+        if (daySettings.breakTimes) {\n+          for (const breakTime of daySettings.breakTimes) {\n+            const currentTimeInMinutes = hour * 60 + minute;\n+            if (currentTimeInMinutes >= breakTime.start && currentTimeInMinutes < breakTime.end) return false;\n+          }\n+        }\n+      }\n+    }\n+\n+    return true;\n+  };\n+\n+  const handleSlotClick = (dayDate: Date, slot: { hour: number; minute: number }) => {\n+    // WeekView에서는 선택된 코치가 하나일 때만 예약 생성\n+    if (filteredStaff.length !== 1) {\n+      alert('예약을 생성하려면 코치를 하나만 선택해주세요.');\n+      return;\n+    }\n+\n+    const staffId = filteredStaff[0].id;\n+    const staff = staffList.find(s => s.id === staffId);\n+\n+    // 계약 기간 체크\n+    if (staff?.contractStartDate && staff?.contractEndDate) {\n+      const contractStart = new Date(staff.contractStartDate);\n+      contractStart.setHours(0, 0, 0, 0);\n+      const contractEnd = new Date(staff.contractEndDate);\n+      contractEnd.setHours(0, 0, 0, 0);\n+      \n+      const selectedDate = new Date(dayDate);\n+      selectedDate.setHours(0, 0, 0, 0);\n+      \n+      if (selectedDate < contractStart || selectedDate > contractEnd) {\n+        alert('해당 코치의 계약 기간 외입니다. 예약을 생성할 수 없습니다.');\n+        return;\n+      }\n+    }\n+\n+    // 과거 시간 체크 (disablePastTime이 true인 경우)\n+    if (disablePastTime) {\n+      const now = new Date();\n+      const slotTime = new Date(dayDate);\n+      slotTime.setHours(slot.hour, slot.minute, 0, 0);\n+      \n+      if (slotTime < now) {\n+        return; // 과거 시간인 경우 클릭 이벤트 무시\n+      }\n+    }\n+\n+    // 해당 날짜가 휴일인지 확인 (날짜 레벨에서)\n+    const holidayStaffNames = getHolidayStaffNames(dayDate, weeklyHolidaySettings || [], staffList);\n+    const isStaffOnHoliday = holidayStaffNames.includes(filteredStaff[0].name);\n+    \n+    if (isStaffOnHoliday) {\n+      // 휴일에 포함된 경우, 코치 권한이 있는지 확인\n+      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+        // 마스터이거나 본인 코치인 경우 허용\n+        if (window.confirm(`이 날짜는 휴일입니다. 예약을 생성하시겠습니까?`)) {\n+          // 예약 생성 진행\n+          if (onEventCreate) {\n+            const startTime = new Date(dayDate);\n+            startTime.setHours(slot.hour, slot.minute, 0, 0);\n+            \n+            const endTime = new Date(startTime);\n+            const duration = programDuration || 30;\n+            const actualDuration = duration > 30 ? 60 : duration;\n+            endTime.setMinutes(endTime.getMinutes() + actualDuration);\n+            \n+            onEventCreate(startTime, endTime, staffId);\n+          }\n+        }\n+      } else {\n+        // 일반 사용자는 휴일에 예약 불가\n+        alert('휴일에는 예약을 생성할 수 없습니다. 관리자 또는 해당 코치에게 문의하세요.');\n+      }\n+      return;\n+    }\n+\n+    // 휴게시간 체크 (마스터나 본인 코치는 예외)\n+    const isInBreak = isTimeInBreak(staffId, dayDate, slot.hour, slot.minute);\n+    if (isInBreak) {\n+      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+        // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n+      } else {\n+        alert('휴게시간에는 예약을 생성할 수 없습니다.');\n+        return;\n+      }\n+    }\n+\n+    // 근무시간 체크 (마스터나 본인 코치는 예외)\n+    const isAvailable = isTimeSlotAvailable(staffId, slot.hour, slot.minute, dayDate);\n+    if (!isAvailable) {\n+      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+        // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n+      } else {\n+        // 일반 사용자는 근무시간 외/휴일/휴게시간에 예약 불가\n+        alert('이 시간대는 예약할 수 없습니다.');\n+        return;\n+      }\n+    }\n+\n+    if (onEventCreate) {\n+      const startTime = new Date(dayDate);\n+      startTime.setHours(slot.hour, slot.minute, 0, 0);\n+      \n+      const endTime = new Date(startTime);\n+      // 프로그램 소요시간에 따른 종료시간 계산\n+      const duration = programDuration || 30; // 기본 30분\n+      const actualDuration = duration > 30 ? 60 : duration; // 50분은 1시간으로 처리\n+      endTime.setMinutes(endTime.getMinutes() + actualDuration);\n+      \n+      onEventCreate(startTime, endTime, staffId);\n+    }\n+  };\n+\n+  if (!allowEmptyStaff && filteredStaff.length === 0) {\n+    return (\n+      <WeekContainer>\n+        <div style={{ padding: '48px', textAlign: 'center', color: AppColors.onSurface + '60' }}>\n+          표시할 코치를 선택해주세요.\n+        </div>\n+      </WeekContainer>\n+    );\n+  }\n+\n+  return (\n+    <WeekContainer>\n+      {/* 헤더 */}\n+      <Header>\n+        <TimeHeader>시간</TimeHeader>\n+        {weekDates.map(day => {\n+          // 각 날짜의 휴일 정보 가져오기\n+          const holidayStaffNames = getHolidayStaffNames(day.date, weeklyHolidaySettings || [], staffList);\n+          const holidayInfo = formatHolidayInfo(holidayStaffNames);\n+          \n+          return (\n+            <DayHeader \n+              key={day.date.toISOString()} \n+              $isToday={day.isToday}\n+              $isWeekend={day.isWeekend}\n+            >\n+              <DayName $isWeekend={day.isWeekend}>{day.dayName}</DayName>\n+              <DayDate $isToday={day.isToday} $isWeekend={day.isWeekend}>\n+                {day.date.getDate()}\n+              </DayDate>\n+              {holidayInfo && <HolidayInfo>{holidayInfo}</HolidayInfo>}\n+            </DayHeader>\n+          );\n+        })}\n+      </Header>\n+\n+      {/* 스크롤 가능한 타임 그리드 */}\n+      <ScrollableContent>\n+        <TimeGrid>\n+          {/* 시간 컬럼 */}\n+          <TimeColumn>\n+            {timeSlots.map(slot => (\n+              <TimeSlot key={`${slot.hour}-${slot.minute}`}>\n+                {slot.minute === 0 ? slot.display : ''}\n+              </TimeSlot>\n+            ))}\n+          </TimeColumn>\n+\n+          {/* 각 날짜별 컬럼 */}\n+          {weekDates.map(day => {\n+            const dayEvents = allowEmptyStaff \n+              ? weekEvents.filter(event => \n+                  isEventOnDate(event.startTime, event.endTime, day.date)\n+                )\n+              : weekEvents.filter(event => \n+                  isEventOnDate(event.startTime, event.endTime, day.date) &&\n+                  selectedStaffIds.includes(event.staffId)\n+                );\n+\n+            return (\n+              <DayGridColumn \n+                key={day.date.toISOString()}\n+                $isToday={day.isToday}\n+                $isWeekend={day.isWeekend}\n+              >\n+                {timeSlots.map(slot => {\n+                  // 과거 시간 체크\n+                  const isPastTime = disablePastTime && (() => {\n+                    const now = new Date();\n+                    const slotTime = new Date(day.date);\n+                    slotTime.setHours(slot.hour, slot.minute, 0, 0);\n+                    return slotTime < now;\n+                  })();\n+\n+                  // 코치가 하나만 선택된 경우에만 시간 가용성 체크\n+                  let isAvailable = true;\n+                  let isInBreak = false;\n+\n+                  if (filteredStaff.length === 1) {\n+                    const staff = filteredStaff[0];\n+                    isAvailable = isTimeSlotAvailable(staff.id, slot.hour, slot.minute, day.date);\n+                    isInBreak = isTimeInBreak(staff.id, day.date, slot.hour, slot.minute);\n+                  }\n+\n+                  return (\n+                    <DayTimeSlot\n+                      key={`${day.date.toISOString()}-${slot.hour}-${slot.minute}`}\n+                      $isPastTime={isPastTime}\n+                      $isAvailable={filteredStaff.length === 1 ? isAvailable : true}\n+                      $isBreakTime={filteredStaff.length === 1 ? isInBreak : false}\n+                      onClick={() => handleSlotClick(day.date, slot)}\n+                    />\n+                  );\n+                })}\n+\n+                {/* 해당 날짜의 이벤트들 */}\n+                <StaffEventsContainer>\n+                  {dayEvents.map(event => {\n+                    const position = getEventPosition(event, day.date);\n+                    if (!position) return null;\n+\n+                    const layout = getEventLayout(dayEvents, event);\n+                    const staff = filteredStaff.find(s => s.id === event.staffId);\n+\n+                    return (\n+                      <EventBlock\n+                        key={event.id}\n+                        $color={staff?.color || AppColors.primary}\n+                        $top={position.top}\n+                        $height={position.height}\n+                        $left={layout.left}\n+                        $width={layout.width}\n+                        $opacity={layout.opacity}\n+                        onClick={() => onEventClick?.(event)}\n+                      >\n+                        <EventTitle>\n+                          {event.type === 'holiday' ? '휴일' : \n+                           event.type === 'break' ? event.title :\n+                           (event.memberName || '예약자')}\n+                        </EventTitle>\n+                      </EventBlock>\n+                    );\n+                  })}\n+                </StaffEventsContainer>\n+              </DayGridColumn>\n+            );\n+          })}\n+        </TimeGrid>\n+      </ScrollableContent>\n+\n+      {/* 직원 범례 */}\n+      <StaffLegend>\n+        <span style={{ \n+          fontSize: AppTextStyles.label2.fontSize, \n+          fontWeight: 500, \n+          color: AppColors.onSurface,\n+          marginRight: '8px'\n+        }}>\n+          코치:\n+        </span>\n+        {filteredStaff.map(staff => (\n+          <StaffLegendItem key={staff.id}>\n+            <StaffColorDot $color={staff.color || AppColors.primary} />\n+            <StaffLegendName>{staff.name}</StaffLegendName>\n+          </StaffLegendItem>\n+        ))}\n+      </StaffLegend>\n+    </WeekContainer>\n+  );\n+};\n+\n+export default WeekView;\n"
                },
                {
                    "date": 1762947135530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -427,697 +427,32 @@\n     return true;\n   };\n \n   const handleSlotClick = (dayDate: Date, slot: { hour: number; minute: number }) => {\n-    // WeekView에서는 선택된 코치가 하나일 때만 예약 생성\n-    if (filteredStaff.length !== 1) {\n-      alert('예약을 생성하려면 코치를 하나만 선택해주세요.');\n-      return;\n-    }\n-\n-    const staffId = filteredStaff[0].id;\n-    const staff = staffList.find(s => s.id === staffId);\n-\n-    // 계약 기간 체크\n-    if (staff?.contractStartDate && staff?.contractEndDate) {\n-      const contractStart = new Date(staff.contractStartDate);\n-      contractStart.setHours(0, 0, 0, 0);\n-      const contractEnd = new Date(staff.contractEndDate);\n-      contractEnd.setHours(0, 0, 0, 0);\n-      \n-      const selectedDate = new Date(dayDate);\n-      selectedDate.setHours(0, 0, 0, 0);\n-      \n-      if (selectedDate < contractStart || selectedDate > contractEnd) {\n-        alert('해당 코치의 계약 기간 외입니다. 예약을 생성할 수 없습니다.');\n-        return;\n-      }\n-    }\n-\n-    // 과거 시간 체크 (disablePastTime이 true인 경우)\n-    if (disablePastTime) {\n-      const now = new Date();\n-      const slotTime = new Date(dayDate);\n-      slotTime.setHours(slot.hour, slot.minute, 0, 0);\n-      \n-      if (slotTime < now) {\n-        return; // 과거 시간인 경우 클릭 이벤트 무시\n-      }\n-    }\n-\n-    // 해당 날짜가 휴일인지 확인 (날짜 레벨에서)\n-    const holidayStaffNames = getHolidayStaffNames(dayDate, weeklyHolidaySettings || [], staffList);\n-    const isStaffOnHoliday = holidayStaffNames.includes(filteredStaff[0].name);\n+    // Master인 경우 여러 코치가 선택되어도 팝업을 띄움 (팝업에서 코치 선택)\n+    // Coach인 경우 본인만 선택되어야 함\n+    let staffId: string | undefined;\n     \n-    if (isStaffOnHoliday) {\n-      // 휴일에 포함된 경우, 코치 권한이 있는지 확인\n-      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n-        // 마스터이거나 본인 코치인 경우 허용\n-        if (window.confirm(`이 날짜는 휴일입니다. 예약을 생성하시겠습니까?`)) {\n-          // 예약 생성 진행\n-          if (onEventCreate) {\n-            const startTime = new Date(dayDate);\n-            startTime.setHours(slot.hour, slot.minute, 0, 0);\n-            \n-            const endTime = new Date(startTime);\n-            const duration = programDuration || 30;\n-            const actualDuration = duration > 30 ? 60 : duration;\n-            endTime.setMinutes(endTime.getMinutes() + actualDuration);\n-            \n-            onEventCreate(startTime, endTime, staffId);\n-          }\n-        }\n-      } else {\n-        // 일반 사용자는 휴일에 예약 불가\n-        alert('휴일에는 예약을 생성할 수 없습니다. 관리자 또는 해당 코치에게 문의하세요.');\n+    if (currentUser?.role === 'master') {\n+      // Master: 코치가 하나만 선택된 경우 해당 코치 사용, 아니면 팝업에서 선택\n+      if (filteredStaff.length === 1) {\n+        staffId = filteredStaff[0].id;\n       }\n-      return;\n-    }\n-\n-    // 휴게시간 체크 (마스터나 본인 코치는 예외)\n-    const isInBreak = isTimeInBreak(staffId, dayDate, slot.hour, slot.minute);\n-    if (isInBreak) {\n-      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n-        // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n-      } else {\n-        alert('휴게시간에는 예약을 생성할 수 없습니다.');\n+      // 여러 코치 선택 또는 미선택 시에도 팝업을 띄움 (staffId는 undefined)\n+    } else if (currentUser?.role === 'coach') {\n+      // Coach: 본인만 선택되어야 함\n+      if (filteredStaff.length !== 1 || filteredStaff[0].id !== currentUser.id) {\n+        alert('본인의 일정만 관리할 수 있습니다.');\n         return;\n       }\n-    }\n-\n-    // 근무시간 체크 (마스터나 본인 코치는 예외)\n-    const isAvailable = isTimeSlotAvailable(staffId, slot.hour, slot.minute, dayDate);\n-    if (!isAvailable) {\n-      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n-        // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n-      } else {\n-        // 일반 사용자는 근무시간 외/휴일/휴게시간에 예약 불가\n-        alert('이 시간대는 예약할 수 없습니다.');\n-        return;\n-      }\n-    }\n-\n-    if (onEventCreate) {\n-      const startTime = new Date(dayDate);\n-      startTime.setHours(slot.hour, slot.minute, 0, 0);\n-      \n-      const endTime = new Date(startTime);\n-      // 프로그램 소요시간에 따른 종료시간 계산\n-      const duration = programDuration || 30; // 기본 30분\n-      const actualDuration = duration > 30 ? 60 : duration; // 50분은 1시간으로 처리\n-      endTime.setMinutes(endTime.getMinutes() + actualDuration);\n-      \n-      onEventCreate(startTime, endTime, staffId);\n-    }\n-  };\n-\n-  if (!allowEmptyStaff && filteredStaff.length === 0) {\n-    return (\n-      <WeekContainer>\n-        <div style={{ padding: '48px', textAlign: 'center', color: AppColors.onSurface + '60' }}>\n-          표시할 코치를 선택해주세요.\n-        </div>\n-      </WeekContainer>\n-    );\n-  }\n-\n-  return (\n-    <WeekContainer>\n-      {/* 헤더 */}\n-      <Header>\n-        <TimeHeader>시간</TimeHeader>\n-        {weekDates.map(day => {\n-          // 각 날짜의 휴일 정보 가져오기\n-          const holidayStaffNames = getHolidayStaffNames(day.date, weeklyHolidaySettings || [], staffList);\n-          const holidayInfo = formatHolidayInfo(holidayStaffNames);\n-          \n-          return (\n-            <DayHeader \n-              key={day.date.toISOString()} \n-              $isToday={day.isToday}\n-              $isWeekend={day.isWeekend}\n-            >\n-              <DayName $isWeekend={day.isWeekend}>{day.dayName}</DayName>\n-              <DayDate $isToday={day.isToday} $isWeekend={day.isWeekend}>\n-                {day.date.getDate()}\n-              </DayDate>\n-              {holidayInfo && <HolidayInfo>{holidayInfo}</HolidayInfo>}\n-            </DayHeader>\n-          );\n-        })}\n-      </Header>\n-\n-      {/* 스크롤 가능한 타임 그리드 */}\n-      <ScrollableContent>\n-        <TimeGrid>\n-          {/* 시간 컬럼 */}\n-          <TimeColumn>\n-            {timeSlots.map(slot => (\n-              <TimeSlot key={`${slot.hour}-${slot.minute}`}>\n-                {slot.minute === 0 ? slot.display : ''}\n-              </TimeSlot>\n-            ))}\n-          </TimeColumn>\n-\n-          {/* 각 날짜별 컬럼 */}\n-          {weekDates.map(day => {\n-            const dayEvents = allowEmptyStaff \n-              ? weekEvents.filter(event => \n-                  isEventOnDate(event.startTime, event.endTime, day.date)\n-                )\n-              : weekEvents.filter(event => \n-                  isEventOnDate(event.startTime, event.endTime, day.date) &&\n-                  selectedStaffIds.includes(event.staffId)\n-                );\n-\n-            return (\n-              <DayGridColumn \n-                key={day.date.toISOString()}\n-                $isToday={day.isToday}\n-                $isWeekend={day.isWeekend}\n-              >\n-                {timeSlots.map(slot => {\n-                  // 과거 시간 체크\n-                  const isPastTime = disablePastTime && (() => {\n-                    const now = new Date();\n-                    const slotTime = new Date(day.date);\n-                    slotTime.setHours(slot.hour, slot.minute, 0, 0);\n-                    return slotTime < now;\n-                  })();\n-\n-                  // 코치가 하나만 선택된 경우에만 시간 가용성 체크\n-                  let isAvailable = true;\n-                  let isInBreak = false;\n-\n-                  if (filteredStaff.length === 1) {\n-                    const staff = filteredStaff[0];\n-                    isAvailable = isTimeSlotAvailable(staff.id, slot.hour, slot.minute, day.date);\n-                    isInBreak = isTimeInBreak(staff.id, day.date, slot.hour, slot.minute);\n-                  }\n-\n-                  return (\n-                    <DayTimeSlot\n-                      key={`${day.date.toISOString()}-${slot.hour}-${slot.minute}`}\n-                      $isPastTime={isPastTime}\n-                      $isAvailable={filteredStaff.length === 1 ? isAvailable : true}\n-                      $isBreakTime={filteredStaff.length === 1 ? isInBreak : false}\n-                      onClick={() => handleSlotClick(day.date, slot)}\n-                    />\n-                  );\n-                })}\n-\n-                {/* 해당 날짜의 이벤트들 */}\n-                <StaffEventsContainer>\n-                  {dayEvents.map(event => {\n-                    const position = getEventPosition(event, day.date);\n-                    if (!position) return null;\n-\n-                    const layout = getEventLayout(dayEvents, event);\n-                    const staff = filteredStaff.find(s => s.id === event.staffId);\n-\n-                    return (\n-                      <EventBlock\n-                        key={event.id}\n-                        $color={staff?.color || AppColors.primary}\n-                        $top={position.top}\n-                        $height={position.height}\n-                        $left={layout.left}\n-                        $width={layout.width}\n-                        $opacity={layout.opacity}\n-                        onClick={() => onEventClick?.(event)}\n-                      >\n-                        <EventTitle>\n-                          {event.type === 'holiday' ? '휴일' : \n-                           event.type === 'break' ? event.title :\n-                           (event.memberName || '예약자')}\n-                        </EventTitle>\n-                      </EventBlock>\n-                    );\n-                  })}\n-                </StaffEventsContainer>\n-              </DayGridColumn>\n-            );\n-          })}\n-        </TimeGrid>\n-      </ScrollableContent>\n-\n-      {/* 직원 범례 */}\n-      <StaffLegend>\n-        <span style={{ \n-          fontSize: AppTextStyles.label2.fontSize, \n-          fontWeight: 500, \n-          color: AppColors.onSurface,\n-          marginRight: '8px'\n-        }}>\n-          코치:\n-        </span>\n-        {filteredStaff.map(staff => (\n-          <StaffLegendItem key={staff.id}>\n-            <StaffColorDot $color={staff.color || AppColors.primary} />\n-            <StaffLegendName>{staff.name}</StaffLegendName>\n-          </StaffLegendItem>\n-        ))}\n-      </StaffLegend>\n-    </WeekContainer>\n-  );\n-};\n-\n-export default WeekView;\n-import React from 'react';\n-import styled from 'styled-components';\n-import { AppColors } from '../../styles/colors';\n-import { AppTextStyles } from '../../styles/textStyles';\n-import { ScheduleEvent, StaffInfo } from './types';\n-import { getWeekDates, isEventOnDate, generateTimeSlots, getHolidayStaffNames, formatHolidayInfo } from './utils';\n-import type { WeeklyHolidaySettings } from '../../utils/db/types';\n-\n-interface WeekViewProps {\n-  currentDate: Date;\n-  events: ScheduleEvent[];\n-  staffList: StaffInfo[];\n-  selectedStaffIds: string[];\n-  onEventClick?: (event: ScheduleEvent) => void;\n-  onEventCreate?: (startTime: Date, endTime: Date, staffId?: string, replaceEventId?: string) => void;\n-  allowEmptyStaff?: boolean; // 코치가 없어도 달력 표시 허용\n-  programDuration?: number; // 프로그램 소요시간 (분 단위)\n-  disablePastTime?: boolean; // 과거 시간 비활성화 여부\n-  weeklyHolidaySettings?: WeeklyHolidaySettings[]; // 주별 휴일설정 추가\n-  currentUser?: {\n-    id: string;\n-    role: 'master' | 'coach' | 'admin';\n-    name?: string;\n-  }; // 현재 사용자 정보\n-}\n-\n-const WeekContainer = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  height: 100%;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  background-color: ${AppColors.surface};\n-  overflow: hidden;\n-`;\n-\n-const Header = styled.div`\n-  display: flex;\n-  background-color: ${AppColors.background};\n-  border-bottom: 1px solid ${AppColors.borderLight};\n-  width: 100%;\n-`;\n-\n-const TimeHeader = styled.div`\n-  width: 80px;\n-  min-width: 80px;\n-  max-width: 80px;\n-  padding: 12px 8px;\n-  text-align: center;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onSurface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  box-sizing: border-box;\n-`;\n-\n-const DayHeader = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n-  flex: 1;\n-  padding: 12px 8px;\n-  text-align: center;\n-  border-right: 1px solid ${AppColors.borderLight};\n-  background-color: ${props => props.$isToday ? AppColors.primary + '10' : 'transparent'};\n-  \n-  &:last-child {\n-    border-right: none;\n-  }\n-`;\n-\n-const DayName = styled.div<{ $isWeekend: boolean }>`\n-  font-size: ${AppTextStyles.label2.fontSize};\n-  font-weight: 500;\n-  color: ${props => props.$isWeekend ? AppColors.error : AppColors.onSurface}80;\n-  margin-bottom: 4px;\n-`;\n-\n-const DayDate = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: ${props => props.$isToday ? 600 : 500};\n-  color: ${props => \n-    props.$isToday ? AppColors.primary : \n-    props.$isWeekend ? AppColors.error : \n-    AppColors.onSurface\n-  };\n-`;\n-\n-const HolidayInfo = styled.div`\n-  font-size: ${AppTextStyles.label2.fontSize};\n-  color: ${AppColors.error};\n-  font-weight: 500;\n-  margin-top: 2px;\n-  line-height: 1.2;\n-`;\n-\n-const ScrollableContent = styled.div`\n-  flex: 1;\n-  overflow-y: auto;\n-  max-height: 600px;\n-  \n-  /* 스크롤바 숨김 - Webkit 브라우저 (Chrome, Safari, Edge) */\n-  &::-webkit-scrollbar {\n-    display: none;\n-  }\n-  \n-  /* 스크롤바 숨김 - Firefox */\n-  scrollbar-width: none;\n-  \n-  /* 스크롤바 숨김 - IE/Edge Legacy */\n-  -ms-overflow-style: none;\n-`;\n-\n-const TimeGrid = styled.div`\n-  display: flex;\n-  width: 100%;\n-`;\n-\n-const TimeColumn = styled.div`\n-  width: 80px;\n-  min-width: 80px;\n-  max-width: 80px;\n-  border-right: 1px solid ${AppColors.borderLight};\n-  box-sizing: border-box;\n-`;\n-\n-const TimeSlot = styled.div`\n-  height: 30px;\n-  padding: 4px 8px;\n-  border-bottom: 1px solid ${AppColors.borderLight}20;\n-  font-size: ${AppTextStyles.label2.fontSize};\n-  color: ${AppColors.onSurface}60;\n-  display: flex;\n-  align-items: flex-start;\n-  justify-content: center;\n-  box-sizing: border-box;\n-  width: 100%;\n-`;\n-\n-const DayGridColumn = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n-  flex: 1;\n-  border-right: 1px solid ${AppColors.borderLight};\n-  position: relative;\n-  background-color: ${props => \n-    props.$isToday ? AppColors.primary + '05' : \n-    props.$isWeekend ? AppColors.surface + 'F0' : \n-    'transparent'\n-  };\n-  overflow: hidden;\n-\n-  &:last-child {\n-    border-right: none;\n-  }\n-`;\n-\n-const DayTimeSlot = styled.div<{ \n-  $isPastTime?: boolean; \n-  $isAvailable?: boolean; \n-  $isBreakTime?: boolean; \n-}>`\n-  height: 30px;\n-  border-bottom: 1px solid ${AppColors.borderLight}20;\n-  position: relative;\n-  cursor: ${props => props.$isPastTime ? 'not-allowed' : 'pointer'};\n-  transition: background-color 0.2s ease;\n-  background-color: ${props => {\n-    if (props.$isPastTime) return AppColors.onSurface + '05';\n-    if (props.$isBreakTime) return '#fbbf2415'; // 휴게시간 배경색\n-    if (props.$isAvailable === false) return AppColors.onSurface + '10'; // 근무시간 외\n-    return 'transparent';\n-  }};\n-  border-left: ${props => props.$isBreakTime ? '3px solid #fbbf24' : 'none'};\n-\n-  &:hover {\n-    background-color: ${props => {\n-      if (props.$isPastTime) return AppColors.onSurface + '10';\n-      if (props.$isBreakTime) return '#fbbf2425'; // 휴게시간 호버 색상\n-      if (props.$isAvailable === false) return AppColors.onSurface + '15';\n-      return AppColors.primary + '08';\n-    }};\n-  }\n-\n-  &::after {\n-    content: ${props => props.$isBreakTime ? '\"휴게\"' : 'none'};\n-    position: absolute;\n-    top: 50%;\n-    left: 50%;\n-    transform: translate(-50%, -50%);\n-    font-size: 10px;\n-    color: #fbbf24;\n-    font-weight: 500;\n-    pointer-events: none;\n-  }\n-`;\n-\n-const StaffEventsContainer = styled.div`\n-  position: absolute;\n-  top: 0;\n-  left: 0;\n-  right: 0;\n-  height: 100%;\n-  pointer-events: none;\n-  overflow: hidden;\n-`;\n-\n-const EventBlock = styled.div<{ \n-  $color: string; \n-  $top: number; \n-  $height: number; \n-  $left: number; \n-  $width: number;\n-  $opacity?: number;\n-}>`\n-  position: absolute;\n-  left: ${props => props.$left}%;\n-  width: ${props => props.$width}%;\n-  top: ${props => props.$top}px;\n-  height: ${props => props.$height}px;\n-  background-color: ${props => props.$color}30;\n-  border: 1px solid ${props => props.$color};\n-  border-radius: 3px;\n-  padding: 2px 4px;\n-  overflow: hidden;\n-  cursor: pointer;\n-  z-index: 1;\n-  pointer-events: auto;\n-  opacity: ${props => props.$opacity || 1};\n-  box-sizing: border-box;\n-  max-width: calc(100% - 2px);\n-  word-wrap: break-word;\n-  text-overflow: ellipsis;\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-\n-  &:hover {\n-    background-color: ${props => props.$color}50;\n-    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n-    z-index: 2;\n-  }\n-`;\n-\n-const EventTitle = styled.div`\n-  font-size: ${AppTextStyles.label3.fontSize};\n-  font-weight: 500;\n-  color: ${AppColors.onSurface};\n-  line-height: 1.1;\n-  overflow: hidden;\n-  text-overflow: ellipsis;\n-  white-space: nowrap;\n-  text-align: center;\n-  width: 100%;\n-`;\n-\n-const StaffLegend = styled.div`\n-  padding: 8px 12px;\n-  background-color: ${AppColors.background};\n-  border-top: 1px solid ${AppColors.borderLight};\n-  display: flex;\n-  flex-wrap: wrap;\n-  gap: 12px;\n-  align-items: center;\n-`;\n-\n-const StaffLegendItem = styled.div`\n-  display: flex;\n-  align-items: center;\n-  gap: 6px;\n-`;\n-\n-const StaffColorDot = styled.div<{ $color: string }>`\n-  width: 8px;\n-  height: 8px;\n-  border-radius: 50%;\n-  background-color: ${props => props.$color};\n-`;\n-\n-const StaffLegendName = styled.span`\n-  font-size: ${AppTextStyles.label2.fontSize};\n-  color: ${AppColors.onSurface};\n-`;\n-\n-const WeekView: React.FC<WeekViewProps> = ({\n-  currentDate,\n-  events,\n-  staffList,\n-  selectedStaffIds,\n-  onEventClick,\n-  onEventCreate,\n-  allowEmptyStaff = false,\n-  programDuration,\n-  disablePastTime = false,\n-  weeklyHolidaySettings = [],\n-  currentUser\n-}) => {\n-  const weekDates = getWeekDates(currentDate);\n-  \n-  // 항상 30분 단위로 시간 슬롯 생성\n-  const timeSlots = generateTimeSlots(programDuration);\n-  \n-  // 필터링된 직원 목록 (선택된 코치만)\n-  const filteredStaff = staffList.filter(staff => \n-    selectedStaffIds.includes(staff.id) && staff.role === '코치'\n-  );\n-\n-  // 해당 주의 이벤트만 필터링\n-  const weekEvents = events.filter(event => \n-    weekDates.some(day => isEventOnDate(event.startTime, event.endTime, day.date))\n-  );\n-\n-  // 이벤트 위치 계산\n-  const getEventPosition = (event: ScheduleEvent, dayDate: Date) => {\n-    if (!isEventOnDate(event.startTime, event.endTime, dayDate)) {\n-      return null;\n-    }\n-\n-    const dayStart = new Date(dayDate);\n-    dayStart.setHours(6, 0, 0, 0);\n-\n-    const eventStart = new Date(event.startTime);\n-    const eventEnd = new Date(event.endTime);\n-\n-    // 시작/종료 시간이 당일 범위를 벗어나면 조정\n-    if (eventStart.toDateString() !== dayDate.toDateString()) {\n-      eventStart.setTime(dayStart.getTime());\n-    }\n-    if (eventEnd.toDateString() !== dayDate.toDateString()) {\n-      eventEnd.setHours(22, 0, 0, 0);\n-    }\n-\n-    const startMinutes = (eventStart.getTime() - dayStart.getTime()) / (1000 * 60);\n-    const durationMinutes = (eventEnd.getTime() - eventStart.getTime()) / (1000 * 60);\n-\n-    return {\n-      top: Math.max(0, (startMinutes / 30) * 30), // 30분당 30px (30분 단위로 조정)\n-      height: Math.max(15, (durationMinutes / 30) * 30)\n-    };\n-  };\n-\n-  // 같은 시간대 이벤트들의 위치 조정\n-  const getEventLayout = (dayEvents: ScheduleEvent[], targetEvent: ScheduleEvent) => {\n-    // 같은 시간대에 겹치는 이벤트들 찾기\n-    const overlapping = dayEvents.filter(e => {\n-      if (e.id === targetEvent.id) return false;\n-      return (targetEvent.startTime < e.endTime && targetEvent.endTime > e.startTime);\n-    });\n-\n-    // 겹치는 이벤트가 없으면 전체 너비 사용\n-    if (overlapping.length === 0) {\n-      return {\n-        left: 0,\n-        width: 100,\n-        opacity: 1\n-      };\n-    }\n-\n-    // 모든 겹치는 이벤트들을 ID 순으로 정렬 (일관된 순서 보장)\n-    const allOverlapping = [...overlapping, targetEvent].sort((a, b) => \n-      a.id.localeCompare(b.id)\n-    );\n-\n-    const totalCount = allOverlapping.length;\n-    const eventIndex = allOverlapping.findIndex(e => e.id === targetEvent.id);\n-\n-    // 각 이벤트가 동일한 너비를 가지도록 계산\n-    const eventWidth = Math.floor(100 / totalCount);\n-    const eventLeft = eventIndex * eventWidth;\n-\n-    return {\n-      left: eventLeft,\n-      width: eventWidth,\n-      opacity: 0.95\n-    };\n-  };\n-\n-  // 특정 시간이 휴게시간에 포함되는지 확인\n-  const isTimeInBreak = (staffId: string, dayDate: Date, hour: number, minute: number) => {\n-    const targetTime = new Date(dayDate);\n-    targetTime.setHours(hour, minute, 0, 0);\n-    \n-    return events.some(event => \n-      event.staffId === staffId &&\n-      event.type === 'break' &&\n-      targetTime >= event.startTime &&\n-      targetTime < event.endTime\n-    );\n-  };\n-\n-  // 특정 직원의 특정 시간대가 예약 가능한지 확인하는 함수 (휴일 제외, 근무시간과 휴게시간만 체크)\n-  const isTimeSlotAvailable = (staffId: string, hour: number, minute: number, targetDate: Date) => {\n-    const dayOfWeek = targetDate.getDay();\n-    const weekStartDate = (() => {\n-      const monday = new Date(targetDate);\n-      monday.setDate(targetDate.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));\n-      return monday.toISOString().split('T')[0];\n-    })();\n-\n-    if (!weeklyHolidaySettings) return true;\n-\n-    const weeklySettings = weeklyHolidaySettings.find(\n-      s => s.staffId === staffId && s.weekStartDate === weekStartDate\n-    );\n-\n-    if (weeklySettings) {\n-      const dayKeys = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n-      const dayKey = dayKeys[dayOfWeek] as keyof typeof weeklySettings.weekDays;\n-      const daySettings = weeklySettings.weekDays[dayKey];\n-\n-      if (daySettings) {\n-        // 근무시간 외면 예약 불가\n-        if (daySettings.workingHours) {\n-          const { start, end } = daySettings.workingHours;\n-          const currentTimeInMinutes = hour * 60 + minute;\n-          if (currentTimeInMinutes < start || currentTimeInMinutes >= end) return false;\n-        }\n-\n-        // 휴게시간이면 예약 불가\n-        if (daySettings.breakTimes) {\n-          for (const breakTime of daySettings.breakTimes) {\n-            const currentTimeInMinutes = hour * 60 + minute;\n-            if (currentTimeInMinutes >= breakTime.start && currentTimeInMinutes < breakTime.end) return false;\n-          }\n-        }\n-      }\n-    }\n-\n-    return true;\n-  };\n-\n-  const handleSlotClick = (dayDate: Date, slot: { hour: number; minute: number }) => {\n-    // WeekView에서는 선택된 코치가 하나일 때만 예약 생성\n-    if (filteredStaff.length !== 1) {\n-      alert('예약을 생성하려면 코치를 하나만 선택해주세요.');\n+      staffId = filteredStaff[0].id;\n+    } else {\n+      // 권한 없음\n+      alert('예약 생성 권한이 없습니다.');\n       return;\n     }\n \n-    const staffId = filteredStaff[0].id;\n-    const staff = staffList.find(s => s.id === staffId);\n+    const staff = staffId ? staffList.find(s => s.id === staffId) : undefined;\n \n     // 계약 기간 체크\n     if (staff?.contractStartDate && staff?.contractEndDate) {\n       const contractStart = new Date(staff.contractStartDate);\n@@ -1144,57 +479,62 @@\n         return; // 과거 시간인 경우 클릭 이벤트 무시\n       }\n     }\n \n-    // 해당 날짜가 휴일인지 확인 (날짜 레벨에서)\n-    const holidayStaffNames = getHolidayStaffNames(dayDate, weeklyHolidaySettings || [], staffList);\n-    const isStaffOnHoliday = holidayStaffNames.includes(filteredStaff[0].name);\n-    \n-    if (isStaffOnHoliday) {\n-      // 휴일에 포함된 경우, 코치 권한이 있는지 확인\n-      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n-        // 마스터이거나 본인 코치인 경우 허용\n-        if (window.confirm(`이 날짜는 휴일입니다. 예약을 생성하시겠습니까?`)) {\n-          // 예약 생성 진행\n-          if (onEventCreate) {\n-            const startTime = new Date(dayDate);\n-            startTime.setHours(slot.hour, slot.minute, 0, 0);\n-            \n-            const endTime = new Date(startTime);\n-            const duration = programDuration || 30;\n-            const actualDuration = duration > 30 ? 60 : duration;\n-            endTime.setMinutes(endTime.getMinutes() + actualDuration);\n-            \n-            onEventCreate(startTime, endTime, staffId);\n+    // staffId가 있는 경우에만 휴일/휴게시간/근무시간 체크 수행\n+    // (Master가 여러 코치 선택 시 staffId가 undefined이므로 체크 건너뜀)\n+    if (staffId) {\n+      // 해당 날짜가 휴일인지 확인 (날짜 레벨에서)\n+      const staffName = staff?.name || '';\n+      const holidayStaffNames = getHolidayStaffNames(dayDate, weeklyHolidaySettings || [], staffList);\n+      const isStaffOnHoliday = holidayStaffNames.includes(staffName);\n+      \n+      if (isStaffOnHoliday) {\n+        // 휴일에 포함된 경우, 코치 권한이 있는지 확인\n+        if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+          // 마스터이거나 본인 코치인 경우 허용\n+          if (window.confirm(`이 날짜는 휴일입니다. 예약을 생성하시겠습니까?`)) {\n+            // 예약 생성 진행\n+            if (onEventCreate) {\n+              const startTime = new Date(dayDate);\n+              startTime.setHours(slot.hour, slot.minute, 0, 0);\n+              \n+              const endTime = new Date(startTime);\n+              const duration = programDuration || 30;\n+              const actualDuration = duration > 30 ? 60 : duration;\n+              endTime.setMinutes(endTime.getMinutes() + actualDuration);\n+              \n+              onEventCreate(startTime, endTime, staffId);\n+            }\n           }\n+        } else {\n+          // 일반 사용자는 휴일에 예약 불가\n+          alert('휴일에는 예약을 생성할 수 없습니다. 관리자 또는 해당 코치에게 문의하세요.');\n         }\n-      } else {\n-        // 일반 사용자는 휴일에 예약 불가\n-        alert('휴일에는 예약을 생성할 수 없습니다. 관리자 또는 해당 코치에게 문의하세요.');\n+        return;\n       }\n-      return;\n-    }\n \n-    // 휴게시간 체크 (마스터나 본인 코치는 예외)\n-    const isInBreak = isTimeInBreak(staffId, dayDate, slot.hour, slot.minute);\n-    if (isInBreak) {\n-      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n-        // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n-      } else {\n-        alert('휴게시간에는 예약을 생성할 수 없습니다.');\n-        return;\n+      // 휴게시간 체크 (마스터나 본인 코치는 예외)\n+      const isInBreak = isTimeInBreak(staffId, dayDate, slot.hour, slot.minute);\n+      if (isInBreak) {\n+        if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+          // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n+        } else {\n+          alert('휴게시간에는 예약을 생성할 수 없습니다.');\n+          return;\n+        }\n       }\n-    }\n \n-    // 근무시간 체크 (마스터나 본인 코치는 예외)\n-    const isAvailable = isTimeSlotAvailable(staffId, slot.hour, slot.minute, dayDate);\n-    if (!isAvailable) {\n-      if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n-        // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n-      } else {\n-        // 일반 사용자는 근무시간 외/휴일/휴게시간에 예약 불가\n-        alert('이 시간대는 예약할 수 없습니다.');\n-        return;\n+      // 근무시간 체크 (마스터나 본인 코치는 예외)\n+      const isAvailable = isTimeSlotAvailable(staffId, slot.hour, slot.minute, dayDate);\n+      if (!isAvailable) {\n+        if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+          // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n+        } else {\n+          // 일반 사용자는 근무시간 외/휴일/휴게시간에 예약 불가\n+          alert('이 시간대는 예약할 수 없습니다.');\n+          return;\n+        }\n       }\n     }\n \n     if (onEventCreate) {\n"
                },
                {
                    "date": 1763464582812,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,9 +123,9 @@\n \n const TimeSlot = styled.div`\n   height: 30px;\n   padding: 4px 8px;\n-  border-bottom: 1px solid ${AppColors.borderLight}20;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n   font-size: ${AppTextStyles.label2.fontSize};\n   color: ${AppColors.onSurface}60;\n   display: flex;\n   align-items: flex-start;\n@@ -155,9 +155,9 @@\n   $isAvailable?: boolean; \n   $isBreakTime?: boolean; \n }>`\n   height: 30px;\n-  border-bottom: 1px solid ${AppColors.borderLight}20;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n   position: relative;\n   cursor: ${props => props.$isPastTime ? 'not-allowed' : 'pointer'};\n   transition: background-color 0.2s ease;\n   background-color: ${props => {\n"
                },
                {
                    "date": 1763464631405,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,14 +122,16 @@\n `;\n \n const TimeSlot = styled.div`\n   height: 30px;\n-  padding: 4px 8px;\n+  min-height: 30px;\n+  max-height: 30px;\n+  padding: 0;\n   border-bottom: 1px solid ${AppColors.borderLight};\n   font-size: ${AppTextStyles.label2.fontSize};\n   color: ${AppColors.onSurface}60;\n   display: flex;\n-  align-items: flex-start;\n+  align-items: center;\n   justify-content: center;\n   box-sizing: border-box;\n   width: 100%;\n `;\n@@ -155,8 +157,10 @@\n   $isAvailable?: boolean; \n   $isBreakTime?: boolean; \n }>`\n   height: 30px;\n+  min-height: 30px;\n+  max-height: 30px;\n   border-bottom: 1px solid ${AppColors.borderLight};\n   position: relative;\n   cursor: ${props => props.$isPastTime ? 'not-allowed' : 'pointer'};\n   transition: background-color 0.2s ease;\n"
                },
                {
                    "date": 1763464707264,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,19 +121,19 @@\n   box-sizing: border-box;\n `;\n \n const TimeSlot = styled.div`\n-  height: 30px;\n-  min-height: 30px;\n-  max-height: 30px;\n+  height: 31px;\n+  min-height: 31px;\n+  max-height: 31px;\n   padding: 0;\n   border-bottom: 1px solid ${AppColors.borderLight};\n   font-size: ${AppTextStyles.label2.fontSize};\n   color: ${AppColors.onSurface}60;\n   display: flex;\n   align-items: center;\n   justify-content: center;\n-  box-sizing: border-box;\n+  box-sizing: content-box;\n   width: 100%;\n `;\n \n const DayGridColumn = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n@@ -156,12 +156,13 @@\n   $isPastTime?: boolean; \n   $isAvailable?: boolean; \n   $isBreakTime?: boolean; \n }>`\n-  height: 30px;\n-  min-height: 30px;\n-  max-height: 30px;\n+  height: 31px;\n+  min-height: 31px;\n+  max-height: 31px;\n   border-bottom: 1px solid ${AppColors.borderLight};\n+  box-sizing: content-box;\n   position: relative;\n   cursor: ${props => props.$isPastTime ? 'not-allowed' : 'pointer'};\n   transition: background-color 0.2s ease;\n   background-color: ${props => {\n"
                },
                {
                    "date": 1763465420251,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,710 @@\n+import React from 'react';\n+import styled from 'styled-components';\n+import { AppColors } from '../../styles/colors';\n+import { AppTextStyles } from '../../styles/textStyles';\n+import { ScheduleEvent, StaffInfo } from './types';\n+import { getWeekDates, isEventOnDate, generateTimeSlots, getHolidayStaffNames, formatHolidayInfo } from './utils';\n+import type { WeeklyHolidaySettings } from '../../utils/db/types';\n+\n+interface WeekViewProps {\n+  currentDate: Date;\n+  events: ScheduleEvent[];\n+  staffList: StaffInfo[];\n+  selectedStaffIds: string[];\n+  onEventClick?: (event: ScheduleEvent) => void;\n+  onEventCreate?: (startTime: Date, endTime: Date, staffId?: string, replaceEventId?: string) => void;\n+  allowEmptyStaff?: boolean; // 코치가 없어도 달력 표시 허용\n+  programDuration?: number; // 프로그램 소요시간 (분 단위)\n+  disablePastTime?: boolean; // 과거 시간 비활성화 여부\n+  weeklyHolidaySettings?: WeeklyHolidaySettings[]; // 주별 휴일설정 추가\n+  currentUser?: {\n+    id: string;\n+    role: 'master' | 'coach' | 'admin';\n+    name?: string;\n+  }; // 현재 사용자 정보\n+}\n+\n+const WeekContainer = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  height: 100%;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  background-color: ${AppColors.surface};\n+  overflow: hidden;\n+`;\n+\n+const Header = styled.div`\n+  display: flex;\n+  background-color: ${AppColors.background};\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  width: 100%;\n+`;\n+\n+const TimeHeader = styled.div`\n+  width: 80px;\n+  min-width: 80px;\n+  max-width: 80px;\n+  padding: 12px 8px;\n+  text-align: center;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onSurface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  box-sizing: border-box;\n+`;\n+\n+const DayHeader = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n+  flex: 1;\n+  padding: 12px 8px;\n+  text-align: center;\n+  border-right: 1px solid ${AppColors.borderLight};\n+  background-color: ${props => props.$isToday ? AppColors.primary + '10' : 'transparent'};\n+  \n+  &:last-child {\n+    border-right: none;\n+  }\n+`;\n+\n+const DayName = styled.div<{ $isWeekend: boolean }>`\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  font-weight: 500;\n+  color: ${props => props.$isWeekend ? AppColors.error : AppColors.onSurface}80;\n+  margin-bottom: 4px;\n+`;\n+\n+const DayDate = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  font-weight: ${props => props.$isToday ? 600 : 500};\n+  color: ${props => \n+    props.$isToday ? AppColors.primary : \n+    props.$isWeekend ? AppColors.error : \n+    AppColors.onSurface\n+  };\n+`;\n+\n+const HolidayInfo = styled.div`\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  color: ${AppColors.error};\n+  font-weight: 500;\n+  margin-top: 2px;\n+  line-height: 1.2;\n+`;\n+\n+const ScrollableContent = styled.div`\n+  flex: 1;\n+  overflow-y: auto;\n+  max-height: 600px;\n+  \n+  /* 스크롤바 숨김 - Webkit 브라우저 (Chrome, Safari, Edge) */\n+  &::-webkit-scrollbar {\n+    display: none;\n+  }\n+  \n+  /* 스크롤바 숨김 - Firefox */\n+  scrollbar-width: none;\n+  \n+  /* 스크롤바 숨김 - IE/Edge Legacy */\n+  -ms-overflow-style: none;\n+`;\n+\n+const TimeGrid = styled.div`\n+  display: flex;\n+  width: 100%;\n+`;\n+\n+const TimeColumn = styled.div`\n+  width: 80px;\n+  min-width: 80px;\n+  max-width: 80px;\n+  border-right: 1px solid ${AppColors.borderLight};\n+  box-sizing: border-box;\n+`;\n+\n+const TimeSlot = styled.div`\n+  height: 31px;\n+  min-height: 31px;\n+  max-height: 31px;\n+  padding: 0;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  color: ${AppColors.onSurface}60;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  box-sizing: content-box;\n+  width: 100%;\n+`;\n+\n+const DayGridColumn = styled.div<{ $isToday: boolean; $isWeekend: boolean }>`\n+  flex: 1;\n+  border-right: 1px solid ${AppColors.borderLight};\n+  position: relative;\n+  background-color: ${props => \n+    props.$isToday ? AppColors.primary + '05' : \n+    props.$isWeekend ? AppColors.surface + 'F0' : \n+    'transparent'\n+  };\n+  overflow: hidden;\n+\n+  &:last-child {\n+    border-right: none;\n+  }\n+`;\n+\n+const DayTimeSlot = styled.div<{ \n+  $isPastTime?: boolean; \n+  $isAvailable?: boolean; \n+  $isBreakTime?: boolean; \n+}>`\n+  height: 31px;\n+  min-height: 31px;\n+  max-height: 31px;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  box-sizing: content-box;\n+  position: relative;\n+  cursor: ${props => props.$isPastTime ? 'not-allowed' : 'pointer'};\n+  transition: background-color 0.2s ease;\n+  background-color: ${props => {\n+    if (props.$isPastTime) return AppColors.onSurface + '05';\n+    if (props.$isBreakTime) return '#fbbf2415'; // 휴게시간 배경색\n+    if (props.$isAvailable === false) return AppColors.onSurface + '10'; // 근무시간 외\n+    return 'transparent';\n+  }};\n+  border-left: ${props => props.$isBreakTime ? '3px solid #fbbf24' : 'none'};\n+\n+  &:hover {\n+    background-color: ${props => {\n+      if (props.$isPastTime) return AppColors.onSurface + '10';\n+      if (props.$isBreakTime) return '#fbbf2425'; // 휴게시간 호버 색상\n+      if (props.$isAvailable === false) return AppColors.onSurface + '15';\n+      return AppColors.primary + '08';\n+    }};\n+  }\n+\n+  &::after {\n+    content: ${props => props.$isBreakTime ? '\"휴게\"' : 'none'};\n+    position: absolute;\n+    top: 50%;\n+    left: 50%;\n+    transform: translate(-50%, -50%);\n+    font-size: 10px;\n+    color: #fbbf24;\n+    font-weight: 500;\n+    pointer-events: none;\n+  }\n+`;\n+\n+const StaffEventsContainer = styled.div`\n+  position: absolute;\n+  top: 0;\n+  left: 0;\n+  right: 0;\n+  height: 100%;\n+  pointer-events: none;\n+  overflow: hidden;\n+`;\n+\n+const EventBlock = styled.div<{ \n+  $color: string; \n+  $top: number; \n+  $height: number; \n+  $left: number; \n+  $width: number;\n+  $opacity?: number;\n+}>`\n+  position: absolute;\n+  left: ${props => props.$left}%;\n+  width: ${props => props.$width}%;\n+  top: ${props => props.$top}px;\n+  height: ${props => props.$height}px;\n+  background-color: ${props => props.$color}30;\n+  border: 1px solid ${props => props.$color};\n+  border-radius: 3px;\n+  padding: 2px 4px;\n+  overflow: hidden;\n+  cursor: pointer;\n+  z-index: 1;\n+  pointer-events: auto;\n+  opacity: ${props => props.$opacity || 1};\n+  box-sizing: border-box;\n+  max-width: calc(100% - 2px);\n+  word-wrap: break-word;\n+  text-overflow: ellipsis;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+\n+  &:hover {\n+    background-color: ${props => props.$color}50;\n+    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n+    z-index: 2;\n+  }\n+`;\n+\n+const EventTitle = styled.div`\n+  font-size: ${AppTextStyles.label3.fontSize};\n+  font-weight: 500;\n+  color: ${AppColors.onSurface};\n+  line-height: 1.1;\n+  overflow: hidden;\n+  text-overflow: ellipsis;\n+  white-space: nowrap;\n+  text-align: center;\n+  width: 100%;\n+`;\n+\n+const StaffLegend = styled.div`\n+  padding: 8px 12px;\n+  background-color: ${AppColors.background};\n+  border-top: 1px solid ${AppColors.borderLight};\n+  display: flex;\n+  flex-wrap: wrap;\n+  gap: 12px;\n+  align-items: center;\n+`;\n+\n+const StaffLegendItem = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 6px;\n+`;\n+\n+const StaffColorDot = styled.div<{ $color: string }>`\n+  width: 8px;\n+  height: 8px;\n+  border-radius: 50%;\n+  background-color: ${props => props.$color};\n+`;\n+\n+const StaffLegendName = styled.span`\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  color: ${AppColors.onSurface};\n+`;\n+\n+const WeekView: React.FC<WeekViewProps> = ({\n+  currentDate,\n+  events,\n+  staffList,\n+  selectedStaffIds,\n+  onEventClick,\n+  onEventCreate,\n+  allowEmptyStaff = false,\n+  programDuration,\n+  disablePastTime = false,\n+  weeklyHolidaySettings = [],\n+  currentUser\n+}) => {\n+  const weekDates = getWeekDates(currentDate);\n+  \n+  // 항상 30분 단위로 시간 슬롯 생성\n+  const timeSlots = generateTimeSlots(programDuration);\n+  \n+  // 필터링된 직원 목록 (선택된 코치만)\n+  const filteredStaff = staffList.filter(staff => \n+    selectedStaffIds.includes(staff.id) && staff.program // 담당 프로그램이 있는 직원\n+  );\n+\n+  // 해당 주의 이벤트만 필터링\n+  const weekEvents = events.filter(event => \n+    weekDates.some(day => isEventOnDate(event.startTime, event.endTime, day.date))\n+  );\n+\n+  // 이벤트 위치 계산\n+  const getEventPosition = (event: ScheduleEvent, dayDate: Date) => {\n+    if (!isEventOnDate(event.startTime, event.endTime, dayDate)) {\n+      return null;\n+    }\n+\n+    const dayStart = new Date(dayDate);\n+    dayStart.setHours(6, 0, 0, 0);\n+\n+    const eventStart = new Date(event.startTime);\n+    const eventEnd = new Date(event.endTime);\n+\n+    // 시작/종료 시간이 당일 범위를 벗어나면 조정\n+    if (eventStart.toDateString() !== dayDate.toDateString()) {\n+      eventStart.setTime(dayStart.getTime());\n+    }\n+    if (eventEnd.toDateString() !== dayDate.toDateString()) {\n+      eventEnd.setHours(22, 0, 0, 0);\n+    }\n+\n+    const startMinutes = (eventStart.getTime() - dayStart.getTime()) / (1000 * 60);\n+    const durationMinutes = (eventEnd.getTime() - eventStart.getTime()) / (1000 * 60);\n+\n+    return {\n+      top: Math.max(0, (startMinutes / 30) * 30), // 30분당 30px (30분 단위로 조정)\n+      height: Math.max(15, (durationMinutes / 30) * 30)\n+    };\n+  };\n+\n+  // 같은 시간대 이벤트들의 위치 조정\n+  const getEventLayout = (dayEvents: ScheduleEvent[], targetEvent: ScheduleEvent) => {\n+    // 같은 시간대에 겹치는 이벤트들 찾기\n+    const overlapping = dayEvents.filter(e => {\n+      if (e.id === targetEvent.id) return false;\n+      return (targetEvent.startTime < e.endTime && targetEvent.endTime > e.startTime);\n+    });\n+\n+    // 겹치는 이벤트가 없으면 전체 너비 사용\n+    if (overlapping.length === 0) {\n+      return {\n+        left: 0,\n+        width: 100,\n+        opacity: 1\n+      };\n+    }\n+\n+    // 모든 겹치는 이벤트들을 ID 순으로 정렬 (일관된 순서 보장)\n+    const allOverlapping = [...overlapping, targetEvent].sort((a, b) => \n+      a.id.localeCompare(b.id)\n+    );\n+\n+    const totalCount = allOverlapping.length;\n+    const eventIndex = allOverlapping.findIndex(e => e.id === targetEvent.id);\n+\n+    // 각 이벤트가 동일한 너비를 가지도록 계산\n+    const eventWidth = Math.floor(100 / totalCount);\n+    const eventLeft = eventIndex * eventWidth;\n+\n+    return {\n+      left: eventLeft,\n+      width: eventWidth,\n+      opacity: 0.95\n+    };\n+  };\n+\n+  // 특정 시간이 휴게시간에 포함되는지 확인\n+  const isTimeInBreak = (staffId: string, dayDate: Date, hour: number, minute: number) => {\n+    const targetTime = new Date(dayDate);\n+    targetTime.setHours(hour, minute, 0, 0);\n+    \n+    return events.some(event => \n+      event.staffId === staffId &&\n+      event.type === 'break' &&\n+      targetTime >= event.startTime &&\n+      targetTime < event.endTime\n+    );\n+  };\n+\n+  // 특정 직원의 특정 시간대가 예약 가능한지 확인하는 함수 (휴일 제외, 근무시간과 휴게시간만 체크)\n+  const isTimeSlotAvailable = (staffId: string, hour: number, minute: number, targetDate: Date) => {\n+    const dayOfWeek = targetDate.getDay();\n+    const weekStartDate = (() => {\n+      const monday = new Date(targetDate);\n+      monday.setDate(targetDate.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));\n+      return monday.toISOString().split('T')[0];\n+    })();\n+\n+    if (!weeklyHolidaySettings) return true;\n+\n+    const weeklySettings = weeklyHolidaySettings.find(\n+      s => s.staffId === staffId && s.weekStartDate === weekStartDate\n+    );\n+\n+    if (weeklySettings) {\n+      const dayKeys = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n+      const dayKey = dayKeys[dayOfWeek] as keyof typeof weeklySettings.weekDays;\n+      const daySettings = weeklySettings.weekDays[dayKey];\n+\n+      if (daySettings) {\n+        // 휴일이면 근무시간 체크 안함 (항상 true 반환)\n+        if (daySettings.isHoliday) return true;\n+\n+        // 근무시간 외면 예약 불가\n+        if (daySettings.workingHours) {\n+          const { start, end } = daySettings.workingHours;\n+          const currentTimeInMinutes = hour * 60 + minute;\n+          if (currentTimeInMinutes < start || currentTimeInMinutes >= end) return false;\n+        }\n+\n+        // 휴게시간이면 예약 불가\n+        if (daySettings.breakTimes) {\n+          for (const breakTime of daySettings.breakTimes) {\n+            const currentTimeInMinutes = hour * 60 + minute;\n+            if (currentTimeInMinutes >= breakTime.start && currentTimeInMinutes < breakTime.end) return false;\n+          }\n+        }\n+      }\n+    }\n+\n+    return true;\n+  };\n+\n+  const handleSlotClick = (dayDate: Date, slot: { hour: number; minute: number }) => {\n+    // Master인 경우 여러 코치가 선택되어도 팝업을 띄움 (팝업에서 코치 선택)\n+    // Coach인 경우 본인만 선택되어야 함\n+    let staffId: string | undefined;\n+    \n+    if (currentUser?.role === 'master') {\n+      // Master: 코치가 하나만 선택된 경우 해당 코치 사용, 아니면 팝업에서 선택\n+      if (filteredStaff.length === 1) {\n+        staffId = filteredStaff[0].id;\n+      }\n+      // 여러 코치 선택 또는 미선택 시에도 팝업을 띄움 (staffId는 undefined)\n+    } else if (currentUser?.role === 'coach') {\n+      // Coach: 본인만 선택되어야 함\n+      if (filteredStaff.length !== 1 || filteredStaff[0].id !== currentUser.id) {\n+        alert('본인의 일정만 관리할 수 있습니다.');\n+        return;\n+      }\n+      staffId = filteredStaff[0].id;\n+    } else {\n+      // 권한 없음\n+      alert('예약 생성 권한이 없습니다.');\n+      return;\n+    }\n+\n+    const staff = staffId ? staffList.find(s => s.id === staffId) : undefined;\n+\n+    // 계약 기간 체크\n+    if (staff?.contractStartDate && staff?.contractEndDate) {\n+      const contractStart = new Date(staff.contractStartDate);\n+      contractStart.setHours(0, 0, 0, 0);\n+      const contractEnd = new Date(staff.contractEndDate);\n+      contractEnd.setHours(0, 0, 0, 0);\n+      \n+      const selectedDate = new Date(dayDate);\n+      selectedDate.setHours(0, 0, 0, 0);\n+      \n+      if (selectedDate < contractStart || selectedDate > contractEnd) {\n+        alert('해당 코치의 계약 기간 외입니다. 예약을 생성할 수 없습니다.');\n+        return;\n+      }\n+    }\n+\n+    // 과거 시간 체크 (disablePastTime이 true인 경우)\n+    if (disablePastTime) {\n+      const now = new Date();\n+      const slotTime = new Date(dayDate);\n+      slotTime.setHours(slot.hour, slot.minute, 0, 0);\n+      \n+      if (slotTime < now) {\n+        return; // 과거 시간인 경우 클릭 이벤트 무시\n+      }\n+    }\n+\n+    // staffId가 있는 경우에만 휴일/휴게시간/근무시간 체크 수행\n+    // (Master가 여러 코치 선택 시 staffId가 undefined이므로 체크 건너뜀)\n+    if (staffId) {\n+      // 해당 날짜가 휴일인지 확인 (날짜 레벨에서)\n+      const staffName = staff?.name || '';\n+      const holidayStaffNames = getHolidayStaffNames(dayDate, weeklyHolidaySettings || [], staffList);\n+      const isStaffOnHoliday = holidayStaffNames.includes(staffName);\n+      \n+      if (isStaffOnHoliday) {\n+        // 휴일에 포함된 경우, 코치 권한이 있는지 확인\n+        if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+          // 마스터이거나 본인 코치인 경우 허용\n+          if (window.confirm(`이 날짜는 휴일입니다. 예약을 생성하시겠습니까?`)) {\n+            // 예약 생성 진행\n+            if (onEventCreate) {\n+              const startTime = new Date(dayDate);\n+              startTime.setHours(slot.hour, slot.minute, 0, 0);\n+              \n+              const endTime = new Date(startTime);\n+              const duration = programDuration || 30;\n+              const actualDuration = duration > 30 ? 60 : duration;\n+              endTime.setMinutes(endTime.getMinutes() + actualDuration);\n+              \n+              onEventCreate(startTime, endTime, staffId);\n+            }\n+          }\n+        } else {\n+          // 일반 사용자는 휴일에 예약 불가\n+          alert('휴일에는 예약을 생성할 수 없습니다. 관리자 또는 해당 코치에게 문의하세요.');\n+        }\n+        return;\n+      }\n+\n+      // 휴게시간 체크 (마스터나 본인 코치는 예외)\n+      const isInBreak = isTimeInBreak(staffId, dayDate, slot.hour, slot.minute);\n+      if (isInBreak) {\n+        if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+          // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n+        } else {\n+          alert('휴게시간에는 예약을 생성할 수 없습니다.');\n+          return;\n+        }\n+      }\n+\n+      // 근무시간 체크 (마스터나 본인 코치는 예외)\n+      const isAvailable = isTimeSlotAvailable(staffId, slot.hour, slot.minute, dayDate);\n+      if (!isAvailable) {\n+        if (currentUser && (currentUser.role === 'master' || currentUser.id === staffId)) {\n+          // 마스터이거나 본인 코치인 경우 허용 (확인 없이 바로 진행)\n+        } else {\n+          // 일반 사용자는 근무시간 외/휴일/휴게시간에 예약 불가\n+          alert('이 시간대는 예약할 수 없습니다.');\n+          return;\n+        }\n+      }\n+    }\n+\n+    if (onEventCreate) {\n+      const startTime = new Date(dayDate);\n+      startTime.setHours(slot.hour, slot.minute, 0, 0);\n+      \n+      const endTime = new Date(startTime);\n+      // 프로그램 소요시간에 따른 종료시간 계산\n+      const duration = programDuration || 30; // 기본 30분\n+      const actualDuration = duration > 30 ? 60 : duration; // 50분은 1시간으로 처리\n+      endTime.setMinutes(endTime.getMinutes() + actualDuration);\n+      \n+      onEventCreate(startTime, endTime, staffId);\n+    }\n+  };\n+\n+  if (!allowEmptyStaff && filteredStaff.length === 0) {\n+    return (\n+      <WeekContainer>\n+        <div style={{ padding: '48px', textAlign: 'center', color: AppColors.onSurface + '60' }}>\n+          표시할 코치를 선택해주세요.\n+        </div>\n+      </WeekContainer>\n+    );\n+  }\n+\n+  return (\n+    <WeekContainer>\n+      {/* 헤더 */}\n+      <Header>\n+        <TimeHeader>시간</TimeHeader>\n+        {weekDates.map(day => {\n+          // 각 날짜의 휴일 정보 가져오기\n+          const holidayStaffNames = getHolidayStaffNames(day.date, weeklyHolidaySettings || [], staffList);\n+          const holidayInfo = formatHolidayInfo(holidayStaffNames);\n+          \n+          return (\n+            <DayHeader \n+              key={day.date.toISOString()} \n+              $isToday={day.isToday}\n+              $isWeekend={day.isWeekend}\n+            >\n+              <DayName $isWeekend={day.isWeekend}>{day.dayName}</DayName>\n+              <DayDate $isToday={day.isToday} $isWeekend={day.isWeekend}>\n+                {day.date.getDate()}\n+              </DayDate>\n+              {holidayInfo && <HolidayInfo>{holidayInfo}</HolidayInfo>}\n+            </DayHeader>\n+          );\n+        })}\n+      </Header>\n+\n+      {/* 스크롤 가능한 타임 그리드 */}\n+      <ScrollableContent>\n+        <TimeGrid>\n+          {/* 시간 컬럼 */}\n+          <TimeColumn>\n+            {timeSlots.map(slot => (\n+              <TimeSlot key={`${slot.hour}-${slot.minute}`}>\n+                {slot.minute === 0 ? slot.display : ''}\n+              </TimeSlot>\n+            ))}\n+          </TimeColumn>\n+\n+          {/* 각 날짜별 컬럼 */}\n+          {weekDates.map(day => {\n+            const dayEvents = allowEmptyStaff \n+              ? weekEvents.filter(event => \n+                  isEventOnDate(event.startTime, event.endTime, day.date)\n+                )\n+              : weekEvents.filter(event => \n+                  isEventOnDate(event.startTime, event.endTime, day.date) &&\n+                  selectedStaffIds.includes(event.staffId)\n+                );\n+\n+            return (\n+              <DayGridColumn \n+                key={day.date.toISOString()}\n+                $isToday={day.isToday}\n+                $isWeekend={day.isWeekend}\n+              >\n+                {timeSlots.map(slot => {\n+                  // 과거 시간 체크\n+                  const isPastTime = disablePastTime && (() => {\n+                    const now = new Date();\n+                    const slotTime = new Date(day.date);\n+                    slotTime.setHours(slot.hour, slot.minute, 0, 0);\n+                    return slotTime < now;\n+                  })();\n+\n+                  // 코치가 하나만 선택된 경우에만 시간 가용성 체크\n+                  let isAvailable = true;\n+                  let isInBreak = false;\n+\n+                  if (filteredStaff.length === 1) {\n+                    const staff = filteredStaff[0];\n+                    isAvailable = isTimeSlotAvailable(staff.id, slot.hour, slot.minute, day.date);\n+                    isInBreak = isTimeInBreak(staff.id, day.date, slot.hour, slot.minute);\n+                  }\n+\n+                  return (\n+                    <DayTimeSlot\n+                      key={`${day.date.toISOString()}-${slot.hour}-${slot.minute}`}\n+                      $isPastTime={isPastTime}\n+                      $isAvailable={filteredStaff.length === 1 ? isAvailable : true}\n+                      $isBreakTime={filteredStaff.length === 1 ? isInBreak : false}\n+                      onClick={() => handleSlotClick(day.date, slot)}\n+                    />\n+                  );\n+                })}\n+\n+                {/* 해당 날짜의 이벤트들 */}\n+                <StaffEventsContainer>\n+                  {dayEvents.map(event => {\n+                    const position = getEventPosition(event, day.date);\n+                    if (!position) return null;\n+\n+                    const layout = getEventLayout(dayEvents, event);\n+                    const staff = filteredStaff.find(s => s.id === event.staffId);\n+\n+                    return (\n+                      <EventBlock\n+                        key={event.id}\n+                        $color={staff?.color || AppColors.primary}\n+                        $top={position.top}\n+                        $height={position.height}\n+                        $left={layout.left}\n+                        $width={layout.width}\n+                        $opacity={layout.opacity}\n+                        onClick={() => onEventClick?.(event)}\n+                      >\n+                        <EventTitle>\n+                          {event.type === 'holiday' ? '휴일' : \n+                           event.type === 'break' ? event.title :\n+                           (event.memberName || '예약자')}\n+                        </EventTitle>\n+                      </EventBlock>\n+                    );\n+                  })}\n+                </StaffEventsContainer>\n+              </DayGridColumn>\n+            );\n+          })}\n+        </TimeGrid>\n+      </ScrollableContent>\n+\n+      {/* 직원 범례 */}\n+      <StaffLegend>\n+        <span style={{ \n+          fontSize: AppTextStyles.label2.fontSize, \n+          fontWeight: 500, \n+          color: AppColors.onSurface,\n+          marginRight: '8px'\n+        }}>\n+          코치:\n+        </span>\n+        {filteredStaff.map(staff => (\n+          <StaffLegendItem key={staff.id}>\n+            <StaffColorDot $color={staff.color || AppColors.primary} />\n+            <StaffLegendName>{staff.name}</StaffLegendName>\n+          </StaffLegendItem>\n+        ))}\n+      </StaffLegend>\n+    </WeekContainer>\n+  );\n+};\n+\n+export default WeekView;\n"
                }
            ],
            "date": 1760154018684,
            "name": "Commit-0",
            "content": "import React from 'react';\nimport styled from 'styled-components';\nimport { AppColors } from '../../styles/colors';\nimport { AppTextStyles } from '../../styles/textStyles';\nimport { ScheduleEvent, StaffInfo } from './types';\nimport { getWeekDates, formatTime, isEventOnDate } from './utils';\n\ninterface WeekViewProps {\n  currentDate: Date;\n  events: ScheduleEvent[];\n  staffList: StaffInfo[];\n  selectedStaffIds: string[];\n  onEventClick?: (event: ScheduleEvent) => void;\n  onEventCreate?: (startTime: Date, endTime: Date, staffId?: string) => void;\n}\n\nconst WeekContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  border: 1px solid ${AppColors.borderLight};\n  border-radius: 8px;\n  background-color: ${AppColors.surface};\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  background-color: ${AppColors.background};\n  border-bottom: 1px solid ${AppColors.borderLight};\n`;\n\nconst TimeHeader = styled.div`\n  width: 80px;\n  padding: 12px 8px;\n  text-align: center;\n  font-size: ${AppTextStyles.body2.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onSurface};\n  border-right: 1px solid ${AppColors.borderLight};\n`;\n\nconst DayHeader = styled.div<{ isToday: boolean; isWeekend: boolean }>`\n  flex: 1;\n  padding: 12px 8px;\n  text-align: center;\n  border-right: 1px solid ${AppColors.borderLight};\n  background-color: ${props => props.isToday ? AppColors.primary + '10' : 'transparent'};\n  \n  &:last-child {\n    border-right: none;\n  }\n`;\n\nconst DayName = styled.div<{ isWeekend: boolean }>`\n  font-size: ${AppTextStyles.label2.fontSize};\n  font-weight: 500;\n  color: ${props => props.isWeekend ? AppColors.error : AppColors.onSurface}80;\n  margin-bottom: 4px;\n`;\n\nconst DayDate = styled.div<{ isToday: boolean; isWeekend: boolean }>`\n  font-size: ${AppTextStyles.body1.fontSize};\n  font-weight: ${props => props.isToday ? 600 : 500};\n  color: ${props => \n    props.isToday ? AppColors.primary : \n    props.isWeekend ? AppColors.error : \n    AppColors.onSurface\n  };\n`;\n\nconst ScrollableContent = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  max-height: 600px;\n`;\n\nconst TimeGrid = styled.div`\n  display: flex;\n`;\n\nconst TimeColumn = styled.div`\n  width: 80px;\n  border-right: 1px solid ${AppColors.borderLight};\n`;\n\nconst TimeSlot = styled.div`\n  height: 60px;\n  padding: 4px 8px;\n  border-bottom: 1px solid ${AppColors.borderLight}20;\n  font-size: ${AppTextStyles.label2.fontSize};\n  color: ${AppColors.onSurface}60;\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n`;\n\nconst DayGridColumn = styled.div<{ isToday: boolean; isWeekend: boolean }>`\n  flex: 1;\n  border-right: 1px solid ${AppColors.borderLight};\n  position: relative;\n  background-color: ${props => \n    props.isToday ? AppColors.primary + '05' : \n    props.isWeekend ? AppColors.surface + 'F0' : \n    'transparent'\n  };\n\n  &:last-child {\n    border-right: none;\n  }\n`;\n\nconst DayTimeSlot = styled.div`\n  height: 60px;\n  border-bottom: 1px solid ${AppColors.borderLight}20;\n  position: relative;\n  cursor: pointer;\n\n  &:hover {\n    background-color: ${AppColors.primary}08;\n  }\n`;\n\nconst StaffEventsContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 100%;\n  pointer-events: none;\n`;\n\nconst EventBlock = styled.div<{ \n  color: string; \n  top: number; \n  height: number; \n  left: number; \n  width: number;\n  opacity?: number;\n}>`\n  position: absolute;\n  left: ${props => props.left}%;\n  width: ${props => props.width}%;\n  top: ${props => props.top}px;\n  height: ${props => props.height}px;\n  background-color: ${props => props.color}20;\n  border: 1px solid ${props => props.color};\n  border-radius: 3px;\n  padding: 2px 4px;\n  overflow: hidden;\n  cursor: pointer;\n  z-index: 1;\n  pointer-events: auto;\n  opacity: ${props => props.opacity || 1};\n\n  &:hover {\n    background-color: ${props => props.color}30;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n    z-index: 2;\n  }\n`;\n\nconst EventTitle = styled.div`\n  font-size: ${AppTextStyles.label3.fontSize};\n  font-weight: 500;\n  color: ${AppColors.onSurface};\n  line-height: 1.1;\n  margin-bottom: 1px;\n`;\n\nconst EventTime = styled.div`\n  font-size: 10px;\n  color: ${AppColors.onSurface}70;\n  line-height: 1;\n`;\n\nconst EventStaff = styled.div`\n  font-size: 10px;\n  color: ${AppColors.primary};\n  line-height: 1;\n  margin-top: 1px;\n`;\n\nconst StaffLegend = styled.div`\n  padding: 8px 12px;\n  background-color: ${AppColors.background};\n  border-top: 1px solid ${AppColors.borderLight};\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  align-items: center;\n`;\n\nconst StaffLegendItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 6px;\n`;\n\nconst StaffColorDot = styled.div<{ color: string }>`\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background-color: ${props => props.color};\n`;\n\nconst StaffLegendName = styled.span`\n  font-size: ${AppTextStyles.label2.fontSize};\n  color: ${AppColors.onSurface};\n`;\n\nconst WeekView: React.FC<WeekViewProps> = ({\n  currentDate,\n  events,\n  staffList,\n  selectedStaffIds,\n  onEventClick,\n  onEventCreate\n}) => {\n  const weekDates = getWeekDates(currentDate);\n  const timeSlots = Array.from({ length: 17 }, (_, i) => 6 + i); // 6시부터 22시까지\n  \n  // 필터링된 직원 목록 (선택된 코치만)\n  const filteredStaff = staffList.filter(staff => \n    selectedStaffIds.includes(staff.id) && staff.role === '코치'\n  );\n\n  // 해당 주의 이벤트만 필터링\n  const weekEvents = events.filter(event => \n    weekDates.some(day => isEventOnDate(event.startTime, event.endTime, day.date))\n  );\n\n  // 이벤트 위치 계산\n  const getEventPosition = (event: ScheduleEvent, dayDate: Date) => {\n    if (!isEventOnDate(event.startTime, event.endTime, dayDate)) {\n      return null;\n    }\n\n    const dayStart = new Date(dayDate);\n    dayStart.setHours(6, 0, 0, 0);\n\n    const eventStart = new Date(event.startTime);\n    const eventEnd = new Date(event.endTime);\n\n    // 시작/종료 시간이 당일 범위를 벗어나면 조정\n    if (eventStart.toDateString() !== dayDate.toDateString()) {\n      eventStart.setTime(dayStart.getTime());\n    }\n    if (eventEnd.toDateString() !== dayDate.toDateString()) {\n      eventEnd.setHours(22, 0, 0, 0);\n    }\n\n    const startMinutes = (eventStart.getTime() - dayStart.getTime()) / (1000 * 60);\n    const durationMinutes = (eventEnd.getTime() - eventStart.getTime()) / (1000 * 60);\n\n    return {\n      top: Math.max(0, (startMinutes / 60) * 60), // 1시간당 60px\n      height: Math.max(20, (durationMinutes / 60) * 60)\n    };\n  };\n\n  // 같은 시간대 이벤트들의 위치 조정\n  const getEventLayout = (dayEvents: ScheduleEvent[], targetEvent: ScheduleEvent) => {\n    const overlapping = dayEvents.filter(e => {\n      if (e.id === targetEvent.id) return false;\n      return (targetEvent.startTime < e.endTime && targetEvent.endTime > e.startTime);\n    });\n\n    const totalOverlapping = overlapping.length + 1;\n    const eventIndex = overlapping.findIndex(e => e.startTime <= targetEvent.startTime) + 1;\n\n    return {\n      left: (eventIndex / totalOverlapping) * 100,\n      width: 100 / totalOverlapping,\n      opacity: totalOverlapping > 1 ? 0.9 : 1\n    };\n  };\n\n  const handleSlotClick = (dayDate: Date, hour: number) => {\n    if (onEventCreate) {\n      const startTime = new Date(dayDate);\n      startTime.setHours(hour, 0, 0, 0);\n      \n      const endTime = new Date(startTime);\n      endTime.setHours(hour + 1); // 기본 1시간 슬롯\n      \n      onEventCreate(startTime, endTime);\n    }\n  };\n\n  if (filteredStaff.length === 0) {\n    return (\n      <WeekContainer>\n        <div style={{ padding: '48px', textAlign: 'center', color: AppColors.onSurface + '60' }}>\n          표시할 코치를 선택해주세요.\n        </div>\n      </WeekContainer>\n    );\n  }\n\n  return (\n    <WeekContainer>\n      {/* 헤더 */}\n      <Header>\n        <TimeHeader>시간</TimeHeader>\n        {weekDates.map(day => (\n          <DayHeader \n            key={day.date.toISOString()} \n            isToday={day.isToday}\n            isWeekend={day.isWeekend}\n          >\n            <DayName isWeekend={day.isWeekend}>{day.dayName}</DayName>\n            <DayDate isToday={day.isToday} isWeekend={day.isWeekend}>\n              {day.date.getDate()}\n            </DayDate>\n          </DayHeader>\n        ))}\n      </Header>\n\n      {/* 스크롤 가능한 타임 그리드 */}\n      <ScrollableContent>\n        <TimeGrid>\n          {/* 시간 컬럼 */}\n          <TimeColumn>\n            {timeSlots.map(hour => (\n              <TimeSlot key={hour}>\n                {hour}:00\n              </TimeSlot>\n            ))}\n          </TimeColumn>\n\n          {/* 각 날짜별 컬럼 */}\n          {weekDates.map(day => {\n            const dayEvents = weekEvents.filter(event => \n              isEventOnDate(event.startTime, event.endTime, day.date) &&\n              selectedStaffIds.includes(event.staffId)\n            );\n\n            return (\n              <DayGridColumn \n                key={day.date.toISOString()}\n                isToday={day.isToday}\n                isWeekend={day.isWeekend}\n              >\n                {timeSlots.map(hour => (\n                  <DayTimeSlot\n                    key={`${day.date.toISOString()}-${hour}`}\n                    onClick={() => handleSlotClick(day.date, hour)}\n                  />\n                ))}\n\n                {/* 해당 날짜의 이벤트들 */}\n                <StaffEventsContainer>\n                  {dayEvents.map(event => {\n                    const position = getEventPosition(event, day.date);\n                    if (!position) return null;\n\n                    const layout = getEventLayout(dayEvents, event);\n                    const staff = filteredStaff.find(s => s.id === event.staffId);\n\n                    return (\n                      <EventBlock\n                        key={event.id}\n                        color={staff?.color || AppColors.primary}\n                        top={position.top}\n                        height={position.height}\n                        left={layout.left}\n                        width={layout.width}\n                        opacity={layout.opacity}\n                        onClick={() => onEventClick?.(event)}\n                      >\n                        <EventTitle>{event.title}</EventTitle>\n                        <EventTime>\n                          {formatTime(event.startTime)}-{formatTime(event.endTime)}\n                        </EventTime>\n                        <EventStaff>{event.staffName}</EventStaff>\n                      </EventBlock>\n                    );\n                  })}\n                </StaffEventsContainer>\n              </DayGridColumn>\n            );\n          })}\n        </TimeGrid>\n      </ScrollableContent>\n\n      {/* 직원 범례 */}\n      <StaffLegend>\n        <span style={{ \n          fontSize: AppTextStyles.label2.fontSize, \n          fontWeight: 500, \n          color: AppColors.onSurface,\n          marginRight: '8px'\n        }}>\n          코치:\n        </span>\n        {filteredStaff.map(staff => (\n          <StaffLegendItem key={staff.id}>\n            <StaffColorDot color={staff.color || AppColors.primary} />\n            <StaffLegendName>{staff.name}</StaffLegendName>\n          </StaffLegendItem>\n        ))}\n      </StaffLegend>\n    </WeekContainer>\n  );\n};\n\nexport default WeekView;\n"
        }
    ]
}