{
    "sourceFile": "src/components/Calendar/WeeklyHolidayModal.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 27,
            "patches": [
                {
                    "date": 1761451696622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1761451875566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,9 +132,9 @@\n `;\n \n const WeekHeader = styled.div`\n   display: flex;\n-  justify-content: space-between;\n+  justify-content: center;\n   align-items: center;\n   margin-bottom: 16px;\n `;\n \n@@ -144,21 +144,8 @@\n   color: ${AppColors.onSurface};\n   margin: 0;\n `;\n \n-const WeekNavButton = styled.button`\n-  background: none;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 4px;\n-  padding: 8px 12px;\n-  cursor: pointer;\n-  color: ${AppColors.onSurface};\n-  \n-  &:hover {\n-    background-color: ${AppColors.background};\n-  }\n-`;\n-\n const WeekDaysContainer = styled.div`\n   background-color: ${AppColors.background};\n   border-radius: 8px;\n   padding: 16px;\n@@ -286,26 +273,30 @@\n   const [defaultEndTime, setDefaultEndTime] = useState(20);\n   const [isLoading, setIsLoading] = useState(false);\n   const [error, setError] = useState<string | null>(null);\n \n-  // 다음주 월요일 날짜 계산\n-  const getNextMondayDate = (): string => {\n+  // 현재 설정 가능한 주의 월요일 날짜 계산\n+  const getCurrentSettableWeekStartDate = (): string => {\n     const today = new Date();\n-    const dayOfWeek = today.getDay();\n-    const daysUntilNextMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;\n-    const nextMonday = new Date(today);\n-    nextMonday.setDate(today.getDate() + daysUntilNextMonday);\n-    return nextMonday.toISOString().split('T')[0];\n+    const dayOfWeek = today.getDay(); // 0: 일요일, 1: 월요일, ..., 5: 금요일, 6: 토요일\n+    \n+    let targetWeek: Date;\n+    \n+    if (dayOfWeek >= 0 && dayOfWeek <= 5) {\n+      // 일요일부터 금요일까지: 다음주 설정 가능\n+      targetWeek = new Date(today);\n+      const daysUntilNextMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;\n+      targetWeek.setDate(today.getDate() + daysUntilNextMonday);\n+    } else {\n+      // 토요일(6): 그 다음주 설정 가능 (다다음주)\n+      targetWeek = new Date(today);\n+      const daysUntilNextNextMonday = 2; // 토요일 기준으로 2일 후가 다다음주 월요일\n+      targetWeek.setDate(today.getDate() + daysUntilNextNextMonday);\n+    }\n+    \n+    return targetWeek.toISOString().split('T')[0];\n   };\n-\n-  // 주 변경 함수\n-  const changeWeek = (direction: 'prev' | 'next') => {\n-    const currentDate = new Date(currentWeekStartDate + 'T00:00:00');\n-    const newDate = new Date(currentDate);\n-    newDate.setDate(currentDate.getDate() + (direction === 'next' ? 7 : -7));\n-    setCurrentWeekStartDate(newDate.toISOString().split('T')[0]);\n-  };\n-\n+  \n   // 주 날짜 범위 표시\n   const getWeekDateRange = (): string => {\n     const startDate = new Date(currentWeekStartDate + 'T00:00:00');\n     const endDate = new Date(startDate);\n@@ -320,11 +311,11 @@\n \n   // 초기화\n   useEffect(() => {\n     if (isOpen) {\n-      // 다음주 월요일로 초기 설정\n-      const nextMonday = getNextMondayDate();\n-      setCurrentWeekStartDate(nextMonday);\n+      // 현재 설정 가능한 주로 초기 설정\n+      const settableWeek = getCurrentSettableWeekStartDate();\n+      setCurrentWeekStartDate(settableWeek);\n       \n       // 직원 선택 초기화\n       if (staffId) {\n         setSelectedStaffIds([staffId]);\n@@ -443,9 +434,9 @@\n     <ModalOverlay onClick={onClose}>\n       <ModalContainer onClick={e => e.stopPropagation()}>\n         <ModalHeader>\n           <ModalTitle>\n-            {staffId ? `${staffList.find(s => s.id === staffId)?.name} 코치 주별 휴일설정` : '코치 주별 휴일설정'}\n+            {staffId ? `${staffList.find(s => s.id === staffId)?.name} 코치 휴일설정` : '코치 휴일설정'}\n           </ModalTitle>\n           <CloseButton onClick={onClose}>×</CloseButton>\n         </ModalHeader>\n         \n@@ -503,17 +494,23 @@\n           {/* 주별 휴일설정 */}\n           <WeekSection>\n             <WeekHeader>\n               <WeekTitle>\n-                {getWeekDateRange()}\n+                설정 대상 주: {getWeekDateRange()}\n               </WeekTitle>\n-              <div>\n-                <WeekNavButton onClick={() => changeWeek('prev')}>이전주</WeekNavButton>\n-                <WeekNavButton onClick={() => changeWeek('next')} style={{ marginLeft: '8px' }}>다음주</WeekNavButton>\n-              </div>\n             </WeekHeader>\n             \n             <div style={{ fontSize: '14px', marginBottom: '12px', color: AppColors.onSurface + '80' }}>\n+              {(() => {\n+                const today = new Date();\n+                const dayOfWeek = today.getDay();\n+                if (dayOfWeek >= 0 && dayOfWeek <= 5) {\n+                  return '금요일 끝나기 전까지 다음주 휴일과 근무시간을 설정할 수 있습니다.';\n+                } else {\n+                  return '토요일이므로 그 다음주 휴일과 근무시간을 설정할 수 있습니다.';\n+                }\n+              })()}\n+              <br />\n               체크하면 휴일, 체크 해제하면 근무일입니다.\n             </div>\n             \n             <WeekDaysContainer>\n"
                },
                {
                    "date": 1761452497245,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,29 +151,38 @@\n   padding: 16px;\n `;\n \n const WeekDay = styled.div<{ $isWeekend: boolean; $isHoliday: boolean }>`\n-  display: flex;\n-  align-items: center;\n-  justify-content: space-between;\n-  padding: 12px 0;\n+  padding: 16px;\n   border-bottom: 1px solid ${AppColors.borderLight};\n+  background-color: ${props => props.$isHoliday ? AppColors.error + '10' : AppColors.surface};\n   \n   &:last-child {\n     border-bottom: none;\n   }\n `;\n \n+// Removed unused styled component DayHeader\n+\n+// Removed unused styled component DayInfo\n+\n const DayLabel = styled.div<{ $isWeekend: boolean; $isHoliday: boolean }>`\n-  font-size: ${AppTextStyles.body2.fontSize};\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  font-weight: 600;\n   color: ${props => {\n     if (props.$isHoliday) return AppColors.error;\n     if (props.$isWeekend) return AppColors.onSurface + '80';\n     return AppColors.onSurface;\n   }};\n-  font-weight: ${props => props.$isWeekend ? '600' : '400'};\n+  min-width: 60px;\n `;\n \n+const DayDate = styled.div`\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  color: ${AppColors.onSurface + '60'};\n+  min-width: 40px;\n+`;\n+\n const DayToggle = styled.label`\n   display: flex;\n   align-items: center;\n   cursor: pointer;\n@@ -184,8 +193,136 @@\n     margin-right: 8px;\n   }\n `;\n \n+const WorkingHoursSection = styled.div<{ $isVisible: boolean }>`\n+  display: ${props => props.$isVisible ? 'block' : 'none'};\n+  margin-top: 12px;\n+  padding: 12px;\n+  background-color: ${AppColors.background};\n+  border-radius: 6px;\n+`;\n+\n+// Removed unused styled component WorkingHoursRow\n+\n+const BreakTimesSection = styled.div`\n+  margin-top: 8px;\n+`;\n+\n+/* Unused for now - may be used in future iterations\n+const BreakTimeItem = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  margin-bottom: 6px;\n+  \n+  input {\n+    width: 50px;\n+    padding: 4px 6px;\n+    border: 1px solid ${AppColors.borderLight};\n+    border-radius: 4px;\n+    font-size: ${AppTextStyles.body2.fontSize};\n+    text-align: center;\n+  }\n+  \n+  input[type=\"text\"] {\n+    width: 80px;\n+  }\n+  \n+  button {\n+    background: ${AppColors.error};\n+    color: ${AppColors.onPrimary};\n+    border: none;\n+    border-radius: 4px;\n+    padding: 4px 8px;\n+    font-size: 12px;\n+    cursor: pointer;\n+    \n+    &:hover {\n+      background: ${AppColors.error + 'CC'};\n+    }\n+  }\n+`;\n+*/\n+\n+const TimeInput = styled.input`\n+  width: 60px;\n+  padding: 4px 6px;\n+  border: 1px solid #ddd;\n+  border-radius: 4px;\n+  text-align: center;\n+  font-size: 0.9rem;\n+`;\n+\n+const WorkingHoursLabel = styled.div`\n+  font-size: 0.9rem;\n+  font-weight: 600;\n+  margin-bottom: 8px;\n+  color: #333;\n+`;\n+\n+const WorkingHoursInputs = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  margin-bottom: 12px;\n+`;\n+\n+const BreakTimesLabel = styled.div`\n+  font-size: 0.9rem;\n+  font-weight: 600;\n+  margin-bottom: 8px;\n+  color: #333;\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+`;\n+\n+const BreakTimeRow = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  margin-bottom: 8px;\n+`;\n+\n+const BreakTimeInput = styled.input`\n+  flex: 1;\n+  padding: 6px 8px;\n+  border: 1px solid #ddd;\n+  border-radius: 4px;\n+  font-size: 0.9rem;\n+`;\n+\n+const RemoveBreakTimeButton = styled.button`\n+  background: #ffebee;\n+  border: 1px solid #f44336;\n+  color: #f44336;\n+  padding: 4px 8px;\n+  border-radius: 4px;\n+  font-size: 0.8rem;\n+  cursor: pointer;\n+  \n+  &:hover {\n+    background: #f44336;\n+    color: white;\n+  }\n+`;\n+\n+const AddBreakTimeButton = styled.button`\n+  background: #e3f2fd;\n+  border: 1px solid #2196f3;\n+  color: #2196f3;\n+  padding: 4px 8px;\n+  border-radius: 4px;\n+  font-size: 0.8rem;\n+  cursor: pointer;\n+  \n+  &:hover {\n+    background: #2196f3;\n+    color: white;\n+  }\n+`;\n+\n const TimeSettingsSection = styled.div`\n   margin-bottom: 24px;\n `;\n \n@@ -259,16 +396,52 @@\n   existingWeeklyHolidays = []\n }) => {\n   const [selectedStaffIds, setSelectedStaffIds] = useState<string[]>([]);\n   const [currentWeekStartDate, setCurrentWeekStartDate] = useState('');\n-  const [weekDaySettings, setWeekDaySettings] = useState({\n-    monday: false,\n-    tuesday: false,\n-    wednesday: false,\n-    thursday: false,\n-    friday: false,\n-    saturday: true,  // 기본값: 주말 휴일\n-    sunday: true     // 기본값: 주말 휴일\n+  const [weekDaySettings, setWeekDaySettings] = useState<{\n+    monday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    tuesday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    wednesday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    thursday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    friday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    saturday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    sunday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+  }>({\n+    monday: {\n+      isHoliday: false,\n+      workingHours: { start: 10, end: 20 },\n+      breakTimes: []\n+    },\n+    tuesday: {\n+      isHoliday: false,\n+      workingHours: { start: 10, end: 20 },\n+      breakTimes: []\n+    },\n+    wednesday: {\n+      isHoliday: false,\n+      workingHours: { start: 10, end: 20 },\n+      breakTimes: []\n+    },\n+    thursday: {\n+      isHoliday: false,\n+      workingHours: { start: 10, end: 20 },\n+      breakTimes: []\n+    },\n+    friday: {\n+      isHoliday: false,\n+      workingHours: { start: 10, end: 20 },\n+      breakTimes: []\n+    },\n+    saturday: {\n+      isHoliday: true,  // 기본값: 주말 휴일\n+      workingHours: { start: 10, end: 20 },\n+      breakTimes: []\n+    },\n+    sunday: {\n+      isHoliday: true,  // 기본값: 주말 휴일\n+      workingHours: { start: 10, end: 20 },\n+      breakTimes: []\n+    }\n   });\n   const [defaultStartTime, setDefaultStartTime] = useState(10);\n   const [defaultEndTime, setDefaultEndTime] = useState(20);\n   const [isLoading, setIsLoading] = useState(false);\n@@ -348,27 +521,70 @@\n                   selectedStaffIds.includes(setting.staffId)\n       );\n       \n       if (existingSetting) {\n-        setWeekDaySettings(existingSetting.weekDays);\n-        if (existingSetting.workingHours) {\n-          setDefaultStartTime(existingSetting.workingHours.start);\n-          setDefaultEndTime(existingSetting.workingHours.end);\n-        }\n+        // 기존 설정이 있다면 로드하되, 구조가 맞지 않으면 기본값 사용\n+        const normalizedWeekDays = Object.keys(weekDaySettings).reduce((acc, day) => {\n+          const dayKey = day as keyof typeof weekDaySettings;\n+          const existingDay = existingSetting.weekDays[dayKey];\n+          \n+          acc[dayKey] = {\n+            isHoliday: existingDay?.isHoliday ?? false,\n+            workingHours: existingDay?.workingHours ?? { start: 9, end: 18 },\n+            breakTimes: (existingDay?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          };\n+          \n+          return acc;\n+        }, {} as typeof weekDaySettings);\n+        \n+        setWeekDaySettings(normalizedWeekDays);\n       } else {\n         // 기본값으로 리셋 (주말만 휴일)\n         setWeekDaySettings({\n-          monday: false,\n-          tuesday: false,\n-          wednesday: false,\n-          thursday: false,\n-          friday: false,\n-          saturday: true,\n-          sunday: true\n+          monday: {\n+            isHoliday: false,\n+            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            breakTimes: []\n+          },\n+          tuesday: {\n+            isHoliday: false,\n+            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            breakTimes: []\n+          },\n+          wednesday: {\n+            isHoliday: false,\n+            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            breakTimes: []\n+          },\n+          thursday: {\n+            isHoliday: false,\n+            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            breakTimes: []\n+          },\n+          friday: {\n+            isHoliday: false,\n+            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            breakTimes: []\n+          },\n+          saturday: {\n+            isHoliday: true,\n+            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            breakTimes: []\n+          },\n+          sunday: {\n+            isHoliday: true,\n+            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            breakTimes: []\n+          }\n         });\n       }\n     }\n-  }, [isOpen, currentWeekStartDate, selectedStaffIds, existingWeeklyHolidays]);\n+  // eslint-disable-next-line react-hooks/exhaustive-deps\n+  }, [isOpen, currentWeekStartDate, selectedStaffIds, existingWeeklyHolidays, defaultStartTime, defaultEndTime]);\n \n   const handleStaffToggle = (staffId: string) => {\n     setSelectedStaffIds(prev => \n       prev.includes(staffId)\n@@ -379,12 +595,68 @@\n \n   const handleDayToggle = (day: keyof typeof weekDaySettings) => {\n     setWeekDaySettings(prev => ({\n       ...prev,\n-      [day]: !prev[day]\n+      [day]: {\n+        ...prev[day],\n+        isHoliday: !prev[day].isHoliday\n+      }\n     }));\n   };\n \n+  const handleWorkingHoursChange = (day: keyof typeof weekDaySettings, field: 'start' | 'end', value: number) => {\n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        workingHours: {\n+          ...prev[day].workingHours,\n+          [field]: value\n+        }\n+      }\n+    }));\n+  };\n+\n+  const handleAddBreakTime = (day: keyof typeof weekDaySettings) => {\n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        breakTimes: [\n+          ...prev[day].breakTimes,\n+          { start: 12, end: 13, name: '점심시간' }\n+        ]\n+      }\n+    }));\n+  };\n+\n+  const handleBreakTimeChange = (\n+    day: keyof typeof weekDaySettings, \n+    index: number, \n+    field: 'start' | 'end' | 'name', \n+    value: number | string\n+  ) => {\n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        breakTimes: prev[day].breakTimes.map((breakTime, i) => \n+          i === index ? { ...breakTime, [field]: value } : breakTime\n+        )\n+      }\n+    }));\n+  };\n+\n+  const handleRemoveBreakTime = (day: keyof typeof weekDaySettings, index: number) => {\n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        breakTimes: prev[day].breakTimes.filter((_, i) => i !== index)\n+      }\n+    }));\n+  };\n+\n   const handleSave = async () => {\n     if (selectedStaffIds.length === 0) {\n       setError('코치를 선택해주세요.');\n       return;\n@@ -399,13 +671,9 @@\n       selectedStaffIds.forEach(staffId => {\n         settings.push({\n           staffId,\n           weekStartDate: currentWeekStartDate,\n-          weekDays: weekDaySettings,\n-          workingHours: {\n-            start: defaultStartTime,\n-            end: defaultEndTime\n-          }\n+          weekDays: weekDaySettings\n         });\n       });\n       \n       await onSave(settings);\n@@ -513,23 +781,94 @@\n               체크하면 휴일, 체크 해제하면 근무일입니다.\n             </div>\n             \n             <WeekDaysContainer>\n-              {dayLabels.map(({ key, label, isWeekend }) => (\n-                <WeekDay key={key} $isWeekend={isWeekend} $isHoliday={weekDaySettings[key]}>\n-                  <DayLabel $isWeekend={isWeekend} $isHoliday={weekDaySettings[key]}>\n-                    {label}\n-                  </DayLabel>\n-                  <DayToggle>\n-                    <input\n-                      type=\"checkbox\"\n-                      checked={weekDaySettings[key]}\n-                      onChange={() => handleDayToggle(key)}\n-                    />\n-                    휴일\n-                  </DayToggle>\n-                </WeekDay>\n-              ))}\n+              {dayLabels.map(({ key, label, isWeekend }) => {\n+                const daySettings = weekDaySettings[key];\n+                const currentDate = new Date(currentWeekStartDate);\n+                currentDate.setDate(currentDate.getDate() + ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'].indexOf(key));\n+                \n+                return (\n+                  <WeekDay key={key} $isWeekend={isWeekend} $isHoliday={daySettings.isHoliday}>\n+                    <DayLabel $isWeekend={isWeekend} $isHoliday={daySettings.isHoliday}>\n+                      {label}\n+                      <DayDate>\n+                        {currentDate.getMonth() + 1}/{currentDate.getDate()}\n+                      </DayDate>\n+                    </DayLabel>\n+                    <DayToggle>\n+                      <input\n+                        type=\"checkbox\"\n+                        checked={daySettings.isHoliday}\n+                        onChange={() => handleDayToggle(key)}\n+                      />\n+                      휴일\n+                    </DayToggle>\n+                    \n+                    {!daySettings.isHoliday && (\n+                      <WorkingHoursSection $isVisible={!daySettings.isHoliday}>\n+                        <WorkingHoursLabel>근무 시간</WorkingHoursLabel>\n+                        <WorkingHoursInputs>\n+                          <TimeInput\n+                            type=\"number\"\n+                            min=\"0\"\n+                            max=\"23\"\n+                            value={daySettings.workingHours.start}\n+                            onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleWorkingHoursChange(key, 'start', parseInt(e.target.value))}\n+                          />\n+                          <span>시 ~</span>\n+                          <TimeInput\n+                            type=\"number\"\n+                            min=\"0\"\n+                            max=\"23\"\n+                            value={daySettings.workingHours.end}\n+                            onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleWorkingHoursChange(key, 'end', parseInt(e.target.value))}\n+                          />\n+                          <span>시</span>\n+                        </WorkingHoursInputs>\n+                        \n+                        <BreakTimesSection>\n+                          <BreakTimesLabel>\n+                            휴게 시간\n+                            <AddBreakTimeButton onClick={() => handleAddBreakTime(key)}>\n+                              + 추가\n+                            </AddBreakTimeButton>\n+                          </BreakTimesLabel>\n+                          {daySettings.breakTimes && daySettings.breakTimes.map((breakTime, index) => (\n+                            <BreakTimeRow key={index}>\n+                              <BreakTimeInput\n+                                type=\"text\"\n+                                placeholder=\"휴게시간명\"\n+                                value={breakTime.name}\n+                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleBreakTimeChange(key, index, 'name', e.target.value)}\n+                              />\n+                              <TimeInput\n+                                type=\"number\"\n+                                min=\"0\"\n+                                max=\"23\"\n+                                value={breakTime.start}\n+                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleBreakTimeChange(key, index, 'start', parseInt(e.target.value))}\n+                              />\n+                              <span>시 ~</span>\n+                              <TimeInput\n+                                type=\"number\"\n+                                min=\"0\"\n+                                max=\"23\"\n+                                value={breakTime.end}\n+                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleBreakTimeChange(key, index, 'end', parseInt(e.target.value))}\n+                              />\n+                              <span>시</span>\n+                              <RemoveBreakTimeButton onClick={() => handleRemoveBreakTime(key, index)}>\n+                                삭제\n+                              </RemoveBreakTimeButton>\n+                            </BreakTimeRow>\n+                          ))}\n+                        </BreakTimesSection>\n+                      </WorkingHoursSection>\n+                    )}\n+                  </WeekDay>\n+                );\n+              })}\n             </WeekDaysContainer>\n           </WeekSection>\n         </ModalBody>\n \n"
                },
                {
                    "date": 1761453123488,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,11 +77,12 @@\n   }\n `;\n \n const ModalBody = styled.div`\n-  padding: 24px;\n+  padding: 20px;\n   overflow-y: auto;\n   flex: 1;\n+  max-height: 70vh;\n `;\n \n const ModalFooter = styled.div`\n   padding: 20px 24px;\n@@ -145,20 +146,28 @@\n   margin: 0;\n `;\n \n const WeekDaysContainer = styled.div`\n-  background-color: ${AppColors.background};\n-  border-radius: 8px;\n-  padding: 16px;\n+  display: grid;\n+  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\n+  gap: 12px;\n+  \n+  @media (max-width: 768px) {\n+    grid-template-columns: 1fr;\n+    gap: 10px;\n+  }\n `;\n \n const WeekDay = styled.div<{ $isWeekend: boolean; $isHoliday: boolean }>`\n-  padding: 16px;\n-  border-bottom: 1px solid ${AppColors.borderLight};\n   background-color: ${props => props.$isHoliday ? AppColors.error + '10' : AppColors.surface};\n+  border: 1px solid ${props => props.$isHoliday ? AppColors.error + '30' : AppColors.borderLight};\n+  border-radius: 8px;\n+  padding: 12px;\n+  transition: all 0.2s ease;\n   \n-  &:last-child {\n-    border-bottom: none;\n+  &:hover {\n+    border-color: ${props => props.$isHoliday ? AppColors.error + '50' : AppColors.primary + '30'};\n+    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n   }\n `;\n \n // Removed unused styled component DayHeader\n@@ -169,44 +178,47 @@\n   font-size: ${AppTextStyles.body1.fontSize};\n   font-weight: 600;\n   color: ${props => {\n     if (props.$isHoliday) return AppColors.error;\n-    if (props.$isWeekend) return AppColors.onSurface + '80';\n+    if (props.$isWeekend) return AppColors.primary;\n     return AppColors.onSurface;\n   }};\n-  min-width: 60px;\n+  margin-bottom: 8px;\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n `;\n \n-const DayDate = styled.div`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onSurface + '60'};\n-  min-width: 40px;\n-`;\n+// Removed duplicate DayDate - using the one defined later\n \n-const DayToggle = styled.label`\n+const DayToggle = styled.div`\n   display: flex;\n   align-items: center;\n-  cursor: pointer;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onSurface};\n+  gap: 8px;\n   \n   input[type=\"checkbox\"] {\n-    margin-right: 8px;\n+    width: 16px;\n+    height: 16px;\n+    accent-color: ${AppColors.error};\n   }\n+  \n+  label {\n+    font-size: ${AppTextStyles.body2.fontSize};\n+    color: ${AppColors.onSurface};\n+    cursor: pointer;\n+    font-weight: 500;\n+  }\n `;\n \n const WorkingHoursSection = styled.div<{ $isVisible: boolean }>`\n   display: ${props => props.$isVisible ? 'block' : 'none'};\n   margin-top: 12px;\n-  padding: 12px;\n-  background-color: ${AppColors.background};\n-  border-radius: 6px;\n `;\n \n // Removed unused styled component WorkingHoursRow\n \n const BreakTimesSection = styled.div`\n-  margin-top: 8px;\n+  margin-top: 12px;\n `;\n \n /* Unused for now - may be used in future iterations\n const BreakTimeItem = styled.div`\n@@ -244,28 +256,48 @@\n `;\n */\n \n const TimeInput = styled.input`\n-  width: 60px;\n-  padding: 4px 6px;\n+  width: 50px;\n+  padding: 6px 8px;\n   border: 1px solid #ddd;\n   border-radius: 4px;\n   text-align: center;\n   font-size: 0.9rem;\n+  font-weight: 500;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+    box-shadow: 0 0 0 2px ${AppColors.primary}20;\n+  }\n `;\n \n+// DayDate component removed - date now included in day label\n+\n const WorkingHoursLabel = styled.div`\n   font-size: 0.9rem;\n   font-weight: 600;\n   margin-bottom: 8px;\n   color: #333;\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  flex-wrap: wrap;\n+  gap: 12px;\n `;\n \n const WorkingHoursInputs = styled.div`\n   display: flex;\n   align-items: center;\n   gap: 8px;\n-  margin-bottom: 12px;\n+  flex-wrap: wrap;\n+  \n+  span {\n+    color: #666;\n+    font-size: 0.9rem;\n+    font-weight: 500;\n+  }\n `;\n \n const BreakTimesLabel = styled.div`\n   font-size: 0.9rem;\n@@ -280,13 +312,14 @@\n const BreakTimeRow = styled.div`\n   display: flex;\n   align-items: center;\n   gap: 8px;\n-  margin-bottom: 8px;\n+  margin-bottom: 6px;\n `;\n \n const BreakTimeInput = styled.input`\n   flex: 1;\n+  min-width: 80px;\n   padding: 6px 8px;\n   border: 1px solid #ddd;\n   border-radius: 4px;\n   font-size: 0.9rem;\n@@ -295,12 +328,13 @@\n const RemoveBreakTimeButton = styled.button`\n   background: #ffebee;\n   border: 1px solid #f44336;\n   color: #f44336;\n-  padding: 4px 8px;\n+  padding: 6px 10px;\n   border-radius: 4px;\n   font-size: 0.8rem;\n   cursor: pointer;\n+  min-width: 50px;\n   \n   &:hover {\n     background: #f44336;\n     color: white;\n@@ -310,56 +344,85 @@\n const AddBreakTimeButton = styled.button`\n   background: #e3f2fd;\n   border: 1px solid #2196f3;\n   color: #2196f3;\n-  padding: 4px 8px;\n+  padding: 6px 12px;\n   border-radius: 4px;\n   font-size: 0.8rem;\n   cursor: pointer;\n+  font-weight: 500;\n   \n   &:hover {\n     background: #2196f3;\n     color: white;\n   }\n `;\n \n const TimeSettingsSection = styled.div`\n-  margin-bottom: 24px;\n+  margin-bottom: 20px;\n+  background-color: ${AppColors.background};\n+  border-radius: 8px;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n `;\n \n const TimeSettingsTitle = styled.h4`\n   font-size: ${AppTextStyles.body1.fontSize};\n   font-weight: 600;\n   color: ${AppColors.onSurface};\n-  margin: 0 0 12px 0;\n+  margin: 0;\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  flex-wrap: wrap;\n+  gap: 12px;\n `;\n \n const TimeInputContainer = styled.div`\n   display: flex;\n   align-items: center;\n-  gap: 8px;\n-  margin-bottom: 8px;\n+  gap: 12px;\n   \n   label {\n-    font-size: ${AppTextStyles.body2.fontSize};\n+    font-size: 0.9rem;\n     color: ${AppColors.onSurface};\n-    min-width: 80px;\n+    font-weight: 500;\n+    min-width: 70px;\n   }\n   \n   input {\n     width: 60px;\n-    padding: 4px 8px;\n+    padding: 8px 10px;\n     border: 1px solid ${AppColors.borderLight};\n     border-radius: 4px;\n-    font-size: ${AppTextStyles.body2.fontSize};\n+    text-align: center;\n+    font-size: 0.9rem;\n+    font-weight: 500;\n+    \n+    &:focus {\n+      outline: none;\n+      border-color: ${AppColors.primary};\n+      box-shadow: 0 0 0 2px ${AppColors.primary}20;\n+    }\n   }\n   \n   span {\n-    font-size: ${AppTextStyles.body2.fontSize};\n-    color: ${AppColors.onSurface};\n+    color: ${AppColors.onSurface + '80'};\n+    font-size: 0.9rem;\n   }\n `;\n \n+const TimeInputRow = styled.div`\n+  display: flex;\n+  gap: 20px;\n+  flex-wrap: wrap;\n+  \n+  @media (max-width: 480px) {\n+    flex-direction: column;\n+    gap: 12px;\n+  }\n+`;\n+\n const Button = styled.button<{ $variant: 'primary' | 'secondary'; $disabled?: boolean }>`\n   padding: 10px 20px;\n   border-radius: 6px;\n   font-size: ${AppTextStyles.body2.fontSize};\n@@ -731,33 +794,37 @@\n               ))}\n             </StaffSelector>\n           )}\n \n-          {/* 근무시간 설정 */}\n+          {/* 기본 근무시간 설정 */}\n           <TimeSettingsSection>\n-            <TimeSettingsTitle>기본 근무시간</TimeSettingsTitle>\n-            <TimeInputContainer>\n-              <label>시작 시간:</label>\n-              <input\n-                type=\"number\"\n-                min=\"0\"\n-                max=\"23\"\n-                value={defaultStartTime}\n-                onChange={(e) => setDefaultStartTime(Number(e.target.value))}\n-              />\n-              <span>시</span>\n-            </TimeInputContainer>\n-            <TimeInputContainer>\n-              <label>종료 시간:</label>\n-              <input\n-                type=\"number\"\n-                min=\"1\"\n-                max=\"24\"\n-                value={defaultEndTime}\n-                onChange={(e) => setDefaultEndTime(Number(e.target.value))}\n-              />\n-              <span>시</span>\n-            </TimeInputContainer>\n+            <TimeSettingsTitle>\n+              기본 근무시간\n+              <TimeInputRow>\n+                <TimeInputContainer>\n+                  <label>시작:</label>\n+                  <input\n+                    type=\"number\"\n+                    min=\"0\"\n+                    max=\"23\"\n+                    value={defaultStartTime}\n+                    onChange={(e) => setDefaultStartTime(Number(e.target.value))}\n+                  />\n+                  <span>시</span>\n+                </TimeInputContainer>\n+                <TimeInputContainer>\n+                  <label>종료:</label>\n+                  <input\n+                    type=\"number\"\n+                    min=\"1\"\n+                    max=\"24\"\n+                    value={defaultEndTime}\n+                    onChange={(e) => setDefaultEndTime(Number(e.target.value))}\n+                  />\n+                  <span>시</span>\n+                </TimeInputContainer>\n+              </TimeInputRow>\n+            </TimeSettingsTitle>\n           </TimeSettingsSection>\n \n           {/* 주별 휴일설정 */}\n           <WeekSection>\n@@ -789,43 +856,42 @@\n                 \n                 return (\n                   <WeekDay key={key} $isWeekend={isWeekend} $isHoliday={daySettings.isHoliday}>\n                     <DayLabel $isWeekend={isWeekend} $isHoliday={daySettings.isHoliday}>\n-                      {label}\n-                      <DayDate>\n-                        {currentDate.getMonth() + 1}/{currentDate.getDate()}\n-                      </DayDate>\n+                      <span>{label} ({currentDate.getMonth() + 1}/{currentDate.getDate()})</span>\n+                      <DayToggle>\n+                        <input\n+                          type=\"checkbox\"\n+                          checked={daySettings.isHoliday}\n+                          onChange={() => handleDayToggle(key)}\n+                        />\n+                        <label>휴일</label>\n+                      </DayToggle>\n                     </DayLabel>\n-                    <DayToggle>\n-                      <input\n-                        type=\"checkbox\"\n-                        checked={daySettings.isHoliday}\n-                        onChange={() => handleDayToggle(key)}\n-                      />\n-                      휴일\n-                    </DayToggle>\n                     \n                     {!daySettings.isHoliday && (\n                       <WorkingHoursSection $isVisible={!daySettings.isHoliday}>\n-                        <WorkingHoursLabel>근무 시간</WorkingHoursLabel>\n-                        <WorkingHoursInputs>\n-                          <TimeInput\n-                            type=\"number\"\n-                            min=\"0\"\n-                            max=\"23\"\n-                            value={daySettings.workingHours.start}\n-                            onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleWorkingHoursChange(key, 'start', parseInt(e.target.value))}\n-                          />\n-                          <span>시 ~</span>\n-                          <TimeInput\n-                            type=\"number\"\n-                            min=\"0\"\n-                            max=\"23\"\n-                            value={daySettings.workingHours.end}\n-                            onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleWorkingHoursChange(key, 'end', parseInt(e.target.value))}\n-                          />\n-                          <span>시</span>\n-                        </WorkingHoursInputs>\n+                        <WorkingHoursLabel>\n+                          근무 시간\n+                          <WorkingHoursInputs>\n+                            <TimeInput\n+                              type=\"number\"\n+                              min=\"0\"\n+                              max=\"23\"\n+                              value={daySettings.workingHours.start}\n+                              onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleWorkingHoursChange(key, 'start', parseInt(e.target.value))}\n+                            />\n+                            <span>시 ~</span>\n+                            <TimeInput\n+                              type=\"number\"\n+                              min=\"0\"\n+                              max=\"23\"\n+                              value={daySettings.workingHours.end}\n+                              onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleWorkingHoursChange(key, 'end', parseInt(e.target.value))}\n+                            />\n+                            <span>시</span>\n+                          </WorkingHoursInputs>\n+                        </WorkingHoursLabel>\n                         \n                         <BreakTimesSection>\n                           <BreakTimesLabel>\n                             휴게 시간\n"
                },
                {
                    "date": 1761453261120,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -546,19 +546,25 @@\n   };\n \n   // 초기화\n   useEffect(() => {\n+    console.log('Initialization useEffect triggered, isOpen:', isOpen);\n+    \n     if (isOpen) {\n       // 현재 설정 가능한 주로 초기 설정\n       const settableWeek = getCurrentSettableWeekStartDate();\n+      console.log('Setting currentWeekStartDate to:', settableWeek);\n       setCurrentWeekStartDate(settableWeek);\n       \n       // 직원 선택 초기화\n       if (staffId) {\n+        console.log('Setting selectedStaffIds to single staff:', staffId);\n         setSelectedStaffIds([staffId]);\n       } else if (currentUser?.role === 'master') {\n+        console.log('Master user, setting empty staff selection');\n         setSelectedStaffIds([]);\n       } else if (currentUser?.id) {\n+        console.log('Setting selectedStaffIds to current user:', currentUser.id);\n         setSelectedStaffIds([currentUser.id]);\n       }\n \n       // 기본 근무시간 설정 (첫 번째 선택된 직원 기준)\n@@ -577,34 +583,41 @@\n   }, [isOpen, staffId, currentUser, staffList, selectedStaffIds]);\n \n   // 기존 설정 로드\n   useEffect(() => {\n-    if (isOpen && currentWeekStartDate && selectedStaffIds.length > 0) {\n-      const existingSetting = existingWeeklyHolidays.find(\n-        setting => setting.weekStartDate === currentWeekStartDate && \n-                  selectedStaffIds.includes(setting.staffId)\n-      );\n-      \n-      if (existingSetting) {\n-        // 기존 설정이 있다면 로드하되, 구조가 맞지 않으면 기본값 사용\n-        const normalizedWeekDays = Object.keys(weekDaySettings).reduce((acc, day) => {\n-          const dayKey = day as keyof typeof weekDaySettings;\n-          const existingDay = existingSetting.weekDays[dayKey];\n+    console.log('useEffect triggered:', { isOpen, currentWeekStartDate, selectedStaffIds: selectedStaffIds.length });\n+    \n+    if (isOpen && currentWeekStartDate) {\n+      if (selectedStaffIds.length > 0) {\n+        const existingSetting = existingWeeklyHolidays.find(\n+          setting => setting.weekStartDate === currentWeekStartDate && \n+                    selectedStaffIds.includes(setting.staffId)\n+        );\n+        \n+        if (existingSetting) {\n+          console.log('Found existing setting:', existingSetting);\n+          // 기존 설정이 있다면 로드하되, 구조가 맞지 않으면 기본값 사용\n+          const normalizedWeekDays = Object.keys(weekDaySettings).reduce((acc, day) => {\n+            const dayKey = day as keyof typeof weekDaySettings;\n+            const existingDay = existingSetting.weekDays[dayKey];\n+            \n+            acc[dayKey] = {\n+              isHoliday: existingDay?.isHoliday ?? false,\n+              workingHours: existingDay?.workingHours ?? { start: 9, end: 18 },\n+              breakTimes: (existingDay?.breakTimes ?? []).map(bt => ({\n+                start: bt.start,\n+                end: bt.end,\n+                name: bt.name || '휴게시간'\n+              }))\n+            };\n+            \n+            return acc;\n+          }, {} as typeof weekDaySettings);\n           \n-          acc[dayKey] = {\n-            isHoliday: existingDay?.isHoliday ?? false,\n-            workingHours: existingDay?.workingHours ?? { start: 9, end: 18 },\n-            breakTimes: (existingDay?.breakTimes ?? []).map(bt => ({\n-              start: bt.start,\n-              end: bt.end,\n-              name: bt.name || '휴게시간'\n-            }))\n-          };\n-          \n-          return acc;\n-        }, {} as typeof weekDaySettings);\n-        \n-        setWeekDaySettings(normalizedWeekDays);\n+          setWeekDaySettings(normalizedWeekDays);\n+        } else {\n+          console.log('No existing setting found, using default state');\n+        }\n       } else {\n         // 기본값으로 리셋 (주말만 휴일)\n         setWeekDaySettings({\n           monday: {\n@@ -656,15 +669,20 @@\n     );\n   };\n \n   const handleDayToggle = (day: keyof typeof weekDaySettings) => {\n-    setWeekDaySettings(prev => ({\n-      ...prev,\n-      [day]: {\n-        ...prev[day],\n-        isHoliday: !prev[day].isHoliday\n-      }\n-    }));\n+    console.log('handleDayToggle called:', day, 'current state:', weekDaySettings[day]);\n+    setWeekDaySettings(prev => {\n+      const newState = {\n+        ...prev,\n+        [day]: {\n+          ...prev[day],\n+          isHoliday: !prev[day].isHoliday\n+        }\n+      };\n+      console.log('new state for', day, ':', newState[day]);\n+      return newState;\n+    });\n   };\n \n   const handleWorkingHoursChange = (day: keyof typeof weekDaySettings, field: 'start' | 'end', value: number) => {\n     setWeekDaySettings(prev => ({\n@@ -860,12 +878,16 @@\n                       <span>{label} ({currentDate.getMonth() + 1}/{currentDate.getDate()})</span>\n                       <DayToggle>\n                         <input\n                           type=\"checkbox\"\n+                          id={`holiday-${key}`}\n                           checked={daySettings.isHoliday}\n-                          onChange={() => handleDayToggle(key)}\n+                          onChange={() => {\n+                            console.log('Checkbox clicked for:', key);\n+                            handleDayToggle(key);\n+                          }}\n                         />\n-                        <label>휴일</label>\n+                        <label htmlFor={`holiday-${key}`}>휴일</label>\n                       </DayToggle>\n                     </DayLabel>\n                     \n                     {!daySettings.isHoliday && (\n"
                },
                {
                    "date": 1761453739761,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -269,8 +269,20 @@\n     outline: none;\n     border-color: ${AppColors.primary};\n     box-shadow: 0 0 0 2px ${AppColors.primary}20;\n   }\n+  \n+  /* Hide number input spinners */\n+  &::-webkit-outer-spin-button,\n+  &::-webkit-inner-spin-button {\n+    -webkit-appearance: none;\n+    margin: 0;\n+  }\n+  \n+  &[type=number] {\n+    appearance: textfield;\n+    -moz-appearance: textfield;\n+  }\n `;\n \n // DayDate component removed - date now included in day label\n \n@@ -601,9 +613,9 @@\n             const existingDay = existingSetting.weekDays[dayKey];\n             \n             acc[dayKey] = {\n               isHoliday: existingDay?.isHoliday ?? false,\n-              workingHours: existingDay?.workingHours ?? { start: 9, end: 18 },\n+              workingHours: existingDay?.workingHours ?? { start: 10, end: 20 },\n               breakTimes: (existingDay?.breakTimes ?? []).map(bt => ({\n                 start: bt.start,\n                 end: bt.end,\n                 name: bt.name || '휴게시간'\n@@ -696,8 +708,43 @@\n       }\n     }));\n   };\n \n+  // 시간 입력 처리 함수 추가\n+  const handleTimeInputChange = (\n+    value: string, \n+    onChange: (value: number) => void\n+  ) => {\n+    // 숫자만 허용\n+    const numericValue = value.replace(/[^0-9]/g, '');\n+    \n+    if (numericValue === '') {\n+      onChange(1); // 빈 값일 때 최소값으로 설정\n+      return;\n+    }\n+    \n+    const num = parseInt(numericValue, 10);\n+    \n+    // 1-24 범위로 제한\n+    if (num >= 1 && num <= 24) {\n+      onChange(num);\n+    } else if (num > 24) {\n+      onChange(24);\n+    } else if (num < 1) {\n+      onChange(1);\n+    }\n+  };\n+\n+  const handleDefaultTimeChange = (field: 'start' | 'end', value: string) => {\n+    handleTimeInputChange(value, (num) => {\n+      if (field === 'start') {\n+        setDefaultStartTime(num);\n+      } else {\n+        setDefaultEndTime(num);\n+      }\n+    });\n+  };\n+\n   const handleAddBreakTime = (day: keyof typeof weekDaySettings) => {\n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n@@ -820,24 +867,38 @@\n               <TimeInputRow>\n                 <TimeInputContainer>\n                   <label>시작:</label>\n                   <input\n-                    type=\"number\"\n-                    min=\"0\"\n-                    max=\"23\"\n+                    type=\"text\"\n                     value={defaultStartTime}\n-                    onChange={(e) => setDefaultStartTime(Number(e.target.value))}\n+                    onChange={(e) => handleDefaultTimeChange('start', e.target.value)}\n+                    style={{\n+                      width: '60px',\n+                      padding: '8px 10px',\n+                      border: `1px solid ${AppColors.borderLight}`,\n+                      borderRadius: '4px',\n+                      textAlign: 'center',\n+                      fontSize: '0.9rem',\n+                      fontWeight: '500'\n+                    }}\n                   />\n                   <span>시</span>\n                 </TimeInputContainer>\n                 <TimeInputContainer>\n                   <label>종료:</label>\n                   <input\n-                    type=\"number\"\n-                    min=\"1\"\n-                    max=\"24\"\n+                    type=\"text\"\n                     value={defaultEndTime}\n-                    onChange={(e) => setDefaultEndTime(Number(e.target.value))}\n+                    onChange={(e) => handleDefaultTimeChange('end', e.target.value)}\n+                    style={{\n+                      width: '60px',\n+                      padding: '8px 10px',\n+                      border: `1px solid ${AppColors.borderLight}`,\n+                      borderRadius: '4px',\n+                      textAlign: 'center',\n+                      fontSize: '0.9rem',\n+                      fontWeight: '500'\n+                    }}\n                   />\n                   <span>시</span>\n                 </TimeInputContainer>\n               </TimeInputRow>\n@@ -895,21 +956,25 @@\n                         <WorkingHoursLabel>\n                           근무 시간\n                           <WorkingHoursInputs>\n                             <TimeInput\n-                              type=\"number\"\n-                              min=\"0\"\n-                              max=\"23\"\n+                              type=\"text\"\n                               value={daySettings.workingHours.start}\n-                              onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleWorkingHoursChange(key, 'start', parseInt(e.target.value))}\n+                              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n+                                handleTimeInputChange(e.target.value, (num) => {\n+                                  handleWorkingHoursChange(key, 'start', num);\n+                                });\n+                              }}\n                             />\n                             <span>시 ~</span>\n                             <TimeInput\n-                              type=\"number\"\n-                              min=\"0\"\n-                              max=\"23\"\n+                              type=\"text\"\n                               value={daySettings.workingHours.end}\n-                              onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleWorkingHoursChange(key, 'end', parseInt(e.target.value))}\n+                              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n+                                handleTimeInputChange(e.target.value, (num) => {\n+                                  handleWorkingHoursChange(key, 'end', num);\n+                                });\n+                              }}\n                             />\n                             <span>시</span>\n                           </WorkingHoursInputs>\n                         </WorkingHoursLabel>\n@@ -929,21 +994,25 @@\n                                 value={breakTime.name}\n                                 onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleBreakTimeChange(key, index, 'name', e.target.value)}\n                               />\n                               <TimeInput\n-                                type=\"number\"\n-                                min=\"0\"\n-                                max=\"23\"\n+                                type=\"text\"\n                                 value={breakTime.start}\n-                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleBreakTimeChange(key, index, 'start', parseInt(e.target.value))}\n+                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n+                                  handleTimeInputChange(e.target.value, (num) => {\n+                                    handleBreakTimeChange(key, index, 'start', num);\n+                                  });\n+                                }}\n                               />\n                               <span>시 ~</span>\n                               <TimeInput\n-                                type=\"number\"\n-                                min=\"0\"\n-                                max=\"23\"\n+                                type=\"text\"\n                                 value={breakTime.end}\n-                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleBreakTimeChange(key, index, 'end', parseInt(e.target.value))}\n+                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n+                                  handleTimeInputChange(e.target.value, (num) => {\n+                                    handleBreakTimeChange(key, index, 'end', num);\n+                                  });\n+                                }}\n                               />\n                               <span>시</span>\n                               <RemoveBreakTimeButton onClick={() => handleRemoveBreakTime(key, index)}>\n                                 삭제\n"
                },
                {
                    "date": 1761453885117,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -482,44 +482,44 @@\n     sunday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n   }>({\n     monday: {\n       isHoliday: false,\n-      workingHours: { start: 10, end: 20 },\n+      workingHours: { start: 9, end: 21 },\n       breakTimes: []\n     },\n     tuesday: {\n       isHoliday: false,\n-      workingHours: { start: 10, end: 20 },\n+      workingHours: { start: 9, end: 21 },\n       breakTimes: []\n     },\n     wednesday: {\n       isHoliday: false,\n-      workingHours: { start: 10, end: 20 },\n+      workingHours: { start: 9, end: 21 },\n       breakTimes: []\n     },\n     thursday: {\n       isHoliday: false,\n-      workingHours: { start: 10, end: 20 },\n+      workingHours: { start: 9, end: 21 },\n       breakTimes: []\n     },\n     friday: {\n       isHoliday: false,\n-      workingHours: { start: 10, end: 20 },\n+      workingHours: { start: 9, end: 21 },\n       breakTimes: []\n     },\n     saturday: {\n       isHoliday: true,  // 기본값: 주말 휴일\n-      workingHours: { start: 10, end: 20 },\n+      workingHours: { start: 9, end: 21 },\n       breakTimes: []\n     },\n     sunday: {\n       isHoliday: true,  // 기본값: 주말 휴일\n-      workingHours: { start: 10, end: 20 },\n+      workingHours: { start: 9, end: 21 },\n       breakTimes: []\n     }\n   });\n-  const [defaultStartTime, setDefaultStartTime] = useState(10);\n-  const [defaultEndTime, setDefaultEndTime] = useState(20);\n+  const [defaultStartTime, setDefaultStartTime] = useState(9);\n+  const [defaultEndTime, setDefaultEndTime] = useState(21);\n   const [isLoading, setIsLoading] = useState(false);\n   const [error, setError] = useState<string | null>(null);\n \n   // 현재 설정 가능한 주의 월요일 날짜 계산\n@@ -613,9 +613,9 @@\n             const existingDay = existingSetting.weekDays[dayKey];\n             \n             acc[dayKey] = {\n               isHoliday: existingDay?.isHoliday ?? false,\n-              workingHours: existingDay?.workingHours ?? { start: 10, end: 20 },\n+              workingHours: existingDay?.workingHours ?? { start: 9, end: 21 },\n               breakTimes: (existingDay?.breakTimes ?? []).map(bt => ({\n                 start: bt.start,\n                 end: bt.end,\n                 name: bt.name || '휴게시간'\n"
                },
                {
                    "date": 1761454363995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -917,9 +917,9 @@\n               {(() => {\n                 const today = new Date();\n                 const dayOfWeek = today.getDay();\n                 if (dayOfWeek >= 0 && dayOfWeek <= 5) {\n-                  return '금요일 끝나기 전까지 다음주 휴일과 근무시간을 설정할 수 있습니다.';\n+                  return '금요일 오후 6시 전까지 다음주 휴일과 근무시간을 설정할 수 있습니다.';\n                 } else {\n                   return '토요일이므로 그 다음주 휴일과 근무시간을 설정할 수 있습니다.';\n                 }\n               })()}\n"
                },
                {
                    "date": 1762071682696,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -522,27 +522,24 @@\n   const [isLoading, setIsLoading] = useState(false);\n   const [error, setError] = useState<string | null>(null);\n \n   // 현재 설정 가능한 주의 월요일 날짜 계산\n+  // 휴일설정은 이번주 토요일부터 다음주 금요일까지에 대한 결정\n   const getCurrentSettableWeekStartDate = (): string => {\n     const today = new Date();\n     const dayOfWeek = today.getDay(); // 0: 일요일, 1: 월요일, ..., 5: 금요일, 6: 토요일\n     \n-    let targetWeek: Date;\n+    // 이번주 토요일 날짜 계산\n+    const thisWeekSaturday = new Date(today);\n+    const daysUntilSaturday = 6 - dayOfWeek; // 토요일까지 남은 일수\n+    thisWeekSaturday.setDate(today.getDate() + daysUntilSaturday);\n     \n-    if (dayOfWeek >= 0 && dayOfWeek <= 5) {\n-      // 일요일부터 금요일까지: 다음주 설정 가능\n-      targetWeek = new Date(today);\n-      const daysUntilNextMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;\n-      targetWeek.setDate(today.getDate() + daysUntilNextMonday);\n-    } else {\n-      // 토요일(6): 그 다음주 설정 가능 (다다음주)\n-      targetWeek = new Date(today);\n-      const daysUntilNextNextMonday = 2; // 토요일 기준으로 2일 후가 다다음주 월요일\n-      targetWeek.setDate(today.getDate() + daysUntilNextNextMonday);\n-    }\n+    // 이번주 토요일부터 다음주 금요일까지의 기간에서 시작하는 월요일 계산\n+    // 즉, 이번주 토요일이 속한 주의 다음주 월요일\n+    const targetMonday = new Date(thisWeekSaturday);\n+    targetMonday.setDate(thisWeekSaturday.getDate() + 2); // 토요일 + 2일 = 다음주 월요일\n     \n-    return targetWeek.toISOString().split('T')[0];\n+    return targetMonday.toISOString().split('T')[0];\n   };\n   \n   // 주 날짜 범위 표시\n   const getWeekDateRange = (): string => {\n@@ -913,17 +910,9 @@\n               </WeekTitle>\n             </WeekHeader>\n             \n             <div style={{ fontSize: '14px', marginBottom: '12px', color: AppColors.onSurface + '80' }}>\n-              {(() => {\n-                const today = new Date();\n-                const dayOfWeek = today.getDay();\n-                if (dayOfWeek >= 0 && dayOfWeek <= 5) {\n-                  return '금요일 오후 6시 전까지 다음주 휴일과 근무시간을 설정할 수 있습니다.';\n-                } else {\n-                  return '토요일이므로 그 다음주 휴일과 근무시간을 설정할 수 있습니다.';\n-                }\n-              })()}\n+              휴일설정은 이번주 토요일부터 다음주 금요일까지에 대한 결정입니다.\n               <br />\n               체크하면 휴일, 체크 해제하면 근무일입니다.\n             </div>\n             \n"
                },
                {
                    "date": 1762072020960,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -527,17 +527,16 @@\n   const getCurrentSettableWeekStartDate = (): string => {\n     const today = new Date();\n     const dayOfWeek = today.getDay(); // 0: 일요일, 1: 월요일, ..., 5: 금요일, 6: 토요일\n     \n-    // 이번주 토요일 날짜 계산\n-    const thisWeekSaturday = new Date(today);\n-    const daysUntilSaturday = 6 - dayOfWeek; // 토요일까지 남은 일수\n+    // 이번주 토요일 계산\n+    let thisWeekSaturday = new Date(today);\n+    const daysUntilSaturday = 6 - dayOfWeek; // 토요일까지 남은 일수 (토요일이면 0)\n     thisWeekSaturday.setDate(today.getDate() + daysUntilSaturday);\n     \n-    // 이번주 토요일부터 다음주 금요일까지의 기간에서 시작하는 월요일 계산\n-    // 즉, 이번주 토요일이 속한 주의 다음주 월요일\n+    // 토요일부터 시작하는 주의 월요일 계산 (토요일 + 2일)\n     const targetMonday = new Date(thisWeekSaturday);\n-    targetMonday.setDate(thisWeekSaturday.getDate() + 2); // 토요일 + 2일 = 다음주 월요일\n+    targetMonday.setDate(thisWeekSaturday.getDate() + 2); // 토요일 + 2일 = 월요일\n     \n     return targetMonday.toISOString().split('T')[0];\n   };\n   \n@@ -910,9 +909,9 @@\n               </WeekTitle>\n             </WeekHeader>\n             \n             <div style={{ fontSize: '14px', marginBottom: '12px', color: AppColors.onSurface + '80' }}>\n-              휴일설정은 이번주 토요일부터 다음주 금요일까지에 대한 결정입니다.\n+              휴일설정은 다음 토요일부터 그 다음주 금요일까지에 대한 결정입니다.\n               <br />\n               체크하면 휴일, 체크 해제하면 근무일입니다.\n             </div>\n             \n"
                },
                {
                    "date": 1762072200408,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -539,19 +539,25 @@\n     \n     return targetMonday.toISOString().split('T')[0];\n   };\n   \n-  // 주 날짜 범위 표시\n+  // 주 날짜 범위 표시 (토요일부터 금요일까지)\n   const getWeekDateRange = (): string => {\n-    const startDate = new Date(currentWeekStartDate + 'T00:00:00');\n-    const endDate = new Date(startDate);\n-    endDate.setDate(startDate.getDate() + 6);\n+    const mondayDate = new Date(currentWeekStartDate + 'T00:00:00');\n     \n+    // 월요일에서 토요일로 이동 (월요일 - 2일 = 토요일)\n+    const saturdayDate = new Date(mondayDate);\n+    saturdayDate.setDate(mondayDate.getDate() - 2);\n+    \n+    // 토요일에서 금요일로 이동 (토요일 + 6일 = 금요일)\n+    const fridayDate = new Date(saturdayDate);\n+    fridayDate.setDate(saturdayDate.getDate() + 6);\n+    \n     const formatDate = (date: Date) => {\n       return `${date.getMonth() + 1}/${date.getDate()}`;\n     };\n     \n-    return `${formatDate(startDate)} - ${formatDate(endDate)}`;\n+    return `${formatDate(saturdayDate)} - ${formatDate(fridayDate)}`;\n   };\n \n   // 초기화\n   useEffect(() => {\n@@ -917,11 +923,20 @@\n             \n             <WeekDaysContainer>\n               {dayLabels.map(({ key, label, isWeekend }) => {\n                 const daySettings = weekDaySettings[key];\n-                const currentDate = new Date(currentWeekStartDate);\n-                currentDate.setDate(currentDate.getDate() + ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'].indexOf(key));\n                 \n+                // 토요일부터 시작하는 주간에서 각 요일의 날짜 계산\n+                const mondayDate = new Date(currentWeekStartDate);\n+                const saturdayDate = new Date(mondayDate);\n+                saturdayDate.setDate(mondayDate.getDate() - 2); // 월요일 - 2일 = 토요일\n+                \n+                // 토요일부터의 요일 순서로 계산\n+                const dayOrder = ['saturday', 'sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday'];\n+                const dayIndex = dayOrder.indexOf(key);\n+                const currentDate = new Date(saturdayDate);\n+                currentDate.setDate(saturdayDate.getDate() + dayIndex);\n+                \n                 return (\n                   <WeekDay key={key} $isWeekend={isWeekend} $isHoliday={daySettings.isHoliday}>\n                     <DayLabel $isWeekend={isWeekend} $isHoliday={daySettings.isHoliday}>\n                       <span>{label} ({currentDate.getMonth() + 1}/{currentDate.getDate()})</span>\n"
                },
                {
                    "date": 1762072293365,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -818,15 +818,15 @@\n \n   if (!isOpen) return null;\n \n   const dayLabels = [\n+    { key: 'saturday' as const, label: '토요일', isWeekend: true },\n+    { key: 'sunday' as const, label: '일요일', isWeekend: true },\n     { key: 'monday' as const, label: '월요일', isWeekend: false },\n     { key: 'tuesday' as const, label: '화요일', isWeekend: false },\n     { key: 'wednesday' as const, label: '수요일', isWeekend: false },\n     { key: 'thursday' as const, label: '목요일', isWeekend: false },\n-    { key: 'friday' as const, label: '금요일', isWeekend: false },\n-    { key: 'saturday' as const, label: '토요일', isWeekend: true },\n-    { key: 'sunday' as const, label: '일요일', isWeekend: true }\n+    { key: 'friday' as const, label: '금요일', isWeekend: false }\n   ];\n \n   return (\n     <ModalOverlay onClick={onClose}>\n"
                },
                {
                    "date": 1762072691780,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -256,9 +256,9 @@\n `;\n */\n \n const TimeInput = styled.input`\n-  width: 50px;\n+  width: 80px;\n   padding: 6px 8px;\n   border: 1px solid #ddd;\n   border-radius: 4px;\n   text-align: center;\n@@ -368,73 +368,27 @@\n     color: white;\n   }\n `;\n \n-const TimeSettingsSection = styled.div`\n-  margin-bottom: 20px;\n-  background-color: ${AppColors.background};\n-  border-radius: 8px;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-`;\n-\n-const TimeSettingsTitle = styled.h4`\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onSurface};\n-  margin: 0;\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-  flex-wrap: wrap;\n-  gap: 12px;\n-`;\n-\n-const TimeInputContainer = styled.div`\n-  display: flex;\n-  align-items: center;\n-  gap: 12px;\n+const ApplyToAllButton = styled.button`\n+  background: #f3e5f5;\n+  border: 1px solid #9c27b0;\n+  color: #9c27b0;\n+  padding: 4px 8px;\n+  border-radius: 4px;\n+  font-size: 0.7rem;\n+  cursor: pointer;\n+  font-weight: 500;\n+  margin-left: 8px;\n   \n-  label {\n-    font-size: 0.9rem;\n-    color: ${AppColors.onSurface};\n-    font-weight: 500;\n-    min-width: 70px;\n+  &:hover {\n+    background: #9c27b0;\n+    color: white;\n   }\n-  \n-  input {\n-    width: 60px;\n-    padding: 8px 10px;\n-    border: 1px solid ${AppColors.borderLight};\n-    border-radius: 4px;\n-    text-align: center;\n-    font-size: 0.9rem;\n-    font-weight: 500;\n-    \n-    &:focus {\n-      outline: none;\n-      border-color: ${AppColors.primary};\n-      box-shadow: 0 0 0 2px ${AppColors.primary}20;\n-    }\n-  }\n-  \n-  span {\n-    color: ${AppColors.onSurface + '80'};\n-    font-size: 0.9rem;\n-  }\n `;\n \n-const TimeInputRow = styled.div`\n-  display: flex;\n-  gap: 20px;\n-  flex-wrap: wrap;\n-  \n-  @media (max-width: 480px) {\n-    flex-direction: column;\n-    gap: 12px;\n-  }\n-`;\n \n+\n const Button = styled.button<{ $variant: 'primary' | 'secondary'; $disabled?: boolean }>`\n   padding: 10px 20px;\n   border-radius: 6px;\n   font-size: ${AppTextStyles.body2.fontSize};\n@@ -469,8 +423,33 @@\n   currentUser,\n   onSave,\n   existingWeeklyHolidays = []\n }) => {\n+  // 분을 시간 문자열로 변환하는 함수 (예: 570 -> \"09:30\")\n+  const minutesToTimeString = (minutes: number): string => {\n+    const hours = Math.floor(minutes / 60);\n+    const mins = minutes % 60;\n+    return `${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}`;\n+  };\n+\n+  // 시간 입력 검증 및 변환\n+  const validateAndConvertTime = (timeStr: string): number => {\n+    // 기본 형식 검증\n+    const timeRegex = /^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/;\n+    if (!timeRegex.test(timeStr)) {\n+      return 540; // 기본값 09:00\n+    }\n+    \n+    const [hours, minutes] = timeStr.split(':').map(Number);\n+    \n+    // 30분 단위 검증\n+    if (minutes !== 0 && minutes !== 30) {\n+      const adjustedMinutes = minutes < 15 ? 0 : 30;\n+      return hours * 60 + adjustedMinutes;\n+    }\n+    \n+    return hours * 60 + minutes;\n+  };\n   const [selectedStaffIds, setSelectedStaffIds] = useState<string[]>([]);\n   const [currentWeekStartDate, setCurrentWeekStartDate] = useState('');\n   const [weekDaySettings, setWeekDaySettings] = useState<{\n     monday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n@@ -482,44 +461,42 @@\n     sunday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n   }>({\n     monday: {\n       isHoliday: false,\n-      workingHours: { start: 9, end: 21 },\n+      workingHours: { start: 540, end: 1260 }, // 09:00 ~ 21:00 (분 단위)\n       breakTimes: []\n     },\n     tuesday: {\n       isHoliday: false,\n-      workingHours: { start: 9, end: 21 },\n+      workingHours: { start: 540, end: 1260 },\n       breakTimes: []\n     },\n     wednesday: {\n       isHoliday: false,\n-      workingHours: { start: 9, end: 21 },\n+      workingHours: { start: 540, end: 1260 },\n       breakTimes: []\n     },\n     thursday: {\n       isHoliday: false,\n-      workingHours: { start: 9, end: 21 },\n+      workingHours: { start: 540, end: 1260 },\n       breakTimes: []\n     },\n     friday: {\n       isHoliday: false,\n-      workingHours: { start: 9, end: 21 },\n+      workingHours: { start: 540, end: 1260 },\n       breakTimes: []\n     },\n     saturday: {\n       isHoliday: true,  // 기본값: 주말 휴일\n-      workingHours: { start: 9, end: 21 },\n+      workingHours: { start: 540, end: 1260 },\n       breakTimes: []\n     },\n     sunday: {\n       isHoliday: true,  // 기본값: 주말 휴일\n-      workingHours: { start: 9, end: 21 },\n+      workingHours: { start: 540, end: 1260 },\n       breakTimes: []\n     }\n   });\n-  const [defaultStartTime, setDefaultStartTime] = useState(9);\n-  const [defaultEndTime, setDefaultEndTime] = useState(21);\n   const [isLoading, setIsLoading] = useState(false);\n   const [error, setError] = useState<string | null>(null);\n \n   // 현재 설정 가능한 주의 월요일 날짜 계산\n@@ -580,18 +557,8 @@\n         console.log('Setting selectedStaffIds to current user:', currentUser.id);\n         setSelectedStaffIds([currentUser.id]);\n       }\n \n-      // 기본 근무시간 설정 (첫 번째 선택된 직원 기준)\n-      const firstStaffId = staffId || selectedStaffIds[0];\n-      if (firstStaffId) {\n-        const staff = staffList.find(s => s.id === firstStaffId);\n-        if (staff?.workingHours) {\n-          setDefaultStartTime(staff.workingHours.start);\n-          setDefaultEndTime(staff.workingHours.end);\n-        }\n-      }\n-\n       setError(null);\n       setIsLoading(false);\n     }\n   }, [isOpen, staffId, currentUser, staffList, selectedStaffIds]);\n@@ -615,9 +582,9 @@\n             const existingDay = existingSetting.weekDays[dayKey];\n             \n             acc[dayKey] = {\n               isHoliday: existingDay?.isHoliday ?? false,\n-              workingHours: existingDay?.workingHours ?? { start: 9, end: 21 },\n+              workingHours: existingDay?.workingHours ?? { start: 540, end: 1260 }, // 기본값: 09:00 ~ 21:00\n               breakTimes: (existingDay?.breakTimes ?? []).map(bt => ({\n                 start: bt.start,\n                 end: bt.end,\n                 name: bt.name || '휴게시간'\n@@ -635,46 +602,46 @@\n         // 기본값으로 리셋 (주말만 휴일)\n         setWeekDaySettings({\n           monday: {\n             isHoliday: false,\n-            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            workingHours: { start: 540, end: 1260 }, // 09:00 ~ 21:00\n             breakTimes: []\n           },\n           tuesday: {\n             isHoliday: false,\n-            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            workingHours: { start: 540, end: 1260 },\n             breakTimes: []\n           },\n           wednesday: {\n             isHoliday: false,\n-            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            workingHours: { start: 540, end: 1260 },\n             breakTimes: []\n           },\n           thursday: {\n             isHoliday: false,\n-            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            workingHours: { start: 540, end: 1260 },\n             breakTimes: []\n           },\n           friday: {\n             isHoliday: false,\n-            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            workingHours: { start: 540, end: 1260 },\n             breakTimes: []\n           },\n           saturday: {\n             isHoliday: true,\n-            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            workingHours: { start: 540, end: 1260 },\n             breakTimes: []\n           },\n           sunday: {\n             isHoliday: true,\n-            workingHours: { start: defaultStartTime, end: defaultEndTime },\n+            workingHours: { start: 540, end: 1260 },\n             breakTimes: []\n           }\n         });\n       }\n     }\n   // eslint-disable-next-line react-hooks/exhaustive-deps\n-  }, [isOpen, currentWeekStartDate, selectedStaffIds, existingWeeklyHolidays, defaultStartTime, defaultEndTime]);\n+  }, [isOpen, currentWeekStartDate, selectedStaffIds, existingWeeklyHolidays]);\n \n   const handleStaffToggle = (staffId: string) => {\n     setSelectedStaffIds(prev => \n       prev.includes(staffId)\n@@ -697,64 +664,34 @@\n       return newState;\n     });\n   };\n \n-  const handleWorkingHoursChange = (day: keyof typeof weekDaySettings, field: 'start' | 'end', value: number) => {\n+  const handleWorkingHoursChange = (day: keyof typeof weekDaySettings, field: 'start' | 'end', timeStr: string) => {\n+    const minutes = validateAndConvertTime(timeStr);\n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n         ...prev[day],\n         workingHours: {\n           ...prev[day].workingHours,\n-          [field]: value\n+          [field]: minutes\n         }\n       }\n     }));\n   };\n \n-  // 시간 입력 처리 함수 추가\n-  const handleTimeInputChange = (\n-    value: string, \n-    onChange: (value: number) => void\n-  ) => {\n-    // 숫자만 허용\n-    const numericValue = value.replace(/[^0-9]/g, '');\n-    \n-    if (numericValue === '') {\n-      onChange(1); // 빈 값일 때 최소값으로 설정\n-      return;\n-    }\n-    \n-    const num = parseInt(numericValue, 10);\n-    \n-    // 1-24 범위로 제한\n-    if (num >= 1 && num <= 24) {\n-      onChange(num);\n-    } else if (num > 24) {\n-      onChange(24);\n-    } else if (num < 1) {\n-      onChange(1);\n-    }\n-  };\n \n-  const handleDefaultTimeChange = (field: 'start' | 'end', value: string) => {\n-    handleTimeInputChange(value, (num) => {\n-      if (field === 'start') {\n-        setDefaultStartTime(num);\n-      } else {\n-        setDefaultEndTime(num);\n-      }\n-    });\n-  };\n \n+\n+\n   const handleAddBreakTime = (day: keyof typeof weekDaySettings) => {\n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n         ...prev[day],\n         breakTimes: [\n           ...prev[day].breakTimes,\n-          { start: 12, end: 13, name: '점심시간' }\n+          { start: 720, end: 780, name: '점심시간' } // 12:00 ~ 13:00\n         ]\n       }\n     }));\n   };\n@@ -768,15 +705,46 @@\n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n         ...prev[day],\n-        breakTimes: prev[day].breakTimes.map((breakTime, i) => \n-          i === index ? { ...breakTime, [field]: value } : breakTime\n-        )\n+        breakTimes: prev[day].breakTimes.map((breakTime, i) => {\n+          if (i === index) {\n+            if (field === 'start' || field === 'end') {\n+              // 시간 필드인 경우 분 단위로 변환\n+              const timeValue = typeof value === 'string' ? validateAndConvertTime(value) : value;\n+              return { ...breakTime, [field]: timeValue };\n+            } else {\n+              // 이름 필드인 경우 그대로\n+              return { ...breakTime, [field]: value };\n+            }\n+          }\n+          return breakTime;\n+        })\n       }\n     }));\n   };\n \n+  const handleApplyToAll = (sourceDay: keyof typeof weekDaySettings) => {\n+    const sourceSettings = weekDaySettings[sourceDay];\n+    const allDayKeys: (keyof typeof weekDaySettings)[] = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n+    \n+    setWeekDaySettings(prev => {\n+      const newSettings = { ...prev };\n+      \n+      allDayKeys.forEach(dayKey => {\n+        if (dayKey !== sourceDay) {\n+          newSettings[dayKey] = {\n+            ...newSettings[dayKey],\n+            workingHours: { ...sourceSettings.workingHours },\n+            breakTimes: sourceSettings.breakTimes.map(bt => ({ ...bt }))\n+          };\n+        }\n+      });\n+      \n+      return newSettings;\n+    });\n+  };\n+\n   const handleRemoveBreakTime = (day: keyof typeof weekDaySettings, index: number) => {\n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n@@ -861,53 +829,10 @@\n               ))}\n             </StaffSelector>\n           )}\n \n-          {/* 기본 근무시간 설정 */}\n-          <TimeSettingsSection>\n-            <TimeSettingsTitle>\n-              기본 근무시간\n-              <TimeInputRow>\n-                <TimeInputContainer>\n-                  <label>시작:</label>\n-                  <input\n-                    type=\"text\"\n-                    value={defaultStartTime}\n-                    onChange={(e) => handleDefaultTimeChange('start', e.target.value)}\n-                    style={{\n-                      width: '60px',\n-                      padding: '8px 10px',\n-                      border: `1px solid ${AppColors.borderLight}`,\n-                      borderRadius: '4px',\n-                      textAlign: 'center',\n-                      fontSize: '0.9rem',\n-                      fontWeight: '500'\n-                    }}\n-                  />\n-                  <span>시</span>\n-                </TimeInputContainer>\n-                <TimeInputContainer>\n-                  <label>종료:</label>\n-                  <input\n-                    type=\"text\"\n-                    value={defaultEndTime}\n-                    onChange={(e) => handleDefaultTimeChange('end', e.target.value)}\n-                    style={{\n-                      width: '60px',\n-                      padding: '8px 10px',\n-                      border: `1px solid ${AppColors.borderLight}`,\n-                      borderRadius: '4px',\n-                      textAlign: 'center',\n-                      fontSize: '0.9rem',\n-                      fontWeight: '500'\n-                    }}\n-                  />\n-                  <span>시</span>\n-                </TimeInputContainer>\n-              </TimeInputRow>\n-            </TimeSettingsTitle>\n-          </TimeSettingsSection>\n \n+\n           {/* 주별 휴일설정 */}\n           <WeekSection>\n             <WeekHeader>\n               <WeekTitle>\n@@ -957,30 +882,30 @@\n                     {!daySettings.isHoliday && (\n                       <WorkingHoursSection $isVisible={!daySettings.isHoliday}>\n                         <WorkingHoursLabel>\n                           근무 시간\n-                          <WorkingHoursInputs>\n-                            <TimeInput\n-                              type=\"text\"\n-                              value={daySettings.workingHours.start}\n-                              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n-                                handleTimeInputChange(e.target.value, (num) => {\n-                                  handleWorkingHoursChange(key, 'start', num);\n-                                });\n-                              }}\n-                            />\n-                            <span>시 ~</span>\n-                            <TimeInput\n-                              type=\"text\"\n-                              value={daySettings.workingHours.end}\n-                              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n-                                handleTimeInputChange(e.target.value, (num) => {\n-                                  handleWorkingHoursChange(key, 'end', num);\n-                                });\n-                              }}\n-                            />\n-                            <span>시</span>\n-                          </WorkingHoursInputs>\n+                          <div style={{ display: 'flex', alignItems: 'center' }}>\n+                            <WorkingHoursInputs>\n+                              <TimeInput\n+                                type=\"text\"\n+                                value={minutesToTimeString(daySettings.workingHours.start)}\n+                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n+                                  handleWorkingHoursChange(key, 'start', e.target.value);\n+                                }}\n+                              />\n+                              <span>~</span>\n+                              <TimeInput\n+                                type=\"text\"\n+                                value={minutesToTimeString(daySettings.workingHours.end)}\n+                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n+                                  handleWorkingHoursChange(key, 'end', e.target.value);\n+                                }}\n+                              />\n+                            </WorkingHoursInputs>\n+                            <ApplyToAllButton onClick={() => handleApplyToAll(key)}>\n+                              모두적용\n+                            </ApplyToAllButton>\n+                          </div>\n                         </WorkingHoursLabel>\n                         \n                         <BreakTimesSection>\n                           <BreakTimesLabel>\n@@ -998,26 +923,21 @@\n                                 onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleBreakTimeChange(key, index, 'name', e.target.value)}\n                               />\n                               <TimeInput\n                                 type=\"text\"\n-                                value={breakTime.start}\n+                                value={minutesToTimeString(breakTime.start)}\n                                 onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n-                                  handleTimeInputChange(e.target.value, (num) => {\n-                                    handleBreakTimeChange(key, index, 'start', num);\n-                                  });\n+                                  handleBreakTimeChange(key, index, 'start', e.target.value);\n                                 }}\n                               />\n-                              <span>시 ~</span>\n+                              <span>~</span>\n                               <TimeInput\n                                 type=\"text\"\n-                                value={breakTime.end}\n+                                value={minutesToTimeString(breakTime.end)}\n                                 onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n-                                  handleTimeInputChange(e.target.value, (num) => {\n-                                    handleBreakTimeChange(key, index, 'end', num);\n-                                  });\n+                                  handleBreakTimeChange(key, index, 'end', e.target.value);\n                                 }}\n                               />\n-                              <span>시</span>\n                               <RemoveBreakTimeButton onClick={() => handleRemoveBreakTime(key, index)}>\n                                 삭제\n                               </RemoveBreakTimeButton>\n                             </BreakTimeRow>\n"
                },
                {
                    "date": 1762072932212,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -255,36 +255,38 @@\n   }\n `;\n */\n \n-const TimeInput = styled.input`\n-  width: 80px;\n-  padding: 6px 8px;\n+\n+const TimeSelectContainer = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 4px;\n+`;\n+\n+const TimeSelect = styled.select`\n+  padding: 4px 6px;\n   border: 1px solid #ddd;\n   border-radius: 4px;\n-  text-align: center;\n   font-size: 0.9rem;\n   font-weight: 500;\n+  background-color: white;\n   \n   &:focus {\n     outline: none;\n     border-color: ${AppColors.primary};\n     box-shadow: 0 0 0 2px ${AppColors.primary}20;\n   }\n-  \n-  /* Hide number input spinners */\n-  &::-webkit-outer-spin-button,\n-  &::-webkit-inner-spin-button {\n-    -webkit-appearance: none;\n-    margin: 0;\n-  }\n-  \n-  &[type=number] {\n-    appearance: textfield;\n-    -moz-appearance: textfield;\n-  }\n `;\n \n+const HourSelect = styled(TimeSelect)`\n+  width: 50px;\n+`;\n+\n+const MinuteSelect = styled(TimeSelect)`\n+  width: 50px;\n+`;\n+\n // DayDate component removed - date now included in day label\n \n const WorkingHoursLabel = styled.div`\n   font-size: 0.9rem;\n@@ -423,33 +425,23 @@\n   currentUser,\n   onSave,\n   existingWeeklyHolidays = []\n }) => {\n-  // 분을 시간 문자열로 변환하는 함수 (예: 570 -> \"09:30\")\n-  const minutesToTimeString = (minutes: number): string => {\n-    const hours = Math.floor(minutes / 60);\n-    const mins = minutes % 60;\n-    return `${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}`;\n+\n+\n+  // 분을 시와 분으로 분리하는 함수\n+  const minutesToHourMinute = (minutes: number): { hour: number; minute: number } => {\n+    const hour = Math.floor(minutes / 60);\n+    const minute = minutes % 60;\n+    return { hour, minute };\n   };\n \n-  // 시간 입력 검증 및 변환\n-  const validateAndConvertTime = (timeStr: string): number => {\n-    // 기본 형식 검증\n-    const timeRegex = /^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/;\n-    if (!timeRegex.test(timeStr)) {\n-      return 540; // 기본값 09:00\n-    }\n-    \n-    const [hours, minutes] = timeStr.split(':').map(Number);\n-    \n-    // 30분 단위 검증\n-    if (minutes !== 0 && minutes !== 30) {\n-      const adjustedMinutes = minutes < 15 ? 0 : 30;\n-      return hours * 60 + adjustedMinutes;\n-    }\n-    \n-    return hours * 60 + minutes;\n+  // 시와 분을 분으로 변환하는 함수\n+  const hourMinuteToMinutes = (hour: number, minute: number): number => {\n+    return hour * 60 + minute;\n   };\n+\n+\n   const [selectedStaffIds, setSelectedStaffIds] = useState<string[]>([]);\n   const [currentWeekStartDate, setCurrentWeekStartDate] = useState('');\n   const [weekDaySettings, setWeekDaySettings] = useState<{\n     monday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n@@ -664,17 +656,49 @@\n       return newState;\n     });\n   };\n \n-  const handleWorkingHoursChange = (day: keyof typeof weekDaySettings, field: 'start' | 'end', timeStr: string) => {\n-    const minutes = validateAndConvertTime(timeStr);\n+\n+\n+  // 드롭다운용 시간 변경 핸들러\n+  const handleTimeDropdownChange = (\n+    day: keyof typeof weekDaySettings, \n+    field: 'start' | 'end', \n+    type: 'hour' | 'minute', \n+    value: string\n+  ) => {\n+    const currentTime = minutesToHourMinute(weekDaySettings[day].workingHours[field]);\n+    let newHour = currentTime.hour;\n+    let newMinute = currentTime.minute;\n+    \n+    if (type === 'hour') {\n+      newHour = parseInt(value, 10);\n+    } else {\n+      newMinute = parseInt(value, 10);\n+    }\n+    \n+    const newMinutes = hourMinuteToMinutes(newHour, newMinute);\n+    \n+    // 시작 시간이 종료 시간보다 늦지 않도록 검증\n+    const otherField = field === 'start' ? 'end' : 'start';\n+    const otherTime = weekDaySettings[day].workingHours[otherField];\n+    \n+    let finalMinutes = newMinutes;\n+    if (field === 'start' && newMinutes >= otherTime) {\n+      finalMinutes = otherTime - 30; // 최소 30분 차이\n+      if (finalMinutes < 0) finalMinutes = 0;\n+    } else if (field === 'end' && newMinutes <= otherTime) {\n+      finalMinutes = otherTime + 30; // 최소 30분 차이\n+      if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n+    }\n+    \n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n         ...prev[day],\n         workingHours: {\n           ...prev[day].workingHours,\n-          [field]: minutes\n+          [field]: finalMinutes\n         }\n       }\n     }));\n   };\n@@ -708,10 +732,10 @@\n         ...prev[day],\n         breakTimes: prev[day].breakTimes.map((breakTime, i) => {\n           if (i === index) {\n             if (field === 'start' || field === 'end') {\n-              // 시간 필드인 경우 분 단위로 변환\n-              const timeValue = typeof value === 'string' ? validateAndConvertTime(value) : value;\n+              // 시간 필드인 경우 숫자 그대로 사용 (이미 분 단위)\n+              const timeValue = typeof value === 'number' ? value : parseInt(value as string, 10);\n               return { ...breakTime, [field]: timeValue };\n             } else {\n               // 이름 필드인 경우 그대로\n               return { ...breakTime, [field]: value };\n@@ -722,8 +746,55 @@\n       }\n     }));\n   };\n \n+  // 휴게시간용 드롭다운 변경 핸들러\n+  const handleBreakTimeDropdownChange = (\n+    day: keyof typeof weekDaySettings, \n+    index: number, \n+    field: 'start' | 'end', \n+    type: 'hour' | 'minute', \n+    value: string\n+  ) => {\n+    const breakTime = weekDaySettings[day].breakTimes[index];\n+    if (!breakTime) return;\n+    \n+    const currentTime = minutesToHourMinute(breakTime[field]);\n+    let newHour = currentTime.hour;\n+    let newMinute = currentTime.minute;\n+    \n+    if (type === 'hour') {\n+      newHour = parseInt(value, 10);\n+    } else {\n+      newMinute = parseInt(value, 10);\n+    }\n+    \n+    const newMinutes = hourMinuteToMinutes(newHour, newMinute);\n+    \n+    // 시작 시간이 종료 시간보다 늦지 않도록 검증\n+    const otherField = field === 'start' ? 'end' : 'start';\n+    const otherTime = breakTime[otherField];\n+    \n+    let finalMinutes = newMinutes;\n+    if (field === 'start' && newMinutes >= otherTime) {\n+      finalMinutes = otherTime - 30;\n+      if (finalMinutes < 0) finalMinutes = 0;\n+    } else if (field === 'end' && newMinutes <= otherTime) {\n+      finalMinutes = otherTime + 30;\n+      if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n+    }\n+    \n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        breakTimes: prev[day].breakTimes.map((bt, i) => \n+          i === index ? { ...bt, [field]: finalMinutes } : bt\n+        )\n+      }\n+    }));\n+  };\n+\n   const handleApplyToAll = (sourceDay: keyof typeof weekDaySettings) => {\n     const sourceSettings = weekDaySettings[sourceDay];\n     const allDayKeys: (keyof typeof weekDaySettings)[] = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n     \n@@ -884,23 +955,45 @@\n                         <WorkingHoursLabel>\n                           근무 시간\n                           <div style={{ display: 'flex', alignItems: 'center' }}>\n                             <WorkingHoursInputs>\n-                              <TimeInput\n-                                type=\"text\"\n-                                value={minutesToTimeString(daySettings.workingHours.start)}\n-                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n-                                  handleWorkingHoursChange(key, 'start', e.target.value);\n-                                }}\n-                              />\n+                              <TimeSelectContainer>\n+                                <HourSelect\n+                                  value={minutesToHourMinute(daySettings.workingHours.start).hour}\n+                                  onChange={(e) => handleTimeDropdownChange(key, 'start', 'hour', e.target.value)}\n+                                >\n+                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                  ))}\n+                                </HourSelect>\n+                                <span>:</span>\n+                                <MinuteSelect\n+                                  value={minutesToHourMinute(daySettings.workingHours.start).minute}\n+                                  onChange={(e) => handleTimeDropdownChange(key, 'start', 'minute', e.target.value)}\n+                                >\n+                                  <option value={0}>00</option>\n+                                  <option value={30}>30</option>\n+                                </MinuteSelect>\n+                              </TimeSelectContainer>\n                               <span>~</span>\n-                              <TimeInput\n-                                type=\"text\"\n-                                value={minutesToTimeString(daySettings.workingHours.end)}\n-                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n-                                  handleWorkingHoursChange(key, 'end', e.target.value);\n-                                }}\n-                              />\n+                              <TimeSelectContainer>\n+                                <HourSelect\n+                                  value={minutesToHourMinute(daySettings.workingHours.end).hour}\n+                                  onChange={(e) => handleTimeDropdownChange(key, 'end', 'hour', e.target.value)}\n+                                >\n+                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                  ))}\n+                                </HourSelect>\n+                                <span>:</span>\n+                                <MinuteSelect\n+                                  value={minutesToHourMinute(daySettings.workingHours.end).minute}\n+                                  onChange={(e) => handleTimeDropdownChange(key, 'end', 'minute', e.target.value)}\n+                                >\n+                                  <option value={0}>00</option>\n+                                  <option value={30}>30</option>\n+                                </MinuteSelect>\n+                              </TimeSelectContainer>\n                             </WorkingHoursInputs>\n                             <ApplyToAllButton onClick={() => handleApplyToAll(key)}>\n                               모두적용\n                             </ApplyToAllButton>\n@@ -921,23 +1014,45 @@\n                                 placeholder=\"휴게시간명\"\n                                 value={breakTime.name}\n                                 onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleBreakTimeChange(key, index, 'name', e.target.value)}\n                               />\n-                              <TimeInput\n-                                type=\"text\"\n-                                value={minutesToTimeString(breakTime.start)}\n-                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n-                                  handleBreakTimeChange(key, index, 'start', e.target.value);\n-                                }}\n-                              />\n+                              <TimeSelectContainer>\n+                                <HourSelect\n+                                  value={minutesToHourMinute(breakTime.start).hour}\n+                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'start', 'hour', e.target.value)}\n+                                >\n+                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                  ))}\n+                                </HourSelect>\n+                                <span>:</span>\n+                                <MinuteSelect\n+                                  value={minutesToHourMinute(breakTime.start).minute}\n+                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'start', 'minute', e.target.value)}\n+                                >\n+                                  <option value={0}>00</option>\n+                                  <option value={30}>30</option>\n+                                </MinuteSelect>\n+                              </TimeSelectContainer>\n                               <span>~</span>\n-                              <TimeInput\n-                                type=\"text\"\n-                                value={minutesToTimeString(breakTime.end)}\n-                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n-                                  handleBreakTimeChange(key, index, 'end', e.target.value);\n-                                }}\n-                              />\n+                              <TimeSelectContainer>\n+                                <HourSelect\n+                                  value={minutesToHourMinute(breakTime.end).hour}\n+                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'end', 'hour', e.target.value)}\n+                                >\n+                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                  ))}\n+                                </HourSelect>\n+                                <span>:</span>\n+                                <MinuteSelect\n+                                  value={minutesToHourMinute(breakTime.end).minute}\n+                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'end', 'minute', e.target.value)}\n+                                >\n+                                  <option value={0}>00</option>\n+                                  <option value={30}>30</option>\n+                                </MinuteSelect>\n+                              </TimeSelectContainer>\n                               <RemoveBreakTimeButton onClick={() => handleRemoveBreakTime(key, index)}>\n                                 삭제\n                               </RemoveBreakTimeButton>\n                             </BreakTimeRow>\n"
                },
                {
                    "date": 1762169896913,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import React, { useState, useEffect } from 'react';\n import styled from 'styled-components';\n import { AppColors } from '../../styles/colors';\n import { AppTextStyles } from '../../styles/textStyles';\n+import { dbManager } from '../../utils/indexedDB';\n import type { WeeklyHolidaySettings } from '../../utils/db/types';\n \n interface WeeklyHolidayModalProps {\n   isOpen: boolean;\n@@ -834,8 +835,9 @@\n     setIsLoading(true);\n     setError(null);\n     \n     try {\n+      // 1. 기존 주별 휴일 설정 저장\n       const settings: Omit<WeeklyHolidaySettings, 'id' | 'createdAt' | 'updatedAt'>[] = [];\n       \n       selectedStaffIds.forEach(staffId => {\n         settings.push({\n@@ -845,8 +847,43 @@\n         });\n       });\n       \n       await onSave(settings);\n+\n+      // 2. 휴일로 체크된 날짜들을 직원의 holidays 배열에 누적\n+      // 체크 해제된 날짜들은 배열에서 제거\n+      const weekStart = new Date(currentWeekStartDate);\n+      const dayKeys = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'] as const;\n+      \n+      for (const staffId of selectedStaffIds) {\n+        const holidayDates: string[] = [];\n+        const removeDates: string[] = [];\n+        \n+        // 각 요일별로 휴일인지 확인하고 날짜 계산\n+        dayKeys.forEach((dayKey, index) => {\n+          const date = new Date(weekStart);\n+          // 월요일부터 시작하므로 index를 그대로 사용\n+          date.setDate(weekStart.getDate() + index);\n+          const dateString = date.toISOString().split('T')[0];\n+          \n+          if (weekDaySettings[dayKey].isHoliday) {\n+            holidayDates.push(dateString);\n+          } else {\n+            removeDates.push(dateString);\n+          }\n+        });\n+        \n+        // 휴일 날짜들을 직원의 holidays 배열에 추가\n+        for (const dateString of holidayDates) {\n+          await dbManager.addStaffHoliday(staffId, dateString);\n+        }\n+        \n+        // 체크 해제된 날짜들을 직원의 holidays 배열에서 제거\n+        for (const dateString of removeDates) {\n+          await dbManager.removeStaffHoliday(staffId, dateString);\n+        }\n+      }\n+      \n       onClose();\n     } catch (error) {\n       console.error('주별 휴일 설정 저장 중 오류 발생:', error);\n       setError('휴일 설정 저장 중 오류가 발생했습니다. 다시 시도해주세요.');\n"
                },
                {
                    "date": 1762170165692,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -553,46 +553,92 @@\n \n       setError(null);\n       setIsLoading(false);\n     }\n-  }, [isOpen, staffId, currentUser, staffList, selectedStaffIds]);\n+  }, [isOpen, staffId, currentUser]);\n \n   // 기존 설정 로드\n   useEffect(() => {\n     console.log('useEffect triggered:', { isOpen, currentWeekStartDate, selectedStaffIds: selectedStaffIds.length });\n     \n-    if (isOpen && currentWeekStartDate) {\n-      if (selectedStaffIds.length > 0) {\n-        const existingSetting = existingWeeklyHolidays.find(\n-          setting => setting.weekStartDate === currentWeekStartDate && \n-                    selectedStaffIds.includes(setting.staffId)\n-        );\n+    if (isOpen && currentWeekStartDate && selectedStaffIds.length > 0) {\n+      const existingSetting = existingWeeklyHolidays.find(\n+        setting => setting.weekStartDate === currentWeekStartDate && \n+                  selectedStaffIds.includes(setting.staffId)\n+      );\n+      \n+      if (existingSetting) {\n+        console.log('Found existing setting:', existingSetting);\n+        // 기존 설정이 있다면 로드하되, 구조가 맞지 않으면 기본값 사용\n+        const normalizedWeekDays = {\n+          monday: {\n+            isHoliday: existingSetting.weekDays.monday?.isHoliday ?? false,\n+            workingHours: existingSetting.weekDays.monday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.monday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          tuesday: {\n+            isHoliday: existingSetting.weekDays.tuesday?.isHoliday ?? false,\n+            workingHours: existingSetting.weekDays.tuesday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.tuesday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          wednesday: {\n+            isHoliday: existingSetting.weekDays.wednesday?.isHoliday ?? false,\n+            workingHours: existingSetting.weekDays.wednesday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.wednesday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          thursday: {\n+            isHoliday: existingSetting.weekDays.thursday?.isHoliday ?? false,\n+            workingHours: existingSetting.weekDays.thursday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.thursday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          friday: {\n+            isHoliday: existingSetting.weekDays.friday?.isHoliday ?? false,\n+            workingHours: existingSetting.weekDays.friday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.friday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          saturday: {\n+            isHoliday: existingSetting.weekDays.saturday?.isHoliday ?? true,\n+            workingHours: existingSetting.weekDays.saturday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.saturday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          sunday: {\n+            isHoliday: existingSetting.weekDays.sunday?.isHoliday ?? true,\n+            workingHours: existingSetting.weekDays.sunday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.sunday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          }\n+        };\n         \n-        if (existingSetting) {\n-          console.log('Found existing setting:', existingSetting);\n-          // 기존 설정이 있다면 로드하되, 구조가 맞지 않으면 기본값 사용\n-          const normalizedWeekDays = Object.keys(weekDaySettings).reduce((acc, day) => {\n-            const dayKey = day as keyof typeof weekDaySettings;\n-            const existingDay = existingSetting.weekDays[dayKey];\n-            \n-            acc[dayKey] = {\n-              isHoliday: existingDay?.isHoliday ?? false,\n-              workingHours: existingDay?.workingHours ?? { start: 540, end: 1260 }, // 기본값: 09:00 ~ 21:00\n-              breakTimes: (existingDay?.breakTimes ?? []).map(bt => ({\n-                start: bt.start,\n-                end: bt.end,\n-                name: bt.name || '휴게시간'\n-              }))\n-            };\n-            \n-            return acc;\n-          }, {} as typeof weekDaySettings);\n-          \n-          setWeekDaySettings(normalizedWeekDays);\n-        } else {\n-          console.log('No existing setting found, using default state');\n-        }\n+        setWeekDaySettings(normalizedWeekDays);\n       } else {\n+        console.log('No existing setting found, using default state');\n         // 기본값으로 리셋 (주말만 휴일)\n         setWeekDaySettings({\n           monday: {\n             isHoliday: false,\n"
                },
                {
                    "date": 1762170288444,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -928,8 +928,11 @@\n           await dbManager.removeStaffHoliday(staffId, dateString);\n         }\n       }\n       \n+      // 데이터베이스 작업이 완전히 완료되도록 약간의 지연\n+      await new Promise(resolve => setTimeout(resolve, 100));\n+      \n       onClose();\n     } catch (error) {\n       console.error('주별 휴일 설정 저장 중 오류 발생:', error);\n       setError('휴일 설정 저장 중 오류가 발생했습니다. 다시 시도해주세요.');\n"
                },
                {
                    "date": 1762170497556,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,8 +22,9 @@\n     role: 'master' | 'coach' | 'admin';\n   };\n   onSave: (settings: Omit<WeeklyHolidaySettings, 'id' | 'createdAt' | 'updatedAt'>[]) => Promise<void>;\n   existingWeeklyHolidays?: WeeklyHolidaySettings[]; // 기존 주별 휴일 설정 데이터\n+  onRefresh?: () => Promise<void>; // 데이터 새로고침 콜백\n }\n \n const ModalOverlay = styled.div`\n   position: fixed;\n@@ -424,9 +425,10 @@\n   staffId,\n   staffList,\n   currentUser,\n   onSave,\n-  existingWeeklyHolidays = []\n+  existingWeeklyHolidays = [],\n+  onRefresh\n }) => {\n \n \n   // 분을 시와 분으로 분리하는 함수\n@@ -931,8 +933,13 @@\n       \n       // 데이터베이스 작업이 완전히 완료되도록 약간의 지연\n       await new Promise(resolve => setTimeout(resolve, 100));\n       \n+      // 부모 컴포넌트에 데이터 새로고침 요청\n+      if (onRefresh) {\n+        await onRefresh();\n+      }\n+      \n       onClose();\n     } catch (error) {\n       console.error('주별 휴일 설정 저장 중 오류 발생:', error);\n       setError('휴일 설정 저장 중 오류가 발생했습니다. 다시 시도해주세요.');\n"
                },
                {
                    "date": 1762253728542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,10 @@\n   staffId?: string; // undefined면 전체 코치\n   staffList: Array<{\n     id: string;\n     name: string;\n+    contractStartDate?: Date; // 계약 시작일\n+    contractEndDate?: Date; // 계약 종료일\n     workingHours?: {\n       start: number;\n       end: number;\n     };\n@@ -133,20 +135,46 @@\n const WeekSection = styled.div`\n   margin-bottom: 24px;\n `;\n \n-const WeekHeader = styled.div`\n+const WeekNavigationContainer = styled.div`\n   display: flex;\n+  align-items: center;\n   justify-content: center;\n-  align-items: center;\n+  gap: 16px;\n   margin-bottom: 16px;\n `;\n \n+const WeekNavButton = styled.button<{ $disabled?: boolean }>`\n+  background-color: ${AppColors.surface};\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  padding: 8px 12px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  color: ${props => props.$disabled ? AppColors.onSurface + '60' : AppColors.onSurface};\n+  cursor: ${props => props.$disabled ? 'not-allowed' : 'pointer'};\n+  opacity: ${props => props.$disabled ? 0.6 : 1};\n+  \n+  &:hover {\n+    background-color: ${props => props.$disabled ? AppColors.surface : AppColors.background};\n+    border-color: ${props => props.$disabled ? AppColors.borderLight : AppColors.primary + '30'};\n+  }\n+  \n+  &:disabled {\n+    cursor: not-allowed;\n+    opacity: 0.6;\n+  }\n+`;\n+\n+\n+\n const WeekTitle = styled.h3`\n   font-size: ${AppTextStyles.body1.fontSize};\n   font-weight: 600;\n   color: ${AppColors.onSurface};\n   margin: 0;\n+  text-align: center;\n+  min-width: 250px;\n `;\n \n const WeekDaysContainer = styled.div`\n   display: grid;\n@@ -493,8 +521,68 @@\n   });\n   const [isLoading, setIsLoading] = useState(false);\n   const [error, setError] = useState<string | null>(null);\n \n+  // 주 이동 기능\n+  const moveWeek = (direction: 'prev' | 'next') => {\n+    const currentMonday = new Date(currentWeekStartDate + 'T00:00:00');\n+    const newMonday = new Date(currentMonday);\n+    newMonday.setDate(currentMonday.getDate() + (direction === 'next' ? 7 : -7));\n+    \n+    const newWeekStartDate = newMonday.toISOString().split('T')[0];\n+    setCurrentWeekStartDate(newWeekStartDate);\n+  };\n+\n+  // 주 선택 가능 여부 체크 (계약 기간 기반)\n+  const isWeekSelectable = (weekStartDate: string): boolean => {\n+    if (selectedStaffIds.length === 0) return true;\n+    \n+    // 해당 주의 모든 날짜가 선택된 코치들의 계약기간 내에 있는지 확인\n+    const mondayDate = new Date(weekStartDate + 'T00:00:00');\n+    const saturdayDate = new Date(mondayDate);\n+    saturdayDate.setDate(mondayDate.getDate() - 2); // 토요일\n+    const fridayDate = new Date(saturdayDate);\n+    fridayDate.setDate(saturdayDate.getDate() + 6); // 금요일\n+    \n+    return selectedStaffIds.every(staffId => {\n+      const staff = staffList.find(s => s.id === staffId);\n+      if (!staff?.contractStartDate || !staff?.contractEndDate) return true;\n+      \n+      const contractStart = new Date(staff.contractStartDate);\n+      contractStart.setHours(0, 0, 0, 0);\n+      const contractEnd = new Date(staff.contractEndDate);\n+      contractEnd.setHours(0, 0, 0, 0);\n+      \n+      // 해당 주의 토요일부터 금요일까지가 모두 계약기간 내에 있어야 함\n+      return saturdayDate >= contractStart && fridayDate <= contractEnd;\n+    });\n+  };\n+\n+  // 이전/다음 주 이동 가능 여부\n+  const canMoveToPrevWeek = () => {\n+    const currentMonday = new Date(currentWeekStartDate + 'T00:00:00');\n+    const prevMonday = new Date(currentMonday);\n+    prevMonday.setDate(currentMonday.getDate() - 7);\n+    const prevWeekStartDate = prevMonday.toISOString().split('T')[0];\n+    \n+    // 과거 주는 선택 불가\n+    const today = new Date();\n+    const prevSaturday = new Date(prevMonday);\n+    prevSaturday.setDate(prevMonday.getDate() - 2);\n+    if (prevSaturday < today) return false;\n+    \n+    return isWeekSelectable(prevWeekStartDate);\n+  };\n+\n+  const canMoveToNextWeek = () => {\n+    const currentMonday = new Date(currentWeekStartDate + 'T00:00:00');\n+    const nextMonday = new Date(currentMonday);\n+    nextMonday.setDate(currentMonday.getDate() + 7);\n+    const nextWeekStartDate = nextMonday.toISOString().split('T')[0];\n+    \n+    return isWeekSelectable(nextWeekStartDate);\n+  };\n+\n   // 현재 설정 가능한 주의 월요일 날짜 계산\n   // 휴일설정은 이번주 토요일부터 다음주 금요일까지에 대한 결정\n   const getCurrentSettableWeekStartDate = (): string => {\n     const today = new Date();\n@@ -997,13 +1085,27 @@\n \n \n           {/* 주별 휴일설정 */}\n           <WeekSection>\n-            <WeekHeader>\n+            <WeekNavigationContainer>\n+              <WeekNavButton \n+                $disabled={!canMoveToPrevWeek()} \n+                onClick={() => moveWeek('prev')}\n+              >\n+                ← 이전 주\n+              </WeekNavButton>\n+              \n               <WeekTitle>\n                 설정 대상 주: {getWeekDateRange()}\n               </WeekTitle>\n-            </WeekHeader>\n+              \n+              <WeekNavButton \n+                $disabled={!canMoveToNextWeek()} \n+                onClick={() => moveWeek('next')}\n+              >\n+                다음 주 →\n+              </WeekNavButton>\n+            </WeekNavigationContainer>\n             \n             <div style={{ fontSize: '14px', marginBottom: '12px', color: AppColors.onSurface + '80' }}>\n               휴일설정은 다음 토요일부터 그 다음주 금요일까지에 대한 결정입니다.\n               <br />\n"
                },
                {
                    "date": 1762253982428,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -523,9 +523,13 @@\n   const [error, setError] = useState<string | null>(null);\n \n   // 주 이동 기능\n   const moveWeek = (direction: 'prev' | 'next') => {\n+    if (!currentWeekStartDate) return;\n+    \n     const currentMonday = new Date(currentWeekStartDate + 'T00:00:00');\n+    if (isNaN(currentMonday.getTime())) return;\n+    \n     const newMonday = new Date(currentMonday);\n     newMonday.setDate(currentMonday.getDate() + (direction === 'next' ? 7 : -7));\n     \n     const newWeekStartDate = newMonday.toISOString().split('T')[0];\n@@ -534,11 +538,14 @@\n \n   // 주 선택 가능 여부 체크 (계약 기간 기반)\n   const isWeekSelectable = (weekStartDate: string): boolean => {\n     if (selectedStaffIds.length === 0) return true;\n+    if (!weekStartDate) return false;\n     \n     // 해당 주의 모든 날짜가 선택된 코치들의 계약기간 내에 있는지 확인\n     const mondayDate = new Date(weekStartDate + 'T00:00:00');\n+    if (isNaN(mondayDate.getTime())) return false;\n+    \n     const saturdayDate = new Date(mondayDate);\n     saturdayDate.setDate(mondayDate.getDate() - 2); // 토요일\n     const fridayDate = new Date(saturdayDate);\n     fridayDate.setDate(saturdayDate.getDate() + 6); // 금요일\n@@ -558,9 +565,13 @@\n   };\n \n   // 이전/다음 주 이동 가능 여부\n   const canMoveToPrevWeek = () => {\n+    if (!currentWeekStartDate) return false;\n+    \n     const currentMonday = new Date(currentWeekStartDate + 'T00:00:00');\n+    if (isNaN(currentMonday.getTime())) return false;\n+    \n     const prevMonday = new Date(currentMonday);\n     prevMonday.setDate(currentMonday.getDate() - 7);\n     const prevWeekStartDate = prevMonday.toISOString().split('T')[0];\n     \n@@ -573,9 +584,13 @@\n     return isWeekSelectable(prevWeekStartDate);\n   };\n \n   const canMoveToNextWeek = () => {\n+    if (!currentWeekStartDate) return false;\n+    \n     const currentMonday = new Date(currentWeekStartDate + 'T00:00:00');\n+    if (isNaN(currentMonday.getTime())) return false;\n+    \n     const nextMonday = new Date(currentMonday);\n     nextMonday.setDate(currentMonday.getDate() + 7);\n     const nextWeekStartDate = nextMonday.toISOString().split('T')[0];\n     \n@@ -601,9 +616,12 @@\n   };\n   \n   // 주 날짜 범위 표시 (토요일부터 금요일까지)\n   const getWeekDateRange = (): string => {\n+    if (!currentWeekStartDate) return '';\n+    \n     const mondayDate = new Date(currentWeekStartDate + 'T00:00:00');\n+    if (isNaN(mondayDate.getTime())) return '';\n     \n     // 월요일에서 토요일로 이동 (월요일 - 2일 = 토요일)\n     const saturdayDate = new Date(mondayDate);\n     saturdayDate.setDate(mondayDate.getDate() - 2);\n"
                },
                {
                    "date": 1762254933929,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -799,13 +799,19 @@\n \n   const handleDayToggle = (day: keyof typeof weekDaySettings) => {\n     console.log('handleDayToggle called:', day, 'current state:', weekDaySettings[day]);\n     setWeekDaySettings(prev => {\n+      const currentDay = prev[day];\n+      const newIsHoliday = !currentDay.isHoliday;\n+      \n       const newState = {\n         ...prev,\n         [day]: {\n-          ...prev[day],\n-          isHoliday: !prev[day].isHoliday\n+          ...currentDay,\n+          isHoliday: newIsHoliday,\n+          // 휴일로 설정할 때 근무시간과 휴게시간을 비움\n+          workingHours: newIsHoliday ? { start: 0, end: 0 } : currentDay.workingHours,\n+          breakTimes: newIsHoliday ? [] : currentDay.breakTimes\n         }\n       };\n       console.log('new state for', day, ':', newState[day]);\n       return newState;\n"
                },
                {
                    "date": 1762255423445,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,31 +143,8 @@\n   gap: 16px;\n   margin-bottom: 16px;\n `;\n \n-const WeekNavButton = styled.button<{ $disabled?: boolean }>`\n-  background-color: ${AppColors.surface};\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  padding: 8px 12px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${props => props.$disabled ? AppColors.onSurface + '60' : AppColors.onSurface};\n-  cursor: ${props => props.$disabled ? 'not-allowed' : 'pointer'};\n-  opacity: ${props => props.$disabled ? 0.6 : 1};\n-  \n-  &:hover {\n-    background-color: ${props => props.$disabled ? AppColors.surface : AppColors.background};\n-    border-color: ${props => props.$disabled ? AppColors.borderLight : AppColors.primary + '30'};\n-  }\n-  \n-  &:disabled {\n-    cursor: not-allowed;\n-    opacity: 0.6;\n-  }\n-`;\n-\n-\n-\n const WeekTitle = styled.h3`\n   font-size: ${AppTextStyles.body1.fontSize};\n   font-weight: 600;\n   color: ${AppColors.onSurface};\n@@ -521,83 +498,8 @@\n   });\n   const [isLoading, setIsLoading] = useState(false);\n   const [error, setError] = useState<string | null>(null);\n \n-  // 주 이동 기능\n-  const moveWeek = (direction: 'prev' | 'next') => {\n-    if (!currentWeekStartDate) return;\n-    \n-    const currentMonday = new Date(currentWeekStartDate + 'T00:00:00');\n-    if (isNaN(currentMonday.getTime())) return;\n-    \n-    const newMonday = new Date(currentMonday);\n-    newMonday.setDate(currentMonday.getDate() + (direction === 'next' ? 7 : -7));\n-    \n-    const newWeekStartDate = newMonday.toISOString().split('T')[0];\n-    setCurrentWeekStartDate(newWeekStartDate);\n-  };\n-\n-  // 주 선택 가능 여부 체크 (계약 기간 기반)\n-  const isWeekSelectable = (weekStartDate: string): boolean => {\n-    if (selectedStaffIds.length === 0) return true;\n-    if (!weekStartDate) return false;\n-    \n-    // 해당 주의 모든 날짜가 선택된 코치들의 계약기간 내에 있는지 확인\n-    const mondayDate = new Date(weekStartDate + 'T00:00:00');\n-    if (isNaN(mondayDate.getTime())) return false;\n-    \n-    const saturdayDate = new Date(mondayDate);\n-    saturdayDate.setDate(mondayDate.getDate() - 2); // 토요일\n-    const fridayDate = new Date(saturdayDate);\n-    fridayDate.setDate(saturdayDate.getDate() + 6); // 금요일\n-    \n-    return selectedStaffIds.every(staffId => {\n-      const staff = staffList.find(s => s.id === staffId);\n-      if (!staff?.contractStartDate || !staff?.contractEndDate) return true;\n-      \n-      const contractStart = new Date(staff.contractStartDate);\n-      contractStart.setHours(0, 0, 0, 0);\n-      const contractEnd = new Date(staff.contractEndDate);\n-      contractEnd.setHours(0, 0, 0, 0);\n-      \n-      // 해당 주의 토요일부터 금요일까지가 모두 계약기간 내에 있어야 함\n-      return saturdayDate >= contractStart && fridayDate <= contractEnd;\n-    });\n-  };\n-\n-  // 이전/다음 주 이동 가능 여부\n-  const canMoveToPrevWeek = () => {\n-    if (!currentWeekStartDate) return false;\n-    \n-    const currentMonday = new Date(currentWeekStartDate + 'T00:00:00');\n-    if (isNaN(currentMonday.getTime())) return false;\n-    \n-    const prevMonday = new Date(currentMonday);\n-    prevMonday.setDate(currentMonday.getDate() - 7);\n-    const prevWeekStartDate = prevMonday.toISOString().split('T')[0];\n-    \n-    // 과거 주는 선택 불가\n-    const today = new Date();\n-    const prevSaturday = new Date(prevMonday);\n-    prevSaturday.setDate(prevMonday.getDate() - 2);\n-    if (prevSaturday < today) return false;\n-    \n-    return isWeekSelectable(prevWeekStartDate);\n-  };\n-\n-  const canMoveToNextWeek = () => {\n-    if (!currentWeekStartDate) return false;\n-    \n-    const currentMonday = new Date(currentWeekStartDate + 'T00:00:00');\n-    if (isNaN(currentMonday.getTime())) return false;\n-    \n-    const nextMonday = new Date(currentMonday);\n-    nextMonday.setDate(currentMonday.getDate() + 7);\n-    const nextWeekStartDate = nextMonday.toISOString().split('T')[0];\n-    \n-    return isWeekSelectable(nextWeekStartDate);\n-  };\n-\n   // 현재 설정 가능한 주의 월요일 날짜 계산\n   // 휴일설정은 이번주 토요일부터 다음주 금요일까지에 대한 결정\n   const getCurrentSettableWeekStartDate = (): string => {\n     const today = new Date();\n@@ -612,11 +514,9 @@\n     const targetMonday = new Date(thisWeekSaturday);\n     targetMonday.setDate(thisWeekSaturday.getDate() + 2); // 토요일 + 2일 = 월요일\n     \n     return targetMonday.toISOString().split('T')[0];\n-  };\n-  \n-  // 주 날짜 범위 표시 (토요일부터 금요일까지)\n+  };  // 주 날짜 범위 표시 (토요일부터 금요일까지)\n   const getWeekDateRange = (): string => {\n     if (!currentWeekStartDate) return '';\n     \n     const mondayDate = new Date(currentWeekStartDate + 'T00:00:00');\n@@ -1110,25 +1010,11 @@\n \n           {/* 주별 휴일설정 */}\n           <WeekSection>\n             <WeekNavigationContainer>\n-              <WeekNavButton \n-                $disabled={!canMoveToPrevWeek()} \n-                onClick={() => moveWeek('prev')}\n-              >\n-                ← 이전 주\n-              </WeekNavButton>\n-              \n               <WeekTitle>\n                 설정 대상 주: {getWeekDateRange()}\n               </WeekTitle>\n-              \n-              <WeekNavButton \n-                $disabled={!canMoveToNextWeek()} \n-                onClick={() => moveWeek('next')}\n-              >\n-                다음 주 →\n-              </WeekNavButton>\n             </WeekNavigationContainer>\n             \n             <div style={{ fontSize: '14px', marginBottom: '12px', color: AppColors.onSurface + '80' }}>\n               휴일설정은 다음 토요일부터 그 다음주 금요일까지에 대한 결정입니다.\n"
                },
                {
                    "date": 1762255564797,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1193 @@\n+import React, { useState, useEffect } from 'react';\n+import styled from 'styled-components';\n+import { AppColors } from '../../styles/colors';\n+import { AppTextStyles } from '../../styles/textStyles';\n+import { dbManager } from '../../utils/indexedDB';\n+import type { WeeklyHolidaySettings } from '../../utils/db/types';\n+\n+interface WeeklyHolidayModalProps {\n+  isOpen: boolean;\n+  onClose: () => void;\n+  staffId?: string; // undefined면 전체 코치\n+  staffList: Array<{\n+    id: string;\n+    name: string;\n+    contractStartDate?: Date; // 계약 시작일\n+    contractEndDate?: Date; // 계약 종료일\n+    workingHours?: {\n+      start: number;\n+      end: number;\n+    };\n+  }>;\n+  currentUser?: {\n+    id: string;\n+    role: 'master' | 'coach' | 'admin';\n+  };\n+  onSave: (settings: Omit<WeeklyHolidaySettings, 'id' | 'createdAt' | 'updatedAt'>[]) => Promise<void>;\n+  existingWeeklyHolidays?: WeeklyHolidaySettings[]; // 기존 주별 휴일 설정 데이터\n+  onRefresh?: () => Promise<void>; // 데이터 새로고침 콜백\n+}\n+\n+const ModalOverlay = styled.div`\n+  position: fixed;\n+  top: 0;\n+  left: 0;\n+  right: 0;\n+  bottom: 0;\n+  background-color: rgba(0, 0, 0, 0.5);\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  z-index: 1000;\n+`;\n+\n+const ModalContainer = styled.div`\n+  background-color: ${AppColors.surface};\n+  border-radius: 12px;\n+  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n+  width: 90%;\n+  max-width: 600px;\n+  max-height: 80vh;\n+  overflow: hidden;\n+  display: flex;\n+  flex-direction: column;\n+`;\n+\n+const ModalHeader = styled.div`\n+  padding: 24px;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+`;\n+\n+const ModalTitle = styled.h2`\n+  font-size: ${AppTextStyles.headline3.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onSurface};\n+  margin: 0;\n+`;\n+\n+const CloseButton = styled.button`\n+  background: none;\n+  border: none;\n+  font-size: 24px;\n+  color: ${AppColors.onSurface};\n+  cursor: pointer;\n+  padding: 4px;\n+  \n+  &:hover {\n+    color: ${AppColors.primary};\n+  }\n+`;\n+\n+const ModalBody = styled.div`\n+  padding: 20px;\n+  overflow-y: auto;\n+  flex: 1;\n+  max-height: 70vh;\n+`;\n+\n+const ModalFooter = styled.div`\n+  padding: 20px 24px;\n+  border-top: 1px solid ${AppColors.borderLight};\n+  display: flex;\n+  justify-content: flex-end;\n+  gap: 12px;\n+`;\n+\n+const ErrorMessage = styled.div`\n+  background-color: ${AppColors.error}15;\n+  color: ${AppColors.error};\n+  padding: 12px;\n+  border-radius: 8px;\n+  margin-bottom: 16px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+`;\n+\n+const StaffSelector = styled.div`\n+  margin-bottom: 24px;\n+`;\n+\n+const SelectorTitle = styled.h4`\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onSurface};\n+  margin: 0 0 12px 0;\n+`;\n+\n+const StaffCheckbox = styled.div`\n+  display: flex;\n+  align-items: center;\n+  margin-bottom: 8px;\n+  \n+  input[type=\"checkbox\"] {\n+    margin-right: 8px;\n+  }\n+  \n+  label {\n+    font-size: ${AppTextStyles.body2.fontSize};\n+    color: ${AppColors.onSurface};\n+    cursor: pointer;\n+  }\n+`;\n+\n+const WeekSection = styled.div`\n+  margin-bottom: 24px;\n+`;\n+\n+const WeekNavigationContainer = styled.div`\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  gap: 16px;\n+  margin-bottom: 16px;\n+`;\n+\n+const WeekTitle = styled.h3`\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onSurface};\n+  margin: 0;\n+  text-align: center;\n+  min-width: 250px;\n+`;\n+\n+const WeekDaysContainer = styled.div`\n+  display: grid;\n+  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\n+  gap: 12px;\n+  \n+  @media (max-width: 768px) {\n+    grid-template-columns: 1fr;\n+    gap: 10px;\n+  }\n+`;\n+\n+const WeekDay = styled.div<{ $isWeekend: boolean; $isHoliday: boolean }>`\n+  background-color: ${props => props.$isHoliday ? AppColors.error + '10' : AppColors.surface};\n+  border: 1px solid ${props => props.$isHoliday ? AppColors.error + '30' : AppColors.borderLight};\n+  border-radius: 8px;\n+  padding: 12px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    border-color: ${props => props.$isHoliday ? AppColors.error + '50' : AppColors.primary + '30'};\n+    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n+  }\n+`;\n+\n+// Removed unused styled component DayHeader\n+\n+// Removed unused styled component DayInfo\n+\n+const DayLabel = styled.div<{ $isWeekend: boolean; $isHoliday: boolean }>`\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  font-weight: 600;\n+  color: ${props => {\n+    if (props.$isHoliday) return AppColors.error;\n+    if (props.$isWeekend) return AppColors.primary;\n+    return AppColors.onSurface;\n+  }};\n+  margin-bottom: 8px;\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+`;\n+\n+// Removed duplicate DayDate - using the one defined later\n+\n+const DayToggle = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  \n+  input[type=\"checkbox\"] {\n+    width: 16px;\n+    height: 16px;\n+    accent-color: ${AppColors.error};\n+  }\n+  \n+  label {\n+    font-size: ${AppTextStyles.body2.fontSize};\n+    color: ${AppColors.onSurface};\n+    cursor: pointer;\n+    font-weight: 500;\n+  }\n+`;\n+\n+const WorkingHoursSection = styled.div<{ $isVisible: boolean }>`\n+  display: ${props => props.$isVisible ? 'block' : 'none'};\n+  margin-top: 12px;\n+`;\n+\n+// Removed unused styled component WorkingHoursRow\n+\n+const BreakTimesSection = styled.div`\n+  margin-top: 12px;\n+`;\n+\n+/* Unused for now - may be used in future iterations\n+const BreakTimeItem = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  margin-bottom: 6px;\n+  \n+  input {\n+    width: 50px;\n+    padding: 4px 6px;\n+    border: 1px solid ${AppColors.borderLight};\n+    border-radius: 4px;\n+    font-size: ${AppTextStyles.body2.fontSize};\n+    text-align: center;\n+  }\n+  \n+  input[type=\"text\"] {\n+    width: 80px;\n+  }\n+  \n+  button {\n+    background: ${AppColors.error};\n+    color: ${AppColors.onPrimary};\n+    border: none;\n+    border-radius: 4px;\n+    padding: 4px 8px;\n+    font-size: 12px;\n+    cursor: pointer;\n+    \n+    &:hover {\n+      background: ${AppColors.error + 'CC'};\n+    }\n+  }\n+`;\n+*/\n+\n+\n+const TimeSelectContainer = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 4px;\n+`;\n+\n+const TimeSelect = styled.select`\n+  padding: 4px 6px;\n+  border: 1px solid #ddd;\n+  border-radius: 4px;\n+  font-size: 0.9rem;\n+  font-weight: 500;\n+  background-color: white;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+    box-shadow: 0 0 0 2px ${AppColors.primary}20;\n+  }\n+`;\n+\n+const HourSelect = styled(TimeSelect)`\n+  width: 50px;\n+`;\n+\n+const MinuteSelect = styled(TimeSelect)`\n+  width: 50px;\n+`;\n+\n+// DayDate component removed - date now included in day label\n+\n+const WorkingHoursLabel = styled.div`\n+  font-size: 0.9rem;\n+  font-weight: 600;\n+  margin-bottom: 8px;\n+  color: #333;\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  flex-wrap: wrap;\n+  gap: 12px;\n+`;\n+\n+const WorkingHoursInputs = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  flex-wrap: wrap;\n+  \n+  span {\n+    color: #666;\n+    font-size: 0.9rem;\n+    font-weight: 500;\n+  }\n+`;\n+\n+const BreakTimesLabel = styled.div`\n+  font-size: 0.9rem;\n+  font-weight: 600;\n+  margin-bottom: 8px;\n+  color: #333;\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+`;\n+\n+const BreakTimeRow = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  margin-bottom: 6px;\n+`;\n+\n+const BreakTimeInput = styled.input`\n+  flex: 1;\n+  min-width: 80px;\n+  padding: 6px 8px;\n+  border: 1px solid #ddd;\n+  border-radius: 4px;\n+  font-size: 0.9rem;\n+`;\n+\n+const RemoveBreakTimeButton = styled.button`\n+  background: #ffebee;\n+  border: 1px solid #f44336;\n+  color: #f44336;\n+  padding: 6px 10px;\n+  border-radius: 4px;\n+  font-size: 0.8rem;\n+  cursor: pointer;\n+  min-width: 50px;\n+  \n+  &:hover {\n+    background: #f44336;\n+    color: white;\n+  }\n+`;\n+\n+const AddBreakTimeButton = styled.button`\n+  background: #e3f2fd;\n+  border: 1px solid #2196f3;\n+  color: #2196f3;\n+  padding: 6px 12px;\n+  border-radius: 4px;\n+  font-size: 0.8rem;\n+  cursor: pointer;\n+  font-weight: 500;\n+  \n+  &:hover {\n+    background: #2196f3;\n+    color: white;\n+  }\n+`;\n+\n+const ApplyToAllButton = styled.button`\n+  background: #f3e5f5;\n+  border: 1px solid #9c27b0;\n+  color: #9c27b0;\n+  padding: 4px 8px;\n+  border-radius: 4px;\n+  font-size: 0.7rem;\n+  cursor: pointer;\n+  font-weight: 500;\n+  margin-left: 8px;\n+  \n+  &:hover {\n+    background: #9c27b0;\n+    color: white;\n+  }\n+`;\n+\n+\n+\n+const Button = styled.button<{ $variant: 'primary' | 'secondary'; $disabled?: boolean }>`\n+  padding: 10px 20px;\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  font-weight: 500;\n+  cursor: ${props => props.$disabled ? 'not-allowed' : 'pointer'};\n+  border: none;\n+  opacity: ${props => props.$disabled ? 0.6 : 1};\n+  \n+  ${props => props.$variant === 'primary' ? `\n+    background-color: ${props.$disabled ? AppColors.primary + '80' : AppColors.primary};\n+    color: ${AppColors.onPrimary};\n+    \n+    &:hover {\n+      background-color: ${props.$disabled ? AppColors.primary : AppColors.primary + 'CC'};\n+    }\n+  ` : `\n+    background-color: ${AppColors.surface};\n+    color: ${AppColors.onSurface};\n+    border: 1px solid ${AppColors.borderLight};\n+    \n+    &:hover {\n+      background-color: ${props.$disabled ? AppColors.surface : AppColors.background};\n+    }\n+  `}\n+`;\n+\n+const WeeklyHolidayModal: React.FC<WeeklyHolidayModalProps> = ({\n+  isOpen,\n+  onClose,\n+  staffId,\n+  staffList,\n+  currentUser,\n+  onSave,\n+  existingWeeklyHolidays = [],\n+  onRefresh\n+}) => {\n+\n+\n+  // 분을 시와 분으로 분리하는 함수\n+  const minutesToHourMinute = (minutes: number): { hour: number; minute: number } => {\n+    const hour = Math.floor(minutes / 60);\n+    const minute = minutes % 60;\n+    return { hour, minute };\n+  };\n+\n+  // 시와 분을 분으로 변환하는 함수\n+  const hourMinuteToMinutes = (hour: number, minute: number): number => {\n+    return hour * 60 + minute;\n+  };\n+\n+\n+  const [selectedStaffIds, setSelectedStaffIds] = useState<string[]>([]);\n+  const [currentWeekStartDate, setCurrentWeekStartDate] = useState('');\n+  const [weekDaySettings, setWeekDaySettings] = useState<{\n+    monday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    tuesday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    wednesday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    thursday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    friday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    saturday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    sunday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+  }>({\n+    monday: {\n+      isHoliday: false,\n+      workingHours: { start: 540, end: 1260 }, // 09:00 ~ 21:00 (분 단위)\n+      breakTimes: []\n+    },\n+    tuesday: {\n+      isHoliday: false,\n+      workingHours: { start: 540, end: 1260 },\n+      breakTimes: []\n+    },\n+    wednesday: {\n+      isHoliday: false,\n+      workingHours: { start: 540, end: 1260 },\n+      breakTimes: []\n+    },\n+    thursday: {\n+      isHoliday: false,\n+      workingHours: { start: 540, end: 1260 },\n+      breakTimes: []\n+    },\n+    friday: {\n+      isHoliday: false,\n+      workingHours: { start: 540, end: 1260 },\n+      breakTimes: []\n+    },\n+    saturday: {\n+      isHoliday: true,  // 기본값: 주말 휴일\n+      workingHours: { start: 540, end: 1260 },\n+      breakTimes: []\n+    },\n+    sunday: {\n+      isHoliday: true,  // 기본값: 주말 휴일\n+      workingHours: { start: 540, end: 1260 },\n+      breakTimes: []\n+    }\n+  });\n+  const [isLoading, setIsLoading] = useState(false);\n+  const [error, setError] = useState<string | null>(null);\n+\n+  // 현재 설정 가능한 주의 월요일 날짜 계산\n+  // 휴일설정은 이번주 토요일부터 다음주 금요일까지에 대한 결정\n+  const getCurrentSettableWeekStartDate = (): string => {\n+    const today = new Date();\n+    const dayOfWeek = today.getDay(); // 0: 일요일, 1: 월요일, ..., 5: 금요일, 6: 토요일\n+    \n+    // 이번주 토요일 계산\n+    let thisWeekSaturday = new Date(today);\n+    const daysUntilSaturday = 6 - dayOfWeek; // 토요일까지 남은 일수 (토요일이면 0)\n+    thisWeekSaturday.setDate(today.getDate() + daysUntilSaturday);\n+    \n+    // 토요일부터 시작하는 주의 월요일 계산 (토요일 + 2일)\n+    const targetMonday = new Date(thisWeekSaturday);\n+    targetMonday.setDate(thisWeekSaturday.getDate() + 2); // 토요일 + 2일 = 월요일\n+    \n+    return targetMonday.toISOString().split('T')[0];\n+  };  // 주 날짜 범위 표시 (토요일부터 금요일까지)\n+  const getWeekDateRange = (): string => {\n+    if (!currentWeekStartDate) return '';\n+    \n+    const mondayDate = new Date(currentWeekStartDate + 'T00:00:00');\n+    if (isNaN(mondayDate.getTime())) return '';\n+    \n+    // 월요일에서 토요일로 이동 (월요일 - 2일 = 토요일)\n+    const saturdayDate = new Date(mondayDate);\n+    saturdayDate.setDate(mondayDate.getDate() - 2);\n+    \n+    // 토요일에서 금요일로 이동 (토요일 + 6일 = 금요일)\n+    const fridayDate = new Date(saturdayDate);\n+    fridayDate.setDate(saturdayDate.getDate() + 6);\n+    \n+    const formatDate = (date: Date) => {\n+      return `${date.getMonth() + 1}/${date.getDate()}`;\n+    };\n+    \n+    return `${formatDate(saturdayDate)} - ${formatDate(fridayDate)}`;\n+  };\n+\n+  // 초기화\n+  useEffect(() => {\n+    console.log('Initialization useEffect triggered, isOpen:', isOpen);\n+    \n+    if (isOpen) {\n+      // 현재 설정 가능한 주로 초기 설정\n+      const settableWeek = getCurrentSettableWeekStartDate();\n+      console.log('Setting currentWeekStartDate to:', settableWeek);\n+      setCurrentWeekStartDate(settableWeek);\n+      \n+      // 직원 선택 초기화\n+      if (staffId) {\n+        console.log('Setting selectedStaffIds to single staff:', staffId);\n+        setSelectedStaffIds([staffId]);\n+      } else if (currentUser?.role === 'master') {\n+        console.log('Master user, setting empty staff selection');\n+        setSelectedStaffIds([]);\n+      } else if (currentUser?.id) {\n+        console.log('Setting selectedStaffIds to current user:', currentUser.id);\n+        setSelectedStaffIds([currentUser.id]);\n+      }\n+\n+      setError(null);\n+      setIsLoading(false);\n+    }\n+  }, [isOpen, staffId, currentUser]);\n+\n+  // 기존 설정 로드\n+  useEffect(() => {\n+    console.log('useEffect triggered:', { isOpen, currentWeekStartDate, selectedStaffIds: selectedStaffIds.length });\n+    \n+    if (isOpen && currentWeekStartDate && selectedStaffIds.length > 0) {\n+      const existingSetting = existingWeeklyHolidays.find(\n+        setting => setting.weekStartDate === currentWeekStartDate && \n+                  selectedStaffIds.includes(setting.staffId)\n+      );\n+      \n+      if (existingSetting) {\n+        console.log('Found existing setting:', existingSetting);\n+        // 기존 설정이 있다면 로드하되, 구조가 맞지 않으면 기본값 사용\n+        const normalizedWeekDays = {\n+          monday: {\n+            isHoliday: existingSetting.weekDays.monday?.isHoliday ?? false,\n+            workingHours: existingSetting.weekDays.monday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.monday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          tuesday: {\n+            isHoliday: existingSetting.weekDays.tuesday?.isHoliday ?? false,\n+            workingHours: existingSetting.weekDays.tuesday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.tuesday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          wednesday: {\n+            isHoliday: existingSetting.weekDays.wednesday?.isHoliday ?? false,\n+            workingHours: existingSetting.weekDays.wednesday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.wednesday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          thursday: {\n+            isHoliday: existingSetting.weekDays.thursday?.isHoliday ?? false,\n+            workingHours: existingSetting.weekDays.thursday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.thursday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          friday: {\n+            isHoliday: existingSetting.weekDays.friday?.isHoliday ?? false,\n+            workingHours: existingSetting.weekDays.friday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.friday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          saturday: {\n+            isHoliday: existingSetting.weekDays.saturday?.isHoliday ?? true,\n+            workingHours: existingSetting.weekDays.saturday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.saturday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          },\n+          sunday: {\n+            isHoliday: existingSetting.weekDays.sunday?.isHoliday ?? true,\n+            workingHours: existingSetting.weekDays.sunday?.workingHours ?? { start: 540, end: 1260 },\n+            breakTimes: (existingSetting.weekDays.sunday?.breakTimes ?? []).map(bt => ({\n+              start: bt.start,\n+              end: bt.end,\n+              name: bt.name || '휴게시간'\n+            }))\n+          }\n+        };\n+        \n+        setWeekDaySettings(normalizedWeekDays);\n+      } else {\n+        console.log('No existing setting found, using default state');\n+        // 기본값으로 리셋 (주말만 휴일)\n+        setWeekDaySettings({\n+          monday: {\n+            isHoliday: false,\n+            workingHours: { start: 540, end: 1260 }, // 09:00 ~ 21:00\n+            breakTimes: []\n+          },\n+          tuesday: {\n+            isHoliday: false,\n+            workingHours: { start: 540, end: 1260 },\n+            breakTimes: []\n+          },\n+          wednesday: {\n+            isHoliday: false,\n+            workingHours: { start: 540, end: 1260 },\n+            breakTimes: []\n+          },\n+          thursday: {\n+            isHoliday: false,\n+            workingHours: { start: 540, end: 1260 },\n+            breakTimes: []\n+          },\n+          friday: {\n+            isHoliday: false,\n+            workingHours: { start: 540, end: 1260 },\n+            breakTimes: []\n+          },\n+          saturday: {\n+            isHoliday: true,\n+            workingHours: { start: 540, end: 1260 },\n+            breakTimes: []\n+          },\n+          sunday: {\n+            isHoliday: true,\n+            workingHours: { start: 540, end: 1260 },\n+            breakTimes: []\n+          }\n+        });\n+      }\n+    }\n+  // eslint-disable-next-line react-hooks/exhaustive-deps\n+  }, [isOpen, currentWeekStartDate, selectedStaffIds, existingWeeklyHolidays]);\n+\n+  const handleStaffToggle = (staffId: string) => {\n+    setSelectedStaffIds(prev => \n+      prev.includes(staffId)\n+        ? prev.filter(id => id !== staffId)\n+        : [...prev, staffId]\n+    );\n+  };\n+\n+  const handleDayToggle = (day: keyof typeof weekDaySettings) => {\n+    console.log('handleDayToggle called:', day, 'current state:', weekDaySettings[day]);\n+    setWeekDaySettings(prev => {\n+      const currentDay = prev[day];\n+      const newIsHoliday = !currentDay.isHoliday;\n+      \n+      const newState = {\n+        ...prev,\n+        [day]: {\n+          ...currentDay,\n+          isHoliday: newIsHoliday,\n+          // 휴일로 설정할 때 근무시간과 휴게시간을 비움\n+          // 휴일 해제할 때는 기본 근무시간 (9시-21시)으로 설정\n+          workingHours: newIsHoliday \n+            ? { start: 0, end: 0 } \n+            : (currentDay.workingHours.start === 0 && currentDay.workingHours.end === 0 \n+               ? { start: 540, end: 1260 } // 기본값: 09:00 ~ 21:00\n+               : currentDay.workingHours),\n+          breakTimes: newIsHoliday ? [] : currentDay.breakTimes\n+        }\n+      };\n+      console.log('new state for', day, ':', newState[day]);\n+      return newState;\n+    });\n+  };\n+\n+\n+\n+  // 드롭다운용 시간 변경 핸들러\n+  const handleTimeDropdownChange = (\n+    day: keyof typeof weekDaySettings, \n+    field: 'start' | 'end', \n+    type: 'hour' | 'minute', \n+    value: string\n+  ) => {\n+    const currentTime = minutesToHourMinute(weekDaySettings[day].workingHours[field]);\n+    let newHour = currentTime.hour;\n+    let newMinute = currentTime.minute;\n+    \n+    if (type === 'hour') {\n+      newHour = parseInt(value, 10);\n+    } else {\n+      newMinute = parseInt(value, 10);\n+    }\n+    \n+    const newMinutes = hourMinuteToMinutes(newHour, newMinute);\n+    \n+    // 시작 시간이 종료 시간보다 늦지 않도록 검증\n+    const otherField = field === 'start' ? 'end' : 'start';\n+    const otherTime = weekDaySettings[day].workingHours[otherField];\n+    \n+    let finalMinutes = newMinutes;\n+    if (field === 'start' && newMinutes >= otherTime) {\n+      finalMinutes = otherTime - 30; // 최소 30분 차이\n+      if (finalMinutes < 0) finalMinutes = 0;\n+    } else if (field === 'end' && newMinutes <= otherTime) {\n+      finalMinutes = otherTime + 30; // 최소 30분 차이\n+      if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n+    }\n+    \n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        workingHours: {\n+          ...prev[day].workingHours,\n+          [field]: finalMinutes\n+        }\n+      }\n+    }));\n+  };\n+\n+\n+\n+\n+\n+  const handleAddBreakTime = (day: keyof typeof weekDaySettings) => {\n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        breakTimes: [\n+          ...prev[day].breakTimes,\n+          { start: 720, end: 780, name: '점심시간' } // 12:00 ~ 13:00\n+        ]\n+      }\n+    }));\n+  };\n+\n+  const handleBreakTimeChange = (\n+    day: keyof typeof weekDaySettings, \n+    index: number, \n+    field: 'start' | 'end' | 'name', \n+    value: number | string\n+  ) => {\n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        breakTimes: prev[day].breakTimes.map((breakTime, i) => {\n+          if (i === index) {\n+            if (field === 'start' || field === 'end') {\n+              // 시간 필드인 경우 숫자 그대로 사용 (이미 분 단위)\n+              const timeValue = typeof value === 'number' ? value : parseInt(value as string, 10);\n+              return { ...breakTime, [field]: timeValue };\n+            } else {\n+              // 이름 필드인 경우 그대로\n+              return { ...breakTime, [field]: value };\n+            }\n+          }\n+          return breakTime;\n+        })\n+      }\n+    }));\n+  };\n+\n+  // 휴게시간용 드롭다운 변경 핸들러\n+  const handleBreakTimeDropdownChange = (\n+    day: keyof typeof weekDaySettings, \n+    index: number, \n+    field: 'start' | 'end', \n+    type: 'hour' | 'minute', \n+    value: string\n+  ) => {\n+    const breakTime = weekDaySettings[day].breakTimes[index];\n+    if (!breakTime) return;\n+    \n+    const currentTime = minutesToHourMinute(breakTime[field]);\n+    let newHour = currentTime.hour;\n+    let newMinute = currentTime.minute;\n+    \n+    if (type === 'hour') {\n+      newHour = parseInt(value, 10);\n+    } else {\n+      newMinute = parseInt(value, 10);\n+    }\n+    \n+    const newMinutes = hourMinuteToMinutes(newHour, newMinute);\n+    \n+    // 시작 시간이 종료 시간보다 늦지 않도록 검증\n+    const otherField = field === 'start' ? 'end' : 'start';\n+    const otherTime = breakTime[otherField];\n+    \n+    let finalMinutes = newMinutes;\n+    if (field === 'start' && newMinutes >= otherTime) {\n+      finalMinutes = otherTime - 30;\n+      if (finalMinutes < 0) finalMinutes = 0;\n+    } else if (field === 'end' && newMinutes <= otherTime) {\n+      finalMinutes = otherTime + 30;\n+      if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n+    }\n+    \n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        breakTimes: prev[day].breakTimes.map((bt, i) => \n+          i === index ? { ...bt, [field]: finalMinutes } : bt\n+        )\n+      }\n+    }));\n+  };\n+\n+  const handleApplyToAll = (sourceDay: keyof typeof weekDaySettings) => {\n+    const sourceSettings = weekDaySettings[sourceDay];\n+    const allDayKeys: (keyof typeof weekDaySettings)[] = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n+    \n+    setWeekDaySettings(prev => {\n+      const newSettings = { ...prev };\n+      \n+      allDayKeys.forEach(dayKey => {\n+        if (dayKey !== sourceDay) {\n+          newSettings[dayKey] = {\n+            ...newSettings[dayKey],\n+            workingHours: { ...sourceSettings.workingHours },\n+            breakTimes: sourceSettings.breakTimes.map(bt => ({ ...bt }))\n+          };\n+        }\n+      });\n+      \n+      return newSettings;\n+    });\n+  };\n+\n+  const handleRemoveBreakTime = (day: keyof typeof weekDaySettings, index: number) => {\n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        breakTimes: prev[day].breakTimes.filter((_, i) => i !== index)\n+      }\n+    }));\n+  };\n+\n+  const handleSave = async () => {\n+    if (selectedStaffIds.length === 0) {\n+      setError('코치를 선택해주세요.');\n+      return;\n+    }\n+\n+    setIsLoading(true);\n+    setError(null);\n+    \n+    try {\n+      // 1. 기존 주별 휴일 설정 저장\n+      const settings: Omit<WeeklyHolidaySettings, 'id' | 'createdAt' | 'updatedAt'>[] = [];\n+      \n+      selectedStaffIds.forEach(staffId => {\n+        settings.push({\n+          staffId,\n+          weekStartDate: currentWeekStartDate,\n+          weekDays: weekDaySettings\n+        });\n+      });\n+      \n+      await onSave(settings);\n+\n+      // 2. 휴일로 체크된 날짜들을 직원의 holidays 배열에 누적\n+      // 체크 해제된 날짜들은 배열에서 제거\n+      const weekStart = new Date(currentWeekStartDate);\n+      const dayKeys = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'] as const;\n+      \n+      for (const staffId of selectedStaffIds) {\n+        const holidayDates: string[] = [];\n+        const removeDates: string[] = [];\n+        \n+        // 각 요일별로 휴일인지 확인하고 날짜 계산\n+        dayKeys.forEach((dayKey, index) => {\n+          const date = new Date(weekStart);\n+          // 월요일부터 시작하므로 index를 그대로 사용\n+          date.setDate(weekStart.getDate() + index);\n+          const dateString = date.toISOString().split('T')[0];\n+          \n+          if (weekDaySettings[dayKey].isHoliday) {\n+            holidayDates.push(dateString);\n+          } else {\n+            removeDates.push(dateString);\n+          }\n+        });\n+        \n+        // 휴일 날짜들을 직원의 holidays 배열에 추가\n+        for (const dateString of holidayDates) {\n+          await dbManager.addStaffHoliday(staffId, dateString);\n+        }\n+        \n+        // 체크 해제된 날짜들을 직원의 holidays 배열에서 제거\n+        for (const dateString of removeDates) {\n+          await dbManager.removeStaffHoliday(staffId, dateString);\n+        }\n+      }\n+      \n+      // 데이터베이스 작업이 완전히 완료되도록 약간의 지연\n+      await new Promise(resolve => setTimeout(resolve, 100));\n+      \n+      // 부모 컴포넌트에 데이터 새로고침 요청\n+      if (onRefresh) {\n+        await onRefresh();\n+      }\n+      \n+      onClose();\n+    } catch (error) {\n+      console.error('주별 휴일 설정 저장 중 오류 발생:', error);\n+      setError('휴일 설정 저장 중 오류가 발생했습니다. 다시 시도해주세요.');\n+    } finally {\n+      setIsLoading(false);\n+    }\n+  };\n+\n+  if (!isOpen) return null;\n+\n+  const dayLabels = [\n+    { key: 'saturday' as const, label: '토요일', isWeekend: true },\n+    { key: 'sunday' as const, label: '일요일', isWeekend: true },\n+    { key: 'monday' as const, label: '월요일', isWeekend: false },\n+    { key: 'tuesday' as const, label: '화요일', isWeekend: false },\n+    { key: 'wednesday' as const, label: '수요일', isWeekend: false },\n+    { key: 'thursday' as const, label: '목요일', isWeekend: false },\n+    { key: 'friday' as const, label: '금요일', isWeekend: false }\n+  ];\n+\n+  return (\n+    <ModalOverlay onClick={onClose}>\n+      <ModalContainer onClick={e => e.stopPropagation()}>\n+        <ModalHeader>\n+          <ModalTitle>\n+            {staffId ? `${staffList.find(s => s.id === staffId)?.name} 코치 휴일설정` : '코치 휴일설정'}\n+          </ModalTitle>\n+          <CloseButton onClick={onClose}>×</CloseButton>\n+        </ModalHeader>\n+        \n+        <ModalBody>\n+          {/* 에러 메시지 표시 */}\n+          {error && (\n+            <ErrorMessage>{error}</ErrorMessage>\n+          )}\n+\n+          {/* 코치 선택 (master 권한인 경우만) */}\n+          {currentUser?.role === 'master' && !staffId && (\n+            <StaffSelector>\n+              <SelectorTitle>코치 선택</SelectorTitle>\n+              {staffList.map(staff => (\n+                <StaffCheckbox key={staff.id}>\n+                  <input\n+                    type=\"checkbox\"\n+                    id={`staff-${staff.id}`}\n+                    checked={selectedStaffIds.includes(staff.id)}\n+                    onChange={() => handleStaffToggle(staff.id)}\n+                  />\n+                  <label htmlFor={`staff-${staff.id}`}>{staff.name}</label>\n+                </StaffCheckbox>\n+              ))}\n+            </StaffSelector>\n+          )}\n+\n+\n+\n+          {/* 주별 휴일설정 */}\n+          <WeekSection>\n+            <WeekNavigationContainer>\n+              <WeekTitle>\n+                설정 대상 주: {getWeekDateRange()}\n+              </WeekTitle>\n+            </WeekNavigationContainer>\n+            \n+            <div style={{ fontSize: '14px', marginBottom: '12px', color: AppColors.onSurface + '80' }}>\n+              휴일설정은 다음 토요일부터 그 다음주 금요일까지에 대한 결정입니다.\n+              <br />\n+              체크하면 휴일, 체크 해제하면 근무일입니다.\n+            </div>\n+            \n+            <WeekDaysContainer>\n+              {dayLabels.map(({ key, label, isWeekend }) => {\n+                const daySettings = weekDaySettings[key];\n+                \n+                // 토요일부터 시작하는 주간에서 각 요일의 날짜 계산\n+                const mondayDate = new Date(currentWeekStartDate);\n+                const saturdayDate = new Date(mondayDate);\n+                saturdayDate.setDate(mondayDate.getDate() - 2); // 월요일 - 2일 = 토요일\n+                \n+                // 토요일부터의 요일 순서로 계산\n+                const dayOrder = ['saturday', 'sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday'];\n+                const dayIndex = dayOrder.indexOf(key);\n+                const currentDate = new Date(saturdayDate);\n+                currentDate.setDate(saturdayDate.getDate() + dayIndex);\n+                \n+                return (\n+                  <WeekDay key={key} $isWeekend={isWeekend} $isHoliday={daySettings.isHoliday}>\n+                    <DayLabel $isWeekend={isWeekend} $isHoliday={daySettings.isHoliday}>\n+                      <span>{label} ({currentDate.getMonth() + 1}/{currentDate.getDate()})</span>\n+                      <DayToggle>\n+                        <input\n+                          type=\"checkbox\"\n+                          id={`holiday-${key}`}\n+                          checked={daySettings.isHoliday}\n+                          onChange={() => {\n+                            console.log('Checkbox clicked for:', key);\n+                            handleDayToggle(key);\n+                          }}\n+                        />\n+                        <label htmlFor={`holiday-${key}`}>휴일</label>\n+                      </DayToggle>\n+                    </DayLabel>\n+                    \n+                    {!daySettings.isHoliday && (\n+                      <WorkingHoursSection $isVisible={!daySettings.isHoliday}>\n+                        <WorkingHoursLabel>\n+                          근무 시간\n+                          <div style={{ display: 'flex', alignItems: 'center' }}>\n+                            <WorkingHoursInputs>\n+                              <TimeSelectContainer>\n+                                <HourSelect\n+                                  value={minutesToHourMinute(daySettings.workingHours.start).hour}\n+                                  onChange={(e) => handleTimeDropdownChange(key, 'start', 'hour', e.target.value)}\n+                                >\n+                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                  ))}\n+                                </HourSelect>\n+                                <span>:</span>\n+                                <MinuteSelect\n+                                  value={minutesToHourMinute(daySettings.workingHours.start).minute}\n+                                  onChange={(e) => handleTimeDropdownChange(key, 'start', 'minute', e.target.value)}\n+                                >\n+                                  <option value={0}>00</option>\n+                                  <option value={30}>30</option>\n+                                </MinuteSelect>\n+                              </TimeSelectContainer>\n+                              <span>~</span>\n+                              <TimeSelectContainer>\n+                                <HourSelect\n+                                  value={minutesToHourMinute(daySettings.workingHours.end).hour}\n+                                  onChange={(e) => handleTimeDropdownChange(key, 'end', 'hour', e.target.value)}\n+                                >\n+                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                  ))}\n+                                </HourSelect>\n+                                <span>:</span>\n+                                <MinuteSelect\n+                                  value={minutesToHourMinute(daySettings.workingHours.end).minute}\n+                                  onChange={(e) => handleTimeDropdownChange(key, 'end', 'minute', e.target.value)}\n+                                >\n+                                  <option value={0}>00</option>\n+                                  <option value={30}>30</option>\n+                                </MinuteSelect>\n+                              </TimeSelectContainer>\n+                            </WorkingHoursInputs>\n+                            <ApplyToAllButton onClick={() => handleApplyToAll(key)}>\n+                              모두적용\n+                            </ApplyToAllButton>\n+                          </div>\n+                        </WorkingHoursLabel>\n+                        \n+                        <BreakTimesSection>\n+                          <BreakTimesLabel>\n+                            휴게 시간\n+                            <AddBreakTimeButton onClick={() => handleAddBreakTime(key)}>\n+                              + 추가\n+                            </AddBreakTimeButton>\n+                          </BreakTimesLabel>\n+                          {daySettings.breakTimes && daySettings.breakTimes.map((breakTime, index) => (\n+                            <BreakTimeRow key={index}>\n+                              <BreakTimeInput\n+                                type=\"text\"\n+                                placeholder=\"휴게시간명\"\n+                                value={breakTime.name}\n+                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleBreakTimeChange(key, index, 'name', e.target.value)}\n+                              />\n+                              <TimeSelectContainer>\n+                                <HourSelect\n+                                  value={minutesToHourMinute(breakTime.start).hour}\n+                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'start', 'hour', e.target.value)}\n+                                >\n+                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                  ))}\n+                                </HourSelect>\n+                                <span>:</span>\n+                                <MinuteSelect\n+                                  value={minutesToHourMinute(breakTime.start).minute}\n+                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'start', 'minute', e.target.value)}\n+                                >\n+                                  <option value={0}>00</option>\n+                                  <option value={30}>30</option>\n+                                </MinuteSelect>\n+                              </TimeSelectContainer>\n+                              <span>~</span>\n+                              <TimeSelectContainer>\n+                                <HourSelect\n+                                  value={minutesToHourMinute(breakTime.end).hour}\n+                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'end', 'hour', e.target.value)}\n+                                >\n+                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                  ))}\n+                                </HourSelect>\n+                                <span>:</span>\n+                                <MinuteSelect\n+                                  value={minutesToHourMinute(breakTime.end).minute}\n+                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'end', 'minute', e.target.value)}\n+                                >\n+                                  <option value={0}>00</option>\n+                                  <option value={30}>30</option>\n+                                </MinuteSelect>\n+                              </TimeSelectContainer>\n+                              <RemoveBreakTimeButton onClick={() => handleRemoveBreakTime(key, index)}>\n+                                삭제\n+                              </RemoveBreakTimeButton>\n+                            </BreakTimeRow>\n+                          ))}\n+                        </BreakTimesSection>\n+                      </WorkingHoursSection>\n+                    )}\n+                  </WeekDay>\n+                );\n+              })}\n+            </WeekDaysContainer>\n+          </WeekSection>\n+        </ModalBody>\n+\n+        <ModalFooter>\n+          <Button $variant=\"secondary\" onClick={onClose} $disabled={isLoading}>\n+            취소\n+          </Button>\n+          <Button $variant=\"primary\" onClick={handleSave} $disabled={isLoading || selectedStaffIds.length === 0}>\n+            {isLoading ? '저장 중...' : '저장'}\n+          </Button>\n+        </ModalFooter>\n+      </ModalContainer>\n+    </ModalOverlay>\n+  );\n+};\n+\n+export default WeeklyHolidayModal;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1762256245214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -451,49 +451,56 @@\n \n   const [selectedStaffIds, setSelectedStaffIds] = useState<string[]>([]);\n   const [currentWeekStartDate, setCurrentWeekStartDate] = useState('');\n   const [weekDaySettings, setWeekDaySettings] = useState<{\n-    monday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    tuesday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    wednesday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    thursday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    friday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    saturday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    sunday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    monday: { isHoliday: boolean; workingHours: { start: number; end: number; }; lunchTime: { start: number; end: number; name: string; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    tuesday: { isHoliday: boolean; workingHours: { start: number; end: number; }; lunchTime: { start: number; end: number; name: string; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    wednesday: { isHoliday: boolean; workingHours: { start: number; end: number; }; lunchTime: { start: number; end: number; name: string; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    thursday: { isHoliday: boolean; workingHours: { start: number; end: number; }; lunchTime: { start: number; end: number; name: string; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    friday: { isHoliday: boolean; workingHours: { start: number; end: number; }; lunchTime: { start: number; end: number; name: string; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    saturday: { isHoliday: boolean; workingHours: { start: number; end: number; }; lunchTime: { start: number; end: number; name: string; }; breakTimes: { start: number; end: number; name: string; }[]; };\n+    sunday: { isHoliday: boolean; workingHours: { start: number; end: number; }; lunchTime: { start: number; end: number; name: string; }; breakTimes: { start: number; end: number; name: string; }[]; };\n   }>({\n     monday: {\n       isHoliday: false,\n       workingHours: { start: 540, end: 1260 }, // 09:00 ~ 21:00 (분 단위)\n+      lunchTime: { start: 720, end: 780, name: '점심시간' }, // 12:00 ~ 13:00 기본 점심시간\n       breakTimes: []\n     },\n     tuesday: {\n       isHoliday: false,\n       workingHours: { start: 540, end: 1260 },\n+      lunchTime: { start: 720, end: 780, name: '점심시간' },\n       breakTimes: []\n     },\n     wednesday: {\n       isHoliday: false,\n       workingHours: { start: 540, end: 1260 },\n+      lunchTime: { start: 720, end: 780, name: '점심시간' },\n       breakTimes: []\n     },\n     thursday: {\n       isHoliday: false,\n       workingHours: { start: 540, end: 1260 },\n+      lunchTime: { start: 720, end: 780, name: '점심시간' },\n       breakTimes: []\n     },\n     friday: {\n       isHoliday: false,\n       workingHours: { start: 540, end: 1260 },\n+      lunchTime: { start: 720, end: 780, name: '점심시간' },\n       breakTimes: []\n     },\n     saturday: {\n       isHoliday: true,  // 기본값: 주말 휴일\n       workingHours: { start: 540, end: 1260 },\n+      lunchTime: { start: 720, end: 780, name: '점심시간' },\n       breakTimes: []\n     },\n     sunday: {\n       isHoliday: true,  // 기본값: 주말 휴일\n       workingHours: { start: 540, end: 1260 },\n+      lunchTime: { start: 720, end: 780, name: '점심시간' },\n       breakTimes: []\n     }\n   });\n   const [isLoading, setIsLoading] = useState(false);\n@@ -580,8 +587,9 @@\n         const normalizedWeekDays = {\n           monday: {\n             isHoliday: existingSetting.weekDays.monday?.isHoliday ?? false,\n             workingHours: existingSetting.weekDays.monday?.workingHours ?? { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' }, // 기본 점심시간 (기존 데이터에는 없으므로 항상 기본값)\n             breakTimes: (existingSetting.weekDays.monday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n@@ -589,8 +597,9 @@\n           },\n           tuesday: {\n             isHoliday: existingSetting.weekDays.tuesday?.isHoliday ?? false,\n             workingHours: existingSetting.weekDays.tuesday?.workingHours ?? { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: (existingSetting.weekDays.tuesday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n@@ -598,8 +607,9 @@\n           },\n           wednesday: {\n             isHoliday: existingSetting.weekDays.wednesday?.isHoliday ?? false,\n             workingHours: existingSetting.weekDays.wednesday?.workingHours ?? { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: (existingSetting.weekDays.wednesday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n@@ -607,8 +617,9 @@\n           },\n           thursday: {\n             isHoliday: existingSetting.weekDays.thursday?.isHoliday ?? false,\n             workingHours: existingSetting.weekDays.thursday?.workingHours ?? { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: (existingSetting.weekDays.thursday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n@@ -616,8 +627,9 @@\n           },\n           friday: {\n             isHoliday: existingSetting.weekDays.friday?.isHoliday ?? false,\n             workingHours: existingSetting.weekDays.friday?.workingHours ?? { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: (existingSetting.weekDays.friday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n@@ -625,8 +637,9 @@\n           },\n           saturday: {\n             isHoliday: existingSetting.weekDays.saturday?.isHoliday ?? true,\n             workingHours: existingSetting.weekDays.saturday?.workingHours ?? { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: (existingSetting.weekDays.saturday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n@@ -634,8 +647,9 @@\n           },\n           sunday: {\n             isHoliday: existingSetting.weekDays.sunday?.isHoliday ?? true,\n             workingHours: existingSetting.weekDays.sunday?.workingHours ?? { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: (existingSetting.weekDays.sunday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n@@ -650,38 +664,45 @@\n         setWeekDaySettings({\n           monday: {\n             isHoliday: false,\n             workingHours: { start: 540, end: 1260 }, // 09:00 ~ 21:00\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: []\n           },\n           tuesday: {\n             isHoliday: false,\n             workingHours: { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: []\n           },\n           wednesday: {\n             isHoliday: false,\n             workingHours: { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: []\n           },\n           thursday: {\n             isHoliday: false,\n             workingHours: { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: []\n           },\n           friday: {\n             isHoliday: false,\n             workingHours: { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: []\n           },\n           saturday: {\n             isHoliday: true,\n             workingHours: { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: []\n           },\n           sunday: {\n             isHoliday: true,\n             workingHours: { start: 540, end: 1260 },\n+            lunchTime: { start: 720, end: 780, name: '점심시간' },\n             breakTimes: []\n           }\n         });\n       }\n@@ -714,8 +735,14 @@\n             ? { start: 0, end: 0 } \n             : (currentDay.workingHours.start === 0 && currentDay.workingHours.end === 0 \n                ? { start: 540, end: 1260 } // 기본값: 09:00 ~ 21:00\n                : currentDay.workingHours),\n+          // 휴일로 설정할 때 점심시간 비움, 해제할 때 기본 점심시간\n+          lunchTime: newIsHoliday \n+            ? { start: 0, end: 0, name: '점심시간' }\n+            : (currentDay.lunchTime.start === 0 && currentDay.lunchTime.end === 0\n+               ? { start: 720, end: 780, name: '점심시간' } // 기본값: 12:00 ~ 13:00\n+               : currentDay.lunchTime),\n           breakTimes: newIsHoliday ? [] : currentDay.breakTimes\n         }\n       };\n       console.log('new state for', day, ':', newState[day]);\n@@ -756,8 +783,18 @@\n       finalMinutes = otherTime + 30; // 최소 30분 차이\n       if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n     }\n     \n+    // 새로운 근무시간이 다른 시간들과 겹치는지 체크\n+    const newStart = field === 'start' ? finalMinutes : weekDaySettings[day].workingHours.start;\n+    const newEnd = field === 'end' ? finalMinutes : weekDaySettings[day].workingHours.end;\n+    const overlapError = checkTimeOverlap(day, newStart, newEnd, 'working');\n+    \n+    if (overlapError) {\n+      alert(overlapError);\n+      return;\n+    }\n+    \n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n         ...prev[day],\n@@ -768,1208 +805,179 @@\n       }\n     }));\n   };\n \n-\n-\n-\n-\n-  const handleAddBreakTime = (day: keyof typeof weekDaySettings) => {\n-    setWeekDaySettings(prev => ({\n-      ...prev,\n-      [day]: {\n-        ...prev[day],\n-        breakTimes: [\n-          ...prev[day].breakTimes,\n-          { start: 720, end: 780, name: '점심시간' } // 12:00 ~ 13:00\n-        ]\n-      }\n-    }));\n-  };\n-\n-  const handleBreakTimeChange = (\n+  // 점심시간 변경 핸들러\n+  const handleLunchTimeDropdownChange = (\n     day: keyof typeof weekDaySettings, \n-    index: number, \n-    field: 'start' | 'end' | 'name', \n-    value: number | string\n-  ) => {\n-    setWeekDaySettings(prev => ({\n-      ...prev,\n-      [day]: {\n-        ...prev[day],\n-        breakTimes: prev[day].breakTimes.map((breakTime, i) => {\n-          if (i === index) {\n-            if (field === 'start' || field === 'end') {\n-              // 시간 필드인 경우 숫자 그대로 사용 (이미 분 단위)\n-              const timeValue = typeof value === 'number' ? value : parseInt(value as string, 10);\n-              return { ...breakTime, [field]: timeValue };\n-            } else {\n-              // 이름 필드인 경우 그대로\n-              return { ...breakTime, [field]: value };\n-            }\n-          }\n-          return breakTime;\n-        })\n-      }\n-    }));\n-  };\n-\n-  // 휴게시간용 드롭다운 변경 핸들러\n-  const handleBreakTimeDropdownChange = (\n-    day: keyof typeof weekDaySettings, \n-    index: number, \n     field: 'start' | 'end', \n     type: 'hour' | 'minute', \n     value: string\n   ) => {\n-    const breakTime = weekDaySettings[day].breakTimes[index];\n-    if (!breakTime) return;\n+    const currentLunchTime = weekDaySettings[day].lunchTime;\n+    const currentHour = field === 'start' ? \n+      Math.floor(currentLunchTime.start / 60) : Math.floor(currentLunchTime.end / 60);\n+    const currentMinute = field === 'start' ? \n+      currentLunchTime.start % 60 : currentLunchTime.end % 60;\n     \n-    const currentTime = minutesToHourMinute(breakTime[field]);\n-    let newHour = currentTime.hour;\n-    let newMinute = currentTime.minute;\n+    const newHour = type === 'hour' ? parseInt(value) : currentHour;\n+    const newMinute = type === 'minute' ? parseInt(value) : currentMinute;\n     \n-    if (type === 'hour') {\n-      newHour = parseInt(value, 10);\n-    } else {\n-      newMinute = parseInt(value, 10);\n+    // 유효성 검사\n+    if (newHour < 0 || newHour > 23 || newMinute < 0 || newMinute > 59) {\n+      return;\n     }\n     \n     const newMinutes = hourMinuteToMinutes(newHour, newMinute);\n     \n     // 시작 시간이 종료 시간보다 늦지 않도록 검증\n     const otherField = field === 'start' ? 'end' : 'start';\n-    const otherTime = breakTime[otherField];\n+    const otherTime = weekDaySettings[day].lunchTime[otherField];\n     \n     let finalMinutes = newMinutes;\n     if (field === 'start' && newMinutes >= otherTime) {\n-      finalMinutes = otherTime - 30;\n+      finalMinutes = otherTime - 30; // 최소 30분 차이\n       if (finalMinutes < 0) finalMinutes = 0;\n     } else if (field === 'end' && newMinutes <= otherTime) {\n-      finalMinutes = otherTime + 30;\n+      finalMinutes = otherTime + 30; // 최소 30분 차이\n       if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n     }\n     \n+    // 새로운 점심시간이 다른 시간들과 겹치는지 체크\n+    const newStart = field === 'start' ? finalMinutes : weekDaySettings[day].lunchTime.start;\n+    const newEnd = field === 'end' ? finalMinutes : weekDaySettings[day].lunchTime.end;\n+    const overlapError = checkTimeOverlap(day, newStart, newEnd, 'lunch');\n+    \n+    if (overlapError) {\n+      alert(overlapError);\n+      return;\n+    }\n+    \n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n         ...prev[day],\n-        breakTimes: prev[day].breakTimes.map((bt, i) => \n-          i === index ? { ...bt, [field]: finalMinutes } : bt\n-        )\n+        lunchTime: {\n+          ...prev[day].lunchTime,\n+          [field]: finalMinutes\n+        }\n       }\n     }));\n   };\n \n-  const handleApplyToAll = (sourceDay: keyof typeof weekDaySettings) => {\n-    const sourceSettings = weekDaySettings[sourceDay];\n-    const allDayKeys: (keyof typeof weekDaySettings)[] = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n-    \n+  // 모든 요일에 점심시간 적용\n+  const applyLunchTimeToAll = (sourceDay: keyof typeof weekDaySettings) => {\n+    const sourceLunchTime = weekDaySettings[sourceDay].lunchTime;\n     setWeekDaySettings(prev => {\n-      const newSettings = { ...prev };\n-      \n-      allDayKeys.forEach(dayKey => {\n-        if (dayKey !== sourceDay) {\n-          newSettings[dayKey] = {\n-            ...newSettings[dayKey],\n-            workingHours: { ...sourceSettings.workingHours },\n-            breakTimes: sourceSettings.breakTimes.map(bt => ({ ...bt }))\n+      const newState = { ...prev };\n+      Object.keys(newState).forEach(key => {\n+        const dayKey = key as keyof typeof weekDaySettings;\n+        if (!newState[dayKey].isHoliday) { // 휴일이 아닌 경우만 적용\n+          newState[dayKey] = {\n+            ...newState[dayKey],\n+            lunchTime: { ...sourceLunchTime }\n           };\n         }\n       });\n-      \n-      return newSettings;\n+      return newState;\n     });\n   };\n \n-  const handleRemoveBreakTime = (day: keyof typeof weekDaySettings, index: number) => {\n-    setWeekDaySettings(prev => ({\n-      ...prev,\n-      [day]: {\n-        ...prev[day],\n-        breakTimes: prev[day].breakTimes.filter((_, i) => i !== index)\n-      }\n-    }));\n+  // 모든 요일에 근무시간 적용\n+  const applyWorkingHoursToAll = (sourceDay: keyof typeof weekDaySettings) => {\n+    const sourceWorkingHours = weekDaySettings[sourceDay].workingHours;\n+    setWeekDaySettings(prev => {\n+      const newState = { ...prev };\n+      Object.keys(newState).forEach(key => {\n+        const dayKey = key as keyof typeof weekDaySettings;\n+        if (!newState[dayKey].isHoliday) { // 휴일이 아닌 경우만 적용\n+          newState[dayKey] = {\n+            ...newState[dayKey],\n+            workingHours: { ...sourceWorkingHours }\n+          };\n+        }\n+      });\n+      return newState;\n+    });\n   };\n \n-  const handleSave = async () => {\n-    if (selectedStaffIds.length === 0) {\n-      setError('코치를 선택해주세요.');\n-      return;\n+  // 시간 중복 체크 함수\n+  const checkTimeOverlap = (day: keyof typeof weekDaySettings, newStart: number, newEnd: number, excludeType?: 'working' | 'lunch' | 'break', excludeIndex?: number): string | null => {\n+    const daySettings = weekDaySettings[day];\n+    \n+    // 새로운 시간이 유효한지 체크\n+    if (newStart >= newEnd) {\n+      return '시작 시간이 종료 시간보다 늦거나 같을 수 없습니다.';\n     }\n-\n-    setIsLoading(true);\n-    setError(null);\n     \n-    try {\n-      // 1. 기존 주별 휴일 설정 저장\n-      const settings: Omit<WeeklyHolidaySettings, 'id' | 'createdAt' | 'updatedAt'>[] = [];\n-      \n-      selectedStaffIds.forEach(staffId => {\n-        settings.push({\n-          staffId,\n-          weekStartDate: currentWeekStartDate,\n-          weekDays: weekDaySettings\n-        });\n-      });\n-      \n-      await onSave(settings);\n-\n-      // 2. 휴일로 체크된 날짜들을 직원의 holidays 배열에 누적\n-      // 체크 해제된 날짜들은 배열에서 제거\n-      const weekStart = new Date(currentWeekStartDate);\n-      const dayKeys = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'] as const;\n-      \n-      for (const staffId of selectedStaffIds) {\n-        const holidayDates: string[] = [];\n-        const removeDates: string[] = [];\n-        \n-        // 각 요일별로 휴일인지 확인하고 날짜 계산\n-        dayKeys.forEach((dayKey, index) => {\n-          const date = new Date(weekStart);\n-          // 월요일부터 시작하므로 index를 그대로 사용\n-          date.setDate(weekStart.getDate() + index);\n-          const dateString = date.toISOString().split('T')[0];\n-          \n-          if (weekDaySettings[dayKey].isHoliday) {\n-            holidayDates.push(dateString);\n-          } else {\n-            removeDates.push(dateString);\n-          }\n-        });\n-        \n-        // 휴일 날짜들을 직원의 holidays 배열에 추가\n-        for (const dateString of holidayDates) {\n-          await dbManager.addStaffHoliday(staffId, dateString);\n+    // 근무시간과 겹치는지 체크 (근무시간 수정 시에는 제외)\n+    if (excludeType !== 'working') {\n+      const workingHours = daySettings.workingHours;\n+      if (workingHours.start < workingHours.end) { // 유효한 근무시간이 있는 경우\n+        if (!(newEnd <= workingHours.start || newStart >= workingHours.end)) {\n+          return '근무시간과 겹칠 수 없습니다.';\n         }\n-        \n-        // 체크 해제된 날짜들을 직원의 holidays 배열에서 제거\n-        for (const dateString of removeDates) {\n-          await dbManager.removeStaffHoliday(staffId, dateString);\n-        }\n       }\n-      \n-      // 데이터베이스 작업이 완전히 완료되도록 약간의 지연\n-      await new Promise(resolve => setTimeout(resolve, 100));\n-      \n-      // 부모 컴포넌트에 데이터 새로고침 요청\n-      if (onRefresh) {\n-        await onRefresh();\n-      }\n-      \n-      onClose();\n-    } catch (error) {\n-      console.error('주별 휴일 설정 저장 중 오류 발생:', error);\n-      setError('휴일 설정 저장 중 오류가 발생했습니다. 다시 시도해주세요.');\n-    } finally {\n-      setIsLoading(false);\n     }\n-  };\n-\n-  if (!isOpen) return null;\n-\n-  const dayLabels = [\n-    { key: 'saturday' as const, label: '토요일', isWeekend: true },\n-    { key: 'sunday' as const, label: '일요일', isWeekend: true },\n-    { key: 'monday' as const, label: '월요일', isWeekend: false },\n-    { key: 'tuesday' as const, label: '화요일', isWeekend: false },\n-    { key: 'wednesday' as const, label: '수요일', isWeekend: false },\n-    { key: 'thursday' as const, label: '목요일', isWeekend: false },\n-    { key: 'friday' as const, label: '금요일', isWeekend: false }\n-  ];\n-\n-  return (\n-    <ModalOverlay onClick={onClose}>\n-      <ModalContainer onClick={e => e.stopPropagation()}>\n-        <ModalHeader>\n-          <ModalTitle>\n-            {staffId ? `${staffList.find(s => s.id === staffId)?.name} 코치 휴일설정` : '코치 휴일설정'}\n-          </ModalTitle>\n-          <CloseButton onClick={onClose}>×</CloseButton>\n-        </ModalHeader>\n-        \n-        <ModalBody>\n-          {/* 에러 메시지 표시 */}\n-          {error && (\n-            <ErrorMessage>{error}</ErrorMessage>\n-          )}\n-\n-          {/* 코치 선택 (master 권한인 경우만) */}\n-          {currentUser?.role === 'master' && !staffId && (\n-            <StaffSelector>\n-              <SelectorTitle>코치 선택</SelectorTitle>\n-              {staffList.map(staff => (\n-                <StaffCheckbox key={staff.id}>\n-                  <input\n-                    type=\"checkbox\"\n-                    id={`staff-${staff.id}`}\n-                    checked={selectedStaffIds.includes(staff.id)}\n-                    onChange={() => handleStaffToggle(staff.id)}\n-                  />\n-                  <label htmlFor={`staff-${staff.id}`}>{staff.name}</label>\n-                </StaffCheckbox>\n-              ))}\n-            </StaffSelector>\n-          )}\n-\n-\n-\n-          {/* 주별 휴일설정 */}\n-          <WeekSection>\n-            <WeekNavigationContainer>\n-              <WeekTitle>\n-                설정 대상 주: {getWeekDateRange()}\n-              </WeekTitle>\n-            </WeekNavigationContainer>\n-            \n-            <div style={{ fontSize: '14px', marginBottom: '12px', color: AppColors.onSurface + '80' }}>\n-              휴일설정은 다음 토요일부터 그 다음주 금요일까지에 대한 결정입니다.\n-              <br />\n-              체크하면 휴일, 체크 해제하면 근무일입니다.\n-            </div>\n-            \n-            <WeekDaysContainer>\n-              {dayLabels.map(({ key, label, isWeekend }) => {\n-                const daySettings = weekDaySettings[key];\n-                \n-                // 토요일부터 시작하는 주간에서 각 요일의 날짜 계산\n-                const mondayDate = new Date(currentWeekStartDate);\n-                const saturdayDate = new Date(mondayDate);\n-                saturdayDate.setDate(mondayDate.getDate() - 2); // 월요일 - 2일 = 토요일\n-                \n-                // 토요일부터의 요일 순서로 계산\n-                const dayOrder = ['saturday', 'sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday'];\n-                const dayIndex = dayOrder.indexOf(key);\n-                const currentDate = new Date(saturdayDate);\n-                currentDate.setDate(saturdayDate.getDate() + dayIndex);\n-                \n-                return (\n-                  <WeekDay key={key} $isWeekend={isWeekend} $isHoliday={daySettings.isHoliday}>\n-                    <DayLabel $isWeekend={isWeekend} $isHoliday={daySettings.isHoliday}>\n-                      <span>{label} ({currentDate.getMonth() + 1}/{currentDate.getDate()})</span>\n-                      <DayToggle>\n-                        <input\n-                          type=\"checkbox\"\n-                          id={`holiday-${key}`}\n-                          checked={daySettings.isHoliday}\n-                          onChange={() => {\n-                            console.log('Checkbox clicked for:', key);\n-                            handleDayToggle(key);\n-                          }}\n-                        />\n-                        <label htmlFor={`holiday-${key}`}>휴일</label>\n-                      </DayToggle>\n-                    </DayLabel>\n-                    \n-                    {!daySettings.isHoliday && (\n-                      <WorkingHoursSection $isVisible={!daySettings.isHoliday}>\n-                        <WorkingHoursLabel>\n-                          근무 시간\n-                          <div style={{ display: 'flex', alignItems: 'center' }}>\n-                            <WorkingHoursInputs>\n-                              <TimeSelectContainer>\n-                                <HourSelect\n-                                  value={minutesToHourMinute(daySettings.workingHours.start).hour}\n-                                  onChange={(e) => handleTimeDropdownChange(key, 'start', 'hour', e.target.value)}\n-                                >\n-                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n-                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n-                                  ))}\n-                                </HourSelect>\n-                                <span>:</span>\n-                                <MinuteSelect\n-                                  value={minutesToHourMinute(daySettings.workingHours.start).minute}\n-                                  onChange={(e) => handleTimeDropdownChange(key, 'start', 'minute', e.target.value)}\n-                                >\n-                                  <option value={0}>00</option>\n-                                  <option value={30}>30</option>\n-                                </MinuteSelect>\n-                              </TimeSelectContainer>\n-                              <span>~</span>\n-                              <TimeSelectContainer>\n-                                <HourSelect\n-                                  value={minutesToHourMinute(daySettings.workingHours.end).hour}\n-                                  onChange={(e) => handleTimeDropdownChange(key, 'end', 'hour', e.target.value)}\n-                                >\n-                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n-                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n-                                  ))}\n-                                </HourSelect>\n-                                <span>:</span>\n-                                <MinuteSelect\n-                                  value={minutesToHourMinute(daySettings.workingHours.end).minute}\n-                                  onChange={(e) => handleTimeDropdownChange(key, 'end', 'minute', e.target.value)}\n-                                >\n-                                  <option value={0}>00</option>\n-                                  <option value={30}>30</option>\n-                                </MinuteSelect>\n-                              </TimeSelectContainer>\n-                            </WorkingHoursInputs>\n-                            <ApplyToAllButton onClick={() => handleApplyToAll(key)}>\n-                              모두적용\n-                            </ApplyToAllButton>\n-                          </div>\n-                        </WorkingHoursLabel>\n-                        \n-                        <BreakTimesSection>\n-                          <BreakTimesLabel>\n-                            휴게 시간\n-                            <AddBreakTimeButton onClick={() => handleAddBreakTime(key)}>\n-                              + 추가\n-                            </AddBreakTimeButton>\n-                          </BreakTimesLabel>\n-                          {daySettings.breakTimes && daySettings.breakTimes.map((breakTime, index) => (\n-                            <BreakTimeRow key={index}>\n-                              <BreakTimeInput\n-                                type=\"text\"\n-                                placeholder=\"휴게시간명\"\n-                                value={breakTime.name}\n-                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleBreakTimeChange(key, index, 'name', e.target.value)}\n-                              />\n-                              <TimeSelectContainer>\n-                                <HourSelect\n-                                  value={minutesToHourMinute(breakTime.start).hour}\n-                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'start', 'hour', e.target.value)}\n-                                >\n-                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n-                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n-                                  ))}\n-                                </HourSelect>\n-                                <span>:</span>\n-                                <MinuteSelect\n-                                  value={minutesToHourMinute(breakTime.start).minute}\n-                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'start', 'minute', e.target.value)}\n-                                >\n-                                  <option value={0}>00</option>\n-                                  <option value={30}>30</option>\n-                                </MinuteSelect>\n-                              </TimeSelectContainer>\n-                              <span>~</span>\n-                              <TimeSelectContainer>\n-                                <HourSelect\n-                                  value={minutesToHourMinute(breakTime.end).hour}\n-                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'end', 'hour', e.target.value)}\n-                                >\n-                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n-                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n-                                  ))}\n-                                </HourSelect>\n-                                <span>:</span>\n-                                <MinuteSelect\n-                                  value={minutesToHourMinute(breakTime.end).minute}\n-                                  onChange={(e) => handleBreakTimeDropdownChange(key, index, 'end', 'minute', e.target.value)}\n-                                >\n-                                  <option value={0}>00</option>\n-                                  <option value={30}>30</option>\n-                                </MinuteSelect>\n-                              </TimeSelectContainer>\n-                              <RemoveBreakTimeButton onClick={() => handleRemoveBreakTime(key, index)}>\n-                                삭제\n-                              </RemoveBreakTimeButton>\n-                            </BreakTimeRow>\n-                          ))}\n-                        </BreakTimesSection>\n-                      </WorkingHoursSection>\n-                    )}\n-                  </WeekDay>\n-                );\n-              })}\n-            </WeekDaysContainer>\n-          </WeekSection>\n-        </ModalBody>\n-\n-        <ModalFooter>\n-          <Button $variant=\"secondary\" onClick={onClose} $disabled={isLoading}>\n-            취소\n-          </Button>\n-          <Button $variant=\"primary\" onClick={handleSave} $disabled={isLoading || selectedStaffIds.length === 0}>\n-            {isLoading ? '저장 중...' : '저장'}\n-          </Button>\n-        </ModalFooter>\n-      </ModalContainer>\n-    </ModalOverlay>\n-  );\n-};\n-\n-export default WeeklyHolidayModal;\n-import React, { useState, useEffect } from 'react';\n-import styled from 'styled-components';\n-import { AppColors } from '../../styles/colors';\n-import { AppTextStyles } from '../../styles/textStyles';\n-import { dbManager } from '../../utils/indexedDB';\n-import type { WeeklyHolidaySettings } from '../../utils/db/types';\n-\n-interface WeeklyHolidayModalProps {\n-  isOpen: boolean;\n-  onClose: () => void;\n-  staffId?: string; // undefined면 전체 코치\n-  staffList: Array<{\n-    id: string;\n-    name: string;\n-    contractStartDate?: Date; // 계약 시작일\n-    contractEndDate?: Date; // 계약 종료일\n-    workingHours?: {\n-      start: number;\n-      end: number;\n-    };\n-  }>;\n-  currentUser?: {\n-    id: string;\n-    role: 'master' | 'coach' | 'admin';\n-  };\n-  onSave: (settings: Omit<WeeklyHolidaySettings, 'id' | 'createdAt' | 'updatedAt'>[]) => Promise<void>;\n-  existingWeeklyHolidays?: WeeklyHolidaySettings[]; // 기존 주별 휴일 설정 데이터\n-  onRefresh?: () => Promise<void>; // 데이터 새로고침 콜백\n-}\n-\n-const ModalOverlay = styled.div`\n-  position: fixed;\n-  top: 0;\n-  left: 0;\n-  right: 0;\n-  bottom: 0;\n-  background-color: rgba(0, 0, 0, 0.5);\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  z-index: 1000;\n-`;\n-\n-const ModalContainer = styled.div`\n-  background-color: ${AppColors.surface};\n-  border-radius: 12px;\n-  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n-  width: 90%;\n-  max-width: 600px;\n-  max-height: 80vh;\n-  overflow: hidden;\n-  display: flex;\n-  flex-direction: column;\n-`;\n-\n-const ModalHeader = styled.div`\n-  padding: 24px;\n-  border-bottom: 1px solid ${AppColors.borderLight};\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-`;\n-\n-const ModalTitle = styled.h2`\n-  font-size: ${AppTextStyles.headline3.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onSurface};\n-  margin: 0;\n-`;\n-\n-const CloseButton = styled.button`\n-  background: none;\n-  border: none;\n-  font-size: 24px;\n-  color: ${AppColors.onSurface};\n-  cursor: pointer;\n-  padding: 4px;\n-  \n-  &:hover {\n-    color: ${AppColors.primary};\n-  }\n-`;\n-\n-const ModalBody = styled.div`\n-  padding: 20px;\n-  overflow-y: auto;\n-  flex: 1;\n-  max-height: 70vh;\n-`;\n-\n-const ModalFooter = styled.div`\n-  padding: 20px 24px;\n-  border-top: 1px solid ${AppColors.borderLight};\n-  display: flex;\n-  justify-content: flex-end;\n-  gap: 12px;\n-`;\n-\n-const ErrorMessage = styled.div`\n-  background-color: ${AppColors.error}15;\n-  color: ${AppColors.error};\n-  padding: 12px;\n-  border-radius: 8px;\n-  margin-bottom: 16px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-`;\n-\n-const StaffSelector = styled.div`\n-  margin-bottom: 24px;\n-`;\n-\n-const SelectorTitle = styled.h4`\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onSurface};\n-  margin: 0 0 12px 0;\n-`;\n-\n-const StaffCheckbox = styled.div`\n-  display: flex;\n-  align-items: center;\n-  margin-bottom: 8px;\n-  \n-  input[type=\"checkbox\"] {\n-    margin-right: 8px;\n-  }\n-  \n-  label {\n-    font-size: ${AppTextStyles.body2.fontSize};\n-    color: ${AppColors.onSurface};\n-    cursor: pointer;\n-  }\n-`;\n-\n-const WeekSection = styled.div`\n-  margin-bottom: 24px;\n-`;\n-\n-const WeekNavigationContainer = styled.div`\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  gap: 16px;\n-  margin-bottom: 16px;\n-`;\n-\n-const WeekTitle = styled.h3`\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onSurface};\n-  margin: 0;\n-  text-align: center;\n-  min-width: 250px;\n-`;\n-\n-const WeekDaysContainer = styled.div`\n-  display: grid;\n-  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\n-  gap: 12px;\n-  \n-  @media (max-width: 768px) {\n-    grid-template-columns: 1fr;\n-    gap: 10px;\n-  }\n-`;\n-\n-const WeekDay = styled.div<{ $isWeekend: boolean; $isHoliday: boolean }>`\n-  background-color: ${props => props.$isHoliday ? AppColors.error + '10' : AppColors.surface};\n-  border: 1px solid ${props => props.$isHoliday ? AppColors.error + '30' : AppColors.borderLight};\n-  border-radius: 8px;\n-  padding: 12px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    border-color: ${props => props.$isHoliday ? AppColors.error + '50' : AppColors.primary + '30'};\n-    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n-  }\n-`;\n-\n-// Removed unused styled component DayHeader\n-\n-// Removed unused styled component DayInfo\n-\n-const DayLabel = styled.div<{ $isWeekend: boolean; $isHoliday: boolean }>`\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: 600;\n-  color: ${props => {\n-    if (props.$isHoliday) return AppColors.error;\n-    if (props.$isWeekend) return AppColors.primary;\n-    return AppColors.onSurface;\n-  }};\n-  margin-bottom: 8px;\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-`;\n-\n-// Removed duplicate DayDate - using the one defined later\n-\n-const DayToggle = styled.div`\n-  display: flex;\n-  align-items: center;\n-  gap: 8px;\n-  \n-  input[type=\"checkbox\"] {\n-    width: 16px;\n-    height: 16px;\n-    accent-color: ${AppColors.error};\n-  }\n-  \n-  label {\n-    font-size: ${AppTextStyles.body2.fontSize};\n-    color: ${AppColors.onSurface};\n-    cursor: pointer;\n-    font-weight: 500;\n-  }\n-`;\n-\n-const WorkingHoursSection = styled.div<{ $isVisible: boolean }>`\n-  display: ${props => props.$isVisible ? 'block' : 'none'};\n-  margin-top: 12px;\n-`;\n-\n-// Removed unused styled component WorkingHoursRow\n-\n-const BreakTimesSection = styled.div`\n-  margin-top: 12px;\n-`;\n-\n-/* Unused for now - may be used in future iterations\n-const BreakTimeItem = styled.div`\n-  display: flex;\n-  align-items: center;\n-  gap: 8px;\n-  margin-bottom: 6px;\n-  \n-  input {\n-    width: 50px;\n-    padding: 4px 6px;\n-    border: 1px solid ${AppColors.borderLight};\n-    border-radius: 4px;\n-    font-size: ${AppTextStyles.body2.fontSize};\n-    text-align: center;\n-  }\n-  \n-  input[type=\"text\"] {\n-    width: 80px;\n-  }\n-  \n-  button {\n-    background: ${AppColors.error};\n-    color: ${AppColors.onPrimary};\n-    border: none;\n-    border-radius: 4px;\n-    padding: 4px 8px;\n-    font-size: 12px;\n-    cursor: pointer;\n     \n-    &:hover {\n-      background: ${AppColors.error + 'CC'};\n-    }\n-  }\n-`;\n-*/\n-\n-\n-const TimeSelectContainer = styled.div`\n-  display: flex;\n-  align-items: center;\n-  gap: 4px;\n-`;\n-\n-const TimeSelect = styled.select`\n-  padding: 4px 6px;\n-  border: 1px solid #ddd;\n-  border-radius: 4px;\n-  font-size: 0.9rem;\n-  font-weight: 500;\n-  background-color: white;\n-  \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-    box-shadow: 0 0 0 2px ${AppColors.primary}20;\n-  }\n-`;\n-\n-const HourSelect = styled(TimeSelect)`\n-  width: 50px;\n-`;\n-\n-const MinuteSelect = styled(TimeSelect)`\n-  width: 50px;\n-`;\n-\n-// DayDate component removed - date now included in day label\n-\n-const WorkingHoursLabel = styled.div`\n-  font-size: 0.9rem;\n-  font-weight: 600;\n-  margin-bottom: 8px;\n-  color: #333;\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-  flex-wrap: wrap;\n-  gap: 12px;\n-`;\n-\n-const WorkingHoursInputs = styled.div`\n-  display: flex;\n-  align-items: center;\n-  gap: 8px;\n-  flex-wrap: wrap;\n-  \n-  span {\n-    color: #666;\n-    font-size: 0.9rem;\n-    font-weight: 500;\n-  }\n-`;\n-\n-const BreakTimesLabel = styled.div`\n-  font-size: 0.9rem;\n-  font-weight: 600;\n-  margin-bottom: 8px;\n-  color: #333;\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-`;\n-\n-const BreakTimeRow = styled.div`\n-  display: flex;\n-  align-items: center;\n-  gap: 8px;\n-  margin-bottom: 6px;\n-`;\n-\n-const BreakTimeInput = styled.input`\n-  flex: 1;\n-  min-width: 80px;\n-  padding: 6px 8px;\n-  border: 1px solid #ddd;\n-  border-radius: 4px;\n-  font-size: 0.9rem;\n-`;\n-\n-const RemoveBreakTimeButton = styled.button`\n-  background: #ffebee;\n-  border: 1px solid #f44336;\n-  color: #f44336;\n-  padding: 6px 10px;\n-  border-radius: 4px;\n-  font-size: 0.8rem;\n-  cursor: pointer;\n-  min-width: 50px;\n-  \n-  &:hover {\n-    background: #f44336;\n-    color: white;\n-  }\n-`;\n-\n-const AddBreakTimeButton = styled.button`\n-  background: #e3f2fd;\n-  border: 1px solid #2196f3;\n-  color: #2196f3;\n-  padding: 6px 12px;\n-  border-radius: 4px;\n-  font-size: 0.8rem;\n-  cursor: pointer;\n-  font-weight: 500;\n-  \n-  &:hover {\n-    background: #2196f3;\n-    color: white;\n-  }\n-`;\n-\n-const ApplyToAllButton = styled.button`\n-  background: #f3e5f5;\n-  border: 1px solid #9c27b0;\n-  color: #9c27b0;\n-  padding: 4px 8px;\n-  border-radius: 4px;\n-  font-size: 0.7rem;\n-  cursor: pointer;\n-  font-weight: 500;\n-  margin-left: 8px;\n-  \n-  &:hover {\n-    background: #9c27b0;\n-    color: white;\n-  }\n-`;\n-\n-\n-\n-const Button = styled.button<{ $variant: 'primary' | 'secondary'; $disabled?: boolean }>`\n-  padding: 10px 20px;\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  font-weight: 500;\n-  cursor: ${props => props.$disabled ? 'not-allowed' : 'pointer'};\n-  border: none;\n-  opacity: ${props => props.$disabled ? 0.6 : 1};\n-  \n-  ${props => props.$variant === 'primary' ? `\n-    background-color: ${props.$disabled ? AppColors.primary + '80' : AppColors.primary};\n-    color: ${AppColors.onPrimary};\n-    \n-    &:hover {\n-      background-color: ${props.$disabled ? AppColors.primary : AppColors.primary + 'CC'};\n-    }\n-  ` : `\n-    background-color: ${AppColors.surface};\n-    color: ${AppColors.onSurface};\n-    border: 1px solid ${AppColors.borderLight};\n-    \n-    &:hover {\n-      background-color: ${props.$disabled ? AppColors.surface : AppColors.background};\n-    }\n-  `}\n-`;\n-\n-const WeeklyHolidayModal: React.FC<WeeklyHolidayModalProps> = ({\n-  isOpen,\n-  onClose,\n-  staffId,\n-  staffList,\n-  currentUser,\n-  onSave,\n-  existingWeeklyHolidays = [],\n-  onRefresh\n-}) => {\n-\n-\n-  // 분을 시와 분으로 분리하는 함수\n-  const minutesToHourMinute = (minutes: number): { hour: number; minute: number } => {\n-    const hour = Math.floor(minutes / 60);\n-    const minute = minutes % 60;\n-    return { hour, minute };\n-  };\n-\n-  // 시와 분을 분으로 변환하는 함수\n-  const hourMinuteToMinutes = (hour: number, minute: number): number => {\n-    return hour * 60 + minute;\n-  };\n-\n-\n-  const [selectedStaffIds, setSelectedStaffIds] = useState<string[]>([]);\n-  const [currentWeekStartDate, setCurrentWeekStartDate] = useState('');\n-  const [weekDaySettings, setWeekDaySettings] = useState<{\n-    monday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    tuesday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    wednesday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    thursday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    friday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    saturday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-    sunday: { isHoliday: boolean; workingHours: { start: number; end: number; }; breakTimes: { start: number; end: number; name: string; }[]; };\n-  }>({\n-    monday: {\n-      isHoliday: false,\n-      workingHours: { start: 540, end: 1260 }, // 09:00 ~ 21:00 (분 단위)\n-      breakTimes: []\n-    },\n-    tuesday: {\n-      isHoliday: false,\n-      workingHours: { start: 540, end: 1260 },\n-      breakTimes: []\n-    },\n-    wednesday: {\n-      isHoliday: false,\n-      workingHours: { start: 540, end: 1260 },\n-      breakTimes: []\n-    },\n-    thursday: {\n-      isHoliday: false,\n-      workingHours: { start: 540, end: 1260 },\n-      breakTimes: []\n-    },\n-    friday: {\n-      isHoliday: false,\n-      workingHours: { start: 540, end: 1260 },\n-      breakTimes: []\n-    },\n-    saturday: {\n-      isHoliday: true,  // 기본값: 주말 휴일\n-      workingHours: { start: 540, end: 1260 },\n-      breakTimes: []\n-    },\n-    sunday: {\n-      isHoliday: true,  // 기본값: 주말 휴일\n-      workingHours: { start: 540, end: 1260 },\n-      breakTimes: []\n-    }\n-  });\n-  const [isLoading, setIsLoading] = useState(false);\n-  const [error, setError] = useState<string | null>(null);\n-\n-  // 현재 설정 가능한 주의 월요일 날짜 계산\n-  // 휴일설정은 이번주 토요일부터 다음주 금요일까지에 대한 결정\n-  const getCurrentSettableWeekStartDate = (): string => {\n-    const today = new Date();\n-    const dayOfWeek = today.getDay(); // 0: 일요일, 1: 월요일, ..., 5: 금요일, 6: 토요일\n-    \n-    // 이번주 토요일 계산\n-    let thisWeekSaturday = new Date(today);\n-    const daysUntilSaturday = 6 - dayOfWeek; // 토요일까지 남은 일수 (토요일이면 0)\n-    thisWeekSaturday.setDate(today.getDate() + daysUntilSaturday);\n-    \n-    // 토요일부터 시작하는 주의 월요일 계산 (토요일 + 2일)\n-    const targetMonday = new Date(thisWeekSaturday);\n-    targetMonday.setDate(thisWeekSaturday.getDate() + 2); // 토요일 + 2일 = 월요일\n-    \n-    return targetMonday.toISOString().split('T')[0];\n-  };  // 주 날짜 범위 표시 (토요일부터 금요일까지)\n-  const getWeekDateRange = (): string => {\n-    if (!currentWeekStartDate) return '';\n-    \n-    const mondayDate = new Date(currentWeekStartDate + 'T00:00:00');\n-    if (isNaN(mondayDate.getTime())) return '';\n-    \n-    // 월요일에서 토요일로 이동 (월요일 - 2일 = 토요일)\n-    const saturdayDate = new Date(mondayDate);\n-    saturdayDate.setDate(mondayDate.getDate() - 2);\n-    \n-    // 토요일에서 금요일로 이동 (토요일 + 6일 = 금요일)\n-    const fridayDate = new Date(saturdayDate);\n-    fridayDate.setDate(saturdayDate.getDate() + 6);\n-    \n-    const formatDate = (date: Date) => {\n-      return `${date.getMonth() + 1}/${date.getDate()}`;\n-    };\n-    \n-    return `${formatDate(saturdayDate)} - ${formatDate(fridayDate)}`;\n-  };\n-\n-  // 초기화\n-  useEffect(() => {\n-    console.log('Initialization useEffect triggered, isOpen:', isOpen);\n-    \n-    if (isOpen) {\n-      // 현재 설정 가능한 주로 초기 설정\n-      const settableWeek = getCurrentSettableWeekStartDate();\n-      console.log('Setting currentWeekStartDate to:', settableWeek);\n-      setCurrentWeekStartDate(settableWeek);\n-      \n-      // 직원 선택 초기화\n-      if (staffId) {\n-        console.log('Setting selectedStaffIds to single staff:', staffId);\n-        setSelectedStaffIds([staffId]);\n-      } else if (currentUser?.role === 'master') {\n-        console.log('Master user, setting empty staff selection');\n-        setSelectedStaffIds([]);\n-      } else if (currentUser?.id) {\n-        console.log('Setting selectedStaffIds to current user:', currentUser.id);\n-        setSelectedStaffIds([currentUser.id]);\n+    // 점심시간과 겹치는지 체크 (점심시간 수정 시에는 제외)\n+    if (excludeType !== 'lunch') {\n+      const lunchTime = daySettings.lunchTime;\n+      if (lunchTime.start < lunchTime.end) { // 유효한 점심시간이 있는 경우\n+        if (!(newEnd <= lunchTime.start || newStart >= lunchTime.end)) {\n+          return '점심시간과 겹칠 수 없습니다.';\n+        }\n       }\n-\n-      setError(null);\n-      setIsLoading(false);\n     }\n-  }, [isOpen, staffId, currentUser]);\n-\n-  // 기존 설정 로드\n-  useEffect(() => {\n-    console.log('useEffect triggered:', { isOpen, currentWeekStartDate, selectedStaffIds: selectedStaffIds.length });\n     \n-    if (isOpen && currentWeekStartDate && selectedStaffIds.length > 0) {\n-      const existingSetting = existingWeeklyHolidays.find(\n-        setting => setting.weekStartDate === currentWeekStartDate && \n-                  selectedStaffIds.includes(setting.staffId)\n-      );\n-      \n-      if (existingSetting) {\n-        console.log('Found existing setting:', existingSetting);\n-        // 기존 설정이 있다면 로드하되, 구조가 맞지 않으면 기본값 사용\n-        const normalizedWeekDays = {\n-          monday: {\n-            isHoliday: existingSetting.weekDays.monday?.isHoliday ?? false,\n-            workingHours: existingSetting.weekDays.monday?.workingHours ?? { start: 540, end: 1260 },\n-            breakTimes: (existingSetting.weekDays.monday?.breakTimes ?? []).map(bt => ({\n-              start: bt.start,\n-              end: bt.end,\n-              name: bt.name || '휴게시간'\n-            }))\n-          },\n-          tuesday: {\n-            isHoliday: existingSetting.weekDays.tuesday?.isHoliday ?? false,\n-            workingHours: existingSetting.weekDays.tuesday?.workingHours ?? { start: 540, end: 1260 },\n-            breakTimes: (existingSetting.weekDays.tuesday?.breakTimes ?? []).map(bt => ({\n-              start: bt.start,\n-              end: bt.end,\n-              name: bt.name || '휴게시간'\n-            }))\n-          },\n-          wednesday: {\n-            isHoliday: existingSetting.weekDays.wednesday?.isHoliday ?? false,\n-            workingHours: existingSetting.weekDays.wednesday?.workingHours ?? { start: 540, end: 1260 },\n-            breakTimes: (existingSetting.weekDays.wednesday?.breakTimes ?? []).map(bt => ({\n-              start: bt.start,\n-              end: bt.end,\n-              name: bt.name || '휴게시간'\n-            }))\n-          },\n-          thursday: {\n-            isHoliday: existingSetting.weekDays.thursday?.isHoliday ?? false,\n-            workingHours: existingSetting.weekDays.thursday?.workingHours ?? { start: 540, end: 1260 },\n-            breakTimes: (existingSetting.weekDays.thursday?.breakTimes ?? []).map(bt => ({\n-              start: bt.start,\n-              end: bt.end,\n-              name: bt.name || '휴게시간'\n-            }))\n-          },\n-          friday: {\n-            isHoliday: existingSetting.weekDays.friday?.isHoliday ?? false,\n-            workingHours: existingSetting.weekDays.friday?.workingHours ?? { start: 540, end: 1260 },\n-            breakTimes: (existingSetting.weekDays.friday?.breakTimes ?? []).map(bt => ({\n-              start: bt.start,\n-              end: bt.end,\n-              name: bt.name || '휴게시간'\n-            }))\n-          },\n-          saturday: {\n-            isHoliday: existingSetting.weekDays.saturday?.isHoliday ?? true,\n-            workingHours: existingSetting.weekDays.saturday?.workingHours ?? { start: 540, end: 1260 },\n-            breakTimes: (existingSetting.weekDays.saturday?.breakTimes ?? []).map(bt => ({\n-              start: bt.start,\n-              end: bt.end,\n-              name: bt.name || '휴게시간'\n-            }))\n-          },\n-          sunday: {\n-            isHoliday: existingSetting.weekDays.sunday?.isHoliday ?? true,\n-            workingHours: existingSetting.weekDays.sunday?.workingHours ?? { start: 540, end: 1260 },\n-            breakTimes: (existingSetting.weekDays.sunday?.breakTimes ?? []).map(bt => ({\n-              start: bt.start,\n-              end: bt.end,\n-              name: bt.name || '휴게시간'\n-            }))\n+    // 다른 휴게시간들과 겹치는지 체크 (해당 휴게시간 수정 시에는 제외)\n+    if (excludeType !== 'break') {\n+      for (let i = 0; i < daySettings.breakTimes.length; i++) {\n+        const breakTime = daySettings.breakTimes[i];\n+        if (breakTime.start < breakTime.end) { // 유효한 휴게시간인 경우\n+          if (!(newEnd <= breakTime.start || newStart >= breakTime.end)) {\n+            return `휴게시간 \"${breakTime.name || `휴게${i+1}`}\"과 겹칠 수 없습니다.`;\n           }\n-        };\n-        \n-        setWeekDaySettings(normalizedWeekDays);\n-      } else {\n-        console.log('No existing setting found, using default state');\n-        // 기본값으로 리셋 (주말만 휴일)\n-        setWeekDaySettings({\n-          monday: {\n-            isHoliday: false,\n-            workingHours: { start: 540, end: 1260 }, // 09:00 ~ 21:00\n-            breakTimes: []\n-          },\n-          tuesday: {\n-            isHoliday: false,\n-            workingHours: { start: 540, end: 1260 },\n-            breakTimes: []\n-          },\n-          wednesday: {\n-            isHoliday: false,\n-            workingHours: { start: 540, end: 1260 },\n-            breakTimes: []\n-          },\n-          thursday: {\n-            isHoliday: false,\n-            workingHours: { start: 540, end: 1260 },\n-            breakTimes: []\n-          },\n-          friday: {\n-            isHoliday: false,\n-            workingHours: { start: 540, end: 1260 },\n-            breakTimes: []\n-          },\n-          saturday: {\n-            isHoliday: true,\n-            workingHours: { start: 540, end: 1260 },\n-            breakTimes: []\n-          },\n-          sunday: {\n-            isHoliday: true,\n-            workingHours: { start: 540, end: 1260 },\n-            breakTimes: []\n+        }\n+      }\n+    } else if (typeof excludeIndex === 'number') {\n+      // 특정 휴게시간 수정 시 다른 휴게시간들과만 체크\n+      for (let i = 0; i < daySettings.breakTimes.length; i++) {\n+        if (i === excludeIndex) continue; // 자기 자신은 제외\n+        const breakTime = daySettings.breakTimes[i];\n+        if (breakTime.start < breakTime.end) {\n+          if (!(newEnd <= breakTime.start || newStart >= breakTime.end)) {\n+            return `휴게시간 \"${breakTime.name || `휴게${i+1}`}\"과 겹칠 수 없습니다.`;\n           }\n-        });\n+        }\n       }\n     }\n-  // eslint-disable-next-line react-hooks/exhaustive-deps\n-  }, [isOpen, currentWeekStartDate, selectedStaffIds, existingWeeklyHolidays]);\n-\n-  const handleStaffToggle = (staffId: string) => {\n-    setSelectedStaffIds(prev => \n-      prev.includes(staffId)\n-        ? prev.filter(id => id !== staffId)\n-        : [...prev, staffId]\n-    );\n+    \n+    return null; // 겹치지 않음\n   };\n \n-  const handleDayToggle = (day: keyof typeof weekDaySettings) => {\n-    console.log('handleDayToggle called:', day, 'current state:', weekDaySettings[day]);\n-    setWeekDaySettings(prev => {\n-      const currentDay = prev[day];\n-      const newIsHoliday = !currentDay.isHoliday;\n-      \n-      const newState = {\n-        ...prev,\n-        [day]: {\n-          ...currentDay,\n-          isHoliday: newIsHoliday,\n-          // 휴일로 설정할 때 근무시간과 휴게시간을 비움\n-          workingHours: newIsHoliday ? { start: 0, end: 0 } : currentDay.workingHours,\n-          breakTimes: newIsHoliday ? [] : currentDay.breakTimes\n-        }\n-      };\n-      console.log('new state for', day, ':', newState[day]);\n-      return newState;\n-    });\n-  };\n \n \n \n-  // 드롭다운용 시간 변경 핸들러\n-  const handleTimeDropdownChange = (\n-    day: keyof typeof weekDaySettings, \n-    field: 'start' | 'end', \n-    type: 'hour' | 'minute', \n-    value: string\n-  ) => {\n-    const currentTime = minutesToHourMinute(weekDaySettings[day].workingHours[field]);\n-    let newHour = currentTime.hour;\n-    let newMinute = currentTime.minute;\n+\n+  const handleAddBreakTime = (day: keyof typeof weekDaySettings) => {\n+    // 새로운 휴게시간이 겹치는지 미리 체크\n+    const newStart = 840; // 14:00\n+    const newEnd = 870;   // 14:30\n+    const overlapError = checkTimeOverlap(day, newStart, newEnd, 'break');\n     \n-    if (type === 'hour') {\n-      newHour = parseInt(value, 10);\n-    } else {\n-      newMinute = parseInt(value, 10);\n+    if (overlapError) {\n+      alert(`새 휴게시간을 추가할 수 없습니다. ${overlapError}`);\n+      return;\n     }\n     \n-    const newMinutes = hourMinuteToMinutes(newHour, newMinute);\n-    \n-    // 시작 시간이 종료 시간보다 늦지 않도록 검증\n-    const otherField = field === 'start' ? 'end' : 'start';\n-    const otherTime = weekDaySettings[day].workingHours[otherField];\n-    \n-    let finalMinutes = newMinutes;\n-    if (field === 'start' && newMinutes >= otherTime) {\n-      finalMinutes = otherTime - 30; // 최소 30분 차이\n-      if (finalMinutes < 0) finalMinutes = 0;\n-    } else if (field === 'end' && newMinutes <= otherTime) {\n-      finalMinutes = otherTime + 30; // 최소 30분 차이\n-      if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n-    }\n-    \n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n         ...prev[day],\n-        workingHours: {\n-          ...prev[day].workingHours,\n-          [field]: finalMinutes\n-        }\n-      }\n-    }));\n-  };\n-\n-\n-\n-\n-\n-  const handleAddBreakTime = (day: keyof typeof weekDaySettings) => {\n-    setWeekDaySettings(prev => ({\n-      ...prev,\n-      [day]: {\n-        ...prev[day],\n         breakTimes: [\n           ...prev[day].breakTimes,\n-          { start: 720, end: 780, name: '점심시간' } // 12:00 ~ 13:00\n+          { start: newStart, end: newEnd, name: '' } // 14:00 ~ 14:30 기본값, 이름은 빈 문자열\n         ]\n       }\n     }));\n   };\n@@ -2036,8 +1044,18 @@\n       finalMinutes = otherTime + 30;\n       if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n     }\n     \n+    // 새로운 휴게시간이 다른 시간들과 겹치는지 체크\n+    const newStart = field === 'start' ? finalMinutes : breakTime.start;\n+    const newEnd = field === 'end' ? finalMinutes : breakTime.end;\n+    const overlapError = checkTimeOverlap(day, newStart, newEnd, 'break', index);\n+    \n+    if (overlapError) {\n+      alert(overlapError);\n+      return;\n+    }\n+    \n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n         ...prev[day],\n"
                },
                {
                    "date": 1762258138464,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,16 +3,18 @@\n import { AppColors } from '../../styles/colors';\n import { AppTextStyles } from '../../styles/textStyles';\n import { dbManager } from '../../utils/indexedDB';\n import type { WeeklyHolidaySettings } from '../../utils/db/types';\n+import { getUnifiedShiftSettings } from '../../utils/shiftUtils';\n \n interface WeeklyHolidayModalProps {\n   isOpen: boolean;\n   onClose: () => void;\n   staffId?: string; // undefined면 전체 코치\n   staffList: Array<{\n     id: string;\n     name: string;\n+    workShift?: string; // 근무 시간대 (주간/야간)\n     contractStartDate?: Date; // 계약 시작일\n     contractEndDate?: Date; // 계약 종료일\n     workingHours?: {\n       start: number;\n@@ -447,9 +449,25 @@\n   const hourMinuteToMinutes = (hour: number, minute: number): number => {\n     return hour * 60 + minute;\n   };\n \n+  // 선택된 직원들의 shift 정보를 기반으로 기본 설정 생성\n+  const getDefaultSettingsForSelectedStaff = () => {\n+    const selectedStaffs = staffList.filter(staff => selectedStaffIds.includes(staff.id));\n+    const staffShifts = selectedStaffs.map(staff => staff.workShift || '').filter(Boolean);\n+    const shiftSettings = getUnifiedShiftSettings(staffShifts);\n+    \n+    console.log('Selected staffs:', selectedStaffs.map(s => ({ id: s.id, name: s.name, workShift: s.workShift })));\n+    console.log('Staff shifts:', staffShifts);\n+    console.log('Unified shift settings:', shiftSettings);\n+    \n+    return {\n+      workingHours: shiftSettings.workingHours,\n+      defaultBreakTime: shiftSettings.defaultBreakTime\n+    };\n+  };\n \n+\n   const [selectedStaffIds, setSelectedStaffIds] = useState<string[]>([]);\n   const [currentWeekStartDate, setCurrentWeekStartDate] = useState('');\n   const [weekDaySettings, setWeekDaySettings] = useState<{\n     monday: { isHoliday: boolean; workingHours: { start: number; end: number; }; lunchTime: { start: number; end: number; name: string; }; breakTimes: { start: number; end: number; name: string; }[]; };\n@@ -582,74 +600,78 @@\n       );\n       \n       if (existingSetting) {\n         console.log('Found existing setting:', existingSetting);\n-        // 기존 설정이 있다면 로드하되, 구조가 맞지 않으면 기본값 사용\n+        \n+        // 선택된 직원들의 shift 정보를 기반으로 기본 설정 생성\n+        const defaultSettings = getDefaultSettingsForSelectedStaff();\n+        \n+        // 기존 설정이 있다면 로드하되, 구조가 맞지 않으면 shift 기반 기본값 사용\n         const normalizedWeekDays = {\n           monday: {\n             isHoliday: existingSetting.weekDays.monday?.isHoliday ?? false,\n-            workingHours: existingSetting.weekDays.monday?.workingHours ?? { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' }, // 기본 점심시간 (기존 데이터에는 없으므로 항상 기본값)\n+            workingHours: existingSetting.weekDays.monday?.workingHours ?? defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime, // 항상 shift 기반 기본값 사용\n             breakTimes: (existingSetting.weekDays.monday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n             }))\n           },\n           tuesday: {\n             isHoliday: existingSetting.weekDays.tuesday?.isHoliday ?? false,\n-            workingHours: existingSetting.weekDays.tuesday?.workingHours ?? { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: existingSetting.weekDays.tuesday?.workingHours ?? defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: (existingSetting.weekDays.tuesday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n             }))\n           },\n           wednesday: {\n             isHoliday: existingSetting.weekDays.wednesday?.isHoliday ?? false,\n-            workingHours: existingSetting.weekDays.wednesday?.workingHours ?? { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: existingSetting.weekDays.wednesday?.workingHours ?? defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: (existingSetting.weekDays.wednesday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n             }))\n           },\n           thursday: {\n             isHoliday: existingSetting.weekDays.thursday?.isHoliday ?? false,\n-            workingHours: existingSetting.weekDays.thursday?.workingHours ?? { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: existingSetting.weekDays.thursday?.workingHours ?? defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: (existingSetting.weekDays.thursday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n             }))\n           },\n           friday: {\n             isHoliday: existingSetting.weekDays.friday?.isHoliday ?? false,\n-            workingHours: existingSetting.weekDays.friday?.workingHours ?? { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: existingSetting.weekDays.friday?.workingHours ?? defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: (existingSetting.weekDays.friday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n             }))\n           },\n           saturday: {\n             isHoliday: existingSetting.weekDays.saturday?.isHoliday ?? true,\n-            workingHours: existingSetting.weekDays.saturday?.workingHours ?? { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: existingSetting.weekDays.saturday?.workingHours ?? defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: (existingSetting.weekDays.saturday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n             }))\n           },\n           sunday: {\n             isHoliday: existingSetting.weekDays.sunday?.isHoliday ?? true,\n-            workingHours: existingSetting.weekDays.sunday?.workingHours ?? { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: existingSetting.weekDays.sunday?.workingHours ?? defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: (existingSetting.weekDays.sunday?.breakTimes ?? []).map(bt => ({\n               start: bt.start,\n               end: bt.end,\n               name: bt.name || '휴게시간'\n@@ -658,51 +680,55 @@\n         };\n         \n         setWeekDaySettings(normalizedWeekDays);\n       } else {\n-        console.log('No existing setting found, using default state');\n+        console.log('No existing setting found, using shift-based default state');\n+        \n+        // 선택된 직원들의 shift 정보를 기반으로 기본 설정 생성\n+        const defaultSettings = getDefaultSettingsForSelectedStaff();\n+        \n         // 기본값으로 리셋 (주말만 휴일)\n         setWeekDaySettings({\n           monday: {\n             isHoliday: false,\n-            workingHours: { start: 540, end: 1260 }, // 09:00 ~ 21:00\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: []\n           },\n           tuesday: {\n             isHoliday: false,\n-            workingHours: { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: []\n           },\n           wednesday: {\n             isHoliday: false,\n-            workingHours: { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: []\n           },\n           thursday: {\n             isHoliday: false,\n-            workingHours: { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: []\n           },\n           friday: {\n             isHoliday: false,\n-            workingHours: { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: []\n           },\n           saturday: {\n             isHoliday: true,\n-            workingHours: { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: []\n           },\n           sunday: {\n             isHoliday: true,\n-            workingHours: { start: 540, end: 1260 },\n-            lunchTime: { start: 720, end: 780, name: '점심시간' },\n+            workingHours: defaultSettings.workingHours,\n+            lunchTime: defaultSettings.defaultBreakTime,\n             breakTimes: []\n           }\n         });\n       }\n@@ -723,25 +749,28 @@\n     setWeekDaySettings(prev => {\n       const currentDay = prev[day];\n       const newIsHoliday = !currentDay.isHoliday;\n       \n+      // 선택된 직원들의 shift 정보를 기반으로 기본 설정 생성\n+      const defaultSettings = getDefaultSettingsForSelectedStaff();\n+      \n       const newState = {\n         ...prev,\n         [day]: {\n           ...currentDay,\n           isHoliday: newIsHoliday,\n           // 휴일로 설정할 때 근무시간과 휴게시간을 비움\n-          // 휴일 해제할 때는 기본 근무시간 (9시-21시)으로 설정\n+          // 휴일 해제할 때는 shift 기반 기본 근무시간으로 설정\n           workingHours: newIsHoliday \n             ? { start: 0, end: 0 } \n             : (currentDay.workingHours.start === 0 && currentDay.workingHours.end === 0 \n-               ? { start: 540, end: 1260 } // 기본값: 09:00 ~ 21:00\n+               ? defaultSettings.workingHours\n                : currentDay.workingHours),\n-          // 휴일로 설정할 때 점심시간 비움, 해제할 때 기본 점심시간\n+          // 휴일로 설정할 때 휴게시간 비움, 해제할 때 shift 기반 기본 휴게시간\n           lunchTime: newIsHoliday \n-            ? { start: 0, end: 0, name: '점심시간' }\n+            ? { start: 0, end: 0, name: defaultSettings.defaultBreakTime.name }\n             : (currentDay.lunchTime.start === 0 && currentDay.lunchTime.end === 0\n-               ? { start: 720, end: 780, name: '점심시간' } // 기본값: 12:00 ~ 13:00\n+               ? defaultSettings.defaultBreakTime\n                : currentDay.lunchTime),\n           breakTimes: newIsHoliday ? [] : currentDay.breakTimes\n         }\n       };\n"
                },
                {
                    "date": 1762258311981,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1037,8 +1037,26 @@\n       }\n     }));\n   };\n \n+  // 기본 휴게시간(lunchTime) 변경 핸들러\n+  const handleLunchTimeChange = (\n+    day: keyof typeof weekDaySettings, \n+    field: 'start' | 'end' | 'name', \n+    value: number | string\n+  ) => {\n+    setWeekDaySettings(prev => ({\n+      ...prev,\n+      [day]: {\n+        ...prev[day],\n+        lunchTime: {\n+          ...prev[day].lunchTime,\n+          [field]: field === 'name' ? value : (typeof value === 'number' ? value : parseInt(value as string, 10))\n+        }\n+      }\n+    }));\n+  };\n+\n   // 휴게시간용 드롭다운 변경 핸들러\n   const handleBreakTimeDropdownChange = (\n     day: keyof typeof weekDaySettings, \n     index: number, \n@@ -1139,12 +1157,34 @@\n       // 1. 기존 주별 휴일 설정 저장\n       const settings: Omit<WeeklyHolidaySettings, 'id' | 'createdAt' | 'updatedAt'>[] = [];\n       \n       selectedStaffIds.forEach(staffId => {\n+        // lunchTime을 breakTimes에 포함하여 저장\n+        const processedWeekDays = Object.entries(weekDaySettings).reduce((acc, [dayKey, daySettings]) => {\n+          const allBreakTimes = [...daySettings.breakTimes];\n+          \n+          // lunchTime이 유효한 경우에만 breakTimes에 추가\n+          if (daySettings.lunchTime.start > 0 && daySettings.lunchTime.end > 0 && !daySettings.isHoliday) {\n+            allBreakTimes.unshift({\n+              start: daySettings.lunchTime.start,\n+              end: daySettings.lunchTime.end,\n+              name: daySettings.lunchTime.name\n+            });\n+          }\n+          \n+          acc[dayKey as keyof typeof weekDaySettings] = {\n+            isHoliday: daySettings.isHoliday,\n+            workingHours: daySettings.workingHours,\n+            breakTimes: allBreakTimes\n+          };\n+          \n+          return acc;\n+        }, {} as any);\n+        \n         settings.push({\n           staffId,\n           weekStartDate: currentWeekStartDate,\n-          weekDays: weekDaySettings\n+          weekDays: processedWeekDays\n         });\n       });\n       \n       await onSave(settings);\n@@ -1344,10 +1384,64 @@\n                             </ApplyToAllButton>\n                           </div>\n                         </WorkingHoursLabel>\n                         \n+                        {/* 기본 휴게시간 섹션 추가 */}\n                         <BreakTimesSection>\n                           <BreakTimesLabel>\n+                            {daySettings.lunchTime.name}\n+                          </BreakTimesLabel>\n+                          {daySettings.lunchTime.start > 0 && daySettings.lunchTime.end > 0 && (\n+                            <BreakTimeRow>\n+                              <BreakTimeInput\n+                                type=\"text\"\n+                                value={daySettings.lunchTime.name}\n+                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleLunchTimeChange(key, 'name', e.target.value)}\n+                                style={{ minWidth: '120px' }}\n+                              />\n+                              <TimeSelectContainer>\n+                                <HourSelect\n+                                  value={minutesToHourMinute(daySettings.lunchTime.start).hour}\n+                                  onChange={(e) => handleLunchTimeDropdownChange(key, 'start', 'hour', e.target.value)}\n+                                >\n+                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                  ))}\n+                                </HourSelect>\n+                                <span>:</span>\n+                                <MinuteSelect\n+                                  value={minutesToHourMinute(daySettings.lunchTime.start).minute}\n+                                  onChange={(e) => handleLunchTimeDropdownChange(key, 'start', 'minute', e.target.value)}\n+                                >\n+                                  <option value={0}>00</option>\n+                                  <option value={30}>30</option>\n+                                </MinuteSelect>\n+                              </TimeSelectContainer>\n+                              <span>~</span>\n+                              <TimeSelectContainer>\n+                                <HourSelect\n+                                  value={minutesToHourMinute(daySettings.lunchTime.end).hour}\n+                                  onChange={(e) => handleLunchTimeDropdownChange(key, 'end', 'hour', e.target.value)}\n+                                >\n+                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                  ))}\n+                                </HourSelect>\n+                                <span>:</span>\n+                                <MinuteSelect\n+                                  value={minutesToHourMinute(daySettings.lunchTime.end).minute}\n+                                  onChange={(e) => handleLunchTimeDropdownChange(key, 'end', 'minute', e.target.value)}\n+                                >\n+                                  <option value={0}>00</option>\n+                                  <option value={30}>30</option>\n+                                </MinuteSelect>\n+                              </TimeSelectContainer>\n+                            </BreakTimeRow>\n+                          )}\n+                        </BreakTimesSection>\n+                        \n+                        <BreakTimesSection>\n+                          <BreakTimesLabel>\n                             휴게 시간\n                             <AddBreakTimeButton onClick={() => handleAddBreakTime(key)}>\n                               + 추가\n                             </AddBreakTimeButton>\n"
                },
                {
                    "date": 1762258555620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -812,16 +812,16 @@\n       finalMinutes = otherTime + 30; // 최소 30분 차이\n       if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n     }\n     \n-    // 새로운 근무시간이 다른 시간들과 겹치는지 체크\n+    // 새로운 근무시간이 다른 시간들과 겹치는지 체크 (경고만 표시)\n     const newStart = field === 'start' ? finalMinutes : weekDaySettings[day].workingHours.start;\n     const newEnd = field === 'end' ? finalMinutes : weekDaySettings[day].workingHours.end;\n     const overlapError = checkTimeOverlap(day, newStart, newEnd, 'working');\n     \n     if (overlapError) {\n-      alert(overlapError);\n-      return;\n+      console.warn('근무시간 겹침 경고:', overlapError);\n+      // alert을 제거하고 경고만 표시 - 저장 시점에 검증\n     }\n     \n     setWeekDaySettings(prev => ({\n       ...prev,\n@@ -870,16 +870,16 @@\n       finalMinutes = otherTime + 30; // 최소 30분 차이\n       if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n     }\n     \n-    // 새로운 점심시간이 다른 시간들과 겹치는지 체크\n+    // 새로운 기본 휴게시간이 다른 시간들과 겹치는지 체크 (경고만 표시)\n     const newStart = field === 'start' ? finalMinutes : weekDaySettings[day].lunchTime.start;\n     const newEnd = field === 'end' ? finalMinutes : weekDaySettings[day].lunchTime.end;\n     const overlapError = checkTimeOverlap(day, newStart, newEnd, 'lunch');\n     \n     if (overlapError) {\n-      alert(overlapError);\n-      return;\n+      console.warn('기본 휴게시간 겹침 경고:', overlapError);\n+      // alert을 제거하고 경고만 표시 - 저장 시점에 검증\n     }\n     \n     setWeekDaySettings(prev => ({\n       ...prev,\n@@ -937,33 +937,33 @@\n     if (newStart >= newEnd) {\n       return '시작 시간이 종료 시간보다 늦거나 같을 수 없습니다.';\n     }\n     \n-    // 근무시간과 겹치는지 체크 (근무시간 수정 시에는 제외)\n-    if (excludeType !== 'working') {\n+    // 휴게시간은 근무시간 내에 있어야 함 (근무시간 수정이 아닌 경우)\n+    if (excludeType === 'lunch' || excludeType === 'break') {\n       const workingHours = daySettings.workingHours;\n       if (workingHours.start < workingHours.end) { // 유효한 근무시간이 있는 경우\n-        if (!(newEnd <= workingHours.start || newStart >= workingHours.end)) {\n-          return '근무시간과 겹칠 수 없습니다.';\n+        if (newStart < workingHours.start || newEnd > workingHours.end) {\n+          return '휴게시간은 근무시간 내에 있어야 합니다.';\n         }\n       }\n     }\n     \n-    // 점심시간과 겹치는지 체크 (점심시간 수정 시에는 제외)\n+    // 기본 휴게시간(lunchTime)과 겹치는지 체크 (기본 휴게시간 수정 시에는 제외)\n     if (excludeType !== 'lunch') {\n       const lunchTime = daySettings.lunchTime;\n-      if (lunchTime.start < lunchTime.end) { // 유효한 점심시간이 있는 경우\n+      if (lunchTime.start > 0 && lunchTime.start < lunchTime.end) { // 유효한 기본 휴게시간이 있는 경우\n         if (!(newEnd <= lunchTime.start || newStart >= lunchTime.end)) {\n-          return '점심시간과 겹칠 수 없습니다.';\n+          return `기본 휴게시간(${lunchTime.name})과 겹칠 수 없습니다.`;\n         }\n       }\n     }\n     \n     // 다른 휴게시간들과 겹치는지 체크 (해당 휴게시간 수정 시에는 제외)\n     if (excludeType !== 'break') {\n       for (let i = 0; i < daySettings.breakTimes.length; i++) {\n         const breakTime = daySettings.breakTimes[i];\n-        if (breakTime.start < breakTime.end) { // 유효한 휴게시간인 경우\n+        if (breakTime.start > 0 && breakTime.start < breakTime.end) { // 유효한 휴게시간인 경우\n           if (!(newEnd <= breakTime.start || newStart >= breakTime.end)) {\n             return `휴게시간 \"${breakTime.name || `휴게${i+1}`}\"과 겹칠 수 없습니다.`;\n           }\n         }\n@@ -972,9 +972,9 @@\n       // 특정 휴게시간 수정 시 다른 휴게시간들과만 체크\n       for (let i = 0; i < daySettings.breakTimes.length; i++) {\n         if (i === excludeIndex) continue; // 자기 자신은 제외\n         const breakTime = daySettings.breakTimes[i];\n-        if (breakTime.start < breakTime.end) {\n+        if (breakTime.start > 0 && breakTime.start < breakTime.end) {\n           if (!(newEnd <= breakTime.start || newStart >= breakTime.end)) {\n             return `휴게시간 \"${breakTime.name || `휴게${i+1}`}\"과 겹칠 수 없습니다.`;\n           }\n         }\n@@ -988,25 +988,76 @@\n \n \n \n   const handleAddBreakTime = (day: keyof typeof weekDaySettings) => {\n-    // 새로운 휴게시간이 겹치는지 미리 체크\n-    const newStart = 840; // 14:00\n-    const newEnd = 870;   // 14:30\n-    const overlapError = checkTimeOverlap(day, newStart, newEnd, 'break');\n+    // 겹치지 않는 시간을 자동으로 찾는 함수\n+    const findAvailableTimeSlot = (daySettings: any): { start: number; end: number } => {\n+      const workStart = daySettings.workingHours.start;\n+      const workEnd = daySettings.workingHours.end;\n+      const existingTimes: { start: number; end: number }[] = [];\n+      \n+      // 기본 휴게시간(lunchTime) 추가\n+      if (daySettings.lunchTime.start > 0 && daySettings.lunchTime.end > 0) {\n+        existingTimes.push({\n+          start: daySettings.lunchTime.start,\n+          end: daySettings.lunchTime.end\n+        });\n+      }\n+      \n+      // 기존 휴게시간들 추가\n+      daySettings.breakTimes.forEach((bt: any) => {\n+        existingTimes.push({\n+          start: bt.start,\n+          end: bt.end\n+        });\n+      });\n+      \n+      // 시간을 오름차순으로 정렬\n+      existingTimes.sort((a, b) => a.start - b.start);\n+      \n+      // 30분 슬롯으로 사용 가능한 시간 찾기\n+      const slotDuration = 30; // 30분\n+      \n+      // 근무 시작 시간부터 첫 번째 휴게시간 사이 확인\n+      if (existingTimes.length === 0) {\n+        return { start: workStart + 60, end: workStart + 60 + slotDuration }; // 근무 시작 1시간 후\n+      }\n+      \n+      // 근무 시작부터 첫 번째 휴게시간까지 공간 확인\n+      if (existingTimes[0].start - workStart >= slotDuration) {\n+        return { start: workStart + 30, end: workStart + 30 + slotDuration };\n+      }\n+      \n+      // 기존 휴게시간들 사이의 공간 확인\n+      for (let i = 0; i < existingTimes.length - 1; i++) {\n+        const gapStart = existingTimes[i].end;\n+        const gapEnd = existingTimes[i + 1].start;\n+        \n+        if (gapEnd - gapStart >= slotDuration) {\n+          return { start: gapStart, end: gapStart + slotDuration };\n+        }\n+      }\n+      \n+      // 마지막 휴게시간 이후부터 근무 종료까지 공간 확인\n+      const lastEnd = existingTimes[existingTimes.length - 1].end;\n+      if (workEnd - lastEnd >= slotDuration) {\n+        return { start: lastEnd, end: lastEnd + slotDuration };\n+      }\n+      \n+      // 공간이 없으면 마지막 휴게시간 30분 후로 설정 (겹침 허용)\n+      return { start: lastEnd + 30, end: lastEnd + 30 + slotDuration };\n+    };\n     \n-    if (overlapError) {\n-      alert(`새 휴게시간을 추가할 수 없습니다. ${overlapError}`);\n-      return;\n-    }\n+    const daySettings = weekDaySettings[day];\n+    const { start: newStart, end: newEnd } = findAvailableTimeSlot(daySettings);\n     \n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n         ...prev[day],\n         breakTimes: [\n           ...prev[day].breakTimes,\n-          { start: newStart, end: newEnd, name: '' } // 14:00 ~ 14:30 기본값, 이름은 빈 문자열\n+          { start: newStart, end: newEnd, name: '휴게시간' }\n         ]\n       }\n     }));\n   };\n@@ -1091,16 +1142,16 @@\n       finalMinutes = otherTime + 30;\n       if (finalMinutes >= 24 * 60) finalMinutes = 24 * 60 - 30;\n     }\n     \n-    // 새로운 휴게시간이 다른 시간들과 겹치는지 체크\n+    // 새로운 휴게시간이 다른 시간들과 겹치는지 체크 (경고만 표시)\n     const newStart = field === 'start' ? finalMinutes : breakTime.start;\n     const newEnd = field === 'end' ? finalMinutes : breakTime.end;\n     const overlapError = checkTimeOverlap(day, newStart, newEnd, 'break', index);\n     \n     if (overlapError) {\n-      alert(overlapError);\n-      return;\n+      console.warn('휴게시간 겹침 경고:', overlapError);\n+      // alert을 제거하고 경고만 표시 - 저장 시점에 검증\n     }\n     \n     setWeekDaySettings(prev => ({\n       ...prev,\n@@ -1153,8 +1204,52 @@\n     setIsLoading(true);\n     setError(null);\n     \n     try {\n+      // 저장 전 종합 검증\n+      const validationErrors: string[] = [];\n+      \n+      Object.entries(weekDaySettings).forEach(([dayKey, daySettings]) => {\n+        if (daySettings.isHoliday) return; // 휴일은 검증하지 않음\n+        \n+        const dayName = {\n+          monday: '월요일',\n+          tuesday: '화요일', \n+          wednesday: '수요일',\n+          thursday: '목요일',\n+          friday: '금요일',\n+          saturday: '토요일',\n+          sunday: '일요일'\n+        }[dayKey] || dayKey;\n+        \n+        // 기본 휴게시간 검증\n+        if (daySettings.lunchTime.start > 0 && daySettings.lunchTime.end > 0) {\n+          const lunchError = checkTimeOverlap(dayKey as keyof typeof weekDaySettings, \n+            daySettings.lunchTime.start, daySettings.lunchTime.end, 'lunch');\n+          if (lunchError) {\n+            validationErrors.push(`${dayName}: ${lunchError}`);\n+          }\n+        }\n+        \n+        // 휴게시간들 검증\n+        daySettings.breakTimes.forEach((breakTime, index) => {\n+          if (breakTime.start > 0 && breakTime.end > 0) {\n+            const breakError = checkTimeOverlap(dayKey as keyof typeof weekDaySettings,\n+              breakTime.start, breakTime.end, 'break', index);\n+            if (breakError) {\n+              validationErrors.push(`${dayName}: ${breakError}`);\n+            }\n+          }\n+        });\n+      });\n+      \n+      // 검증 오류가 있으면 저장 중단\n+      if (validationErrors.length > 0) {\n+        setError(`다음 오류를 수정해주세요:\\n${validationErrors.join('\\n')}`);\n+        setIsLoading(false);\n+        return;\n+      }\n+\n       // 1. 기존 주별 휴일 설정 저장\n       const settings: Omit<WeeklyHolidaySettings, 'id' | 'createdAt' | 'updatedAt'>[] = [];\n       \n       selectedStaffIds.forEach(staffId => {\n"
                },
                {
                    "date": 1762258980156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -892,44 +892,8 @@\n       }\n     }));\n   };\n \n-  // 모든 요일에 점심시간 적용\n-  const applyLunchTimeToAll = (sourceDay: keyof typeof weekDaySettings) => {\n-    const sourceLunchTime = weekDaySettings[sourceDay].lunchTime;\n-    setWeekDaySettings(prev => {\n-      const newState = { ...prev };\n-      Object.keys(newState).forEach(key => {\n-        const dayKey = key as keyof typeof weekDaySettings;\n-        if (!newState[dayKey].isHoliday) { // 휴일이 아닌 경우만 적용\n-          newState[dayKey] = {\n-            ...newState[dayKey],\n-            lunchTime: { ...sourceLunchTime }\n-          };\n-        }\n-      });\n-      return newState;\n-    });\n-  };\n-\n-  // 모든 요일에 근무시간 적용\n-  const applyWorkingHoursToAll = (sourceDay: keyof typeof weekDaySettings) => {\n-    const sourceWorkingHours = weekDaySettings[sourceDay].workingHours;\n-    setWeekDaySettings(prev => {\n-      const newState = { ...prev };\n-      Object.keys(newState).forEach(key => {\n-        const dayKey = key as keyof typeof weekDaySettings;\n-        if (!newState[dayKey].isHoliday) { // 휴일이 아닌 경우만 적용\n-          newState[dayKey] = {\n-            ...newState[dayKey],\n-            workingHours: { ...sourceWorkingHours }\n-          };\n-        }\n-      });\n-      return newState;\n-    });\n-  };\n-\n   // 시간 중복 체크 함수\n   const checkTimeOverlap = (day: keyof typeof weekDaySettings, newStart: number, newEnd: number, excludeType?: 'working' | 'lunch' | 'break', excludeIndex?: number): string | null => {\n     const daySettings = weekDaySettings[day];\n     \n@@ -1088,26 +1052,8 @@\n       }\n     }));\n   };\n \n-  // 기본 휴게시간(lunchTime) 변경 핸들러\n-  const handleLunchTimeChange = (\n-    day: keyof typeof weekDaySettings, \n-    field: 'start' | 'end' | 'name', \n-    value: number | string\n-  ) => {\n-    setWeekDaySettings(prev => ({\n-      ...prev,\n-      [day]: {\n-        ...prev[day],\n-        lunchTime: {\n-          ...prev[day].lunchTime,\n-          [field]: field === 'name' ? value : (typeof value === 'number' ? value : parseInt(value as string, 10))\n-        }\n-      }\n-    }));\n-  };\n-\n   // 휴게시간용 드롭다운 변경 핸들러\n   const handleBreakTimeDropdownChange = (\n     day: keyof typeof weekDaySettings, \n     index: number, \n@@ -1184,8 +1130,30 @@\n       return newSettings;\n     });\n   };\n \n+  // 기본 휴게시간을 모든 비휴일 요일에 적용하는 함수\n+  const handleApplyLunchTimeToAll = (sourceDay: keyof typeof weekDaySettings) => {\n+    const sourceLunchTime = weekDaySettings[sourceDay].lunchTime;\n+    const allDayKeys: (keyof typeof weekDaySettings)[] = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n+    \n+    setWeekDaySettings(prev => {\n+      const newSettings = { ...prev };\n+      \n+      allDayKeys.forEach(dayKey => {\n+        // 휴일이 아닌 요일에만 적용\n+        if (dayKey !== sourceDay && !newSettings[dayKey].isHoliday) {\n+          newSettings[dayKey] = {\n+            ...newSettings[dayKey],\n+            lunchTime: { ...sourceLunchTime }\n+          };\n+        }\n+      });\n+      \n+      return newSettings;\n+    });\n+  };\n+\n   const handleRemoveBreakTime = (day: keyof typeof weekDaySettings, index: number) => {\n     setWeekDaySettings(prev => ({\n       ...prev,\n       [day]: {\n@@ -1481,58 +1449,55 @@\n                         </WorkingHoursLabel>\n                         \n                         {/* 기본 휴게시간 섹션 추가 */}\n                         <BreakTimesSection>\n-                          <BreakTimesLabel>\n+                          <WorkingHoursLabel>\n                             {daySettings.lunchTime.name}\n-                          </BreakTimesLabel>\n-                          {daySettings.lunchTime.start > 0 && daySettings.lunchTime.end > 0 && (\n-                            <BreakTimeRow>\n-                              <BreakTimeInput\n-                                type=\"text\"\n-                                value={daySettings.lunchTime.name}\n-                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleLunchTimeChange(key, 'name', e.target.value)}\n-                                style={{ minWidth: '120px' }}\n-                              />\n-                              <TimeSelectContainer>\n-                                <HourSelect\n-                                  value={minutesToHourMinute(daySettings.lunchTime.start).hour}\n-                                  onChange={(e) => handleLunchTimeDropdownChange(key, 'start', 'hour', e.target.value)}\n-                                >\n-                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n-                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n-                                  ))}\n-                                </HourSelect>\n-                                <span>:</span>\n-                                <MinuteSelect\n-                                  value={minutesToHourMinute(daySettings.lunchTime.start).minute}\n-                                  onChange={(e) => handleLunchTimeDropdownChange(key, 'start', 'minute', e.target.value)}\n-                                >\n-                                  <option value={0}>00</option>\n-                                  <option value={30}>30</option>\n-                                </MinuteSelect>\n-                              </TimeSelectContainer>\n-                              <span>~</span>\n-                              <TimeSelectContainer>\n-                                <HourSelect\n-                                  value={minutesToHourMinute(daySettings.lunchTime.end).hour}\n-                                  onChange={(e) => handleLunchTimeDropdownChange(key, 'end', 'hour', e.target.value)}\n-                                >\n-                                  {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n-                                    <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n-                                  ))}\n-                                </HourSelect>\n-                                <span>:</span>\n-                                <MinuteSelect\n-                                  value={minutesToHourMinute(daySettings.lunchTime.end).minute}\n-                                  onChange={(e) => handleLunchTimeDropdownChange(key, 'end', 'minute', e.target.value)}\n-                                >\n-                                  <option value={0}>00</option>\n-                                  <option value={30}>30</option>\n-                                </MinuteSelect>\n-                              </TimeSelectContainer>\n-                            </BreakTimeRow>\n-                          )}\n+                            <div style={{ display: 'flex', alignItems: 'center' }}>\n+                              <WorkingHoursInputs>\n+                                <TimeSelectContainer>\n+                                  <HourSelect\n+                                    value={minutesToHourMinute(daySettings.lunchTime.start).hour}\n+                                    onChange={(e) => handleLunchTimeDropdownChange(key, 'start', 'hour', e.target.value)}\n+                                  >\n+                                    {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                      <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                    ))}\n+                                  </HourSelect>\n+                                  <span>:</span>\n+                                  <MinuteSelect\n+                                    value={minutesToHourMinute(daySettings.lunchTime.start).minute}\n+                                    onChange={(e) => handleLunchTimeDropdownChange(key, 'start', 'minute', e.target.value)}\n+                                  >\n+                                    <option value={0}>00</option>\n+                                    <option value={30}>30</option>\n+                                  </MinuteSelect>\n+                                </TimeSelectContainer>\n+                                <span>~</span>\n+                                <TimeSelectContainer>\n+                                  <HourSelect\n+                                    value={minutesToHourMinute(daySettings.lunchTime.end).hour}\n+                                    onChange={(e) => handleLunchTimeDropdownChange(key, 'end', 'hour', e.target.value)}\n+                                  >\n+                                    {Array.from({ length: 24 }, (_, i) => i + 1).map(hour => (\n+                                      <option key={hour} value={hour}>{String(hour).padStart(2, '0')}</option>\n+                                    ))}\n+                                  </HourSelect>\n+                                  <span>:</span>\n+                                  <MinuteSelect\n+                                    value={minutesToHourMinute(daySettings.lunchTime.end).minute}\n+                                    onChange={(e) => handleLunchTimeDropdownChange(key, 'end', 'minute', e.target.value)}\n+                                  >\n+                                    <option value={0}>00</option>\n+                                    <option value={30}>30</option>\n+                                  </MinuteSelect>\n+                                </TimeSelectContainer>\n+                              </WorkingHoursInputs>\n+                              <ApplyToAllButton onClick={() => handleApplyLunchTimeToAll(key)}>\n+                                모두적용\n+                              </ApplyToAllButton>\n+                            </div>\n+                          </WorkingHoursLabel>\n                         </BreakTimesSection>\n                         \n                         <BreakTimesSection>\n                           <BreakTimesLabel>\n"
                }
            ],
            "date": 1761451696622,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { AppColors } from '../../styles/colors';\nimport { AppTextStyles } from '../../styles/textStyles';\nimport type { WeeklyHolidaySettings } from '../../utils/db/types';\n\ninterface WeeklyHolidayModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  staffId?: string; // undefined면 전체 코치\n  staffList: Array<{\n    id: string;\n    name: string;\n    workingHours?: {\n      start: number;\n      end: number;\n    };\n  }>;\n  currentUser?: {\n    id: string;\n    role: 'master' | 'coach' | 'admin';\n  };\n  onSave: (settings: Omit<WeeklyHolidaySettings, 'id' | 'createdAt' | 'updatedAt'>[]) => Promise<void>;\n  existingWeeklyHolidays?: WeeklyHolidaySettings[]; // 기존 주별 휴일 설정 데이터\n}\n\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n`;\n\nconst ModalContainer = styled.div`\n  background-color: ${AppColors.surface};\n  border-radius: 12px;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  width: 90%;\n  max-width: 600px;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ModalHeader = styled.div`\n  padding: 24px;\n  border-bottom: 1px solid ${AppColors.borderLight};\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst ModalTitle = styled.h2`\n  font-size: ${AppTextStyles.headline3.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onSurface};\n  margin: 0;\n`;\n\nconst CloseButton = styled.button`\n  background: none;\n  border: none;\n  font-size: 24px;\n  color: ${AppColors.onSurface};\n  cursor: pointer;\n  padding: 4px;\n  \n  &:hover {\n    color: ${AppColors.primary};\n  }\n`;\n\nconst ModalBody = styled.div`\n  padding: 24px;\n  overflow-y: auto;\n  flex: 1;\n`;\n\nconst ModalFooter = styled.div`\n  padding: 20px 24px;\n  border-top: 1px solid ${AppColors.borderLight};\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n`;\n\nconst ErrorMessage = styled.div`\n  background-color: ${AppColors.error}15;\n  color: ${AppColors.error};\n  padding: 12px;\n  border-radius: 8px;\n  margin-bottom: 16px;\n  font-size: ${AppTextStyles.body2.fontSize};\n`;\n\nconst StaffSelector = styled.div`\n  margin-bottom: 24px;\n`;\n\nconst SelectorTitle = styled.h4`\n  font-size: ${AppTextStyles.body1.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onSurface};\n  margin: 0 0 12px 0;\n`;\n\nconst StaffCheckbox = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n  \n  input[type=\"checkbox\"] {\n    margin-right: 8px;\n  }\n  \n  label {\n    font-size: ${AppTextStyles.body2.fontSize};\n    color: ${AppColors.onSurface};\n    cursor: pointer;\n  }\n`;\n\nconst WeekSection = styled.div`\n  margin-bottom: 24px;\n`;\n\nconst WeekHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n`;\n\nconst WeekTitle = styled.h3`\n  font-size: ${AppTextStyles.body1.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onSurface};\n  margin: 0;\n`;\n\nconst WeekNavButton = styled.button`\n  background: none;\n  border: 1px solid ${AppColors.borderLight};\n  border-radius: 4px;\n  padding: 8px 12px;\n  cursor: pointer;\n  color: ${AppColors.onSurface};\n  \n  &:hover {\n    background-color: ${AppColors.background};\n  }\n`;\n\nconst WeekDaysContainer = styled.div`\n  background-color: ${AppColors.background};\n  border-radius: 8px;\n  padding: 16px;\n`;\n\nconst WeekDay = styled.div<{ $isWeekend: boolean; $isHoliday: boolean }>`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 0;\n  border-bottom: 1px solid ${AppColors.borderLight};\n  \n  &:last-child {\n    border-bottom: none;\n  }\n`;\n\nconst DayLabel = styled.div<{ $isWeekend: boolean; $isHoliday: boolean }>`\n  font-size: ${AppTextStyles.body2.fontSize};\n  color: ${props => {\n    if (props.$isHoliday) return AppColors.error;\n    if (props.$isWeekend) return AppColors.onSurface + '80';\n    return AppColors.onSurface;\n  }};\n  font-weight: ${props => props.$isWeekend ? '600' : '400'};\n`;\n\nconst DayToggle = styled.label`\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  font-size: ${AppTextStyles.body2.fontSize};\n  color: ${AppColors.onSurface};\n  \n  input[type=\"checkbox\"] {\n    margin-right: 8px;\n  }\n`;\n\nconst TimeSettingsSection = styled.div`\n  margin-bottom: 24px;\n`;\n\nconst TimeSettingsTitle = styled.h4`\n  font-size: ${AppTextStyles.body1.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onSurface};\n  margin: 0 0 12px 0;\n`;\n\nconst TimeInputContainer = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n  \n  label {\n    font-size: ${AppTextStyles.body2.fontSize};\n    color: ${AppColors.onSurface};\n    min-width: 80px;\n  }\n  \n  input {\n    width: 60px;\n    padding: 4px 8px;\n    border: 1px solid ${AppColors.borderLight};\n    border-radius: 4px;\n    font-size: ${AppTextStyles.body2.fontSize};\n  }\n  \n  span {\n    font-size: ${AppTextStyles.body2.fontSize};\n    color: ${AppColors.onSurface};\n  }\n`;\n\nconst Button = styled.button<{ $variant: 'primary' | 'secondary'; $disabled?: boolean }>`\n  padding: 10px 20px;\n  border-radius: 6px;\n  font-size: ${AppTextStyles.body2.fontSize};\n  font-weight: 500;\n  cursor: ${props => props.$disabled ? 'not-allowed' : 'pointer'};\n  border: none;\n  opacity: ${props => props.$disabled ? 0.6 : 1};\n  \n  ${props => props.$variant === 'primary' ? `\n    background-color: ${props.$disabled ? AppColors.primary + '80' : AppColors.primary};\n    color: ${AppColors.onPrimary};\n    \n    &:hover {\n      background-color: ${props.$disabled ? AppColors.primary : AppColors.primary + 'CC'};\n    }\n  ` : `\n    background-color: ${AppColors.surface};\n    color: ${AppColors.onSurface};\n    border: 1px solid ${AppColors.borderLight};\n    \n    &:hover {\n      background-color: ${props.$disabled ? AppColors.surface : AppColors.background};\n    }\n  `}\n`;\n\nconst WeeklyHolidayModal: React.FC<WeeklyHolidayModalProps> = ({\n  isOpen,\n  onClose,\n  staffId,\n  staffList,\n  currentUser,\n  onSave,\n  existingWeeklyHolidays = []\n}) => {\n  const [selectedStaffIds, setSelectedStaffIds] = useState<string[]>([]);\n  const [currentWeekStartDate, setCurrentWeekStartDate] = useState('');\n  const [weekDaySettings, setWeekDaySettings] = useState({\n    monday: false,\n    tuesday: false,\n    wednesday: false,\n    thursday: false,\n    friday: false,\n    saturday: true,  // 기본값: 주말 휴일\n    sunday: true     // 기본값: 주말 휴일\n  });\n  const [defaultStartTime, setDefaultStartTime] = useState(10);\n  const [defaultEndTime, setDefaultEndTime] = useState(20);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // 다음주 월요일 날짜 계산\n  const getNextMondayDate = (): string => {\n    const today = new Date();\n    const dayOfWeek = today.getDay();\n    const daysUntilNextMonday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;\n    const nextMonday = new Date(today);\n    nextMonday.setDate(today.getDate() + daysUntilNextMonday);\n    return nextMonday.toISOString().split('T')[0];\n  };\n\n  // 주 변경 함수\n  const changeWeek = (direction: 'prev' | 'next') => {\n    const currentDate = new Date(currentWeekStartDate + 'T00:00:00');\n    const newDate = new Date(currentDate);\n    newDate.setDate(currentDate.getDate() + (direction === 'next' ? 7 : -7));\n    setCurrentWeekStartDate(newDate.toISOString().split('T')[0]);\n  };\n\n  // 주 날짜 범위 표시\n  const getWeekDateRange = (): string => {\n    const startDate = new Date(currentWeekStartDate + 'T00:00:00');\n    const endDate = new Date(startDate);\n    endDate.setDate(startDate.getDate() + 6);\n    \n    const formatDate = (date: Date) => {\n      return `${date.getMonth() + 1}/${date.getDate()}`;\n    };\n    \n    return `${formatDate(startDate)} - ${formatDate(endDate)}`;\n  };\n\n  // 초기화\n  useEffect(() => {\n    if (isOpen) {\n      // 다음주 월요일로 초기 설정\n      const nextMonday = getNextMondayDate();\n      setCurrentWeekStartDate(nextMonday);\n      \n      // 직원 선택 초기화\n      if (staffId) {\n        setSelectedStaffIds([staffId]);\n      } else if (currentUser?.role === 'master') {\n        setSelectedStaffIds([]);\n      } else if (currentUser?.id) {\n        setSelectedStaffIds([currentUser.id]);\n      }\n\n      // 기본 근무시간 설정 (첫 번째 선택된 직원 기준)\n      const firstStaffId = staffId || selectedStaffIds[0];\n      if (firstStaffId) {\n        const staff = staffList.find(s => s.id === firstStaffId);\n        if (staff?.workingHours) {\n          setDefaultStartTime(staff.workingHours.start);\n          setDefaultEndTime(staff.workingHours.end);\n        }\n      }\n\n      setError(null);\n      setIsLoading(false);\n    }\n  }, [isOpen, staffId, currentUser, staffList, selectedStaffIds]);\n\n  // 기존 설정 로드\n  useEffect(() => {\n    if (isOpen && currentWeekStartDate && selectedStaffIds.length > 0) {\n      const existingSetting = existingWeeklyHolidays.find(\n        setting => setting.weekStartDate === currentWeekStartDate && \n                  selectedStaffIds.includes(setting.staffId)\n      );\n      \n      if (existingSetting) {\n        setWeekDaySettings(existingSetting.weekDays);\n        if (existingSetting.workingHours) {\n          setDefaultStartTime(existingSetting.workingHours.start);\n          setDefaultEndTime(existingSetting.workingHours.end);\n        }\n      } else {\n        // 기본값으로 리셋 (주말만 휴일)\n        setWeekDaySettings({\n          monday: false,\n          tuesday: false,\n          wednesday: false,\n          thursday: false,\n          friday: false,\n          saturday: true,\n          sunday: true\n        });\n      }\n    }\n  }, [isOpen, currentWeekStartDate, selectedStaffIds, existingWeeklyHolidays]);\n\n  const handleStaffToggle = (staffId: string) => {\n    setSelectedStaffIds(prev => \n      prev.includes(staffId)\n        ? prev.filter(id => id !== staffId)\n        : [...prev, staffId]\n    );\n  };\n\n  const handleDayToggle = (day: keyof typeof weekDaySettings) => {\n    setWeekDaySettings(prev => ({\n      ...prev,\n      [day]: !prev[day]\n    }));\n  };\n\n  const handleSave = async () => {\n    if (selectedStaffIds.length === 0) {\n      setError('코치를 선택해주세요.');\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const settings: Omit<WeeklyHolidaySettings, 'id' | 'createdAt' | 'updatedAt'>[] = [];\n      \n      selectedStaffIds.forEach(staffId => {\n        settings.push({\n          staffId,\n          weekStartDate: currentWeekStartDate,\n          weekDays: weekDaySettings,\n          workingHours: {\n            start: defaultStartTime,\n            end: defaultEndTime\n          }\n        });\n      });\n      \n      await onSave(settings);\n      onClose();\n    } catch (error) {\n      console.error('주별 휴일 설정 저장 중 오류 발생:', error);\n      setError('휴일 설정 저장 중 오류가 발생했습니다. 다시 시도해주세요.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  const dayLabels = [\n    { key: 'monday' as const, label: '월요일', isWeekend: false },\n    { key: 'tuesday' as const, label: '화요일', isWeekend: false },\n    { key: 'wednesday' as const, label: '수요일', isWeekend: false },\n    { key: 'thursday' as const, label: '목요일', isWeekend: false },\n    { key: 'friday' as const, label: '금요일', isWeekend: false },\n    { key: 'saturday' as const, label: '토요일', isWeekend: true },\n    { key: 'sunday' as const, label: '일요일', isWeekend: true }\n  ];\n\n  return (\n    <ModalOverlay onClick={onClose}>\n      <ModalContainer onClick={e => e.stopPropagation()}>\n        <ModalHeader>\n          <ModalTitle>\n            {staffId ? `${staffList.find(s => s.id === staffId)?.name} 코치 주별 휴일설정` : '코치 주별 휴일설정'}\n          </ModalTitle>\n          <CloseButton onClick={onClose}>×</CloseButton>\n        </ModalHeader>\n        \n        <ModalBody>\n          {/* 에러 메시지 표시 */}\n          {error && (\n            <ErrorMessage>{error}</ErrorMessage>\n          )}\n\n          {/* 코치 선택 (master 권한인 경우만) */}\n          {currentUser?.role === 'master' && !staffId && (\n            <StaffSelector>\n              <SelectorTitle>코치 선택</SelectorTitle>\n              {staffList.map(staff => (\n                <StaffCheckbox key={staff.id}>\n                  <input\n                    type=\"checkbox\"\n                    id={`staff-${staff.id}`}\n                    checked={selectedStaffIds.includes(staff.id)}\n                    onChange={() => handleStaffToggle(staff.id)}\n                  />\n                  <label htmlFor={`staff-${staff.id}`}>{staff.name}</label>\n                </StaffCheckbox>\n              ))}\n            </StaffSelector>\n          )}\n\n          {/* 근무시간 설정 */}\n          <TimeSettingsSection>\n            <TimeSettingsTitle>기본 근무시간</TimeSettingsTitle>\n            <TimeInputContainer>\n              <label>시작 시간:</label>\n              <input\n                type=\"number\"\n                min=\"0\"\n                max=\"23\"\n                value={defaultStartTime}\n                onChange={(e) => setDefaultStartTime(Number(e.target.value))}\n              />\n              <span>시</span>\n            </TimeInputContainer>\n            <TimeInputContainer>\n              <label>종료 시간:</label>\n              <input\n                type=\"number\"\n                min=\"1\"\n                max=\"24\"\n                value={defaultEndTime}\n                onChange={(e) => setDefaultEndTime(Number(e.target.value))}\n              />\n              <span>시</span>\n            </TimeInputContainer>\n          </TimeSettingsSection>\n\n          {/* 주별 휴일설정 */}\n          <WeekSection>\n            <WeekHeader>\n              <WeekTitle>\n                {getWeekDateRange()}\n              </WeekTitle>\n              <div>\n                <WeekNavButton onClick={() => changeWeek('prev')}>이전주</WeekNavButton>\n                <WeekNavButton onClick={() => changeWeek('next')} style={{ marginLeft: '8px' }}>다음주</WeekNavButton>\n              </div>\n            </WeekHeader>\n            \n            <div style={{ fontSize: '14px', marginBottom: '12px', color: AppColors.onSurface + '80' }}>\n              체크하면 휴일, 체크 해제하면 근무일입니다.\n            </div>\n            \n            <WeekDaysContainer>\n              {dayLabels.map(({ key, label, isWeekend }) => (\n                <WeekDay key={key} $isWeekend={isWeekend} $isHoliday={weekDaySettings[key]}>\n                  <DayLabel $isWeekend={isWeekend} $isHoliday={weekDaySettings[key]}>\n                    {label}\n                  </DayLabel>\n                  <DayToggle>\n                    <input\n                      type=\"checkbox\"\n                      checked={weekDaySettings[key]}\n                      onChange={() => handleDayToggle(key)}\n                    />\n                    휴일\n                  </DayToggle>\n                </WeekDay>\n              ))}\n            </WeekDaysContainer>\n          </WeekSection>\n        </ModalBody>\n\n        <ModalFooter>\n          <Button $variant=\"secondary\" onClick={onClose} $disabled={isLoading}>\n            취소\n          </Button>\n          <Button $variant=\"primary\" onClick={handleSave} $disabled={isLoading || selectedStaffIds.length === 0}>\n            {isLoading ? '저장 중...' : '저장'}\n          </Button>\n        </ModalFooter>\n      </ModalContainer>\n    </ModalOverlay>\n  );\n};\n\nexport default WeeklyHolidayModal;"
        }
    ]
}