{
    "sourceFile": "src/pages/ExercisePrescriptionPage.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 26,
            "patches": [
                {
                    "date": 1761379597392,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1761461532733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,105 +5,491 @@\n import { AppTextStyles } from '../styles/textStyles';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n-  padding: 40px 20px;\n+  display: flex;\n   background: ${AppColors.background};\n-  display: flex;\n-  justify-content: center;\n-  align-items: center;\n `;\n \n-const ContentContainer = styled.div`\n+const SearchPanel = styled.div`\n+  width: 300px;\n   background: ${AppColors.surface};\n-  border-radius: 16px;\n-  padding: 48px;\n-  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);\n-  text-align: center;\n-  max-width: 600px;\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 20px;\n+  overflow-y: auto;\n+`;\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n   width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n `;\n \n-const Title = styled.h1`\n-  font-size: ${AppTextStyles.title1.fontSize};\n-  font-weight: 700;\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n   color: ${AppColors.onBackground};\n-  margin: 0 0 24px 0;\n+  margin-bottom: 4px;\n `;\n \n-const Description = styled.p`\n-  font-size: ${AppTextStyles.body1.fontSize};\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n   color: ${AppColors.onInput1};\n-  margin: 0 0 32px 0;\n-  line-height: 1.6;\n `;\n \n-const InfoCard = styled.div`\n-  background: #f8f9fa;\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  min-height: calc(100vh - 40px);\n+`;\n+\n+const PrescriptionTitle = styled.h1`\n+  text-align: center;\n+  font-size: 24px;\n+  font-weight: bold;\n+  margin-bottom: 30px;\n+  color: ${AppColors.onBackground};\n+`;\n+\n+const FormRow = styled.div`\n+  display: flex;\n+  gap: 20px;\n+  margin-bottom: 20px;\n+  align-items: center;\n+`;\n+\n+const FormGroup = styled.div`\n+  flex: 1;\n+`;\n+\n+const FormLabel = styled.label`\n+  display: block;\n+  font-size: ${AppTextStyles.label1.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 8px;\n+`;\n+\n+const FormInput = styled.input`\n+  width: 100%;\n+  padding: 10px;\n   border: 1px solid ${AppColors.borderLight};\n-  border-radius: 12px;\n-  padding: 24px;\n-  margin: 24px 0;\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n `;\n \n-const InfoLabel = styled.div`\n-  font-size: ${AppTextStyles.label2.fontSize};\n+const FormTextarea = styled.textarea`\n+  width: 100%;\n+  padding: 10px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  resize: vertical;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const CheckboxGroup = styled.div`\n+  display: flex;\n+  flex-wrap: wrap;\n+  gap: 15px;\n+`;\n+\n+const CheckboxItem = styled.label`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  cursor: pointer;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+`;\n+\n+const Checkbox = styled.input`\n+  margin: 0;\n+`;\n+\n+const ImageSection = styled.div`\n+  display: flex;\n+  gap: 20px;\n+  margin-bottom: 20px;\n+`;\n+\n+const ImageBox = styled.div`\n+  flex: 1;\n+  height: 200px;\n+  border: 2px dashed ${AppColors.borderLight};\n+  border-radius: 8px;\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  justify-content: center;\n   color: ${AppColors.onInput1};\n-  margin-bottom: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n `;\n \n-const InfoValue = styled.div`\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: 600;\n+const ConsentSection = styled.div`\n+  margin-top: 40px;\n+  padding: 20px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  background: #f9f9f9;\n+`;\n+\n+const ConsentText = styled.p`\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  line-height: 1.6;\n   color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n `;\n \n-const ComingSoonBadge = styled.div`\n-  display: inline-block;\n-  background: ${AppColors.primary};\n-  color: ${AppColors.onPrimary};\n-  padding: 8px 16px;\n-  border-radius: 20px;\n-  font-size: ${AppTextStyles.label2.fontSize};\n-  font-weight: 500;\n-  margin-bottom: 16px;\n+const SignatureArea = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: flex-end;\n `;\n \n+const SignatureBox = styled.div`\n+  width: 200px;\n+  height: 80px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  background: white;\n+  position: relative;\n+  \n+  &::after {\n+    content: 'ì„œëª…';\n+    position: absolute;\n+    bottom: -25px;\n+    left: 50%;\n+    transform: translateX(-50%);\n+    font-size: ${AppTextStyles.body3.fontSize};\n+    color: ${AppColors.onInput1};\n+  }\n+`;\n+\n+const DateArea = styled.div`\n+  text-align: right;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  color: ${AppColors.onBackground};\n+`;\n+\n+interface Member {\n+  id: string;\n+  name: string;\n+  birthDate: string;\n+  phone: string;\n+}\n+\n const ExercisePrescriptionPage: React.FC = () => {\n   const [searchParams] = useSearchParams();\n-  const [memberId, setMemberId] = useState<string>('');\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    },\n+    painHistory: '',\n+  });\n \n+  // ìƒ˜í”Œ íšŒì› ë°ì´í„° (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì˜¬ ë°ì´í„°)\n+  const [members] = useState<Member[]>([\n+    { id: '1', name: 'ê¹€ì² ìˆ˜', birthDate: '1985-03-15', phone: '010-1234-5678' },\n+    { id: '2', name: 'ì´ì˜í¬', birthDate: '1990-07-22', phone: '010-2345-6789' },\n+    { id: '3', name: 'ë°•ë¯¼ìˆ˜', birthDate: '1988-11-08', phone: '010-3456-7890' },\n+    { id: '4', name: 'ìµœì§€ì˜', birthDate: '1992-05-30', phone: '010-4567-8901' },\n+  ]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n   useEffect(() => {\n     const memberIdParam = searchParams.get('memberId');\n     if (memberIdParam) {\n-      setMemberId(memberIdParam);\n+      const member = members.find(m => m.id === memberIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n     }\n-  }, [searchParams]);\n+  }, [searchParams, members]);\n \n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value,\n+    }));\n+  };\n+\n+  const handleCheckboxChange = (field: string, checked: boolean) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      medicalHistory: {\n+        ...prev.medicalHistory,\n+        [field]: checked,\n+      },\n+    }));\n+  };\n+\n   return (\n     <PageContainer>\n-      <ContentContainer>\n-        <ComingSoonBadge>ê°œë°œ ì¤‘</ComingSoonBadge>\n-        <Title>ìš´ë™ì²˜ë°© í˜ì´ì§€</Title>\n-        <Description>\n-          ê°œì¸ ë§ì¶¤í˜• ìš´ë™ í”„ë¡œê·¸ë¨ì„ ì œê³µí•˜ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.\n-          <br />\n-          í˜„ì¬ ê°œë°œ ì¤‘ì´ë©°, ê³§ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•  ì˜ˆì •ì…ë‹ˆë‹¤.\n-        </Description>\n-        \n-        {memberId && (\n-          <InfoCard>\n-            <InfoLabel>ì „ë‹¬ë°›ì€ íšŒì› ID</InfoLabel>\n-            <InfoValue>{memberId}</InfoValue>\n-          </InfoCard>\n-        )}\n-        \n-        <Description>\n-          ì´ í˜ì´ì§€ëŠ” QR ì½”ë“œë¥¼ í†µí•´ ì ‘ê·¼ë˜ì—ˆìœ¼ë©°,\n-          <br />\n-          í–¥í›„ íšŒì›ë³„ ë§ì¶¤ ìš´ë™ì²˜ë°© ì •ë³´ë¥¼ ì œê³µí•  ì˜ˆì •ì…ë‹ˆë‹¤.\n-        </Description>\n-      </ContentContainer>\n+      <SearchPanel>\n+        <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birthDate}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+        </MemberList>\n+      </SearchPanel>\n+\n+      <PrescriptionPanel>\n+        <PrescriptionContainer>\n+          <PrescriptionTitle>ìš´ë™ì²˜ë°©ì„œ</PrescriptionTitle>\n+          \n+          {/* ê¸°ë³¸ ì •ë³´ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ì„±ëª…</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                value={selectedMember?.name || ''}\n+                readOnly\n+                style={{ background: '#f5f5f5' }}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>ìƒë…„ì›”ì¼</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                value={selectedMember?.birthDate || ''}\n+                readOnly\n+                style={{ background: '#f5f5f5' }}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>í‚¤/ì²´ì¤‘</FormLabel>\n+              <div style={{ display: 'flex', gap: '10px' }}>\n+                <FormInput\n+                  type=\"text\"\n+                  placeholder=\"í‚¤(cm)\"\n+                  value={formData.height}\n+                  onChange={(e) => handleInputChange('height', e.target.value)}\n+                />\n+                <FormInput\n+                  type=\"text\"\n+                  placeholder=\"ì²´ì¤‘(kg)\"\n+                  value={formData.weight}\n+                  onChange={(e) => handleInputChange('weight', e.target.value)}\n+                />\n+              </div>\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n+                value={formData.footSize}\n+                onChange={(e) => handleInputChange('footSize', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë³µìš©ì¤‘ì¸ ì•½ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n+                value={formData.medications}\n+                onChange={(e) => handleInputChange('medications', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë³‘ë ¥ì‚¬í•­ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ë³‘ë ¥ì‚¬í•­</FormLabel>\n+              <CheckboxGroup>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.musculoskeletal}\n+                    onChange={(e) => handleCheckboxChange('musculoskeletal', e.target.checked)}\n+                  />\n+                  ê·¼ê³¨ê²©ê³„ì§ˆí™˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.cardiovascular}\n+                    onChange={(e) => handleCheckboxChange('cardiovascular', e.target.checked)}\n+                  />\n+                  ì‹¬í˜ˆê´€ê³„ì§ˆí™˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.diabetes}\n+                    onChange={(e) => handleCheckboxChange('diabetes', e.target.checked)}\n+                  />\n+                  ë‹¹ë‡¨\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.osteoporosis}\n+                    onChange={(e) => handleCheckboxChange('osteoporosis', e.target.checked)}\n+                  />\n+                  ê³¨ë‹¤ê³µì¦\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.thyroid}\n+                    onChange={(e) => handleCheckboxChange('thyroid', e.target.checked)}\n+                  />\n+                  ê°‘ìƒì„ \n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.varicose}\n+                    onChange={(e) => handleCheckboxChange('varicose', e.target.checked)}\n+                  />\n+                  ì •ë§¥ë¥˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.arthritis}\n+                    onChange={(e) => handleCheckboxChange('arthritis', e.target.checked)}\n+                  />\n+                  ê´€ì ˆì—¼\n+                </CheckboxItem>\n+              </CheckboxGroup>\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n+          <ImageSection>\n+            <ImageBox>\n+              <strong>ì •ë©´</strong>\n+              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n+            </ImageBox>\n+            <ImageBox>\n+              <strong>ì²™ì¶”</strong>\n+              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n+            </ImageBox>\n+            <ImageBox>\n+              <strong>í›„ë©´</strong>\n+              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n+            </ImageBox>\n+          </ImageSection>\n+\n+          {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </FormLabel>\n+              <FormTextarea\n+                rows={6}\n+                placeholder=\"í†µì¦ íˆìŠ¤í† ë¦¬, ìˆ˜ìˆ  ì´ë ¥, ìš´ë™ ëª©ì  ë“±ì„ ìƒì„¸íˆ ê¸°ì…í•´ì£¼ì„¸ìš”\"\n+                value={formData.painHistory}\n+                onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë™ì˜ì„œ */}\n+          <ConsentSection>\n+            <ConsentText>\n+              ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n+            </ConsentText>\n+            <SignatureArea>\n+              <DateArea>\n+                ë‚ ì§œ: {new Date().toLocaleDateString('ko-KR')}\n+              </DateArea>\n+              <SignatureBox />\n+            </SignatureArea>\n+          </ConsentSection>\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n     </PageContainer>\n   );\n };\n \n"
                },
                {
                    "date": 1761461643356,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,10 @@\n import { useSearchParams } from 'react-router-dom';\n import styled from 'styled-components';\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member } from '../utils/db/types';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -218,19 +220,13 @@\n   font-size: ${AppTextStyles.body2.fontSize};\n   color: ${AppColors.onBackground};\n `;\n \n-interface Member {\n-  id: string;\n-  name: string;\n-  birthDate: string;\n-  phone: string;\n-}\n-\n const ExercisePrescriptionPage: React.FC = () => {\n   const [searchParams] = useSearchParams();\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -246,24 +242,33 @@\n     },\n     painHistory: '',\n   });\n \n-  // ìƒ˜í”Œ íšŒì› ë°ì´í„° (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì˜¬ ë°ì´í„°)\n-  const [members] = useState<Member[]>([\n-    { id: '1', name: 'ê¹€ì² ìˆ˜', birthDate: '1985-03-15', phone: '010-1234-5678' },\n-    { id: '2', name: 'ì´ì˜í¬', birthDate: '1990-07-22', phone: '010-2345-6789' },\n-    { id: '3', name: 'ë°•ë¯¼ìˆ˜', birthDate: '1988-11-08', phone: '010-3456-7890' },\n-    { id: '4', name: 'ìµœì§€ì˜', birthDate: '1992-05-30', phone: '010-4567-8901' },\n-  ]);\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n \n+    loadMembers();\n+  }, []);\n+\n   const filteredMembers = members.filter(member =>\n     member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n   );\n \n   useEffect(() => {\n-    const memberIdParam = searchParams.get('memberId');\n-    if (memberIdParam) {\n-      const member = members.find(m => m.id === memberIdParam);\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid ë˜ëŠ” memberId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    if (userIdParam && members.length > 0) {\n+      const member = members.find(m => m.id === userIdParam);\n       if (member) {\n         setSelectedMember(member);\n       }\n     }\n@@ -307,9 +312,9 @@\n               selected={selectedMember?.id === member.id}\n               onClick={() => handleMemberSelect(member)}\n             >\n               <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birthDate}</MemberInfo>\n+              <MemberInfo>{member.birth}</MemberInfo>\n               <MemberInfo>{member.phone}</MemberInfo>\n             </MemberItem>\n           ))}\n         </MemberList>\n@@ -333,9 +338,9 @@\n             <FormGroup>\n               <FormLabel>ìƒë…„ì›”ì¼</FormLabel>\n               <FormInput\n                 type=\"text\"\n-                value={selectedMember?.birthDate || ''}\n+                value={selectedMember?.birth || ''}\n                 readOnly\n                 style={{ background: '#f5f5f5' }}\n               />\n             </FormGroup>\n"
                },
                {
                    "date": 1761461760471,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,8 +19,56 @@\n   padding: 20px;\n   overflow-y: auto;\n `;\n \n+const ButtonPanel = styled.div`\n+  width: 80px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 20px 10px;\n+  display: flex;\n+  flex-direction: column;\n+  gap: 15px;\n+  align-items: center;\n+`;\n+\n+const ActionButton = styled.button`\n+  width: 60px;\n+  height: 60px;\n+  border: none;\n+  border-radius: 12px;\n+  background: ${AppColors.primary};\n+  color: ${AppColors.onPrimary};\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  font-weight: 600;\n+  cursor: pointer;\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  justify-content: center;\n+  gap: 4px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${AppColors.primary}dd;\n+    transform: translateY(-2px);\n+  }\n+  \n+  &:active {\n+    transform: translateY(0);\n+  }\n+`;\n+\n+const ButtonIcon = styled.div`\n+  font-size: 20px;\n+  line-height: 1;\n+`;\n+\n+const ButtonText = styled.div`\n+  font-size: 10px;\n+  line-height: 1;\n+`;\n+\n const SearchTitle = styled.h2`\n   font-size: ${AppTextStyles.title2.fontSize};\n   font-weight: 600;\n   color: ${AppColors.onBackground};\n@@ -294,8 +342,36 @@\n       },\n     }));\n   };\n \n+  const handleSave = () => {\n+    // TODO: ë°ì´í„° ì €ì¥ ë¡œì§ êµ¬í˜„\n+    console.log('ì €ì¥:', { selectedMember, formData });\n+    alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+  };\n+\n+  const handleShare = () => {\n+    // TODO: ê³µìœ  ë¡œì§ êµ¬í˜„\n+    console.log('ê³µìœ :', { selectedMember, formData });\n+    if (navigator.share) {\n+      navigator.share({\n+        title: 'ìš´ë™ì²˜ë°©ì„œ',\n+        text: `${selectedMember?.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+        url: window.location.href,\n+      });\n+    } else {\n+      // fallback: ë§í¬ ë³µì‚¬\n+      navigator.clipboard.writeText(window.location.href);\n+      alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  const handlePrint = () => {\n+    // TODO: ì¸ì‡„ ë¡œì§ êµ¬í˜„ (PDF ìƒì„± ë“±)\n+    console.log('ì¶œë ¥:', { selectedMember, formData });\n+    window.print();\n+  };\n+\n   return (\n     <PageContainer>\n       <SearchPanel>\n         <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n@@ -319,8 +395,25 @@\n           ))}\n         </MemberList>\n       </SearchPanel>\n \n+      <ButtonPanel>\n+        <ActionButton onClick={handleSave} title=\"ì €ì¥\">\n+          <ButtonIcon>ğŸ’¾</ButtonIcon>\n+          <ButtonText>ì €ì¥</ButtonText>\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          <ButtonIcon>ğŸ“¤</ButtonIcon>\n+          <ButtonText>ê³µìœ </ButtonText>\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¶œë ¥\">\n+          <ButtonIcon>ğŸ–¨ï¸</ButtonIcon>\n+          <ButtonText>ì¶œë ¥</ButtonText>\n+        </ActionButton>\n+      </ButtonPanel>\n+\n       <PrescriptionPanel>\n         <PrescriptionContainer>\n           <PrescriptionTitle>ìš´ë™ì²˜ë°©ì„œ</PrescriptionTitle>\n           \n"
                },
                {
                    "date": 1761461831393,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -437,25 +437,26 @@\n                 style={{ background: '#f5f5f5' }}\n               />\n             </FormGroup>\n             <FormGroup>\n-              <FormLabel>í‚¤/ì²´ì¤‘</FormLabel>\n-              <div style={{ display: 'flex', gap: '10px' }}>\n-                <FormInput\n-                  type=\"text\"\n-                  placeholder=\"í‚¤(cm)\"\n-                  value={formData.height}\n-                  onChange={(e) => handleInputChange('height', e.target.value)}\n-                />\n-                <FormInput\n-                  type=\"text\"\n-                  placeholder=\"ì²´ì¤‘(kg)\"\n-                  value={formData.weight}\n-                  onChange={(e) => handleInputChange('weight', e.target.value)}\n-                />\n-              </div>\n+              <FormLabel>í‚¤</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"í‚¤(cm)\"\n+                value={formData.height}\n+                onChange={(e) => handleInputChange('height', e.target.value)}\n+              />\n             </FormGroup>\n             <FormGroup>\n+              <FormLabel>ì²´ì¤‘</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ì²´ì¤‘(kg)\"\n+                value={formData.weight}\n+                onChange={(e) => handleInputChange('weight', e.target.value)}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n               <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n               <FormInput\n                 type=\"text\"\n                 placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n"
                },
                {
                    "date": 1761461874069,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,9 +143,9 @@\n const FormRow = styled.div`\n   display: flex;\n   gap: 20px;\n   margin-bottom: 20px;\n-  align-items: center;\n+  align-items: flex-start;\n `;\n \n const FormGroup = styled.div`\n   flex: 1;\n"
                },
                {
                    "date": 1761461935758,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,9 +141,9 @@\n `;\n \n const FormRow = styled.div`\n   display: flex;\n-  gap: 20px;\n+  gap: 15px;\n   margin-bottom: 20px;\n   align-items: flex-start;\n `;\n \n@@ -164,8 +164,9 @@\n   padding: 10px;\n   border: 1px solid ${AppColors.borderLight};\n   border-radius: 6px;\n   font-size: ${AppTextStyles.body2.fontSize};\n+  box-sizing: border-box;\n   \n   &:focus {\n     outline: none;\n     border-color: ${AppColors.primary};\n@@ -178,8 +179,9 @@\n   border: 1px solid ${AppColors.borderLight};\n   border-radius: 6px;\n   font-size: ${AppTextStyles.body2.fontSize};\n   resize: vertical;\n+  box-sizing: border-box;\n   \n   &:focus {\n     outline: none;\n     border-color: ${AppColors.primary};\n"
                },
                {
                    "date": 1761462139513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,16 +9,25 @@\n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n   background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n `;\n \n const SearchPanel = styled.div`\n   width: 300px;\n   background: ${AppColors.surface};\n   border-right: 1px solid ${AppColors.borderLight};\n   padding: 20px;\n   overflow-y: auto;\n+  \n+  @media print {\n+    display: none;\n+  }\n `;\n \n const ButtonPanel = styled.div`\n   width: 80px;\n@@ -28,8 +37,12 @@\n   display: flex;\n   flex-direction: column;\n   gap: 15px;\n   align-items: center;\n+  \n+  @media print {\n+    display: none;\n+  }\n `;\n \n const ActionButton = styled.button`\n   width: 60px;\n@@ -120,8 +133,13 @@\n const PrescriptionPanel = styled.div`\n   flex: 1;\n   padding: 20px;\n   overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n `;\n \n const PrescriptionContainer = styled.div`\n   max-width: 800px;\n@@ -129,8 +147,16 @@\n   background: white;\n   padding: 40px;\n   box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n   min-height: calc(100vh - 40px);\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20px;\n+    margin: 0;\n+    max-width: none;\n+    min-height: auto;\n+  }\n `;\n \n const PrescriptionTitle = styled.h1`\n   text-align: center;\n@@ -345,33 +371,268 @@\n     }));\n   };\n \n   const handleSave = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+    \n     // TODO: ë°ì´í„° ì €ì¥ ë¡œì§ êµ¬í˜„\n     console.log('ì €ì¥:', { selectedMember, formData });\n     alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n   };\n \n   const handleShare = () => {\n-    // TODO: ê³µìœ  ë¡œì§ êµ¬í˜„\n-    console.log('ê³µìœ :', { selectedMember, formData });\n-    if (navigator.share) {\n-      navigator.share({\n-        title: 'ìš´ë™ì²˜ë°©ì„œ',\n-        text: `${selectedMember?.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-        url: window.location.href,\n-      });\n-    } else {\n-      // fallback: ë§í¬ ë³µì‚¬\n-      navigator.clipboard.writeText(window.location.href);\n-      alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n     }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(`\n+        <!DOCTYPE html>\n+        <html>\n+        <head>\n+          <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+          <style>\n+            body { font-family: Arial, sans-serif; margin: 20px; }\n+            .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n+            .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n+            .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n+            .form-group { flex: 1; }\n+            .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n+            .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n+            .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n+            .image-section { display: flex; gap: 20px; margin-bottom: 20px; }\n+            .image-box { flex: 1; height: 200px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n+            .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n+            .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n+            .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n+            .date-area { text-align: right; }\n+            textarea { resize: vertical; height: 100px; }\n+          </style>\n+        </head>\n+        <body>\n+          <div class=\"prescription-container\">\n+            <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n+            \n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì„±ëª…</label>\n+                <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n+                <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">í‚¤</label>\n+                <input class=\"form-input\" value=\"${formData.height}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì²´ì¤‘</label>\n+                <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n+                <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n+              </div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n+                <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n+              </div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n+                <div class=\"checkbox-group\">\n+                  ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n+                    const labels: { [key: string]: string } = {\n+                      musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n+                      cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n+                      diabetes: 'ë‹¹ë‡¨',\n+                      osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n+                      thyroid: 'ê°‘ìƒì„ ',\n+                      varicose: 'ì •ë§¥ë¥˜',\n+                      arthritis: 'ê´€ì ˆì—¼'\n+                    };\n+                    return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                  }).join('')}\n+                </div>\n+              </div>\n+            </div>\n+\n+            <div class=\"image-section\">\n+              <div class=\"image-box\"><strong>ì •ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+              <div class=\"image-box\"><strong>ì²™ì¶”</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+              <div class=\"image-box\"><strong>í›„ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n+                <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n+              </div>\n+            </div>\n+\n+            <div class=\"consent-section\">\n+              <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n+              <div class=\"signature-area\">\n+                <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n+                <div class=\"signature-box\"></div>\n+              </div>\n+            </div>\n+          </div>\n+        </body>\n+        </html>\n+      `);\n+      printWindow.document.close();\n+      \n+      // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n+      if (navigator.share) {\n+        navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: printWindow.location.href,\n+        });\n+      } else {\n+        alert('ìƒˆ ì°½ì—ì„œ ìš´ë™ì²˜ë°©ì„œë¥¼ í™•ì¸í•˜ê³  URLì„ ë³µì‚¬í•˜ì—¬ ê³µìœ í•˜ì„¸ìš”.');\n+      }\n+    }\n   };\n \n   const handlePrint = () => {\n-    // TODO: ì¸ì‡„ ë¡œì§ êµ¬í˜„ (PDF ìƒì„± ë“±)\n-    console.log('ì¶œë ¥:', { selectedMember, formData });\n-    window.print();\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(`\n+        <!DOCTYPE html>\n+        <html>\n+        <head>\n+          <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+          <style>\n+            @media print {\n+              body { margin: 0; padding: 20px; }\n+              .no-print { display: none !important; }\n+            }\n+            body { font-family: Arial, sans-serif; margin: 20px; }\n+            .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n+            .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n+            .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n+            .form-group { flex: 1; }\n+            .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n+            .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n+            .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n+            .image-section { display: flex; gap: 20px; margin-bottom: 20px; }\n+            .image-box { flex: 1; height: 200px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n+            .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n+            .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n+            .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n+            .date-area { text-align: right; }\n+            textarea { resize: vertical; height: 100px; }\n+            .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n+          </style>\n+        </head>\n+        <body>\n+          <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n+          <div class=\"prescription-container\">\n+            <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n+            \n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì„±ëª…</label>\n+                <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n+                <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">í‚¤</label>\n+                <input class=\"form-input\" value=\"${formData.height}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì²´ì¤‘</label>\n+                <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n+                <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n+              </div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n+                <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n+              </div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n+                <div class=\"checkbox-group\">\n+                  ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n+                    const labels: { [key: string]: string } = {\n+                      musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n+                      cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n+                      diabetes: 'ë‹¹ë‡¨',\n+                      osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n+                      thyroid: 'ê°‘ìƒì„ ',\n+                      varicose: 'ì •ë§¥ë¥˜',\n+                      arthritis: 'ê´€ì ˆì—¼'\n+                    };\n+                    return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                  }).join('')}\n+                </div>\n+              </div>\n+            </div>\n+\n+            <div class=\"image-section\">\n+              <div class=\"image-box\"><strong>ì •ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+              <div class=\"image-box\"><strong>ì²™ì¶”</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+              <div class=\"image-box\"><strong>í›„ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n+                <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n+              </div>\n+            </div>\n+\n+            <div class=\"consent-section\">\n+              <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n+              <div class=\"signature-area\">\n+                <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n+                <div class=\"signature-box\"></div>\n+              </div>\n+            </div>\n+          </div>\n+        </body>\n+        </html>\n+      `);\n+      printWindow.document.close();\n+      \n+      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n+      setTimeout(() => {\n+        printWindow.print();\n+      }, 1000);\n+    }\n   };\n \n   return (\n     <PageContainer>\n"
                },
                {
                    "date": 1761462269781,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -233,15 +233,15 @@\n `;\n \n const ImageSection = styled.div`\n   display: flex;\n-  gap: 20px;\n+  gap: 10px;\n   margin-bottom: 20px;\n `;\n \n const ImageBox = styled.div`\n   flex: 1;\n-  height: 200px;\n+  height: 300px;\n   border: 2px dashed ${AppColors.borderLight};\n   border-radius: 8px;\n   display: flex;\n   flex-direction: column;\n@@ -404,10 +404,10 @@\n             .form-group { flex: 1; }\n             .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n             .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n             .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n-            .image-section { display: flex; gap: 20px; margin-bottom: 20px; }\n-            .image-box { flex: 1; height: 200px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n+            .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n+            .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n             .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n             .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n             .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n             .date-area { text-align: right; }\n@@ -534,10 +534,10 @@\n             .form-group { flex: 1; }\n             .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n             .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n             .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n-            .image-section { display: flex; gap: 20px; margin-bottom: 20px; }\n-            .image-box { flex: 1; height: 200px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n+            .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n+            .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n             .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n             .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n             .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n             .date-area { text-align: right; }\n"
                },
                {
                    "date": 1761463031108,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,11 @@\n import styled from 'styled-components';\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n-import { Member } from '../utils/db/types';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n+import BodyImageCanvas from '../components/BodyImageCanvas';\n+import bodyImageSvgs from '../utils/bodyImageSvgs';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -237,21 +239,8 @@\n   gap: 10px;\n   margin-bottom: 20px;\n `;\n \n-const ImageBox = styled.div`\n-  flex: 1;\n-  height: 300px;\n-  border: 2px dashed ${AppColors.borderLight};\n-  border-radius: 8px;\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  justify-content: center;\n-  color: ${AppColors.onInput1};\n-  font-size: ${AppTextStyles.body2.fontSize};\n-`;\n-\n const ConsentSection = styled.div`\n   margin-top: 40px;\n   padding: 20px;\n   border: 1px solid ${AppColors.borderLight};\n@@ -301,8 +290,9 @@\n   const [searchParams] = useSearchParams();\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -314,10 +304,15 @@\n       osteoporosis: false,\n       thyroid: false,\n       varicose: false,\n       arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: '',\n+    bodyImages: {\n+      front: [] as BodyImagePoint[],\n+      spine: [] as BodyImagePoint[],\n+      back: [] as BodyImagePoint[],\n     },\n-    painHistory: '',\n   });\n \n   // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n   useEffect(() => {\n@@ -334,8 +329,90 @@\n \n     loadMembers();\n   }, []);\n \n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+          bodyImages: {\n+            front: [],\n+            spine: [],\n+            back: [],\n+          },\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+            bodyImages: prescription.bodyImages,\n+          });\n+          console.log('ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+            bodyImages: {\n+              front: [],\n+              spine: [],\n+              back: [],\n+            },\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„±');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n   const filteredMembers = members.filter(member =>\n     member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n   );\n \n@@ -370,130 +447,226 @@\n       },\n     }));\n   };\n \n-  const handleSave = () => {\n+  // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n+  const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n+    const newPoint: BodyImagePoint = {\n+      ...point,\n+      id: `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`, // ì„ì‹œ ID ìƒì„±\n+    };\n+\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: [...prev.bodyImages[imageType], newPoint],\n+      },\n+    }));\n+  };\n+\n+  const handleUpdateBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string, updates: Partial<Omit<BodyImagePoint, 'id'>>) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: prev.bodyImages[imageType].map(point =>\n+          point.id === pointId ? { ...point, ...updates } : point\n+        ),\n+      },\n+    }));\n+  };\n+\n+  const handleDeleteBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: prev.bodyImages[imageType].filter(point => point.id !== pointId),\n+      },\n+    }));\n+  };\n+\n+  const handleSave = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n     \n-    // TODO: ë°ì´í„° ì €ì¥ ë¡œì§ êµ¬í˜„\n-    console.log('ì €ì¥:', { selectedMember, formData });\n-    alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-  };\n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: formData.bodyImages,\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+      };\n \n-  const handleShare = () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸\n+        await dbManager.exercisePrescription.updateExercisePrescription(\n+          currentPrescription.id,\n+          prescriptionData\n+        );\n+        console.log('ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', currentPrescription.id);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n     }\n+  };\n \n-    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(`\n-        <!DOCTYPE html>\n-        <html>\n-        <head>\n-          <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n-          <style>\n-            body { font-family: Arial, sans-serif; margin: 20px; }\n-            .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n-            .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n-            .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n-            .form-group { flex: 1; }\n-            .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n-            .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-            .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n-            .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n-            .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n-            .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n-            .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n-            .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n-            .date-area { text-align: right; }\n-            textarea { resize: vertical; height: 100px; }\n-          </style>\n-        </head>\n-        <body>\n-          <div class=\"prescription-container\">\n-            <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n-            \n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì„±ëª…</label>\n-                <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n-                <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">í‚¤</label>\n-                <input class=\"form-input\" value=\"${formData.height}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì²´ì¤‘</label>\n-                <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n-                <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n-              </div>\n+  const generatePrescriptionHTML = () => {\n+    if (!selectedMember) return '';\n+\n+    // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ë“¤ì„ HTMLë¡œ ë³€í™˜\n+    const generatePointsHTML = (points: BodyImagePoint[], imageType: string) => {\n+      if (points.length === 0) return `<div class=\"image-box\"><strong>${imageType}</strong><br><small>ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</small></div>`;\n+      \n+      const pointsHtml = points.map(point => \n+        `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y}%; width: 8px; height: 8px; background: ${point.color || '#ff0000'}; border: 1px solid white; border-radius: 50%; transform: translate(-50%, -50%);\"></div>\n+         ${point.memo ? `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y + 5}%; font-size: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 4px; border-radius: 2px; transform: translateX(-50%); white-space: nowrap;\">${point.memo}</div>` : ''}`\n+      ).join('');\n+      \n+      return `<div class=\"image-box\" style=\"position: relative;\"><strong>${imageType}</strong><br><small>${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨</small>${pointsHtml}</div>`;\n+    };\n+\n+    return `\n+      <!DOCTYPE html>\n+      <html>\n+      <head>\n+        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+        <style>\n+          @media print {\n+            body { margin: 0; padding: 20px; }\n+            .no-print { display: none !important; }\n+          }\n+          body { font-family: Arial, sans-serif; margin: 20px; }\n+          .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n+          .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n+          .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n+          .form-group { flex: 1; }\n+          .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n+          .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n+          .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n+          .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n+          .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n+          .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n+          .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n+          .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n+          .date-area { text-align: right; }\n+          textarea { resize: vertical; height: 100px; }\n+          .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n+        </style>\n+      </head>\n+      <body>\n+        <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n+        <div class=\"prescription-container\">\n+          <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n+          \n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì„±ëª…</label>\n+              <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n             </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n+              <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">í‚¤</label>\n+              <input class=\"form-input\" value=\"${formData.height}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì²´ì¤‘</label>\n+              <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n+              <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n+            </div>\n+          </div>\n \n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n-                <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n-              </div>\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n+              <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n             </div>\n+          </div>\n \n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n-                <div class=\"checkbox-group\">\n-                  ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n-                    const labels: { [key: string]: string } = {\n-                      musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n-                      cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n-                      diabetes: 'ë‹¹ë‡¨',\n-                      osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n-                      thyroid: 'ê°‘ìƒì„ ',\n-                      varicose: 'ì •ë§¥ë¥˜',\n-                      arthritis: 'ê´€ì ˆì—¼'\n-                    };\n-                    return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n-                  }).join('')}\n-                </div>\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n+              <div class=\"checkbox-group\">\n+                ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n+                  const labels: { [key: string]: string } = {\n+                    musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n+                    cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n+                    diabetes: 'ë‹¹ë‡¨',\n+                    osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n+                    thyroid: 'ê°‘ìƒì„ ',\n+                    varicose: 'ì •ë§¥ë¥˜',\n+                    arthritis: 'ê´€ì ˆì—¼'\n+                  };\n+                  return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                }).join('')}\n               </div>\n             </div>\n+          </div>\n \n-            <div class=\"image-section\">\n-              <div class=\"image-box\"><strong>ì •ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-              <div class=\"image-box\"><strong>ì²™ì¶”</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-              <div class=\"image-box\"><strong>í›„ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-            </div>\n+          <div class=\"image-section\">\n+            ${generatePointsHTML(formData.bodyImages.front, 'ì •ë©´')}\n+            ${generatePointsHTML(formData.bodyImages.spine, 'ì²™ì¶”')}\n+            ${generatePointsHTML(formData.bodyImages.back, 'í›„ë©´')}\n+          </div>\n \n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n-                <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n-              </div>\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n+              <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n             </div>\n+          </div>\n \n-            <div class=\"consent-section\">\n-              <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n-              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n-              <div class=\"signature-area\">\n-                <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n-                <div class=\"signature-box\"></div>\n-              </div>\n+          <div class=\"consent-section\">\n+            <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+            ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n+            <div class=\"signature-area\">\n+              <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n+              <div class=\"signature-box\"></div>\n             </div>\n           </div>\n-        </body>\n-        </html>\n-      `);\n+        </div>\n+      </body>\n+      </html>\n+    `;\n+  };\n+\n+  const handleShare = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(generatePrescriptionHTML());\n       printWindow.document.close();\n       \n       // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n       if (navigator.share) {\n@@ -516,116 +689,9 @@\n \n     // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n     const printWindow = window.open('', '_blank', 'width=800,height=600');\n     if (printWindow) {\n-      printWindow.document.write(`\n-        <!DOCTYPE html>\n-        <html>\n-        <head>\n-          <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n-          <style>\n-            @media print {\n-              body { margin: 0; padding: 20px; }\n-              .no-print { display: none !important; }\n-            }\n-            body { font-family: Arial, sans-serif; margin: 20px; }\n-            .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n-            .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n-            .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n-            .form-group { flex: 1; }\n-            .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n-            .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-            .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n-            .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n-            .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n-            .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n-            .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n-            .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n-            .date-area { text-align: right; }\n-            textarea { resize: vertical; height: 100px; }\n-            .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n-          </style>\n-        </head>\n-        <body>\n-          <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n-          <div class=\"prescription-container\">\n-            <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n-            \n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì„±ëª…</label>\n-                <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n-                <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">í‚¤</label>\n-                <input class=\"form-input\" value=\"${formData.height}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì²´ì¤‘</label>\n-                <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n-                <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n-              </div>\n-            </div>\n-\n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n-                <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n-              </div>\n-            </div>\n-\n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n-                <div class=\"checkbox-group\">\n-                  ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n-                    const labels: { [key: string]: string } = {\n-                      musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n-                      cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n-                      diabetes: 'ë‹¹ë‡¨',\n-                      osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n-                      thyroid: 'ê°‘ìƒì„ ',\n-                      varicose: 'ì •ë§¥ë¥˜',\n-                      arthritis: 'ê´€ì ˆì—¼'\n-                    };\n-                    return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n-                  }).join('')}\n-                </div>\n-              </div>\n-            </div>\n-\n-            <div class=\"image-section\">\n-              <div class=\"image-box\"><strong>ì •ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-              <div class=\"image-box\"><strong>ì²™ì¶”</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-              <div class=\"image-box\"><strong>í›„ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-            </div>\n-\n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n-                <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n-              </div>\n-            </div>\n-\n-            <div class=\"consent-section\">\n-              <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n-              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n-              <div class=\"signature-area\">\n-                <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n-                <div class=\"signature-box\"></div>\n-              </div>\n-            </div>\n-          </div>\n-        </body>\n-        </html>\n-      `);\n+      printWindow.document.write(generatePrescriptionHTML());\n       printWindow.document.close();\n       \n       // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n       setTimeout(() => {\n@@ -808,20 +874,32 @@\n           </FormRow>\n \n           {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n           <ImageSection>\n-            <ImageBox>\n-              <strong>ì •ë©´</strong>\n-              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n-            </ImageBox>\n-            <ImageBox>\n-              <strong>ì²™ì¶”</strong>\n-              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n-            </ImageBox>\n-            <ImageBox>\n-              <strong>í›„ë©´</strong>\n-              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n-            </ImageBox>\n+            <BodyImageCanvas\n+              imageType=\"front\"\n+              imageUrl={bodyImageSvgs.front}\n+              points={formData.bodyImages.front}\n+              onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n+            />\n+            <BodyImageCanvas\n+              imageType=\"spine\"\n+              imageUrl={bodyImageSvgs.spine}\n+              points={formData.bodyImages.spine}\n+              onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n+            />\n+            <BodyImageCanvas\n+              imageType=\"back\"\n+              imageUrl={bodyImageSvgs.back}\n+              points={formData.bodyImages.back}\n+              onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n+            />\n           </ImageSection>\n \n           {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n           <FormRow>\n"
                },
                {
                    "date": 1761463257599,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,8 @@\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n import BodyImageCanvas from '../components/BodyImageCanvas';\n-import bodyImageSvgs from '../utils/bodyImageSvgs';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -876,25 +875,25 @@\n           {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n           <ImageSection>\n             <BodyImageCanvas\n               imageType=\"front\"\n-              imageUrl={bodyImageSvgs.front}\n+              imageUrl=\"\"\n               points={formData.bodyImages.front}\n               onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n               onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n               onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n             />\n             <BodyImageCanvas\n               imageType=\"spine\"\n-              imageUrl={bodyImageSvgs.spine}\n+              imageUrl=\"\"\n               points={formData.bodyImages.spine}\n               onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n               onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n               onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n             />\n             <BodyImageCanvas\n               imageType=\"back\"\n-              imageUrl={bodyImageSvgs.back}\n+              imageUrl=\"\"\n               points={formData.bodyImages.back}\n               onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n               onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n               onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n"
                },
                {
                    "date": 1761463993357,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n import BodyImageCanvas from '../components/BodyImageCanvas';\n+import SignatureCanvas from '../components/SignatureCanvas';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -44,32 +45,32 @@\n     display: none;\n   }\n `;\n \n-const ActionButton = styled.button`\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n   width: 60px;\n   height: 60px;\n   border: none;\n   border-radius: 12px;\n-  background: ${AppColors.primary};\n-  color: ${AppColors.onPrimary};\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n   font-size: ${AppTextStyles.label2.fontSize};\n   font-weight: 600;\n-  cursor: pointer;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   gap: 4px;\n   transition: all 0.2s ease;\n   \n   &:hover {\n-    background: ${AppColors.primary}dd;\n-    transform: translateY(-2px);\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+    transform: ${props => props.disabled ? 'none' : 'translateY(-2px)'};\n   }\n   \n   &:active {\n-    transform: translateY(0);\n+    transform: ${props => props.disabled ? 'none' : 'translateY(0)'};\n   }\n `;\n \n const ButtonIcon = styled.div`\n@@ -259,29 +260,45 @@\n   justify-content: space-between;\n   align-items: flex-end;\n `;\n \n-const SignatureBox = styled.div`\n-  width: 200px;\n-  height: 80px;\n+const SignatureSection = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  gap: 10px;\n+`;\n+\n+const SignatureLabel = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const DateRow = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  margin-top: 20px;\n+  padding: 15px;\n+  background: #f8f9fa;\n+  border-radius: 8px;\n   border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  background: white;\n-  position: relative;\n-  \n-  &::after {\n-    content: 'ì„œëª…';\n-    position: absolute;\n-    bottom: -25px;\n-    left: 50%;\n-    transform: translateX(-50%);\n-    font-size: ${AppTextStyles.body3.fontSize};\n-    color: ${AppColors.onInput1};\n-  }\n `;\n \n-const DateArea = styled.div`\n-  text-align: right;\n+const DateItem = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  gap: 5px;\n+`;\n+\n+const DateLabel = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+  font-weight: 600;\n+`;\n+\n+const DateValue = styled.div`\n   font-size: ${AppTextStyles.body2.fontSize};\n   color: ${AppColors.onBackground};\n `;\n \n@@ -310,8 +327,9 @@\n       front: [] as BodyImagePoint[],\n       spine: [] as BodyImagePoint[],\n       back: [] as BodyImagePoint[],\n     },\n+    signatureData: '', // ì„œëª… ë°ì´í„°\n   });\n \n   // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n   useEffect(() => {\n@@ -354,8 +372,9 @@\n             front: [],\n             spine: [],\n             back: [],\n           },\n+          signatureData: '',\n         });\n         return;\n       }\n \n@@ -373,8 +392,9 @@\n             medications: prescription.medications,\n             medicalHistory: prescription.medicalHistory,\n             painHistory: prescription.painHistory,\n             bodyImages: prescription.bodyImages,\n+            signatureData: prescription.signatureData || '',\n           });\n           console.log('ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n         } else {\n           // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n@@ -398,8 +418,9 @@\n               front: [],\n               spine: [],\n               back: [],\n             },\n+            signatureData: '',\n           });\n           console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„±');\n         }\n       } catch (error) {\n@@ -446,8 +467,21 @@\n       },\n     }));\n   };\n \n+  // ì„œëª… ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleSignatureChange = (dataUrl: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      signatureData: dataUrl,\n+    }));\n+  };\n+\n+  // ì„œëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜\n+  const hasSignature = () => {\n+    return formData.signatureData && formData.signatureData.trim() !== '';\n+  };\n+\n   // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n   const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n     const newPoint: BodyImagePoint = {\n       ...point,\n@@ -489,8 +523,14 @@\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n+\n+    // ì„œëª… ê²€ì¦\n+    if (!hasSignature()) {\n+      alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n     \n     try {\n       const prescriptionData = {\n         memberId: selectedMember.id,\n@@ -501,17 +541,30 @@\n         medications: formData.medications,\n         medicalHistory: formData.medicalHistory,\n         painHistory: formData.painHistory,\n         bodyImages: formData.bodyImages,\n+        signatureData: formData.signatureData,\n+        signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n         isActive: true,\n         prescriptionDate: new Date(),\n       };\n \n       if (currentPrescription) {\n         // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸\n         await dbManager.exercisePrescription.updateExercisePrescription(\n           currentPrescription.id,\n-          prescriptionData\n+          {\n+            height: formData.height,\n+            weight: formData.weight,\n+            footSize: formData.footSize,\n+            medications: formData.medications,\n+            medicalHistory: formData.medicalHistory,\n+            painHistory: formData.painHistory,\n+            bodyImages: formData.bodyImages,\n+            signatureData: formData.signatureData,\n+            isActive: true,\n+            prescriptionDate: new Date(),\n+          }\n         );\n         console.log('ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', currentPrescription.id);\n       } else {\n         // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n@@ -525,9 +578,9 @@\n       \n       alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n     } catch (error) {\n       console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n     }\n   };\n \n   const generatePrescriptionHTML = () => {\n@@ -644,11 +697,36 @@\n           <div class=\"consent-section\">\n             <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n             ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n             <div class=\"signature-area\">\n-              <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n-              <div class=\"signature-box\"></div>\n+              <div style=\"text-align: center;\">\n+                <div style=\"margin-bottom: 10px; font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n+                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 120px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 120px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n+              </div>\n             </div>\n+            \n+            <div style=\"display: flex; justify-content: space-between; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n+              <div style=\"text-align: center;\">\n+                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n+                <div style=\"font-size: 14px; color: #000;\">\n+                  ${currentPrescription?.signedAt \n+                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                    : hasSignature() \n+                      ? new Date().toLocaleDateString('ko-KR') \n+                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </div>\n+              </div>\n+              <div style=\"text-align: center;\">\n+                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n+                <div style=\"font-size: 14px; color: #000;\">\n+                  ${currentPrescription?.updatedAt \n+                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                    : new Date().toLocaleDateString('ko-KR')\n+                  }\n+                </div>\n+              </div>\n+            </div>\n           </div>\n         </div>\n       </body>\n       </html>\n@@ -724,9 +802,13 @@\n         </MemberList>\n       </SearchPanel>\n \n       <ButtonPanel>\n-        <ActionButton onClick={handleSave} title=\"ì €ì¥\">\n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={!hasSignature()}\n+        >\n           <ButtonIcon>ğŸ’¾</ButtonIcon>\n           <ButtonText>ì €ì¥</ButtonText>\n         </ActionButton>\n         \n@@ -919,13 +1001,42 @@\n               ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n               ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n             </ConsentText>\n             <SignatureArea>\n-              <DateArea>\n-                ë‚ ì§œ: {new Date().toLocaleDateString('ko-KR')}\n-              </DateArea>\n-              <SignatureBox />\n+              <SignatureSection>\n+                <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n+                <SignatureCanvas\n+                  width={250}\n+                  height={120}\n+                  onSignatureChange={handleSignatureChange}\n+                  initialSignature={formData.signatureData}\n+                />\n+              </SignatureSection>\n             </SignatureArea>\n+            \n+            {/* ë‚ ì§œ ì •ë³´ í‘œì‹œ */}\n+            <DateRow>\n+              <DateItem>\n+                <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n+                <DateValue>\n+                  {currentPrescription?.signedAt \n+                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                    : hasSignature() \n+                      ? new Date().toLocaleDateString('ko-KR') \n+                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </DateValue>\n+              </DateItem>\n+              <DateItem>\n+                <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n+                <DateValue>\n+                  {currentPrescription?.updatedAt \n+                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                    : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </DateValue>\n+              </DateItem>\n+            </DateRow>\n           </ConsentSection>\n         </PrescriptionContainer>\n       </PrescriptionPanel>\n     </PageContainer>\n"
                },
                {
                    "date": 1761464143922,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1050 @@\n+import React, { useEffect, useState } from 'react';\n+import { useSearchParams } from 'react-router-dom';\n+import styled from 'styled-components';\n+import { AppColors } from '../styles/colors';\n+import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n+import BodyImageCanvas from '../components/BodyImageCanvas';\n+import SignatureCanvas from '../components/SignatureCanvas';\n+\n+const PageContainer = styled.div`\n+  min-height: 100vh;\n+  display: flex;\n+  background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n+`;\n+\n+const SearchPanel = styled.div`\n+  width: 300px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ButtonPanel = styled.div`\n+  width: 80px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 20px 10px;\n+  display: flex;\n+  flex-direction: column;\n+  gap: 15px;\n+  align-items: center;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n+  width: 60px;\n+  height: 60px;\n+  border: none;\n+  border-radius: 12px;\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  font-weight: 600;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  justify-content: center;\n+  gap: 4px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+    transform: ${props => props.disabled ? 'none' : 'translateY(-2px)'};\n+  }\n+  \n+  &:active {\n+    transform: ${props => props.disabled ? 'none' : 'translateY(0)'};\n+  }\n+`;\n+\n+const ButtonIcon = styled.div`\n+  font-size: 20px;\n+  line-height: 1;\n+`;\n+\n+const ButtonText = styled.div`\n+  font-size: 10px;\n+  line-height: 1;\n+`;\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  min-height: calc(100vh - 40px);\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20px;\n+    margin: 0;\n+    max-width: none;\n+    min-height: auto;\n+  }\n+`;\n+\n+const PrescriptionTitle = styled.h1`\n+  text-align: center;\n+  font-size: 24px;\n+  font-weight: bold;\n+  margin-bottom: 30px;\n+  color: ${AppColors.onBackground};\n+`;\n+\n+const FormRow = styled.div`\n+  display: flex;\n+  gap: 15px;\n+  margin-bottom: 20px;\n+  align-items: flex-start;\n+`;\n+\n+const FormGroup = styled.div`\n+  flex: 1;\n+`;\n+\n+const FormLabel = styled.label`\n+  display: block;\n+  font-size: ${AppTextStyles.label1.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 8px;\n+`;\n+\n+const FormInput = styled.input`\n+  width: 100%;\n+  padding: 10px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  box-sizing: border-box;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const FormTextarea = styled.textarea`\n+  width: 100%;\n+  padding: 10px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  resize: vertical;\n+  box-sizing: border-box;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const CheckboxGroup = styled.div`\n+  display: flex;\n+  flex-wrap: wrap;\n+  gap: 15px;\n+`;\n+\n+const CheckboxItem = styled.label`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  cursor: pointer;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+`;\n+\n+const Checkbox = styled.input`\n+  margin: 0;\n+`;\n+\n+const ImageSection = styled.div`\n+  display: flex;\n+  gap: 10px;\n+  margin-bottom: 20px;\n+`;\n+\n+const ConsentSection = styled.div`\n+  margin-top: 40px;\n+  padding: 20px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  background: #f9f9f9;\n+`;\n+\n+const ConsentText = styled.p`\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  line-height: 1.6;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SignatureArea = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: flex-end;\n+`;\n+\n+const SignatureSection = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  gap: 10px;\n+`;\n+\n+const SignatureLabel = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const DateRow = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  margin-top: 20px;\n+  padding: 15px;\n+  background: #f8f9fa;\n+  border-radius: 8px;\n+  border: 1px solid ${AppColors.borderLight};\n+`;\n+\n+const DateItem = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  gap: 5px;\n+`;\n+\n+const DateLabel = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+  font-weight: 600;\n+`;\n+\n+const DateValue = styled.div`\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  color: ${AppColors.onBackground};\n+`;\n+\n+const ExercisePrescriptionPage: React.FC = () => {\n+  const [searchParams] = useSearchParams();\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: '',\n+    bodyImages: {\n+      front: [] as BodyImagePoint[],\n+      spine: [] as BodyImagePoint[],\n+      back: [] as BodyImagePoint[],\n+    },\n+    signatureData: '', // ì„œëª… ë°ì´í„°\n+  });\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n+\n+    loadMembers();\n+  }, []);\n+\n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+          bodyImages: {\n+            front: [],\n+            spine: [],\n+            back: [],\n+          },\n+          signatureData: '',\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+            bodyImages: prescription.bodyImages,\n+            signatureData: prescription.signatureData || '',\n+          });\n+          console.log('ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+            bodyImages: {\n+              front: [],\n+              spine: [],\n+              back: [],\n+            },\n+            signatureData: '',\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„±');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n+  useEffect(() => {\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid ë˜ëŠ” memberId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    if (userIdParam && members.length > 0) {\n+      const member = members.find(m => m.id === userIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n+    }\n+  }, [searchParams, members]);\n+\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value,\n+    }));\n+  };\n+\n+  const handleCheckboxChange = (field: string, checked: boolean) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      medicalHistory: {\n+        ...prev.medicalHistory,\n+        [field]: checked,\n+      },\n+    }));\n+  };\n+\n+  // ì„œëª… ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleSignatureChange = (dataUrl: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      signatureData: dataUrl,\n+    }));\n+  };\n+\n+  // ì„œëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜\n+  const hasSignature = () => {\n+    return formData.signatureData && formData.signatureData.trim() !== '';\n+  };\n+\n+  // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n+  const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n+    const newPoint: BodyImagePoint = {\n+      ...point,\n+      id: `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`, // ì„ì‹œ ID ìƒì„±\n+    };\n+\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: [...prev.bodyImages[imageType], newPoint],\n+      },\n+    }));\n+  };\n+\n+  const handleUpdateBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string, updates: Partial<Omit<BodyImagePoint, 'id'>>) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: prev.bodyImages[imageType].map(point =>\n+          point.id === pointId ? { ...point, ...updates } : point\n+        ),\n+      },\n+    }));\n+  };\n+\n+  const handleDeleteBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: prev.bodyImages[imageType].filter(point => point.id !== pointId),\n+      },\n+    }));\n+  };\n+\n+  const handleSave = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ì„œëª… ê²€ì¦\n+    if (!hasSignature()) {\n+      alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+    \n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: formData.bodyImages,\n+        signatureData: formData.signatureData,\n+        signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+      };\n+\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸\n+        await dbManager.exercisePrescription.updateExercisePrescription(\n+          currentPrescription.id,\n+          {\n+            height: formData.height,\n+            weight: formData.weight,\n+            footSize: formData.footSize,\n+            medications: formData.medications,\n+            medicalHistory: formData.medicalHistory,\n+            painHistory: formData.painHistory,\n+            bodyImages: formData.bodyImages,\n+            signatureData: formData.signatureData,\n+            isActive: true,\n+            prescriptionDate: new Date(),\n+          }\n+        );\n+        console.log('ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', currentPrescription.id);\n+        \n+        // ì—…ë°ì´íŠ¸ëœ ì²˜ë°©ì„œ ì •ë³´ ë‹¤ì‹œ ë¡œë“œ\n+        const updatedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(currentPrescription.id);\n+        setCurrentPrescription(updatedPrescription);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  const generatePrescriptionHTML = () => {\n+    if (!selectedMember) return '';\n+\n+    // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ë“¤ì„ HTMLë¡œ ë³€í™˜\n+    const generatePointsHTML = (points: BodyImagePoint[], imageType: string) => {\n+      if (points.length === 0) return `<div class=\"image-box\"><strong>${imageType}</strong><br><small>ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</small></div>`;\n+      \n+      const pointsHtml = points.map(point => \n+        `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y}%; width: 8px; height: 8px; background: ${point.color || '#ff0000'}; border: 1px solid white; border-radius: 50%; transform: translate(-50%, -50%);\"></div>\n+         ${point.memo ? `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y + 5}%; font-size: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 4px; border-radius: 2px; transform: translateX(-50%); white-space: nowrap;\">${point.memo}</div>` : ''}`\n+      ).join('');\n+      \n+      return `<div class=\"image-box\" style=\"position: relative;\"><strong>${imageType}</strong><br><small>${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨</small>${pointsHtml}</div>`;\n+    };\n+\n+    return `\n+      <!DOCTYPE html>\n+      <html>\n+      <head>\n+        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+        <style>\n+          @media print {\n+            body { margin: 0; padding: 20px; }\n+            .no-print { display: none !important; }\n+          }\n+          body { font-family: Arial, sans-serif; margin: 20px; }\n+          .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n+          .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n+          .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n+          .form-group { flex: 1; }\n+          .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n+          .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n+          .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n+          .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n+          .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n+          .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n+          .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n+          .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n+          .date-area { text-align: right; }\n+          textarea { resize: vertical; height: 100px; }\n+          .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n+        </style>\n+      </head>\n+      <body>\n+        <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n+        <div class=\"prescription-container\">\n+          <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n+          \n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì„±ëª…</label>\n+              <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n+              <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">í‚¤</label>\n+              <input class=\"form-input\" value=\"${formData.height}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì²´ì¤‘</label>\n+              <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n+              <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n+            </div>\n+          </div>\n+\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n+              <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n+            </div>\n+          </div>\n+\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n+              <div class=\"checkbox-group\">\n+                ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n+                  const labels: { [key: string]: string } = {\n+                    musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n+                    cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n+                    diabetes: 'ë‹¹ë‡¨',\n+                    osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n+                    thyroid: 'ê°‘ìƒì„ ',\n+                    varicose: 'ì •ë§¥ë¥˜',\n+                    arthritis: 'ê´€ì ˆì—¼'\n+                  };\n+                  return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                }).join('')}\n+              </div>\n+            </div>\n+          </div>\n+\n+          <div class=\"image-section\">\n+            ${generatePointsHTML(formData.bodyImages.front, 'ì •ë©´')}\n+            ${generatePointsHTML(formData.bodyImages.spine, 'ì²™ì¶”')}\n+            ${generatePointsHTML(formData.bodyImages.back, 'í›„ë©´')}\n+          </div>\n+\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n+              <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n+            </div>\n+          </div>\n+\n+          <div class=\"consent-section\">\n+            <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+            ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n+            <div class=\"signature-area\">\n+              <div style=\"text-align: center;\">\n+                <div style=\"margin-bottom: 10px; font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n+                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 120px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 120px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n+              </div>\n+            </div>\n+            \n+            <div style=\"display: flex; justify-content: space-between; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n+              <div style=\"text-align: center;\">\n+                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n+                <div style=\"font-size: 14px; color: #000;\">\n+                  ${currentPrescription?.signedAt \n+                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                    : hasSignature() \n+                      ? new Date().toLocaleDateString('ko-KR') \n+                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </div>\n+              </div>\n+              <div style=\"text-align: center;\">\n+                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n+                <div style=\"font-size: 14px; color: #000;\">\n+                  ${currentPrescription?.updatedAt \n+                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                    : new Date().toLocaleDateString('ko-KR')\n+                  }\n+                </div>\n+              </div>\n+            </div>\n+          </div>\n+        </div>\n+      </body>\n+      </html>\n+    `;\n+  };\n+\n+  const handleShare = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(generatePrescriptionHTML());\n+      printWindow.document.close();\n+      \n+      // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n+      if (navigator.share) {\n+        navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: printWindow.location.href,\n+        });\n+      } else {\n+        alert('ìƒˆ ì°½ì—ì„œ ìš´ë™ì²˜ë°©ì„œë¥¼ í™•ì¸í•˜ê³  URLì„ ë³µì‚¬í•˜ì—¬ ê³µìœ í•˜ì„¸ìš”.');\n+      }\n+    }\n+  };\n+\n+  const handlePrint = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(generatePrescriptionHTML());\n+      printWindow.document.close();\n+      \n+      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n+      setTimeout(() => {\n+        printWindow.print();\n+      }, 1000);\n+    }\n+  };\n+\n+  return (\n+    <PageContainer>\n+      <SearchPanel>\n+        <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birth}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+        </MemberList>\n+      </SearchPanel>\n+\n+      <ButtonPanel>\n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={!hasSignature()}\n+        >\n+          <ButtonIcon>ğŸ’¾</ButtonIcon>\n+          <ButtonText>ì €ì¥</ButtonText>\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          <ButtonIcon>ğŸ“¤</ButtonIcon>\n+          <ButtonText>ê³µìœ </ButtonText>\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¶œë ¥\">\n+          <ButtonIcon>ğŸ–¨ï¸</ButtonIcon>\n+          <ButtonText>ì¶œë ¥</ButtonText>\n+        </ActionButton>\n+      </ButtonPanel>\n+\n+      <PrescriptionPanel>\n+        <PrescriptionContainer>\n+          <PrescriptionTitle>ìš´ë™ì²˜ë°©ì„œ</PrescriptionTitle>\n+          \n+          {/* ê¸°ë³¸ ì •ë³´ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ì„±ëª…</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                value={selectedMember?.name || ''}\n+                readOnly\n+                style={{ background: '#f5f5f5' }}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>ìƒë…„ì›”ì¼</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                value={selectedMember?.birth || ''}\n+                readOnly\n+                style={{ background: '#f5f5f5' }}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>í‚¤</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"í‚¤(cm)\"\n+                value={formData.height}\n+                onChange={(e) => handleInputChange('height', e.target.value)}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>ì²´ì¤‘</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ì²´ì¤‘(kg)\"\n+                value={formData.weight}\n+                onChange={(e) => handleInputChange('weight', e.target.value)}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n+                value={formData.footSize}\n+                onChange={(e) => handleInputChange('footSize', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë³µìš©ì¤‘ì¸ ì•½ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n+                value={formData.medications}\n+                onChange={(e) => handleInputChange('medications', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë³‘ë ¥ì‚¬í•­ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ë³‘ë ¥ì‚¬í•­</FormLabel>\n+              <CheckboxGroup>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.musculoskeletal}\n+                    onChange={(e) => handleCheckboxChange('musculoskeletal', e.target.checked)}\n+                  />\n+                  ê·¼ê³¨ê²©ê³„ì§ˆí™˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.cardiovascular}\n+                    onChange={(e) => handleCheckboxChange('cardiovascular', e.target.checked)}\n+                  />\n+                  ì‹¬í˜ˆê´€ê³„ì§ˆí™˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.diabetes}\n+                    onChange={(e) => handleCheckboxChange('diabetes', e.target.checked)}\n+                  />\n+                  ë‹¹ë‡¨\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.osteoporosis}\n+                    onChange={(e) => handleCheckboxChange('osteoporosis', e.target.checked)}\n+                  />\n+                  ê³¨ë‹¤ê³µì¦\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.thyroid}\n+                    onChange={(e) => handleCheckboxChange('thyroid', e.target.checked)}\n+                  />\n+                  ê°‘ìƒì„ \n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.varicose}\n+                    onChange={(e) => handleCheckboxChange('varicose', e.target.checked)}\n+                  />\n+                  ì •ë§¥ë¥˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.arthritis}\n+                    onChange={(e) => handleCheckboxChange('arthritis', e.target.checked)}\n+                  />\n+                  ê´€ì ˆì—¼\n+                </CheckboxItem>\n+              </CheckboxGroup>\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n+          <ImageSection>\n+            <BodyImageCanvas\n+              imageType=\"front\"\n+              imageUrl=\"\"\n+              points={formData.bodyImages.front}\n+              onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n+            />\n+            <BodyImageCanvas\n+              imageType=\"spine\"\n+              imageUrl=\"\"\n+              points={formData.bodyImages.spine}\n+              onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n+            />\n+            <BodyImageCanvas\n+              imageType=\"back\"\n+              imageUrl=\"\"\n+              points={formData.bodyImages.back}\n+              onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n+            />\n+          </ImageSection>\n+\n+          {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </FormLabel>\n+              <FormTextarea\n+                rows={6}\n+                placeholder=\"í†µì¦ íˆìŠ¤í† ë¦¬, ìˆ˜ìˆ  ì´ë ¥, ìš´ë™ ëª©ì  ë“±ì„ ìƒì„¸íˆ ê¸°ì…í•´ì£¼ì„¸ìš”\"\n+                value={formData.painHistory}\n+                onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë™ì˜ì„œ */}\n+          <ConsentSection>\n+            <ConsentText>\n+              ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n+            </ConsentText>\n+            <SignatureArea>\n+              <SignatureSection>\n+                <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n+                <SignatureCanvas\n+                  width={250}\n+                  height={120}\n+                  onSignatureChange={handleSignatureChange}\n+                  initialSignature={formData.signatureData}\n+                />\n+              </SignatureSection>\n+            </SignatureArea>\n+            \n+            {/* ë‚ ì§œ ì •ë³´ í‘œì‹œ */}\n+            <DateRow>\n+              <DateItem>\n+                <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n+                <DateValue>\n+                  {currentPrescription?.signedAt \n+                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                    : hasSignature() \n+                      ? new Date().toLocaleDateString('ko-KR') \n+                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </DateValue>\n+              </DateItem>\n+              <DateItem>\n+                <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n+                <DateValue>\n+                  {currentPrescription?.updatedAt \n+                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                    : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </DateValue>\n+              </DateItem>\n+            </DateRow>\n+          </ConsentSection>\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n+    </PageContainer>\n+  );\n+};\n+\n+export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1761464324870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -480,8 +480,13 @@\n   const hasSignature = () => {\n     return formData.signatureData && formData.signatureData.trim() !== '';\n   };\n \n+  // ê¸°ì¡´ ì„œëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ (DBì— ì €ì¥ëœ ì„œëª…)\n+  const hasExistingSignature = (): boolean => {\n+    return !!(currentPrescription?.signedAt && currentPrescription?.signatureData && currentPrescription.signatureData.trim() !== '');\n+  };\n+\n   // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n   const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n     const newPoint: BodyImagePoint = {\n       ...point,\n@@ -809,9 +814,9 @@\n       <ButtonPanel>\n         <ActionButton \n           onClick={handleSave} \n           title=\"ì €ì¥\"\n-          disabled={!hasSignature()}\n+          disabled={!hasSignature() && !hasExistingSignature()} // í˜„ì¬ ì„œëª…ì´ ìˆê±°ë‚˜ ê¸°ì¡´ ì„œëª…ì´ ìˆì–´ì•¼ ì €ì¥ ê°€ëŠ¥\n         >\n           <ButtonIcon>ğŸ’¾</ButtonIcon>\n           <ButtonText>ì €ì¥</ButtonText>\n         </ActionButton>\n@@ -1012,8 +1017,9 @@\n                   width={250}\n                   height={120}\n                   onSignatureChange={handleSignatureChange}\n                   initialSignature={formData.signatureData}\n+                  readonly={hasExistingSignature()} // ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ ì½ê¸° ì „ìš©\n                 />\n               </SignatureSection>\n             </SignatureArea>\n             \n@@ -1046,1051 +1052,5 @@\n     </PageContainer>\n   );\n };\n \n-export default ExercisePrescriptionPage;\n-import React, { useEffect, useState } from 'react';\n-import { useSearchParams } from 'react-router-dom';\n-import styled from 'styled-components';\n-import { AppColors } from '../styles/colors';\n-import { AppTextStyles } from '../styles/textStyles';\n-import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n-import BodyImageCanvas from '../components/BodyImageCanvas';\n-import SignatureCanvas from '../components/SignatureCanvas';\n-\n-const PageContainer = styled.div`\n-  min-height: 100vh;\n-  display: flex;\n-  background: ${AppColors.background};\n-  \n-  @media print {\n-    display: block;\n-    background: white;\n-  }\n-`;\n-\n-const SearchPanel = styled.div`\n-  width: 300px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ButtonPanel = styled.div`\n-  width: 80px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 20px 10px;\n-  display: flex;\n-  flex-direction: column;\n-  gap: 15px;\n-  align-items: center;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 60px;\n-  height: 60px;\n-  border: none;\n-  border-radius: 12px;\n-  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n-  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: ${AppTextStyles.label2.fontSize};\n-  font-weight: 600;\n-  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  justify-content: center;\n-  gap: 4px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-    transform: ${props => props.disabled ? 'none' : 'translateY(-2px)'};\n-  }\n-  \n-  &:active {\n-    transform: ${props => props.disabled ? 'none' : 'translateY(0)'};\n-  }\n-`;\n-\n-const ButtonIcon = styled.div`\n-  font-size: 20px;\n-  line-height: 1;\n-`;\n-\n-const ButtonText = styled.div`\n-  font-size: 10px;\n-  line-height: 1;\n-`;\n-\n-const SearchTitle = styled.h2`\n-  font-size: ${AppTextStyles.title2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SearchInput = styled.input`\n-  width: 100%;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  margin-bottom: 16px;\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const MemberList = styled.div`\n-  max-height: 400px;\n-  overflow-y: auto;\n-`;\n-\n-const MemberItem = styled.div<{ selected?: boolean }>`\n-  padding: 12px;\n-  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 8px;\n-  margin-bottom: 8px;\n-  cursor: pointer;\n-  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n-  \n-  &:hover {\n-    background: ${AppColors.primary}20;\n-  }\n-`;\n-\n-const MemberName = styled.div`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 4px;\n-`;\n-\n-const MemberInfo = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const PrescriptionPanel = styled.div`\n-  flex: 1;\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    padding: 0;\n-    overflow: visible;\n-  }\n-`;\n-\n-const PrescriptionContainer = styled.div`\n-  max-width: 800px;\n-  margin: 0 auto;\n-  background: white;\n-  padding: 40px;\n-  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  min-height: calc(100vh - 40px);\n-  \n-  @media print {\n-    box-shadow: none;\n-    padding: 20px;\n-    margin: 0;\n-    max-width: none;\n-    min-height: auto;\n-  }\n-`;\n-\n-const PrescriptionTitle = styled.h1`\n-  text-align: center;\n-  font-size: 24px;\n-  font-weight: bold;\n-  margin-bottom: 30px;\n-  color: ${AppColors.onBackground};\n-`;\n-\n-const FormRow = styled.div`\n-  display: flex;\n-  gap: 15px;\n-  margin-bottom: 20px;\n-  align-items: flex-start;\n-`;\n-\n-const FormGroup = styled.div`\n-  flex: 1;\n-`;\n-\n-const FormLabel = styled.label`\n-  display: block;\n-  font-size: ${AppTextStyles.label1.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 8px;\n-`;\n-\n-const FormInput = styled.input`\n-  width: 100%;\n-  padding: 10px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  box-sizing: border-box;\n-  \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const FormTextarea = styled.textarea`\n-  width: 100%;\n-  padding: 10px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  resize: vertical;\n-  box-sizing: border-box;\n-  \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const CheckboxGroup = styled.div`\n-  display: flex;\n-  flex-wrap: wrap;\n-  gap: 15px;\n-`;\n-\n-const CheckboxItem = styled.label`\n-  display: flex;\n-  align-items: center;\n-  gap: 8px;\n-  cursor: pointer;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-`;\n-\n-const Checkbox = styled.input`\n-  margin: 0;\n-`;\n-\n-const ImageSection = styled.div`\n-  display: flex;\n-  gap: 10px;\n-  margin-bottom: 20px;\n-`;\n-\n-const ConsentSection = styled.div`\n-  margin-top: 40px;\n-  padding: 20px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  background: #f9f9f9;\n-`;\n-\n-const ConsentText = styled.p`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  line-height: 1.6;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SignatureArea = styled.div`\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: flex-end;\n-`;\n-\n-const SignatureSection = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  gap: 10px;\n-`;\n-\n-const SignatureLabel = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const DateRow = styled.div`\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-  margin-top: 20px;\n-  padding: 15px;\n-  background: #f8f9fa;\n-  border-radius: 8px;\n-  border: 1px solid ${AppColors.borderLight};\n-`;\n-\n-const DateItem = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  gap: 5px;\n-`;\n-\n-const DateLabel = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-  font-weight: 600;\n-`;\n-\n-const DateValue = styled.div`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onBackground};\n-`;\n-\n-const ExercisePrescriptionPage: React.FC = () => {\n-  const [searchParams] = useSearchParams();\n-  const [searchTerm, setSearchTerm] = useState('');\n-  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n-  const [members, setMembers] = useState<Member[]>([]);\n-  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n-  const [formData, setFormData] = useState({\n-    height: '',\n-    weight: '',\n-    footSize: '',\n-    medications: '',\n-    medicalHistory: {\n-      musculoskeletal: false,\n-      cardiovascular: false,\n-      diabetes: false,\n-      osteoporosis: false,\n-      thyroid: false,\n-      varicose: false,\n-      arthritis: false,\n-    } as ExercisePrescriptionMedicalHistory,\n-    painHistory: '',\n-    bodyImages: {\n-      front: [] as BodyImagePoint[],\n-      spine: [] as BodyImagePoint[],\n-      back: [] as BodyImagePoint[],\n-    },\n-    signatureData: '', // ì„œëª… ë°ì´í„°\n-  });\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n-  useEffect(() => {\n-    const loadMembers = async () => {\n-      try {\n-        const allMembers = await dbManager.getAllMembers();\n-        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n-        const activeMembers = allMembers.filter(member => member.isActive);\n-        setMembers(activeMembers);\n-      } catch (error) {\n-        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-      }\n-    };\n-\n-    loadMembers();\n-  }, []);\n-\n-  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n-  useEffect(() => {\n-    const loadPrescription = async () => {\n-      if (!selectedMember) {\n-        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n-        setCurrentPrescription(null);\n-        setFormData({\n-          height: '',\n-          weight: '',\n-          footSize: '',\n-          medications: '',\n-          medicalHistory: {\n-            musculoskeletal: false,\n-            cardiovascular: false,\n-            diabetes: false,\n-            osteoporosis: false,\n-            thyroid: false,\n-            varicose: false,\n-            arthritis: false,\n-          },\n-          painHistory: '',\n-          bodyImages: {\n-            front: [],\n-            spine: [],\n-            back: [],\n-          },\n-          signatureData: '',\n-        });\n-        return;\n-      }\n-\n-      try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n-        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n-        \n-        if (prescription) {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n-          setCurrentPrescription(prescription);\n-          setFormData({\n-            height: prescription.height,\n-            weight: prescription.weight,\n-            footSize: prescription.footSize,\n-            medications: prescription.medications,\n-            medicalHistory: prescription.medicalHistory,\n-            painHistory: prescription.painHistory,\n-            bodyImages: prescription.bodyImages,\n-            signatureData: prescription.signatureData || '',\n-          });\n-          console.log('ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n-        } else {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n-          setCurrentPrescription(null);\n-          setFormData({\n-            height: '',\n-            weight: '',\n-            footSize: '',\n-            medications: '',\n-            medicalHistory: {\n-              musculoskeletal: false,\n-              cardiovascular: false,\n-              diabetes: false,\n-              osteoporosis: false,\n-              thyroid: false,\n-              varicose: false,\n-              arthritis: false,\n-            },\n-            painHistory: '',\n-            bodyImages: {\n-              front: [],\n-              spine: [],\n-              back: [],\n-            },\n-            signatureData: '',\n-          });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„±');\n-        }\n-      } catch (error) {\n-        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-      }\n-    };\n-\n-    loadPrescription();\n-  }, [selectedMember]);\n-\n-  const filteredMembers = members.filter(member =>\n-    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n-  );\n-\n-  useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid ë˜ëŠ” memberId í™•ì¸\n-    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    if (userIdParam && members.length > 0) {\n-      const member = members.find(m => m.id === userIdParam);\n-      if (member) {\n-        setSelectedMember(member);\n-      }\n-    }\n-  }, [searchParams, members]);\n-\n-  const handleMemberSelect = (member: Member) => {\n-    setSelectedMember(member);\n-  };\n-\n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value,\n-    }));\n-  };\n-\n-  const handleCheckboxChange = (field: string, checked: boolean) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      medicalHistory: {\n-        ...prev.medicalHistory,\n-        [field]: checked,\n-      },\n-    }));\n-  };\n-\n-  // ì„œëª… ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleSignatureChange = (dataUrl: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      signatureData: dataUrl,\n-    }));\n-  };\n-\n-  // ì„œëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜\n-  const hasSignature = () => {\n-    return formData.signatureData && formData.signatureData.trim() !== '';\n-  };\n-\n-  // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n-  const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n-    const newPoint: BodyImagePoint = {\n-      ...point,\n-      id: `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`, // ì„ì‹œ ID ìƒì„±\n-    };\n-\n-    setFormData(prev => ({\n-      ...prev,\n-      bodyImages: {\n-        ...prev.bodyImages,\n-        [imageType]: [...prev.bodyImages[imageType], newPoint],\n-      },\n-    }));\n-  };\n-\n-  const handleUpdateBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string, updates: Partial<Omit<BodyImagePoint, 'id'>>) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      bodyImages: {\n-        ...prev.bodyImages,\n-        [imageType]: prev.bodyImages[imageType].map(point =>\n-          point.id === pointId ? { ...point, ...updates } : point\n-        ),\n-      },\n-    }));\n-  };\n-\n-  const handleDeleteBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      bodyImages: {\n-        ...prev.bodyImages,\n-        [imageType]: prev.bodyImages[imageType].filter(point => point.id !== pointId),\n-      },\n-    }));\n-  };\n-\n-  const handleSave = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // ì„œëª… ê²€ì¦\n-    if (!hasSignature()) {\n-      alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-    \n-    try {\n-      const prescriptionData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        height: formData.height,\n-        weight: formData.weight,\n-        footSize: formData.footSize,\n-        medications: formData.medications,\n-        medicalHistory: formData.medicalHistory,\n-        painHistory: formData.painHistory,\n-        bodyImages: formData.bodyImages,\n-        signatureData: formData.signatureData,\n-        signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n-        isActive: true,\n-        prescriptionDate: new Date(),\n-      };\n-\n-      if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸\n-        await dbManager.exercisePrescription.updateExercisePrescription(\n-          currentPrescription.id,\n-          {\n-            height: formData.height,\n-            weight: formData.weight,\n-            footSize: formData.footSize,\n-            medications: formData.medications,\n-            medicalHistory: formData.medicalHistory,\n-            painHistory: formData.painHistory,\n-            bodyImages: formData.bodyImages,\n-            signatureData: formData.signatureData,\n-            isActive: true,\n-            prescriptionDate: new Date(),\n-          }\n-        );\n-        console.log('ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', currentPrescription.id);\n-      } else {\n-        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      }\n-      \n-      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    } catch (error) {\n-      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  const generatePrescriptionHTML = () => {\n-    if (!selectedMember) return '';\n-\n-    // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ë“¤ì„ HTMLë¡œ ë³€í™˜\n-    const generatePointsHTML = (points: BodyImagePoint[], imageType: string) => {\n-      if (points.length === 0) return `<div class=\"image-box\"><strong>${imageType}</strong><br><small>ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</small></div>`;\n-      \n-      const pointsHtml = points.map(point => \n-        `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y}%; width: 8px; height: 8px; background: ${point.color || '#ff0000'}; border: 1px solid white; border-radius: 50%; transform: translate(-50%, -50%);\"></div>\n-         ${point.memo ? `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y + 5}%; font-size: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 4px; border-radius: 2px; transform: translateX(-50%); white-space: nowrap;\">${point.memo}</div>` : ''}`\n-      ).join('');\n-      \n-      return `<div class=\"image-box\" style=\"position: relative;\"><strong>${imageType}</strong><br><small>${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨</small>${pointsHtml}</div>`;\n-    };\n-\n-    return `\n-      <!DOCTYPE html>\n-      <html>\n-      <head>\n-        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n-        <style>\n-          @media print {\n-            body { margin: 0; padding: 20px; }\n-            .no-print { display: none !important; }\n-          }\n-          body { font-family: Arial, sans-serif; margin: 20px; }\n-          .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n-          .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n-          .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n-          .form-group { flex: 1; }\n-          .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n-          .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-          .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n-          .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n-          .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n-          .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n-          .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n-          .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n-          .date-area { text-align: right; }\n-          textarea { resize: vertical; height: 100px; }\n-          .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n-        </style>\n-      </head>\n-      <body>\n-        <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n-        <div class=\"prescription-container\">\n-          <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n-          \n-          <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ì„±ëª…</label>\n-              <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n-              <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">í‚¤</label>\n-              <input class=\"form-input\" value=\"${formData.height}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ì²´ì¤‘</label>\n-              <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n-              <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n-            </div>\n-          </div>\n-\n-          <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n-              <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n-            </div>\n-          </div>\n-\n-          <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div class=\"checkbox-group\">\n-                ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n-                  const labels: { [key: string]: string } = {\n-                    musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n-                    cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n-                    diabetes: 'ë‹¹ë‡¨',\n-                    osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n-                    thyroid: 'ê°‘ìƒì„ ',\n-                    varicose: 'ì •ë§¥ë¥˜',\n-                    arthritis: 'ê´€ì ˆì—¼'\n-                  };\n-                  return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n-                }).join('')}\n-              </div>\n-            </div>\n-          </div>\n-\n-          <div class=\"image-section\">\n-            ${generatePointsHTML(formData.bodyImages.front, 'ì •ë©´')}\n-            ${generatePointsHTML(formData.bodyImages.spine, 'ì²™ì¶”')}\n-            ${generatePointsHTML(formData.bodyImages.back, 'í›„ë©´')}\n-          </div>\n-\n-          <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n-              <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n-            </div>\n-          </div>\n-\n-          <div class=\"consent-section\">\n-            <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n-            ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n-            <div class=\"signature-area\">\n-              <div style=\"text-align: center;\">\n-                <div style=\"margin-bottom: 10px; font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n-                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 120px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 120px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n-              </div>\n-            </div>\n-            \n-            <div style=\"display: flex; justify-content: space-between; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n-              <div style=\"text-align: center;\">\n-                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n-                <div style=\"font-size: 14px; color: #000;\">\n-                  ${currentPrescription?.signedAt \n-                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                    : hasSignature() \n-                      ? new Date().toLocaleDateString('ko-KR') \n-                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n-                </div>\n-              </div>\n-              <div style=\"text-align: center;\">\n-                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n-                <div style=\"font-size: 14px; color: #000;\">\n-                  ${currentPrescription?.updatedAt \n-                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                    : new Date().toLocaleDateString('ko-KR')\n-                  }\n-                </div>\n-              </div>\n-            </div>\n-          </div>\n-        </div>\n-      </body>\n-      </html>\n-    `;\n-  };\n-\n-  const handleShare = () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(generatePrescriptionHTML());\n-      printWindow.document.close();\n-      \n-      // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n-      if (navigator.share) {\n-        navigator.share({\n-          title: 'ìš´ë™ì²˜ë°©ì„œ',\n-          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: printWindow.location.href,\n-        });\n-      } else {\n-        alert('ìƒˆ ì°½ì—ì„œ ìš´ë™ì²˜ë°©ì„œë¥¼ í™•ì¸í•˜ê³  URLì„ ë³µì‚¬í•˜ì—¬ ê³µìœ í•˜ì„¸ìš”.');\n-      }\n-    }\n-  };\n-\n-  const handlePrint = () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(generatePrescriptionHTML());\n-      printWindow.document.close();\n-      \n-      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n-      setTimeout(() => {\n-        printWindow.print();\n-      }, 1000);\n-    }\n-  };\n-\n-  return (\n-    <PageContainer>\n-      <SearchPanel>\n-        <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n-        <SearchInput\n-          type=\"text\"\n-          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n-          value={searchTerm}\n-          onChange={(e) => setSearchTerm(e.target.value)}\n-        />\n-        <MemberList>\n-          {filteredMembers.map(member => (\n-            <MemberItem\n-              key={member.id}\n-              selected={selectedMember?.id === member.id}\n-              onClick={() => handleMemberSelect(member)}\n-            >\n-              <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birth}</MemberInfo>\n-              <MemberInfo>{member.phone}</MemberInfo>\n-            </MemberItem>\n-          ))}\n-        </MemberList>\n-      </SearchPanel>\n-\n-      <ButtonPanel>\n-        <ActionButton \n-          onClick={handleSave} \n-          title=\"ì €ì¥\"\n-          disabled={!hasSignature()}\n-        >\n-          <ButtonIcon>ğŸ’¾</ButtonIcon>\n-          <ButtonText>ì €ì¥</ButtonText>\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          <ButtonIcon>ğŸ“¤</ButtonIcon>\n-          <ButtonText>ê³µìœ </ButtonText>\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handlePrint} title=\"ì¶œë ¥\">\n-          <ButtonIcon>ğŸ–¨ï¸</ButtonIcon>\n-          <ButtonText>ì¶œë ¥</ButtonText>\n-        </ActionButton>\n-      </ButtonPanel>\n-\n-      <PrescriptionPanel>\n-        <PrescriptionContainer>\n-          <PrescriptionTitle>ìš´ë™ì²˜ë°©ì„œ</PrescriptionTitle>\n-          \n-          {/* ê¸°ë³¸ ì •ë³´ */}\n-          <FormRow>\n-            <FormGroup>\n-              <FormLabel>ì„±ëª…</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                value={selectedMember?.name || ''}\n-                readOnly\n-                style={{ background: '#f5f5f5' }}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>ìƒë…„ì›”ì¼</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                value={selectedMember?.birth || ''}\n-                readOnly\n-                style={{ background: '#f5f5f5' }}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>í‚¤</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"í‚¤(cm)\"\n-                value={formData.height}\n-                onChange={(e) => handleInputChange('height', e.target.value)}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>ì²´ì¤‘</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"ì²´ì¤‘(kg)\"\n-                value={formData.weight}\n-                onChange={(e) => handleInputChange('weight', e.target.value)}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n-                value={formData.footSize}\n-                onChange={(e) => handleInputChange('footSize', e.target.value)}\n-              />\n-            </FormGroup>\n-          </FormRow>\n-\n-          {/* ë³µìš©ì¤‘ì¸ ì•½ */}\n-          <FormRow>\n-            <FormGroup>\n-              <FormLabel>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n-                value={formData.medications}\n-                onChange={(e) => handleInputChange('medications', e.target.value)}\n-              />\n-            </FormGroup>\n-          </FormRow>\n-\n-          {/* ë³‘ë ¥ì‚¬í•­ */}\n-          <FormRow>\n-            <FormGroup>\n-              <FormLabel>ë³‘ë ¥ì‚¬í•­</FormLabel>\n-              <CheckboxGroup>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.musculoskeletal}\n-                    onChange={(e) => handleCheckboxChange('musculoskeletal', e.target.checked)}\n-                  />\n-                  ê·¼ê³¨ê²©ê³„ì§ˆí™˜\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.cardiovascular}\n-                    onChange={(e) => handleCheckboxChange('cardiovascular', e.target.checked)}\n-                  />\n-                  ì‹¬í˜ˆê´€ê³„ì§ˆí™˜\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.diabetes}\n-                    onChange={(e) => handleCheckboxChange('diabetes', e.target.checked)}\n-                  />\n-                  ë‹¹ë‡¨\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.osteoporosis}\n-                    onChange={(e) => handleCheckboxChange('osteoporosis', e.target.checked)}\n-                  />\n-                  ê³¨ë‹¤ê³µì¦\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.thyroid}\n-                    onChange={(e) => handleCheckboxChange('thyroid', e.target.checked)}\n-                  />\n-                  ê°‘ìƒì„ \n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.varicose}\n-                    onChange={(e) => handleCheckboxChange('varicose', e.target.checked)}\n-                  />\n-                  ì •ë§¥ë¥˜\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.arthritis}\n-                    onChange={(e) => handleCheckboxChange('arthritis', e.target.checked)}\n-                  />\n-                  ê´€ì ˆì—¼\n-                </CheckboxItem>\n-              </CheckboxGroup>\n-            </FormGroup>\n-          </FormRow>\n-\n-          {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n-          <ImageSection>\n-            <BodyImageCanvas\n-              imageType=\"front\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.front}\n-              onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n-            />\n-            <BodyImageCanvas\n-              imageType=\"spine\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.spine}\n-              onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n-            />\n-            <BodyImageCanvas\n-              imageType=\"back\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.back}\n-              onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n-            />\n-          </ImageSection>\n-\n-          {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n-          <FormRow>\n-            <FormGroup>\n-              <FormLabel>ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </FormLabel>\n-              <FormTextarea\n-                rows={6}\n-                placeholder=\"í†µì¦ íˆìŠ¤í† ë¦¬, ìˆ˜ìˆ  ì´ë ¥, ìš´ë™ ëª©ì  ë“±ì„ ìƒì„¸íˆ ê¸°ì…í•´ì£¼ì„¸ìš”\"\n-                value={formData.painHistory}\n-                onChange={(e) => handleInputChange('painHistory', e.target.value)}\n-              />\n-            </FormGroup>\n-          </FormRow>\n-\n-          {/* ë™ì˜ì„œ */}\n-          <ConsentSection>\n-            <ConsentText>\n-              ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n-              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n-            </ConsentText>\n-            <SignatureArea>\n-              <SignatureSection>\n-                <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n-                <SignatureCanvas\n-                  width={250}\n-                  height={120}\n-                  onSignatureChange={handleSignatureChange}\n-                  initialSignature={formData.signatureData}\n-                />\n-              </SignatureSection>\n-            </SignatureArea>\n-            \n-            {/* ë‚ ì§œ ì •ë³´ í‘œì‹œ */}\n-            <DateRow>\n-              <DateItem>\n-                <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n-                <DateValue>\n-                  {currentPrescription?.signedAt \n-                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                    : hasSignature() \n-                      ? new Date().toLocaleDateString('ko-KR') \n-                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n-                </DateValue>\n-              </DateItem>\n-              <DateItem>\n-                <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n-                <DateValue>\n-                  {currentPrescription?.updatedAt \n-                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                    : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n-                </DateValue>\n-              </DateItem>\n-            </DateRow>\n-          </ConsentSection>\n-        </PrescriptionContainer>\n-      </PrescriptionPanel>\n-    </PageContainer>\n-  );\n-};\n-\n export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1761464396927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -301,8 +301,16 @@\n   font-size: ${AppTextStyles.body2.fontSize};\n   color: ${AppColors.onBackground};\n `;\n \n+const SignatureNote = styled.div`\n+  margin-top: 8px;\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+  text-align: center;\n+  font-style: italic;\n+`;\n+\n const ExercisePrescriptionPage: React.FC = () => {\n   const [searchParams] = useSearchParams();\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n@@ -529,15 +537,25 @@\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n \n-    // ì„œëª… ê²€ì¦\n-    if (!hasSignature()) {\n+    // ì„œëª… ê²€ì¦: ìƒˆ ì²˜ë°©ì„œëŠ” ì„œëª… í•„ìˆ˜, ê¸°ì¡´ ì²˜ë°©ì„œëŠ” ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ OK\n+    if (!currentPrescription && !hasSignature()) {\n       alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n     \n+    if (currentPrescription && !hasExistingSignature() && !hasSignature()) {\n+      alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+    \n     try {\n+      // ì„œëª… ë°ì´í„° ê²°ì •: ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì„œëª… ì‚¬ìš©\n+      const finalSignatureData = hasExistingSignature() \n+        ? currentPrescription!.signatureData \n+        : formData.signatureData;\n+      \n       const prescriptionData = {\n         memberId: selectedMember.id,\n         memberName: selectedMember.name,\n         height: formData.height,\n@@ -546,9 +564,9 @@\n         medications: formData.medications,\n         medicalHistory: formData.medicalHistory,\n         painHistory: formData.painHistory,\n         bodyImages: formData.bodyImages,\n-        signatureData: formData.signatureData,\n+        signatureData: finalSignatureData,\n         signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n         isActive: true,\n         prescriptionDate: new Date(),\n       };\n@@ -564,9 +582,9 @@\n             medications: formData.medications,\n             medicalHistory: formData.medicalHistory,\n             painHistory: formData.painHistory,\n             bodyImages: formData.bodyImages,\n-            signatureData: formData.signatureData,\n+            signatureData: finalSignatureData, // ìµœì¢… ì„œëª… ë°ì´í„° ì‚¬ìš©\n             isActive: true,\n             prescriptionDate: new Date(),\n           }\n         );\n@@ -1019,8 +1037,18 @@\n                   onSignatureChange={handleSignatureChange}\n                   initialSignature={formData.signatureData}\n                   readonly={hasExistingSignature()} // ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ ì½ê¸° ì „ìš©\n                 />\n+                {hasExistingSignature() && (\n+                  <SignatureNote>\n+                    âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)\n+                  </SignatureNote>\n+                )}\n+                {!hasExistingSignature() && (\n+                  <SignatureNote>\n+                    ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\n+                  </SignatureNote>\n+                )}\n               </SignatureSection>\n             </SignatureArea>\n             \n             {/* ë‚ ì§œ ì •ë³´ í‘œì‹œ */}\n"
                },
                {
                    "date": 1761464477236,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1031,8 +1031,9 @@\n             <SignatureArea>\n               <SignatureSection>\n                 <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n                 <SignatureCanvas\n+                  key={selectedMember?.id || 'no-member'} // íšŒì› ë³€ê²½ ì‹œ ì»´í¬ë„ŒíŠ¸ ì¬ìƒì„±\n                   width={250}\n                   height={120}\n                   onSignatureChange={handleSignatureChange}\n                   initialSignature={formData.signatureData}\n"
                },
                {
                    "date": 1761464656178,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -254,21 +254,8 @@\n   color: ${AppColors.onBackground};\n   margin-bottom: 20px;\n `;\n \n-const SignatureArea = styled.div`\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: flex-end;\n-`;\n-\n-const SignatureSection = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  gap: 10px;\n-`;\n-\n const SignatureLabel = styled.div`\n   font-size: ${AppTextStyles.body3.fontSize};\n   color: ${AppColors.onInput1};\n `;\n@@ -426,11 +413,11 @@\n               front: [],\n               spine: [],\n               back: [],\n             },\n-            signatureData: '',\n+            signatureData: '', // ì„œëª… ë°ì´í„° ì´ˆê¸°í™”\n           });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„±');\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n         }\n       } catch (error) {\n         console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n         alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n@@ -645,9 +632,8 @@\n           .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n           .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n           .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n-          .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n           .date-area { text-align: right; }\n           textarea { resize: vertical; height: 100px; }\n           .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n@@ -723,35 +709,43 @@\n \n           <div class=\"consent-section\">\n             <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n             ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n-            <div class=\"signature-area\">\n-              <div style=\"text-align: center;\">\n-                <div style=\"margin-bottom: 10px; font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n-                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 120px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 120px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n-              </div>\n-            </div>\n             \n-            <div style=\"display: flex; justify-content: space-between; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n-              <div style=\"text-align: center;\">\n-                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n-                <div style=\"font-size: 14px; color: #000;\">\n-                  ${currentPrescription?.signedAt \n-                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                    : hasSignature() \n-                      ? new Date().toLocaleDateString('ko-KR') \n-                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n+            <div style=\"display: flex; gap: 20px; align-items: flex-start;\">\n+              <div style=\"flex: 0 0 auto; min-width: 300px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n+                <div style=\"display: flex; justify-content: space-between;\">\n+                  <div style=\"text-align: center;\">\n+                    <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n+                    <div style=\"font-size: 14px; color: #000;\">\n+                      ${currentPrescription?.signedAt \n+                        ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                        : hasSignature() \n+                          ? new Date().toLocaleDateString('ko-KR') \n+                          : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                      }\n+                    </div>\n+                  </div>\n+                  <div style=\"text-align: center;\">\n+                    <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n+                    <div style=\"font-size: 14px; color: #000;\">\n+                      ${currentPrescription?.updatedAt \n+                        ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                        : new Date().toLocaleDateString('ko-KR')\n+                      }\n+                    </div>\n+                  </div>\n                 </div>\n               </div>\n-              <div style=\"text-align: center;\">\n-                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n-                <div style=\"font-size: 14px; color: #000;\">\n-                  ${currentPrescription?.updatedAt \n-                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                    : new Date().toLocaleDateString('ko-KR')\n-                  }\n+              \n+              <div style=\"flex: 1; display: flex; flex-direction: column; align-items: center;\">\n+                <div style=\"display: flex; align-items: center; gap: 15px; margin-bottom: 10px; width: 100%; justify-content: center;\">\n+                  <div style=\"font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n+                  <div style=\"font-size: 12px; color: ${hasExistingSignature() ? '#28a745' : '#666'};\">\n+                    ${hasExistingSignature() ? 'âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)' : 'ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤'}\n+                  </div>\n                 </div>\n+                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 100px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 100px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n               </div>\n             </div>\n           </div>\n         </div>\n@@ -1027,55 +1021,60 @@\n             <ConsentText>\n               ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n               ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n             </ConsentText>\n-            <SignatureArea>\n-              <SignatureSection>\n-                <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n+            \n+            {/* ì„œëª… ì˜ì—­ê³¼ ë‚ ì§œ ì •ë³´ë¥¼ í•˜ë‚˜ì˜ í–‰ìœ¼ë¡œ ë°°ì¹˜ */}\n+            <div style={{ display: 'flex', gap: '20px', alignItems: 'flex-start' }}>\n+              {/* ë‚ ì§œ ì •ë³´ ì¹´ë“œ - ì™¼ìª½ */}\n+              <DateRow style={{ flex: '0 0 auto', margin: '0', minWidth: '300px' }}>\n+                <DateItem>\n+                  <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n+                  <DateValue>\n+                    {currentPrescription?.signedAt \n+                      ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                      : hasSignature() \n+                        ? new Date().toLocaleDateString('ko-KR') \n+                        : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                    }\n+                  </DateValue>\n+                </DateItem>\n+                <DateItem>\n+                  <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n+                  <DateValue>\n+                    {currentPrescription?.updatedAt \n+                      ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                      : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                    }\n+                  </DateValue>\n+                </DateItem>\n+              </DateRow>\n+\n+              {/* ì„œëª… ì˜ì—­ - ì˜¤ë¥¸ìª½ */}\n+              <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n+                <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '10px', width: '100%', justifyContent: 'center' }}>\n+                  <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n+                  {hasExistingSignature() && (\n+                    <SignatureNote style={{ margin: '0', fontSize: '12px', color: '#28a745' }}>\n+                      âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)\n+                    </SignatureNote>\n+                  )}\n+                  {!hasExistingSignature() && (\n+                    <SignatureNote style={{ margin: '0', fontSize: '12px' }}>\n+                      ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\n+                    </SignatureNote>\n+                  )}\n+                </div>\n                 <SignatureCanvas\n-                  key={selectedMember?.id || 'no-member'} // íšŒì› ë³€ê²½ ì‹œ ì»´í¬ë„ŒíŠ¸ ì¬ìƒì„±\n+                  key={selectedMember?.id || 'no-member'}\n                   width={250}\n-                  height={120}\n+                  height={100}\n                   onSignatureChange={handleSignatureChange}\n                   initialSignature={formData.signatureData}\n-                  readonly={hasExistingSignature()} // ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ ì½ê¸° ì „ìš©\n+                  readonly={hasExistingSignature()}\n                 />\n-                {hasExistingSignature() && (\n-                  <SignatureNote>\n-                    âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)\n-                  </SignatureNote>\n-                )}\n-                {!hasExistingSignature() && (\n-                  <SignatureNote>\n-                    ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\n-                  </SignatureNote>\n-                )}\n-              </SignatureSection>\n-            </SignatureArea>\n-            \n-            {/* ë‚ ì§œ ì •ë³´ í‘œì‹œ */}\n-            <DateRow>\n-              <DateItem>\n-                <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n-                <DateValue>\n-                  {currentPrescription?.signedAt \n-                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                    : hasSignature() \n-                      ? new Date().toLocaleDateString('ko-KR') \n-                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n-                </DateValue>\n-              </DateItem>\n-              <DateItem>\n-                <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n-                <DateValue>\n-                  {currentPrescription?.updatedAt \n-                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                    : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n-                </DateValue>\n-              </DateItem>\n-            </DateRow>\n+              </div>\n+            </div>\n           </ConsentSection>\n         </PrescriptionContainer>\n       </PrescriptionPanel>\n     </PageContainer>\n"
                },
                {
                    "date": 1761464754009,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -254,13 +254,8 @@\n   color: ${AppColors.onBackground};\n   margin-bottom: 20px;\n `;\n \n-const SignatureLabel = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n const DateRow = styled.div`\n   display: flex;\n   justify-content: space-between;\n   align-items: center;\n@@ -711,40 +706,41 @@\n             <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n             ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n             \n             <div style=\"display: flex; gap: 20px; align-items: flex-start;\">\n-              <div style=\"flex: 0 0 auto; min-width: 300px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n-                <div style=\"display: flex; justify-content: space-between;\">\n-                  <div style=\"text-align: center;\">\n-                    <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n-                    <div style=\"font-size: 14px; color: #000;\">\n-                      ${currentPrescription?.signedAt \n-                        ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                        : hasSignature() \n-                          ? new Date().toLocaleDateString('ko-KR') \n-                          : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                      }\n-                    </div>\n+              <div style=\"flex: 0 0 auto; min-width: 300px;\">\n+                <div style=\"margin-bottom: 10px; text-align: center;\">\n+                  <div style=\"font-size: 12px; color: ${hasExistingSignature() ? '#28a745' : '#666'};\">\n+                    ${hasExistingSignature() ? 'âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)' : 'ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤'}\n                   </div>\n-                  <div style=\"text-align: center;\">\n-                    <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n-                    <div style=\"font-size: 14px; color: #000;\">\n-                      ${currentPrescription?.updatedAt \n-                        ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                        : new Date().toLocaleDateString('ko-KR')\n-                      }\n+                </div>\n+                <div style=\"padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n+                  <div style=\"display: flex; justify-content: space-between;\">\n+                    <div style=\"text-align: center;\">\n+                      <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n+                      <div style=\"font-size: 14px; color: #000;\">\n+                        ${currentPrescription?.signedAt \n+                          ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                          : hasSignature() \n+                            ? new Date().toLocaleDateString('ko-KR') \n+                            : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                        }\n+                      </div>\n                     </div>\n+                    <div style=\"text-align: center;\">\n+                      <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n+                      <div style=\"font-size: 14px; color: #000;\">\n+                        ${currentPrescription?.updatedAt \n+                          ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                          : new Date().toLocaleDateString('ko-KR')\n+                        }\n+                      </div>\n+                    </div>\n                   </div>\n                 </div>\n               </div>\n               \n-              <div style=\"flex: 1; display: flex; flex-direction: column; align-items: center;\">\n-                <div style=\"display: flex; align-items: center; gap: 15px; margin-bottom: 10px; width: 100%; justify-content: center;\">\n-                  <div style=\"font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n-                  <div style=\"font-size: 12px; color: ${hasExistingSignature() ? '#28a745' : '#666'};\">\n-                    ${hasExistingSignature() ? 'âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)' : 'ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤'}\n-                  </div>\n-                </div>\n+              <div style=\"flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;\">\n                 ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 100px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 100px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n               </div>\n             </div>\n           </div>\n@@ -1025,35 +1021,11 @@\n             \n             {/* ì„œëª… ì˜ì—­ê³¼ ë‚ ì§œ ì •ë³´ë¥¼ í•˜ë‚˜ì˜ í–‰ìœ¼ë¡œ ë°°ì¹˜ */}\n             <div style={{ display: 'flex', gap: '20px', alignItems: 'flex-start' }}>\n               {/* ë‚ ì§œ ì •ë³´ ì¹´ë“œ - ì™¼ìª½ */}\n-              <DateRow style={{ flex: '0 0 auto', margin: '0', minWidth: '300px' }}>\n-                <DateItem>\n-                  <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n-                  <DateValue>\n-                    {currentPrescription?.signedAt \n-                      ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                      : hasSignature() \n-                        ? new Date().toLocaleDateString('ko-KR') \n-                        : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                    }\n-                  </DateValue>\n-                </DateItem>\n-                <DateItem>\n-                  <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n-                  <DateValue>\n-                    {currentPrescription?.updatedAt \n-                      ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                      : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                    }\n-                  </DateValue>\n-                </DateItem>\n-              </DateRow>\n-\n-              {/* ì„œëª… ì˜ì—­ - ì˜¤ë¥¸ìª½ */}\n-              <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n-                <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '10px', width: '100%', justifyContent: 'center' }}>\n-                  <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n+              <div style={{ flex: '0 0 auto', minWidth: '300px' }}>\n+                {/* ì„œëª… ì•ˆë‚´ í…ìŠ¤íŠ¸ */}\n+                <div style={{ marginBottom: '10px', textAlign: 'center' }}>\n                   {hasExistingSignature() && (\n                     <SignatureNote style={{ margin: '0', fontSize: '12px', color: '#28a745' }}>\n                       âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)\n                     </SignatureNote>\n@@ -1063,8 +1035,35 @@\n                       ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\n                     </SignatureNote>\n                   )}\n                 </div>\n+                {/* ë‚ ì§œ ì¹´ë“œ */}\n+                <DateRow style={{ margin: '0' }}>\n+                  <DateItem>\n+                    <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n+                    <DateValue>\n+                      {currentPrescription?.signedAt \n+                        ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                        : hasSignature() \n+                          ? new Date().toLocaleDateString('ko-KR') \n+                          : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                      }\n+                    </DateValue>\n+                  </DateItem>\n+                  <DateItem>\n+                    <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n+                    <DateValue>\n+                      {currentPrescription?.updatedAt \n+                        ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                        : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                      }\n+                    </DateValue>\n+                  </DateItem>\n+                </DateRow>\n+              </div>\n+\n+              {/* ì„œëª… ì˜ì—­ - ì˜¤ë¥¸ìª½ */}\n+              <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>\n                 <SignatureCanvas\n                   key={selectedMember?.id || 'no-member'}\n                   width={250}\n                   height={100}\n"
                },
                {
                    "date": 1761464902058,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -218,15 +218,15 @@\n \n const CheckboxGroup = styled.div`\n   display: flex;\n   flex-wrap: wrap;\n-  gap: 15px;\n+  gap: 10px;\n `;\n \n const CheckboxItem = styled.label`\n   display: flex;\n   align-items: center;\n-  gap: 8px;\n+  gap: 4px;\n   cursor: pointer;\n   font-size: ${AppTextStyles.body2.fontSize};\n `;\n \n@@ -240,9 +240,9 @@\n   margin-bottom: 20px;\n `;\n \n const ConsentSection = styled.div`\n-  margin-top: 40px;\n+  margin-top: 20px;\n   padding: 20px;\n   border: 1px solid ${AppColors.borderLight};\n   border-radius: 8px;\n   background: #f9f9f9;\n@@ -626,9 +626,9 @@\n           .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n           .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n           .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n-          .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n+          .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n           .date-area { text-align: right; }\n           textarea { resize: vertical; height: 100px; }\n           .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n@@ -662,18 +662,18 @@\n             </div>\n           </div>\n \n           <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n-              <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n+            <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 15px;\">\n+              <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0;\">ë³µìš©ì¤‘ì¸ ì•½</label>\n+              <input class=\"form-input\" value=\"${formData.medications}\" readonly style=\"flex: 1;\">\n             </div>\n           </div>\n \n           <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div class=\"checkbox-group\">\n+            <div class=\"form-group\" style=\"display: flex; align-items: flex-start; gap: 15px;\">\n+              <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0; padding-top: 8px;\">ë³‘ë ¥ì‚¬í•­</label>\n+              <div class=\"checkbox-group\" style=\"flex: 1;\">\n                 ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n                   const labels: { [key: string]: string } = {\n                     musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n                     cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n@@ -892,26 +892,27 @@\n               />\n             </FormGroup>\n           </FormRow>\n \n-          {/* ë³µìš©ì¤‘ì¸ ì•½ */}\n+          {/* ë³µìš©ì¤‘ì¸ ì•½ - ë¼ë²¨ê³¼ ì…ë ¥ë€ì„ ê°™ì€ í–‰ì— ë°°ì¹˜ */}\n           <FormRow>\n-            <FormGroup>\n-              <FormLabel>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n+            <FormGroup style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n+              <FormLabel style={{ marginBottom: '0', minWidth: '120px', flexShrink: 0 }}>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n               <FormInput\n                 type=\"text\"\n                 placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n                 value={formData.medications}\n                 onChange={(e) => handleInputChange('medications', e.target.value)}\n+                style={{ flex: 1 }}\n               />\n             </FormGroup>\n           </FormRow>\n \n-          {/* ë³‘ë ¥ì‚¬í•­ */}\n+          {/* ë³‘ë ¥ì‚¬í•­ - ë¼ë²¨ê³¼ ì²´í¬ë°•ìŠ¤ë¥¼ ê°™ì€ í–‰ì— ë°°ì¹˜ */}\n           <FormRow>\n-            <FormGroup>\n-              <FormLabel>ë³‘ë ¥ì‚¬í•­</FormLabel>\n-              <CheckboxGroup>\n+            <FormGroup style={{ display: 'flex', alignItems: 'flex-start', gap: '15px' }}>\n+              <FormLabel style={{ marginBottom: '0', minWidth: '120px', flexShrink: 0, paddingTop: '8px' }}>ë³‘ë ¥ì‚¬í•­</FormLabel>\n+              <CheckboxGroup style={{ flex: 1 }}>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.musculoskeletal}\n"
                },
                {
                    "date": 1761465071062,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -623,9 +623,9 @@\n           .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n           .form-group { flex: 1; }\n           .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n           .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-          .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n+          .checkbox-group { display: flex; flex-wrap: wrap; gap: 10px; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n           .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n@@ -669,11 +669,11 @@\n             </div>\n           </div>\n \n           <div class=\"form-row\">\n-            <div class=\"form-group\" style=\"display: flex; align-items: flex-start; gap: 15px;\">\n-              <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0; padding-top: 8px;\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div class=\"checkbox-group\" style=\"flex: 1;\">\n+            <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 15px;\">\n+              <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0;\">ë³‘ë ¥ì‚¬í•­</label>\n+              <div class=\"checkbox-group\" style=\"flex: 1; gap: 10px;\">\n                 ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n                   const labels: { [key: string]: string } = {\n                     musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n                     cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n@@ -682,9 +682,9 @@\n                     thyroid: 'ê°‘ìƒì„ ',\n                     varicose: 'ì •ë§¥ë¥˜',\n                     arthritis: 'ê´€ì ˆì—¼'\n                   };\n-                  return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                  return `<label style=\"display: flex; align-items: center; gap: 4px;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n                 }).join('')}\n               </div>\n             </div>\n           </div>\n@@ -908,10 +908,10 @@\n           </FormRow>\n \n           {/* ë³‘ë ¥ì‚¬í•­ - ë¼ë²¨ê³¼ ì²´í¬ë°•ìŠ¤ë¥¼ ê°™ì€ í–‰ì— ë°°ì¹˜ */}\n           <FormRow>\n-            <FormGroup style={{ display: 'flex', alignItems: 'flex-start', gap: '15px' }}>\n-              <FormLabel style={{ marginBottom: '0', minWidth: '120px', flexShrink: 0, paddingTop: '8px' }}>ë³‘ë ¥ì‚¬í•­</FormLabel>\n+            <FormGroup style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n+              <FormLabel style={{ marginBottom: '0', minWidth: '120px', flexShrink: 0 }}>ë³‘ë ¥ì‚¬í•­</FormLabel>\n               <CheckboxGroup style={{ flex: 1 }}>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n"
                },
                {
                    "date": 1761465200784,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -623,9 +623,10 @@\n           .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n           .form-group { flex: 1; }\n           .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n           .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-          .checkbox-group { display: flex; flex-wrap: wrap; gap: 10px; }\n+          .checkbox-group { display: flex; flex-wrap: nowrap; gap: 10px; overflow: hidden; }\n+          .checkbox-item { display: flex; align-items: center; gap: 4px; white-space: nowrap; flex-shrink: 0; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n           .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n@@ -671,9 +672,9 @@\n \n           <div class=\"form-row\">\n             <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 15px;\">\n               <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0;\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div class=\"checkbox-group\" style=\"flex: 1; gap: 10px;\">\n+              <div style=\"flex: 1; display: flex; flex-wrap: nowrap; gap: 10px; overflow: hidden;\">\n                 ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n                   const labels: { [key: string]: string } = {\n                     musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n                     cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n@@ -682,9 +683,9 @@\n                     thyroid: 'ê°‘ìƒì„ ',\n                     varicose: 'ì •ë§¥ë¥˜',\n                     arthritis: 'ê´€ì ˆì—¼'\n                   };\n-                  return `<label style=\"display: flex; align-items: center; gap: 4px;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                  return `<label style=\"display: flex; align-items: center; gap: 4px; white-space: nowrap; flex-shrink: 0;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n                 }).join('')}\n               </div>\n             </div>\n           </div>\n"
                },
                {
                    "date": 1761465319170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -623,10 +623,10 @@\n           .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n           .form-group { flex: 1; }\n           .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n           .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-          .checkbox-group { display: flex; flex-wrap: nowrap; gap: 10px; overflow: hidden; }\n-          .checkbox-item { display: flex; align-items: center; gap: 4px; white-space: nowrap; flex-shrink: 0; }\n+          .checkbox-group { display: flex; flex-wrap: nowrap; gap: 8px; overflow: hidden; }\n+          .checkbox-item { display: flex; align-items: center; gap: 3px; white-space: nowrap; flex-shrink: 0; font-size: 12px; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n           .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n@@ -672,9 +672,9 @@\n \n           <div class=\"form-row\">\n             <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 15px;\">\n               <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0;\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div style=\"flex: 1; display: flex; flex-wrap: nowrap; gap: 10px; overflow: hidden;\">\n+              <div style=\"flex: 1; display: flex; flex-wrap: nowrap; gap: 8px; overflow: hidden;\">\n                 ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n                   const labels: { [key: string]: string } = {\n                     musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n                     cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n@@ -683,9 +683,9 @@\n                     thyroid: 'ê°‘ìƒì„ ',\n                     varicose: 'ì •ë§¥ë¥˜',\n                     arthritis: 'ê´€ì ˆì—¼'\n                   };\n-                  return `<label style=\"display: flex; align-items: center; gap: 4px; white-space: nowrap; flex-shrink: 0;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                  return `<label style=\"display: flex; align-items: center; gap: 3px; white-space: nowrap; flex-shrink: 0; font-size: 12px;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled style=\"margin: 0;\"> ${labels[key]}</label>`;\n                 }).join('')}\n               </div>\n             </div>\n           </div>\n"
                },
                {
                    "date": 1761465672684,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -596,16 +596,67 @@\n     if (!selectedMember) return '';\n \n     // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ë“¤ì„ HTMLë¡œ ë³€í™˜\n     const generatePointsHTML = (points: BodyImagePoint[], imageType: string) => {\n-      if (points.length === 0) return `<div class=\"image-box\"><strong>${imageType}</strong><br><small>ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</small></div>`;\n+      if (points.length === 0) {\n+        return `\n+          <div class=\"image-box\">\n+            <div class=\"image-header\"><strong>${imageType}</strong></div>\n+            <div class=\"image-content\">\n+              <div class=\"no-points\">ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</div>\n+            </div>\n+          </div>\n+        `;\n+      }\n       \n-      const pointsHtml = points.map(point => \n-        `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y}%; width: 8px; height: 8px; background: ${point.color || '#ff0000'}; border: 1px solid white; border-radius: 50%; transform: translate(-50%, -50%);\"></div>\n-         ${point.memo ? `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y + 5}%; font-size: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 4px; border-radius: 2px; transform: translateX(-50%); white-space: nowrap;\">${point.memo}</div>` : ''}`\n+      // í¬ì¸íŠ¸ë“¤ì„ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œ\n+      const pointsHtml = points.map((point, index) => \n+        `<div class=\"point-marker\" style=\"\n+           position: absolute; \n+           left: ${point.x}%; \n+           top: ${point.y}%; \n+           width: 8px; \n+           height: 8px; \n+           background: ${point.color || '#ff0000'}; \n+           border: 1px solid white; \n+           border-radius: 50%; \n+           transform: translate(-50%, -50%);\n+           box-shadow: 0 0 3px rgba(0,0,0,0.4);\n+           z-index: 10;\n+         \"></div>\n+         ${point.memo ? `<div class=\"point-memo\" style=\"\n+           position: absolute; \n+           left: ${point.x}%; \n+           top: ${point.y}%; \n+           font-size: 8px; \n+           background: rgba(0,0,0,0.8); \n+           color: white; \n+           padding: 1px 4px; \n+           border-radius: 2px; \n+           transform: translate(-50%, calc(-100% - 6px)); \n+           white-space: nowrap;\n+           max-width: 100px;\n+           overflow: hidden;\n+           text-overflow: ellipsis;\n+           z-index: 11;\n+         \">${point.memo}</div>` : ''}`\n       ).join('');\n       \n-      return `<div class=\"image-box\" style=\"position: relative;\"><strong>${imageType}</strong><br><small>${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨</small>${pointsHtml}</div>`;\n+      // í¬ì¸íŠ¸ ëª©ë¡ì„ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ (í•„ìš”ì‹œ)\n+      const pointsList = points.length > 0 ? \n+        `<div class=\"points-summary\" style=\"margin-top: 5px; font-size: 10px; color: #666;\">\n+           ${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨\n+         </div>` : '';\n+      \n+      return `\n+        <div class=\"image-box\" style=\"position: relative;\">\n+          <div class=\"image-header\"><strong>${imageType}</strong></div>\n+          <div class=\"image-content\" style=\"position: relative; height: 200px; border: 1px solid #ddd; background: #f8f9fa; margin: 5px 0;\">\n+            ${pointsHtml}\n+          </div>\n+          ${pointsList}\n+        </div>\n+      `;\n     };\n \n     return `\n       <!DOCTYPE html>\n@@ -626,9 +677,44 @@\n           .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n           .checkbox-group { display: flex; flex-wrap: nowrap; gap: 8px; overflow: hidden; }\n           .checkbox-item { display: flex; align-items: center; gap: 3px; white-space: nowrap; flex-shrink: 0; font-size: 12px; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n-          .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n+          .image-box { \n+            flex: 1; \n+            border: 2px solid #ddd; \n+            border-radius: 8px; \n+            padding: 10px;\n+            background: white;\n+          }\n+          .image-header {\n+            text-align: center;\n+            font-weight: bold;\n+            margin-bottom: 8px;\n+            padding-bottom: 5px;\n+            border-bottom: 1px solid #eee;\n+          }\n+          .image-content {\n+            position: relative;\n+            height: 200px;\n+            border: 1px solid #ddd;\n+            background: #f8f9fa;\n+            margin: 5px 0;\n+            border-radius: 4px;\n+          }\n+          .no-points {\n+            position: absolute;\n+            top: 50%;\n+            left: 50%;\n+            transform: translate(-50%, -50%);\n+            color: #999;\n+            font-size: 12px;\n+          }\n+          .points-summary {\n+            margin-top: 5px;\n+            font-size: 10px;\n+            color: #666;\n+            text-align: center;\n+          }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n           .date-area { text-align: right; }\n           textarea { resize: vertical; height: 100px; }\n"
                },
                {
                    "date": 1761465796352,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -613,48 +613,41 @@\n         `<div class=\"point-marker\" style=\"\n            position: absolute; \n            left: ${point.x}%; \n            top: ${point.y}%; \n-           width: 8px; \n-           height: 8px; \n+           width: 6px; \n+           height: 6px; \n            background: ${point.color || '#ff0000'}; \n            border: 1px solid white; \n            border-radius: 50%; \n            transform: translate(-50%, -50%);\n-           box-shadow: 0 0 3px rgba(0,0,0,0.4);\n+           box-shadow: 0 0 2px rgba(0,0,0,0.5);\n            z-index: 10;\n          \"></div>\n          ${point.memo ? `<div class=\"point-memo\" style=\"\n            position: absolute; \n            left: ${point.x}%; \n            top: ${point.y}%; \n-           font-size: 8px; \n+           font-size: 7px; \n            background: rgba(0,0,0,0.8); \n            color: white; \n-           padding: 1px 4px; \n+           padding: 1px 3px; \n            border-radius: 2px; \n-           transform: translate(-50%, calc(-100% - 6px)); \n+           transform: translate(-50%, calc(-100% - 4px)); \n            white-space: nowrap;\n-           max-width: 100px;\n+           max-width: 80px;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            z-index: 11;\n          \">${point.memo}</div>` : ''}`\n       ).join('');\n       \n-      // í¬ì¸íŠ¸ ëª©ë¡ì„ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ (í•„ìš”ì‹œ)\n-      const pointsList = points.length > 0 ? \n-        `<div class=\"points-summary\" style=\"margin-top: 5px; font-size: 10px; color: #666;\">\n-           ${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨\n-         </div>` : '';\n-      \n       return `\n         <div class=\"image-box\" style=\"position: relative;\">\n           <div class=\"image-header\"><strong>${imageType}</strong></div>\n           <div class=\"image-content\" style=\"position: relative; height: 200px; border: 1px solid #ddd; background: #f8f9fa; margin: 5px 0;\">\n             ${pointsHtml}\n           </div>\n-          ${pointsList}\n         </div>\n       `;\n     };\n \n@@ -707,14 +700,8 @@\n             transform: translate(-50%, -50%);\n             color: #999;\n             font-size: 12px;\n           }\n-          .points-summary {\n-            margin-top: 5px;\n-            font-size: 10px;\n-            color: #666;\n-            text-align: center;\n-          }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n           .date-area { text-align: right; }\n           textarea { resize: vertical; height: 100px; }\n"
                },
                {
                    "date": 1761466015508,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -594,60 +594,45 @@\n \n   const generatePrescriptionHTML = () => {\n     if (!selectedMember) return '';\n \n-    // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ë“¤ì„ HTMLë¡œ ë³€í™˜\n-    const generatePointsHTML = (points: BodyImagePoint[], imageType: string) => {\n+    // ì‹ ì²´ ì´ë¯¸ì§€ SVG ìƒì„± í•¨ìˆ˜\n+    const generateBodyImageSVG = (imageType: 'front' | 'spine' | 'back', title: string) => {\n+      const points = formData.bodyImages[imageType];\n+      \n       if (points.length === 0) {\n         return `\n           <div class=\"image-box\">\n-            <div class=\"image-header\"><strong>${imageType}</strong></div>\n+            <div class=\"image-header\"><strong>${title}</strong></div>\n             <div class=\"image-content\">\n               <div class=\"no-points\">ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</div>\n             </div>\n           </div>\n         `;\n       }\n-      \n-      // í¬ì¸íŠ¸ë“¤ì„ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œ\n-      const pointsHtml = points.map((point, index) => \n-        `<div class=\"point-marker\" style=\"\n-           position: absolute; \n-           left: ${point.x}%; \n-           top: ${point.y}%; \n-           width: 6px; \n-           height: 6px; \n-           background: ${point.color || '#ff0000'}; \n-           border: 1px solid white; \n-           border-radius: 50%; \n-           transform: translate(-50%, -50%);\n-           box-shadow: 0 0 2px rgba(0,0,0,0.5);\n-           z-index: 10;\n-         \"></div>\n-         ${point.memo ? `<div class=\"point-memo\" style=\"\n-           position: absolute; \n-           left: ${point.x}%; \n-           top: ${point.y}%; \n-           font-size: 7px; \n-           background: rgba(0,0,0,0.8); \n-           color: white; \n-           padding: 1px 3px; \n-           border-radius: 2px; \n-           transform: translate(-50%, calc(-100% - 4px)); \n-           white-space: nowrap;\n-           max-width: 80px;\n-           overflow: hidden;\n-           text-overflow: ellipsis;\n-           z-index: 11;\n-         \">${point.memo}</div>` : ''}`\n-      ).join('');\n-      \n+\n+      // SVGë¡œ í¬ì¸íŠ¸ë“¤ ìƒì„±\n+      const svgPoints = points.map(point => {\n+        const x = (point.x / 100) * 200; // 200px ê¸°ì¤€\n+        const y = (point.y / 100) * 200; // 200px ê¸°ì¤€\n+        \n+        return `\n+          <circle cx=\"${x}\" cy=\"${y}\" r=\"3\" fill=\"${point.color || '#ff0000'}\" stroke=\"#000\" stroke-width=\"1\"/>\n+          ${point.memo ? `<text x=\"${x}\" y=\"${y - 8}\" font-family=\"Arial\" font-size=\"8\" text-anchor=\"middle\" fill=\"#000\">${point.memo}</text>` : ''}\n+        `;\n+      }).join('');\n+\n+      const svgDataUrl = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(`\n+        <svg width=\"200\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\n+          <rect width=\"200\" height=\"200\" fill=\"#f8f9fa\" stroke=\"#ddd\" stroke-width=\"1\"/>\n+          ${svgPoints}\n+        </svg>\n+      `)}`;\n+\n       return `\n-        <div class=\"image-box\" style=\"position: relative;\">\n-          <div class=\"image-header\"><strong>${imageType}</strong></div>\n-          <div class=\"image-content\" style=\"position: relative; height: 200px; border: 1px solid #ddd; background: #f8f9fa; margin: 5px 0;\">\n-            ${pointsHtml}\n-          </div>\n+        <div class=\"image-box\">\n+          <div class=\"image-header\"><strong>${title}</strong></div>\n+          <img src=\"${svgDataUrl}\" style=\"width: 100%; height: 200px; object-fit: contain; border: 1px solid #ddd; border-radius: 4px;\" />\n         </div>\n       `;\n     };\n \n@@ -659,8 +644,25 @@\n         <style>\n           @media print {\n             body { margin: 0; padding: 20px; }\n             .no-print { display: none !important; }\n+            /* PDF ì¶œë ¥ ìµœì í™” */\n+            * {\n+              -webkit-print-color-adjust: exact !important;\n+              color-adjust: exact !important;\n+              print-color-adjust: exact !important;\n+            }\n+            .point-marker {\n+              background: var(--point-color) !important;\n+              border: 1px solid #000 !important;\n+              width: 4px !important;\n+              height: 4px !important;\n+            }\n+            .point-memo {\n+              background: #000 !important;\n+              color: #fff !important;\n+              font-size: 6px !important;\n+            }\n           }\n           body { font-family: Arial, sans-serif; margin: 20px; }\n           .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n           .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n@@ -700,17 +702,36 @@\n             transform: translate(-50%, -50%);\n             color: #999;\n             font-size: 12px;\n           }\n+          .point-marker {\n+            -webkit-print-color-adjust: exact;\n+            color-adjust: exact;\n+            print-color-adjust: exact;\n+          }\n+          .point-memo {\n+            -webkit-print-color-adjust: exact;\n+            color-adjust: exact;\n+            print-color-adjust: exact;\n+          }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n           .date-area { text-align: right; }\n           textarea { resize: vertical; height: 100px; }\n           .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n         </style>\n       </head>\n       <body>\n-        <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n+        <div class=\"no-print\" style=\"margin: 20px; padding: 15px; background: #f0f8ff; border: 1px solid #007bff; border-radius: 5px;\">\n+          <div style=\"display: flex; align-items: center; gap: 15px;\">\n+            <button class=\"print-button\" onclick=\"window.print()\" style=\"margin: 0;\">ì¸ì‡„í•˜ê¸°</button>\n+            <div style=\"font-size: 12px; color: #666;\">\n+              <strong>PDF ì¶œë ¥ ì‹œ ìƒ‰ìƒì´ ì•ˆ ë³´ì´ëŠ” ê²½ìš°:</strong><br>\n+              ì¸ì‡„ ì˜µì…˜ì—ì„œ \"ê¸°íƒ€ ì„¤ì •\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" ì²´í¬ ë˜ëŠ”<br>\n+              Chrome: \"ë”ë³´ê¸°\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" í™œì„±í™”\n+            </div>\n+          </div>\n+        </div>\n         <div class=\"prescription-container\">\n           <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n           \n           <div class=\"form-row\">\n@@ -763,11 +784,11 @@\n             </div>\n           </div>\n \n           <div class=\"image-section\">\n-            ${generatePointsHTML(formData.bodyImages.front, 'ì •ë©´')}\n-            ${generatePointsHTML(formData.bodyImages.spine, 'ì²™ì¶”')}\n-            ${generatePointsHTML(formData.bodyImages.back, 'í›„ë©´')}\n+            ${generateBodyImageSVG('front', 'ì •ë©´')}\n+            ${generateBodyImageSVG('spine', 'ì²™ì¶”')}\n+            ${generateBodyImageSVG('back', 'í›„ë©´')}\n           </div>\n \n           <div class=\"form-row\">\n             <div class=\"form-group\">\n@@ -1047,32 +1068,38 @@\n           </FormRow>\n \n           {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n           <ImageSection>\n-            <BodyImageCanvas\n-              imageType=\"front\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.front}\n-              onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n-            />\n-            <BodyImageCanvas\n-              imageType=\"spine\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.spine}\n-              onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n-            />\n-            <BodyImageCanvas\n-              imageType=\"back\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.back}\n-              onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n-            />\n+            <div data-image-type=\"front\">\n+              <BodyImageCanvas\n+                imageType=\"front\"\n+                imageUrl=\"\"\n+                points={formData.bodyImages.front}\n+                onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n+                onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n+                onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n+              />\n+            </div>\n+            <div data-image-type=\"spine\">\n+              <BodyImageCanvas\n+                imageType=\"spine\"\n+                imageUrl=\"\"\n+                points={formData.bodyImages.spine}\n+                onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n+                onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n+                onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n+              />\n+            </div>\n+            <div data-image-type=\"back\">\n+              <BodyImageCanvas\n+                imageType=\"back\"\n+                imageUrl=\"\"\n+                points={formData.bodyImages.back}\n+                onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n+                onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n+                onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n+              />\n+            </div>\n           </ImageSection>\n \n           {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n           <FormRow>\n"
                },
                {
                    "date": 1762427973072,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -368,13 +368,13 @@\n         return;\n       }\n \n       try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n         const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n         \n         if (prescription) {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n           setCurrentPrescription(prescription);\n           setFormData({\n             height: prescription.height,\n             weight: prescription.weight,\n@@ -384,9 +384,9 @@\n             painHistory: prescription.painHistory,\n             bodyImages: prescription.bodyImages,\n             signatureData: prescription.signatureData || '',\n           });\n-          console.log('ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n         } else {\n           // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n           setCurrentPrescription(null);\n           setFormData({\n@@ -550,32 +550,20 @@\n         signatureData: finalSignatureData,\n         signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n         isActive: true,\n         prescriptionDate: new Date(),\n+        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n+        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n       };\n \n       if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸\n-        await dbManager.exercisePrescription.updateExercisePrescription(\n-          currentPrescription.id,\n-          {\n-            height: formData.height,\n-            weight: formData.weight,\n-            footSize: formData.footSize,\n-            medications: formData.medications,\n-            medicalHistory: formData.medicalHistory,\n-            painHistory: formData.painHistory,\n-            bodyImages: formData.bodyImages,\n-            signatureData: finalSignatureData, // ìµœì¢… ì„œëª… ë°ì´í„° ì‚¬ìš©\n-            isActive: true,\n-            prescriptionDate: new Date(),\n-          }\n-        );\n-        console.log('ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', currentPrescription.id);\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n         \n-        // ì—…ë°ì´íŠ¸ëœ ì²˜ë°©ì„œ ì •ë³´ ë‹¤ì‹œ ë¡œë“œ\n-        const updatedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(currentPrescription.id);\n-        setCurrentPrescription(updatedPrescription);\n+        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n       } else {\n         // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n         const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n         console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n"
                },
                {
                    "date": 1762429025892,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import React, { useEffect, useState } from 'react';\n+import React, { useEffect, useState, useCallback } from 'react';\n import { useSearchParams } from 'react-router-dom';\n import styled from 'styled-components';\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n@@ -18,26 +18,27 @@\n     background: white;\n   }\n `;\n \n-const SearchPanel = styled.div`\n+const SearchPanel = styled.div<{ $hidden?: boolean }>`\n   width: 300px;\n   background: ${AppColors.surface};\n   border-right: 1px solid ${AppColors.borderLight};\n   padding: 20px;\n   overflow-y: auto;\n+  display: ${props => props.$hidden ? 'none' : 'block'};\n   \n   @media print {\n     display: none;\n   }\n `;\n \n-const ButtonPanel = styled.div`\n+const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n   width: 80px;\n   background: ${AppColors.surface};\n   border-right: 1px solid ${AppColors.borderLight};\n   padding: 20px 10px;\n-  display: flex;\n+  display: ${props => props.$hidden ? 'none' : 'flex'};\n   flex-direction: column;\n   gap: 15px;\n   align-items: center;\n   \n@@ -297,8 +298,9 @@\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -425,18 +427,54 @@\n   const filteredMembers = members.filter(member =>\n     member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n   );\n \n+  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n+    try {\n+      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+      if (prescription) {\n+        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n+        const member = members.find(m => m.id === prescription.memberId);\n+        if (member) {\n+          setSelectedMember(member);\n+        }\n+        \n+        setCurrentPrescription(prescription);\n+        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n+        setFormData({\n+          height: prescription.height,\n+          weight: prescription.weight,\n+          footSize: prescription.footSize,\n+          medications: prescription.medications,\n+          medicalHistory: prescription.medicalHistory,\n+          painHistory: prescription.painHistory,\n+          bodyImages: prescription.bodyImages,\n+          signatureData: prescription.signatureData || '',\n+        });\n+        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n+      }\n+    } catch (error) {\n+      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [members]);\n+\n   useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid ë˜ëŠ” memberId í™•ì¸\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n     const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    if (userIdParam && members.length > 0) {\n+    const prescriptionIdParam = searchParams.get('prescriptionId');\n+    \n+    if (prescriptionIdParam) {\n+      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+      loadSpecificPrescription(prescriptionIdParam);\n+    } else if (userIdParam && members.length > 0) {\n+      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n       const member = members.find(m => m.id === userIdParam);\n       if (member) {\n         setSelectedMember(member);\n       }\n     }\n-  }, [searchParams, members]);\n+  }, [searchParams, members, loadSpecificPrescription]);\n \n   const handleMemberSelect = (member: Member) => {\n     setSelectedMember(member);\n   };\n@@ -905,9 +943,9 @@\n       <ButtonPanel>\n         <ActionButton \n           onClick={handleSave} \n           title=\"ì €ì¥\"\n-          disabled={!hasSignature() && !hasExistingSignature()} // í˜„ì¬ ì„œëª…ì´ ìˆê±°ë‚˜ ê¸°ì¡´ ì„œëª…ì´ ìˆì–´ì•¼ ì €ì¥ ê°€ëŠ¥\n+          disabled={isReadOnly || (!hasSignature() && !hasExistingSignature())} // ì½ê¸° ì „ìš©ì´ê±°ë‚˜ ì„œëª…ì´ ì—†ìœ¼ë©´ ë¹„í™œì„±í™”\n         >\n           <ButtonIcon>ğŸ’¾</ButtonIcon>\n           <ButtonText>ì €ì¥</ButtonText>\n         </ActionButton>\n@@ -953,8 +991,10 @@\n                 type=\"text\"\n                 placeholder=\"í‚¤(cm)\"\n                 value={formData.height}\n                 onChange={(e) => handleInputChange('height', e.target.value)}\n+                readOnly={isReadOnly}\n+                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n               />\n             </FormGroup>\n             <FormGroup>\n               <FormLabel>ì²´ì¤‘</FormLabel>\n@@ -962,8 +1002,10 @@\n                 type=\"text\"\n                 placeholder=\"ì²´ì¤‘(kg)\"\n                 value={formData.weight}\n                 onChange={(e) => handleInputChange('weight', e.target.value)}\n+                readOnly={isReadOnly}\n+                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n               />\n             </FormGroup>\n             <FormGroup>\n               <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n@@ -971,8 +1013,10 @@\n                 type=\"text\"\n                 placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n                 value={formData.footSize}\n                 onChange={(e) => handleInputChange('footSize', e.target.value)}\n+                readOnly={isReadOnly}\n+                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n               />\n             </FormGroup>\n           </FormRow>\n \n@@ -984,9 +1028,10 @@\n                 type=\"text\"\n                 placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n                 value={formData.medications}\n                 onChange={(e) => handleInputChange('medications', e.target.value)}\n-                style={{ flex: 1 }}\n+                style={{ flex: 1, background: isReadOnly ? '#f5f5f5' : 'white' }}\n+                readOnly={isReadOnly}\n               />\n             </FormGroup>\n           </FormRow>\n \n@@ -999,56 +1044,63 @@\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.musculoskeletal}\n                     onChange={(e) => handleCheckboxChange('musculoskeletal', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ê·¼ê³¨ê²©ê³„ì§ˆí™˜\n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.cardiovascular}\n                     onChange={(e) => handleCheckboxChange('cardiovascular', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ì‹¬í˜ˆê´€ê³„ì§ˆí™˜\n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.diabetes}\n                     onChange={(e) => handleCheckboxChange('diabetes', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ë‹¹ë‡¨\n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.osteoporosis}\n                     onChange={(e) => handleCheckboxChange('osteoporosis', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ê³¨ë‹¤ê³µì¦\n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.thyroid}\n                     onChange={(e) => handleCheckboxChange('thyroid', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ê°‘ìƒì„ \n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.varicose}\n                     onChange={(e) => handleCheckboxChange('varicose', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ì •ë§¥ë¥˜\n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.arthritis}\n                     onChange={(e) => handleCheckboxChange('arthritis', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ê´€ì ˆì—¼\n                 </CheckboxItem>\n               </CheckboxGroup>\n@@ -1097,8 +1149,10 @@\n                 rows={6}\n                 placeholder=\"í†µì¦ íˆìŠ¤í† ë¦¬, ìˆ˜ìˆ  ì´ë ¥, ìš´ë™ ëª©ì  ë“±ì„ ìƒì„¸íˆ ê¸°ì…í•´ì£¼ì„¸ìš”\"\n                 value={formData.painHistory}\n                 onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+                readOnly={isReadOnly}\n+                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n               />\n             </FormGroup>\n           </FormRow>\n \n"
                }
            ],
            "date": 1761379597392,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { AppColors } from '../styles/colors';\nimport { AppTextStyles } from '../styles/textStyles';\n\nconst PageContainer = styled.div`\n  min-height: 100vh;\n  padding: 40px 20px;\n  background: ${AppColors.background};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst ContentContainer = styled.div`\n  background: ${AppColors.surface};\n  border-radius: 16px;\n  padding: 48px;\n  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);\n  text-align: center;\n  max-width: 600px;\n  width: 100%;\n`;\n\nconst Title = styled.h1`\n  font-size: ${AppTextStyles.title1.fontSize};\n  font-weight: 700;\n  color: ${AppColors.onBackground};\n  margin: 0 0 24px 0;\n`;\n\nconst Description = styled.p`\n  font-size: ${AppTextStyles.body1.fontSize};\n  color: ${AppColors.onInput1};\n  margin: 0 0 32px 0;\n  line-height: 1.6;\n`;\n\nconst InfoCard = styled.div`\n  background: #f8f9fa;\n  border: 1px solid ${AppColors.borderLight};\n  border-radius: 12px;\n  padding: 24px;\n  margin: 24px 0;\n`;\n\nconst InfoLabel = styled.div`\n  font-size: ${AppTextStyles.label2.fontSize};\n  color: ${AppColors.onInput1};\n  margin-bottom: 8px;\n`;\n\nconst InfoValue = styled.div`\n  font-size: ${AppTextStyles.body1.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onBackground};\n`;\n\nconst ComingSoonBadge = styled.div`\n  display: inline-block;\n  background: ${AppColors.primary};\n  color: ${AppColors.onPrimary};\n  padding: 8px 16px;\n  border-radius: 20px;\n  font-size: ${AppTextStyles.label2.fontSize};\n  font-weight: 500;\n  margin-bottom: 16px;\n`;\n\nconst ExercisePrescriptionPage: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const [memberId, setMemberId] = useState<string>('');\n\n  useEffect(() => {\n    const memberIdParam = searchParams.get('memberId');\n    if (memberIdParam) {\n      setMemberId(memberIdParam);\n    }\n  }, [searchParams]);\n\n  return (\n    <PageContainer>\n      <ContentContainer>\n        <ComingSoonBadge>ê°œë°œ ì¤‘</ComingSoonBadge>\n        <Title>ìš´ë™ì²˜ë°© í˜ì´ì§€</Title>\n        <Description>\n          ê°œì¸ ë§ì¶¤í˜• ìš´ë™ í”„ë¡œê·¸ë¨ì„ ì œê³µí•˜ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.\n          <br />\n          í˜„ì¬ ê°œë°œ ì¤‘ì´ë©°, ê³§ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•  ì˜ˆì •ì…ë‹ˆë‹¤.\n        </Description>\n        \n        {memberId && (\n          <InfoCard>\n            <InfoLabel>ì „ë‹¬ë°›ì€ íšŒì› ID</InfoLabel>\n            <InfoValue>{memberId}</InfoValue>\n          </InfoCard>\n        )}\n        \n        <Description>\n          ì´ í˜ì´ì§€ëŠ” QR ì½”ë“œë¥¼ í†µí•´ ì ‘ê·¼ë˜ì—ˆìœ¼ë©°,\n          <br />\n          í–¥í›„ íšŒì›ë³„ ë§ì¶¤ ìš´ë™ì²˜ë°© ì •ë³´ë¥¼ ì œê³µí•  ì˜ˆì •ì…ë‹ˆë‹¤.\n        </Description>\n      </ContentContainer>\n    </PageContainer>\n  );\n};\n\nexport default ExercisePrescriptionPage;"
        }
    ]
}