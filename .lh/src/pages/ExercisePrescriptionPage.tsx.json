{
    "sourceFile": "src/pages/ExercisePrescriptionPage.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 97,
            "patches": [
                {
                    "date": 1761379597392,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1761461532733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,105 +5,491 @@\n import { AppTextStyles } from '../styles/textStyles';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n-  padding: 40px 20px;\n+  display: flex;\n   background: ${AppColors.background};\n-  display: flex;\n-  justify-content: center;\n-  align-items: center;\n `;\n \n-const ContentContainer = styled.div`\n+const SearchPanel = styled.div`\n+  width: 300px;\n   background: ${AppColors.surface};\n-  border-radius: 16px;\n-  padding: 48px;\n-  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);\n-  text-align: center;\n-  max-width: 600px;\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 20px;\n+  overflow-y: auto;\n+`;\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n   width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n `;\n \n-const Title = styled.h1`\n-  font-size: ${AppTextStyles.title1.fontSize};\n-  font-weight: 700;\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n   color: ${AppColors.onBackground};\n-  margin: 0 0 24px 0;\n+  margin-bottom: 4px;\n `;\n \n-const Description = styled.p`\n-  font-size: ${AppTextStyles.body1.fontSize};\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n   color: ${AppColors.onInput1};\n-  margin: 0 0 32px 0;\n-  line-height: 1.6;\n `;\n \n-const InfoCard = styled.div`\n-  background: #f8f9fa;\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  min-height: calc(100vh - 40px);\n+`;\n+\n+const PrescriptionTitle = styled.h1`\n+  text-align: center;\n+  font-size: 24px;\n+  font-weight: bold;\n+  margin-bottom: 30px;\n+  color: ${AppColors.onBackground};\n+`;\n+\n+const FormRow = styled.div`\n+  display: flex;\n+  gap: 20px;\n+  margin-bottom: 20px;\n+  align-items: center;\n+`;\n+\n+const FormGroup = styled.div`\n+  flex: 1;\n+`;\n+\n+const FormLabel = styled.label`\n+  display: block;\n+  font-size: ${AppTextStyles.label1.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 8px;\n+`;\n+\n+const FormInput = styled.input`\n+  width: 100%;\n+  padding: 10px;\n   border: 1px solid ${AppColors.borderLight};\n-  border-radius: 12px;\n-  padding: 24px;\n-  margin: 24px 0;\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n `;\n \n-const InfoLabel = styled.div`\n-  font-size: ${AppTextStyles.label2.fontSize};\n+const FormTextarea = styled.textarea`\n+  width: 100%;\n+  padding: 10px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  resize: vertical;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const CheckboxGroup = styled.div`\n+  display: flex;\n+  flex-wrap: wrap;\n+  gap: 15px;\n+`;\n+\n+const CheckboxItem = styled.label`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  cursor: pointer;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+`;\n+\n+const Checkbox = styled.input`\n+  margin: 0;\n+`;\n+\n+const ImageSection = styled.div`\n+  display: flex;\n+  gap: 20px;\n+  margin-bottom: 20px;\n+`;\n+\n+const ImageBox = styled.div`\n+  flex: 1;\n+  height: 200px;\n+  border: 2px dashed ${AppColors.borderLight};\n+  border-radius: 8px;\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  justify-content: center;\n   color: ${AppColors.onInput1};\n-  margin-bottom: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n `;\n \n-const InfoValue = styled.div`\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: 600;\n+const ConsentSection = styled.div`\n+  margin-top: 40px;\n+  padding: 20px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  background: #f9f9f9;\n+`;\n+\n+const ConsentText = styled.p`\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  line-height: 1.6;\n   color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n `;\n \n-const ComingSoonBadge = styled.div`\n-  display: inline-block;\n-  background: ${AppColors.primary};\n-  color: ${AppColors.onPrimary};\n-  padding: 8px 16px;\n-  border-radius: 20px;\n-  font-size: ${AppTextStyles.label2.fontSize};\n-  font-weight: 500;\n-  margin-bottom: 16px;\n+const SignatureArea = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: flex-end;\n `;\n \n+const SignatureBox = styled.div`\n+  width: 200px;\n+  height: 80px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  background: white;\n+  position: relative;\n+  \n+  &::after {\n+    content: 'ì„œëª…';\n+    position: absolute;\n+    bottom: -25px;\n+    left: 50%;\n+    transform: translateX(-50%);\n+    font-size: ${AppTextStyles.body3.fontSize};\n+    color: ${AppColors.onInput1};\n+  }\n+`;\n+\n+const DateArea = styled.div`\n+  text-align: right;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  color: ${AppColors.onBackground};\n+`;\n+\n+interface Member {\n+  id: string;\n+  name: string;\n+  birthDate: string;\n+  phone: string;\n+}\n+\n const ExercisePrescriptionPage: React.FC = () => {\n   const [searchParams] = useSearchParams();\n-  const [memberId, setMemberId] = useState<string>('');\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    },\n+    painHistory: '',\n+  });\n \n+  // ìƒ˜í”Œ íšŒì› ë°ì´í„° (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì˜¬ ë°ì´í„°)\n+  const [members] = useState<Member[]>([\n+    { id: '1', name: 'ê¹€ì² ìˆ˜', birthDate: '1985-03-15', phone: '010-1234-5678' },\n+    { id: '2', name: 'ì´ì˜í¬', birthDate: '1990-07-22', phone: '010-2345-6789' },\n+    { id: '3', name: 'ë°•ë¯¼ìˆ˜', birthDate: '1988-11-08', phone: '010-3456-7890' },\n+    { id: '4', name: 'ìµœì§€ì˜', birthDate: '1992-05-30', phone: '010-4567-8901' },\n+  ]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n   useEffect(() => {\n     const memberIdParam = searchParams.get('memberId');\n     if (memberIdParam) {\n-      setMemberId(memberIdParam);\n+      const member = members.find(m => m.id === memberIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n     }\n-  }, [searchParams]);\n+  }, [searchParams, members]);\n \n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value,\n+    }));\n+  };\n+\n+  const handleCheckboxChange = (field: string, checked: boolean) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      medicalHistory: {\n+        ...prev.medicalHistory,\n+        [field]: checked,\n+      },\n+    }));\n+  };\n+\n   return (\n     <PageContainer>\n-      <ContentContainer>\n-        <ComingSoonBadge>ê°œë°œ ì¤‘</ComingSoonBadge>\n-        <Title>ìš´ë™ì²˜ë°© í˜ì´ì§€</Title>\n-        <Description>\n-          ê°œì¸ ë§ì¶¤í˜• ìš´ë™ í”„ë¡œê·¸ë¨ì„ ì œê³µí•˜ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.\n-          <br />\n-          í˜„ì¬ ê°œë°œ ì¤‘ì´ë©°, ê³§ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•  ì˜ˆì •ì…ë‹ˆë‹¤.\n-        </Description>\n-        \n-        {memberId && (\n-          <InfoCard>\n-            <InfoLabel>ì „ë‹¬ë°›ì€ íšŒì› ID</InfoLabel>\n-            <InfoValue>{memberId}</InfoValue>\n-          </InfoCard>\n-        )}\n-        \n-        <Description>\n-          ì´ í˜ì´ì§€ëŠ” QR ì½”ë“œë¥¼ í†µí•´ ì ‘ê·¼ë˜ì—ˆìœ¼ë©°,\n-          <br />\n-          í–¥í›„ íšŒì›ë³„ ë§ì¶¤ ìš´ë™ì²˜ë°© ì •ë³´ë¥¼ ì œê³µí•  ì˜ˆì •ì…ë‹ˆë‹¤.\n-        </Description>\n-      </ContentContainer>\n+      <SearchPanel>\n+        <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birthDate}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+        </MemberList>\n+      </SearchPanel>\n+\n+      <PrescriptionPanel>\n+        <PrescriptionContainer>\n+          <PrescriptionTitle>ìš´ë™ì²˜ë°©ì„œ</PrescriptionTitle>\n+          \n+          {/* ê¸°ë³¸ ì •ë³´ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ì„±ëª…</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                value={selectedMember?.name || ''}\n+                readOnly\n+                style={{ background: '#f5f5f5' }}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>ìƒë…„ì›”ì¼</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                value={selectedMember?.birthDate || ''}\n+                readOnly\n+                style={{ background: '#f5f5f5' }}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>í‚¤/ì²´ì¤‘</FormLabel>\n+              <div style={{ display: 'flex', gap: '10px' }}>\n+                <FormInput\n+                  type=\"text\"\n+                  placeholder=\"í‚¤(cm)\"\n+                  value={formData.height}\n+                  onChange={(e) => handleInputChange('height', e.target.value)}\n+                />\n+                <FormInput\n+                  type=\"text\"\n+                  placeholder=\"ì²´ì¤‘(kg)\"\n+                  value={formData.weight}\n+                  onChange={(e) => handleInputChange('weight', e.target.value)}\n+                />\n+              </div>\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n+                value={formData.footSize}\n+                onChange={(e) => handleInputChange('footSize', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë³µìš©ì¤‘ì¸ ì•½ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n+                value={formData.medications}\n+                onChange={(e) => handleInputChange('medications', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë³‘ë ¥ì‚¬í•­ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ë³‘ë ¥ì‚¬í•­</FormLabel>\n+              <CheckboxGroup>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.musculoskeletal}\n+                    onChange={(e) => handleCheckboxChange('musculoskeletal', e.target.checked)}\n+                  />\n+                  ê·¼ê³¨ê²©ê³„ì§ˆí™˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.cardiovascular}\n+                    onChange={(e) => handleCheckboxChange('cardiovascular', e.target.checked)}\n+                  />\n+                  ì‹¬í˜ˆê´€ê³„ì§ˆí™˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.diabetes}\n+                    onChange={(e) => handleCheckboxChange('diabetes', e.target.checked)}\n+                  />\n+                  ë‹¹ë‡¨\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.osteoporosis}\n+                    onChange={(e) => handleCheckboxChange('osteoporosis', e.target.checked)}\n+                  />\n+                  ê³¨ë‹¤ê³µì¦\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.thyroid}\n+                    onChange={(e) => handleCheckboxChange('thyroid', e.target.checked)}\n+                  />\n+                  ê°‘ìƒì„ \n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.varicose}\n+                    onChange={(e) => handleCheckboxChange('varicose', e.target.checked)}\n+                  />\n+                  ì •ë§¥ë¥˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.arthritis}\n+                    onChange={(e) => handleCheckboxChange('arthritis', e.target.checked)}\n+                  />\n+                  ê´€ì ˆì—¼\n+                </CheckboxItem>\n+              </CheckboxGroup>\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n+          <ImageSection>\n+            <ImageBox>\n+              <strong>ì •ë©´</strong>\n+              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n+            </ImageBox>\n+            <ImageBox>\n+              <strong>ì²™ì¶”</strong>\n+              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n+            </ImageBox>\n+            <ImageBox>\n+              <strong>í›„ë©´</strong>\n+              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n+            </ImageBox>\n+          </ImageSection>\n+\n+          {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </FormLabel>\n+              <FormTextarea\n+                rows={6}\n+                placeholder=\"í†µì¦ íˆìŠ¤í† ë¦¬, ìˆ˜ìˆ  ì´ë ¥, ìš´ë™ ëª©ì  ë“±ì„ ìƒì„¸íˆ ê¸°ì…í•´ì£¼ì„¸ìš”\"\n+                value={formData.painHistory}\n+                onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë™ì˜ì„œ */}\n+          <ConsentSection>\n+            <ConsentText>\n+              ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n+            </ConsentText>\n+            <SignatureArea>\n+              <DateArea>\n+                ë‚ ì§œ: {new Date().toLocaleDateString('ko-KR')}\n+              </DateArea>\n+              <SignatureBox />\n+            </SignatureArea>\n+          </ConsentSection>\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n     </PageContainer>\n   );\n };\n \n"
                },
                {
                    "date": 1761461643356,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,10 @@\n import { useSearchParams } from 'react-router-dom';\n import styled from 'styled-components';\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member } from '../utils/db/types';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -218,19 +220,13 @@\n   font-size: ${AppTextStyles.body2.fontSize};\n   color: ${AppColors.onBackground};\n `;\n \n-interface Member {\n-  id: string;\n-  name: string;\n-  birthDate: string;\n-  phone: string;\n-}\n-\n const ExercisePrescriptionPage: React.FC = () => {\n   const [searchParams] = useSearchParams();\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -246,24 +242,33 @@\n     },\n     painHistory: '',\n   });\n \n-  // ìƒ˜í”Œ íšŒì› ë°ì´í„° (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì˜¬ ë°ì´í„°)\n-  const [members] = useState<Member[]>([\n-    { id: '1', name: 'ê¹€ì² ìˆ˜', birthDate: '1985-03-15', phone: '010-1234-5678' },\n-    { id: '2', name: 'ì´ì˜í¬', birthDate: '1990-07-22', phone: '010-2345-6789' },\n-    { id: '3', name: 'ë°•ë¯¼ìˆ˜', birthDate: '1988-11-08', phone: '010-3456-7890' },\n-    { id: '4', name: 'ìµœì§€ì˜', birthDate: '1992-05-30', phone: '010-4567-8901' },\n-  ]);\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n \n+    loadMembers();\n+  }, []);\n+\n   const filteredMembers = members.filter(member =>\n     member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n   );\n \n   useEffect(() => {\n-    const memberIdParam = searchParams.get('memberId');\n-    if (memberIdParam) {\n-      const member = members.find(m => m.id === memberIdParam);\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid ë˜ëŠ” memberId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    if (userIdParam && members.length > 0) {\n+      const member = members.find(m => m.id === userIdParam);\n       if (member) {\n         setSelectedMember(member);\n       }\n     }\n@@ -307,9 +312,9 @@\n               selected={selectedMember?.id === member.id}\n               onClick={() => handleMemberSelect(member)}\n             >\n               <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birthDate}</MemberInfo>\n+              <MemberInfo>{member.birth}</MemberInfo>\n               <MemberInfo>{member.phone}</MemberInfo>\n             </MemberItem>\n           ))}\n         </MemberList>\n@@ -333,9 +338,9 @@\n             <FormGroup>\n               <FormLabel>ìƒë…„ì›”ì¼</FormLabel>\n               <FormInput\n                 type=\"text\"\n-                value={selectedMember?.birthDate || ''}\n+                value={selectedMember?.birth || ''}\n                 readOnly\n                 style={{ background: '#f5f5f5' }}\n               />\n             </FormGroup>\n"
                },
                {
                    "date": 1761461760471,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,8 +19,56 @@\n   padding: 20px;\n   overflow-y: auto;\n `;\n \n+const ButtonPanel = styled.div`\n+  width: 80px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 20px 10px;\n+  display: flex;\n+  flex-direction: column;\n+  gap: 15px;\n+  align-items: center;\n+`;\n+\n+const ActionButton = styled.button`\n+  width: 60px;\n+  height: 60px;\n+  border: none;\n+  border-radius: 12px;\n+  background: ${AppColors.primary};\n+  color: ${AppColors.onPrimary};\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  font-weight: 600;\n+  cursor: pointer;\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  justify-content: center;\n+  gap: 4px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${AppColors.primary}dd;\n+    transform: translateY(-2px);\n+  }\n+  \n+  &:active {\n+    transform: translateY(0);\n+  }\n+`;\n+\n+const ButtonIcon = styled.div`\n+  font-size: 20px;\n+  line-height: 1;\n+`;\n+\n+const ButtonText = styled.div`\n+  font-size: 10px;\n+  line-height: 1;\n+`;\n+\n const SearchTitle = styled.h2`\n   font-size: ${AppTextStyles.title2.fontSize};\n   font-weight: 600;\n   color: ${AppColors.onBackground};\n@@ -294,8 +342,36 @@\n       },\n     }));\n   };\n \n+  const handleSave = () => {\n+    // TODO: ë°ì´í„° ì €ì¥ ë¡œì§ êµ¬í˜„\n+    console.log('ì €ì¥:', { selectedMember, formData });\n+    alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+  };\n+\n+  const handleShare = () => {\n+    // TODO: ê³µìœ  ë¡œì§ êµ¬í˜„\n+    console.log('ê³µìœ :', { selectedMember, formData });\n+    if (navigator.share) {\n+      navigator.share({\n+        title: 'ìš´ë™ì²˜ë°©ì„œ',\n+        text: `${selectedMember?.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+        url: window.location.href,\n+      });\n+    } else {\n+      // fallback: ë§í¬ ë³µì‚¬\n+      navigator.clipboard.writeText(window.location.href);\n+      alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  const handlePrint = () => {\n+    // TODO: ì¸ì‡„ ë¡œì§ êµ¬í˜„ (PDF ìƒì„± ë“±)\n+    console.log('ì¶œë ¥:', { selectedMember, formData });\n+    window.print();\n+  };\n+\n   return (\n     <PageContainer>\n       <SearchPanel>\n         <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n@@ -319,8 +395,25 @@\n           ))}\n         </MemberList>\n       </SearchPanel>\n \n+      <ButtonPanel>\n+        <ActionButton onClick={handleSave} title=\"ì €ì¥\">\n+          <ButtonIcon>ğŸ’¾</ButtonIcon>\n+          <ButtonText>ì €ì¥</ButtonText>\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          <ButtonIcon>ğŸ“¤</ButtonIcon>\n+          <ButtonText>ê³µìœ </ButtonText>\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¶œë ¥\">\n+          <ButtonIcon>ğŸ–¨ï¸</ButtonIcon>\n+          <ButtonText>ì¶œë ¥</ButtonText>\n+        </ActionButton>\n+      </ButtonPanel>\n+\n       <PrescriptionPanel>\n         <PrescriptionContainer>\n           <PrescriptionTitle>ìš´ë™ì²˜ë°©ì„œ</PrescriptionTitle>\n           \n"
                },
                {
                    "date": 1761461831393,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -437,25 +437,26 @@\n                 style={{ background: '#f5f5f5' }}\n               />\n             </FormGroup>\n             <FormGroup>\n-              <FormLabel>í‚¤/ì²´ì¤‘</FormLabel>\n-              <div style={{ display: 'flex', gap: '10px' }}>\n-                <FormInput\n-                  type=\"text\"\n-                  placeholder=\"í‚¤(cm)\"\n-                  value={formData.height}\n-                  onChange={(e) => handleInputChange('height', e.target.value)}\n-                />\n-                <FormInput\n-                  type=\"text\"\n-                  placeholder=\"ì²´ì¤‘(kg)\"\n-                  value={formData.weight}\n-                  onChange={(e) => handleInputChange('weight', e.target.value)}\n-                />\n-              </div>\n+              <FormLabel>í‚¤</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"í‚¤(cm)\"\n+                value={formData.height}\n+                onChange={(e) => handleInputChange('height', e.target.value)}\n+              />\n             </FormGroup>\n             <FormGroup>\n+              <FormLabel>ì²´ì¤‘</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ì²´ì¤‘(kg)\"\n+                value={formData.weight}\n+                onChange={(e) => handleInputChange('weight', e.target.value)}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n               <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n               <FormInput\n                 type=\"text\"\n                 placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n"
                },
                {
                    "date": 1761461874069,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,9 +143,9 @@\n const FormRow = styled.div`\n   display: flex;\n   gap: 20px;\n   margin-bottom: 20px;\n-  align-items: center;\n+  align-items: flex-start;\n `;\n \n const FormGroup = styled.div`\n   flex: 1;\n"
                },
                {
                    "date": 1761461935758,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,9 +141,9 @@\n `;\n \n const FormRow = styled.div`\n   display: flex;\n-  gap: 20px;\n+  gap: 15px;\n   margin-bottom: 20px;\n   align-items: flex-start;\n `;\n \n@@ -164,8 +164,9 @@\n   padding: 10px;\n   border: 1px solid ${AppColors.borderLight};\n   border-radius: 6px;\n   font-size: ${AppTextStyles.body2.fontSize};\n+  box-sizing: border-box;\n   \n   &:focus {\n     outline: none;\n     border-color: ${AppColors.primary};\n@@ -178,8 +179,9 @@\n   border: 1px solid ${AppColors.borderLight};\n   border-radius: 6px;\n   font-size: ${AppTextStyles.body2.fontSize};\n   resize: vertical;\n+  box-sizing: border-box;\n   \n   &:focus {\n     outline: none;\n     border-color: ${AppColors.primary};\n"
                },
                {
                    "date": 1761462139513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,16 +9,25 @@\n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n   background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n `;\n \n const SearchPanel = styled.div`\n   width: 300px;\n   background: ${AppColors.surface};\n   border-right: 1px solid ${AppColors.borderLight};\n   padding: 20px;\n   overflow-y: auto;\n+  \n+  @media print {\n+    display: none;\n+  }\n `;\n \n const ButtonPanel = styled.div`\n   width: 80px;\n@@ -28,8 +37,12 @@\n   display: flex;\n   flex-direction: column;\n   gap: 15px;\n   align-items: center;\n+  \n+  @media print {\n+    display: none;\n+  }\n `;\n \n const ActionButton = styled.button`\n   width: 60px;\n@@ -120,8 +133,13 @@\n const PrescriptionPanel = styled.div`\n   flex: 1;\n   padding: 20px;\n   overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n `;\n \n const PrescriptionContainer = styled.div`\n   max-width: 800px;\n@@ -129,8 +147,16 @@\n   background: white;\n   padding: 40px;\n   box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n   min-height: calc(100vh - 40px);\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20px;\n+    margin: 0;\n+    max-width: none;\n+    min-height: auto;\n+  }\n `;\n \n const PrescriptionTitle = styled.h1`\n   text-align: center;\n@@ -345,33 +371,268 @@\n     }));\n   };\n \n   const handleSave = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+    \n     // TODO: ë°ì´í„° ì €ì¥ ë¡œì§ êµ¬í˜„\n     console.log('ì €ì¥:', { selectedMember, formData });\n     alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n   };\n \n   const handleShare = () => {\n-    // TODO: ê³µìœ  ë¡œì§ êµ¬í˜„\n-    console.log('ê³µìœ :', { selectedMember, formData });\n-    if (navigator.share) {\n-      navigator.share({\n-        title: 'ìš´ë™ì²˜ë°©ì„œ',\n-        text: `${selectedMember?.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-        url: window.location.href,\n-      });\n-    } else {\n-      // fallback: ë§í¬ ë³µì‚¬\n-      navigator.clipboard.writeText(window.location.href);\n-      alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n     }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(`\n+        <!DOCTYPE html>\n+        <html>\n+        <head>\n+          <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+          <style>\n+            body { font-family: Arial, sans-serif; margin: 20px; }\n+            .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n+            .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n+            .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n+            .form-group { flex: 1; }\n+            .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n+            .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n+            .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n+            .image-section { display: flex; gap: 20px; margin-bottom: 20px; }\n+            .image-box { flex: 1; height: 200px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n+            .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n+            .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n+            .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n+            .date-area { text-align: right; }\n+            textarea { resize: vertical; height: 100px; }\n+          </style>\n+        </head>\n+        <body>\n+          <div class=\"prescription-container\">\n+            <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n+            \n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì„±ëª…</label>\n+                <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n+                <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">í‚¤</label>\n+                <input class=\"form-input\" value=\"${formData.height}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì²´ì¤‘</label>\n+                <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n+                <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n+              </div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n+                <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n+              </div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n+                <div class=\"checkbox-group\">\n+                  ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n+                    const labels: { [key: string]: string } = {\n+                      musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n+                      cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n+                      diabetes: 'ë‹¹ë‡¨',\n+                      osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n+                      thyroid: 'ê°‘ìƒì„ ',\n+                      varicose: 'ì •ë§¥ë¥˜',\n+                      arthritis: 'ê´€ì ˆì—¼'\n+                    };\n+                    return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                  }).join('')}\n+                </div>\n+              </div>\n+            </div>\n+\n+            <div class=\"image-section\">\n+              <div class=\"image-box\"><strong>ì •ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+              <div class=\"image-box\"><strong>ì²™ì¶”</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+              <div class=\"image-box\"><strong>í›„ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n+                <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n+              </div>\n+            </div>\n+\n+            <div class=\"consent-section\">\n+              <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n+              <div class=\"signature-area\">\n+                <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n+                <div class=\"signature-box\"></div>\n+              </div>\n+            </div>\n+          </div>\n+        </body>\n+        </html>\n+      `);\n+      printWindow.document.close();\n+      \n+      // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n+      if (navigator.share) {\n+        navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: printWindow.location.href,\n+        });\n+      } else {\n+        alert('ìƒˆ ì°½ì—ì„œ ìš´ë™ì²˜ë°©ì„œë¥¼ í™•ì¸í•˜ê³  URLì„ ë³µì‚¬í•˜ì—¬ ê³µìœ í•˜ì„¸ìš”.');\n+      }\n+    }\n   };\n \n   const handlePrint = () => {\n-    // TODO: ì¸ì‡„ ë¡œì§ êµ¬í˜„ (PDF ìƒì„± ë“±)\n-    console.log('ì¶œë ¥:', { selectedMember, formData });\n-    window.print();\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(`\n+        <!DOCTYPE html>\n+        <html>\n+        <head>\n+          <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+          <style>\n+            @media print {\n+              body { margin: 0; padding: 20px; }\n+              .no-print { display: none !important; }\n+            }\n+            body { font-family: Arial, sans-serif; margin: 20px; }\n+            .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n+            .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n+            .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n+            .form-group { flex: 1; }\n+            .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n+            .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n+            .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n+            .image-section { display: flex; gap: 20px; margin-bottom: 20px; }\n+            .image-box { flex: 1; height: 200px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n+            .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n+            .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n+            .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n+            .date-area { text-align: right; }\n+            textarea { resize: vertical; height: 100px; }\n+            .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n+          </style>\n+        </head>\n+        <body>\n+          <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n+          <div class=\"prescription-container\">\n+            <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n+            \n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì„±ëª…</label>\n+                <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n+                <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">í‚¤</label>\n+                <input class=\"form-input\" value=\"${formData.height}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì²´ì¤‘</label>\n+                <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n+              </div>\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n+                <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n+              </div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n+                <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n+              </div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n+                <div class=\"checkbox-group\">\n+                  ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n+                    const labels: { [key: string]: string } = {\n+                      musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n+                      cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n+                      diabetes: 'ë‹¹ë‡¨',\n+                      osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n+                      thyroid: 'ê°‘ìƒì„ ',\n+                      varicose: 'ì •ë§¥ë¥˜',\n+                      arthritis: 'ê´€ì ˆì—¼'\n+                    };\n+                    return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                  }).join('')}\n+                </div>\n+              </div>\n+            </div>\n+\n+            <div class=\"image-section\">\n+              <div class=\"image-box\"><strong>ì •ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+              <div class=\"image-box\"><strong>ì²™ì¶”</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+              <div class=\"image-box\"><strong>í›„ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n+            </div>\n+\n+            <div class=\"form-row\">\n+              <div class=\"form-group\">\n+                <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n+                <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n+              </div>\n+            </div>\n+\n+            <div class=\"consent-section\">\n+              <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n+              <div class=\"signature-area\">\n+                <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n+                <div class=\"signature-box\"></div>\n+              </div>\n+            </div>\n+          </div>\n+        </body>\n+        </html>\n+      `);\n+      printWindow.document.close();\n+      \n+      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n+      setTimeout(() => {\n+        printWindow.print();\n+      }, 1000);\n+    }\n   };\n \n   return (\n     <PageContainer>\n"
                },
                {
                    "date": 1761462269781,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -233,15 +233,15 @@\n `;\n \n const ImageSection = styled.div`\n   display: flex;\n-  gap: 20px;\n+  gap: 10px;\n   margin-bottom: 20px;\n `;\n \n const ImageBox = styled.div`\n   flex: 1;\n-  height: 200px;\n+  height: 300px;\n   border: 2px dashed ${AppColors.borderLight};\n   border-radius: 8px;\n   display: flex;\n   flex-direction: column;\n@@ -404,10 +404,10 @@\n             .form-group { flex: 1; }\n             .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n             .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n             .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n-            .image-section { display: flex; gap: 20px; margin-bottom: 20px; }\n-            .image-box { flex: 1; height: 200px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n+            .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n+            .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n             .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n             .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n             .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n             .date-area { text-align: right; }\n@@ -534,10 +534,10 @@\n             .form-group { flex: 1; }\n             .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n             .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n             .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n-            .image-section { display: flex; gap: 20px; margin-bottom: 20px; }\n-            .image-box { flex: 1; height: 200px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n+            .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n+            .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n             .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n             .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n             .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n             .date-area { text-align: right; }\n"
                },
                {
                    "date": 1761463031108,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,11 @@\n import styled from 'styled-components';\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n-import { Member } from '../utils/db/types';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n+import BodyImageCanvas from '../components/BodyImageCanvas';\n+import bodyImageSvgs from '../utils/bodyImageSvgs';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -237,21 +239,8 @@\n   gap: 10px;\n   margin-bottom: 20px;\n `;\n \n-const ImageBox = styled.div`\n-  flex: 1;\n-  height: 300px;\n-  border: 2px dashed ${AppColors.borderLight};\n-  border-radius: 8px;\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  justify-content: center;\n-  color: ${AppColors.onInput1};\n-  font-size: ${AppTextStyles.body2.fontSize};\n-`;\n-\n const ConsentSection = styled.div`\n   margin-top: 40px;\n   padding: 20px;\n   border: 1px solid ${AppColors.borderLight};\n@@ -301,8 +290,9 @@\n   const [searchParams] = useSearchParams();\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -314,10 +304,15 @@\n       osteoporosis: false,\n       thyroid: false,\n       varicose: false,\n       arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: '',\n+    bodyImages: {\n+      front: [] as BodyImagePoint[],\n+      spine: [] as BodyImagePoint[],\n+      back: [] as BodyImagePoint[],\n     },\n-    painHistory: '',\n   });\n \n   // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n   useEffect(() => {\n@@ -334,8 +329,90 @@\n \n     loadMembers();\n   }, []);\n \n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+          bodyImages: {\n+            front: [],\n+            spine: [],\n+            back: [],\n+          },\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+            bodyImages: prescription.bodyImages,\n+          });\n+          console.log('ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+            bodyImages: {\n+              front: [],\n+              spine: [],\n+              back: [],\n+            },\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„±');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n   const filteredMembers = members.filter(member =>\n     member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n   );\n \n@@ -370,130 +447,226 @@\n       },\n     }));\n   };\n \n-  const handleSave = () => {\n+  // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n+  const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n+    const newPoint: BodyImagePoint = {\n+      ...point,\n+      id: `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`, // ì„ì‹œ ID ìƒì„±\n+    };\n+\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: [...prev.bodyImages[imageType], newPoint],\n+      },\n+    }));\n+  };\n+\n+  const handleUpdateBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string, updates: Partial<Omit<BodyImagePoint, 'id'>>) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: prev.bodyImages[imageType].map(point =>\n+          point.id === pointId ? { ...point, ...updates } : point\n+        ),\n+      },\n+    }));\n+  };\n+\n+  const handleDeleteBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: prev.bodyImages[imageType].filter(point => point.id !== pointId),\n+      },\n+    }));\n+  };\n+\n+  const handleSave = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n     \n-    // TODO: ë°ì´í„° ì €ì¥ ë¡œì§ êµ¬í˜„\n-    console.log('ì €ì¥:', { selectedMember, formData });\n-    alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-  };\n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: formData.bodyImages,\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+      };\n \n-  const handleShare = () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸\n+        await dbManager.exercisePrescription.updateExercisePrescription(\n+          currentPrescription.id,\n+          prescriptionData\n+        );\n+        console.log('ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', currentPrescription.id);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n     }\n+  };\n \n-    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(`\n-        <!DOCTYPE html>\n-        <html>\n-        <head>\n-          <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n-          <style>\n-            body { font-family: Arial, sans-serif; margin: 20px; }\n-            .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n-            .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n-            .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n-            .form-group { flex: 1; }\n-            .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n-            .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-            .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n-            .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n-            .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n-            .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n-            .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n-            .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n-            .date-area { text-align: right; }\n-            textarea { resize: vertical; height: 100px; }\n-          </style>\n-        </head>\n-        <body>\n-          <div class=\"prescription-container\">\n-            <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n-            \n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì„±ëª…</label>\n-                <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n-                <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">í‚¤</label>\n-                <input class=\"form-input\" value=\"${formData.height}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì²´ì¤‘</label>\n-                <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n-                <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n-              </div>\n+  const generatePrescriptionHTML = () => {\n+    if (!selectedMember) return '';\n+\n+    // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ë“¤ì„ HTMLë¡œ ë³€í™˜\n+    const generatePointsHTML = (points: BodyImagePoint[], imageType: string) => {\n+      if (points.length === 0) return `<div class=\"image-box\"><strong>${imageType}</strong><br><small>ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</small></div>`;\n+      \n+      const pointsHtml = points.map(point => \n+        `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y}%; width: 8px; height: 8px; background: ${point.color || '#ff0000'}; border: 1px solid white; border-radius: 50%; transform: translate(-50%, -50%);\"></div>\n+         ${point.memo ? `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y + 5}%; font-size: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 4px; border-radius: 2px; transform: translateX(-50%); white-space: nowrap;\">${point.memo}</div>` : ''}`\n+      ).join('');\n+      \n+      return `<div class=\"image-box\" style=\"position: relative;\"><strong>${imageType}</strong><br><small>${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨</small>${pointsHtml}</div>`;\n+    };\n+\n+    return `\n+      <!DOCTYPE html>\n+      <html>\n+      <head>\n+        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+        <style>\n+          @media print {\n+            body { margin: 0; padding: 20px; }\n+            .no-print { display: none !important; }\n+          }\n+          body { font-family: Arial, sans-serif; margin: 20px; }\n+          .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n+          .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n+          .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n+          .form-group { flex: 1; }\n+          .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n+          .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n+          .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n+          .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n+          .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n+          .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n+          .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n+          .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n+          .date-area { text-align: right; }\n+          textarea { resize: vertical; height: 100px; }\n+          .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n+        </style>\n+      </head>\n+      <body>\n+        <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n+        <div class=\"prescription-container\">\n+          <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n+          \n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì„±ëª…</label>\n+              <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n             </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n+              <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">í‚¤</label>\n+              <input class=\"form-input\" value=\"${formData.height}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì²´ì¤‘</label>\n+              <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n+              <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n+            </div>\n+          </div>\n \n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n-                <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n-              </div>\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n+              <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n             </div>\n+          </div>\n \n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n-                <div class=\"checkbox-group\">\n-                  ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n-                    const labels: { [key: string]: string } = {\n-                      musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n-                      cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n-                      diabetes: 'ë‹¹ë‡¨',\n-                      osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n-                      thyroid: 'ê°‘ìƒì„ ',\n-                      varicose: 'ì •ë§¥ë¥˜',\n-                      arthritis: 'ê´€ì ˆì—¼'\n-                    };\n-                    return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n-                  }).join('')}\n-                </div>\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n+              <div class=\"checkbox-group\">\n+                ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n+                  const labels: { [key: string]: string } = {\n+                    musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n+                    cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n+                    diabetes: 'ë‹¹ë‡¨',\n+                    osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n+                    thyroid: 'ê°‘ìƒì„ ',\n+                    varicose: 'ì •ë§¥ë¥˜',\n+                    arthritis: 'ê´€ì ˆì—¼'\n+                  };\n+                  return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                }).join('')}\n               </div>\n             </div>\n+          </div>\n \n-            <div class=\"image-section\">\n-              <div class=\"image-box\"><strong>ì •ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-              <div class=\"image-box\"><strong>ì²™ì¶”</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-              <div class=\"image-box\"><strong>í›„ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-            </div>\n+          <div class=\"image-section\">\n+            ${generatePointsHTML(formData.bodyImages.front, 'ì •ë©´')}\n+            ${generatePointsHTML(formData.bodyImages.spine, 'ì²™ì¶”')}\n+            ${generatePointsHTML(formData.bodyImages.back, 'í›„ë©´')}\n+          </div>\n \n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n-                <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n-              </div>\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n+              <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n             </div>\n+          </div>\n \n-            <div class=\"consent-section\">\n-              <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n-              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n-              <div class=\"signature-area\">\n-                <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n-                <div class=\"signature-box\"></div>\n-              </div>\n+          <div class=\"consent-section\">\n+            <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+            ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n+            <div class=\"signature-area\">\n+              <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n+              <div class=\"signature-box\"></div>\n             </div>\n           </div>\n-        </body>\n-        </html>\n-      `);\n+        </div>\n+      </body>\n+      </html>\n+    `;\n+  };\n+\n+  const handleShare = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(generatePrescriptionHTML());\n       printWindow.document.close();\n       \n       // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n       if (navigator.share) {\n@@ -516,116 +689,9 @@\n \n     // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n     const printWindow = window.open('', '_blank', 'width=800,height=600');\n     if (printWindow) {\n-      printWindow.document.write(`\n-        <!DOCTYPE html>\n-        <html>\n-        <head>\n-          <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n-          <style>\n-            @media print {\n-              body { margin: 0; padding: 20px; }\n-              .no-print { display: none !important; }\n-            }\n-            body { font-family: Arial, sans-serif; margin: 20px; }\n-            .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n-            .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n-            .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n-            .form-group { flex: 1; }\n-            .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n-            .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-            .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n-            .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n-            .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; }\n-            .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n-            .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n-            .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n-            .date-area { text-align: right; }\n-            textarea { resize: vertical; height: 100px; }\n-            .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n-          </style>\n-        </head>\n-        <body>\n-          <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n-          <div class=\"prescription-container\">\n-            <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n-            \n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì„±ëª…</label>\n-                <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n-                <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">í‚¤</label>\n-                <input class=\"form-input\" value=\"${formData.height}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì²´ì¤‘</label>\n-                <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n-              </div>\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n-                <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n-              </div>\n-            </div>\n-\n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n-                <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n-              </div>\n-            </div>\n-\n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n-                <div class=\"checkbox-group\">\n-                  ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n-                    const labels: { [key: string]: string } = {\n-                      musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n-                      cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n-                      diabetes: 'ë‹¹ë‡¨',\n-                      osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n-                      thyroid: 'ê°‘ìƒì„ ',\n-                      varicose: 'ì •ë§¥ë¥˜',\n-                      arthritis: 'ê´€ì ˆì—¼'\n-                    };\n-                    return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n-                  }).join('')}\n-                </div>\n-              </div>\n-            </div>\n-\n-            <div class=\"image-section\">\n-              <div class=\"image-box\"><strong>ì •ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-              <div class=\"image-box\"><strong>ì²™ì¶”</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-              <div class=\"image-box\"><strong>í›„ë©´</strong><br><small>ì´ë¯¸ì§€ ì²¨ë¶€</small></div>\n-            </div>\n-\n-            <div class=\"form-row\">\n-              <div class=\"form-group\">\n-                <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n-                <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n-              </div>\n-            </div>\n-\n-            <div class=\"consent-section\">\n-              <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n-              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n-              <div class=\"signature-area\">\n-                <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n-                <div class=\"signature-box\"></div>\n-              </div>\n-            </div>\n-          </div>\n-        </body>\n-        </html>\n-      `);\n+      printWindow.document.write(generatePrescriptionHTML());\n       printWindow.document.close();\n       \n       // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n       setTimeout(() => {\n@@ -808,20 +874,32 @@\n           </FormRow>\n \n           {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n           <ImageSection>\n-            <ImageBox>\n-              <strong>ì •ë©´</strong>\n-              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n-            </ImageBox>\n-            <ImageBox>\n-              <strong>ì²™ì¶”</strong>\n-              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n-            </ImageBox>\n-            <ImageBox>\n-              <strong>í›„ë©´</strong>\n-              <small>ì´ë¯¸ì§€ ì²¨ë¶€</small>\n-            </ImageBox>\n+            <BodyImageCanvas\n+              imageType=\"front\"\n+              imageUrl={bodyImageSvgs.front}\n+              points={formData.bodyImages.front}\n+              onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n+            />\n+            <BodyImageCanvas\n+              imageType=\"spine\"\n+              imageUrl={bodyImageSvgs.spine}\n+              points={formData.bodyImages.spine}\n+              onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n+            />\n+            <BodyImageCanvas\n+              imageType=\"back\"\n+              imageUrl={bodyImageSvgs.back}\n+              points={formData.bodyImages.back}\n+              onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n+            />\n           </ImageSection>\n \n           {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n           <FormRow>\n"
                },
                {
                    "date": 1761463257599,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,8 @@\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n import BodyImageCanvas from '../components/BodyImageCanvas';\n-import bodyImageSvgs from '../utils/bodyImageSvgs';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -876,25 +875,25 @@\n           {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n           <ImageSection>\n             <BodyImageCanvas\n               imageType=\"front\"\n-              imageUrl={bodyImageSvgs.front}\n+              imageUrl=\"\"\n               points={formData.bodyImages.front}\n               onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n               onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n               onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n             />\n             <BodyImageCanvas\n               imageType=\"spine\"\n-              imageUrl={bodyImageSvgs.spine}\n+              imageUrl=\"\"\n               points={formData.bodyImages.spine}\n               onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n               onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n               onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n             />\n             <BodyImageCanvas\n               imageType=\"back\"\n-              imageUrl={bodyImageSvgs.back}\n+              imageUrl=\"\"\n               points={formData.bodyImages.back}\n               onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n               onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n               onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n"
                },
                {
                    "date": 1761463993357,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n import BodyImageCanvas from '../components/BodyImageCanvas';\n+import SignatureCanvas from '../components/SignatureCanvas';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -44,32 +45,32 @@\n     display: none;\n   }\n `;\n \n-const ActionButton = styled.button`\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n   width: 60px;\n   height: 60px;\n   border: none;\n   border-radius: 12px;\n-  background: ${AppColors.primary};\n-  color: ${AppColors.onPrimary};\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n   font-size: ${AppTextStyles.label2.fontSize};\n   font-weight: 600;\n-  cursor: pointer;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   gap: 4px;\n   transition: all 0.2s ease;\n   \n   &:hover {\n-    background: ${AppColors.primary}dd;\n-    transform: translateY(-2px);\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+    transform: ${props => props.disabled ? 'none' : 'translateY(-2px)'};\n   }\n   \n   &:active {\n-    transform: translateY(0);\n+    transform: ${props => props.disabled ? 'none' : 'translateY(0)'};\n   }\n `;\n \n const ButtonIcon = styled.div`\n@@ -259,29 +260,45 @@\n   justify-content: space-between;\n   align-items: flex-end;\n `;\n \n-const SignatureBox = styled.div`\n-  width: 200px;\n-  height: 80px;\n+const SignatureSection = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  gap: 10px;\n+`;\n+\n+const SignatureLabel = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const DateRow = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  margin-top: 20px;\n+  padding: 15px;\n+  background: #f8f9fa;\n+  border-radius: 8px;\n   border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  background: white;\n-  position: relative;\n-  \n-  &::after {\n-    content: 'ì„œëª…';\n-    position: absolute;\n-    bottom: -25px;\n-    left: 50%;\n-    transform: translateX(-50%);\n-    font-size: ${AppTextStyles.body3.fontSize};\n-    color: ${AppColors.onInput1};\n-  }\n `;\n \n-const DateArea = styled.div`\n-  text-align: right;\n+const DateItem = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  gap: 5px;\n+`;\n+\n+const DateLabel = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+  font-weight: 600;\n+`;\n+\n+const DateValue = styled.div`\n   font-size: ${AppTextStyles.body2.fontSize};\n   color: ${AppColors.onBackground};\n `;\n \n@@ -310,8 +327,9 @@\n       front: [] as BodyImagePoint[],\n       spine: [] as BodyImagePoint[],\n       back: [] as BodyImagePoint[],\n     },\n+    signatureData: '', // ì„œëª… ë°ì´í„°\n   });\n \n   // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n   useEffect(() => {\n@@ -354,8 +372,9 @@\n             front: [],\n             spine: [],\n             back: [],\n           },\n+          signatureData: '',\n         });\n         return;\n       }\n \n@@ -373,8 +392,9 @@\n             medications: prescription.medications,\n             medicalHistory: prescription.medicalHistory,\n             painHistory: prescription.painHistory,\n             bodyImages: prescription.bodyImages,\n+            signatureData: prescription.signatureData || '',\n           });\n           console.log('ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n         } else {\n           // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n@@ -398,8 +418,9 @@\n               front: [],\n               spine: [],\n               back: [],\n             },\n+            signatureData: '',\n           });\n           console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„±');\n         }\n       } catch (error) {\n@@ -446,8 +467,21 @@\n       },\n     }));\n   };\n \n+  // ì„œëª… ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleSignatureChange = (dataUrl: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      signatureData: dataUrl,\n+    }));\n+  };\n+\n+  // ì„œëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜\n+  const hasSignature = () => {\n+    return formData.signatureData && formData.signatureData.trim() !== '';\n+  };\n+\n   // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n   const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n     const newPoint: BodyImagePoint = {\n       ...point,\n@@ -489,8 +523,14 @@\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n+\n+    // ì„œëª… ê²€ì¦\n+    if (!hasSignature()) {\n+      alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n     \n     try {\n       const prescriptionData = {\n         memberId: selectedMember.id,\n@@ -501,17 +541,30 @@\n         medications: formData.medications,\n         medicalHistory: formData.medicalHistory,\n         painHistory: formData.painHistory,\n         bodyImages: formData.bodyImages,\n+        signatureData: formData.signatureData,\n+        signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n         isActive: true,\n         prescriptionDate: new Date(),\n       };\n \n       if (currentPrescription) {\n         // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸\n         await dbManager.exercisePrescription.updateExercisePrescription(\n           currentPrescription.id,\n-          prescriptionData\n+          {\n+            height: formData.height,\n+            weight: formData.weight,\n+            footSize: formData.footSize,\n+            medications: formData.medications,\n+            medicalHistory: formData.medicalHistory,\n+            painHistory: formData.painHistory,\n+            bodyImages: formData.bodyImages,\n+            signatureData: formData.signatureData,\n+            isActive: true,\n+            prescriptionDate: new Date(),\n+          }\n         );\n         console.log('ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', currentPrescription.id);\n       } else {\n         // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n@@ -525,9 +578,9 @@\n       \n       alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n     } catch (error) {\n       console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n     }\n   };\n \n   const generatePrescriptionHTML = () => {\n@@ -644,11 +697,36 @@\n           <div class=\"consent-section\">\n             <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n             ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n             <div class=\"signature-area\">\n-              <div class=\"date-area\">ë‚ ì§œ: ${new Date().toLocaleDateString('ko-KR')}</div>\n-              <div class=\"signature-box\"></div>\n+              <div style=\"text-align: center;\">\n+                <div style=\"margin-bottom: 10px; font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n+                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 120px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 120px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n+              </div>\n             </div>\n+            \n+            <div style=\"display: flex; justify-content: space-between; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n+              <div style=\"text-align: center;\">\n+                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n+                <div style=\"font-size: 14px; color: #000;\">\n+                  ${currentPrescription?.signedAt \n+                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                    : hasSignature() \n+                      ? new Date().toLocaleDateString('ko-KR') \n+                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </div>\n+              </div>\n+              <div style=\"text-align: center;\">\n+                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n+                <div style=\"font-size: 14px; color: #000;\">\n+                  ${currentPrescription?.updatedAt \n+                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                    : new Date().toLocaleDateString('ko-KR')\n+                  }\n+                </div>\n+              </div>\n+            </div>\n           </div>\n         </div>\n       </body>\n       </html>\n@@ -724,9 +802,13 @@\n         </MemberList>\n       </SearchPanel>\n \n       <ButtonPanel>\n-        <ActionButton onClick={handleSave} title=\"ì €ì¥\">\n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={!hasSignature()}\n+        >\n           <ButtonIcon>ğŸ’¾</ButtonIcon>\n           <ButtonText>ì €ì¥</ButtonText>\n         </ActionButton>\n         \n@@ -919,13 +1001,42 @@\n               ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n               ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n             </ConsentText>\n             <SignatureArea>\n-              <DateArea>\n-                ë‚ ì§œ: {new Date().toLocaleDateString('ko-KR')}\n-              </DateArea>\n-              <SignatureBox />\n+              <SignatureSection>\n+                <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n+                <SignatureCanvas\n+                  width={250}\n+                  height={120}\n+                  onSignatureChange={handleSignatureChange}\n+                  initialSignature={formData.signatureData}\n+                />\n+              </SignatureSection>\n             </SignatureArea>\n+            \n+            {/* ë‚ ì§œ ì •ë³´ í‘œì‹œ */}\n+            <DateRow>\n+              <DateItem>\n+                <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n+                <DateValue>\n+                  {currentPrescription?.signedAt \n+                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                    : hasSignature() \n+                      ? new Date().toLocaleDateString('ko-KR') \n+                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </DateValue>\n+              </DateItem>\n+              <DateItem>\n+                <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n+                <DateValue>\n+                  {currentPrescription?.updatedAt \n+                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                    : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </DateValue>\n+              </DateItem>\n+            </DateRow>\n           </ConsentSection>\n         </PrescriptionContainer>\n       </PrescriptionPanel>\n     </PageContainer>\n"
                },
                {
                    "date": 1761464143922,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1050 @@\n+import React, { useEffect, useState } from 'react';\n+import { useSearchParams } from 'react-router-dom';\n+import styled from 'styled-components';\n+import { AppColors } from '../styles/colors';\n+import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n+import BodyImageCanvas from '../components/BodyImageCanvas';\n+import SignatureCanvas from '../components/SignatureCanvas';\n+\n+const PageContainer = styled.div`\n+  min-height: 100vh;\n+  display: flex;\n+  background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n+`;\n+\n+const SearchPanel = styled.div`\n+  width: 300px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ButtonPanel = styled.div`\n+  width: 80px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 20px 10px;\n+  display: flex;\n+  flex-direction: column;\n+  gap: 15px;\n+  align-items: center;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n+  width: 60px;\n+  height: 60px;\n+  border: none;\n+  border-radius: 12px;\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  font-weight: 600;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  justify-content: center;\n+  gap: 4px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+    transform: ${props => props.disabled ? 'none' : 'translateY(-2px)'};\n+  }\n+  \n+  &:active {\n+    transform: ${props => props.disabled ? 'none' : 'translateY(0)'};\n+  }\n+`;\n+\n+const ButtonIcon = styled.div`\n+  font-size: 20px;\n+  line-height: 1;\n+`;\n+\n+const ButtonText = styled.div`\n+  font-size: 10px;\n+  line-height: 1;\n+`;\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  min-height: calc(100vh - 40px);\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20px;\n+    margin: 0;\n+    max-width: none;\n+    min-height: auto;\n+  }\n+`;\n+\n+const PrescriptionTitle = styled.h1`\n+  text-align: center;\n+  font-size: 24px;\n+  font-weight: bold;\n+  margin-bottom: 30px;\n+  color: ${AppColors.onBackground};\n+`;\n+\n+const FormRow = styled.div`\n+  display: flex;\n+  gap: 15px;\n+  margin-bottom: 20px;\n+  align-items: flex-start;\n+`;\n+\n+const FormGroup = styled.div`\n+  flex: 1;\n+`;\n+\n+const FormLabel = styled.label`\n+  display: block;\n+  font-size: ${AppTextStyles.label1.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 8px;\n+`;\n+\n+const FormInput = styled.input`\n+  width: 100%;\n+  padding: 10px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  box-sizing: border-box;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const FormTextarea = styled.textarea`\n+  width: 100%;\n+  padding: 10px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  resize: vertical;\n+  box-sizing: border-box;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const CheckboxGroup = styled.div`\n+  display: flex;\n+  flex-wrap: wrap;\n+  gap: 15px;\n+`;\n+\n+const CheckboxItem = styled.label`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+  cursor: pointer;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+`;\n+\n+const Checkbox = styled.input`\n+  margin: 0;\n+`;\n+\n+const ImageSection = styled.div`\n+  display: flex;\n+  gap: 10px;\n+  margin-bottom: 20px;\n+`;\n+\n+const ConsentSection = styled.div`\n+  margin-top: 40px;\n+  padding: 20px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  background: #f9f9f9;\n+`;\n+\n+const ConsentText = styled.p`\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  line-height: 1.6;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SignatureArea = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: flex-end;\n+`;\n+\n+const SignatureSection = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  gap: 10px;\n+`;\n+\n+const SignatureLabel = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const DateRow = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  margin-top: 20px;\n+  padding: 15px;\n+  background: #f8f9fa;\n+  border-radius: 8px;\n+  border: 1px solid ${AppColors.borderLight};\n+`;\n+\n+const DateItem = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  gap: 5px;\n+`;\n+\n+const DateLabel = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+  font-weight: 600;\n+`;\n+\n+const DateValue = styled.div`\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  color: ${AppColors.onBackground};\n+`;\n+\n+const ExercisePrescriptionPage: React.FC = () => {\n+  const [searchParams] = useSearchParams();\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: '',\n+    bodyImages: {\n+      front: [] as BodyImagePoint[],\n+      spine: [] as BodyImagePoint[],\n+      back: [] as BodyImagePoint[],\n+    },\n+    signatureData: '', // ì„œëª… ë°ì´í„°\n+  });\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n+\n+    loadMembers();\n+  }, []);\n+\n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+          bodyImages: {\n+            front: [],\n+            spine: [],\n+            back: [],\n+          },\n+          signatureData: '',\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+            bodyImages: prescription.bodyImages,\n+            signatureData: prescription.signatureData || '',\n+          });\n+          console.log('ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+            bodyImages: {\n+              front: [],\n+              spine: [],\n+              back: [],\n+            },\n+            signatureData: '',\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„±');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n+  useEffect(() => {\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid ë˜ëŠ” memberId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    if (userIdParam && members.length > 0) {\n+      const member = members.find(m => m.id === userIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n+    }\n+  }, [searchParams, members]);\n+\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value,\n+    }));\n+  };\n+\n+  const handleCheckboxChange = (field: string, checked: boolean) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      medicalHistory: {\n+        ...prev.medicalHistory,\n+        [field]: checked,\n+      },\n+    }));\n+  };\n+\n+  // ì„œëª… ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleSignatureChange = (dataUrl: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      signatureData: dataUrl,\n+    }));\n+  };\n+\n+  // ì„œëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜\n+  const hasSignature = () => {\n+    return formData.signatureData && formData.signatureData.trim() !== '';\n+  };\n+\n+  // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n+  const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n+    const newPoint: BodyImagePoint = {\n+      ...point,\n+      id: `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`, // ì„ì‹œ ID ìƒì„±\n+    };\n+\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: [...prev.bodyImages[imageType], newPoint],\n+      },\n+    }));\n+  };\n+\n+  const handleUpdateBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string, updates: Partial<Omit<BodyImagePoint, 'id'>>) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: prev.bodyImages[imageType].map(point =>\n+          point.id === pointId ? { ...point, ...updates } : point\n+        ),\n+      },\n+    }));\n+  };\n+\n+  const handleDeleteBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      bodyImages: {\n+        ...prev.bodyImages,\n+        [imageType]: prev.bodyImages[imageType].filter(point => point.id !== pointId),\n+      },\n+    }));\n+  };\n+\n+  const handleSave = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ì„œëª… ê²€ì¦\n+    if (!hasSignature()) {\n+      alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+    \n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: formData.bodyImages,\n+        signatureData: formData.signatureData,\n+        signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+      };\n+\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸\n+        await dbManager.exercisePrescription.updateExercisePrescription(\n+          currentPrescription.id,\n+          {\n+            height: formData.height,\n+            weight: formData.weight,\n+            footSize: formData.footSize,\n+            medications: formData.medications,\n+            medicalHistory: formData.medicalHistory,\n+            painHistory: formData.painHistory,\n+            bodyImages: formData.bodyImages,\n+            signatureData: formData.signatureData,\n+            isActive: true,\n+            prescriptionDate: new Date(),\n+          }\n+        );\n+        console.log('ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', currentPrescription.id);\n+        \n+        // ì—…ë°ì´íŠ¸ëœ ì²˜ë°©ì„œ ì •ë³´ ë‹¤ì‹œ ë¡œë“œ\n+        const updatedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(currentPrescription.id);\n+        setCurrentPrescription(updatedPrescription);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  const generatePrescriptionHTML = () => {\n+    if (!selectedMember) return '';\n+\n+    // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ë“¤ì„ HTMLë¡œ ë³€í™˜\n+    const generatePointsHTML = (points: BodyImagePoint[], imageType: string) => {\n+      if (points.length === 0) return `<div class=\"image-box\"><strong>${imageType}</strong><br><small>ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</small></div>`;\n+      \n+      const pointsHtml = points.map(point => \n+        `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y}%; width: 8px; height: 8px; background: ${point.color || '#ff0000'}; border: 1px solid white; border-radius: 50%; transform: translate(-50%, -50%);\"></div>\n+         ${point.memo ? `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y + 5}%; font-size: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 4px; border-radius: 2px; transform: translateX(-50%); white-space: nowrap;\">${point.memo}</div>` : ''}`\n+      ).join('');\n+      \n+      return `<div class=\"image-box\" style=\"position: relative;\"><strong>${imageType}</strong><br><small>${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨</small>${pointsHtml}</div>`;\n+    };\n+\n+    return `\n+      <!DOCTYPE html>\n+      <html>\n+      <head>\n+        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+        <style>\n+          @media print {\n+            body { margin: 0; padding: 20px; }\n+            .no-print { display: none !important; }\n+          }\n+          body { font-family: Arial, sans-serif; margin: 20px; }\n+          .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n+          .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n+          .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n+          .form-group { flex: 1; }\n+          .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n+          .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n+          .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n+          .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n+          .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n+          .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n+          .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n+          .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n+          .date-area { text-align: right; }\n+          textarea { resize: vertical; height: 100px; }\n+          .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n+        </style>\n+      </head>\n+      <body>\n+        <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n+        <div class=\"prescription-container\">\n+          <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n+          \n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì„±ëª…</label>\n+              <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n+              <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">í‚¤</label>\n+              <input class=\"form-input\" value=\"${formData.height}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì²´ì¤‘</label>\n+              <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n+            </div>\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n+              <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n+            </div>\n+          </div>\n+\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n+              <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n+            </div>\n+          </div>\n+\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n+              <div class=\"checkbox-group\">\n+                ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n+                  const labels: { [key: string]: string } = {\n+                    musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n+                    cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n+                    diabetes: 'ë‹¹ë‡¨',\n+                    osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n+                    thyroid: 'ê°‘ìƒì„ ',\n+                    varicose: 'ì •ë§¥ë¥˜',\n+                    arthritis: 'ê´€ì ˆì—¼'\n+                  };\n+                  return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                }).join('')}\n+              </div>\n+            </div>\n+          </div>\n+\n+          <div class=\"image-section\">\n+            ${generatePointsHTML(formData.bodyImages.front, 'ì •ë©´')}\n+            ${generatePointsHTML(formData.bodyImages.spine, 'ì²™ì¶”')}\n+            ${generatePointsHTML(formData.bodyImages.back, 'í›„ë©´')}\n+          </div>\n+\n+          <div class=\"form-row\">\n+            <div class=\"form-group\">\n+              <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n+              <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n+            </div>\n+          </div>\n+\n+          <div class=\"consent-section\">\n+            <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+            ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n+            <div class=\"signature-area\">\n+              <div style=\"text-align: center;\">\n+                <div style=\"margin-bottom: 10px; font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n+                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 120px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 120px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n+              </div>\n+            </div>\n+            \n+            <div style=\"display: flex; justify-content: space-between; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n+              <div style=\"text-align: center;\">\n+                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n+                <div style=\"font-size: 14px; color: #000;\">\n+                  ${currentPrescription?.signedAt \n+                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                    : hasSignature() \n+                      ? new Date().toLocaleDateString('ko-KR') \n+                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </div>\n+              </div>\n+              <div style=\"text-align: center;\">\n+                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n+                <div style=\"font-size: 14px; color: #000;\">\n+                  ${currentPrescription?.updatedAt \n+                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                    : new Date().toLocaleDateString('ko-KR')\n+                  }\n+                </div>\n+              </div>\n+            </div>\n+          </div>\n+        </div>\n+      </body>\n+      </html>\n+    `;\n+  };\n+\n+  const handleShare = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(generatePrescriptionHTML());\n+      printWindow.document.close();\n+      \n+      // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n+      if (navigator.share) {\n+        navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: printWindow.location.href,\n+        });\n+      } else {\n+        alert('ìƒˆ ì°½ì—ì„œ ìš´ë™ì²˜ë°©ì„œë¥¼ í™•ì¸í•˜ê³  URLì„ ë³µì‚¬í•˜ì—¬ ê³µìœ í•˜ì„¸ìš”.');\n+      }\n+    }\n+  };\n+\n+  const handlePrint = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(generatePrescriptionHTML());\n+      printWindow.document.close();\n+      \n+      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n+      setTimeout(() => {\n+        printWindow.print();\n+      }, 1000);\n+    }\n+  };\n+\n+  return (\n+    <PageContainer>\n+      <SearchPanel>\n+        <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birth}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+        </MemberList>\n+      </SearchPanel>\n+\n+      <ButtonPanel>\n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={!hasSignature()}\n+        >\n+          <ButtonIcon>ğŸ’¾</ButtonIcon>\n+          <ButtonText>ì €ì¥</ButtonText>\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          <ButtonIcon>ğŸ“¤</ButtonIcon>\n+          <ButtonText>ê³µìœ </ButtonText>\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¶œë ¥\">\n+          <ButtonIcon>ğŸ–¨ï¸</ButtonIcon>\n+          <ButtonText>ì¶œë ¥</ButtonText>\n+        </ActionButton>\n+      </ButtonPanel>\n+\n+      <PrescriptionPanel>\n+        <PrescriptionContainer>\n+          <PrescriptionTitle>ìš´ë™ì²˜ë°©ì„œ</PrescriptionTitle>\n+          \n+          {/* ê¸°ë³¸ ì •ë³´ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ì„±ëª…</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                value={selectedMember?.name || ''}\n+                readOnly\n+                style={{ background: '#f5f5f5' }}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>ìƒë…„ì›”ì¼</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                value={selectedMember?.birth || ''}\n+                readOnly\n+                style={{ background: '#f5f5f5' }}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>í‚¤</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"í‚¤(cm)\"\n+                value={formData.height}\n+                onChange={(e) => handleInputChange('height', e.target.value)}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>ì²´ì¤‘</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ì²´ì¤‘(kg)\"\n+                value={formData.weight}\n+                onChange={(e) => handleInputChange('weight', e.target.value)}\n+              />\n+            </FormGroup>\n+            <FormGroup>\n+              <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n+                value={formData.footSize}\n+                onChange={(e) => handleInputChange('footSize', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë³µìš©ì¤‘ì¸ ì•½ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n+              <FormInput\n+                type=\"text\"\n+                placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n+                value={formData.medications}\n+                onChange={(e) => handleInputChange('medications', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë³‘ë ¥ì‚¬í•­ */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ë³‘ë ¥ì‚¬í•­</FormLabel>\n+              <CheckboxGroup>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.musculoskeletal}\n+                    onChange={(e) => handleCheckboxChange('musculoskeletal', e.target.checked)}\n+                  />\n+                  ê·¼ê³¨ê²©ê³„ì§ˆí™˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.cardiovascular}\n+                    onChange={(e) => handleCheckboxChange('cardiovascular', e.target.checked)}\n+                  />\n+                  ì‹¬í˜ˆê´€ê³„ì§ˆí™˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.diabetes}\n+                    onChange={(e) => handleCheckboxChange('diabetes', e.target.checked)}\n+                  />\n+                  ë‹¹ë‡¨\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.osteoporosis}\n+                    onChange={(e) => handleCheckboxChange('osteoporosis', e.target.checked)}\n+                  />\n+                  ê³¨ë‹¤ê³µì¦\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.thyroid}\n+                    onChange={(e) => handleCheckboxChange('thyroid', e.target.checked)}\n+                  />\n+                  ê°‘ìƒì„ \n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.varicose}\n+                    onChange={(e) => handleCheckboxChange('varicose', e.target.checked)}\n+                  />\n+                  ì •ë§¥ë¥˜\n+                </CheckboxItem>\n+                <CheckboxItem>\n+                  <Checkbox\n+                    type=\"checkbox\"\n+                    checked={formData.medicalHistory.arthritis}\n+                    onChange={(e) => handleCheckboxChange('arthritis', e.target.checked)}\n+                  />\n+                  ê´€ì ˆì—¼\n+                </CheckboxItem>\n+              </CheckboxGroup>\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n+          <ImageSection>\n+            <BodyImageCanvas\n+              imageType=\"front\"\n+              imageUrl=\"\"\n+              points={formData.bodyImages.front}\n+              onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n+            />\n+            <BodyImageCanvas\n+              imageType=\"spine\"\n+              imageUrl=\"\"\n+              points={formData.bodyImages.spine}\n+              onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n+            />\n+            <BodyImageCanvas\n+              imageType=\"back\"\n+              imageUrl=\"\"\n+              points={formData.bodyImages.back}\n+              onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n+              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n+              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n+            />\n+          </ImageSection>\n+\n+          {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n+          <FormRow>\n+            <FormGroup>\n+              <FormLabel>ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </FormLabel>\n+              <FormTextarea\n+                rows={6}\n+                placeholder=\"í†µì¦ íˆìŠ¤í† ë¦¬, ìˆ˜ìˆ  ì´ë ¥, ìš´ë™ ëª©ì  ë“±ì„ ìƒì„¸íˆ ê¸°ì…í•´ì£¼ì„¸ìš”\"\n+                value={formData.painHistory}\n+                onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+              />\n+            </FormGroup>\n+          </FormRow>\n+\n+          {/* ë™ì˜ì„œ */}\n+          <ConsentSection>\n+            <ConsentText>\n+              ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n+              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n+            </ConsentText>\n+            <SignatureArea>\n+              <SignatureSection>\n+                <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n+                <SignatureCanvas\n+                  width={250}\n+                  height={120}\n+                  onSignatureChange={handleSignatureChange}\n+                  initialSignature={formData.signatureData}\n+                />\n+              </SignatureSection>\n+            </SignatureArea>\n+            \n+            {/* ë‚ ì§œ ì •ë³´ í‘œì‹œ */}\n+            <DateRow>\n+              <DateItem>\n+                <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n+                <DateValue>\n+                  {currentPrescription?.signedAt \n+                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                    : hasSignature() \n+                      ? new Date().toLocaleDateString('ko-KR') \n+                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </DateValue>\n+              </DateItem>\n+              <DateItem>\n+                <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n+                <DateValue>\n+                  {currentPrescription?.updatedAt \n+                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                    : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                  }\n+                </DateValue>\n+              </DateItem>\n+            </DateRow>\n+          </ConsentSection>\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n+    </PageContainer>\n+  );\n+};\n+\n+export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1761464324870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -480,8 +480,13 @@\n   const hasSignature = () => {\n     return formData.signatureData && formData.signatureData.trim() !== '';\n   };\n \n+  // ê¸°ì¡´ ì„œëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ (DBì— ì €ì¥ëœ ì„œëª…)\n+  const hasExistingSignature = (): boolean => {\n+    return !!(currentPrescription?.signedAt && currentPrescription?.signatureData && currentPrescription.signatureData.trim() !== '');\n+  };\n+\n   // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n   const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n     const newPoint: BodyImagePoint = {\n       ...point,\n@@ -809,9 +814,9 @@\n       <ButtonPanel>\n         <ActionButton \n           onClick={handleSave} \n           title=\"ì €ì¥\"\n-          disabled={!hasSignature()}\n+          disabled={!hasSignature() && !hasExistingSignature()} // í˜„ì¬ ì„œëª…ì´ ìˆê±°ë‚˜ ê¸°ì¡´ ì„œëª…ì´ ìˆì–´ì•¼ ì €ì¥ ê°€ëŠ¥\n         >\n           <ButtonIcon>ğŸ’¾</ButtonIcon>\n           <ButtonText>ì €ì¥</ButtonText>\n         </ActionButton>\n@@ -1012,8 +1017,9 @@\n                   width={250}\n                   height={120}\n                   onSignatureChange={handleSignatureChange}\n                   initialSignature={formData.signatureData}\n+                  readonly={hasExistingSignature()} // ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ ì½ê¸° ì „ìš©\n                 />\n               </SignatureSection>\n             </SignatureArea>\n             \n@@ -1046,1051 +1052,5 @@\n     </PageContainer>\n   );\n };\n \n-export default ExercisePrescriptionPage;\n-import React, { useEffect, useState } from 'react';\n-import { useSearchParams } from 'react-router-dom';\n-import styled from 'styled-components';\n-import { AppColors } from '../styles/colors';\n-import { AppTextStyles } from '../styles/textStyles';\n-import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n-import BodyImageCanvas from '../components/BodyImageCanvas';\n-import SignatureCanvas from '../components/SignatureCanvas';\n-\n-const PageContainer = styled.div`\n-  min-height: 100vh;\n-  display: flex;\n-  background: ${AppColors.background};\n-  \n-  @media print {\n-    display: block;\n-    background: white;\n-  }\n-`;\n-\n-const SearchPanel = styled.div`\n-  width: 300px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ButtonPanel = styled.div`\n-  width: 80px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 20px 10px;\n-  display: flex;\n-  flex-direction: column;\n-  gap: 15px;\n-  align-items: center;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 60px;\n-  height: 60px;\n-  border: none;\n-  border-radius: 12px;\n-  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n-  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: ${AppTextStyles.label2.fontSize};\n-  font-weight: 600;\n-  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  justify-content: center;\n-  gap: 4px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-    transform: ${props => props.disabled ? 'none' : 'translateY(-2px)'};\n-  }\n-  \n-  &:active {\n-    transform: ${props => props.disabled ? 'none' : 'translateY(0)'};\n-  }\n-`;\n-\n-const ButtonIcon = styled.div`\n-  font-size: 20px;\n-  line-height: 1;\n-`;\n-\n-const ButtonText = styled.div`\n-  font-size: 10px;\n-  line-height: 1;\n-`;\n-\n-const SearchTitle = styled.h2`\n-  font-size: ${AppTextStyles.title2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SearchInput = styled.input`\n-  width: 100%;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  margin-bottom: 16px;\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const MemberList = styled.div`\n-  max-height: 400px;\n-  overflow-y: auto;\n-`;\n-\n-const MemberItem = styled.div<{ selected?: boolean }>`\n-  padding: 12px;\n-  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 8px;\n-  margin-bottom: 8px;\n-  cursor: pointer;\n-  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n-  \n-  &:hover {\n-    background: ${AppColors.primary}20;\n-  }\n-`;\n-\n-const MemberName = styled.div`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 4px;\n-`;\n-\n-const MemberInfo = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const PrescriptionPanel = styled.div`\n-  flex: 1;\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    padding: 0;\n-    overflow: visible;\n-  }\n-`;\n-\n-const PrescriptionContainer = styled.div`\n-  max-width: 800px;\n-  margin: 0 auto;\n-  background: white;\n-  padding: 40px;\n-  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  min-height: calc(100vh - 40px);\n-  \n-  @media print {\n-    box-shadow: none;\n-    padding: 20px;\n-    margin: 0;\n-    max-width: none;\n-    min-height: auto;\n-  }\n-`;\n-\n-const PrescriptionTitle = styled.h1`\n-  text-align: center;\n-  font-size: 24px;\n-  font-weight: bold;\n-  margin-bottom: 30px;\n-  color: ${AppColors.onBackground};\n-`;\n-\n-const FormRow = styled.div`\n-  display: flex;\n-  gap: 15px;\n-  margin-bottom: 20px;\n-  align-items: flex-start;\n-`;\n-\n-const FormGroup = styled.div`\n-  flex: 1;\n-`;\n-\n-const FormLabel = styled.label`\n-  display: block;\n-  font-size: ${AppTextStyles.label1.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 8px;\n-`;\n-\n-const FormInput = styled.input`\n-  width: 100%;\n-  padding: 10px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  box-sizing: border-box;\n-  \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const FormTextarea = styled.textarea`\n-  width: 100%;\n-  padding: 10px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  resize: vertical;\n-  box-sizing: border-box;\n-  \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const CheckboxGroup = styled.div`\n-  display: flex;\n-  flex-wrap: wrap;\n-  gap: 15px;\n-`;\n-\n-const CheckboxItem = styled.label`\n-  display: flex;\n-  align-items: center;\n-  gap: 8px;\n-  cursor: pointer;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-`;\n-\n-const Checkbox = styled.input`\n-  margin: 0;\n-`;\n-\n-const ImageSection = styled.div`\n-  display: flex;\n-  gap: 10px;\n-  margin-bottom: 20px;\n-`;\n-\n-const ConsentSection = styled.div`\n-  margin-top: 40px;\n-  padding: 20px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  background: #f9f9f9;\n-`;\n-\n-const ConsentText = styled.p`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  line-height: 1.6;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SignatureArea = styled.div`\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: flex-end;\n-`;\n-\n-const SignatureSection = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  gap: 10px;\n-`;\n-\n-const SignatureLabel = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const DateRow = styled.div`\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-  margin-top: 20px;\n-  padding: 15px;\n-  background: #f8f9fa;\n-  border-radius: 8px;\n-  border: 1px solid ${AppColors.borderLight};\n-`;\n-\n-const DateItem = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  gap: 5px;\n-`;\n-\n-const DateLabel = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-  font-weight: 600;\n-`;\n-\n-const DateValue = styled.div`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onBackground};\n-`;\n-\n-const ExercisePrescriptionPage: React.FC = () => {\n-  const [searchParams] = useSearchParams();\n-  const [searchTerm, setSearchTerm] = useState('');\n-  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n-  const [members, setMembers] = useState<Member[]>([]);\n-  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n-  const [formData, setFormData] = useState({\n-    height: '',\n-    weight: '',\n-    footSize: '',\n-    medications: '',\n-    medicalHistory: {\n-      musculoskeletal: false,\n-      cardiovascular: false,\n-      diabetes: false,\n-      osteoporosis: false,\n-      thyroid: false,\n-      varicose: false,\n-      arthritis: false,\n-    } as ExercisePrescriptionMedicalHistory,\n-    painHistory: '',\n-    bodyImages: {\n-      front: [] as BodyImagePoint[],\n-      spine: [] as BodyImagePoint[],\n-      back: [] as BodyImagePoint[],\n-    },\n-    signatureData: '', // ì„œëª… ë°ì´í„°\n-  });\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n-  useEffect(() => {\n-    const loadMembers = async () => {\n-      try {\n-        const allMembers = await dbManager.getAllMembers();\n-        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n-        const activeMembers = allMembers.filter(member => member.isActive);\n-        setMembers(activeMembers);\n-      } catch (error) {\n-        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-      }\n-    };\n-\n-    loadMembers();\n-  }, []);\n-\n-  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n-  useEffect(() => {\n-    const loadPrescription = async () => {\n-      if (!selectedMember) {\n-        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n-        setCurrentPrescription(null);\n-        setFormData({\n-          height: '',\n-          weight: '',\n-          footSize: '',\n-          medications: '',\n-          medicalHistory: {\n-            musculoskeletal: false,\n-            cardiovascular: false,\n-            diabetes: false,\n-            osteoporosis: false,\n-            thyroid: false,\n-            varicose: false,\n-            arthritis: false,\n-          },\n-          painHistory: '',\n-          bodyImages: {\n-            front: [],\n-            spine: [],\n-            back: [],\n-          },\n-          signatureData: '',\n-        });\n-        return;\n-      }\n-\n-      try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n-        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n-        \n-        if (prescription) {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n-          setCurrentPrescription(prescription);\n-          setFormData({\n-            height: prescription.height,\n-            weight: prescription.weight,\n-            footSize: prescription.footSize,\n-            medications: prescription.medications,\n-            medicalHistory: prescription.medicalHistory,\n-            painHistory: prescription.painHistory,\n-            bodyImages: prescription.bodyImages,\n-            signatureData: prescription.signatureData || '',\n-          });\n-          console.log('ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n-        } else {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n-          setCurrentPrescription(null);\n-          setFormData({\n-            height: '',\n-            weight: '',\n-            footSize: '',\n-            medications: '',\n-            medicalHistory: {\n-              musculoskeletal: false,\n-              cardiovascular: false,\n-              diabetes: false,\n-              osteoporosis: false,\n-              thyroid: false,\n-              varicose: false,\n-              arthritis: false,\n-            },\n-            painHistory: '',\n-            bodyImages: {\n-              front: [],\n-              spine: [],\n-              back: [],\n-            },\n-            signatureData: '',\n-          });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„±');\n-        }\n-      } catch (error) {\n-        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-      }\n-    };\n-\n-    loadPrescription();\n-  }, [selectedMember]);\n-\n-  const filteredMembers = members.filter(member =>\n-    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n-  );\n-\n-  useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid ë˜ëŠ” memberId í™•ì¸\n-    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    if (userIdParam && members.length > 0) {\n-      const member = members.find(m => m.id === userIdParam);\n-      if (member) {\n-        setSelectedMember(member);\n-      }\n-    }\n-  }, [searchParams, members]);\n-\n-  const handleMemberSelect = (member: Member) => {\n-    setSelectedMember(member);\n-  };\n-\n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value,\n-    }));\n-  };\n-\n-  const handleCheckboxChange = (field: string, checked: boolean) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      medicalHistory: {\n-        ...prev.medicalHistory,\n-        [field]: checked,\n-      },\n-    }));\n-  };\n-\n-  // ì„œëª… ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleSignatureChange = (dataUrl: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      signatureData: dataUrl,\n-    }));\n-  };\n-\n-  // ì„œëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜\n-  const hasSignature = () => {\n-    return formData.signatureData && formData.signatureData.trim() !== '';\n-  };\n-\n-  // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n-  const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n-    const newPoint: BodyImagePoint = {\n-      ...point,\n-      id: `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`, // ì„ì‹œ ID ìƒì„±\n-    };\n-\n-    setFormData(prev => ({\n-      ...prev,\n-      bodyImages: {\n-        ...prev.bodyImages,\n-        [imageType]: [...prev.bodyImages[imageType], newPoint],\n-      },\n-    }));\n-  };\n-\n-  const handleUpdateBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string, updates: Partial<Omit<BodyImagePoint, 'id'>>) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      bodyImages: {\n-        ...prev.bodyImages,\n-        [imageType]: prev.bodyImages[imageType].map(point =>\n-          point.id === pointId ? { ...point, ...updates } : point\n-        ),\n-      },\n-    }));\n-  };\n-\n-  const handleDeleteBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      bodyImages: {\n-        ...prev.bodyImages,\n-        [imageType]: prev.bodyImages[imageType].filter(point => point.id !== pointId),\n-      },\n-    }));\n-  };\n-\n-  const handleSave = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // ì„œëª… ê²€ì¦\n-    if (!hasSignature()) {\n-      alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-    \n-    try {\n-      const prescriptionData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        height: formData.height,\n-        weight: formData.weight,\n-        footSize: formData.footSize,\n-        medications: formData.medications,\n-        medicalHistory: formData.medicalHistory,\n-        painHistory: formData.painHistory,\n-        bodyImages: formData.bodyImages,\n-        signatureData: formData.signatureData,\n-        signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n-        isActive: true,\n-        prescriptionDate: new Date(),\n-      };\n-\n-      if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸\n-        await dbManager.exercisePrescription.updateExercisePrescription(\n-          currentPrescription.id,\n-          {\n-            height: formData.height,\n-            weight: formData.weight,\n-            footSize: formData.footSize,\n-            medications: formData.medications,\n-            medicalHistory: formData.medicalHistory,\n-            painHistory: formData.painHistory,\n-            bodyImages: formData.bodyImages,\n-            signatureData: formData.signatureData,\n-            isActive: true,\n-            prescriptionDate: new Date(),\n-          }\n-        );\n-        console.log('ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', currentPrescription.id);\n-      } else {\n-        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      }\n-      \n-      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    } catch (error) {\n-      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  const generatePrescriptionHTML = () => {\n-    if (!selectedMember) return '';\n-\n-    // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ë“¤ì„ HTMLë¡œ ë³€í™˜\n-    const generatePointsHTML = (points: BodyImagePoint[], imageType: string) => {\n-      if (points.length === 0) return `<div class=\"image-box\"><strong>${imageType}</strong><br><small>ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</small></div>`;\n-      \n-      const pointsHtml = points.map(point => \n-        `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y}%; width: 8px; height: 8px; background: ${point.color || '#ff0000'}; border: 1px solid white; border-radius: 50%; transform: translate(-50%, -50%);\"></div>\n-         ${point.memo ? `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y + 5}%; font-size: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 4px; border-radius: 2px; transform: translateX(-50%); white-space: nowrap;\">${point.memo}</div>` : ''}`\n-      ).join('');\n-      \n-      return `<div class=\"image-box\" style=\"position: relative;\"><strong>${imageType}</strong><br><small>${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨</small>${pointsHtml}</div>`;\n-    };\n-\n-    return `\n-      <!DOCTYPE html>\n-      <html>\n-      <head>\n-        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n-        <style>\n-          @media print {\n-            body { margin: 0; padding: 20px; }\n-            .no-print { display: none !important; }\n-          }\n-          body { font-family: Arial, sans-serif; margin: 20px; }\n-          .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n-          .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n-          .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n-          .form-group { flex: 1; }\n-          .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n-          .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-          .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n-          .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n-          .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n-          .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n-          .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n-          .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n-          .date-area { text-align: right; }\n-          textarea { resize: vertical; height: 100px; }\n-          .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n-        </style>\n-      </head>\n-      <body>\n-        <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n-        <div class=\"prescription-container\">\n-          <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n-          \n-          <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ì„±ëª…</label>\n-              <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n-              <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">í‚¤</label>\n-              <input class=\"form-input\" value=\"${formData.height}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ì²´ì¤‘</label>\n-              <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n-              <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n-            </div>\n-          </div>\n-\n-          <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n-              <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n-            </div>\n-          </div>\n-\n-          <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div class=\"checkbox-group\">\n-                ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n-                  const labels: { [key: string]: string } = {\n-                    musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n-                    cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n-                    diabetes: 'ë‹¹ë‡¨',\n-                    osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n-                    thyroid: 'ê°‘ìƒì„ ',\n-                    varicose: 'ì •ë§¥ë¥˜',\n-                    arthritis: 'ê´€ì ˆì—¼'\n-                  };\n-                  return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n-                }).join('')}\n-              </div>\n-            </div>\n-          </div>\n-\n-          <div class=\"image-section\">\n-            ${generatePointsHTML(formData.bodyImages.front, 'ì •ë©´')}\n-            ${generatePointsHTML(formData.bodyImages.spine, 'ì²™ì¶”')}\n-            ${generatePointsHTML(formData.bodyImages.back, 'í›„ë©´')}\n-          </div>\n-\n-          <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n-              <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n-            </div>\n-          </div>\n-\n-          <div class=\"consent-section\">\n-            <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n-            ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n-            <div class=\"signature-area\">\n-              <div style=\"text-align: center;\">\n-                <div style=\"margin-bottom: 10px; font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n-                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 120px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 120px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n-              </div>\n-            </div>\n-            \n-            <div style=\"display: flex; justify-content: space-between; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n-              <div style=\"text-align: center;\">\n-                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n-                <div style=\"font-size: 14px; color: #000;\">\n-                  ${currentPrescription?.signedAt \n-                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                    : hasSignature() \n-                      ? new Date().toLocaleDateString('ko-KR') \n-                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n-                </div>\n-              </div>\n-              <div style=\"text-align: center;\">\n-                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n-                <div style=\"font-size: 14px; color: #000;\">\n-                  ${currentPrescription?.updatedAt \n-                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                    : new Date().toLocaleDateString('ko-KR')\n-                  }\n-                </div>\n-              </div>\n-            </div>\n-          </div>\n-        </div>\n-      </body>\n-      </html>\n-    `;\n-  };\n-\n-  const handleShare = () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(generatePrescriptionHTML());\n-      printWindow.document.close();\n-      \n-      // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n-      if (navigator.share) {\n-        navigator.share({\n-          title: 'ìš´ë™ì²˜ë°©ì„œ',\n-          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: printWindow.location.href,\n-        });\n-      } else {\n-        alert('ìƒˆ ì°½ì—ì„œ ìš´ë™ì²˜ë°©ì„œë¥¼ í™•ì¸í•˜ê³  URLì„ ë³µì‚¬í•˜ì—¬ ê³µìœ í•˜ì„¸ìš”.');\n-      }\n-    }\n-  };\n-\n-  const handlePrint = () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(generatePrescriptionHTML());\n-      printWindow.document.close();\n-      \n-      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n-      setTimeout(() => {\n-        printWindow.print();\n-      }, 1000);\n-    }\n-  };\n-\n-  return (\n-    <PageContainer>\n-      <SearchPanel>\n-        <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n-        <SearchInput\n-          type=\"text\"\n-          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n-          value={searchTerm}\n-          onChange={(e) => setSearchTerm(e.target.value)}\n-        />\n-        <MemberList>\n-          {filteredMembers.map(member => (\n-            <MemberItem\n-              key={member.id}\n-              selected={selectedMember?.id === member.id}\n-              onClick={() => handleMemberSelect(member)}\n-            >\n-              <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birth}</MemberInfo>\n-              <MemberInfo>{member.phone}</MemberInfo>\n-            </MemberItem>\n-          ))}\n-        </MemberList>\n-      </SearchPanel>\n-\n-      <ButtonPanel>\n-        <ActionButton \n-          onClick={handleSave} \n-          title=\"ì €ì¥\"\n-          disabled={!hasSignature()}\n-        >\n-          <ButtonIcon>ğŸ’¾</ButtonIcon>\n-          <ButtonText>ì €ì¥</ButtonText>\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          <ButtonIcon>ğŸ“¤</ButtonIcon>\n-          <ButtonText>ê³µìœ </ButtonText>\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handlePrint} title=\"ì¶œë ¥\">\n-          <ButtonIcon>ğŸ–¨ï¸</ButtonIcon>\n-          <ButtonText>ì¶œë ¥</ButtonText>\n-        </ActionButton>\n-      </ButtonPanel>\n-\n-      <PrescriptionPanel>\n-        <PrescriptionContainer>\n-          <PrescriptionTitle>ìš´ë™ì²˜ë°©ì„œ</PrescriptionTitle>\n-          \n-          {/* ê¸°ë³¸ ì •ë³´ */}\n-          <FormRow>\n-            <FormGroup>\n-              <FormLabel>ì„±ëª…</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                value={selectedMember?.name || ''}\n-                readOnly\n-                style={{ background: '#f5f5f5' }}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>ìƒë…„ì›”ì¼</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                value={selectedMember?.birth || ''}\n-                readOnly\n-                style={{ background: '#f5f5f5' }}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>í‚¤</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"í‚¤(cm)\"\n-                value={formData.height}\n-                onChange={(e) => handleInputChange('height', e.target.value)}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>ì²´ì¤‘</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"ì²´ì¤‘(kg)\"\n-                value={formData.weight}\n-                onChange={(e) => handleInputChange('weight', e.target.value)}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n-                value={formData.footSize}\n-                onChange={(e) => handleInputChange('footSize', e.target.value)}\n-              />\n-            </FormGroup>\n-          </FormRow>\n-\n-          {/* ë³µìš©ì¤‘ì¸ ì•½ */}\n-          <FormRow>\n-            <FormGroup>\n-              <FormLabel>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n-                value={formData.medications}\n-                onChange={(e) => handleInputChange('medications', e.target.value)}\n-              />\n-            </FormGroup>\n-          </FormRow>\n-\n-          {/* ë³‘ë ¥ì‚¬í•­ */}\n-          <FormRow>\n-            <FormGroup>\n-              <FormLabel>ë³‘ë ¥ì‚¬í•­</FormLabel>\n-              <CheckboxGroup>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.musculoskeletal}\n-                    onChange={(e) => handleCheckboxChange('musculoskeletal', e.target.checked)}\n-                  />\n-                  ê·¼ê³¨ê²©ê³„ì§ˆí™˜\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.cardiovascular}\n-                    onChange={(e) => handleCheckboxChange('cardiovascular', e.target.checked)}\n-                  />\n-                  ì‹¬í˜ˆê´€ê³„ì§ˆí™˜\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.diabetes}\n-                    onChange={(e) => handleCheckboxChange('diabetes', e.target.checked)}\n-                  />\n-                  ë‹¹ë‡¨\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.osteoporosis}\n-                    onChange={(e) => handleCheckboxChange('osteoporosis', e.target.checked)}\n-                  />\n-                  ê³¨ë‹¤ê³µì¦\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.thyroid}\n-                    onChange={(e) => handleCheckboxChange('thyroid', e.target.checked)}\n-                  />\n-                  ê°‘ìƒì„ \n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.varicose}\n-                    onChange={(e) => handleCheckboxChange('varicose', e.target.checked)}\n-                  />\n-                  ì •ë§¥ë¥˜\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.arthritis}\n-                    onChange={(e) => handleCheckboxChange('arthritis', e.target.checked)}\n-                  />\n-                  ê´€ì ˆì—¼\n-                </CheckboxItem>\n-              </CheckboxGroup>\n-            </FormGroup>\n-          </FormRow>\n-\n-          {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n-          <ImageSection>\n-            <BodyImageCanvas\n-              imageType=\"front\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.front}\n-              onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n-            />\n-            <BodyImageCanvas\n-              imageType=\"spine\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.spine}\n-              onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n-            />\n-            <BodyImageCanvas\n-              imageType=\"back\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.back}\n-              onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n-            />\n-          </ImageSection>\n-\n-          {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n-          <FormRow>\n-            <FormGroup>\n-              <FormLabel>ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </FormLabel>\n-              <FormTextarea\n-                rows={6}\n-                placeholder=\"í†µì¦ íˆìŠ¤í† ë¦¬, ìˆ˜ìˆ  ì´ë ¥, ìš´ë™ ëª©ì  ë“±ì„ ìƒì„¸íˆ ê¸°ì…í•´ì£¼ì„¸ìš”\"\n-                value={formData.painHistory}\n-                onChange={(e) => handleInputChange('painHistory', e.target.value)}\n-              />\n-            </FormGroup>\n-          </FormRow>\n-\n-          {/* ë™ì˜ì„œ */}\n-          <ConsentSection>\n-            <ConsentText>\n-              ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n-              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n-            </ConsentText>\n-            <SignatureArea>\n-              <SignatureSection>\n-                <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n-                <SignatureCanvas\n-                  width={250}\n-                  height={120}\n-                  onSignatureChange={handleSignatureChange}\n-                  initialSignature={formData.signatureData}\n-                />\n-              </SignatureSection>\n-            </SignatureArea>\n-            \n-            {/* ë‚ ì§œ ì •ë³´ í‘œì‹œ */}\n-            <DateRow>\n-              <DateItem>\n-                <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n-                <DateValue>\n-                  {currentPrescription?.signedAt \n-                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                    : hasSignature() \n-                      ? new Date().toLocaleDateString('ko-KR') \n-                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n-                </DateValue>\n-              </DateItem>\n-              <DateItem>\n-                <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n-                <DateValue>\n-                  {currentPrescription?.updatedAt \n-                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                    : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n-                </DateValue>\n-              </DateItem>\n-            </DateRow>\n-          </ConsentSection>\n-        </PrescriptionContainer>\n-      </PrescriptionPanel>\n-    </PageContainer>\n-  );\n-};\n-\n export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1761464396927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -301,8 +301,16 @@\n   font-size: ${AppTextStyles.body2.fontSize};\n   color: ${AppColors.onBackground};\n `;\n \n+const SignatureNote = styled.div`\n+  margin-top: 8px;\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+  text-align: center;\n+  font-style: italic;\n+`;\n+\n const ExercisePrescriptionPage: React.FC = () => {\n   const [searchParams] = useSearchParams();\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n@@ -529,15 +537,25 @@\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n \n-    // ì„œëª… ê²€ì¦\n-    if (!hasSignature()) {\n+    // ì„œëª… ê²€ì¦: ìƒˆ ì²˜ë°©ì„œëŠ” ì„œëª… í•„ìˆ˜, ê¸°ì¡´ ì²˜ë°©ì„œëŠ” ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ OK\n+    if (!currentPrescription && !hasSignature()) {\n       alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n     \n+    if (currentPrescription && !hasExistingSignature() && !hasSignature()) {\n+      alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+    \n     try {\n+      // ì„œëª… ë°ì´í„° ê²°ì •: ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì„œëª… ì‚¬ìš©\n+      const finalSignatureData = hasExistingSignature() \n+        ? currentPrescription!.signatureData \n+        : formData.signatureData;\n+      \n       const prescriptionData = {\n         memberId: selectedMember.id,\n         memberName: selectedMember.name,\n         height: formData.height,\n@@ -546,9 +564,9 @@\n         medications: formData.medications,\n         medicalHistory: formData.medicalHistory,\n         painHistory: formData.painHistory,\n         bodyImages: formData.bodyImages,\n-        signatureData: formData.signatureData,\n+        signatureData: finalSignatureData,\n         signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n         isActive: true,\n         prescriptionDate: new Date(),\n       };\n@@ -564,9 +582,9 @@\n             medications: formData.medications,\n             medicalHistory: formData.medicalHistory,\n             painHistory: formData.painHistory,\n             bodyImages: formData.bodyImages,\n-            signatureData: formData.signatureData,\n+            signatureData: finalSignatureData, // ìµœì¢… ì„œëª… ë°ì´í„° ì‚¬ìš©\n             isActive: true,\n             prescriptionDate: new Date(),\n           }\n         );\n@@ -1019,8 +1037,18 @@\n                   onSignatureChange={handleSignatureChange}\n                   initialSignature={formData.signatureData}\n                   readonly={hasExistingSignature()} // ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ ì½ê¸° ì „ìš©\n                 />\n+                {hasExistingSignature() && (\n+                  <SignatureNote>\n+                    âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)\n+                  </SignatureNote>\n+                )}\n+                {!hasExistingSignature() && (\n+                  <SignatureNote>\n+                    ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\n+                  </SignatureNote>\n+                )}\n               </SignatureSection>\n             </SignatureArea>\n             \n             {/* ë‚ ì§œ ì •ë³´ í‘œì‹œ */}\n"
                },
                {
                    "date": 1761464477236,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1031,8 +1031,9 @@\n             <SignatureArea>\n               <SignatureSection>\n                 <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n                 <SignatureCanvas\n+                  key={selectedMember?.id || 'no-member'} // íšŒì› ë³€ê²½ ì‹œ ì»´í¬ë„ŒíŠ¸ ì¬ìƒì„±\n                   width={250}\n                   height={120}\n                   onSignatureChange={handleSignatureChange}\n                   initialSignature={formData.signatureData}\n"
                },
                {
                    "date": 1761464656178,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -254,21 +254,8 @@\n   color: ${AppColors.onBackground};\n   margin-bottom: 20px;\n `;\n \n-const SignatureArea = styled.div`\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: flex-end;\n-`;\n-\n-const SignatureSection = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  gap: 10px;\n-`;\n-\n const SignatureLabel = styled.div`\n   font-size: ${AppTextStyles.body3.fontSize};\n   color: ${AppColors.onInput1};\n `;\n@@ -426,11 +413,11 @@\n               front: [],\n               spine: [],\n               back: [],\n             },\n-            signatureData: '',\n+            signatureData: '', // ì„œëª… ë°ì´í„° ì´ˆê¸°í™”\n           });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„±');\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n         }\n       } catch (error) {\n         console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n         alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n@@ -645,9 +632,8 @@\n           .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n           .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n           .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n-          .signature-area { display: flex; justify-content: space-between; align-items: flex-end; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n           .date-area { text-align: right; }\n           textarea { resize: vertical; height: 100px; }\n           .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n@@ -723,35 +709,43 @@\n \n           <div class=\"consent-section\">\n             <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n             ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n-            <div class=\"signature-area\">\n-              <div style=\"text-align: center;\">\n-                <div style=\"margin-bottom: 10px; font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n-                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 120px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 120px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n-              </div>\n-            </div>\n             \n-            <div style=\"display: flex; justify-content: space-between; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n-              <div style=\"text-align: center;\">\n-                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n-                <div style=\"font-size: 14px; color: #000;\">\n-                  ${currentPrescription?.signedAt \n-                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                    : hasSignature() \n-                      ? new Date().toLocaleDateString('ko-KR') \n-                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n+            <div style=\"display: flex; gap: 20px; align-items: flex-start;\">\n+              <div style=\"flex: 0 0 auto; min-width: 300px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n+                <div style=\"display: flex; justify-content: space-between;\">\n+                  <div style=\"text-align: center;\">\n+                    <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n+                    <div style=\"font-size: 14px; color: #000;\">\n+                      ${currentPrescription?.signedAt \n+                        ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                        : hasSignature() \n+                          ? new Date().toLocaleDateString('ko-KR') \n+                          : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                      }\n+                    </div>\n+                  </div>\n+                  <div style=\"text-align: center;\">\n+                    <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n+                    <div style=\"font-size: 14px; color: #000;\">\n+                      ${currentPrescription?.updatedAt \n+                        ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                        : new Date().toLocaleDateString('ko-KR')\n+                      }\n+                    </div>\n+                  </div>\n                 </div>\n               </div>\n-              <div style=\"text-align: center;\">\n-                <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n-                <div style=\"font-size: 14px; color: #000;\">\n-                  ${currentPrescription?.updatedAt \n-                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                    : new Date().toLocaleDateString('ko-KR')\n-                  }\n+              \n+              <div style=\"flex: 1; display: flex; flex-direction: column; align-items: center;\">\n+                <div style=\"display: flex; align-items: center; gap: 15px; margin-bottom: 10px; width: 100%; justify-content: center;\">\n+                  <div style=\"font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n+                  <div style=\"font-size: 12px; color: ${hasExistingSignature() ? '#28a745' : '#666'};\">\n+                    ${hasExistingSignature() ? 'âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)' : 'ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤'}\n+                  </div>\n                 </div>\n+                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 100px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 100px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n               </div>\n             </div>\n           </div>\n         </div>\n@@ -1027,55 +1021,60 @@\n             <ConsentText>\n               ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n               ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n             </ConsentText>\n-            <SignatureArea>\n-              <SignatureSection>\n-                <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n+            \n+            {/* ì„œëª… ì˜ì—­ê³¼ ë‚ ì§œ ì •ë³´ë¥¼ í•˜ë‚˜ì˜ í–‰ìœ¼ë¡œ ë°°ì¹˜ */}\n+            <div style={{ display: 'flex', gap: '20px', alignItems: 'flex-start' }}>\n+              {/* ë‚ ì§œ ì •ë³´ ì¹´ë“œ - ì™¼ìª½ */}\n+              <DateRow style={{ flex: '0 0 auto', margin: '0', minWidth: '300px' }}>\n+                <DateItem>\n+                  <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n+                  <DateValue>\n+                    {currentPrescription?.signedAt \n+                      ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                      : hasSignature() \n+                        ? new Date().toLocaleDateString('ko-KR') \n+                        : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                    }\n+                  </DateValue>\n+                </DateItem>\n+                <DateItem>\n+                  <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n+                  <DateValue>\n+                    {currentPrescription?.updatedAt \n+                      ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                      : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                    }\n+                  </DateValue>\n+                </DateItem>\n+              </DateRow>\n+\n+              {/* ì„œëª… ì˜ì—­ - ì˜¤ë¥¸ìª½ */}\n+              <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n+                <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '10px', width: '100%', justifyContent: 'center' }}>\n+                  <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n+                  {hasExistingSignature() && (\n+                    <SignatureNote style={{ margin: '0', fontSize: '12px', color: '#28a745' }}>\n+                      âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)\n+                    </SignatureNote>\n+                  )}\n+                  {!hasExistingSignature() && (\n+                    <SignatureNote style={{ margin: '0', fontSize: '12px' }}>\n+                      ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\n+                    </SignatureNote>\n+                  )}\n+                </div>\n                 <SignatureCanvas\n-                  key={selectedMember?.id || 'no-member'} // íšŒì› ë³€ê²½ ì‹œ ì»´í¬ë„ŒíŠ¸ ì¬ìƒì„±\n+                  key={selectedMember?.id || 'no-member'}\n                   width={250}\n-                  height={120}\n+                  height={100}\n                   onSignatureChange={handleSignatureChange}\n                   initialSignature={formData.signatureData}\n-                  readonly={hasExistingSignature()} // ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ ì½ê¸° ì „ìš©\n+                  readonly={hasExistingSignature()}\n                 />\n-                {hasExistingSignature() && (\n-                  <SignatureNote>\n-                    âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)\n-                  </SignatureNote>\n-                )}\n-                {!hasExistingSignature() && (\n-                  <SignatureNote>\n-                    ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\n-                  </SignatureNote>\n-                )}\n-              </SignatureSection>\n-            </SignatureArea>\n-            \n-            {/* ë‚ ì§œ ì •ë³´ í‘œì‹œ */}\n-            <DateRow>\n-              <DateItem>\n-                <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n-                <DateValue>\n-                  {currentPrescription?.signedAt \n-                    ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                    : hasSignature() \n-                      ? new Date().toLocaleDateString('ko-KR') \n-                      : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n-                </DateValue>\n-              </DateItem>\n-              <DateItem>\n-                <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n-                <DateValue>\n-                  {currentPrescription?.updatedAt \n-                    ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                    : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                  }\n-                </DateValue>\n-              </DateItem>\n-            </DateRow>\n+              </div>\n+            </div>\n           </ConsentSection>\n         </PrescriptionContainer>\n       </PrescriptionPanel>\n     </PageContainer>\n"
                },
                {
                    "date": 1761464754009,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -254,13 +254,8 @@\n   color: ${AppColors.onBackground};\n   margin-bottom: 20px;\n `;\n \n-const SignatureLabel = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n const DateRow = styled.div`\n   display: flex;\n   justify-content: space-between;\n   align-items: center;\n@@ -711,40 +706,41 @@\n             <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n             ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n             \n             <div style=\"display: flex; gap: 20px; align-items: flex-start;\">\n-              <div style=\"flex: 0 0 auto; min-width: 300px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n-                <div style=\"display: flex; justify-content: space-between;\">\n-                  <div style=\"text-align: center;\">\n-                    <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n-                    <div style=\"font-size: 14px; color: #000;\">\n-                      ${currentPrescription?.signedAt \n-                        ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                        : hasSignature() \n-                          ? new Date().toLocaleDateString('ko-KR') \n-                          : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                      }\n-                    </div>\n+              <div style=\"flex: 0 0 auto; min-width: 300px;\">\n+                <div style=\"margin-bottom: 10px; text-align: center;\">\n+                  <div style=\"font-size: 12px; color: ${hasExistingSignature() ? '#28a745' : '#666'};\">\n+                    ${hasExistingSignature() ? 'âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)' : 'ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤'}\n                   </div>\n-                  <div style=\"text-align: center;\">\n-                    <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n-                    <div style=\"font-size: 14px; color: #000;\">\n-                      ${currentPrescription?.updatedAt \n-                        ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                        : new Date().toLocaleDateString('ko-KR')\n-                      }\n+                </div>\n+                <div style=\"padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n+                  <div style=\"display: flex; justify-content: space-between;\">\n+                    <div style=\"text-align: center;\">\n+                      <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n+                      <div style=\"font-size: 14px; color: #000;\">\n+                        ${currentPrescription?.signedAt \n+                          ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                          : hasSignature() \n+                            ? new Date().toLocaleDateString('ko-KR') \n+                            : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                        }\n+                      </div>\n                     </div>\n+                    <div style=\"text-align: center;\">\n+                      <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n+                      <div style=\"font-size: 14px; color: #000;\">\n+                        ${currentPrescription?.updatedAt \n+                          ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                          : new Date().toLocaleDateString('ko-KR')\n+                        }\n+                      </div>\n+                    </div>\n                   </div>\n                 </div>\n               </div>\n               \n-              <div style=\"flex: 1; display: flex; flex-direction: column; align-items: center;\">\n-                <div style=\"display: flex; align-items: center; gap: 15px; margin-bottom: 10px; width: 100%; justify-content: center;\">\n-                  <div style=\"font-size: 14px; color: #666;\">ê³ ê° ì„œëª…</div>\n-                  <div style=\"font-size: 12px; color: ${hasExistingSignature() ? '#28a745' : '#666'};\">\n-                    ${hasExistingSignature() ? 'âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)' : 'ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤'}\n-                  </div>\n-                </div>\n+              <div style=\"flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;\">\n                 ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 100px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 100px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n               </div>\n             </div>\n           </div>\n@@ -1025,35 +1021,11 @@\n             \n             {/* ì„œëª… ì˜ì—­ê³¼ ë‚ ì§œ ì •ë³´ë¥¼ í•˜ë‚˜ì˜ í–‰ìœ¼ë¡œ ë°°ì¹˜ */}\n             <div style={{ display: 'flex', gap: '20px', alignItems: 'flex-start' }}>\n               {/* ë‚ ì§œ ì •ë³´ ì¹´ë“œ - ì™¼ìª½ */}\n-              <DateRow style={{ flex: '0 0 auto', margin: '0', minWidth: '300px' }}>\n-                <DateItem>\n-                  <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n-                  <DateValue>\n-                    {currentPrescription?.signedAt \n-                      ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                      : hasSignature() \n-                        ? new Date().toLocaleDateString('ko-KR') \n-                        : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                    }\n-                  </DateValue>\n-                </DateItem>\n-                <DateItem>\n-                  <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n-                  <DateValue>\n-                    {currentPrescription?.updatedAt \n-                      ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                      : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                    }\n-                  </DateValue>\n-                </DateItem>\n-              </DateRow>\n-\n-              {/* ì„œëª… ì˜ì—­ - ì˜¤ë¥¸ìª½ */}\n-              <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n-                <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '10px', width: '100%', justifyContent: 'center' }}>\n-                  <SignatureLabel>ê³ ê° ì„œëª…</SignatureLabel>\n+              <div style={{ flex: '0 0 auto', minWidth: '300px' }}>\n+                {/* ì„œëª… ì•ˆë‚´ í…ìŠ¤íŠ¸ */}\n+                <div style={{ marginBottom: '10px', textAlign: 'center' }}>\n                   {hasExistingSignature() && (\n                     <SignatureNote style={{ margin: '0', fontSize: '12px', color: '#28a745' }}>\n                       âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)\n                     </SignatureNote>\n@@ -1063,8 +1035,35 @@\n                       ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\n                     </SignatureNote>\n                   )}\n                 </div>\n+                {/* ë‚ ì§œ ì¹´ë“œ */}\n+                <DateRow style={{ margin: '0' }}>\n+                  <DateItem>\n+                    <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n+                    <DateValue>\n+                      {currentPrescription?.signedAt \n+                        ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n+                        : hasSignature() \n+                          ? new Date().toLocaleDateString('ko-KR') \n+                          : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                      }\n+                    </DateValue>\n+                  </DateItem>\n+                  <DateItem>\n+                    <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n+                    <DateValue>\n+                      {currentPrescription?.updatedAt \n+                        ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n+                        : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n+                      }\n+                    </DateValue>\n+                  </DateItem>\n+                </DateRow>\n+              </div>\n+\n+              {/* ì„œëª… ì˜ì—­ - ì˜¤ë¥¸ìª½ */}\n+              <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>\n                 <SignatureCanvas\n                   key={selectedMember?.id || 'no-member'}\n                   width={250}\n                   height={100}\n"
                },
                {
                    "date": 1761464902058,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -218,15 +218,15 @@\n \n const CheckboxGroup = styled.div`\n   display: flex;\n   flex-wrap: wrap;\n-  gap: 15px;\n+  gap: 10px;\n `;\n \n const CheckboxItem = styled.label`\n   display: flex;\n   align-items: center;\n-  gap: 8px;\n+  gap: 4px;\n   cursor: pointer;\n   font-size: ${AppTextStyles.body2.fontSize};\n `;\n \n@@ -240,9 +240,9 @@\n   margin-bottom: 20px;\n `;\n \n const ConsentSection = styled.div`\n-  margin-top: 40px;\n+  margin-top: 20px;\n   padding: 20px;\n   border: 1px solid ${AppColors.borderLight};\n   border-radius: 8px;\n   background: #f9f9f9;\n@@ -626,9 +626,9 @@\n           .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n           .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n           .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n-          .consent-section { margin-top: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n+          .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n           .date-area { text-align: right; }\n           textarea { resize: vertical; height: 100px; }\n           .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n@@ -662,18 +662,18 @@\n             </div>\n           </div>\n \n           <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë³µìš©ì¤‘ì¸ ì•½</label>\n-              <input class=\"form-input\" value=\"${formData.medications}\" readonly>\n+            <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 15px;\">\n+              <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0;\">ë³µìš©ì¤‘ì¸ ì•½</label>\n+              <input class=\"form-input\" value=\"${formData.medications}\" readonly style=\"flex: 1;\">\n             </div>\n           </div>\n \n           <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div class=\"checkbox-group\">\n+            <div class=\"form-group\" style=\"display: flex; align-items: flex-start; gap: 15px;\">\n+              <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0; padding-top: 8px;\">ë³‘ë ¥ì‚¬í•­</label>\n+              <div class=\"checkbox-group\" style=\"flex: 1;\">\n                 ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n                   const labels: { [key: string]: string } = {\n                     musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n                     cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n@@ -892,26 +892,27 @@\n               />\n             </FormGroup>\n           </FormRow>\n \n-          {/* ë³µìš©ì¤‘ì¸ ì•½ */}\n+          {/* ë³µìš©ì¤‘ì¸ ì•½ - ë¼ë²¨ê³¼ ì…ë ¥ë€ì„ ê°™ì€ í–‰ì— ë°°ì¹˜ */}\n           <FormRow>\n-            <FormGroup>\n-              <FormLabel>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n+            <FormGroup style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n+              <FormLabel style={{ marginBottom: '0', minWidth: '120px', flexShrink: 0 }}>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n               <FormInput\n                 type=\"text\"\n                 placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n                 value={formData.medications}\n                 onChange={(e) => handleInputChange('medications', e.target.value)}\n+                style={{ flex: 1 }}\n               />\n             </FormGroup>\n           </FormRow>\n \n-          {/* ë³‘ë ¥ì‚¬í•­ */}\n+          {/* ë³‘ë ¥ì‚¬í•­ - ë¼ë²¨ê³¼ ì²´í¬ë°•ìŠ¤ë¥¼ ê°™ì€ í–‰ì— ë°°ì¹˜ */}\n           <FormRow>\n-            <FormGroup>\n-              <FormLabel>ë³‘ë ¥ì‚¬í•­</FormLabel>\n-              <CheckboxGroup>\n+            <FormGroup style={{ display: 'flex', alignItems: 'flex-start', gap: '15px' }}>\n+              <FormLabel style={{ marginBottom: '0', minWidth: '120px', flexShrink: 0, paddingTop: '8px' }}>ë³‘ë ¥ì‚¬í•­</FormLabel>\n+              <CheckboxGroup style={{ flex: 1 }}>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.musculoskeletal}\n"
                },
                {
                    "date": 1761465071062,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -623,9 +623,9 @@\n           .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n           .form-group { flex: 1; }\n           .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n           .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-          .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; }\n+          .checkbox-group { display: flex; flex-wrap: wrap; gap: 10px; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n           .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n@@ -669,11 +669,11 @@\n             </div>\n           </div>\n \n           <div class=\"form-row\">\n-            <div class=\"form-group\" style=\"display: flex; align-items: flex-start; gap: 15px;\">\n-              <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0; padding-top: 8px;\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div class=\"checkbox-group\" style=\"flex: 1;\">\n+            <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 15px;\">\n+              <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0;\">ë³‘ë ¥ì‚¬í•­</label>\n+              <div class=\"checkbox-group\" style=\"flex: 1; gap: 10px;\">\n                 ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n                   const labels: { [key: string]: string } = {\n                     musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n                     cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n@@ -682,9 +682,9 @@\n                     thyroid: 'ê°‘ìƒì„ ',\n                     varicose: 'ì •ë§¥ë¥˜',\n                     arthritis: 'ê´€ì ˆì—¼'\n                   };\n-                  return `<label><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                  return `<label style=\"display: flex; align-items: center; gap: 4px;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n                 }).join('')}\n               </div>\n             </div>\n           </div>\n@@ -908,10 +908,10 @@\n           </FormRow>\n \n           {/* ë³‘ë ¥ì‚¬í•­ - ë¼ë²¨ê³¼ ì²´í¬ë°•ìŠ¤ë¥¼ ê°™ì€ í–‰ì— ë°°ì¹˜ */}\n           <FormRow>\n-            <FormGroup style={{ display: 'flex', alignItems: 'flex-start', gap: '15px' }}>\n-              <FormLabel style={{ marginBottom: '0', minWidth: '120px', flexShrink: 0, paddingTop: '8px' }}>ë³‘ë ¥ì‚¬í•­</FormLabel>\n+            <FormGroup style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n+              <FormLabel style={{ marginBottom: '0', minWidth: '120px', flexShrink: 0 }}>ë³‘ë ¥ì‚¬í•­</FormLabel>\n               <CheckboxGroup style={{ flex: 1 }}>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n"
                },
                {
                    "date": 1761465200784,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -623,9 +623,10 @@\n           .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n           .form-group { flex: 1; }\n           .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n           .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-          .checkbox-group { display: flex; flex-wrap: wrap; gap: 10px; }\n+          .checkbox-group { display: flex; flex-wrap: nowrap; gap: 10px; overflow: hidden; }\n+          .checkbox-item { display: flex; align-items: center; gap: 4px; white-space: nowrap; flex-shrink: 0; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n           .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n@@ -671,9 +672,9 @@\n \n           <div class=\"form-row\">\n             <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 15px;\">\n               <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0;\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div class=\"checkbox-group\" style=\"flex: 1; gap: 10px;\">\n+              <div style=\"flex: 1; display: flex; flex-wrap: nowrap; gap: 10px; overflow: hidden;\">\n                 ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n                   const labels: { [key: string]: string } = {\n                     musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n                     cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n@@ -682,9 +683,9 @@\n                     thyroid: 'ê°‘ìƒì„ ',\n                     varicose: 'ì •ë§¥ë¥˜',\n                     arthritis: 'ê´€ì ˆì—¼'\n                   };\n-                  return `<label style=\"display: flex; align-items: center; gap: 4px;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                  return `<label style=\"display: flex; align-items: center; gap: 4px; white-space: nowrap; flex-shrink: 0;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n                 }).join('')}\n               </div>\n             </div>\n           </div>\n"
                },
                {
                    "date": 1761465319170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -623,10 +623,10 @@\n           .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n           .form-group { flex: 1; }\n           .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n           .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-          .checkbox-group { display: flex; flex-wrap: nowrap; gap: 10px; overflow: hidden; }\n-          .checkbox-item { display: flex; align-items: center; gap: 4px; white-space: nowrap; flex-shrink: 0; }\n+          .checkbox-group { display: flex; flex-wrap: nowrap; gap: 8px; overflow: hidden; }\n+          .checkbox-item { display: flex; align-items: center; gap: 3px; white-space: nowrap; flex-shrink: 0; font-size: 12px; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n           .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n@@ -672,9 +672,9 @@\n \n           <div class=\"form-row\">\n             <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 15px;\">\n               <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0;\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div style=\"flex: 1; display: flex; flex-wrap: nowrap; gap: 10px; overflow: hidden;\">\n+              <div style=\"flex: 1; display: flex; flex-wrap: nowrap; gap: 8px; overflow: hidden;\">\n                 ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n                   const labels: { [key: string]: string } = {\n                     musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n                     cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n@@ -683,9 +683,9 @@\n                     thyroid: 'ê°‘ìƒì„ ',\n                     varicose: 'ì •ë§¥ë¥˜',\n                     arthritis: 'ê´€ì ˆì—¼'\n                   };\n-                  return `<label style=\"display: flex; align-items: center; gap: 4px; white-space: nowrap; flex-shrink: 0;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled> ${labels[key]}</label>`;\n+                  return `<label style=\"display: flex; align-items: center; gap: 3px; white-space: nowrap; flex-shrink: 0; font-size: 12px;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled style=\"margin: 0;\"> ${labels[key]}</label>`;\n                 }).join('')}\n               </div>\n             </div>\n           </div>\n"
                },
                {
                    "date": 1761465672684,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -596,16 +596,67 @@\n     if (!selectedMember) return '';\n \n     // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ë“¤ì„ HTMLë¡œ ë³€í™˜\n     const generatePointsHTML = (points: BodyImagePoint[], imageType: string) => {\n-      if (points.length === 0) return `<div class=\"image-box\"><strong>${imageType}</strong><br><small>ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</small></div>`;\n+      if (points.length === 0) {\n+        return `\n+          <div class=\"image-box\">\n+            <div class=\"image-header\"><strong>${imageType}</strong></div>\n+            <div class=\"image-content\">\n+              <div class=\"no-points\">ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</div>\n+            </div>\n+          </div>\n+        `;\n+      }\n       \n-      const pointsHtml = points.map(point => \n-        `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y}%; width: 8px; height: 8px; background: ${point.color || '#ff0000'}; border: 1px solid white; border-radius: 50%; transform: translate(-50%, -50%);\"></div>\n-         ${point.memo ? `<div style=\"position: absolute; left: ${point.x}%; top: ${point.y + 5}%; font-size: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 4px; border-radius: 2px; transform: translateX(-50%); white-space: nowrap;\">${point.memo}</div>` : ''}`\n+      // í¬ì¸íŠ¸ë“¤ì„ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œ\n+      const pointsHtml = points.map((point, index) => \n+        `<div class=\"point-marker\" style=\"\n+           position: absolute; \n+           left: ${point.x}%; \n+           top: ${point.y}%; \n+           width: 8px; \n+           height: 8px; \n+           background: ${point.color || '#ff0000'}; \n+           border: 1px solid white; \n+           border-radius: 50%; \n+           transform: translate(-50%, -50%);\n+           box-shadow: 0 0 3px rgba(0,0,0,0.4);\n+           z-index: 10;\n+         \"></div>\n+         ${point.memo ? `<div class=\"point-memo\" style=\"\n+           position: absolute; \n+           left: ${point.x}%; \n+           top: ${point.y}%; \n+           font-size: 8px; \n+           background: rgba(0,0,0,0.8); \n+           color: white; \n+           padding: 1px 4px; \n+           border-radius: 2px; \n+           transform: translate(-50%, calc(-100% - 6px)); \n+           white-space: nowrap;\n+           max-width: 100px;\n+           overflow: hidden;\n+           text-overflow: ellipsis;\n+           z-index: 11;\n+         \">${point.memo}</div>` : ''}`\n       ).join('');\n       \n-      return `<div class=\"image-box\" style=\"position: relative;\"><strong>${imageType}</strong><br><small>${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨</small>${pointsHtml}</div>`;\n+      // í¬ì¸íŠ¸ ëª©ë¡ì„ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ (í•„ìš”ì‹œ)\n+      const pointsList = points.length > 0 ? \n+        `<div class=\"points-summary\" style=\"margin-top: 5px; font-size: 10px; color: #666;\">\n+           ${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨\n+         </div>` : '';\n+      \n+      return `\n+        <div class=\"image-box\" style=\"position: relative;\">\n+          <div class=\"image-header\"><strong>${imageType}</strong></div>\n+          <div class=\"image-content\" style=\"position: relative; height: 200px; border: 1px solid #ddd; background: #f8f9fa; margin: 5px 0;\">\n+            ${pointsHtml}\n+          </div>\n+          ${pointsList}\n+        </div>\n+      `;\n     };\n \n     return `\n       <!DOCTYPE html>\n@@ -626,9 +677,44 @@\n           .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n           .checkbox-group { display: flex; flex-wrap: nowrap; gap: 8px; overflow: hidden; }\n           .checkbox-item { display: flex; align-items: center; gap: 3px; white-space: nowrap; flex-shrink: 0; font-size: 12px; }\n           .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n-          .image-box { flex: 1; height: 300px; border: 2px dashed #ddd; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }\n+          .image-box { \n+            flex: 1; \n+            border: 2px solid #ddd; \n+            border-radius: 8px; \n+            padding: 10px;\n+            background: white;\n+          }\n+          .image-header {\n+            text-align: center;\n+            font-weight: bold;\n+            margin-bottom: 8px;\n+            padding-bottom: 5px;\n+            border-bottom: 1px solid #eee;\n+          }\n+          .image-content {\n+            position: relative;\n+            height: 200px;\n+            border: 1px solid #ddd;\n+            background: #f8f9fa;\n+            margin: 5px 0;\n+            border-radius: 4px;\n+          }\n+          .no-points {\n+            position: absolute;\n+            top: 50%;\n+            left: 50%;\n+            transform: translate(-50%, -50%);\n+            color: #999;\n+            font-size: 12px;\n+          }\n+          .points-summary {\n+            margin-top: 5px;\n+            font-size: 10px;\n+            color: #666;\n+            text-align: center;\n+          }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n           .date-area { text-align: right; }\n           textarea { resize: vertical; height: 100px; }\n"
                },
                {
                    "date": 1761465796352,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -613,48 +613,41 @@\n         `<div class=\"point-marker\" style=\"\n            position: absolute; \n            left: ${point.x}%; \n            top: ${point.y}%; \n-           width: 8px; \n-           height: 8px; \n+           width: 6px; \n+           height: 6px; \n            background: ${point.color || '#ff0000'}; \n            border: 1px solid white; \n            border-radius: 50%; \n            transform: translate(-50%, -50%);\n-           box-shadow: 0 0 3px rgba(0,0,0,0.4);\n+           box-shadow: 0 0 2px rgba(0,0,0,0.5);\n            z-index: 10;\n          \"></div>\n          ${point.memo ? `<div class=\"point-memo\" style=\"\n            position: absolute; \n            left: ${point.x}%; \n            top: ${point.y}%; \n-           font-size: 8px; \n+           font-size: 7px; \n            background: rgba(0,0,0,0.8); \n            color: white; \n-           padding: 1px 4px; \n+           padding: 1px 3px; \n            border-radius: 2px; \n-           transform: translate(-50%, calc(-100% - 6px)); \n+           transform: translate(-50%, calc(-100% - 4px)); \n            white-space: nowrap;\n-           max-width: 100px;\n+           max-width: 80px;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            z-index: 11;\n          \">${point.memo}</div>` : ''}`\n       ).join('');\n       \n-      // í¬ì¸íŠ¸ ëª©ë¡ì„ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ (í•„ìš”ì‹œ)\n-      const pointsList = points.length > 0 ? \n-        `<div class=\"points-summary\" style=\"margin-top: 5px; font-size: 10px; color: #666;\">\n-           ${points.length}ê°œ í¬ì¸íŠ¸ ë“±ë¡ë¨\n-         </div>` : '';\n-      \n       return `\n         <div class=\"image-box\" style=\"position: relative;\">\n           <div class=\"image-header\"><strong>${imageType}</strong></div>\n           <div class=\"image-content\" style=\"position: relative; height: 200px; border: 1px solid #ddd; background: #f8f9fa; margin: 5px 0;\">\n             ${pointsHtml}\n           </div>\n-          ${pointsList}\n         </div>\n       `;\n     };\n \n@@ -707,14 +700,8 @@\n             transform: translate(-50%, -50%);\n             color: #999;\n             font-size: 12px;\n           }\n-          .points-summary {\n-            margin-top: 5px;\n-            font-size: 10px;\n-            color: #666;\n-            text-align: center;\n-          }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n           .date-area { text-align: right; }\n           textarea { resize: vertical; height: 100px; }\n"
                },
                {
                    "date": 1761466015508,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -594,60 +594,45 @@\n \n   const generatePrescriptionHTML = () => {\n     if (!selectedMember) return '';\n \n-    // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ë“¤ì„ HTMLë¡œ ë³€í™˜\n-    const generatePointsHTML = (points: BodyImagePoint[], imageType: string) => {\n+    // ì‹ ì²´ ì´ë¯¸ì§€ SVG ìƒì„± í•¨ìˆ˜\n+    const generateBodyImageSVG = (imageType: 'front' | 'spine' | 'back', title: string) => {\n+      const points = formData.bodyImages[imageType];\n+      \n       if (points.length === 0) {\n         return `\n           <div class=\"image-box\">\n-            <div class=\"image-header\"><strong>${imageType}</strong></div>\n+            <div class=\"image-header\"><strong>${title}</strong></div>\n             <div class=\"image-content\">\n               <div class=\"no-points\">ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</div>\n             </div>\n           </div>\n         `;\n       }\n-      \n-      // í¬ì¸íŠ¸ë“¤ì„ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œ\n-      const pointsHtml = points.map((point, index) => \n-        `<div class=\"point-marker\" style=\"\n-           position: absolute; \n-           left: ${point.x}%; \n-           top: ${point.y}%; \n-           width: 6px; \n-           height: 6px; \n-           background: ${point.color || '#ff0000'}; \n-           border: 1px solid white; \n-           border-radius: 50%; \n-           transform: translate(-50%, -50%);\n-           box-shadow: 0 0 2px rgba(0,0,0,0.5);\n-           z-index: 10;\n-         \"></div>\n-         ${point.memo ? `<div class=\"point-memo\" style=\"\n-           position: absolute; \n-           left: ${point.x}%; \n-           top: ${point.y}%; \n-           font-size: 7px; \n-           background: rgba(0,0,0,0.8); \n-           color: white; \n-           padding: 1px 3px; \n-           border-radius: 2px; \n-           transform: translate(-50%, calc(-100% - 4px)); \n-           white-space: nowrap;\n-           max-width: 80px;\n-           overflow: hidden;\n-           text-overflow: ellipsis;\n-           z-index: 11;\n-         \">${point.memo}</div>` : ''}`\n-      ).join('');\n-      \n+\n+      // SVGë¡œ í¬ì¸íŠ¸ë“¤ ìƒì„±\n+      const svgPoints = points.map(point => {\n+        const x = (point.x / 100) * 200; // 200px ê¸°ì¤€\n+        const y = (point.y / 100) * 200; // 200px ê¸°ì¤€\n+        \n+        return `\n+          <circle cx=\"${x}\" cy=\"${y}\" r=\"3\" fill=\"${point.color || '#ff0000'}\" stroke=\"#000\" stroke-width=\"1\"/>\n+          ${point.memo ? `<text x=\"${x}\" y=\"${y - 8}\" font-family=\"Arial\" font-size=\"8\" text-anchor=\"middle\" fill=\"#000\">${point.memo}</text>` : ''}\n+        `;\n+      }).join('');\n+\n+      const svgDataUrl = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(`\n+        <svg width=\"200\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\n+          <rect width=\"200\" height=\"200\" fill=\"#f8f9fa\" stroke=\"#ddd\" stroke-width=\"1\"/>\n+          ${svgPoints}\n+        </svg>\n+      `)}`;\n+\n       return `\n-        <div class=\"image-box\" style=\"position: relative;\">\n-          <div class=\"image-header\"><strong>${imageType}</strong></div>\n-          <div class=\"image-content\" style=\"position: relative; height: 200px; border: 1px solid #ddd; background: #f8f9fa; margin: 5px 0;\">\n-            ${pointsHtml}\n-          </div>\n+        <div class=\"image-box\">\n+          <div class=\"image-header\"><strong>${title}</strong></div>\n+          <img src=\"${svgDataUrl}\" style=\"width: 100%; height: 200px; object-fit: contain; border: 1px solid #ddd; border-radius: 4px;\" />\n         </div>\n       `;\n     };\n \n@@ -659,8 +644,25 @@\n         <style>\n           @media print {\n             body { margin: 0; padding: 20px; }\n             .no-print { display: none !important; }\n+            /* PDF ì¶œë ¥ ìµœì í™” */\n+            * {\n+              -webkit-print-color-adjust: exact !important;\n+              color-adjust: exact !important;\n+              print-color-adjust: exact !important;\n+            }\n+            .point-marker {\n+              background: var(--point-color) !important;\n+              border: 1px solid #000 !important;\n+              width: 4px !important;\n+              height: 4px !important;\n+            }\n+            .point-memo {\n+              background: #000 !important;\n+              color: #fff !important;\n+              font-size: 6px !important;\n+            }\n           }\n           body { font-family: Arial, sans-serif; margin: 20px; }\n           .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n           .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n@@ -700,17 +702,36 @@\n             transform: translate(-50%, -50%);\n             color: #999;\n             font-size: 12px;\n           }\n+          .point-marker {\n+            -webkit-print-color-adjust: exact;\n+            color-adjust: exact;\n+            print-color-adjust: exact;\n+          }\n+          .point-memo {\n+            -webkit-print-color-adjust: exact;\n+            color-adjust: exact;\n+            print-color-adjust: exact;\n+          }\n           .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n           .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n           .date-area { text-align: right; }\n           textarea { resize: vertical; height: 100px; }\n           .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n         </style>\n       </head>\n       <body>\n-        <button class=\"print-button no-print\" onclick=\"window.print()\">ì¸ì‡„í•˜ê¸°</button>\n+        <div class=\"no-print\" style=\"margin: 20px; padding: 15px; background: #f0f8ff; border: 1px solid #007bff; border-radius: 5px;\">\n+          <div style=\"display: flex; align-items: center; gap: 15px;\">\n+            <button class=\"print-button\" onclick=\"window.print()\" style=\"margin: 0;\">ì¸ì‡„í•˜ê¸°</button>\n+            <div style=\"font-size: 12px; color: #666;\">\n+              <strong>PDF ì¶œë ¥ ì‹œ ìƒ‰ìƒì´ ì•ˆ ë³´ì´ëŠ” ê²½ìš°:</strong><br>\n+              ì¸ì‡„ ì˜µì…˜ì—ì„œ \"ê¸°íƒ€ ì„¤ì •\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" ì²´í¬ ë˜ëŠ”<br>\n+              Chrome: \"ë”ë³´ê¸°\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" í™œì„±í™”\n+            </div>\n+          </div>\n+        </div>\n         <div class=\"prescription-container\">\n           <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n           \n           <div class=\"form-row\">\n@@ -763,11 +784,11 @@\n             </div>\n           </div>\n \n           <div class=\"image-section\">\n-            ${generatePointsHTML(formData.bodyImages.front, 'ì •ë©´')}\n-            ${generatePointsHTML(formData.bodyImages.spine, 'ì²™ì¶”')}\n-            ${generatePointsHTML(formData.bodyImages.back, 'í›„ë©´')}\n+            ${generateBodyImageSVG('front', 'ì •ë©´')}\n+            ${generateBodyImageSVG('spine', 'ì²™ì¶”')}\n+            ${generateBodyImageSVG('back', 'í›„ë©´')}\n           </div>\n \n           <div class=\"form-row\">\n             <div class=\"form-group\">\n@@ -1047,32 +1068,38 @@\n           </FormRow>\n \n           {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n           <ImageSection>\n-            <BodyImageCanvas\n-              imageType=\"front\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.front}\n-              onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n-            />\n-            <BodyImageCanvas\n-              imageType=\"spine\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.spine}\n-              onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n-            />\n-            <BodyImageCanvas\n-              imageType=\"back\"\n-              imageUrl=\"\"\n-              points={formData.bodyImages.back}\n-              onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n-              onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n-              onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n-            />\n+            <div data-image-type=\"front\">\n+              <BodyImageCanvas\n+                imageType=\"front\"\n+                imageUrl=\"\"\n+                points={formData.bodyImages.front}\n+                onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n+                onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n+                onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n+              />\n+            </div>\n+            <div data-image-type=\"spine\">\n+              <BodyImageCanvas\n+                imageType=\"spine\"\n+                imageUrl=\"\"\n+                points={formData.bodyImages.spine}\n+                onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n+                onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n+                onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n+              />\n+            </div>\n+            <div data-image-type=\"back\">\n+              <BodyImageCanvas\n+                imageType=\"back\"\n+                imageUrl=\"\"\n+                points={formData.bodyImages.back}\n+                onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n+                onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n+                onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n+              />\n+            </div>\n           </ImageSection>\n \n           {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n           <FormRow>\n"
                },
                {
                    "date": 1762427973072,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -368,13 +368,13 @@\n         return;\n       }\n \n       try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n         const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n         \n         if (prescription) {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n           setCurrentPrescription(prescription);\n           setFormData({\n             height: prescription.height,\n             weight: prescription.weight,\n@@ -384,9 +384,9 @@\n             painHistory: prescription.painHistory,\n             bodyImages: prescription.bodyImages,\n             signatureData: prescription.signatureData || '',\n           });\n-          console.log('ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n         } else {\n           // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n           setCurrentPrescription(null);\n           setFormData({\n@@ -550,32 +550,20 @@\n         signatureData: finalSignatureData,\n         signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n         isActive: true,\n         prescriptionDate: new Date(),\n+        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n+        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n       };\n \n       if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸\n-        await dbManager.exercisePrescription.updateExercisePrescription(\n-          currentPrescription.id,\n-          {\n-            height: formData.height,\n-            weight: formData.weight,\n-            footSize: formData.footSize,\n-            medications: formData.medications,\n-            medicalHistory: formData.medicalHistory,\n-            painHistory: formData.painHistory,\n-            bodyImages: formData.bodyImages,\n-            signatureData: finalSignatureData, // ìµœì¢… ì„œëª… ë°ì´í„° ì‚¬ìš©\n-            isActive: true,\n-            prescriptionDate: new Date(),\n-          }\n-        );\n-        console.log('ìš´ë™ì²˜ë°©ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', currentPrescription.id);\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n         \n-        // ì—…ë°ì´íŠ¸ëœ ì²˜ë°©ì„œ ì •ë³´ ë‹¤ì‹œ ë¡œë“œ\n-        const updatedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(currentPrescription.id);\n-        setCurrentPrescription(updatedPrescription);\n+        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n       } else {\n         // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n         const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n         console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n"
                },
                {
                    "date": 1762429025892,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import React, { useEffect, useState } from 'react';\n+import React, { useEffect, useState, useCallback } from 'react';\n import { useSearchParams } from 'react-router-dom';\n import styled from 'styled-components';\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n@@ -18,26 +18,27 @@\n     background: white;\n   }\n `;\n \n-const SearchPanel = styled.div`\n+const SearchPanel = styled.div<{ $hidden?: boolean }>`\n   width: 300px;\n   background: ${AppColors.surface};\n   border-right: 1px solid ${AppColors.borderLight};\n   padding: 20px;\n   overflow-y: auto;\n+  display: ${props => props.$hidden ? 'none' : 'block'};\n   \n   @media print {\n     display: none;\n   }\n `;\n \n-const ButtonPanel = styled.div`\n+const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n   width: 80px;\n   background: ${AppColors.surface};\n   border-right: 1px solid ${AppColors.borderLight};\n   padding: 20px 10px;\n-  display: flex;\n+  display: ${props => props.$hidden ? 'none' : 'flex'};\n   flex-direction: column;\n   gap: 15px;\n   align-items: center;\n   \n@@ -297,8 +298,9 @@\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -425,18 +427,54 @@\n   const filteredMembers = members.filter(member =>\n     member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n   );\n \n+  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n+    try {\n+      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+      if (prescription) {\n+        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n+        const member = members.find(m => m.id === prescription.memberId);\n+        if (member) {\n+          setSelectedMember(member);\n+        }\n+        \n+        setCurrentPrescription(prescription);\n+        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n+        setFormData({\n+          height: prescription.height,\n+          weight: prescription.weight,\n+          footSize: prescription.footSize,\n+          medications: prescription.medications,\n+          medicalHistory: prescription.medicalHistory,\n+          painHistory: prescription.painHistory,\n+          bodyImages: prescription.bodyImages,\n+          signatureData: prescription.signatureData || '',\n+        });\n+        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n+      }\n+    } catch (error) {\n+      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [members]);\n+\n   useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid ë˜ëŠ” memberId í™•ì¸\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n     const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    if (userIdParam && members.length > 0) {\n+    const prescriptionIdParam = searchParams.get('prescriptionId');\n+    \n+    if (prescriptionIdParam) {\n+      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+      loadSpecificPrescription(prescriptionIdParam);\n+    } else if (userIdParam && members.length > 0) {\n+      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n       const member = members.find(m => m.id === userIdParam);\n       if (member) {\n         setSelectedMember(member);\n       }\n     }\n-  }, [searchParams, members]);\n+  }, [searchParams, members, loadSpecificPrescription]);\n \n   const handleMemberSelect = (member: Member) => {\n     setSelectedMember(member);\n   };\n@@ -905,9 +943,9 @@\n       <ButtonPanel>\n         <ActionButton \n           onClick={handleSave} \n           title=\"ì €ì¥\"\n-          disabled={!hasSignature() && !hasExistingSignature()} // í˜„ì¬ ì„œëª…ì´ ìˆê±°ë‚˜ ê¸°ì¡´ ì„œëª…ì´ ìˆì–´ì•¼ ì €ì¥ ê°€ëŠ¥\n+          disabled={isReadOnly || (!hasSignature() && !hasExistingSignature())} // ì½ê¸° ì „ìš©ì´ê±°ë‚˜ ì„œëª…ì´ ì—†ìœ¼ë©´ ë¹„í™œì„±í™”\n         >\n           <ButtonIcon>ğŸ’¾</ButtonIcon>\n           <ButtonText>ì €ì¥</ButtonText>\n         </ActionButton>\n@@ -953,8 +991,10 @@\n                 type=\"text\"\n                 placeholder=\"í‚¤(cm)\"\n                 value={formData.height}\n                 onChange={(e) => handleInputChange('height', e.target.value)}\n+                readOnly={isReadOnly}\n+                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n               />\n             </FormGroup>\n             <FormGroup>\n               <FormLabel>ì²´ì¤‘</FormLabel>\n@@ -962,8 +1002,10 @@\n                 type=\"text\"\n                 placeholder=\"ì²´ì¤‘(kg)\"\n                 value={formData.weight}\n                 onChange={(e) => handleInputChange('weight', e.target.value)}\n+                readOnly={isReadOnly}\n+                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n               />\n             </FormGroup>\n             <FormGroup>\n               <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n@@ -971,8 +1013,10 @@\n                 type=\"text\"\n                 placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n                 value={formData.footSize}\n                 onChange={(e) => handleInputChange('footSize', e.target.value)}\n+                readOnly={isReadOnly}\n+                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n               />\n             </FormGroup>\n           </FormRow>\n \n@@ -984,9 +1028,10 @@\n                 type=\"text\"\n                 placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n                 value={formData.medications}\n                 onChange={(e) => handleInputChange('medications', e.target.value)}\n-                style={{ flex: 1 }}\n+                style={{ flex: 1, background: isReadOnly ? '#f5f5f5' : 'white' }}\n+                readOnly={isReadOnly}\n               />\n             </FormGroup>\n           </FormRow>\n \n@@ -999,56 +1044,63 @@\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.musculoskeletal}\n                     onChange={(e) => handleCheckboxChange('musculoskeletal', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ê·¼ê³¨ê²©ê³„ì§ˆí™˜\n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.cardiovascular}\n                     onChange={(e) => handleCheckboxChange('cardiovascular', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ì‹¬í˜ˆê´€ê³„ì§ˆí™˜\n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.diabetes}\n                     onChange={(e) => handleCheckboxChange('diabetes', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ë‹¹ë‡¨\n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.osteoporosis}\n                     onChange={(e) => handleCheckboxChange('osteoporosis', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ê³¨ë‹¤ê³µì¦\n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.thyroid}\n                     onChange={(e) => handleCheckboxChange('thyroid', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ê°‘ìƒì„ \n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.varicose}\n                     onChange={(e) => handleCheckboxChange('varicose', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ì •ë§¥ë¥˜\n                 </CheckboxItem>\n                 <CheckboxItem>\n                   <Checkbox\n                     type=\"checkbox\"\n                     checked={formData.medicalHistory.arthritis}\n                     onChange={(e) => handleCheckboxChange('arthritis', e.target.checked)}\n+                    disabled={isReadOnly}\n                   />\n                   ê´€ì ˆì—¼\n                 </CheckboxItem>\n               </CheckboxGroup>\n@@ -1097,8 +1149,10 @@\n                 rows={6}\n                 placeholder=\"í†µì¦ íˆìŠ¤í† ë¦¬, ìˆ˜ìˆ  ì´ë ¥, ìš´ë™ ëª©ì  ë“±ì„ ìƒì„¸íˆ ê¸°ì…í•´ì£¼ì„¸ìš”\"\n                 value={formData.painHistory}\n                 onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+                readOnly={isReadOnly}\n+                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n               />\n             </FormGroup>\n           </FormRow>\n \n"
                },
                {
                    "date": 1764241078695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -620,47 +620,16 @@\n \n   const generatePrescriptionHTML = () => {\n     if (!selectedMember) return '';\n \n-    // ì‹ ì²´ ì´ë¯¸ì§€ SVG ìƒì„± í•¨ìˆ˜\n-    const generateBodyImageSVG = (imageType: 'front' | 'spine' | 'back', title: string) => {\n-      const points = formData.bodyImages[imageType];\n-      \n-      if (points.length === 0) {\n-        return `\n-          <div class=\"image-box\">\n-            <div class=\"image-header\"><strong>${title}</strong></div>\n-            <div class=\"image-content\">\n-              <div class=\"no-points\">ë“±ë¡ëœ í¬ì¸íŠ¸ ì—†ìŒ</div>\n-            </div>\n-          </div>\n-        `;\n-      }\n-\n-      // SVGë¡œ í¬ì¸íŠ¸ë“¤ ìƒì„±\n-      const svgPoints = points.map(point => {\n-        const x = (point.x / 100) * 200; // 200px ê¸°ì¤€\n-        const y = (point.y / 100) * 200; // 200px ê¸°ì¤€\n-        \n-        return `\n-          <circle cx=\"${x}\" cy=\"${y}\" r=\"3\" fill=\"${point.color || '#ff0000'}\" stroke=\"#000\" stroke-width=\"1\"/>\n-          ${point.memo ? `<text x=\"${x}\" y=\"${y - 8}\" font-family=\"Arial\" font-size=\"8\" text-anchor=\"middle\" fill=\"#000\">${point.memo}</text>` : ''}\n-        `;\n-      }).join('');\n-\n-      const svgDataUrl = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(`\n-        <svg width=\"200\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\n-          <rect width=\"200\" height=\"200\" fill=\"#f8f9fa\" stroke=\"#ddd\" stroke-width=\"1\"/>\n-          ${svgPoints}\n-        </svg>\n-      `)}`;\n-\n-      return `\n-        <div class=\"image-box\">\n-          <div class=\"image-header\"><strong>${title}</strong></div>\n-          <img src=\"${svgDataUrl}\" style=\"width: 100%; height: 200px; object-fit: contain; border: 1px solid #ddd; border-radius: 4px;\" />\n-        </div>\n-      `;\n+    // ë‚ ì§œ í¬ë§·íŒ… í•¨ìˆ˜\n+    const formatDate = (dateString: string) => {\n+      if (!dateString) return '';\n+      const date = new Date(dateString);\n+      const year = date.getFullYear();\n+      const month = String(date.getMonth() + 1).padStart(2, '0');\n+      const day = String(date.getDate()).padStart(2, '0');\n+      return `${year}ë…„ ${month}ì›” ${day}ì¼`;\n     };\n \n     return `\n       <!DOCTYPE html>\n@@ -668,83 +637,123 @@\n       <head>\n         <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n         <style>\n           @media print {\n-            body { margin: 0; padding: 20px; }\n+            body { margin: 0; padding: 0; }\n             .no-print { display: none !important; }\n+            .page { \n+              page-break-after: always; \n+              height: 100vh; \n+              display: flex;\n+              flex-direction: column;\n+              padding: 40px;\n+              box-sizing: border-box;\n+            }\n+            .page:last-child { page-break-after: auto; }\n             /* PDF ì¶œë ¥ ìµœì í™” */\n             * {\n               -webkit-print-color-adjust: exact !important;\n               color-adjust: exact !important;\n               print-color-adjust: exact !important;\n             }\n-            .point-marker {\n-              background: var(--point-color) !important;\n-              border: 1px solid #000 !important;\n-              width: 4px !important;\n-              height: 4px !important;\n+          }\n+          \n+          @media screen {\n+            .page {\n+              min-height: 100vh;\n+              padding: 40px;\n+              background: white;\n+              margin-bottom: 20px;\n+              box-shadow: 0 0 10px rgba(0,0,0,0.1);\n             }\n-            .point-memo {\n-              background: #000 !important;\n-              color: #fff !important;\n-              font-size: 6px !important;\n-            }\n           }\n-          body { font-family: Arial, sans-serif; margin: 20px; }\n-          .prescription-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n-          .title { text-align: center; font-size: 24px; font-weight: bold; margin-bottom: 30px; }\n-          .form-row { display: flex; gap: 15px; margin-bottom: 20px; }\n-          .form-group { flex: 1; }\n-          .form-label { display: block; font-weight: 600; margin-bottom: 8px; }\n-          .form-input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }\n-          .checkbox-group { display: flex; flex-wrap: nowrap; gap: 8px; overflow: hidden; }\n-          .checkbox-item { display: flex; align-items: center; gap: 3px; white-space: nowrap; flex-shrink: 0; font-size: 12px; }\n-          .image-section { display: flex; gap: 10px; margin-bottom: 20px; }\n-          .image-box { \n-            flex: 1; \n-            border: 2px solid #ddd; \n-            border-radius: 8px; \n-            padding: 10px;\n-            background: white;\n+          \n+          body { \n+            font-family: 'Malgun Gothic', Arial, sans-serif; \n+            margin: 0; \n+            background: #f5f5f5;\n           }\n-          .image-header {\n+          \n+          .page-header {\n+            display: flex;\n+            justify-content: space-between;\n+            align-items: center;\n+            margin-bottom: 30px;\n+            font-size: 16px;\n+          }\n+          \n+          .member-info {\n+            font-weight: bold;\n+          }\n+          \n+          .page-title {\n             text-align: center;\n+            font-size: 28px;\n             font-weight: bold;\n-            margin-bottom: 8px;\n-            padding-bottom: 5px;\n-            border-bottom: 1px solid #eee;\n+            margin: 40px 0;\n+            color: #333;\n           }\n-          .image-content {\n-            position: relative;\n-            height: 200px;\n-            border: 1px solid #ddd;\n-            background: #f8f9fa;\n-            margin: 5px 0;\n-            border-radius: 4px;\n+          \n+          .spine-image {\n+            display: flex;\n+            justify-content: center;\n+            margin: 40px 0;\n           }\n-          .no-points {\n+          \n+          .spine-image img {\n+            max-height: 400px;\n+            max-width: 300px;\n+          }\n+          \n+          .chief-complaint {\n+            margin: 40px 0;\n+          }\n+          \n+          .chief-complaint-title {\n+            font-size: 18px;\n+            font-weight: bold;\n+            margin-bottom: 15px;\n+            color: #333;\n+          }\n+          \n+          .complaint-text {\n+            min-height: 120px;\n+            padding: 15px;\n+            border: 2px solid #ddd;\n+            border-radius: 8px;\n+            background: #f9f9f9;\n+            line-height: 1.6;\n+            white-space: pre-wrap;\n+          }\n+          \n+          .creation-date {\n             position: absolute;\n-            top: 50%;\n-            left: 50%;\n-            transform: translate(-50%, -50%);\n-            color: #999;\n-            font-size: 12px;\n+            bottom: 40px;\n+            left: 40px;\n+            font-size: 14px;\n+            color: #666;\n           }\n-          .point-marker {\n-            -webkit-print-color-adjust: exact;\n-            color-adjust: exact;\n-            print-color-adjust: exact;\n+          \n+          .muscle-image {\n+            display: flex;\n+            justify-content: center;\n+            margin: 40px 0;\n           }\n-          .point-memo {\n-            -webkit-print-color-adjust: exact;\n-            color-adjust: exact;\n-            print-color-adjust: exact;\n+          \n+          .muscle-image img {\n+            max-height: 500px;\n+            max-width: 400px;\n           }\n-          .consent-section { margin-top: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }\n-          .signature-box { width: 200px; height: 80px; border: 1px solid #ddd; border-radius: 6px; background: white; }\n-          .date-area { text-align: right; }\n-          textarea { resize: vertical; height: 100px; }\n-          .print-button { margin: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n+          \n+          .print-button { \n+            margin: 20px; \n+            padding: 10px 20px; \n+            background: #007bff; \n+            color: white; \n+            border: none; \n+            border-radius: 5px; \n+            cursor: pointer; \n+          }\n         </style>\n       </head>\n       <body>\n         <div class=\"no-print\" style=\"margin: 20px; padding: 15px; background: #f0f8ff; border: 1px solid #007bff; border-radius: 5px;\">\n@@ -756,117 +765,63 @@\n               Chrome: \"ë”ë³´ê¸°\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" í™œì„±í™”\n             </div>\n           </div>\n         </div>\n-        <div class=\"prescription-container\">\n-          <h1 class=\"title\">ìš´ë™ì²˜ë°©ì„œ</h1>\n-          \n-          <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ì„±ëª…</label>\n-              <input class=\"form-input\" value=\"${selectedMember.name}\" readonly>\n+        \n+        <!-- 1í˜ì´ì§€: SPINE Mapping Chart -->\n+        <div class=\"page\">\n+          <div class=\"page-header\">\n+            <div class=\"member-info\">\n+              ì„±ëª…: ${selectedMember.name} &nbsp;&nbsp; \n+              ìƒë…„ì›”ì¼: ${formatDate(selectedMember.birth)} &nbsp;&nbsp; \n+              ì‹ ì¥: ${formData.height}cm\n             </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ìƒë…„ì›”ì¼</label>\n-              <input class=\"form-input\" value=\"${selectedMember.birth}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">í‚¤</label>\n-              <input class=\"form-input\" value=\"${formData.height}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ì²´ì¤‘</label>\n-              <input class=\"form-input\" value=\"${formData.weight}\" readonly>\n-            </div>\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ë°œì‚¬ì´ì¦ˆ</label>\n-              <input class=\"form-input\" value=\"${formData.footSize}\" readonly>\n-            </div>\n           </div>\n-\n-          <div class=\"form-row\">\n-            <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 15px;\">\n-              <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0;\">ë³µìš©ì¤‘ì¸ ì•½</label>\n-              <input class=\"form-input\" value=\"${formData.medications}\" readonly style=\"flex: 1;\">\n-            </div>\n+          \n+          <div class=\"page-title\">SPINE Mapping Chart</div>\n+          \n+          <div class=\"spine-image\">\n+            <img src=\"/cms/bone.svg\" alt=\"ì²™ì¶” ì´ë¯¸ì§€\" />\n           </div>\n-\n-          <div class=\"form-row\">\n-            <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 15px;\">\n-              <label class=\"form-label\" style=\"margin-bottom: 0; min-width: 120px; flex-shrink: 0;\">ë³‘ë ¥ì‚¬í•­</label>\n-              <div style=\"flex: 1; display: flex; flex-wrap: nowrap; gap: 8px; overflow: hidden;\">\n-                ${Object.entries(formData.medicalHistory).map(([key, value]) => {\n-                  const labels: { [key: string]: string } = {\n-                    musculoskeletal: 'ê·¼ê³¨ê²©ê³„ì§ˆí™˜',\n-                    cardiovascular: 'ì‹¬í˜ˆê´€ê³„ì§ˆí™˜',\n-                    diabetes: 'ë‹¹ë‡¨',\n-                    osteoporosis: 'ê³¨ë‹¤ê³µì¦',\n-                    thyroid: 'ê°‘ìƒì„ ',\n-                    varicose: 'ì •ë§¥ë¥˜',\n-                    arthritis: 'ê´€ì ˆì—¼'\n-                  };\n-                  return `<label style=\"display: flex; align-items: center; gap: 3px; white-space: nowrap; flex-shrink: 0; font-size: 12px;\"><input type=\"checkbox\" ${value ? 'checked' : ''} disabled style=\"margin: 0;\"> ${labels[key]}</label>`;\n-                }).join('')}\n-              </div>\n-            </div>\n+          \n+          <div class=\"chief-complaint\">\n+            <div class=\"chief-complaint-title\">ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n+            <div class=\"complaint-text\">${formData.painHistory || ''}</div>\n           </div>\n-\n-          <div class=\"image-section\">\n-            ${generateBodyImageSVG('front', 'ì •ë©´')}\n-            ${generateBodyImageSVG('spine', 'ì²™ì¶”')}\n-            ${generateBodyImageSVG('back', 'í›„ë©´')}\n+          \n+          <div class=\"creation-date\">\n+            ìµœì´ˆ ì‘ì„±ì¼ : ${currentPrescription?.createdAt \n+              ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n+              : new Date().toISOString().split('T')[0]\n+            }\n           </div>\n-\n-          <div class=\"form-row\">\n-            <div class=\"form-group\">\n-              <label class=\"form-label\">ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </label>\n-              <textarea class=\"form-input\" readonly>${formData.painHistory}</textarea>\n-            </div>\n+        </div>\n+        \n+        <!-- 2í˜ì´ì§€: Target Muscles List (Front) -->\n+        <div class=\"page\">\n+          <div class=\"page-header\">\n+            <div class=\"member-info\">${selectedMember.name}</div>\n           </div>\n-\n-          <div class=\"consent-section\">\n-            <p>ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n-            ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.</p>\n-            \n-            <div style=\"display: flex; gap: 20px; align-items: flex-start;\">\n-              <div style=\"flex: 0 0 auto; min-width: 300px;\">\n-                <div style=\"margin-bottom: 10px; text-align: center;\">\n-                  <div style=\"font-size: 12px; color: ${hasExistingSignature() ? '#28a745' : '#666'};\">\n-                    ${hasExistingSignature() ? 'âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)' : 'ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤'}\n-                  </div>\n-                </div>\n-                <div style=\"padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd;\">\n-                  <div style=\"display: flex; justify-content: space-between;\">\n-                    <div style=\"text-align: center;\">\n-                      <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ì„œëª… ë‚ ì§œ</div>\n-                      <div style=\"font-size: 14px; color: #000;\">\n-                        ${currentPrescription?.signedAt \n-                          ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                          : hasSignature() \n-                            ? new Date().toLocaleDateString('ko-KR') \n-                            : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                        }\n-                      </div>\n-                    </div>\n-                    <div style=\"text-align: center;\">\n-                      <div style=\"font-size: 12px; color: #666; font-weight: 600; margin-bottom: 5px;\">ìµœê·¼ ì—…ë°ì´íŠ¸</div>\n-                      <div style=\"font-size: 14px; color: #000;\">\n-                        ${currentPrescription?.updatedAt \n-                          ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                          : new Date().toLocaleDateString('ko-KR')\n-                        }\n-                      </div>\n-                    </div>\n-                  </div>\n-                </div>\n-              </div>\n-              \n-              <div style=\"flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;\">\n-                ${formData.signatureData ? `<img src=\"${formData.signatureData}\" style=\"max-width: 250px; max-height: 100px; border: 1px solid #ddd; border-radius: 6px;\">` : '<div style=\"width: 250px; height: 100px; border: 1px solid #ddd; border-radius: 6px; background: white; display: flex; align-items: center; justify-content: center; color: #999;\">ì„œëª… ì—†ìŒ</div>'}\n-              </div>\n-            </div>\n+          \n+          <div class=\"page-title\">Target Muscles List</div>\n+          \n+          <div class=\"muscle-image\">\n+            <img src=\"/cms/front.png\" alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" />\n           </div>\n         </div>\n+        \n+        <!-- 3í˜ì´ì§€: Target Muscles List (Back) -->\n+        <div class=\"page\">\n+          <div class=\"page-header\">\n+            <div class=\"member-info\">${selectedMember.name}</div>\n+          </div>\n+          \n+          <div class=\"page-title\">Target Muscles List</div>\n+          \n+          <div class=\"muscle-image\">\n+            <img src=\"/cms/back.png\" alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" />\n+          </div>\n+        </div>\n       </body>\n       </html>\n     `;\n   };\n"
                },
                {
                    "date": 1764241261848,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,10 +4,8 @@\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n-import BodyImageCanvas from '../components/BodyImageCanvas';\n-import SignatureCanvas from '../components/SignatureCanvas';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -168,41 +166,16 @@\n   margin-bottom: 30px;\n   color: ${AppColors.onBackground};\n `;\n \n-const FormRow = styled.div`\n-  display: flex;\n-  gap: 15px;\n-  margin-bottom: 20px;\n-  align-items: flex-start;\n-`;\n-\n-const FormGroup = styled.div`\n-  flex: 1;\n-`;\n-\n const FormLabel = styled.label`\n   display: block;\n   font-size: ${AppTextStyles.label1.fontSize};\n   font-weight: 600;\n   color: ${AppColors.onBackground};\n   margin-bottom: 8px;\n `;\n \n-const FormInput = styled.input`\n-  width: 100%;\n-  padding: 10px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  box-sizing: border-box;\n-  \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n const FormTextarea = styled.textarea`\n   width: 100%;\n   padding: 10px;\n   border: 1px solid ${AppColors.borderLight};\n@@ -216,91 +189,18 @@\n     border-color: ${AppColors.primary};\n   }\n `;\n \n-const CheckboxGroup = styled.div`\n-  display: flex;\n-  flex-wrap: wrap;\n-  gap: 10px;\n-`;\n \n-const CheckboxItem = styled.label`\n-  display: flex;\n-  align-items: center;\n-  gap: 4px;\n-  cursor: pointer;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-`;\n \n-const Checkbox = styled.input`\n-  margin: 0;\n-`;\n-\n-const ImageSection = styled.div`\n-  display: flex;\n-  gap: 10px;\n-  margin-bottom: 20px;\n-`;\n-\n-const ConsentSection = styled.div`\n-  margin-top: 20px;\n-  padding: 20px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  background: #f9f9f9;\n-`;\n-\n-const ConsentText = styled.p`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  line-height: 1.6;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const DateRow = styled.div`\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-  margin-top: 20px;\n-  padding: 15px;\n-  background: #f8f9fa;\n-  border-radius: 8px;\n-  border: 1px solid ${AppColors.borderLight};\n-`;\n-\n-const DateItem = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  align-items: center;\n-  gap: 5px;\n-`;\n-\n-const DateLabel = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-  font-weight: 600;\n-`;\n-\n-const DateValue = styled.div`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onBackground};\n-`;\n-\n-const SignatureNote = styled.div`\n-  margin-top: 8px;\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-  text-align: center;\n-  font-style: italic;\n-`;\n-\n const ExercisePrescriptionPage: React.FC = () => {\n   const [searchParams] = useSearchParams();\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n+  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -485,96 +385,18 @@\n       [field]: value,\n     }));\n   };\n \n-  const handleCheckboxChange = (field: string, checked: boolean) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      medicalHistory: {\n-        ...prev.medicalHistory,\n-        [field]: checked,\n-      },\n-    }));\n-  };\n \n-  // ì„œëª… ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleSignatureChange = (dataUrl: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      signatureData: dataUrl,\n-    }));\n-  };\n \n-  // ì„œëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜\n-  const hasSignature = () => {\n-    return formData.signatureData && formData.signatureData.trim() !== '';\n-  };\n-\n-  // ê¸°ì¡´ ì„œëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ (DBì— ì €ì¥ëœ ì„œëª…)\n-  const hasExistingSignature = (): boolean => {\n-    return !!(currentPrescription?.signedAt && currentPrescription?.signatureData && currentPrescription.signatureData.trim() !== '');\n-  };\n-\n-  // ì‹ ì²´ ì´ë¯¸ì§€ í¬ì¸íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n-  const handleAddBodyImagePoint = (imageType: 'front' | 'spine' | 'back', point: Omit<BodyImagePoint, 'id'>) => {\n-    const newPoint: BodyImagePoint = {\n-      ...point,\n-      id: `${Date.now()}_${Math.random().toString(36).substr(2, 9)}`, // ì„ì‹œ ID ìƒì„±\n-    };\n-\n-    setFormData(prev => ({\n-      ...prev,\n-      bodyImages: {\n-        ...prev.bodyImages,\n-        [imageType]: [...prev.bodyImages[imageType], newPoint],\n-      },\n-    }));\n-  };\n-\n-  const handleUpdateBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string, updates: Partial<Omit<BodyImagePoint, 'id'>>) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      bodyImages: {\n-        ...prev.bodyImages,\n-        [imageType]: prev.bodyImages[imageType].map(point =>\n-          point.id === pointId ? { ...point, ...updates } : point\n-        ),\n-      },\n-    }));\n-  };\n-\n-  const handleDeleteBodyImagePoint = (imageType: 'front' | 'spine' | 'back', pointId: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      bodyImages: {\n-        ...prev.bodyImages,\n-        [imageType]: prev.bodyImages[imageType].filter(point => point.id !== pointId),\n-      },\n-    }));\n-  };\n-\n   const handleSave = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n \n-    // ì„œëª… ê²€ì¦: ìƒˆ ì²˜ë°©ì„œëŠ” ì„œëª… í•„ìˆ˜, ê¸°ì¡´ ì²˜ë°©ì„œëŠ” ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ OK\n-    if (!currentPrescription && !hasSignature()) {\n-      alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-    \n-    if (currentPrescription && !hasExistingSignature() && !hasSignature()) {\n-      alert('ì„œëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì„œëª…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-    \n     try {\n-      // ì„œëª… ë°ì´í„° ê²°ì •: ê¸°ì¡´ ì„œëª…ì´ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì„œëª… ì‚¬ìš©\n-      const finalSignatureData = hasExistingSignature() \n-        ? currentPrescription!.signatureData \n-        : formData.signatureData;\n+      const finalSignatureData = formData.signatureData;\n       \n       const prescriptionData = {\n         memberId: selectedMember.id,\n         memberName: selectedMember.name,\n@@ -898,9 +720,9 @@\n       <ButtonPanel>\n         <ActionButton \n           onClick={handleSave} \n           title=\"ì €ì¥\"\n-          disabled={isReadOnly || (!hasSignature() && !hasExistingSignature())} // ì½ê¸° ì „ìš©ì´ê±°ë‚˜ ì„œëª…ì´ ì—†ìœ¼ë©´ ë¹„í™œì„±í™”\n+          disabled={isReadOnly} // ì½ê¸° ì „ìš©ì´ë©´ ë¹„í™œì„±í™”\n         >\n           <ButtonIcon>ğŸ’¾</ButtonIcon>\n           <ButtonText>ì €ì¥</ButtonText>\n         </ActionButton>\n@@ -916,264 +738,210 @@\n         </ActionButton>\n       </ButtonPanel>\n \n       <PrescriptionPanel>\n+        {/* í˜ì´ì§€ ë‚´ë¹„ê²Œì´ì…˜ */}\n+        <div style={{ \n+          display: 'flex', \n+          justifyContent: 'center', \n+          alignItems: 'center',\n+          gap: '20px',\n+          padding: '20px',\n+          background: 'white',\n+          boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n+          marginBottom: '20px'\n+        }}>\n+          <button \n+            onClick={() => setCurrentPage(1)}\n+            style={{\n+              padding: '10px 20px',\n+              border: currentPage === 1 ? '2px solid #007bff' : '1px solid #ddd',\n+              borderRadius: '6px',\n+              background: currentPage === 1 ? '#007bff' : 'white',\n+              color: currentPage === 1 ? 'white' : '#333',\n+              cursor: 'pointer',\n+              fontWeight: currentPage === 1 ? 'bold' : 'normal'\n+            }}\n+          >\n+            1. SPINE Mapping Chart\n+          </button>\n+          <button \n+            onClick={() => setCurrentPage(2)}\n+            style={{\n+              padding: '10px 20px',\n+              border: currentPage === 2 ? '2px solid #007bff' : '1px solid #ddd',\n+              borderRadius: '6px',\n+              background: currentPage === 2 ? '#007bff' : 'white',\n+              color: currentPage === 2 ? 'white' : '#333',\n+              cursor: 'pointer',\n+              fontWeight: currentPage === 2 ? 'bold' : 'normal'\n+            }}\n+          >\n+            2. Target Muscles (Front)\n+          </button>\n+          <button \n+            onClick={() => setCurrentPage(3)}\n+            style={{\n+              padding: '10px 20px',\n+              border: currentPage === 3 ? '2px solid #007bff' : '1px solid #ddd',\n+              borderRadius: '6px',\n+              background: currentPage === 3 ? '#007bff' : 'white',\n+              color: currentPage === 3 ? 'white' : '#333',\n+              cursor: 'pointer',\n+              fontWeight: currentPage === 3 ? 'bold' : 'normal'\n+            }}\n+          >\n+            3. Target Muscles (Back)\n+          </button>\n+        </div>\n+\n         <PrescriptionContainer>\n-          <PrescriptionTitle>ìš´ë™ì²˜ë°©ì„œ</PrescriptionTitle>\n-          \n-          {/* ê¸°ë³¸ ì •ë³´ */}\n-          <FormRow>\n-            <FormGroup>\n-              <FormLabel>ì„±ëª…</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                value={selectedMember?.name || ''}\n-                readOnly\n-                style={{ background: '#f5f5f5' }}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>ìƒë…„ì›”ì¼</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                value={selectedMember?.birth || ''}\n-                readOnly\n-                style={{ background: '#f5f5f5' }}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>í‚¤</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"í‚¤(cm)\"\n-                value={formData.height}\n-                onChange={(e) => handleInputChange('height', e.target.value)}\n-                readOnly={isReadOnly}\n-                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>ì²´ì¤‘</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"ì²´ì¤‘(kg)\"\n-                value={formData.weight}\n-                onChange={(e) => handleInputChange('weight', e.target.value)}\n-                readOnly={isReadOnly}\n-                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n-              />\n-            </FormGroup>\n-            <FormGroup>\n-              <FormLabel>ë°œì‚¬ì´ì¦ˆ</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"ë°œì‚¬ì´ì¦ˆ\"\n-                value={formData.footSize}\n-                onChange={(e) => handleInputChange('footSize', e.target.value)}\n-                readOnly={isReadOnly}\n-                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n-              />\n-            </FormGroup>\n-          </FormRow>\n+          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n+          {currentPage === 1 && (\n+            <>\n+              {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n+              <div style={{ \n+                display: 'flex', \n+                alignItems: 'center', \n+                gap: '20px', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n+                <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n+                  year: 'numeric',\n+                  month: 'long', \n+                  day: 'numeric'\n+                }) : ''}</span>\n+                <span>ì‹ ì¥: {formData.height}cm</span>\n+              </div>\n \n-          {/* ë³µìš©ì¤‘ì¸ ì•½ - ë¼ë²¨ê³¼ ì…ë ¥ë€ì„ ê°™ì€ í–‰ì— ë°°ì¹˜ */}\n-          <FormRow>\n-            <FormGroup style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n-              <FormLabel style={{ marginBottom: '0', minWidth: '120px', flexShrink: 0 }}>ë³µìš©ì¤‘ì¸ ì•½</FormLabel>\n-              <FormInput\n-                type=\"text\"\n-                placeholder=\"ë³µìš©ì¤‘ì¸ ì•½ë¬¼ì„ ì…ë ¥í•˜ì„¸ìš”\"\n-                value={formData.medications}\n-                onChange={(e) => handleInputChange('medications', e.target.value)}\n-                style={{ flex: 1, background: isReadOnly ? '#f5f5f5' : 'white' }}\n-                readOnly={isReadOnly}\n-              />\n-            </FormGroup>\n-          </FormRow>\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <PrescriptionTitle>SPINE Mapping Chart</PrescriptionTitle>\n+              \n+              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                margin: '40px 0' \n+              }}>\n+                <img \n+                  src=\"/cms/bone.svg\" \n+                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n+                  style={{ \n+                    maxHeight: '400px', \n+                    maxWidth: '300px' \n+                  }} \n+                />\n+              </div>\n \n-          {/* ë³‘ë ¥ì‚¬í•­ - ë¼ë²¨ê³¼ ì²´í¬ë°•ìŠ¤ë¥¼ ê°™ì€ í–‰ì— ë°°ì¹˜ */}\n-          <FormRow>\n-            <FormGroup style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n-              <FormLabel style={{ marginBottom: '0', minWidth: '120px', flexShrink: 0 }}>ë³‘ë ¥ì‚¬í•­</FormLabel>\n-              <CheckboxGroup style={{ flex: 1 }}>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.musculoskeletal}\n-                    onChange={(e) => handleCheckboxChange('musculoskeletal', e.target.checked)}\n-                    disabled={isReadOnly}\n-                  />\n-                  ê·¼ê³¨ê²©ê³„ì§ˆí™˜\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.cardiovascular}\n-                    onChange={(e) => handleCheckboxChange('cardiovascular', e.target.checked)}\n-                    disabled={isReadOnly}\n-                  />\n-                  ì‹¬í˜ˆê´€ê³„ì§ˆí™˜\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.diabetes}\n-                    onChange={(e) => handleCheckboxChange('diabetes', e.target.checked)}\n-                    disabled={isReadOnly}\n-                  />\n-                  ë‹¹ë‡¨\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.osteoporosis}\n-                    onChange={(e) => handleCheckboxChange('osteoporosis', e.target.checked)}\n-                    disabled={isReadOnly}\n-                  />\n-                  ê³¨ë‹¤ê³µì¦\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.thyroid}\n-                    onChange={(e) => handleCheckboxChange('thyroid', e.target.checked)}\n-                    disabled={isReadOnly}\n-                  />\n-                  ê°‘ìƒì„ \n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.varicose}\n-                    onChange={(e) => handleCheckboxChange('varicose', e.target.checked)}\n-                    disabled={isReadOnly}\n-                  />\n-                  ì •ë§¥ë¥˜\n-                </CheckboxItem>\n-                <CheckboxItem>\n-                  <Checkbox\n-                    type=\"checkbox\"\n-                    checked={formData.medicalHistory.arthritis}\n-                    onChange={(e) => handleCheckboxChange('arthritis', e.target.checked)}\n-                    disabled={isReadOnly}\n-                  />\n-                  ê´€ì ˆì—¼\n-                </CheckboxItem>\n-              </CheckboxGroup>\n-            </FormGroup>\n-          </FormRow>\n+              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n+              <div style={{ margin: '40px 0' }}>\n+                <FormLabel style={{ \n+                  fontSize: '18px', \n+                  fontWeight: 'bold', \n+                  marginBottom: '15px', \n+                  display: 'block'\n+                }}>\n+                  ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n+                </FormLabel>\n+                <FormTextarea\n+                  rows={8}\n+                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n+                  value={formData.painHistory}\n+                  onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+                  readOnly={isReadOnly}\n+                  style={{ \n+                    background: isReadOnly ? '#f5f5f5' : 'white',\n+                    minHeight: '120px'\n+                  }}\n+                />\n+              </div>\n \n-          {/* ì´ë¯¸ì§€ ì˜ì—­ */}\n-          <ImageSection>\n-            <div data-image-type=\"front\">\n-              <BodyImageCanvas\n-                imageType=\"front\"\n-                imageUrl=\"\"\n-                points={formData.bodyImages.front}\n-                onAddPoint={(point) => handleAddBodyImagePoint('front', point)}\n-                onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('front', pointId, updates)}\n-                onDeletePoint={(pointId) => handleDeleteBodyImagePoint('front', pointId)}\n-              />\n-            </div>\n-            <div data-image-type=\"spine\">\n-              <BodyImageCanvas\n-                imageType=\"spine\"\n-                imageUrl=\"\"\n-                points={formData.bodyImages.spine}\n-                onAddPoint={(point) => handleAddBodyImagePoint('spine', point)}\n-                onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('spine', pointId, updates)}\n-                onDeletePoint={(pointId) => handleDeleteBodyImagePoint('spine', pointId)}\n-              />\n-            </div>\n-            <div data-image-type=\"back\">\n-              <BodyImageCanvas\n-                imageType=\"back\"\n-                imageUrl=\"\"\n-                points={formData.bodyImages.back}\n-                onAddPoint={(point) => handleAddBodyImagePoint('back', point)}\n-                onUpdatePoint={(pointId, updates) => handleUpdateBodyImagePoint('back', pointId, updates)}\n-                onDeletePoint={(pointId) => handleDeleteBodyImagePoint('back', pointId)}\n-              />\n-            </div>\n-          </ImageSection>\n+              {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n+              <div style={{ \n+                position: 'absolute', \n+                bottom: '40px', \n+                left: '40px', \n+                fontSize: '14px', \n+                color: '#666' \n+              }}>\n+                ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n+                  ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n+                  : new Date().toISOString().split('T')[0]\n+                }\n+              </div>\n+            </>\n+          )}\n \n-          {/* í†µì¦ íˆìŠ¤í† ë¦¬ ë° ìš´ë™ëª©ì  */}\n-          <FormRow>\n-            <FormGroup>\n-              <FormLabel>ì‹œìˆ , ìˆ˜ìˆ  ë“± í†µì¦ íˆìŠ¤í† ë¦¬ ë° ì½”ë©˜íŠ¸/ìš´ë™ëª©ì </FormLabel>\n-              <FormTextarea\n-                rows={6}\n-                placeholder=\"í†µì¦ íˆìŠ¤í† ë¦¬, ìˆ˜ìˆ  ì´ë ¥, ìš´ë™ ëª©ì  ë“±ì„ ìƒì„¸íˆ ê¸°ì…í•´ì£¼ì„¸ìš”\"\n-                value={formData.painHistory}\n-                onChange={(e) => handleInputChange('painHistory', e.target.value)}\n-                readOnly={isReadOnly}\n-                style={{ background: isReadOnly ? '#f5f5f5' : 'white' }}\n-              />\n-            </FormGroup>\n-          </FormRow>\n+          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n+          {currentPage === 2 && (\n+            <>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n \n-          {/* ë™ì˜ì„œ */}\n-          <ConsentSection>\n-            <ConsentText>\n-              ë¼ë¹„ë‹¤ ìŠ¤í¬ì¸ ë©”ë””ì»¬ì—ì„œ ì œê³µí•˜ëŠ” WBM í”„ë¡œê·¸ë¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ íšŒì›ë‹˜ ì‚¬ì „ ê±´ê°• ì •ë³´ ì‘ì„±ì— ë™ì˜í•˜ë©°, \n-              ë³¸ ìƒë‹´ì§€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ë³‘ë ¥ ë° ê¸°íƒ€ ì›ì¸ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¬¸ì œì— ëŒ€í•´ì„œëŠ” ë‹¹ì‚¬ëŠ” ì¼ì²´ì˜ ì±…ì„ì´ ì—†ìŒì„ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤.\n-            </ConsentText>\n-            \n-            {/* ì„œëª… ì˜ì—­ê³¼ ë‚ ì§œ ì •ë³´ë¥¼ í•˜ë‚˜ì˜ í–‰ìœ¼ë¡œ ë°°ì¹˜ */}\n-            <div style={{ display: 'flex', gap: '20px', alignItems: 'flex-start' }}>\n-              {/* ë‚ ì§œ ì •ë³´ ì¹´ë“œ - ì™¼ìª½ */}\n-              <div style={{ flex: '0 0 auto', minWidth: '300px' }}>\n-                {/* ì„œëª… ì•ˆë‚´ í…ìŠ¤íŠ¸ */}\n-                <div style={{ marginBottom: '10px', textAlign: 'center' }}>\n-                  {hasExistingSignature() && (\n-                    <SignatureNote style={{ margin: '0', fontSize: '12px', color: '#28a745' }}>\n-                      âœ“ ì„œëª…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ (ìˆ˜ì • ë¶ˆê°€)\n-                    </SignatureNote>\n-                  )}\n-                  {!hasExistingSignature() && (\n-                    <SignatureNote style={{ margin: '0', fontSize: '12px' }}>\n-                      ì„œëª… í›„ ì €ì¥í•˜ì‹œë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\n-                    </SignatureNote>\n-                  )}\n-                </div>\n-                {/* ë‚ ì§œ ì¹´ë“œ */}\n-                <DateRow style={{ margin: '0' }}>\n-                  <DateItem>\n-                    <DateLabel>ì„œëª… ë‚ ì§œ</DateLabel>\n-                    <DateValue>\n-                      {currentPrescription?.signedAt \n-                        ? new Date(currentPrescription.signedAt).toLocaleDateString('ko-KR')\n-                        : hasSignature() \n-                          ? new Date().toLocaleDateString('ko-KR') \n-                          : 'ì„œëª… í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                      }\n-                    </DateValue>\n-                  </DateItem>\n-                  <DateItem>\n-                    <DateLabel>ìµœê·¼ ì—…ë°ì´íŠ¸</DateLabel>\n-                    <DateValue>\n-                      {currentPrescription?.updatedAt \n-                        ? new Date(currentPrescription.updatedAt).toLocaleDateString('ko-KR')\n-                        : 'ì €ì¥ í›„ í‘œì‹œë©ë‹ˆë‹¤'\n-                      }\n-                    </DateValue>\n-                  </DateItem>\n-                </DateRow>\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <PrescriptionTitle>Target Muscles List</PrescriptionTitle>\n+              \n+              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                margin: '40px 0' \n+              }}>\n+                <img \n+                  src=\"/cms/front.png\" \n+                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '500px', \n+                    maxWidth: '400px' \n+                  }} \n+                />\n               </div>\n+            </>\n+          )}\n \n-              {/* ì„œëª… ì˜ì—­ - ì˜¤ë¥¸ìª½ */}\n-              <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>\n-                <SignatureCanvas\n-                  key={selectedMember?.id || 'no-member'}\n-                  width={250}\n-                  height={100}\n-                  onSignatureChange={handleSignatureChange}\n-                  initialSignature={formData.signatureData}\n-                  readonly={hasExistingSignature()}\n+          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n+          {currentPage === 3 && (\n+            <>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <PrescriptionTitle>Target Muscles List</PrescriptionTitle>\n+              \n+              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                margin: '40px 0' \n+              }}>\n+                <img \n+                  src=\"/cms/back.png\" \n+                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '500px', \n+                    maxWidth: '400px' \n+                  }} \n                 />\n               </div>\n-            </div>\n-          </ConsentSection>\n+            </>\n+          )}\n         </PrescriptionContainer>\n       </PrescriptionPanel>\n     </PageContainer>\n   );\n"
                },
                {
                    "date": 1764241304173,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -601,9 +601,9 @@\n           \n           <div class=\"page-title\">SPINE Mapping Chart</div>\n           \n           <div class=\"spine-image\">\n-            <img src=\"/cms/bone.svg\" alt=\"ì²™ì¶” ì´ë¯¸ì§€\" />\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/bone.svg\" alt=\"ì²™ì¶” ì´ë¯¸ì§€\" />\n           </div>\n           \n           <div class=\"chief-complaint\">\n             <div class=\"chief-complaint-title\">ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n@@ -626,9 +626,9 @@\n           \n           <div class=\"page-title\">Target Muscles List</div>\n           \n           <div class=\"muscle-image\">\n-            <img src=\"/cms/front.png\" alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" />\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/front.png\" alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" />\n           </div>\n         </div>\n         \n         <!-- 3í˜ì´ì§€: Target Muscles List (Back) -->\n@@ -639,9 +639,9 @@\n           \n           <div class=\"page-title\">Target Muscles List</div>\n           \n           <div class=\"muscle-image\">\n-            <img src=\"/cms/back.png\" alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" />\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/back.png\" alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" />\n           </div>\n         </div>\n       </body>\n       </html>\n@@ -825,9 +825,9 @@\n                 justifyContent: 'center', \n                 margin: '40px 0' \n               }}>\n                 <img \n-                  src=\"/cms/bone.svg\" \n+                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n                   alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n                   style={{ \n                     maxHeight: '400px', \n                     maxWidth: '300px' \n@@ -896,9 +896,9 @@\n                 justifyContent: 'center', \n                 margin: '40px 0' \n               }}>\n                 <img \n-                  src=\"/cms/front.png\" \n+                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n                   alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n                   style={{ \n                     maxHeight: '500px', \n                     maxWidth: '400px' \n@@ -930,9 +930,9 @@\n                 justifyContent: 'center', \n                 margin: '40px 0' \n               }}>\n                 <img \n-                  src=\"/cms/back.png\" \n+                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n                   alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n                   style={{ \n                     maxHeight: '500px', \n                     maxWidth: '400px' \n"
                },
                {
                    "date": 1764241354542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -859,11 +859,10 @@\n               </div>\n \n               {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n               <div style={{ \n-                position: 'absolute', \n-                bottom: '40px', \n-                left: '40px', \n+                marginTop: '60px',\n+                textAlign: 'left', \n                 fontSize: '14px', \n                 color: '#666' \n               }}>\n                 ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n"
                },
                {
                    "date": 1764241528165,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,59 +30,67 @@\n   }\n `;\n \n const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n-  width: 80px;\n+  width: 55px;\n   background: ${AppColors.surface};\n   border-right: 1px solid ${AppColors.borderLight};\n-  padding: 20px 10px;\n+  padding: 10px 2px;\n   display: ${props => props.$hidden ? 'none' : 'flex'};\n   flex-direction: column;\n-  gap: 15px;\n-  align-items: center;\n+  gap: 6px;\n+  align-items: stretch;\n   \n   @media print {\n     display: none;\n   }\n `;\n \n const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 60px;\n-  height: 60px;\n+  width: 100%;\n+  height: 36px;\n   border: none;\n-  border-radius: 12px;\n+  border-radius: 6px;\n   background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n   color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: ${AppTextStyles.label2.fontSize};\n+  font-size: 16px;\n   font-weight: 600;\n   cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n   display: flex;\n-  flex-direction: column;\n   align-items: center;\n   justify-content: center;\n-  gap: 4px;\n   transition: all 0.2s ease;\n   \n   &:hover {\n     background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-    transform: ${props => props.disabled ? 'none' : 'translateY(-2px)'};\n   }\n+`;\n+\n+const PageButton = styled.button<{ active?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.active ? AppColors.primary : 'white'};\n+  color: ${props => props.active ? 'white' : '#333'};\n+  font-size: 14px;\n+  font-weight: ${props => props.active ? 'bold' : 'normal'};\n+  cursor: pointer;\n+  transition: all 0.2s ease;\n   \n-  &:active {\n-    transform: ${props => props.disabled ? 'none' : 'translateY(0)'};\n+  &:hover {\n+    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n   }\n `;\n \n-const ButtonIcon = styled.div`\n-  font-size: 20px;\n-  line-height: 1;\n+const Divider = styled.div`\n+  height: 1px;\n+  background: ${AppColors.borderLight};\n+  margin: 10px 0;\n `;\n \n-const ButtonText = styled.div`\n-  font-size: 10px;\n-  line-height: 1;\n-`;\n \n+\n const SearchTitle = styled.h2`\n   font-size: ${AppTextStyles.title2.fontSize};\n   font-weight: 600;\n   color: ${AppColors.onBackground};\n@@ -720,81 +728,48 @@\n       <ButtonPanel>\n         <ActionButton \n           onClick={handleSave} \n           title=\"ì €ì¥\"\n-          disabled={isReadOnly} // ì½ê¸° ì „ìš©ì´ë©´ ë¹„í™œì„±í™”\n+          disabled={isReadOnly}\n         >\n-          <ButtonIcon>ğŸ’¾</ButtonIcon>\n-          <ButtonText>ì €ì¥</ButtonText>\n+          ğŸ’¾\n         </ActionButton>\n         \n         <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          <ButtonIcon>ğŸ“¤</ButtonIcon>\n-          <ButtonText>ê³µìœ </ButtonText>\n+          ğŸ“¤\n         </ActionButton>\n         \n         <ActionButton onClick={handlePrint} title=\"ì¶œë ¥\">\n-          <ButtonIcon>ğŸ–¨ï¸</ButtonIcon>\n-          <ButtonText>ì¶œë ¥</ButtonText>\n+          ğŸ–¨ï¸\n         </ActionButton>\n+        \n+        <Divider />\n+        \n+        <PageButton \n+          active={currentPage === 1}\n+          onClick={() => setCurrentPage(1)}\n+        >\n+          1\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 2}\n+          onClick={() => setCurrentPage(2)}\n+        >\n+          2\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 3}\n+          onClick={() => setCurrentPage(3)}\n+        >\n+          3\n+        </PageButton>\n       </ButtonPanel>\n \n       <PrescriptionPanel>\n-        {/* í˜ì´ì§€ ë‚´ë¹„ê²Œì´ì…˜ */}\n-        <div style={{ \n-          display: 'flex', \n-          justifyContent: 'center', \n-          alignItems: 'center',\n-          gap: '20px',\n-          padding: '20px',\n-          background: 'white',\n-          boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n-          marginBottom: '20px'\n-        }}>\n-          <button \n-            onClick={() => setCurrentPage(1)}\n-            style={{\n-              padding: '10px 20px',\n-              border: currentPage === 1 ? '2px solid #007bff' : '1px solid #ddd',\n-              borderRadius: '6px',\n-              background: currentPage === 1 ? '#007bff' : 'white',\n-              color: currentPage === 1 ? 'white' : '#333',\n-              cursor: 'pointer',\n-              fontWeight: currentPage === 1 ? 'bold' : 'normal'\n-            }}\n-          >\n-            1. SPINE Mapping Chart\n-          </button>\n-          <button \n-            onClick={() => setCurrentPage(2)}\n-            style={{\n-              padding: '10px 20px',\n-              border: currentPage === 2 ? '2px solid #007bff' : '1px solid #ddd',\n-              borderRadius: '6px',\n-              background: currentPage === 2 ? '#007bff' : 'white',\n-              color: currentPage === 2 ? 'white' : '#333',\n-              cursor: 'pointer',\n-              fontWeight: currentPage === 2 ? 'bold' : 'normal'\n-            }}\n-          >\n-            2. Target Muscles (Front)\n-          </button>\n-          <button \n-            onClick={() => setCurrentPage(3)}\n-            style={{\n-              padding: '10px 20px',\n-              border: currentPage === 3 ? '2px solid #007bff' : '1px solid #ddd',\n-              borderRadius: '6px',\n-              background: currentPage === 3 ? '#007bff' : 'white',\n-              color: currentPage === 3 ? 'white' : '#333',\n-              cursor: 'pointer',\n-              fontWeight: currentPage === 3 ? 'bold' : 'normal'\n-            }}\n-          >\n-            3. Target Muscles (Back)\n-          </button>\n-        </div>\n \n+\n         <PrescriptionContainer>\n           {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n           {currentPage === 1 && (\n             <>\n"
                },
                {
                    "date": 1764241597320,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,15 +16,15 @@\n     background: white;\n   }\n `;\n \n-const SearchPanel = styled.div<{ $hidden?: boolean }>`\n-  width: 300px;\n+const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n+  width: ${props => props.$collapsed ? '0px' : '300px'};\n   background: ${AppColors.surface};\n   border-right: 1px solid ${AppColors.borderLight};\n-  padding: 20px;\n-  overflow-y: auto;\n-  display: ${props => props.$hidden ? 'none' : 'block'};\n+  padding: ${props => props.$collapsed ? '0' : '20px'};\n+  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n+  transition: all 0.3s ease;\n   \n   @media print {\n     display: none;\n   }\n@@ -87,10 +87,39 @@\n   background: ${AppColors.borderLight};\n   margin: 10px 0;\n `;\n \n+const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n+  position: absolute;\n+  top: 20px;\n+  left: ${props => props.$collapsed ? '10px' : '310px'};\n+  width: 30px;\n+  height: 30px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 50%;\n+  background: ${AppColors.surface};\n+  color: ${AppColors.onBackground};\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  font-size: 14px;\n+  z-index: 1000;\n+  transition: all 0.3s ease;\n+  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n+  \n+  &:hover {\n+    background: ${AppColors.primary};\n+    color: ${AppColors.onPrimary};\n+  }\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n \n \n+\n const SearchTitle = styled.h2`\n   font-size: ${AppTextStyles.title2.fontSize};\n   font-weight: 600;\n   color: ${AppColors.onBackground};\n@@ -207,8 +236,9 @@\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n   const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false); // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -701,10 +731,20 @@\n   };\n \n   return (\n     <PageContainer>\n-      <SearchPanel>\n-        <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+      <ToggleButton \n+        $collapsed={isSearchPanelCollapsed}\n+        onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n+        title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n+      >\n+        {isSearchPanelCollapsed ? 'â†’' : 'â†'}\n+      </ToggleButton>\n+      \n+      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n+        {!isSearchPanelCollapsed && (\n+          <>\n+            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n         <SearchInput\n           type=\"text\"\n           placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n           value={searchTerm}\n@@ -721,12 +761,12 @@\n               <MemberInfo>{member.birth}</MemberInfo>\n               <MemberInfo>{member.phone}</MemberInfo>\n             </MemberItem>\n           ))}\n-        </MemberList>\n-      </SearchPanel>\n-\n-      <ButtonPanel>\n+          </MemberList>\n+          </>\n+        )}\n+      </SearchPanel>      <ButtonPanel>\n         <ActionButton \n           onClick={handleSave} \n           title=\"ì €ì¥\"\n           disabled={isReadOnly}\n"
                },
                {
                    "date": 1764241634387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,25 +88,20 @@\n   margin: 10px 0;\n `;\n \n const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n-  position: absolute;\n-  top: 20px;\n-  left: ${props => props.$collapsed ? '10px' : '310px'};\n-  width: 30px;\n-  height: 30px;\n+  width: 100%;\n+  height: 32px;\n   border: 1px solid ${AppColors.borderLight};\n-  border-radius: 50%;\n-  background: ${AppColors.surface};\n-  color: ${AppColors.onBackground};\n+  border-radius: 4px;\n+  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n+  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n   cursor: pointer;\n   display: flex;\n   align-items: center;\n   justify-content: center;\n   font-size: 14px;\n-  z-index: 1000;\n-  transition: all 0.3s ease;\n-  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n+  transition: all 0.2s ease;\n   \n   &:hover {\n     background: ${AppColors.primary};\n     color: ${AppColors.onPrimary};\n@@ -731,16 +726,8 @@\n   };\n \n   return (\n     <PageContainer>\n-      <ToggleButton \n-        $collapsed={isSearchPanelCollapsed}\n-        onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n-        title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n-      >\n-        {isSearchPanelCollapsed ? 'â†’' : 'â†'}\n-      </ToggleButton>\n-      \n       <SearchPanel $collapsed={isSearchPanelCollapsed}>\n         {!isSearchPanelCollapsed && (\n           <>\n             <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n@@ -765,8 +752,16 @@\n           </MemberList>\n           </>\n         )}\n       </SearchPanel>      <ButtonPanel>\n+        <ToggleButton \n+          $collapsed={isSearchPanelCollapsed}\n+          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n+          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n+        >\n+          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n+        </ToggleButton>\n+        \n         <ActionButton \n           onClick={handleSave} \n           title=\"ì €ì¥\"\n           disabled={isReadOnly}\n"
                },
                {
                    "date": 1764241655064,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,960 @@\n+import React, { useEffect, useState, useCallback } from 'react';\n+import { useSearchParams } from 'react-router-dom';\n+import styled from 'styled-components';\n+import { AppColors } from '../styles/colors';\n+import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n+\n+const PageContainer = styled.div`\n+  min-height: 100vh;\n+  display: flex;\n+  background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n+`;\n+\n+const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n+  width: ${props => props.$collapsed ? '0px' : '300px'};\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: ${props => props.$collapsed ? '0' : '20px'};\n+  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n+  transition: all 0.3s ease;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n+  width: 55px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 10px 2px;\n+  display: ${props => props.$hidden ? 'none' : 'flex'};\n+  flex-direction: column;\n+  gap: 6px;\n+  align-items: stretch;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n+  width: 100%;\n+  height: 36px;\n+  border: none;\n+  border-radius: 6px;\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n+  font-size: 16px;\n+  font-weight: 600;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+  }\n+`;\n+\n+const PageButton = styled.button<{ active?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.active ? AppColors.primary : 'white'};\n+  color: ${props => props.active ? 'white' : '#333'};\n+  font-size: 14px;\n+  font-weight: ${props => props.active ? 'bold' : 'normal'};\n+  cursor: pointer;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n+  }\n+`;\n+\n+const Divider = styled.div`\n+  height: 1px;\n+  background: ${AppColors.borderLight};\n+  margin: 10px 0;\n+`;\n+\n+const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n+  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  font-size: 14px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${AppColors.primary};\n+    color: ${AppColors.onPrimary};\n+  }\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  box-sizing: border-box;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  min-height: calc(100vh - 40px);\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20px;\n+    margin: 0;\n+    max-width: none;\n+    min-height: auto;\n+  }\n+`;\n+\n+const PrescriptionTitle = styled.h1`\n+  text-align: center;\n+  font-size: 24px;\n+  font-weight: bold;\n+  margin-bottom: 30px;\n+  color: ${AppColors.onBackground};\n+`;\n+\n+const FormLabel = styled.label`\n+  display: block;\n+  font-size: ${AppTextStyles.label1.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 8px;\n+`;\n+\n+const FormTextarea = styled.textarea`\n+  width: 100%;\n+  padding: 10px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  resize: vertical;\n+  box-sizing: border-box;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+\n+\n+const ExercisePrescriptionPage: React.FC = () => {\n+  const [searchParams] = useSearchParams();\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n+  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false); // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: '',\n+    bodyImages: {\n+      front: [] as BodyImagePoint[],\n+      spine: [] as BodyImagePoint[],\n+      back: [] as BodyImagePoint[],\n+    },\n+    signatureData: '', // ì„œëª… ë°ì´í„°\n+  });\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n+\n+    loadMembers();\n+  }, []);\n+\n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+          bodyImages: {\n+            front: [],\n+            spine: [],\n+            back: [],\n+          },\n+          signatureData: '',\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+            bodyImages: prescription.bodyImages,\n+            signatureData: prescription.signatureData || '',\n+          });\n+          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+            bodyImages: {\n+              front: [],\n+              spine: [],\n+              back: [],\n+            },\n+            signatureData: '', // ì„œëª… ë°ì´í„° ì´ˆê¸°í™”\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n+  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n+    try {\n+      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+      if (prescription) {\n+        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n+        const member = members.find(m => m.id === prescription.memberId);\n+        if (member) {\n+          setSelectedMember(member);\n+        }\n+        \n+        setCurrentPrescription(prescription);\n+        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n+        setFormData({\n+          height: prescription.height,\n+          weight: prescription.weight,\n+          footSize: prescription.footSize,\n+          medications: prescription.medications,\n+          medicalHistory: prescription.medicalHistory,\n+          painHistory: prescription.painHistory,\n+          bodyImages: prescription.bodyImages,\n+          signatureData: prescription.signatureData || '',\n+        });\n+        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n+      }\n+    } catch (error) {\n+      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [members]);\n+\n+  useEffect(() => {\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    const prescriptionIdParam = searchParams.get('prescriptionId');\n+    \n+    if (prescriptionIdParam) {\n+      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+      loadSpecificPrescription(prescriptionIdParam);\n+    } else if (userIdParam && members.length > 0) {\n+      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n+      const member = members.find(m => m.id === userIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n+    }\n+  }, [searchParams, members, loadSpecificPrescription]);\n+\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value,\n+    }));\n+  };\n+\n+\n+\n+  const handleSave = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const finalSignatureData = formData.signatureData;\n+      \n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: formData.bodyImages,\n+        signatureData: finalSignatureData,\n+        signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n+        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n+      };\n+\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  const generatePrescriptionHTML = () => {\n+    if (!selectedMember) return '';\n+\n+    // ë‚ ì§œ í¬ë§·íŒ… í•¨ìˆ˜\n+    const formatDate = (dateString: string) => {\n+      if (!dateString) return '';\n+      const date = new Date(dateString);\n+      const year = date.getFullYear();\n+      const month = String(date.getMonth() + 1).padStart(2, '0');\n+      const day = String(date.getDate()).padStart(2, '0');\n+      return `${year}ë…„ ${month}ì›” ${day}ì¼`;\n+    };\n+\n+    return `\n+      <!DOCTYPE html>\n+      <html>\n+      <head>\n+        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+        <style>\n+          @media print {\n+            body { margin: 0; padding: 0; }\n+            .no-print { display: none !important; }\n+            .page { \n+              page-break-after: always; \n+              height: 100vh; \n+              display: flex;\n+              flex-direction: column;\n+              padding: 40px;\n+              box-sizing: border-box;\n+            }\n+            .page:last-child { page-break-after: auto; }\n+            /* PDF ì¶œë ¥ ìµœì í™” */\n+            * {\n+              -webkit-print-color-adjust: exact !important;\n+              color-adjust: exact !important;\n+              print-color-adjust: exact !important;\n+            }\n+          }\n+          \n+          @media screen {\n+            .page {\n+              min-height: 100vh;\n+              padding: 40px;\n+              background: white;\n+              margin-bottom: 20px;\n+              box-shadow: 0 0 10px rgba(0,0,0,0.1);\n+            }\n+          }\n+          \n+          body { \n+            font-family: 'Malgun Gothic', Arial, sans-serif; \n+            margin: 0; \n+            background: #f5f5f5;\n+          }\n+          \n+          .page-header {\n+            display: flex;\n+            justify-content: space-between;\n+            align-items: center;\n+            margin-bottom: 30px;\n+            font-size: 16px;\n+          }\n+          \n+          .member-info {\n+            font-weight: bold;\n+          }\n+          \n+          .page-title {\n+            text-align: center;\n+            font-size: 28px;\n+            font-weight: bold;\n+            margin: 40px 0;\n+            color: #333;\n+          }\n+          \n+          .spine-image {\n+            display: flex;\n+            justify-content: center;\n+            margin: 40px 0;\n+          }\n+          \n+          .spine-image img {\n+            max-height: 400px;\n+            max-width: 300px;\n+          }\n+          \n+          .chief-complaint {\n+            margin: 40px 0;\n+          }\n+          \n+          .chief-complaint-title {\n+            font-size: 18px;\n+            font-weight: bold;\n+            margin-bottom: 15px;\n+            color: #333;\n+          }\n+          \n+          .complaint-text {\n+            min-height: 120px;\n+            padding: 15px;\n+            border: 2px solid #ddd;\n+            border-radius: 8px;\n+            background: #f9f9f9;\n+            line-height: 1.6;\n+            white-space: pre-wrap;\n+          }\n+          \n+          .creation-date {\n+            position: absolute;\n+            bottom: 40px;\n+            left: 40px;\n+            font-size: 14px;\n+            color: #666;\n+          }\n+          \n+          .muscle-image {\n+            display: flex;\n+            justify-content: center;\n+            margin: 40px 0;\n+          }\n+          \n+          .muscle-image img {\n+            max-height: 500px;\n+            max-width: 400px;\n+          }\n+          \n+          .print-button { \n+            margin: 20px; \n+            padding: 10px 20px; \n+            background: #007bff; \n+            color: white; \n+            border: none; \n+            border-radius: 5px; \n+            cursor: pointer; \n+          }\n+        </style>\n+      </head>\n+      <body>\n+        <div class=\"no-print\" style=\"margin: 20px; padding: 15px; background: #f0f8ff; border: 1px solid #007bff; border-radius: 5px;\">\n+          <div style=\"display: flex; align-items: center; gap: 15px;\">\n+            <button class=\"print-button\" onclick=\"window.print()\" style=\"margin: 0;\">ì¸ì‡„í•˜ê¸°</button>\n+            <div style=\"font-size: 12px; color: #666;\">\n+              <strong>PDF ì¶œë ¥ ì‹œ ìƒ‰ìƒì´ ì•ˆ ë³´ì´ëŠ” ê²½ìš°:</strong><br>\n+              ì¸ì‡„ ì˜µì…˜ì—ì„œ \"ê¸°íƒ€ ì„¤ì •\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" ì²´í¬ ë˜ëŠ”<br>\n+              Chrome: \"ë”ë³´ê¸°\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" í™œì„±í™”\n+            </div>\n+          </div>\n+        </div>\n+        \n+        <!-- 1í˜ì´ì§€: SPINE Mapping Chart -->\n+        <div class=\"page\">\n+          <div class=\"page-header\">\n+            <div class=\"member-info\">\n+              ì„±ëª…: ${selectedMember.name} &nbsp;&nbsp; \n+              ìƒë…„ì›”ì¼: ${formatDate(selectedMember.birth)} &nbsp;&nbsp; \n+              ì‹ ì¥: ${formData.height}cm\n+            </div>\n+          </div>\n+          \n+          <div class=\"page-title\">SPINE Mapping Chart</div>\n+          \n+          <div class=\"spine-image\">\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/bone.svg\" alt=\"ì²™ì¶” ì´ë¯¸ì§€\" />\n+          </div>\n+          \n+          <div class=\"chief-complaint\">\n+            <div class=\"chief-complaint-title\">ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n+            <div class=\"complaint-text\">${formData.painHistory || ''}</div>\n+          </div>\n+          \n+          <div class=\"creation-date\">\n+            ìµœì´ˆ ì‘ì„±ì¼ : ${currentPrescription?.createdAt \n+              ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n+              : new Date().toISOString().split('T')[0]\n+            }\n+          </div>\n+        </div>\n+        \n+        <!-- 2í˜ì´ì§€: Target Muscles List (Front) -->\n+        <div class=\"page\">\n+          <div class=\"page-header\">\n+            <div class=\"member-info\">${selectedMember.name}</div>\n+          </div>\n+          \n+          <div class=\"page-title\">Target Muscles List</div>\n+          \n+          <div class=\"muscle-image\">\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/front.png\" alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" />\n+          </div>\n+        </div>\n+        \n+        <!-- 3í˜ì´ì§€: Target Muscles List (Back) -->\n+        <div class=\"page\">\n+          <div class=\"page-header\">\n+            <div class=\"member-info\">${selectedMember.name}</div>\n+          </div>\n+          \n+          <div class=\"page-title\">Target Muscles List</div>\n+          \n+          <div class=\"muscle-image\">\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/back.png\" alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" />\n+          </div>\n+        </div>\n+      </body>\n+      </html>\n+    `;\n+  };\n+\n+  const handleShare = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(generatePrescriptionHTML());\n+      printWindow.document.close();\n+      \n+      // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n+      if (navigator.share) {\n+        navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: printWindow.location.href,\n+        });\n+      } else {\n+        alert('ìƒˆ ì°½ì—ì„œ ìš´ë™ì²˜ë°©ì„œë¥¼ í™•ì¸í•˜ê³  URLì„ ë³µì‚¬í•˜ì—¬ ê³µìœ í•˜ì„¸ìš”.');\n+      }\n+    }\n+  };\n+\n+  const handlePrint = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(generatePrescriptionHTML());\n+      printWindow.document.close();\n+      \n+      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n+      setTimeout(() => {\n+        printWindow.print();\n+      }, 1000);\n+    }\n+  };\n+\n+  return (\n+    <PageContainer>\n+      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n+        {!isSearchPanelCollapsed && (\n+          <>\n+            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birth}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+          </MemberList>\n+          </>\n+        )}\n+      </SearchPanel>      <ButtonPanel>\n+        <ToggleButton \n+          $collapsed={isSearchPanelCollapsed}\n+          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n+          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n+        >\n+          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n+        </ToggleButton>\n+        \n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={isReadOnly}\n+        >\n+          ğŸ’¾\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          ğŸ“¤\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¶œë ¥\">\n+          ğŸ–¨ï¸\n+        </ActionButton>\n+        \n+        <Divider />\n+        \n+        <PageButton \n+          active={currentPage === 1}\n+          onClick={() => setCurrentPage(1)}\n+        >\n+          1\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 2}\n+          onClick={() => setCurrentPage(2)}\n+        >\n+          2\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 3}\n+          onClick={() => setCurrentPage(3)}\n+        >\n+          3\n+        </PageButton>\n+      </ButtonPanel>\n+\n+      <PrescriptionPanel>\n+\n+\n+        <PrescriptionContainer>\n+          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n+          {currentPage === 1 && (\n+            <>\n+              {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n+              <div style={{ \n+                display: 'flex', \n+                alignItems: 'center', \n+                gap: '20px', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n+                <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n+                  year: 'numeric',\n+                  month: 'long', \n+                  day: 'numeric'\n+                }) : ''}</span>\n+                <span>ì‹ ì¥: {formData.height}cm</span>\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <PrescriptionTitle>SPINE Mapping Chart</PrescriptionTitle>\n+              \n+              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                margin: '40px 0' \n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n+                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n+                  style={{ \n+                    maxHeight: '400px', \n+                    maxWidth: '300px' \n+                  }} \n+                />\n+              </div>\n+\n+              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n+              <div style={{ margin: '40px 0' }}>\n+                <FormLabel style={{ \n+                  fontSize: '18px', \n+                  fontWeight: 'bold', \n+                  marginBottom: '15px', \n+                  display: 'block'\n+                }}>\n+                  ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n+                </FormLabel>\n+                <FormTextarea\n+                  rows={8}\n+                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n+                  value={formData.painHistory}\n+                  onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+                  readOnly={isReadOnly}\n+                  style={{ \n+                    background: isReadOnly ? '#f5f5f5' : 'white',\n+                    minHeight: '120px'\n+                  }}\n+                />\n+              </div>\n+\n+              {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n+              <div style={{ \n+                marginTop: '60px',\n+                textAlign: 'left', \n+                fontSize: '14px', \n+                color: '#666' \n+              }}>\n+                ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n+                  ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n+                  : new Date().toISOString().split('T')[0]\n+                }\n+              </div>\n+            </>\n+          )}\n+\n+          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n+          {currentPage === 2 && (\n+            <>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <PrescriptionTitle>Target Muscles List</PrescriptionTitle>\n+              \n+              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                margin: '40px 0' \n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n+                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '500px', \n+                    maxWidth: '400px' \n+                  }} \n+                />\n+              </div>\n+            </>\n+          )}\n+\n+          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n+          {currentPage === 3 && (\n+            <>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <PrescriptionTitle>Target Muscles List</PrescriptionTitle>\n+              \n+              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                margin: '40px 0' \n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n+                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '500px', \n+                    maxWidth: '400px' \n+                  }} \n+                />\n+              </div>\n+            </>\n+          )}\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n+    </PageContainer>\n+  );\n+};\n+\n+export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764241754703,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -175,991 +175,37 @@\n   }\n `;\n \n const PrescriptionContainer = styled.div`\n+  width: 210mm;\n+  height: 297mm;\n   max-width: 800px;\n   margin: 0 auto;\n   background: white;\n   padding: 40px;\n   box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  min-height: calc(100vh - 40px);\n+  box-sizing: border-box;\n+  overflow-y: auto;\n   \n   @media print {\n     box-shadow: none;\n-    padding: 20px;\n+    padding: 20mm;\n     margin: 0;\n     max-width: none;\n-    min-height: auto;\n+    width: 210mm;\n+    height: 297mm;\n+    overflow: visible;\n   }\n-`;\n-\n-const PrescriptionTitle = styled.h1`\n-  text-align: center;\n-  font-size: 24px;\n-  font-weight: bold;\n-  margin-bottom: 30px;\n-  color: ${AppColors.onBackground};\n-`;\n-\n-const FormLabel = styled.label`\n-  display: block;\n-  font-size: ${AppTextStyles.label1.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 8px;\n-`;\n-\n-const FormTextarea = styled.textarea`\n-  width: 100%;\n-  padding: 10px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  resize: vertical;\n-  box-sizing: border-box;\n   \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n+  @media screen and (max-width: 900px) {\n+    width: 100%;\n+    height: auto;\n+    min-height: calc(100vh - 40px);\n   }\n `;\n \n \n \n-const ExercisePrescriptionPage: React.FC = () => {\n-  const [searchParams] = useSearchParams();\n-  const [searchTerm, setSearchTerm] = useState('');\n-  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n-  const [members, setMembers] = useState<Member[]>([]);\n-  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n-  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false); // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n-  const [formData, setFormData] = useState({\n-    height: '',\n-    weight: '',\n-    footSize: '',\n-    medications: '',\n-    medicalHistory: {\n-      musculoskeletal: false,\n-      cardiovascular: false,\n-      diabetes: false,\n-      osteoporosis: false,\n-      thyroid: false,\n-      varicose: false,\n-      arthritis: false,\n-    } as ExercisePrescriptionMedicalHistory,\n-    painHistory: '',\n-    bodyImages: {\n-      front: [] as BodyImagePoint[],\n-      spine: [] as BodyImagePoint[],\n-      back: [] as BodyImagePoint[],\n-    },\n-    signatureData: '', // ì„œëª… ë°ì´í„°\n-  });\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n-  useEffect(() => {\n-    const loadMembers = async () => {\n-      try {\n-        const allMembers = await dbManager.getAllMembers();\n-        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n-        const activeMembers = allMembers.filter(member => member.isActive);\n-        setMembers(activeMembers);\n-      } catch (error) {\n-        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-      }\n-    };\n-\n-    loadMembers();\n-  }, []);\n-\n-  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n-  useEffect(() => {\n-    const loadPrescription = async () => {\n-      if (!selectedMember) {\n-        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n-        setCurrentPrescription(null);\n-        setFormData({\n-          height: '',\n-          weight: '',\n-          footSize: '',\n-          medications: '',\n-          medicalHistory: {\n-            musculoskeletal: false,\n-            cardiovascular: false,\n-            diabetes: false,\n-            osteoporosis: false,\n-            thyroid: false,\n-            varicose: false,\n-            arthritis: false,\n-          },\n-          painHistory: '',\n-          bodyImages: {\n-            front: [],\n-            spine: [],\n-            back: [],\n-          },\n-          signatureData: '',\n-        });\n-        return;\n-      }\n-\n-      try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n-        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n-        \n-        if (prescription) {\n-          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n-          setCurrentPrescription(prescription);\n-          setFormData({\n-            height: prescription.height,\n-            weight: prescription.weight,\n-            footSize: prescription.footSize,\n-            medications: prescription.medications,\n-            medicalHistory: prescription.medicalHistory,\n-            painHistory: prescription.painHistory,\n-            bodyImages: prescription.bodyImages,\n-            signatureData: prescription.signatureData || '',\n-          });\n-          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n-        } else {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n-          setCurrentPrescription(null);\n-          setFormData({\n-            height: '',\n-            weight: '',\n-            footSize: '',\n-            medications: '',\n-            medicalHistory: {\n-              musculoskeletal: false,\n-              cardiovascular: false,\n-              diabetes: false,\n-              osteoporosis: false,\n-              thyroid: false,\n-              varicose: false,\n-              arthritis: false,\n-            },\n-            painHistory: '',\n-            bodyImages: {\n-              front: [],\n-              spine: [],\n-              back: [],\n-            },\n-            signatureData: '', // ì„œëª… ë°ì´í„° ì´ˆê¸°í™”\n-          });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n-        }\n-      } catch (error) {\n-        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-      }\n-    };\n-\n-    loadPrescription();\n-  }, [selectedMember]);\n-\n-  const filteredMembers = members.filter(member =>\n-    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n-  );\n-\n-  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n-    try {\n-      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-      if (prescription) {\n-        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n-        const member = members.find(m => m.id === prescription.memberId);\n-        if (member) {\n-          setSelectedMember(member);\n-        }\n-        \n-        setCurrentPrescription(prescription);\n-        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n-        setFormData({\n-          height: prescription.height,\n-          weight: prescription.weight,\n-          footSize: prescription.footSize,\n-          medications: prescription.medications,\n-          medicalHistory: prescription.medicalHistory,\n-          painHistory: prescription.painHistory,\n-          bodyImages: prescription.bodyImages,\n-          signatureData: prescription.signatureData || '',\n-        });\n-        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n-      }\n-    } catch (error) {\n-      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-    }\n-  }, [members]);\n-\n-  useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n-    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    const prescriptionIdParam = searchParams.get('prescriptionId');\n-    \n-    if (prescriptionIdParam) {\n-      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-      loadSpecificPrescription(prescriptionIdParam);\n-    } else if (userIdParam && members.length > 0) {\n-      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n-      const member = members.find(m => m.id === userIdParam);\n-      if (member) {\n-        setSelectedMember(member);\n-      }\n-    }\n-  }, [searchParams, members, loadSpecificPrescription]);\n-\n-  const handleMemberSelect = (member: Member) => {\n-    setSelectedMember(member);\n-  };\n-\n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value,\n-    }));\n-  };\n-\n-\n-\n-  const handleSave = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const finalSignatureData = formData.signatureData;\n-      \n-      const prescriptionData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        height: formData.height,\n-        weight: formData.weight,\n-        footSize: formData.footSize,\n-        medications: formData.medications,\n-        medicalHistory: formData.medicalHistory,\n-        painHistory: formData.painHistory,\n-        bodyImages: formData.bodyImages,\n-        signatureData: finalSignatureData,\n-        signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n-        isActive: true,\n-        prescriptionDate: new Date(),\n-        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n-        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n-      };\n-\n-      if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      } else {\n-        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      }\n-      \n-      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    } catch (error) {\n-      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  const generatePrescriptionHTML = () => {\n-    if (!selectedMember) return '';\n-\n-    // ë‚ ì§œ í¬ë§·íŒ… í•¨ìˆ˜\n-    const formatDate = (dateString: string) => {\n-      if (!dateString) return '';\n-      const date = new Date(dateString);\n-      const year = date.getFullYear();\n-      const month = String(date.getMonth() + 1).padStart(2, '0');\n-      const day = String(date.getDate()).padStart(2, '0');\n-      return `${year}ë…„ ${month}ì›” ${day}ì¼`;\n-    };\n-\n-    return `\n-      <!DOCTYPE html>\n-      <html>\n-      <head>\n-        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n-        <style>\n-          @media print {\n-            body { margin: 0; padding: 0; }\n-            .no-print { display: none !important; }\n-            .page { \n-              page-break-after: always; \n-              height: 100vh; \n-              display: flex;\n-              flex-direction: column;\n-              padding: 40px;\n-              box-sizing: border-box;\n-            }\n-            .page:last-child { page-break-after: auto; }\n-            /* PDF ì¶œë ¥ ìµœì í™” */\n-            * {\n-              -webkit-print-color-adjust: exact !important;\n-              color-adjust: exact !important;\n-              print-color-adjust: exact !important;\n-            }\n-          }\n-          \n-          @media screen {\n-            .page {\n-              min-height: 100vh;\n-              padding: 40px;\n-              background: white;\n-              margin-bottom: 20px;\n-              box-shadow: 0 0 10px rgba(0,0,0,0.1);\n-            }\n-          }\n-          \n-          body { \n-            font-family: 'Malgun Gothic', Arial, sans-serif; \n-            margin: 0; \n-            background: #f5f5f5;\n-          }\n-          \n-          .page-header {\n-            display: flex;\n-            justify-content: space-between;\n-            align-items: center;\n-            margin-bottom: 30px;\n-            font-size: 16px;\n-          }\n-          \n-          .member-info {\n-            font-weight: bold;\n-          }\n-          \n-          .page-title {\n-            text-align: center;\n-            font-size: 28px;\n-            font-weight: bold;\n-            margin: 40px 0;\n-            color: #333;\n-          }\n-          \n-          .spine-image {\n-            display: flex;\n-            justify-content: center;\n-            margin: 40px 0;\n-          }\n-          \n-          .spine-image img {\n-            max-height: 400px;\n-            max-width: 300px;\n-          }\n-          \n-          .chief-complaint {\n-            margin: 40px 0;\n-          }\n-          \n-          .chief-complaint-title {\n-            font-size: 18px;\n-            font-weight: bold;\n-            margin-bottom: 15px;\n-            color: #333;\n-          }\n-          \n-          .complaint-text {\n-            min-height: 120px;\n-            padding: 15px;\n-            border: 2px solid #ddd;\n-            border-radius: 8px;\n-            background: #f9f9f9;\n-            line-height: 1.6;\n-            white-space: pre-wrap;\n-          }\n-          \n-          .creation-date {\n-            position: absolute;\n-            bottom: 40px;\n-            left: 40px;\n-            font-size: 14px;\n-            color: #666;\n-          }\n-          \n-          .muscle-image {\n-            display: flex;\n-            justify-content: center;\n-            margin: 40px 0;\n-          }\n-          \n-          .muscle-image img {\n-            max-height: 500px;\n-            max-width: 400px;\n-          }\n-          \n-          .print-button { \n-            margin: 20px; \n-            padding: 10px 20px; \n-            background: #007bff; \n-            color: white; \n-            border: none; \n-            border-radius: 5px; \n-            cursor: pointer; \n-          }\n-        </style>\n-      </head>\n-      <body>\n-        <div class=\"no-print\" style=\"margin: 20px; padding: 15px; background: #f0f8ff; border: 1px solid #007bff; border-radius: 5px;\">\n-          <div style=\"display: flex; align-items: center; gap: 15px;\">\n-            <button class=\"print-button\" onclick=\"window.print()\" style=\"margin: 0;\">ì¸ì‡„í•˜ê¸°</button>\n-            <div style=\"font-size: 12px; color: #666;\">\n-              <strong>PDF ì¶œë ¥ ì‹œ ìƒ‰ìƒì´ ì•ˆ ë³´ì´ëŠ” ê²½ìš°:</strong><br>\n-              ì¸ì‡„ ì˜µì…˜ì—ì„œ \"ê¸°íƒ€ ì„¤ì •\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" ì²´í¬ ë˜ëŠ”<br>\n-              Chrome: \"ë”ë³´ê¸°\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" í™œì„±í™”\n-            </div>\n-          </div>\n-        </div>\n-        \n-        <!-- 1í˜ì´ì§€: SPINE Mapping Chart -->\n-        <div class=\"page\">\n-          <div class=\"page-header\">\n-            <div class=\"member-info\">\n-              ì„±ëª…: ${selectedMember.name} &nbsp;&nbsp; \n-              ìƒë…„ì›”ì¼: ${formatDate(selectedMember.birth)} &nbsp;&nbsp; \n-              ì‹ ì¥: ${formData.height}cm\n-            </div>\n-          </div>\n-          \n-          <div class=\"page-title\">SPINE Mapping Chart</div>\n-          \n-          <div class=\"spine-image\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/bone.svg\" alt=\"ì²™ì¶” ì´ë¯¸ì§€\" />\n-          </div>\n-          \n-          <div class=\"chief-complaint\">\n-            <div class=\"chief-complaint-title\">ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n-            <div class=\"complaint-text\">${formData.painHistory || ''}</div>\n-          </div>\n-          \n-          <div class=\"creation-date\">\n-            ìµœì´ˆ ì‘ì„±ì¼ : ${currentPrescription?.createdAt \n-              ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n-              : new Date().toISOString().split('T')[0]\n-            }\n-          </div>\n-        </div>\n-        \n-        <!-- 2í˜ì´ì§€: Target Muscles List (Front) -->\n-        <div class=\"page\">\n-          <div class=\"page-header\">\n-            <div class=\"member-info\">${selectedMember.name}</div>\n-          </div>\n-          \n-          <div class=\"page-title\">Target Muscles List</div>\n-          \n-          <div class=\"muscle-image\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/front.png\" alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" />\n-          </div>\n-        </div>\n-        \n-        <!-- 3í˜ì´ì§€: Target Muscles List (Back) -->\n-        <div class=\"page\">\n-          <div class=\"page-header\">\n-            <div class=\"member-info\">${selectedMember.name}</div>\n-          </div>\n-          \n-          <div class=\"page-title\">Target Muscles List</div>\n-          \n-          <div class=\"muscle-image\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/back.png\" alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" />\n-          </div>\n-        </div>\n-      </body>\n-      </html>\n-    `;\n-  };\n-\n-  const handleShare = () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(generatePrescriptionHTML());\n-      printWindow.document.close();\n-      \n-      // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n-      if (navigator.share) {\n-        navigator.share({\n-          title: 'ìš´ë™ì²˜ë°©ì„œ',\n-          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: printWindow.location.href,\n-        });\n-      } else {\n-        alert('ìƒˆ ì°½ì—ì„œ ìš´ë™ì²˜ë°©ì„œë¥¼ í™•ì¸í•˜ê³  URLì„ ë³µì‚¬í•˜ì—¬ ê³µìœ í•˜ì„¸ìš”.');\n-      }\n-    }\n-  };\n-\n-  const handlePrint = () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(generatePrescriptionHTML());\n-      printWindow.document.close();\n-      \n-      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n-      setTimeout(() => {\n-        printWindow.print();\n-      }, 1000);\n-    }\n-  };\n-\n-  return (\n-    <PageContainer>\n-      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n-        {!isSearchPanelCollapsed && (\n-          <>\n-            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n-        <SearchInput\n-          type=\"text\"\n-          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n-          value={searchTerm}\n-          onChange={(e) => setSearchTerm(e.target.value)}\n-        />\n-        <MemberList>\n-          {filteredMembers.map(member => (\n-            <MemberItem\n-              key={member.id}\n-              selected={selectedMember?.id === member.id}\n-              onClick={() => handleMemberSelect(member)}\n-            >\n-              <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birth}</MemberInfo>\n-              <MemberInfo>{member.phone}</MemberInfo>\n-            </MemberItem>\n-          ))}\n-          </MemberList>\n-          </>\n-        )}\n-      </SearchPanel>      <ButtonPanel>\n-        <ToggleButton \n-          $collapsed={isSearchPanelCollapsed}\n-          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n-          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n-        >\n-          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n-        </ToggleButton>\n-        \n-        <ActionButton \n-          onClick={handleSave} \n-          title=\"ì €ì¥\"\n-          disabled={isReadOnly}\n-        >\n-          ğŸ’¾\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          ğŸ“¤\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handlePrint} title=\"ì¶œë ¥\">\n-          ğŸ–¨ï¸\n-        </ActionButton>\n-        \n-        <Divider />\n-        \n-        <PageButton \n-          active={currentPage === 1}\n-          onClick={() => setCurrentPage(1)}\n-        >\n-          1\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 2}\n-          onClick={() => setCurrentPage(2)}\n-        >\n-          2\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 3}\n-          onClick={() => setCurrentPage(3)}\n-        >\n-          3\n-        </PageButton>\n-      </ButtonPanel>\n-\n-      <PrescriptionPanel>\n-\n-\n-        <PrescriptionContainer>\n-          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n-          {currentPage === 1 && (\n-            <>\n-              {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n-              <div style={{ \n-                display: 'flex', \n-                alignItems: 'center', \n-                gap: '20px', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n-                <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n-                  year: 'numeric',\n-                  month: 'long', \n-                  day: 'numeric'\n-                }) : ''}</span>\n-                <span>ì‹ ì¥: {formData.height}cm</span>\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <PrescriptionTitle>SPINE Mapping Chart</PrescriptionTitle>\n-              \n-              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                margin: '40px 0' \n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n-                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n-                  style={{ \n-                    maxHeight: '400px', \n-                    maxWidth: '300px' \n-                  }} \n-                />\n-              </div>\n-\n-              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n-              <div style={{ margin: '40px 0' }}>\n-                <FormLabel style={{ \n-                  fontSize: '18px', \n-                  fontWeight: 'bold', \n-                  marginBottom: '15px', \n-                  display: 'block'\n-                }}>\n-                  ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n-                </FormLabel>\n-                <FormTextarea\n-                  rows={8}\n-                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n-                  value={formData.painHistory}\n-                  onChange={(e) => handleInputChange('painHistory', e.target.value)}\n-                  readOnly={isReadOnly}\n-                  style={{ \n-                    background: isReadOnly ? '#f5f5f5' : 'white',\n-                    minHeight: '120px'\n-                  }}\n-                />\n-              </div>\n-\n-              {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n-              <div style={{ \n-                marginTop: '60px',\n-                textAlign: 'left', \n-                fontSize: '14px', \n-                color: '#666' \n-              }}>\n-                ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n-                  ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n-                  : new Date().toISOString().split('T')[0]\n-                }\n-              </div>\n-            </>\n-          )}\n-\n-          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n-          {currentPage === 2 && (\n-            <>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <PrescriptionTitle>Target Muscles List</PrescriptionTitle>\n-              \n-              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                margin: '40px 0' \n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n-                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '500px', \n-                    maxWidth: '400px' \n-                  }} \n-                />\n-              </div>\n-            </>\n-          )}\n-\n-          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n-          {currentPage === 3 && (\n-            <>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <PrescriptionTitle>Target Muscles List</PrescriptionTitle>\n-              \n-              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                margin: '40px 0' \n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n-                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '500px', \n-                    maxWidth: '400px' \n-                  }} \n-                />\n-              </div>\n-            </>\n-          )}\n-        </PrescriptionContainer>\n-      </PrescriptionPanel>\n-    </PageContainer>\n-  );\n-};\n-\n-export default ExercisePrescriptionPage;\n-import React, { useEffect, useState, useCallback } from 'react';\n-import { useSearchParams } from 'react-router-dom';\n-import styled from 'styled-components';\n-import { AppColors } from '../styles/colors';\n-import { AppTextStyles } from '../styles/textStyles';\n-import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n-\n-const PageContainer = styled.div`\n-  min-height: 100vh;\n-  display: flex;\n-  background: ${AppColors.background};\n-  \n-  @media print {\n-    display: block;\n-    background: white;\n-  }\n-`;\n-\n-const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n-  width: ${props => props.$collapsed ? '0px' : '300px'};\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: ${props => props.$collapsed ? '0' : '20px'};\n-  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n-  transition: all 0.3s ease;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n-  width: 55px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 10px 2px;\n-  display: ${props => props.$hidden ? 'none' : 'flex'};\n-  flex-direction: column;\n-  gap: 6px;\n-  align-items: stretch;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 100%;\n-  height: 36px;\n-  border: none;\n-  border-radius: 6px;\n-  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n-  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: 16px;\n-  font-weight: 600;\n-  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-  }\n-`;\n-\n-const PageButton = styled.button<{ active?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.active ? AppColors.primary : 'white'};\n-  color: ${props => props.active ? 'white' : '#333'};\n-  font-size: 14px;\n-  font-weight: ${props => props.active ? 'bold' : 'normal'};\n-  cursor: pointer;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n-  }\n-`;\n-\n-const Divider = styled.div`\n-  height: 1px;\n-  background: ${AppColors.borderLight};\n-  margin: 10px 0;\n-`;\n-\n-const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n-  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n-  cursor: pointer;\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  font-size: 14px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${AppColors.primary};\n-    color: ${AppColors.onPrimary};\n-  }\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-\n-\n-const SearchTitle = styled.h2`\n-  font-size: ${AppTextStyles.title2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SearchInput = styled.input`\n-  width: 100%;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  margin-bottom: 16px;\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const MemberList = styled.div`\n-  max-height: 400px;\n-  overflow-y: auto;\n-`;\n-\n-const MemberItem = styled.div<{ selected?: boolean }>`\n-  padding: 12px;\n-  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 8px;\n-  margin-bottom: 8px;\n-  cursor: pointer;\n-  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n-  \n-  &:hover {\n-    background: ${AppColors.primary}20;\n-  }\n-`;\n-\n-const MemberName = styled.div`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 4px;\n-`;\n-\n-const MemberInfo = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const PrescriptionPanel = styled.div`\n-  flex: 1;\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    padding: 0;\n-    overflow: visible;\n-  }\n-`;\n-\n-const PrescriptionContainer = styled.div`\n-  max-width: 800px;\n-  margin: 0 auto;\n-  background: white;\n-  padding: 40px;\n-  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  min-height: calc(100vh - 40px);\n-  \n-  @media print {\n-    box-shadow: none;\n-    padding: 20px;\n-    margin: 0;\n-    max-width: none;\n-    min-height: auto;\n-  }\n-`;\n-\n-const PrescriptionTitle = styled.h1`\n-  text-align: center;\n-  font-size: 24px;\n-  font-weight: bold;\n-  margin-bottom: 30px;\n-  color: ${AppColors.onBackground};\n-`;\n-\n const FormLabel = styled.label`\n   display: block;\n   font-size: ${AppTextStyles.label1.fontSize};\n   font-weight: 600;\n@@ -1766,17 +812,22 @@\n \n         <PrescriptionContainer>\n           {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n           {currentPage === 1 && (\n-            <>\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n               {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n               <div style={{ \n                 display: 'flex', \n                 alignItems: 'center', \n                 gap: '20px', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n+                marginBottom: '30px',\n+                fontSize: '14px',\n+                fontWeight: 'bold',\n+                height: '30px'\n               }}>\n                 <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n                 <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n                   year: 'numeric',\n@@ -1786,67 +837,81 @@\n                 <span>ì‹ ì¥: {formData.height}cm</span>\n               </div>\n \n               {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <PrescriptionTitle>SPINE Mapping Chart</PrescriptionTitle>\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '20px',\n+                color: '#333'\n+              }}>SPINE Mapping Chart</div>\n               \n               {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n               <div style={{ \n                 display: 'flex', \n                 justifyContent: 'center', \n-                margin: '40px 0' \n+                margin: '20px 0',\n+                height: '180px'\n               }}>\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n                   alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n                   style={{ \n-                    maxHeight: '400px', \n-                    maxWidth: '300px' \n+                    height: '100%', \n+                    maxWidth: '200px',\n+                    objectFit: 'contain'\n                   }} \n                 />\n               </div>\n \n               {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n-              <div style={{ margin: '40px 0' }}>\n+              <div style={{ margin: '20px 0', flex: 1 }}>\n                 <FormLabel style={{ \n-                  fontSize: '18px', \n+                  fontSize: '16px', \n                   fontWeight: 'bold', \n-                  marginBottom: '15px', \n+                  marginBottom: '10px', \n                   display: 'block'\n                 }}>\n                   ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n                 </FormLabel>\n                 <FormTextarea\n-                  rows={8}\n+                  rows={6}\n                   placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n                   value={formData.painHistory}\n                   onChange={(e) => handleInputChange('painHistory', e.target.value)}\n                   readOnly={isReadOnly}\n                   style={{ \n                     background: isReadOnly ? '#f5f5f5' : 'white',\n-                    minHeight: '120px'\n+                    height: '100px',\n+                    resize: 'none'\n                   }}\n                 />\n               </div>\n \n               {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n               <div style={{ \n-                marginTop: '60px',\n+                marginTop: 'auto',\n+                paddingTop: '20px',\n                 textAlign: 'left', \n-                fontSize: '14px', \n+                fontSize: '12px', \n                 color: '#666' \n               }}>\n                 ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n                   ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n                   : new Date().toISOString().split('T')[0]\n                 }\n               </div>\n-            </>\n+            </div>\n           )}\n \n           {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n           {currentPage === 2 && (\n-            <>\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n               {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n               <div style={{ \n                 textAlign: 'left', \n                 marginBottom: '40px',\n@@ -1856,31 +921,43 @@\n                 {selectedMember?.name || ''}\n               </div>\n \n               {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <PrescriptionTitle>Target Muscles List</PrescriptionTitle>\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n               \n               {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n               <div style={{ \n                 display: 'flex', \n                 justifyContent: 'center', \n-                margin: '40px 0' \n+                flex: 1,\n+                alignItems: 'center'\n               }}>\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/front.png`} \n                   alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n                   style={{ \n-                    maxHeight: '500px', \n-                    maxWidth: '400px' \n+                    maxHeight: '400px', \n+                    maxWidth: '300px',\n+                    objectFit: 'contain'\n                   }} \n                 />\n               </div>\n-            </>\n+            </div>\n           )}\n \n           {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n           {currentPage === 3 && (\n-            <>\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n               {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n               <div style={{ \n                 textAlign: 'left', \n                 marginBottom: '40px',\n@@ -1890,26 +967,34 @@\n                 {selectedMember?.name || ''}\n               </div>\n \n               {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <PrescriptionTitle>Target Muscles List</PrescriptionTitle>\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n               \n               {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n               <div style={{ \n                 display: 'flex', \n                 justifyContent: 'center', \n-                margin: '40px 0' \n+                flex: 1,\n+                alignItems: 'center'\n               }}>\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/back.png`} \n                   alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n                   style={{ \n-                    maxHeight: '500px', \n-                    maxWidth: '400px' \n+                    maxHeight: '400px', \n+                    maxWidth: '300px',\n+                    objectFit: 'contain'\n                   }} \n                 />\n               </div>\n-            </>\n+            </div>\n           )}\n         </PrescriptionContainer>\n       </PrescriptionPanel>\n     </PageContainer>\n"
                },
                {
                    "date": 1764241823368,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -849,24 +849,27 @@\n               {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n               <div style={{ \n                 display: 'flex', \n                 justifyContent: 'center', \n-                margin: '20px 0',\n-                height: '180px'\n+                alignItems: 'center',\n+                flex: 1,\n+                margin: '20px 0'\n               }}>\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n                   alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n                   style={{ \n-                    height: '100%', \n-                    maxWidth: '200px',\n+                    maxHeight: '100%',\n+                    maxWidth: '300px',\n+                    width: 'auto',\n+                    height: 'auto',\n                     objectFit: 'contain'\n                   }} \n                 />\n               </div>\n \n               {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n-              <div style={{ margin: '20px 0', flex: 1 }}>\n+              <div style={{ margin: '20px 0' }}>\n                 <FormLabel style={{ \n                   fontSize: '16px', \n                   fontWeight: 'bold', \n                   marginBottom: '10px', \n@@ -933,17 +936,19 @@\n               {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n               <div style={{ \n                 display: 'flex', \n                 justifyContent: 'center', \n-                flex: 1,\n-                alignItems: 'center'\n+                alignItems: 'center',\n+                flex: 1\n               }}>\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/front.png`} \n                   alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n                   style={{ \n-                    maxHeight: '400px', \n-                    maxWidth: '300px',\n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n                     objectFit: 'contain'\n                   }} \n                 />\n               </div>\n@@ -979,17 +984,19 @@\n               {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n               <div style={{ \n                 display: 'flex', \n                 justifyContent: 'center', \n-                flex: 1,\n-                alignItems: 'center'\n+                alignItems: 'center',\n+                flex: 1\n               }}>\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/back.png`} \n                   alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n                   style={{ \n-                    maxHeight: '400px', \n-                    maxWidth: '300px',\n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n                     objectFit: 'contain'\n                   }} \n                 />\n               </div>\n"
                },
                {
                    "date": 1764241848735,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -833,9 +833,27 @@\n                   year: 'numeric',\n                   month: 'long', \n                   day: 'numeric'\n                 }) : ''}</span>\n-                <span>ì‹ ì¥: {formData.height}cm</span>\n+                <span>ì‹ ì¥: \n+                  <input \n+                    type=\"text\" \n+                    value={formData.height}\n+                    onChange={(e) => handleInputChange('height', e.target.value)}\n+                    readOnly={isReadOnly}\n+                    style={{\n+                      border: 'none',\n+                      borderBottom: '1px solid #ccc',\n+                      background: 'transparent',\n+                      width: '60px',\n+                      textAlign: 'center',\n+                      fontSize: '14px',\n+                      fontWeight: 'bold',\n+                      marginLeft: '5px',\n+                      marginRight: '2px'\n+                    }}\n+                    placeholder=\"í‚¤\"\n+                  />cm</span>\n               </div>\n \n               {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n               <div style={{\n"
                },
                {
                    "date": 1764241891891,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -433,10 +433,8 @@\n       return;\n     }\n \n     try {\n-      const finalSignatureData = formData.signatureData;\n-      \n       const prescriptionData = {\n         memberId: selectedMember.id,\n         memberName: selectedMember.name,\n         height: formData.height,\n@@ -445,10 +443,10 @@\n         medications: formData.medications,\n         medicalHistory: formData.medicalHistory,\n         painHistory: formData.painHistory,\n         bodyImages: formData.bodyImages,\n-        signatureData: finalSignatureData,\n-        signedAt: currentPrescription?.signedAt || new Date(), // ê¸°ì¡´ì— ì„œëª… ë‚ ì§œê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ í˜„ì¬ ì‹œê°\n+        signatureData: formData.signatureData,\n+        signedAt: formData.signatureData ? (currentPrescription?.signedAt || new Date()) : null,\n         isActive: true,\n         prescriptionDate: new Date(),\n         version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n         isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n"
                },
                {
                    "date": 1764241942249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -531,77 +531,97 @@\n             margin: 0; \n             background: #f5f5f5;\n           }\n           \n+          .page {\n+            display: flex;\n+            flex-direction: column;\n+          }\n+          \n           .page-header {\n             display: flex;\n             justify-content: space-between;\n             align-items: center;\n-            margin-bottom: 30px;\n-            font-size: 16px;\n+            margin-bottom: 20px;\n+            font-size: 14px;\n+            height: 30px;\n+            flex-shrink: 0;\n           }\n           \n           .member-info {\n             font-weight: bold;\n           }\n           \n           .page-title {\n             text-align: center;\n-            font-size: 28px;\n+            font-size: 24px;\n             font-weight: bold;\n-            margin: 40px 0;\n+            margin-bottom: 20px;\n             color: #333;\n+            flex-shrink: 0;\n           }\n           \n           .spine-image {\n             display: flex;\n             justify-content: center;\n-            margin: 40px 0;\n+            align-items: center;\n+            flex: 1;\n+            margin: 20px 0;\n           }\n           \n           .spine-image img {\n-            max-height: 400px;\n+            max-height: 100%;\n             max-width: 300px;\n+            width: auto;\n+            height: auto;\n+            object-fit: contain;\n           }\n           \n           .chief-complaint {\n-            margin: 40px 0;\n+            margin: 20px 0;\n+            flex-shrink: 0;\n           }\n           \n           .chief-complaint-title {\n-            font-size: 18px;\n+            font-size: 16px;\n             font-weight: bold;\n-            margin-bottom: 15px;\n+            margin-bottom: 10px;\n             color: #333;\n           }\n           \n           .complaint-text {\n-            min-height: 120px;\n+            height: 100px;\n             padding: 15px;\n             border: 2px solid #ddd;\n             border-radius: 8px;\n             background: #f9f9f9;\n             line-height: 1.6;\n             white-space: pre-wrap;\n+            overflow-y: auto;\n+            resize: none;\n           }\n           \n           .creation-date {\n-            position: absolute;\n-            bottom: 40px;\n-            left: 40px;\n-            font-size: 14px;\n+            margin-top: auto;\n+            padding-top: 20px;\n+            font-size: 12px;\n             color: #666;\n+            flex-shrink: 0;\n           }\n           \n           .muscle-image {\n             display: flex;\n             justify-content: center;\n-            margin: 40px 0;\n+            align-items: center;\n+            flex: 1;\n           }\n           \n           .muscle-image img {\n-            max-height: 500px;\n-            max-width: 400px;\n+            max-height: 100%;\n+            max-width: 100%;\n+            width: auto;\n+            height: auto;\n+            object-fit: contain;\n           }\n           \n           .print-button { \n             margin: 20px; \n"
                },
                {
                    "date": 1764242180456,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,9 @@\n-import React, { useEffect, useState, useCallback } from 'react';\n+import React, { useEffect, useState, useCallback, useRef } from 'react';\n import { useSearchParams } from 'react-router-dom';\n import styled from 'styled-components';\n+import html2canvas from 'html2canvas';\n+import jsPDF from 'jspdf';\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n@@ -238,8 +240,9 @@\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n   const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false); // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -729,24 +732,44 @@\n       }\n     }\n   };\n \n-  const handlePrint = () => {\n+  const handlePrint = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n \n-    // ìš´ë™ì²˜ë°©ì„œë§Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìƒˆ ì°½ ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(generatePrescriptionHTML());\n-      printWindow.document.close();\n+    if (!prescriptionRef.current) {\n+      alert('ì¸ì‡„í•  ì½˜í…ì¸ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n+      return;\n+    }\n+\n+    try {\n+      // í˜„ì¬ í˜ìƒì—ì„œ PDF ìƒì„±\n+      const canvas = await html2canvas(prescriptionRef.current, {\n+        scale: 2, // ê³ í•´ìƒë„\n+        useCORS: true,\n+        allowTaint: true,\n+        backgroundColor: '#ffffff'\n+      });\n       \n-      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n-      setTimeout(() => {\n-        printWindow.print();\n-      }, 1000);\n+      const imgData = canvas.toDataURL('image/png');\n+      \n+      // A4 ì‚¬ì´ì¦ˆ PDF ìƒì„±\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n+      const imgHeight = (canvas.height * imgWidth) / canvas.width;\n+      \n+      pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+      \n+      // PDF ë‹¤ìš´ë¡œë“œ\n+      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_í˜ì´ì§€${currentPage}_${new Date().toISOString().split('T')[0]}.pdf`;\n+      pdf.save(fileName);\n+      \n+    } catch (error) {\n+      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n+      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n     }\n   };\n \n   return (\n@@ -827,9 +850,9 @@\n \n       <PrescriptionPanel>\n \n \n-        <PrescriptionContainer>\n+        <PrescriptionContainer ref={prescriptionRef}>\n           {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n           {currentPage === 1 && (\n             <div style={{\n               display: 'flex',\n@@ -968,14 +991,15 @@\n                 marginBottom: '30px',\n                 color: '#333'\n               }}>Target Muscles List</div>\n               \n-              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n+              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n               <div style={{ \n                 display: 'flex', \n                 justifyContent: 'center', \n                 alignItems: 'center',\n-                flex: 1\n+                flex: 1,\n+                position: 'relative'\n               }}>\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/front.png`} \n                   alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n@@ -986,8 +1010,43 @@\n                     height: 'auto',\n                     objectFit: 'contain'\n                   }} \n                 />\n+                \n+                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'none'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"xMidYMid meet\"\n+                >\n+                  {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n+                  <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"red\" />\n+                  <line x1=\"30\" y1=\"25\" x2=\"10\" y2=\"15\" stroke=\"red\" strokeWidth=\"0.3\" />\n+                  <text x=\"5\" y=\"13\" fontSize=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n+                  \n+                  {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n+                  <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"blue\" />\n+                  <line x1=\"40\" y1=\"35\" x2=\"65\" y2=\"25\" stroke=\"blue\" strokeWidth=\"0.3\" />\n+                  <line x1=\"65\" y1=\"25\" x2=\"75\" y2=\"20\" stroke=\"blue\" strokeWidth=\"0.3\" />\n+                  <text x=\"75\" y=\"18\" fontSize=\"2\" fill=\"black\">ëŒ€í‰ê·¼</text>\n+                  \n+                  {/* í¬ì¸íŠ¸ 3: ë³µë¶€ ê·¼ìœ¡ */}\n+                  <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"green\" />\n+                  <line x1=\"45\" y1=\"55\" x2=\"20\" y2=\"70\" stroke=\"green\" strokeWidth=\"0.3\" />\n+                  <text x=\"5\" y=\"72\" fontSize=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n+                  \n+                  {/* í¬ì¸íŠ¸ 4: ë‹¤ë¦¬ ê·¼ìœ¡ */}\n+                  <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"purple\" />\n+                  <line x1=\"35\" y1=\"80\" x2=\"65\" y2=\"90\" stroke=\"purple\" strokeWidth=\"0.3\" />\n+                  <text x=\"65\" y=\"92\" fontSize=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n+                </svg>\n               </div>\n             </div>\n           )}\n \n"
                },
                {
                    "date": 1764242315852,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -479,274 +479,66 @@\n       alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n     }\n   };\n \n-  const generatePrescriptionHTML = () => {\n-    if (!selectedMember) return '';\n \n-    // ë‚ ì§œ í¬ë§·íŒ… í•¨ìˆ˜\n-    const formatDate = (dateString: string) => {\n-      if (!dateString) return '';\n-      const date = new Date(dateString);\n-      const year = date.getFullYear();\n-      const month = String(date.getMonth() + 1).padStart(2, '0');\n-      const day = String(date.getDate()).padStart(2, '0');\n-      return `${year}ë…„ ${month}ì›” ${day}ì¼`;\n-    };\n \n-    return `\n-      <!DOCTYPE html>\n-      <html>\n-      <head>\n-        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n-        <style>\n-          @media print {\n-            body { margin: 0; padding: 0; }\n-            .no-print { display: none !important; }\n-            .page { \n-              page-break-after: always; \n-              height: 100vh; \n-              display: flex;\n-              flex-direction: column;\n-              padding: 40px;\n-              box-sizing: border-box;\n-            }\n-            .page:last-child { page-break-after: auto; }\n-            /* PDF ì¶œë ¥ ìµœì í™” */\n-            * {\n-              -webkit-print-color-adjust: exact !important;\n-              color-adjust: exact !important;\n-              print-color-adjust: exact !important;\n-            }\n-          }\n-          \n-          @media screen {\n-            .page {\n-              min-height: 100vh;\n-              padding: 40px;\n-              background: white;\n-              margin-bottom: 20px;\n-              box-shadow: 0 0 10px rgba(0,0,0,0.1);\n-            }\n-          }\n-          \n-          body { \n-            font-family: 'Malgun Gothic', Arial, sans-serif; \n-            margin: 0; \n-            background: #f5f5f5;\n-          }\n-          \n-          .page {\n-            display: flex;\n-            flex-direction: column;\n-          }\n-          \n-          .page-header {\n-            display: flex;\n-            justify-content: space-between;\n-            align-items: center;\n-            margin-bottom: 20px;\n-            font-size: 14px;\n-            height: 30px;\n-            flex-shrink: 0;\n-          }\n-          \n-          .member-info {\n-            font-weight: bold;\n-          }\n-          \n-          .page-title {\n-            text-align: center;\n-            font-size: 24px;\n-            font-weight: bold;\n-            margin-bottom: 20px;\n-            color: #333;\n-            flex-shrink: 0;\n-          }\n-          \n-          .spine-image {\n-            display: flex;\n-            justify-content: center;\n-            align-items: center;\n-            flex: 1;\n-            margin: 20px 0;\n-          }\n-          \n-          .spine-image img {\n-            max-height: 100%;\n-            max-width: 300px;\n-            width: auto;\n-            height: auto;\n-            object-fit: contain;\n-          }\n-          \n-          .chief-complaint {\n-            margin: 20px 0;\n-            flex-shrink: 0;\n-          }\n-          \n-          .chief-complaint-title {\n-            font-size: 16px;\n-            font-weight: bold;\n-            margin-bottom: 10px;\n-            color: #333;\n-          }\n-          \n-          .complaint-text {\n-            height: 100px;\n-            padding: 15px;\n-            border: 2px solid #ddd;\n-            border-radius: 8px;\n-            background: #f9f9f9;\n-            line-height: 1.6;\n-            white-space: pre-wrap;\n-            overflow-y: auto;\n-            resize: none;\n-          }\n-          \n-          .creation-date {\n-            margin-top: auto;\n-            padding-top: 20px;\n-            font-size: 12px;\n-            color: #666;\n-            flex-shrink: 0;\n-          }\n-          \n-          .muscle-image {\n-            display: flex;\n-            justify-content: center;\n-            align-items: center;\n-            flex: 1;\n-          }\n-          \n-          .muscle-image img {\n-            max-height: 100%;\n-            max-width: 100%;\n-            width: auto;\n-            height: auto;\n-            object-fit: contain;\n-          }\n-          \n-          .print-button { \n-            margin: 20px; \n-            padding: 10px 20px; \n-            background: #007bff; \n-            color: white; \n-            border: none; \n-            border-radius: 5px; \n-            cursor: pointer; \n-          }\n-        </style>\n-      </head>\n-      <body>\n-        <div class=\"no-print\" style=\"margin: 20px; padding: 15px; background: #f0f8ff; border: 1px solid #007bff; border-radius: 5px;\">\n-          <div style=\"display: flex; align-items: center; gap: 15px;\">\n-            <button class=\"print-button\" onclick=\"window.print()\" style=\"margin: 0;\">ì¸ì‡„í•˜ê¸°</button>\n-            <div style=\"font-size: 12px; color: #666;\">\n-              <strong>PDF ì¶œë ¥ ì‹œ ìƒ‰ìƒì´ ì•ˆ ë³´ì´ëŠ” ê²½ìš°:</strong><br>\n-              ì¸ì‡„ ì˜µì…˜ì—ì„œ \"ê¸°íƒ€ ì„¤ì •\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" ì²´í¬ ë˜ëŠ”<br>\n-              Chrome: \"ë”ë³´ê¸°\" â†’ \"ë°°ê²½ ê·¸ë˜í”½\" í™œì„±í™”\n-            </div>\n-          </div>\n-        </div>\n-        \n-        <!-- 1í˜ì´ì§€: SPINE Mapping Chart -->\n-        <div class=\"page\">\n-          <div class=\"page-header\">\n-            <div class=\"member-info\">\n-              ì„±ëª…: ${selectedMember.name} &nbsp;&nbsp; \n-              ìƒë…„ì›”ì¼: ${formatDate(selectedMember.birth)} &nbsp;&nbsp; \n-              ì‹ ì¥: ${formData.height}cm\n-            </div>\n-          </div>\n-          \n-          <div class=\"page-title\">SPINE Mapping Chart</div>\n-          \n-          <div class=\"spine-image\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/bone.svg\" alt=\"ì²™ì¶” ì´ë¯¸ì§€\" />\n-          </div>\n-          \n-          <div class=\"chief-complaint\">\n-            <div class=\"chief-complaint-title\">ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n-            <div class=\"complaint-text\">${formData.painHistory || ''}</div>\n-          </div>\n-          \n-          <div class=\"creation-date\">\n-            ìµœì´ˆ ì‘ì„±ì¼ : ${currentPrescription?.createdAt \n-              ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n-              : new Date().toISOString().split('T')[0]\n-            }\n-          </div>\n-        </div>\n-        \n-        <!-- 2í˜ì´ì§€: Target Muscles List (Front) -->\n-        <div class=\"page\">\n-          <div class=\"page-header\">\n-            <div class=\"member-info\">${selectedMember.name}</div>\n-          </div>\n-          \n-          <div class=\"page-title\">Target Muscles List</div>\n-          \n-          <div class=\"muscle-image\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/front.png\" alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" />\n-          </div>\n-        </div>\n-        \n-        <!-- 3í˜ì´ì§€: Target Muscles List (Back) -->\n-        <div class=\"page\">\n-          <div class=\"page-header\">\n-            <div class=\"member-info\">${selectedMember.name}</div>\n-          </div>\n-          \n-          <div class=\"page-title\">Target Muscles List</div>\n-          \n-          <div class=\"muscle-image\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/back.png\" alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" />\n-          </div>\n-        </div>\n-      </body>\n-      </html>\n-    `;\n-  };\n-\n-  const handleShare = () => {\n+  const handleShare = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n \n-    // ìš´ë™ì²˜ë°©ì„œë§Œ í‘œì‹œí•˜ëŠ” ìƒˆ ì°½ ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(generatePrescriptionHTML());\n-      printWindow.document.close();\n-      \n-      // ë„¤ì´í‹°ë¸Œ ê³µìœ  API ì‚¬ìš© ë˜ëŠ” ë§í¬ ë³µì‚¬\n+    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n+    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n+    \n+    try {\n       if (navigator.share) {\n-        navigator.share({\n+        await navigator.share({\n           title: 'ìš´ë™ì²˜ë°©ì„œ',\n           text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: printWindow.location.href,\n+          url: currentUrl,\n         });\n       } else {\n-        alert('ìƒˆ ì°½ì—ì„œ ìš´ë™ì²˜ë°©ì„œë¥¼ í™•ì¸í•˜ê³  URLì„ ë³µì‚¬í•˜ì—¬ ê³µìœ í•˜ì„¸ìš”.');\n+        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n       }\n+    } catch (error) {\n+      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n+      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n+      try {\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      } catch {\n+        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n+      }\n     }\n   };\n \n-  const handlePrint = async () => {\n+  const handlePrint = () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n \n+    // ë¸Œë¼ìš°ì € ì¸ì‡„ ê¸°ëŠ¥ ì‚¬ìš©\n+    window.print();\n+  };\n+\n+  const handleDownloadPDF = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n     if (!prescriptionRef.current) {\n       alert('ì¸ì‡„í•  ì½˜í…ì¸ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n       return;\n     }\n \n     try {\n-      // í˜„ì¬ í˜ìƒì—ì„œ PDF ìƒì„±\n+      // í˜„ì¬ í˜ì´ì§€ì—ì„œ PDF ìƒì„±\n       const canvas = await html2canvas(prescriptionRef.current, {\n         scale: 2, // ê³ í•´ìƒë„\n         useCORS: true,\n         allowTaint: true,\n@@ -819,12 +611,16 @@\n         <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n           ğŸ“¤\n         </ActionButton>\n         \n-        <ActionButton onClick={handlePrint} title=\"ì¶œë ¥\">\n+        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n           ğŸ–¨ï¸\n         </ActionButton>\n         \n+        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n+          ğŸ“\n+        </ActionButton>\n+        \n         <Divider />\n         \n         <PageButton \n           active={currentPage === 1}\n"
                },
                {
                    "date": 1764242408277,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1118 @@\n+import React, { useEffect, useState, useCallback, useRef } from 'react';\n+import { useSearchParams } from 'react-router-dom';\n+import styled from 'styled-components';\n+import html2canvas from 'html2canvas';\n+import jsPDF from 'jspdf';\n+import { AppColors } from '../styles/colors';\n+import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n+\n+const PageContainer = styled.div`\n+  min-height: 100vh;\n+  display: flex;\n+  background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n+`;\n+\n+const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n+  width: ${props => props.$collapsed ? '0px' : '300px'};\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: ${props => props.$collapsed ? '0' : '20px'};\n+  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n+  transition: all 0.3s ease;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n+  width: 55px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 10px 2px;\n+  display: ${props => props.$hidden ? 'none' : 'flex'};\n+  flex-direction: column;\n+  gap: 6px;\n+  align-items: stretch;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n+  width: 100%;\n+  height: 36px;\n+  border: none;\n+  border-radius: 6px;\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n+  font-size: 16px;\n+  font-weight: 600;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+  }\n+`;\n+\n+const PageButton = styled.button<{ active?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.active ? AppColors.primary : 'white'};\n+  color: ${props => props.active ? 'white' : '#333'};\n+  font-size: 14px;\n+  font-weight: ${props => props.active ? 'bold' : 'normal'};\n+  cursor: pointer;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n+  }\n+`;\n+\n+const Divider = styled.div`\n+  height: 1px;\n+  background: ${AppColors.borderLight};\n+  margin: 10px 0;\n+`;\n+\n+const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n+  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  font-size: 14px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${AppColors.primary};\n+    color: ${AppColors.onPrimary};\n+  }\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  box-sizing: border-box;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  width: 210mm;\n+  height: 297mm;\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  box-sizing: border-box;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20mm;\n+    margin: 0;\n+    max-width: none;\n+    width: 210mm;\n+    height: 297mm;\n+    overflow: visible;\n+  }\n+  \n+  @media screen and (max-width: 900px) {\n+    width: 100%;\n+    height: auto;\n+    min-height: calc(100vh - 40px);\n+  }\n+`;\n+\n+\n+\n+const FormLabel = styled.label`\n+  display: block;\n+  font-size: ${AppTextStyles.label1.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 8px;\n+`;\n+\n+const FormTextarea = styled.textarea`\n+  width: 100%;\n+  padding: 10px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  resize: vertical;\n+  box-sizing: border-box;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+\n+\n+const ExercisePrescriptionPage: React.FC = () => {\n+  const [searchParams] = useSearchParams();\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n+  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false); // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: '',\n+    bodyImages: {\n+      front: [] as BodyImagePoint[],\n+      spine: [] as BodyImagePoint[],\n+      back: [] as BodyImagePoint[],\n+    },\n+    signatureData: '', // ì„œëª… ë°ì´í„°\n+  });\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n+\n+    loadMembers();\n+  }, []);\n+\n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+          bodyImages: {\n+            front: [],\n+            spine: [],\n+            back: [],\n+          },\n+          signatureData: '',\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+            bodyImages: prescription.bodyImages,\n+            signatureData: prescription.signatureData || '',\n+          });\n+          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+            bodyImages: {\n+              front: [],\n+              spine: [],\n+              back: [],\n+            },\n+            signatureData: '', // ì„œëª… ë°ì´í„° ì´ˆê¸°í™”\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n+  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n+    try {\n+      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+      if (prescription) {\n+        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n+        const member = members.find(m => m.id === prescription.memberId);\n+        if (member) {\n+          setSelectedMember(member);\n+        }\n+        \n+        setCurrentPrescription(prescription);\n+        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n+        setFormData({\n+          height: prescription.height,\n+          weight: prescription.weight,\n+          footSize: prescription.footSize,\n+          medications: prescription.medications,\n+          medicalHistory: prescription.medicalHistory,\n+          painHistory: prescription.painHistory,\n+          bodyImages: prescription.bodyImages,\n+          signatureData: prescription.signatureData || '',\n+        });\n+        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n+      }\n+    } catch (error) {\n+      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [members]);\n+\n+  useEffect(() => {\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    const prescriptionIdParam = searchParams.get('prescriptionId');\n+    \n+    if (prescriptionIdParam) {\n+      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+      loadSpecificPrescription(prescriptionIdParam);\n+    } else if (userIdParam && members.length > 0) {\n+      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n+      const member = members.find(m => m.id === userIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n+    }\n+  }, [searchParams, members, loadSpecificPrescription]);\n+\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value,\n+    }));\n+  };\n+\n+\n+\n+  const handleSave = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: formData.bodyImages,\n+        signatureData: formData.signatureData,\n+        signedAt: formData.signatureData ? (currentPrescription?.signedAt || new Date()) : null,\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n+        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n+      };\n+\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+\n+\n+  const generateAllPagesHTML = () => {\n+    if (!selectedMember) return '';\n+\n+    const formatDate = (dateString: string) => {\n+      if (!dateString) return '';\n+      const date = new Date(dateString);\n+      const year = date.getFullYear();\n+      const month = String(date.getMonth() + 1).padStart(2, '0');\n+      const day = String(date.getDate()).padStart(2, '0');\n+      return `${year}ë…„ ${month}ì›” ${day}ì¼`;\n+    };\n+\n+    return `\n+      <!DOCTYPE html>\n+      <html>\n+      <head>\n+        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+        <style>\n+          @media print {\n+            body { margin: 0; padding: 0; }\n+            .page { \n+              page-break-after: always; \n+              width: 210mm;\n+              height: 297mm;\n+              display: flex;\n+              flex-direction: column;\n+              padding: 20mm;\n+              box-sizing: border-box;\n+            }\n+            .page:last-child { page-break-after: auto; }\n+          }\n+          \n+          @media screen {\n+            .page {\n+              width: 210mm;\n+              height: 297mm;\n+              display: flex;\n+              flex-direction: column;\n+              padding: 20mm;\n+              margin: 20px auto;\n+              background: white;\n+              box-shadow: 0 0 10px rgba(0,0,0,0.1);\n+              box-sizing: border-box;\n+            }\n+          }\n+          \n+          body { \n+            font-family: 'Malgun Gothic', Arial, sans-serif; \n+            margin: 0; \n+            background: #f5f5f5;\n+          }\n+          \n+          .page-header {\n+            margin-bottom: 20px;\n+            font-size: 14px;\n+            font-weight: bold;\n+            height: 30px;\n+            flex-shrink: 0;\n+          }\n+          \n+          .page-title {\n+            text-align: center;\n+            font-size: 24px;\n+            font-weight: bold;\n+            margin-bottom: 20px;\n+            color: #333;\n+            flex-shrink: 0;\n+          }\n+          \n+          .image-container {\n+            display: flex;\n+            justify-content: center;\n+            align-items: center;\n+            flex: 1;\n+            position: relative;\n+          }\n+          \n+          .image-container img {\n+            max-height: 100%;\n+            max-width: 100%;\n+            object-fit: contain;\n+          }\n+          \n+          .chief-complaint {\n+            margin: 20px 0;\n+            flex-shrink: 0;\n+          }\n+          \n+          .chief-complaint-title {\n+            font-size: 16px;\n+            font-weight: bold;\n+            margin-bottom: 10px;\n+            color: #333;\n+          }\n+          \n+          .complaint-text {\n+            height: 100px;\n+            padding: 15px;\n+            border: 2px solid #ddd;\n+            border-radius: 8px;\n+            background: #f9f9f9;\n+            line-height: 1.6;\n+            white-space: pre-wrap;\n+            overflow-y: auto;\n+          }\n+          \n+          .creation-date {\n+            margin-top: 20px;\n+            font-size: 12px;\n+            color: #666;\n+            flex-shrink: 0;\n+          }\n+        </style>\n+      </head>\n+      <body>\n+        <!-- 1í˜ì´ì§€: SPINE Mapping Chart -->\n+        <div class=\"page\">\n+          <div class=\"page-header\">\n+            ì„±ëª…: ${selectedMember.name} &nbsp;&nbsp; \n+            ìƒë…„ì›”ì¼: ${formatDate(selectedMember.birth)} &nbsp;&nbsp; \n+            ì‹ ì¥: ${formData.height}cm\n+          </div>\n+          \n+          <div class=\"page-title\">SPINE Mapping Chart</div>\n+          \n+          <div class=\"image-container\">\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/bone.svg\" alt=\"ì²™ì¶” ì´ë¯¸ì§€\" />\n+          </div>\n+          \n+          <div class=\"chief-complaint\">\n+            <div class=\"chief-complaint-title\">ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n+            <div class=\"complaint-text\">${formData.painHistory || ''}</div>\n+          </div>\n+          \n+          <div class=\"creation-date\">\n+            ìµœì´ˆ ì‘ì„±ì¼ : ${currentPrescription?.createdAt \n+              ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n+              : new Date().toISOString().split('T')[0]\n+            }\n+          </div>\n+        </div>\n+        \n+        <!-- 2í˜ì´ì§€: Target Muscles List (Front) -->\n+        <div class=\"page\">\n+          <div class=\"page-header\">\n+            ${selectedMember.name}\n+          </div>\n+          \n+          <div class=\"page-title\">Target Muscles List</div>\n+          \n+          <div class=\"image-container\">\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/front.png\" alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" />\n+            \n+            <!-- SVG ì˜¤ë²„ë ˆì´ -->\n+            <svg style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;\" \n+                 viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid meet\">\n+              <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"red\" />\n+              <line x1=\"30\" y1=\"25\" x2=\"10\" y2=\"15\" stroke=\"red\" stroke-width=\"0.3\" />\n+              <text x=\"5\" y=\"13\" font-size=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n+              \n+              <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"blue\" />\n+              <line x1=\"40\" y1=\"35\" x2=\"65\" y2=\"25\" stroke=\"blue\" stroke-width=\"0.3\" />\n+              <line x1=\"65\" y1=\"25\" x2=\"75\" y2=\"20\" stroke=\"blue\" stroke-width=\"0.3\" />\n+              <text x=\"75\" y=\"18\" font-size=\"2\" fill=\"black\">ëŒ€í™ê·¼</text>\n+              \n+              <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"green\" />\n+              <line x1=\"45\" y1=\"55\" x2=\"20\" y2=\"70\" stroke=\"green\" stroke-width=\"0.3\" />\n+              <text x=\"5\" y=\"72\" font-size=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n+              \n+              <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"purple\" />\n+              <line x1=\"35\" y1=\"80\" x2=\"65\" y2=\"90\" stroke=\"purple\" stroke-width=\"0.3\" />\n+              <text x=\"65\" y=\"92\" font-size=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n+            </svg>\n+          </div>\n+        </div>\n+        \n+        <!-- 3í˜ì´ì§€: Target Muscles List (Back) -->\n+        <div class=\"page\">\n+          <div class=\"page-header\">\n+            ${selectedMember.name}\n+          </div>\n+          \n+          <div class=\"page-title\">Target Muscles List</div>\n+          \n+          <div class=\"image-container\">\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/back.png\" alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" />\n+          </div>\n+        </div>\n+      </body>\n+      </html>\n+    `;\n+  };\n+\n+  const handleShare = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n+    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n+    \n+    try {\n+      if (navigator.share) {\n+        await navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: currentUrl,\n+        });\n+      } else {\n+        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      }\n+    } catch (error) {\n+      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n+      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n+      try {\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      } catch {\n+        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n+      }\n+    }\n+  };\n+\n+  const handlePrint = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // 3í˜ì´ì§€ ëª¨ë‘ ì¸ì‡„í•˜ëŠ” HTML ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(generateAllPagesHTML());\n+      printWindow.document.close();\n+      \n+      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n+      setTimeout(() => {\n+        printWindow.print();\n+      }, 1000);\n+    }\n+  };\n+\n+  const handleDownloadPDF = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n+      for (let page = 1; page <= 3; page++) {\n+        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n+        const originalPage = currentPage;\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        if (!prescriptionRef.current) continue;\n+        \n+        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+        \n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n+        const imgHeight = 297; // A4 ë†’ì´ (mm)\n+        \n+        // ì²« ë²ˆì§¸ í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n+        if (page > 1) {\n+          pdf.addPage();\n+        }\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+        \n+        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n+        setCurrentPage(originalPage);\n+      }\n+      \n+      // PDF ë‹¤ìš´ë¡œë“œ\n+      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n+      pdf.save(fileName);\n+      \n+    } catch (error) {\n+      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n+      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  return (\n+    <PageContainer>\n+      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n+        {!isSearchPanelCollapsed && (\n+          <>\n+            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birth}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+          </MemberList>\n+          </>\n+        )}\n+      </SearchPanel>      <ButtonPanel>\n+        <ToggleButton \n+          $collapsed={isSearchPanelCollapsed}\n+          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n+          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n+        >\n+          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n+        </ToggleButton>\n+        \n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={isReadOnly}\n+        >\n+          ğŸ’¾\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          ğŸ“¤\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n+          ğŸ–¨ï¸\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n+          ğŸ“\n+        </ActionButton>\n+        \n+        <Divider />\n+        \n+        <PageButton \n+          active={currentPage === 1}\n+          onClick={() => setCurrentPage(1)}\n+        >\n+          1\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 2}\n+          onClick={() => setCurrentPage(2)}\n+        >\n+          2\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 3}\n+          onClick={() => setCurrentPage(3)}\n+        >\n+          3\n+        </PageButton>\n+      </ButtonPanel>\n+\n+      <PrescriptionPanel>\n+\n+\n+        <PrescriptionContainer ref={prescriptionRef}>\n+          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n+          {currentPage === 1 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n+              <div style={{ \n+                display: 'flex', \n+                alignItems: 'center', \n+                gap: '20px', \n+                marginBottom: '30px',\n+                fontSize: '14px',\n+                fontWeight: 'bold',\n+                height: '30px'\n+              }}>\n+                <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n+                <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n+                  year: 'numeric',\n+                  month: 'long', \n+                  day: 'numeric'\n+                }) : ''}</span>\n+                <span>ì‹ ì¥: \n+                  <input \n+                    type=\"text\" \n+                    value={formData.height}\n+                    onChange={(e) => handleInputChange('height', e.target.value)}\n+                    readOnly={isReadOnly}\n+                    style={{\n+                      border: 'none',\n+                      borderBottom: '1px solid #ccc',\n+                      background: 'transparent',\n+                      width: '60px',\n+                      textAlign: 'center',\n+                      fontSize: '14px',\n+                      fontWeight: 'bold',\n+                      marginLeft: '5px',\n+                      marginRight: '2px'\n+                    }}\n+                    placeholder=\"í‚¤\"\n+                  />cm</span>\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '20px',\n+                color: '#333'\n+              }}>SPINE Mapping Chart</div>\n+              \n+              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1,\n+                margin: '20px 0'\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n+                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n+                  style={{ \n+                    maxHeight: '100%',\n+                    maxWidth: '300px',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+              </div>\n+\n+              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n+              <div style={{ margin: '20px 0' }}>\n+                <FormLabel style={{ \n+                  fontSize: '16px', \n+                  fontWeight: 'bold', \n+                  marginBottom: '10px', \n+                  display: 'block'\n+                }}>\n+                  ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n+                </FormLabel>\n+                <FormTextarea\n+                  rows={6}\n+                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n+                  value={formData.painHistory}\n+                  onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+                  readOnly={isReadOnly}\n+                  style={{ \n+                    background: isReadOnly ? '#f5f5f5' : 'white',\n+                    height: '100px',\n+                    resize: 'none'\n+                  }}\n+                />\n+              </div>\n+\n+              {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n+              <div style={{ \n+                marginTop: 'auto',\n+                paddingTop: '20px',\n+                textAlign: 'left', \n+                fontSize: '12px', \n+                color: '#666' \n+              }}>\n+                ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n+                  ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n+                  : new Date().toISOString().split('T')[0]\n+                }\n+              </div>\n+            </div>\n+          )}\n+\n+          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n+          {currentPage === 2 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1,\n+                position: 'relative'\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n+                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+                \n+                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'none'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"xMidYMid meet\"\n+                >\n+                  {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n+                  <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"red\" />\n+                  <line x1=\"30\" y1=\"25\" x2=\"10\" y2=\"15\" stroke=\"red\" strokeWidth=\"0.3\" />\n+                  <text x=\"5\" y=\"13\" fontSize=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n+                  \n+                  {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n+                  <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"blue\" />\n+                  <line x1=\"40\" y1=\"35\" x2=\"65\" y2=\"25\" stroke=\"blue\" strokeWidth=\"0.3\" />\n+                  <line x1=\"65\" y1=\"25\" x2=\"75\" y2=\"20\" stroke=\"blue\" strokeWidth=\"0.3\" />\n+                  <text x=\"75\" y=\"18\" fontSize=\"2\" fill=\"black\">ëŒ€í‰ê·¼</text>\n+                  \n+                  {/* í¬ì¸íŠ¸ 3: ë³µë¶€ ê·¼ìœ¡ */}\n+                  <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"green\" />\n+                  <line x1=\"45\" y1=\"55\" x2=\"20\" y2=\"70\" stroke=\"green\" strokeWidth=\"0.3\" />\n+                  <text x=\"5\" y=\"72\" fontSize=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n+                  \n+                  {/* í¬ì¸íŠ¸ 4: ë‹¤ë¦¬ ê·¼ìœ¡ */}\n+                  <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"purple\" />\n+                  <line x1=\"35\" y1=\"80\" x2=\"65\" y2=\"90\" stroke=\"purple\" strokeWidth=\"0.3\" />\n+                  <text x=\"65\" y=\"92\" fontSize=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n+                </svg>\n+              </div>\n+            </div>\n+          )}\n+\n+          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n+          {currentPage === 3 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n+                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+              </div>\n+            </div>\n+          )}\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n+    </PageContainer>\n+  );\n+};\n+\n+export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764242517422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1158 @@\n+import React, { useEffect, useState, useCallback, useRef } from 'react';\n+import { useSearchParams } from 'react-router-dom';\n+import styled from 'styled-components';\n+import html2canvas from 'html2canvas';\n+import jsPDF from 'jspdf';\n+import { AppColors } from '../styles/colors';\n+import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n+\n+const PageContainer = styled.div`\n+  min-height: 100vh;\n+  display: flex;\n+  background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n+`;\n+\n+const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n+  width: ${props => props.$collapsed ? '0px' : '300px'};\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: ${props => props.$collapsed ? '0' : '20px'};\n+  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n+  transition: all 0.3s ease;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n+  width: 55px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 10px 2px;\n+  display: ${props => props.$hidden ? 'none' : 'flex'};\n+  flex-direction: column;\n+  gap: 6px;\n+  align-items: stretch;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n+  width: 100%;\n+  height: 36px;\n+  border: none;\n+  border-radius: 6px;\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n+  font-size: 16px;\n+  font-weight: 600;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+  }\n+`;\n+\n+const PageButton = styled.button<{ active?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.active ? AppColors.primary : 'white'};\n+  color: ${props => props.active ? 'white' : '#333'};\n+  font-size: 14px;\n+  font-weight: ${props => props.active ? 'bold' : 'normal'};\n+  cursor: pointer;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n+  }\n+`;\n+\n+const Divider = styled.div`\n+  height: 1px;\n+  background: ${AppColors.borderLight};\n+  margin: 10px 0;\n+`;\n+\n+const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n+  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  font-size: 14px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${AppColors.primary};\n+    color: ${AppColors.onPrimary};\n+  }\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  box-sizing: border-box;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  width: 210mm;\n+  height: 297mm;\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  box-sizing: border-box;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20mm;\n+    margin: 0;\n+    max-width: none;\n+    width: 210mm;\n+    height: 297mm;\n+    overflow: visible;\n+  }\n+  \n+  @media screen and (max-width: 900px) {\n+    width: 100%;\n+    height: auto;\n+    min-height: calc(100vh - 40px);\n+  }\n+`;\n+\n+\n+\n+const FormLabel = styled.label`\n+  display: block;\n+  font-size: ${AppTextStyles.label1.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 8px;\n+`;\n+\n+const FormTextarea = styled.textarea`\n+  width: 100%;\n+  padding: 10px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  resize: vertical;\n+  box-sizing: border-box;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+\n+\n+const ExercisePrescriptionPage: React.FC = () => {\n+  const [searchParams] = useSearchParams();\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n+  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false); // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: '',\n+    bodyImages: {\n+      front: [] as BodyImagePoint[],\n+      spine: [] as BodyImagePoint[],\n+      back: [] as BodyImagePoint[],\n+    },\n+    signatureData: '', // ì„œëª… ë°ì´í„°\n+  });\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n+\n+    loadMembers();\n+  }, []);\n+\n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+          bodyImages: {\n+            front: [],\n+            spine: [],\n+            back: [],\n+          },\n+          signatureData: '',\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+            bodyImages: prescription.bodyImages,\n+            signatureData: prescription.signatureData || '',\n+          });\n+          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+            bodyImages: {\n+              front: [],\n+              spine: [],\n+              back: [],\n+            },\n+            signatureData: '', // ì„œëª… ë°ì´í„° ì´ˆê¸°í™”\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n+  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n+    try {\n+      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+      if (prescription) {\n+        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n+        const member = members.find(m => m.id === prescription.memberId);\n+        if (member) {\n+          setSelectedMember(member);\n+        }\n+        \n+        setCurrentPrescription(prescription);\n+        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n+        setFormData({\n+          height: prescription.height,\n+          weight: prescription.weight,\n+          footSize: prescription.footSize,\n+          medications: prescription.medications,\n+          medicalHistory: prescription.medicalHistory,\n+          painHistory: prescription.painHistory,\n+          bodyImages: prescription.bodyImages,\n+          signatureData: prescription.signatureData || '',\n+        });\n+        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n+      }\n+    } catch (error) {\n+      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [members]);\n+\n+  useEffect(() => {\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    const prescriptionIdParam = searchParams.get('prescriptionId');\n+    \n+    if (prescriptionIdParam) {\n+      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+      loadSpecificPrescription(prescriptionIdParam);\n+    } else if (userIdParam && members.length > 0) {\n+      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n+      const member = members.find(m => m.id === userIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n+    }\n+  }, [searchParams, members, loadSpecificPrescription]);\n+\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value,\n+    }));\n+  };\n+\n+\n+\n+  const handleSave = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: formData.bodyImages,\n+        signatureData: formData.signatureData,\n+        signedAt: formData.signatureData ? (currentPrescription?.signedAt || new Date()) : null,\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n+        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n+      };\n+\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+\n+\n+  const generateAllPagesHTML = () => {\n+    if (!selectedMember) return '';\n+\n+    const formatDate = (dateString: string) => {\n+      if (!dateString) return '';\n+      const date = new Date(dateString);\n+      const year = date.getFullYear();\n+      const month = String(date.getMonth() + 1).padStart(2, '0');\n+      const day = String(date.getDate()).padStart(2, '0');\n+      return `${year}ë…„ ${month}ì›” ${day}ì¼`;\n+    };\n+\n+    return `\n+      <!DOCTYPE html>\n+      <html>\n+      <head>\n+        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n+        <style>\n+          @media print {\n+            * {\n+              -webkit-print-color-adjust: exact !important;\n+              color-adjust: exact !important;\n+              print-color-adjust: exact !important;\n+            }\n+            body { \n+              margin: 0; \n+              padding: 0; \n+              font-size: 12pt;\n+            }\n+            .page { \n+              page-break-after: always; \n+              page-break-inside: avoid;\n+              width: 210mm;\n+              height: 297mm;\n+              padding: 15mm;\n+              box-sizing: border-box;\n+              overflow: hidden;\n+              position: relative;\n+            }\n+            .page:last-child { page-break-after: auto; }\n+          }\n+          \n+          @media screen {\n+            .page {\n+              width: 210mm;\n+              height: 297mm;\n+              padding: 15mm;\n+              margin: 20px auto;\n+              background: white;\n+              box-shadow: 0 0 10px rgba(0,0,0,0.1);\n+              box-sizing: border-box;\n+              overflow: hidden;\n+              position: relative;\n+            }\n+          }\n+          \n+          body { \n+            font-family: 'Malgun Gothic', Arial, sans-serif; \n+            margin: 0; \n+            background: #f5f5f5;\n+          }\n+          \n+          .page-header {\n+            margin-bottom: 15mm;\n+            font-size: 14px;\n+            font-weight: bold;\n+            height: 25px;\n+          }\n+          \n+          .page-title {\n+            text-align: center;\n+            font-size: 24px;\n+            font-weight: bold;\n+            margin-bottom: 15mm;\n+            color: #333;\n+          }\n+          \n+          .spine-page {\n+            display: flex;\n+            flex-direction: column;\n+            height: 100%;\n+          }\n+          \n+          .spine-image-container {\n+            flex: 1;\n+            display: flex;\n+            justify-content: center;\n+            align-items: center;\n+            margin: 10mm 0;\n+            max-height: 120mm;\n+          }\n+          \n+          .spine-image-container img {\n+            max-height: 100%;\n+            max-width: 200px;\n+            object-fit: contain;\n+          }\n+          \n+          .muscle-page {\n+            display: flex;\n+            flex-direction: column;\n+            height: 100%;\n+          }\n+          \n+          .muscle-image-container {\n+            flex: 1;\n+            display: flex;\n+            justify-content: center;\n+            align-items: center;\n+            position: relative;\n+            margin: 10mm 0;\n+            max-height: 220mm;\n+          }\n+          \n+          .muscle-image-container img {\n+            max-height: 100%;\n+            max-width: 100%;\n+            object-fit: contain;\n+          }\n+          \n+          .chief-complaint {\n+            margin-bottom: 15mm;\n+            height: auto;\n+            max-height: 60mm;\n+          }\n+          \n+          .chief-complaint-title {\n+            font-size: 16px;\n+            font-weight: bold;\n+            margin-bottom: 8px;\n+            color: #333;\n+          }\n+          \n+          .complaint-text {\n+            height: 40mm;\n+            padding: 8px;\n+            border: 2px solid #ddd;\n+            border-radius: 4px;\n+            background: #f9f9f9;\n+            line-height: 1.4;\n+            white-space: pre-wrap;\n+            overflow: hidden;\n+            font-size: 12px;\n+          }\n+          \n+          .creation-date {\n+            position: absolute;\n+            bottom: 15mm;\n+            left: 15mm;\n+            font-size: 12px;\n+            color: #666;\n+          }\n+        </style>\n+      </head>\n+      <body>\n+        <!-- 1í˜ì´ì§€: SPINE Mapping Chart -->\n+        <div class=\"page spine-page\">\n+          <div class=\"page-header\">\n+            ì„±ëª…: ${selectedMember.name} &nbsp;&nbsp; \n+            ìƒë…„ì›”ì¼: ${formatDate(selectedMember.birth)} &nbsp;&nbsp; \n+            ì‹ ì¥: ${formData.height}cm\n+          </div>\n+          \n+          <div class=\"page-title\">SPINE Mapping Chart</div>\n+          \n+          <div class=\"spine-image-container\">\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/bone.svg\" alt=\"ì²™ì¶” ì´ë¯¸ì§€\" />\n+          </div>\n+          \n+          <div class=\"chief-complaint\">\n+            <div class=\"chief-complaint-title\">ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n+            <div class=\"complaint-text\">${formData.painHistory || ''}</div>\n+          </div>\n+          \n+          <div class=\"creation-date\">\n+            ìµœì´ˆ ì‘ì„±ì¼ : ${currentPrescription?.createdAt \n+              ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n+              : new Date().toISOString().split('T')[0]\n+            }\n+          </div>\n+        </div>\n+        \n+        <!-- 2í˜ì´ì§€: Target Muscles List (Front) -->\n+        <div class=\"page muscle-page\">\n+          <div class=\"page-header\">\n+            ${selectedMember.name}\n+          </div>\n+          \n+          <div class=\"page-title\">Target Muscles List</div>\n+          \n+          <div class=\"muscle-image-container\">\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/front.png\" alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" />\n+            \n+            <!-- SVG ì˜¤ë²„ë ˆì´ -->\n+            <svg style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;\" \n+                 viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid meet\">\n+              <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"red\" />\n+              <line x1=\"30\" y1=\"25\" x2=\"10\" y2=\"15\" stroke=\"red\" stroke-width=\"0.3\" />\n+              <text x=\"5\" y=\"13\" font-size=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n+              \n+              <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"blue\" />\n+              <line x1=\"40\" y1=\"35\" x2=\"65\" y2=\"25\" stroke=\"blue\" stroke-width=\"0.3\" />\n+              <line x1=\"65\" y1=\"25\" x2=\"75\" y2=\"20\" stroke=\"blue\" stroke-width=\"0.3\" />\n+              <text x=\"75\" y=\"18\" font-size=\"2\" fill=\"black\">ëŒ€í™ê·¼</text>\n+              \n+              <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"green\" />\n+              <line x1=\"45\" y1=\"55\" x2=\"20\" y2=\"70\" stroke=\"green\" stroke-width=\"0.3\" />\n+              <text x=\"5\" y=\"72\" font-size=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n+              \n+              <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"purple\" />\n+              <line x1=\"35\" y1=\"80\" x2=\"65\" y2=\"90\" stroke=\"purple\" stroke-width=\"0.3\" />\n+              <text x=\"65\" y=\"92\" font-size=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n+            </svg>\n+          </div>\n+        </div>\n+        \n+        <!-- 3í˜ì´ì§€: Target Muscles List (Back) -->\n+        <div class=\"page muscle-page\">\n+          <div class=\"page-header\">\n+            ${selectedMember.name}\n+          </div>\n+          \n+          <div class=\"page-title\">Target Muscles List</div>\n+          \n+          <div class=\"muscle-image-container\">\n+            <img src=\"${process.env.PUBLIC_URL || ''}/cms/back.png\" alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" />\n+          </div>\n+        </div>\n+      </body>\n+      </html>\n+    `;\n+  };\n+\n+  const handleShare = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n+    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n+    \n+    try {\n+      if (navigator.share) {\n+        await navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: currentUrl,\n+        });\n+      } else {\n+        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      }\n+    } catch (error) {\n+      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n+      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n+      try {\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      } catch {\n+        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n+      }\n+    }\n+  };\n+\n+  const handlePrint = () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // 3í˜ì´ì§€ ëª¨ë‘ ì¸ì‡„í•˜ëŠ” HTML ìƒì„±\n+    const printWindow = window.open('', '_blank', 'width=800,height=600');\n+    if (printWindow) {\n+      printWindow.document.write(generateAllPagesHTML());\n+      printWindow.document.close();\n+      \n+      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n+      setTimeout(() => {\n+        printWindow.print();\n+      }, 1000);\n+    }\n+  };\n+\n+  const handleDownloadPDF = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n+      for (let page = 1; page <= 3; page++) {\n+        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n+        const originalPage = currentPage;\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        if (!prescriptionRef.current) continue;\n+        \n+        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+        \n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n+        const imgHeight = 297; // A4 ë†’ì´ (mm)\n+        \n+        // ì²« ë²ˆì§¸ í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n+        if (page > 1) {\n+          pdf.addPage();\n+        }\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+        \n+        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n+        setCurrentPage(originalPage);\n+      }\n+      \n+      // PDF ë‹¤ìš´ë¡œë“œ\n+      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n+      pdf.save(fileName);\n+      \n+    } catch (error) {\n+      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n+      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  return (\n+    <PageContainer>\n+      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n+        {!isSearchPanelCollapsed && (\n+          <>\n+            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birth}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+          </MemberList>\n+          </>\n+        )}\n+      </SearchPanel>      <ButtonPanel>\n+        <ToggleButton \n+          $collapsed={isSearchPanelCollapsed}\n+          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n+          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n+        >\n+          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n+        </ToggleButton>\n+        \n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={isReadOnly}\n+        >\n+          ğŸ’¾\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          ğŸ“¤\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n+          ğŸ–¨ï¸\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n+          ğŸ“\n+        </ActionButton>\n+        \n+        <Divider />\n+        \n+        <PageButton \n+          active={currentPage === 1}\n+          onClick={() => setCurrentPage(1)}\n+        >\n+          1\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 2}\n+          onClick={() => setCurrentPage(2)}\n+        >\n+          2\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 3}\n+          onClick={() => setCurrentPage(3)}\n+        >\n+          3\n+        </PageButton>\n+      </ButtonPanel>\n+\n+      <PrescriptionPanel>\n+\n+\n+        <PrescriptionContainer ref={prescriptionRef}>\n+          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n+          {currentPage === 1 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n+              <div style={{ \n+                display: 'flex', \n+                alignItems: 'center', \n+                gap: '20px', \n+                marginBottom: '30px',\n+                fontSize: '14px',\n+                fontWeight: 'bold',\n+                height: '30px'\n+              }}>\n+                <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n+                <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n+                  year: 'numeric',\n+                  month: 'long', \n+                  day: 'numeric'\n+                }) : ''}</span>\n+                <span>ì‹ ì¥: \n+                  <input \n+                    type=\"text\" \n+                    value={formData.height}\n+                    onChange={(e) => handleInputChange('height', e.target.value)}\n+                    readOnly={isReadOnly}\n+                    style={{\n+                      border: 'none',\n+                      borderBottom: '1px solid #ccc',\n+                      background: 'transparent',\n+                      width: '60px',\n+                      textAlign: 'center',\n+                      fontSize: '14px',\n+                      fontWeight: 'bold',\n+                      marginLeft: '5px',\n+                      marginRight: '2px'\n+                    }}\n+                    placeholder=\"í‚¤\"\n+                  />cm</span>\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '20px',\n+                color: '#333'\n+              }}>SPINE Mapping Chart</div>\n+              \n+              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1,\n+                margin: '20px 0'\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n+                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n+                  style={{ \n+                    maxHeight: '100%',\n+                    maxWidth: '300px',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+              </div>\n+\n+              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n+              <div style={{ margin: '20px 0' }}>\n+                <FormLabel style={{ \n+                  fontSize: '16px', \n+                  fontWeight: 'bold', \n+                  marginBottom: '10px', \n+                  display: 'block'\n+                }}>\n+                  ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n+                </FormLabel>\n+                <FormTextarea\n+                  rows={6}\n+                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n+                  value={formData.painHistory}\n+                  onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+                  readOnly={isReadOnly}\n+                  style={{ \n+                    background: isReadOnly ? '#f5f5f5' : 'white',\n+                    height: '100px',\n+                    resize: 'none'\n+                  }}\n+                />\n+              </div>\n+\n+              {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n+              <div style={{ \n+                marginTop: 'auto',\n+                paddingTop: '20px',\n+                textAlign: 'left', \n+                fontSize: '12px', \n+                color: '#666' \n+              }}>\n+                ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n+                  ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n+                  : new Date().toISOString().split('T')[0]\n+                }\n+              </div>\n+            </div>\n+          )}\n+\n+          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n+          {currentPage === 2 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1,\n+                position: 'relative'\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n+                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+                \n+                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'none'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"xMidYMid meet\"\n+                >\n+                  {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n+                  <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"red\" />\n+                  <line x1=\"30\" y1=\"25\" x2=\"10\" y2=\"15\" stroke=\"red\" strokeWidth=\"0.3\" />\n+                  <text x=\"5\" y=\"13\" fontSize=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n+                  \n+                  {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n+                  <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"blue\" />\n+                  <line x1=\"40\" y1=\"35\" x2=\"65\" y2=\"25\" stroke=\"blue\" strokeWidth=\"0.3\" />\n+                  <line x1=\"65\" y1=\"25\" x2=\"75\" y2=\"20\" stroke=\"blue\" strokeWidth=\"0.3\" />\n+                  <text x=\"75\" y=\"18\" fontSize=\"2\" fill=\"black\">ëŒ€í‰ê·¼</text>\n+                  \n+                  {/* í¬ì¸íŠ¸ 3: ë³µë¶€ ê·¼ìœ¡ */}\n+                  <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"green\" />\n+                  <line x1=\"45\" y1=\"55\" x2=\"20\" y2=\"70\" stroke=\"green\" strokeWidth=\"0.3\" />\n+                  <text x=\"5\" y=\"72\" fontSize=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n+                  \n+                  {/* í¬ì¸íŠ¸ 4: ë‹¤ë¦¬ ê·¼ìœ¡ */}\n+                  <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"purple\" />\n+                  <line x1=\"35\" y1=\"80\" x2=\"65\" y2=\"90\" stroke=\"purple\" strokeWidth=\"0.3\" />\n+                  <text x=\"65\" y=\"92\" fontSize=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n+                </svg>\n+              </div>\n+            </div>\n+          )}\n+\n+          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n+          {currentPage === 3 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n+                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+              </div>\n+            </div>\n+          )}\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n+    </PageContainer>\n+  );\n+};\n+\n+export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764242850996,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -544,88 +544,94 @@\n             background: #f5f5f5;\n           }\n           \n           .page-header {\n-            margin-bottom: 15mm;\n+            margin-bottom: 8mm;\n             font-size: 14px;\n             font-weight: bold;\n-            height: 25px;\n+            height: 8mm;\n+            flex-shrink: 0;\n           }\n           \n           .page-title {\n             text-align: center;\n-            font-size: 24px;\n+            font-size: 20px;\n             font-weight: bold;\n-            margin-bottom: 15mm;\n+            margin-bottom: 8mm;\n             color: #333;\n+            flex-shrink: 0;\n           }\n           \n           .spine-page {\n             display: flex;\n             flex-direction: column;\n-            height: 100%;\n+            height: calc(297mm - 30mm);\n           }\n           \n           .spine-image-container {\n             flex: 1;\n             display: flex;\n             justify-content: center;\n             align-items: center;\n-            margin: 10mm 0;\n-            max-height: 120mm;\n+            margin: 5mm 0;\n+            min-height: 120mm;\n           }\n           \n           .spine-image-container img {\n             max-height: 100%;\n-            max-width: 200px;\n+            max-width: 300px;\n+            width: auto;\n+            height: auto;\n             object-fit: contain;\n           }\n           \n           .muscle-page {\n             display: flex;\n             flex-direction: column;\n-            height: 100%;\n+            height: calc(297mm - 30mm);\n           }\n           \n           .muscle-image-container {\n             flex: 1;\n             display: flex;\n             justify-content: center;\n             align-items: center;\n             position: relative;\n-            margin: 10mm 0;\n-            max-height: 220mm;\n+            margin: 5mm 0;\n+            min-height: 200mm;\n           }\n           \n           .muscle-image-container img {\n             max-height: 100%;\n             max-width: 100%;\n+            width: auto;\n+            height: auto;\n             object-fit: contain;\n           }\n           \n           .chief-complaint {\n-            margin-bottom: 15mm;\n-            height: auto;\n-            max-height: 60mm;\n+            margin-bottom: 10mm;\n+            height: 50mm;\n+            flex-shrink: 0;\n           }\n           \n           .chief-complaint-title {\n-            font-size: 16px;\n+            font-size: 14px;\n             font-weight: bold;\n-            margin-bottom: 8px;\n+            margin-bottom: 5mm;\n             color: #333;\n           }\n           \n           .complaint-text {\n-            height: 40mm;\n-            padding: 8px;\n-            border: 2px solid #ddd;\n-            border-radius: 4px;\n+            height: 35mm;\n+            padding: 5mm;\n+            border: 1px solid #ddd;\n+            border-radius: 2mm;\n             background: #f9f9f9;\n-            line-height: 1.4;\n+            line-height: 1.3;\n             white-space: pre-wrap;\n             overflow: hidden;\n-            font-size: 12px;\n+            font-size: 11px;\n           }\n           \n           .creation-date {\n             position: absolute;\n@@ -747,1145 +753,59 @@\n       }\n     }\n   };\n \n-  const handlePrint = () => {\n+  const handlePrint = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n     }\n \n-    // 3í˜ì´ì§€ ëª¨ë‘ ì¸ì‡„í•˜ëŠ” HTML ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(generateAllPagesHTML());\n-      printWindow.document.close();\n-      \n-      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n-      setTimeout(() => {\n-        printWindow.print();\n-      }, 1000);\n-    }\n-  };\n-\n-  const handleDownloadPDF = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n     try {\n+      // PDF ìƒì„±\n       const pdf = new jsPDF('p', 'mm', 'a4');\n       \n-      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n       for (let page = 1; page <= 3; page++) {\n-        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n-        const originalPage = currentPage;\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        if (!prescriptionRef.current) continue;\n-        \n-        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-        \n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n-        const imgHeight = 297; // A4 ë†’ì´ (mm)\n-        \n-        // ì²« ë²ˆì§¸ í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n         if (page > 1) {\n           pdf.addPage();\n         }\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-        \n-        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n-        setCurrentPage(originalPage);\n-      }\n-      \n-      // PDF ë‹¤ìš´ë¡œë“œ\n-      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n-      pdf.save(fileName);\n-      \n-    } catch (error) {\n-      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n-      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n \n-  return (\n-    <PageContainer>\n-      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n-        {!isSearchPanelCollapsed && (\n-          <>\n-            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n-        <SearchInput\n-          type=\"text\"\n-          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n-          value={searchTerm}\n-          onChange={(e) => setSearchTerm(e.target.value)}\n-        />\n-        <MemberList>\n-          {filteredMembers.map(member => (\n-            <MemberItem\n-              key={member.id}\n-              selected={selectedMember?.id === member.id}\n-              onClick={() => handleMemberSelect(member)}\n-            >\n-              <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birth}</MemberInfo>\n-              <MemberInfo>{member.phone}</MemberInfo>\n-            </MemberItem>\n-          ))}\n-          </MemberList>\n-          </>\n-        )}\n-      </SearchPanel>      <ButtonPanel>\n-        <ToggleButton \n-          $collapsed={isSearchPanelCollapsed}\n-          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n-          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n-        >\n-          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n-        </ToggleButton>\n-        \n-        <ActionButton \n-          onClick={handleSave} \n-          title=\"ì €ì¥\"\n-          disabled={isReadOnly}\n-        >\n-          ğŸ’¾\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          ğŸ“¤\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n-          ğŸ–¨ï¸\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n-          ğŸ“\n-        </ActionButton>\n-        \n-        <Divider />\n-        \n-        <PageButton \n-          active={currentPage === 1}\n-          onClick={() => setCurrentPage(1)}\n-        >\n-          1\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 2}\n-          onClick={() => setCurrentPage(2)}\n-        >\n-          2\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 3}\n-          onClick={() => setCurrentPage(3)}\n-        >\n-          3\n-        </PageButton>\n-      </ButtonPanel>\n-\n-      <PrescriptionPanel>\n-\n-\n-        <PrescriptionContainer ref={prescriptionRef}>\n-          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n-          {currentPage === 1 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n-              <div style={{ \n-                display: 'flex', \n-                alignItems: 'center', \n-                gap: '20px', \n-                marginBottom: '30px',\n-                fontSize: '14px',\n-                fontWeight: 'bold',\n-                height: '30px'\n-              }}>\n-                <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n-                <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n-                  year: 'numeric',\n-                  month: 'long', \n-                  day: 'numeric'\n-                }) : ''}</span>\n-                <span>ì‹ ì¥: \n-                  <input \n-                    type=\"text\" \n-                    value={formData.height}\n-                    onChange={(e) => handleInputChange('height', e.target.value)}\n-                    readOnly={isReadOnly}\n-                    style={{\n-                      border: 'none',\n-                      borderBottom: '1px solid #ccc',\n-                      background: 'transparent',\n-                      width: '60px',\n-                      textAlign: 'center',\n-                      fontSize: '14px',\n-                      fontWeight: 'bold',\n-                      marginLeft: '5px',\n-                      marginRight: '2px'\n-                    }}\n-                    placeholder=\"í‚¤\"\n-                  />cm</span>\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '20px',\n-                color: '#333'\n-              }}>SPINE Mapping Chart</div>\n-              \n-              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                margin: '20px 0'\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n-                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n-                  style={{ \n-                    maxHeight: '100%',\n-                    maxWidth: '300px',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-              </div>\n-\n-              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n-              <div style={{ margin: '20px 0' }}>\n-                <FormLabel style={{ \n-                  fontSize: '16px', \n-                  fontWeight: 'bold', \n-                  marginBottom: '10px', \n-                  display: 'block'\n-                }}>\n-                  ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n-                </FormLabel>\n-                <FormTextarea\n-                  rows={6}\n-                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n-                  value={formData.painHistory}\n-                  onChange={(e) => handleInputChange('painHistory', e.target.value)}\n-                  readOnly={isReadOnly}\n-                  style={{ \n-                    background: isReadOnly ? '#f5f5f5' : 'white',\n-                    height: '100px',\n-                    resize: 'none'\n-                  }}\n-                />\n-              </div>\n-\n-              {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n-              <div style={{ \n-                marginTop: 'auto',\n-                paddingTop: '20px',\n-                textAlign: 'left', \n-                fontSize: '12px', \n-                color: '#666' \n-              }}>\n-                ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n-                  ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n-                  : new Date().toISOString().split('T')[0]\n-                }\n-              </div>\n-            </div>\n-          )}\n-\n-          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n-          {currentPage === 2 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                position: 'relative'\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n-                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-                \n-                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n-                <svg \n-                  style={{\n-                    position: 'absolute',\n-                    top: 0,\n-                    left: 0,\n-                    width: '100%',\n-                    height: '100%',\n-                    pointerEvents: 'none'\n-                  }}\n-                  viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"xMidYMid meet\"\n-                >\n-                  {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n-                  <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"red\" />\n-                  <line x1=\"30\" y1=\"25\" x2=\"10\" y2=\"15\" stroke=\"red\" strokeWidth=\"0.3\" />\n-                  <text x=\"5\" y=\"13\" fontSize=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n-                  \n-                  {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n-                  <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"blue\" />\n-                  <line x1=\"40\" y1=\"35\" x2=\"65\" y2=\"25\" stroke=\"blue\" strokeWidth=\"0.3\" />\n-                  <line x1=\"65\" y1=\"25\" x2=\"75\" y2=\"20\" stroke=\"blue\" strokeWidth=\"0.3\" />\n-                  <text x=\"75\" y=\"18\" fontSize=\"2\" fill=\"black\">ëŒ€í‰ê·¼</text>\n-                  \n-                  {/* í¬ì¸íŠ¸ 3: ë³µë¶€ ê·¼ìœ¡ */}\n-                  <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"green\" />\n-                  <line x1=\"45\" y1=\"55\" x2=\"20\" y2=\"70\" stroke=\"green\" strokeWidth=\"0.3\" />\n-                  <text x=\"5\" y=\"72\" fontSize=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n-                  \n-                  {/* í¬ì¸íŠ¸ 4: ë‹¤ë¦¬ ê·¼ìœ¡ */}\n-                  <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"purple\" />\n-                  <line x1=\"35\" y1=\"80\" x2=\"65\" y2=\"90\" stroke=\"purple\" strokeWidth=\"0.3\" />\n-                  <text x=\"65\" y=\"92\" fontSize=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n-                </svg>\n-              </div>\n-            </div>\n-          )}\n-\n-          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n-          {currentPage === 3 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n-                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-              </div>\n-            </div>\n-          )}\n-        </PrescriptionContainer>\n-      </PrescriptionPanel>\n-    </PageContainer>\n-  );\n-};\n-\n-export default ExercisePrescriptionPage;\n-import React, { useEffect, useState, useCallback, useRef } from 'react';\n-import { useSearchParams } from 'react-router-dom';\n-import styled from 'styled-components';\n-import html2canvas from 'html2canvas';\n-import jsPDF from 'jspdf';\n-import { AppColors } from '../styles/colors';\n-import { AppTextStyles } from '../styles/textStyles';\n-import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n-\n-const PageContainer = styled.div`\n-  min-height: 100vh;\n-  display: flex;\n-  background: ${AppColors.background};\n-  \n-  @media print {\n-    display: block;\n-    background: white;\n-  }\n-`;\n-\n-const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n-  width: ${props => props.$collapsed ? '0px' : '300px'};\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: ${props => props.$collapsed ? '0' : '20px'};\n-  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n-  transition: all 0.3s ease;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n-  width: 55px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 10px 2px;\n-  display: ${props => props.$hidden ? 'none' : 'flex'};\n-  flex-direction: column;\n-  gap: 6px;\n-  align-items: stretch;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 100%;\n-  height: 36px;\n-  border: none;\n-  border-radius: 6px;\n-  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n-  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: 16px;\n-  font-weight: 600;\n-  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-  }\n-`;\n-\n-const PageButton = styled.button<{ active?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.active ? AppColors.primary : 'white'};\n-  color: ${props => props.active ? 'white' : '#333'};\n-  font-size: 14px;\n-  font-weight: ${props => props.active ? 'bold' : 'normal'};\n-  cursor: pointer;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n-  }\n-`;\n-\n-const Divider = styled.div`\n-  height: 1px;\n-  background: ${AppColors.borderLight};\n-  margin: 10px 0;\n-`;\n-\n-const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n-  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n-  cursor: pointer;\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  font-size: 14px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${AppColors.primary};\n-    color: ${AppColors.onPrimary};\n-  }\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-\n-\n-const SearchTitle = styled.h2`\n-  font-size: ${AppTextStyles.title2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SearchInput = styled.input`\n-  width: 100%;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  margin-bottom: 16px;\n-  box-sizing: border-box;\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const MemberList = styled.div`\n-  max-height: 400px;\n-  overflow-y: auto;\n-`;\n-\n-const MemberItem = styled.div<{ selected?: boolean }>`\n-  padding: 12px;\n-  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 8px;\n-  margin-bottom: 8px;\n-  cursor: pointer;\n-  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n-  \n-  &:hover {\n-    background: ${AppColors.primary}20;\n-  }\n-`;\n-\n-const MemberName = styled.div`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 4px;\n-`;\n-\n-const MemberInfo = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const PrescriptionPanel = styled.div`\n-  flex: 1;\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    padding: 0;\n-    overflow: visible;\n-  }\n-`;\n-\n-const PrescriptionContainer = styled.div`\n-  width: 210mm;\n-  height: 297mm;\n-  max-width: 800px;\n-  margin: 0 auto;\n-  background: white;\n-  padding: 40px;\n-  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  box-sizing: border-box;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    box-shadow: none;\n-    padding: 20mm;\n-    margin: 0;\n-    max-width: none;\n-    width: 210mm;\n-    height: 297mm;\n-    overflow: visible;\n-  }\n-  \n-  @media screen and (max-width: 900px) {\n-    width: 100%;\n-    height: auto;\n-    min-height: calc(100vh - 40px);\n-  }\n-`;\n-\n-\n-\n-const FormLabel = styled.label`\n-  display: block;\n-  font-size: ${AppTextStyles.label1.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 8px;\n-`;\n-\n-const FormTextarea = styled.textarea`\n-  width: 100%;\n-  padding: 10px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  resize: vertical;\n-  box-sizing: border-box;\n-  \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-\n-\n-const ExercisePrescriptionPage: React.FC = () => {\n-  const [searchParams] = useSearchParams();\n-  const [searchTerm, setSearchTerm] = useState('');\n-  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n-  const [members, setMembers] = useState<Member[]>([]);\n-  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n-  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false); // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n-  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n-  const [formData, setFormData] = useState({\n-    height: '',\n-    weight: '',\n-    footSize: '',\n-    medications: '',\n-    medicalHistory: {\n-      musculoskeletal: false,\n-      cardiovascular: false,\n-      diabetes: false,\n-      osteoporosis: false,\n-      thyroid: false,\n-      varicose: false,\n-      arthritis: false,\n-    } as ExercisePrescriptionMedicalHistory,\n-    painHistory: '',\n-    bodyImages: {\n-      front: [] as BodyImagePoint[],\n-      spine: [] as BodyImagePoint[],\n-      back: [] as BodyImagePoint[],\n-    },\n-    signatureData: '', // ì„œëª… ë°ì´í„°\n-  });\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n-  useEffect(() => {\n-    const loadMembers = async () => {\n-      try {\n-        const allMembers = await dbManager.getAllMembers();\n-        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n-        const activeMembers = allMembers.filter(member => member.isActive);\n-        setMembers(activeMembers);\n-      } catch (error) {\n-        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-      }\n-    };\n-\n-    loadMembers();\n-  }, []);\n-\n-  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n-  useEffect(() => {\n-    const loadPrescription = async () => {\n-      if (!selectedMember) {\n-        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n-        setCurrentPrescription(null);\n-        setFormData({\n-          height: '',\n-          weight: '',\n-          footSize: '',\n-          medications: '',\n-          medicalHistory: {\n-            musculoskeletal: false,\n-            cardiovascular: false,\n-            diabetes: false,\n-            osteoporosis: false,\n-            thyroid: false,\n-            varicose: false,\n-            arthritis: false,\n-          },\n-          painHistory: '',\n-          bodyImages: {\n-            front: [],\n-            spine: [],\n-            back: [],\n-          },\n-          signatureData: '',\n-        });\n-        return;\n-      }\n-\n-      try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n-        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n-        \n-        if (prescription) {\n-          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n-          setCurrentPrescription(prescription);\n-          setFormData({\n-            height: prescription.height,\n-            weight: prescription.weight,\n-            footSize: prescription.footSize,\n-            medications: prescription.medications,\n-            medicalHistory: prescription.medicalHistory,\n-            painHistory: prescription.painHistory,\n-            bodyImages: prescription.bodyImages,\n-            signatureData: prescription.signatureData || '',\n+        const pageElement = document.getElementById(`print-page-${page}`);\n+        if (pageElement) {\n+          const canvas = await html2canvas(pageElement, {\n+            scale: 2,\n+            useCORS: true,\n+            allowTaint: true,\n+            backgroundColor: '#ffffff'\n           });\n-          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n-        } else {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n-          setCurrentPrescription(null);\n-          setFormData({\n-            height: '',\n-            weight: '',\n-            footSize: '',\n-            medications: '',\n-            medicalHistory: {\n-              musculoskeletal: false,\n-              cardiovascular: false,\n-              diabetes: false,\n-              osteoporosis: false,\n-              thyroid: false,\n-              varicose: false,\n-              arthritis: false,\n-            },\n-            painHistory: '',\n-            bodyImages: {\n-              front: [],\n-              spine: [],\n-              back: [],\n-            },\n-            signatureData: '', // ì„œëª… ë°ì´í„° ì´ˆê¸°í™”\n-          });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n-        }\n-      } catch (error) {\n-        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-      }\n-    };\n \n-    loadPrescription();\n-  }, [selectedMember]);\n-\n-  const filteredMembers = members.filter(member =>\n-    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n-  );\n-\n-  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n-    try {\n-      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-      if (prescription) {\n-        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n-        const member = members.find(m => m.id === prescription.memberId);\n-        if (member) {\n-          setSelectedMember(member);\n+          const imgData = canvas.toDataURL('image/png');\n+          const imgWidth = 210;\n+          const imgHeight = (canvas.height * imgWidth) / canvas.width;\n+          \n+          pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n         }\n-        \n-        setCurrentPrescription(prescription);\n-        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n-        setFormData({\n-          height: prescription.height,\n-          weight: prescription.weight,\n-          footSize: prescription.footSize,\n-          medications: prescription.medications,\n-          medicalHistory: prescription.medicalHistory,\n-          painHistory: prescription.painHistory,\n-          bodyImages: prescription.bodyImages,\n-          signatureData: prescription.signatureData || '',\n-        });\n-        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n       }\n-    } catch (error) {\n-      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-    }\n-  }, [members]);\n \n-  useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n-    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    const prescriptionIdParam = searchParams.get('prescriptionId');\n-    \n-    if (prescriptionIdParam) {\n-      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-      loadSpecificPrescription(prescriptionIdParam);\n-    } else if (userIdParam && members.length > 0) {\n-      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n-      const member = members.find(m => m.id === userIdParam);\n-      if (member) {\n-        setSelectedMember(member);\n-      }\n-    }\n-  }, [searchParams, members, loadSpecificPrescription]);\n-\n-  const handleMemberSelect = (member: Member) => {\n-    setSelectedMember(member);\n-  };\n-\n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value,\n-    }));\n-  };\n-\n-\n-\n-  const handleSave = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const prescriptionData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        height: formData.height,\n-        weight: formData.weight,\n-        footSize: formData.footSize,\n-        medications: formData.medications,\n-        medicalHistory: formData.medicalHistory,\n-        painHistory: formData.painHistory,\n-        bodyImages: formData.bodyImages,\n-        signatureData: formData.signatureData,\n-        signedAt: formData.signatureData ? (currentPrescription?.signedAt || new Date()) : null,\n-        isActive: true,\n-        prescriptionDate: new Date(),\n-        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n-        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n-      };\n-\n-      if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      } else {\n-        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      }\n+      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n+      const pdfBlob = pdf.output('blob');\n+      const pdfUrl = URL.createObjectURL(pdfBlob);\n       \n-      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    } catch (error) {\n-      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-\n-\n-  const generateAllPagesHTML = () => {\n-    if (!selectedMember) return '';\n-\n-    const formatDate = (dateString: string) => {\n-      if (!dateString) return '';\n-      const date = new Date(dateString);\n-      const year = date.getFullYear();\n-      const month = String(date.getMonth() + 1).padStart(2, '0');\n-      const day = String(date.getDate()).padStart(2, '0');\n-      return `${year}ë…„ ${month}ì›” ${day}ì¼`;\n-    };\n-\n-    return `\n-      <!DOCTYPE html>\n-      <html>\n-      <head>\n-        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n-        <style>\n-          @media print {\n-            body { margin: 0; padding: 0; }\n-            .page { \n-              page-break-after: always; \n-              width: 210mm;\n-              height: 297mm;\n-              display: flex;\n-              flex-direction: column;\n-              padding: 20mm;\n-              box-sizing: border-box;\n-            }\n-            .page:last-child { page-break-after: auto; }\n-          }\n-          \n-          @media screen {\n-            .page {\n-              width: 210mm;\n-              height: 297mm;\n-              display: flex;\n-              flex-direction: column;\n-              padding: 20mm;\n-              margin: 20px auto;\n-              background: white;\n-              box-shadow: 0 0 10px rgba(0,0,0,0.1);\n-              box-sizing: border-box;\n-            }\n-          }\n-          \n-          body { \n-            font-family: 'Malgun Gothic', Arial, sans-serif; \n-            margin: 0; \n-            background: #f5f5f5;\n-          }\n-          \n-          .page-header {\n-            margin-bottom: 20px;\n-            font-size: 14px;\n-            font-weight: bold;\n-            height: 30px;\n-            flex-shrink: 0;\n-          }\n-          \n-          .page-title {\n-            text-align: center;\n-            font-size: 24px;\n-            font-weight: bold;\n-            margin-bottom: 20px;\n-            color: #333;\n-            flex-shrink: 0;\n-          }\n-          \n-          .image-container {\n-            display: flex;\n-            justify-content: center;\n-            align-items: center;\n-            flex: 1;\n-            position: relative;\n-          }\n-          \n-          .image-container img {\n-            max-height: 100%;\n-            max-width: 100%;\n-            object-fit: contain;\n-          }\n-          \n-          .chief-complaint {\n-            margin: 20px 0;\n-            flex-shrink: 0;\n-          }\n-          \n-          .chief-complaint-title {\n-            font-size: 16px;\n-            font-weight: bold;\n-            margin-bottom: 10px;\n-            color: #333;\n-          }\n-          \n-          .complaint-text {\n-            height: 100px;\n-            padding: 15px;\n-            border: 2px solid #ddd;\n-            border-radius: 8px;\n-            background: #f9f9f9;\n-            line-height: 1.6;\n-            white-space: pre-wrap;\n-            overflow-y: auto;\n-          }\n-          \n-          .creation-date {\n-            margin-top: 20px;\n-            font-size: 12px;\n-            color: #666;\n-            flex-shrink: 0;\n-          }\n-        </style>\n-      </head>\n-      <body>\n-        <!-- 1í˜ì´ì§€: SPINE Mapping Chart -->\n-        <div class=\"page\">\n-          <div class=\"page-header\">\n-            ì„±ëª…: ${selectedMember.name} &nbsp;&nbsp; \n-            ìƒë…„ì›”ì¼: ${formatDate(selectedMember.birth)} &nbsp;&nbsp; \n-            ì‹ ì¥: ${formData.height}cm\n-          </div>\n-          \n-          <div class=\"page-title\">SPINE Mapping Chart</div>\n-          \n-          <div class=\"image-container\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/bone.svg\" alt=\"ì²™ì¶” ì´ë¯¸ì§€\" />\n-          </div>\n-          \n-          <div class=\"chief-complaint\">\n-            <div class=\"chief-complaint-title\">ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n-            <div class=\"complaint-text\">${formData.painHistory || ''}</div>\n-          </div>\n-          \n-          <div class=\"creation-date\">\n-            ìµœì´ˆ ì‘ì„±ì¼ : ${currentPrescription?.createdAt \n-              ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n-              : new Date().toISOString().split('T')[0]\n-            }\n-          </div>\n-        </div>\n-        \n-        <!-- 2í˜ì´ì§€: Target Muscles List (Front) -->\n-        <div class=\"page\">\n-          <div class=\"page-header\">\n-            ${selectedMember.name}\n-          </div>\n-          \n-          <div class=\"page-title\">Target Muscles List</div>\n-          \n-          <div class=\"image-container\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/front.png\" alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" />\n-            \n-            <!-- SVG ì˜¤ë²„ë ˆì´ -->\n-            <svg style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;\" \n-                 viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid meet\">\n-              <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"red\" />\n-              <line x1=\"30\" y1=\"25\" x2=\"10\" y2=\"15\" stroke=\"red\" stroke-width=\"0.3\" />\n-              <text x=\"5\" y=\"13\" font-size=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n-              \n-              <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"blue\" />\n-              <line x1=\"40\" y1=\"35\" x2=\"65\" y2=\"25\" stroke=\"blue\" stroke-width=\"0.3\" />\n-              <line x1=\"65\" y1=\"25\" x2=\"75\" y2=\"20\" stroke=\"blue\" stroke-width=\"0.3\" />\n-              <text x=\"75\" y=\"18\" font-size=\"2\" fill=\"black\">ëŒ€í™ê·¼</text>\n-              \n-              <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"green\" />\n-              <line x1=\"45\" y1=\"55\" x2=\"20\" y2=\"70\" stroke=\"green\" stroke-width=\"0.3\" />\n-              <text x=\"5\" y=\"72\" font-size=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n-              \n-              <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"purple\" />\n-              <line x1=\"35\" y1=\"80\" x2=\"65\" y2=\"90\" stroke=\"purple\" stroke-width=\"0.3\" />\n-              <text x=\"65\" y=\"92\" font-size=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n-            </svg>\n-          </div>\n-        </div>\n-        \n-        <!-- 3í˜ì´ì§€: Target Muscles List (Back) -->\n-        <div class=\"page\">\n-          <div class=\"page-header\">\n-            ${selectedMember.name}\n-          </div>\n-          \n-          <div class=\"page-title\">Target Muscles List</div>\n-          \n-          <div class=\"image-container\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/back.png\" alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" />\n-          </div>\n-        </div>\n-      </body>\n-      </html>\n-    `;\n-  };\n-\n-  const handleShare = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n-    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n-    \n-    try {\n-      if (navigator.share) {\n-        await navigator.share({\n-          title: 'ìš´ë™ì²˜ë°©ì„œ',\n-          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: currentUrl,\n-        });\n-      } else {\n-        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n+      const printWindow = window.open(pdfUrl, '_blank');\n+      if (printWindow) {\n+        printWindow.onload = () => {\n+          setTimeout(() => {\n+            printWindow.print();\n+          }, 1000);\n+        };\n       }\n     } catch (error) {\n-      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n-      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n-      try {\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      } catch {\n-        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n-      }\n+      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n+      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n     }\n   };\n \n-  const handlePrint = () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // 3í˜ì´ì§€ ëª¨ë‘ ì¸ì‡„í•˜ëŠ” HTML ìƒì„±\n-    const printWindow = window.open('', '_blank', 'width=800,height=600');\n-    if (printWindow) {\n-      printWindow.document.write(generateAllPagesHTML());\n-      printWindow.document.close();\n-      \n-      // ìë™ìœ¼ë¡œ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°\n-      setTimeout(() => {\n-        printWindow.print();\n-      }, 1000);\n-    }\n-  };\n-\n   const handleDownloadPDF = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n@@ -2272,907 +1192,5 @@\n     </PageContainer>\n   );\n };\n \n-export default ExercisePrescriptionPage;\n-import React, { useEffect, useState, useCallback, useRef } from 'react';\n-import { useSearchParams } from 'react-router-dom';\n-import styled from 'styled-components';\n-import html2canvas from 'html2canvas';\n-import jsPDF from 'jspdf';\n-import { AppColors } from '../styles/colors';\n-import { AppTextStyles } from '../styles/textStyles';\n-import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n-\n-const PageContainer = styled.div`\n-  min-height: 100vh;\n-  display: flex;\n-  background: ${AppColors.background};\n-  \n-  @media print {\n-    display: block;\n-    background: white;\n-  }\n-`;\n-\n-const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n-  width: ${props => props.$collapsed ? '0px' : '300px'};\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: ${props => props.$collapsed ? '0' : '20px'};\n-  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n-  transition: all 0.3s ease;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n-  width: 55px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 10px 2px;\n-  display: ${props => props.$hidden ? 'none' : 'flex'};\n-  flex-direction: column;\n-  gap: 6px;\n-  align-items: stretch;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 100%;\n-  height: 36px;\n-  border: none;\n-  border-radius: 6px;\n-  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n-  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: 16px;\n-  font-weight: 600;\n-  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-  }\n-`;\n-\n-const PageButton = styled.button<{ active?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.active ? AppColors.primary : 'white'};\n-  color: ${props => props.active ? 'white' : '#333'};\n-  font-size: 14px;\n-  font-weight: ${props => props.active ? 'bold' : 'normal'};\n-  cursor: pointer;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n-  }\n-`;\n-\n-const Divider = styled.div`\n-  height: 1px;\n-  background: ${AppColors.borderLight};\n-  margin: 10px 0;\n-`;\n-\n-const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n-  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n-  cursor: pointer;\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  font-size: 14px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${AppColors.primary};\n-    color: ${AppColors.onPrimary};\n-  }\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-\n-\n-const SearchTitle = styled.h2`\n-  font-size: ${AppTextStyles.title2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SearchInput = styled.input`\n-  width: 100%;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  margin-bottom: 16px;\n-  box-sizing: border-box;\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const MemberList = styled.div`\n-  max-height: 400px;\n-  overflow-y: auto;\n-`;\n-\n-const MemberItem = styled.div<{ selected?: boolean }>`\n-  padding: 12px;\n-  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 8px;\n-  margin-bottom: 8px;\n-  cursor: pointer;\n-  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n-  \n-  &:hover {\n-    background: ${AppColors.primary}20;\n-  }\n-`;\n-\n-const MemberName = styled.div`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 4px;\n-`;\n-\n-const MemberInfo = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const PrescriptionPanel = styled.div`\n-  flex: 1;\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    padding: 0;\n-    overflow: visible;\n-  }\n-`;\n-\n-const PrescriptionContainer = styled.div`\n-  width: 210mm;\n-  height: 297mm;\n-  max-width: 800px;\n-  margin: 0 auto;\n-  background: white;\n-  padding: 40px;\n-  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  box-sizing: border-box;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    box-shadow: none;\n-    padding: 20mm;\n-    margin: 0;\n-    max-width: none;\n-    width: 210mm;\n-    height: 297mm;\n-    overflow: visible;\n-  }\n-  \n-  @media screen and (max-width: 900px) {\n-    width: 100%;\n-    height: auto;\n-    min-height: calc(100vh - 40px);\n-  }\n-`;\n-\n-\n-\n-const FormLabel = styled.label`\n-  display: block;\n-  font-size: ${AppTextStyles.label1.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 8px;\n-`;\n-\n-const FormTextarea = styled.textarea`\n-  width: 100%;\n-  padding: 10px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  resize: vertical;\n-  box-sizing: border-box;\n-  \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-\n-\n-const ExercisePrescriptionPage: React.FC = () => {\n-  const [searchParams] = useSearchParams();\n-  const [searchTerm, setSearchTerm] = useState('');\n-  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n-  const [members, setMembers] = useState<Member[]>([]);\n-  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n-  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false); // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n-  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n-  const [formData, setFormData] = useState({\n-    height: '',\n-    weight: '',\n-    footSize: '',\n-    medications: '',\n-    medicalHistory: {\n-      musculoskeletal: false,\n-      cardiovascular: false,\n-      diabetes: false,\n-      osteoporosis: false,\n-      thyroid: false,\n-      varicose: false,\n-      arthritis: false,\n-    } as ExercisePrescriptionMedicalHistory,\n-    painHistory: '',\n-    bodyImages: {\n-      front: [] as BodyImagePoint[],\n-      spine: [] as BodyImagePoint[],\n-      back: [] as BodyImagePoint[],\n-    },\n-    signatureData: '', // ì„œëª… ë°ì´í„°\n-  });\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n-  useEffect(() => {\n-    const loadMembers = async () => {\n-      try {\n-        const allMembers = await dbManager.getAllMembers();\n-        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n-        const activeMembers = allMembers.filter(member => member.isActive);\n-        setMembers(activeMembers);\n-      } catch (error) {\n-        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-      }\n-    };\n-\n-    loadMembers();\n-  }, []);\n-\n-  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n-  useEffect(() => {\n-    const loadPrescription = async () => {\n-      if (!selectedMember) {\n-        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n-        setCurrentPrescription(null);\n-        setFormData({\n-          height: '',\n-          weight: '',\n-          footSize: '',\n-          medications: '',\n-          medicalHistory: {\n-            musculoskeletal: false,\n-            cardiovascular: false,\n-            diabetes: false,\n-            osteoporosis: false,\n-            thyroid: false,\n-            varicose: false,\n-            arthritis: false,\n-          },\n-          painHistory: '',\n-          bodyImages: {\n-            front: [],\n-            spine: [],\n-            back: [],\n-          },\n-          signatureData: '',\n-        });\n-        return;\n-      }\n-\n-      try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n-        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n-        \n-        if (prescription) {\n-          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n-          setCurrentPrescription(prescription);\n-          setFormData({\n-            height: prescription.height,\n-            weight: prescription.weight,\n-            footSize: prescription.footSize,\n-            medications: prescription.medications,\n-            medicalHistory: prescription.medicalHistory,\n-            painHistory: prescription.painHistory,\n-            bodyImages: prescription.bodyImages,\n-            signatureData: prescription.signatureData || '',\n-          });\n-          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n-        } else {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n-          setCurrentPrescription(null);\n-          setFormData({\n-            height: '',\n-            weight: '',\n-            footSize: '',\n-            medications: '',\n-            medicalHistory: {\n-              musculoskeletal: false,\n-              cardiovascular: false,\n-              diabetes: false,\n-              osteoporosis: false,\n-              thyroid: false,\n-              varicose: false,\n-              arthritis: false,\n-            },\n-            painHistory: '',\n-            bodyImages: {\n-              front: [],\n-              spine: [],\n-              back: [],\n-            },\n-            signatureData: '', // ì„œëª… ë°ì´í„° ì´ˆê¸°í™”\n-          });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n-        }\n-      } catch (error) {\n-        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-      }\n-    };\n-\n-    loadPrescription();\n-  }, [selectedMember]);\n-\n-  const filteredMembers = members.filter(member =>\n-    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n-  );\n-\n-  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n-    try {\n-      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-      if (prescription) {\n-        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n-        const member = members.find(m => m.id === prescription.memberId);\n-        if (member) {\n-          setSelectedMember(member);\n-        }\n-        \n-        setCurrentPrescription(prescription);\n-        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n-        setFormData({\n-          height: prescription.height,\n-          weight: prescription.weight,\n-          footSize: prescription.footSize,\n-          medications: prescription.medications,\n-          medicalHistory: prescription.medicalHistory,\n-          painHistory: prescription.painHistory,\n-          bodyImages: prescription.bodyImages,\n-          signatureData: prescription.signatureData || '',\n-        });\n-        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n-      }\n-    } catch (error) {\n-      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-    }\n-  }, [members]);\n-\n-  useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n-    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    const prescriptionIdParam = searchParams.get('prescriptionId');\n-    \n-    if (prescriptionIdParam) {\n-      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-      loadSpecificPrescription(prescriptionIdParam);\n-    } else if (userIdParam && members.length > 0) {\n-      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n-      const member = members.find(m => m.id === userIdParam);\n-      if (member) {\n-        setSelectedMember(member);\n-      }\n-    }\n-  }, [searchParams, members, loadSpecificPrescription]);\n-\n-  const handleMemberSelect = (member: Member) => {\n-    setSelectedMember(member);\n-  };\n-\n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value,\n-    }));\n-  };\n-\n-\n-\n-  const handleSave = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const prescriptionData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        height: formData.height,\n-        weight: formData.weight,\n-        footSize: formData.footSize,\n-        medications: formData.medications,\n-        medicalHistory: formData.medicalHistory,\n-        painHistory: formData.painHistory,\n-        bodyImages: formData.bodyImages,\n-        signatureData: formData.signatureData,\n-        signedAt: formData.signatureData ? (currentPrescription?.signedAt || new Date()) : null,\n-        isActive: true,\n-        prescriptionDate: new Date(),\n-        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n-        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n-      };\n-\n-      if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      } else {\n-        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      }\n-      \n-      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    } catch (error) {\n-      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-\n-\n-  const handleShare = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n-    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n-    \n-    try {\n-      if (navigator.share) {\n-        await navigator.share({\n-          title: 'ìš´ë™ì²˜ë°©ì„œ',\n-          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: currentUrl,\n-        });\n-      } else {\n-        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      }\n-    } catch (error) {\n-      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n-      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n-      try {\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      } catch {\n-        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n-      }\n-    }\n-  };\n-\n-  const handlePrint = () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // ë¸Œë¼ìš°ì € ì¸ì‡„ ê¸°ëŠ¥ ì‚¬ìš©\n-    window.print();\n-  };\n-\n-  const handleDownloadPDF = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    if (!prescriptionRef.current) {\n-      alert('ì¸ì‡„í•  ì½˜í…ì¸ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n-      return;\n-    }\n-\n-    try {\n-      // í˜„ì¬ í˜ì´ì§€ì—ì„œ PDF ìƒì„±\n-      const canvas = await html2canvas(prescriptionRef.current, {\n-        scale: 2, // ê³ í•´ìƒë„\n-        useCORS: true,\n-        allowTaint: true,\n-        backgroundColor: '#ffffff'\n-      });\n-      \n-      const imgData = canvas.toDataURL('image/png');\n-      \n-      // A4 ì‚¬ì´ì¦ˆ PDF ìƒì„±\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n-      const imgHeight = (canvas.height * imgWidth) / canvas.width;\n-      \n-      pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-      \n-      // PDF ë‹¤ìš´ë¡œë“œ\n-      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_í˜ì´ì§€${currentPage}_${new Date().toISOString().split('T')[0]}.pdf`;\n-      pdf.save(fileName);\n-      \n-    } catch (error) {\n-      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n-      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  return (\n-    <PageContainer>\n-      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n-        {!isSearchPanelCollapsed && (\n-          <>\n-            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n-        <SearchInput\n-          type=\"text\"\n-          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n-          value={searchTerm}\n-          onChange={(e) => setSearchTerm(e.target.value)}\n-        />\n-        <MemberList>\n-          {filteredMembers.map(member => (\n-            <MemberItem\n-              key={member.id}\n-              selected={selectedMember?.id === member.id}\n-              onClick={() => handleMemberSelect(member)}\n-            >\n-              <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birth}</MemberInfo>\n-              <MemberInfo>{member.phone}</MemberInfo>\n-            </MemberItem>\n-          ))}\n-          </MemberList>\n-          </>\n-        )}\n-      </SearchPanel>      <ButtonPanel>\n-        <ToggleButton \n-          $collapsed={isSearchPanelCollapsed}\n-          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n-          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n-        >\n-          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n-        </ToggleButton>\n-        \n-        <ActionButton \n-          onClick={handleSave} \n-          title=\"ì €ì¥\"\n-          disabled={isReadOnly}\n-        >\n-          ğŸ’¾\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          ğŸ“¤\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n-          ğŸ–¨ï¸\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n-          ğŸ“\n-        </ActionButton>\n-        \n-        <Divider />\n-        \n-        <PageButton \n-          active={currentPage === 1}\n-          onClick={() => setCurrentPage(1)}\n-        >\n-          1\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 2}\n-          onClick={() => setCurrentPage(2)}\n-        >\n-          2\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 3}\n-          onClick={() => setCurrentPage(3)}\n-        >\n-          3\n-        </PageButton>\n-      </ButtonPanel>\n-\n-      <PrescriptionPanel>\n-\n-\n-        <PrescriptionContainer ref={prescriptionRef}>\n-          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n-          {currentPage === 1 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n-              <div style={{ \n-                display: 'flex', \n-                alignItems: 'center', \n-                gap: '20px', \n-                marginBottom: '30px',\n-                fontSize: '14px',\n-                fontWeight: 'bold',\n-                height: '30px'\n-              }}>\n-                <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n-                <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n-                  year: 'numeric',\n-                  month: 'long', \n-                  day: 'numeric'\n-                }) : ''}</span>\n-                <span>ì‹ ì¥: \n-                  <input \n-                    type=\"text\" \n-                    value={formData.height}\n-                    onChange={(e) => handleInputChange('height', e.target.value)}\n-                    readOnly={isReadOnly}\n-                    style={{\n-                      border: 'none',\n-                      borderBottom: '1px solid #ccc',\n-                      background: 'transparent',\n-                      width: '60px',\n-                      textAlign: 'center',\n-                      fontSize: '14px',\n-                      fontWeight: 'bold',\n-                      marginLeft: '5px',\n-                      marginRight: '2px'\n-                    }}\n-                    placeholder=\"í‚¤\"\n-                  />cm</span>\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '20px',\n-                color: '#333'\n-              }}>SPINE Mapping Chart</div>\n-              \n-              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                margin: '20px 0'\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n-                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n-                  style={{ \n-                    maxHeight: '100%',\n-                    maxWidth: '300px',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-              </div>\n-\n-              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n-              <div style={{ margin: '20px 0' }}>\n-                <FormLabel style={{ \n-                  fontSize: '16px', \n-                  fontWeight: 'bold', \n-                  marginBottom: '10px', \n-                  display: 'block'\n-                }}>\n-                  ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n-                </FormLabel>\n-                <FormTextarea\n-                  rows={6}\n-                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n-                  value={formData.painHistory}\n-                  onChange={(e) => handleInputChange('painHistory', e.target.value)}\n-                  readOnly={isReadOnly}\n-                  style={{ \n-                    background: isReadOnly ? '#f5f5f5' : 'white',\n-                    height: '100px',\n-                    resize: 'none'\n-                  }}\n-                />\n-              </div>\n-\n-              {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n-              <div style={{ \n-                marginTop: 'auto',\n-                paddingTop: '20px',\n-                textAlign: 'left', \n-                fontSize: '12px', \n-                color: '#666' \n-              }}>\n-                ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n-                  ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n-                  : new Date().toISOString().split('T')[0]\n-                }\n-              </div>\n-            </div>\n-          )}\n-\n-          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n-          {currentPage === 2 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                position: 'relative'\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n-                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-                \n-                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n-                <svg \n-                  style={{\n-                    position: 'absolute',\n-                    top: 0,\n-                    left: 0,\n-                    width: '100%',\n-                    height: '100%',\n-                    pointerEvents: 'none'\n-                  }}\n-                  viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"xMidYMid meet\"\n-                >\n-                  {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n-                  <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"red\" />\n-                  <line x1=\"30\" y1=\"25\" x2=\"10\" y2=\"15\" stroke=\"red\" strokeWidth=\"0.3\" />\n-                  <text x=\"5\" y=\"13\" fontSize=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n-                  \n-                  {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n-                  <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"blue\" />\n-                  <line x1=\"40\" y1=\"35\" x2=\"65\" y2=\"25\" stroke=\"blue\" strokeWidth=\"0.3\" />\n-                  <line x1=\"65\" y1=\"25\" x2=\"75\" y2=\"20\" stroke=\"blue\" strokeWidth=\"0.3\" />\n-                  <text x=\"75\" y=\"18\" fontSize=\"2\" fill=\"black\">ëŒ€í‰ê·¼</text>\n-                  \n-                  {/* í¬ì¸íŠ¸ 3: ë³µë¶€ ê·¼ìœ¡ */}\n-                  <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"green\" />\n-                  <line x1=\"45\" y1=\"55\" x2=\"20\" y2=\"70\" stroke=\"green\" strokeWidth=\"0.3\" />\n-                  <text x=\"5\" y=\"72\" fontSize=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n-                  \n-                  {/* í¬ì¸íŠ¸ 4: ë‹¤ë¦¬ ê·¼ìœ¡ */}\n-                  <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"purple\" />\n-                  <line x1=\"35\" y1=\"80\" x2=\"65\" y2=\"90\" stroke=\"purple\" strokeWidth=\"0.3\" />\n-                  <text x=\"65\" y=\"92\" fontSize=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n-                </svg>\n-              </div>\n-            </div>\n-          )}\n-\n-          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n-          {currentPage === 3 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n-                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-              </div>\n-            </div>\n-          )}\n-        </PrescriptionContainer>\n-      </PrescriptionPanel>\n-    </PageContainer>\n-  );\n-};\n-\n export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764242943208,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -763,30 +763,42 @@\n     try {\n       // PDF ìƒì„±\n       const pdf = new jsPDF('p', 'mm', 'a4');\n       \n+      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n+      const originalPage = currentPage;\n+      \n       for (let page = 1; page <= 3; page++) {\n         if (page > 1) {\n           pdf.addPage();\n         }\n \n-        const pageElement = document.getElementById(`print-page-${page}`);\n-        if (pageElement) {\n-          const canvas = await html2canvas(pageElement, {\n-            scale: 2,\n-            useCORS: true,\n-            allowTaint: true,\n-            backgroundColor: '#ffffff'\n-          });\n+        // í˜ì´ì§€ ë³€ê²½\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n+        if (!prescriptionRef.current) continue;\n+        \n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n \n-          const imgData = canvas.toDataURL('image/png');\n-          const imgWidth = 210;\n-          const imgHeight = (canvas.height * imgWidth) / canvas.width;\n-          \n-          pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-        }\n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210;\n+        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n       }\n \n+      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n+      setCurrentPage(originalPage);\n+\n       // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n       const pdfBlob = pdf.output('blob');\n       const pdfUrl = URL.createObjectURL(pdfBlob);\n       \n"
                },
                {
                    "date": 1764243066481,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -481,247 +481,9 @@\n   };\n \n \n \n-  const generateAllPagesHTML = () => {\n-    if (!selectedMember) return '';\n \n-    const formatDate = (dateString: string) => {\n-      if (!dateString) return '';\n-      const date = new Date(dateString);\n-      const year = date.getFullYear();\n-      const month = String(date.getMonth() + 1).padStart(2, '0');\n-      const day = String(date.getDate()).padStart(2, '0');\n-      return `${year}ë…„ ${month}ì›” ${day}ì¼`;\n-    };\n-\n-    return `\n-      <!DOCTYPE html>\n-      <html>\n-      <head>\n-        <title>ìš´ë™ì²˜ë°©ì„œ - ${selectedMember.name}</title>\n-        <style>\n-          @media print {\n-            * {\n-              -webkit-print-color-adjust: exact !important;\n-              color-adjust: exact !important;\n-              print-color-adjust: exact !important;\n-            }\n-            body { \n-              margin: 0; \n-              padding: 0; \n-              font-size: 12pt;\n-            }\n-            .page { \n-              page-break-after: always; \n-              page-break-inside: avoid;\n-              width: 210mm;\n-              height: 297mm;\n-              padding: 15mm;\n-              box-sizing: border-box;\n-              overflow: hidden;\n-              position: relative;\n-            }\n-            .page:last-child { page-break-after: auto; }\n-          }\n-          \n-          @media screen {\n-            .page {\n-              width: 210mm;\n-              height: 297mm;\n-              padding: 15mm;\n-              margin: 20px auto;\n-              background: white;\n-              box-shadow: 0 0 10px rgba(0,0,0,0.1);\n-              box-sizing: border-box;\n-              overflow: hidden;\n-              position: relative;\n-            }\n-          }\n-          \n-          body { \n-            font-family: 'Malgun Gothic', Arial, sans-serif; \n-            margin: 0; \n-            background: #f5f5f5;\n-          }\n-          \n-          .page-header {\n-            margin-bottom: 8mm;\n-            font-size: 14px;\n-            font-weight: bold;\n-            height: 8mm;\n-            flex-shrink: 0;\n-          }\n-          \n-          .page-title {\n-            text-align: center;\n-            font-size: 20px;\n-            font-weight: bold;\n-            margin-bottom: 8mm;\n-            color: #333;\n-            flex-shrink: 0;\n-          }\n-          \n-          .spine-page {\n-            display: flex;\n-            flex-direction: column;\n-            height: calc(297mm - 30mm);\n-          }\n-          \n-          .spine-image-container {\n-            flex: 1;\n-            display: flex;\n-            justify-content: center;\n-            align-items: center;\n-            margin: 5mm 0;\n-            min-height: 120mm;\n-          }\n-          \n-          .spine-image-container img {\n-            max-height: 100%;\n-            max-width: 300px;\n-            width: auto;\n-            height: auto;\n-            object-fit: contain;\n-          }\n-          \n-          .muscle-page {\n-            display: flex;\n-            flex-direction: column;\n-            height: calc(297mm - 30mm);\n-          }\n-          \n-          .muscle-image-container {\n-            flex: 1;\n-            display: flex;\n-            justify-content: center;\n-            align-items: center;\n-            position: relative;\n-            margin: 5mm 0;\n-            min-height: 200mm;\n-          }\n-          \n-          .muscle-image-container img {\n-            max-height: 100%;\n-            max-width: 100%;\n-            width: auto;\n-            height: auto;\n-            object-fit: contain;\n-          }\n-          \n-          .chief-complaint {\n-            margin-bottom: 10mm;\n-            height: 50mm;\n-            flex-shrink: 0;\n-          }\n-          \n-          .chief-complaint-title {\n-            font-size: 14px;\n-            font-weight: bold;\n-            margin-bottom: 5mm;\n-            color: #333;\n-          }\n-          \n-          .complaint-text {\n-            height: 35mm;\n-            padding: 5mm;\n-            border: 1px solid #ddd;\n-            border-radius: 2mm;\n-            background: #f9f9f9;\n-            line-height: 1.3;\n-            white-space: pre-wrap;\n-            overflow: hidden;\n-            font-size: 11px;\n-          }\n-          \n-          .creation-date {\n-            position: absolute;\n-            bottom: 15mm;\n-            left: 15mm;\n-            font-size: 12px;\n-            color: #666;\n-          }\n-        </style>\n-      </head>\n-      <body>\n-        <!-- 1í˜ì´ì§€: SPINE Mapping Chart -->\n-        <div class=\"page spine-page\">\n-          <div class=\"page-header\">\n-            ì„±ëª…: ${selectedMember.name} &nbsp;&nbsp; \n-            ìƒë…„ì›”ì¼: ${formatDate(selectedMember.birth)} &nbsp;&nbsp; \n-            ì‹ ì¥: ${formData.height}cm\n-          </div>\n-          \n-          <div class=\"page-title\">SPINE Mapping Chart</div>\n-          \n-          <div class=\"spine-image-container\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/bone.svg\" alt=\"ì²™ì¶” ì´ë¯¸ì§€\" />\n-          </div>\n-          \n-          <div class=\"chief-complaint\">\n-            <div class=\"chief-complaint-title\">ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n-            <div class=\"complaint-text\">${formData.painHistory || ''}</div>\n-          </div>\n-          \n-          <div class=\"creation-date\">\n-            ìµœì´ˆ ì‘ì„±ì¼ : ${currentPrescription?.createdAt \n-              ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n-              : new Date().toISOString().split('T')[0]\n-            }\n-          </div>\n-        </div>\n-        \n-        <!-- 2í˜ì´ì§€: Target Muscles List (Front) -->\n-        <div class=\"page muscle-page\">\n-          <div class=\"page-header\">\n-            ${selectedMember.name}\n-          </div>\n-          \n-          <div class=\"page-title\">Target Muscles List</div>\n-          \n-          <div class=\"muscle-image-container\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/front.png\" alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" />\n-            \n-            <!-- SVG ì˜¤ë²„ë ˆì´ -->\n-            <svg style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;\" \n-                 viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid meet\">\n-              <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"red\" />\n-              <line x1=\"30\" y1=\"25\" x2=\"10\" y2=\"15\" stroke=\"red\" stroke-width=\"0.3\" />\n-              <text x=\"5\" y=\"13\" font-size=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n-              \n-              <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"blue\" />\n-              <line x1=\"40\" y1=\"35\" x2=\"65\" y2=\"25\" stroke=\"blue\" stroke-width=\"0.3\" />\n-              <line x1=\"65\" y1=\"25\" x2=\"75\" y2=\"20\" stroke=\"blue\" stroke-width=\"0.3\" />\n-              <text x=\"75\" y=\"18\" font-size=\"2\" fill=\"black\">ëŒ€í™ê·¼</text>\n-              \n-              <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"green\" />\n-              <line x1=\"45\" y1=\"55\" x2=\"20\" y2=\"70\" stroke=\"green\" stroke-width=\"0.3\" />\n-              <text x=\"5\" y=\"72\" font-size=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n-              \n-              <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"purple\" />\n-              <line x1=\"35\" y1=\"80\" x2=\"65\" y2=\"90\" stroke=\"purple\" stroke-width=\"0.3\" />\n-              <text x=\"65\" y=\"92\" font-size=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n-            </svg>\n-          </div>\n-        </div>\n-        \n-        <!-- 3í˜ì´ì§€: Target Muscles List (Back) -->\n-        <div class=\"page muscle-page\">\n-          <div class=\"page-header\">\n-            ${selectedMember.name}\n-          </div>\n-          \n-          <div class=\"page-title\">Target Muscles List</div>\n-          \n-          <div class=\"muscle-image-container\">\n-            <img src=\"${process.env.PUBLIC_URL || ''}/cms/back.png\" alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" />\n-          </div>\n-        </div>\n-      </body>\n-      </html>\n-    `;\n-  };\n-\n   const handleShare = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n"
                },
                {
                    "date": 1764243205805,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n import jsPDF from 'jspdf';\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory, BodyImagePoint } from '../utils/db/types';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -255,15 +255,9 @@\n       thyroid: false,\n       varicose: false,\n       arthritis: false,\n     } as ExercisePrescriptionMedicalHistory,\n-    painHistory: '',\n-    bodyImages: {\n-      front: [] as BodyImagePoint[],\n-      spine: [] as BodyImagePoint[],\n-      back: [] as BodyImagePoint[],\n-    },\n-    signatureData: '', // ì„œëª… ë°ì´í„°\n+    painHistory: ''\n   });\n \n   // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n   useEffect(() => {\n@@ -301,14 +295,9 @@\n             varicose: false,\n             arthritis: false,\n           },\n           painHistory: '',\n-          bodyImages: {\n-            front: [],\n-            spine: [],\n-            back: [],\n-          },\n-          signatureData: '',\n+\n         });\n         return;\n       }\n \n@@ -325,10 +314,9 @@\n             footSize: prescription.footSize,\n             medications: prescription.medications,\n             medicalHistory: prescription.medicalHistory,\n             painHistory: prescription.painHistory,\n-            bodyImages: prescription.bodyImages,\n-            signatureData: prescription.signatureData || '',\n+\n           });\n           console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n         } else {\n           // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n@@ -347,14 +335,9 @@\n               varicose: false,\n               arthritis: false,\n             },\n             painHistory: '',\n-            bodyImages: {\n-              front: [],\n-              spine: [],\n-              back: [],\n-            },\n-            signatureData: '', // ì„œëª… ë°ì´í„° ì´ˆê¸°í™”\n+\n           });\n           console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n         }\n       } catch (error) {\n@@ -389,10 +372,9 @@\n           footSize: prescription.footSize,\n           medications: prescription.medications,\n           medicalHistory: prescription.medicalHistory,\n           painHistory: prescription.painHistory,\n-          bodyImages: prescription.bodyImages,\n-          signatureData: prescription.signatureData || '',\n+\n         });\n         console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n       }\n     } catch (error) {\n@@ -445,11 +427,11 @@\n         footSize: formData.footSize,\n         medications: formData.medications,\n         medicalHistory: formData.medicalHistory,\n         painHistory: formData.painHistory,\n-        bodyImages: formData.bodyImages,\n-        signatureData: formData.signatureData,\n-        signedAt: formData.signatureData ? (currentPrescription?.signedAt || new Date()) : null,\n+        bodyImages: { front: [], spine: [], back: [] },\n+        signatureData: '',\n+        signedAt: null,\n         isActive: true,\n         prescriptionDate: new Date(),\n         version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n         isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n"
                },
                {
                    "date": 1764243249130,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -185,10 +185,18 @@\n   background: white;\n   padding: 40px;\n   box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n   box-sizing: border-box;\n-  overflow-y: auto;\n+  overflow: hidden;\n   \n+  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n+  scrollbar-width: none; /* Firefox */\n+  -ms-overflow-style: none; /* IE/Edge */\n+  \n+  &::-webkit-scrollbar {\n+    display: none; /* Chrome, Safari, Opera */\n+  }\n+  \n   @media print {\n     box-shadow: none;\n     padding: 20mm;\n     margin: 0;\n"
                },
                {
                    "date": 1764243300493,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -879,26 +879,25 @@\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"xMidYMid meet\"\n                 >\n                   {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n-                  <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"red\" />\n-                  <line x1=\"30\" y1=\"25\" x2=\"10\" y2=\"15\" stroke=\"red\" strokeWidth=\"0.3\" />\n+                  <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"yellow\" />\n+                  <polyline points=\"30,25 25,20 10,15\" stroke=\"black\" strokeWidth=\"0.3\" fill=\"none\" />\n                   <text x=\"5\" y=\"13\" fontSize=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n                   \n                   {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n-                  <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"blue\" />\n-                  <line x1=\"40\" y1=\"35\" x2=\"65\" y2=\"25\" stroke=\"blue\" strokeWidth=\"0.3\" />\n-                  <line x1=\"65\" y1=\"25\" x2=\"75\" y2=\"20\" stroke=\"blue\" strokeWidth=\"0.3\" />\n+                  <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"yellow\" />\n+                  <polyline points=\"40,35 55,30 70,22 75,20\" stroke=\"black\" strokeWidth=\"0.3\" fill=\"none\" />\n                   <text x=\"75\" y=\"18\" fontSize=\"2\" fill=\"black\">ëŒ€í‰ê·¼</text>\n                   \n                   {/* í¬ì¸íŠ¸ 3: ë³µë¶€ ê·¼ìœ¡ */}\n-                  <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"green\" />\n-                  <line x1=\"45\" y1=\"55\" x2=\"20\" y2=\"70\" stroke=\"green\" strokeWidth=\"0.3\" />\n+                  <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"yellow\" />\n+                  <polyline points=\"45,55 35,65 25,68 20,70\" stroke=\"black\" strokeWidth=\"0.3\" fill=\"none\" />\n                   <text x=\"5\" y=\"72\" fontSize=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n                   \n                   {/* í¬ì¸íŠ¸ 4: ë‹¤ë¦¬ ê·¼ìœ¡ */}\n-                  <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"purple\" />\n-                  <line x1=\"35\" y1=\"80\" x2=\"65\" y2=\"90\" stroke=\"purple\" strokeWidth=\"0.3\" />\n+                  <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"yellow\" />\n+                  <polyline points=\"35,80 50,85 60,88 65,90\" stroke=\"black\" strokeWidth=\"0.3\" fill=\"none\" />\n                   <text x=\"65\" y=\"92\" fontSize=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n                 </svg>\n               </div>\n             </div>\n"
                },
                {
                    "date": 1764243422262,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -247,9 +247,10 @@\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n   const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false); // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n+  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n@@ -413,14 +414,27 @@\n \n   const handleInputChange = (field: string, value: string) => {\n     setFormData(prev => ({\n       ...prev,\n-      [field]: value,\n+      [field]: value\n     }));\n   };\n \n+  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n+  const handlePointClick = (pointId: string) => {\n+    setSelectedPoints(prev => {\n+      const newSelected = new Set(prev);\n+      if (newSelected.has(pointId)) {\n+        newSelected.delete(pointId);\n+      } else {\n+        newSelected.add(pointId);\n+      }\n+      return newSelected;\n+    });\n+  };\n \n \n+\n   const handleSave = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n@@ -873,32 +887,157 @@\n                     top: 0,\n                     left: 0,\n                     width: '100%',\n                     height: '100%',\n-                    pointerEvents: 'none'\n+                    pointerEvents: 'auto'\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"xMidYMid meet\"\n                 >\n                   {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n-                  <circle cx=\"30\" cy=\"25\" r=\"1\" fill=\"yellow\" />\n-                  <polyline points=\"30,25 25,20 10,15\" stroke=\"black\" strokeWidth=\"0.3\" fill=\"none\" />\n-                  <text x=\"5\" y=\"13\" fontSize=\"2\" fill=\"black\">ì‚¼ê°ê·¼</text>\n+                  <g onClick={() => handlePointClick('shoulder')} style={{ cursor: 'pointer' }}>\n+                    <circle \n+                      cx=\"30\" \n+                      cy=\"25\" \n+                      r={selectedPoints.has('shoulder') ? \"1.5\" : \"1\"} \n+                      fill={selectedPoints.has('shoulder') ? \"orange\" : \"yellow\"}\n+                      stroke={selectedPoints.has('shoulder') ? \"red\" : \"none\"}\n+                      strokeWidth={selectedPoints.has('shoulder') ? \"0.2\" : \"0\"}\n+                    />\n+                    <polyline \n+                      points=\"30,25 25,20 10,15\" \n+                      stroke=\"black\" \n+                      strokeWidth={selectedPoints.has('shoulder') ? \"0.5\" : \"0.3\"} \n+                      fill=\"none\"\n+                      strokeDasharray={selectedPoints.has('shoulder') ? \"none\" : \"none\"}\n+                    />\n+                    <rect \n+                      x=\"2\" \n+                      y=\"11\" \n+                      width=\"12\" \n+                      height=\"4\" \n+                      fill={selectedPoints.has('shoulder') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                      stroke={selectedPoints.has('shoulder') ? \"orange\" : \"none\"}\n+                      strokeWidth=\"0.1\"\n+                    />\n+                    <text \n+                      x=\"5\" \n+                      y=\"13\" \n+                      fontSize=\"2\" \n+                      fill=\"black\"\n+                      fontWeight={selectedPoints.has('shoulder') ? \"bold\" : \"normal\"}\n+                    >\n+                      ì‚¼ê°ê·¼\n+                    </text>\n+                  </g>\n                   \n                   {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n-                  <circle cx=\"40\" cy=\"35\" r=\"1\" fill=\"yellow\" />\n-                  <polyline points=\"40,35 55,30 70,22 75,20\" stroke=\"black\" strokeWidth=\"0.3\" fill=\"none\" />\n-                  <text x=\"75\" y=\"18\" fontSize=\"2\" fill=\"black\">ëŒ€í‰ê·¼</text>\n+                  <g onClick={() => handlePointClick('chest')} style={{ cursor: 'pointer' }}>\n+                    <circle \n+                      cx=\"40\" \n+                      cy=\"35\" \n+                      r={selectedPoints.has('chest') ? \"1.5\" : \"1\"} \n+                      fill={selectedPoints.has('chest') ? \"orange\" : \"yellow\"}\n+                      stroke={selectedPoints.has('chest') ? \"red\" : \"none\"}\n+                      strokeWidth={selectedPoints.has('chest') ? \"0.2\" : \"0\"}\n+                    />\n+                    <polyline \n+                      points=\"40,35 55,30 70,22 75,20\" \n+                      stroke=\"black\" \n+                      strokeWidth={selectedPoints.has('chest') ? \"0.5\" : \"0.3\"} \n+                      fill=\"none\"\n+                    />\n+                    <rect \n+                      x=\"72\" \n+                      y=\"16\" \n+                      width=\"12\" \n+                      height=\"4\" \n+                      fill={selectedPoints.has('chest') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                      stroke={selectedPoints.has('chest') ? \"orange\" : \"none\"}\n+                      strokeWidth=\"0.1\"\n+                    />\n+                    <text \n+                      x=\"75\" \n+                      y=\"18\" \n+                      fontSize=\"2\" \n+                      fill=\"black\"\n+                      fontWeight={selectedPoints.has('chest') ? \"bold\" : \"normal\"}\n+                    >\n+                      ëŒ€í‰ê·¼\n+                    </text>\n+                  </g>\n                   \n                   {/* í¬ì¸íŠ¸ 3: ë³µë¶€ ê·¼ìœ¡ */}\n-                  <circle cx=\"45\" cy=\"55\" r=\"1\" fill=\"yellow\" />\n-                  <polyline points=\"45,55 35,65 25,68 20,70\" stroke=\"black\" strokeWidth=\"0.3\" fill=\"none\" />\n-                  <text x=\"5\" y=\"72\" fontSize=\"2\" fill=\"black\">ë³µì§ê·¼</text>\n+                  <g onClick={() => handlePointClick('abs')} style={{ cursor: 'pointer' }}>\n+                    <circle \n+                      cx=\"45\" \n+                      cy=\"55\" \n+                      r={selectedPoints.has('abs') ? \"1.5\" : \"1\"} \n+                      fill={selectedPoints.has('abs') ? \"orange\" : \"yellow\"}\n+                      stroke={selectedPoints.has('abs') ? \"red\" : \"none\"}\n+                      strokeWidth={selectedPoints.has('abs') ? \"0.2\" : \"0\"}\n+                    />\n+                    <polyline \n+                      points=\"45,55 35,65 25,68 20,70\" \n+                      stroke=\"black\" \n+                      strokeWidth={selectedPoints.has('abs') ? \"0.5\" : \"0.3\"} \n+                      fill=\"none\"\n+                    />\n+                    <rect \n+                      x=\"2\" \n+                      y=\"70\" \n+                      width=\"12\" \n+                      height=\"4\" \n+                      fill={selectedPoints.has('abs') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                      stroke={selectedPoints.has('abs') ? \"orange\" : \"none\"}\n+                      strokeWidth=\"0.1\"\n+                    />\n+                    <text \n+                      x=\"5\" \n+                      y=\"72\" \n+                      fontSize=\"2\" \n+                      fill=\"black\"\n+                      fontWeight={selectedPoints.has('abs') ? \"bold\" : \"normal\"}\n+                    >\n+                      ë³µì§ê·¼\n+                    </text>\n+                  </g>\n                   \n                   {/* í¬ì¸íŠ¸ 4: ë‹¤ë¦¬ ê·¼ìœ¡ */}\n-                  <circle cx=\"35\" cy=\"80\" r=\"1\" fill=\"yellow\" />\n-                  <polyline points=\"35,80 50,85 60,88 65,90\" stroke=\"black\" strokeWidth=\"0.3\" fill=\"none\" />\n-                  <text x=\"65\" y=\"92\" fontSize=\"2\" fill=\"black\">ëŒ€ì‚¬ë‘ê·¼</text>\n+                  <g onClick={() => handlePointClick('quadriceps')} style={{ cursor: 'pointer' }}>\n+                    <circle \n+                      cx=\"35\" \n+                      cy=\"80\" \n+                      r={selectedPoints.has('quadriceps') ? \"1.5\" : \"1\"} \n+                      fill={selectedPoints.has('quadriceps') ? \"orange\" : \"yellow\"}\n+                      stroke={selectedPoints.has('quadriceps') ? \"red\" : \"none\"}\n+                      strokeWidth={selectedPoints.has('quadriceps') ? \"0.2\" : \"0\"}\n+                    />\n+                    <polyline \n+                      points=\"35,80 50,85 60,88 65,90\" \n+                      stroke=\"black\" \n+                      strokeWidth={selectedPoints.has('quadriceps') ? \"0.5\" : \"0.3\"} \n+                      fill=\"none\"\n+                    />\n+                    <rect \n+                      x=\"62\" \n+                      y=\"90\" \n+                      width=\"16\" \n+                      height=\"4\" \n+                      fill={selectedPoints.has('quadriceps') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                      stroke={selectedPoints.has('quadriceps') ? \"orange\" : \"none\"}\n+                      strokeWidth=\"0.1\"\n+                    />\n+                    <text \n+                      x=\"65\" \n+                      y=\"92\" \n+                      fontSize=\"2\" \n+                      fill=\"black\"\n+                      fontWeight={selectedPoints.has('quadriceps') ? \"bold\" : \"normal\"}\n+                    >\n+                      ëŒ€ì‚¬ë‘ê·¼\n+                    </text>\n+                  </g>\n                 </svg>\n               </div>\n             </div>\n           )}\n"
                },
                {
                    "date": 1764243502590,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -902,14 +902,21 @@\n                       fill={selectedPoints.has('shoulder') ? \"orange\" : \"yellow\"}\n                       stroke={selectedPoints.has('shoulder') ? \"red\" : \"none\"}\n                       strokeWidth={selectedPoints.has('shoulder') ? \"0.2\" : \"0\"}\n                     />\n+                    {selectedPoints.has('shoulder') && (\n+                      <polyline \n+                        points=\"30,25 25,20 10,15\" \n+                        stroke=\"white\" \n+                        strokeWidth=\"0.8\" \n+                        fill=\"none\"\n+                      />\n+                    )}\n                     <polyline \n                       points=\"30,25 25,20 10,15\" \n                       stroke=\"black\" \n-                      strokeWidth={selectedPoints.has('shoulder') ? \"0.5\" : \"0.3\"} \n+                      strokeWidth=\"0.3\" \n                       fill=\"none\"\n-                      strokeDasharray={selectedPoints.has('shoulder') ? \"none\" : \"none\"}\n                     />\n                     <rect \n                       x=\"2\" \n                       y=\"11\" \n@@ -919,13 +926,15 @@\n                       stroke={selectedPoints.has('shoulder') ? \"orange\" : \"none\"}\n                       strokeWidth=\"0.1\"\n                     />\n                     <text \n-                      x=\"5\" \n-                      y=\"13\" \n+                      x=\"8\" \n+                      y=\"13.5\" \n                       fontSize=\"2\" \n                       fill=\"black\"\n                       fontWeight={selectedPoints.has('shoulder') ? \"bold\" : \"normal\"}\n+                      textAnchor=\"middle\"\n+                      dominantBaseline=\"middle\"\n                     >\n                       ì‚¼ê°ê·¼\n                     </text>\n                   </g>\n@@ -939,12 +948,20 @@\n                       fill={selectedPoints.has('chest') ? \"orange\" : \"yellow\"}\n                       stroke={selectedPoints.has('chest') ? \"red\" : \"none\"}\n                       strokeWidth={selectedPoints.has('chest') ? \"0.2\" : \"0\"}\n                     />\n+                    {selectedPoints.has('chest') && (\n+                      <polyline \n+                        points=\"40,35 55,30 70,22 75,20\" \n+                        stroke=\"white\" \n+                        strokeWidth=\"0.8\" \n+                        fill=\"none\"\n+                      />\n+                    )}\n                     <polyline \n                       points=\"40,35 55,30 70,22 75,20\" \n                       stroke=\"black\" \n-                      strokeWidth={selectedPoints.has('chest') ? \"0.5\" : \"0.3\"} \n+                      strokeWidth=\"0.3\" \n                       fill=\"none\"\n                     />\n                     <rect \n                       x=\"72\" \n@@ -955,13 +972,15 @@\n                       stroke={selectedPoints.has('chest') ? \"orange\" : \"none\"}\n                       strokeWidth=\"0.1\"\n                     />\n                     <text \n-                      x=\"75\" \n-                      y=\"18\" \n+                      x=\"78\" \n+                      y=\"18.5\" \n                       fontSize=\"2\" \n                       fill=\"black\"\n                       fontWeight={selectedPoints.has('chest') ? \"bold\" : \"normal\"}\n+                      textAnchor=\"middle\"\n+                      dominantBaseline=\"middle\"\n                     >\n                       ëŒ€í‰ê·¼\n                     </text>\n                   </g>\n@@ -975,12 +994,20 @@\n                       fill={selectedPoints.has('abs') ? \"orange\" : \"yellow\"}\n                       stroke={selectedPoints.has('abs') ? \"red\" : \"none\"}\n                       strokeWidth={selectedPoints.has('abs') ? \"0.2\" : \"0\"}\n                     />\n+                    {selectedPoints.has('abs') && (\n+                      <polyline \n+                        points=\"45,55 35,65 25,68 20,70\" \n+                        stroke=\"white\" \n+                        strokeWidth=\"0.8\" \n+                        fill=\"none\"\n+                      />\n+                    )}\n                     <polyline \n                       points=\"45,55 35,65 25,68 20,70\" \n                       stroke=\"black\" \n-                      strokeWidth={selectedPoints.has('abs') ? \"0.5\" : \"0.3\"} \n+                      strokeWidth=\"0.3\" \n                       fill=\"none\"\n                     />\n                     <rect \n                       x=\"2\" \n@@ -991,13 +1018,15 @@\n                       stroke={selectedPoints.has('abs') ? \"orange\" : \"none\"}\n                       strokeWidth=\"0.1\"\n                     />\n                     <text \n-                      x=\"5\" \n-                      y=\"72\" \n+                      x=\"8\" \n+                      y=\"72.5\" \n                       fontSize=\"2\" \n                       fill=\"black\"\n                       fontWeight={selectedPoints.has('abs') ? \"bold\" : \"normal\"}\n+                      textAnchor=\"middle\"\n+                      dominantBaseline=\"middle\"\n                     >\n                       ë³µì§ê·¼\n                     </text>\n                   </g>\n"
                },
                {
                    "date": 1764243534644,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -905,9 +905,9 @@\n                     />\n                     {selectedPoints.has('shoulder') && (\n                       <polyline \n                         points=\"30,25 25,20 10,15\" \n-                        stroke=\"white\" \n+                        stroke=\"yellow\" \n                         strokeWidth=\"0.8\" \n                         fill=\"none\"\n                       />\n                     )}\n@@ -951,9 +951,9 @@\n                     />\n                     {selectedPoints.has('chest') && (\n                       <polyline \n                         points=\"40,35 55,30 70,22 75,20\" \n-                        stroke=\"white\" \n+                        stroke=\"yellow\" \n                         strokeWidth=\"0.8\" \n                         fill=\"none\"\n                       />\n                     )}\n@@ -997,9 +997,9 @@\n                     />\n                     {selectedPoints.has('abs') && (\n                       <polyline \n                         points=\"45,55 35,65 25,68 20,70\" \n-                        stroke=\"white\" \n+                        stroke=\"yellow\" \n                         strokeWidth=\"0.8\" \n                         fill=\"none\"\n                       />\n                     )}\n@@ -1040,12 +1040,20 @@\n                       fill={selectedPoints.has('quadriceps') ? \"orange\" : \"yellow\"}\n                       stroke={selectedPoints.has('quadriceps') ? \"red\" : \"none\"}\n                       strokeWidth={selectedPoints.has('quadriceps') ? \"0.2\" : \"0\"}\n                     />\n+                    {selectedPoints.has('quadriceps') && (\n+                      <polyline \n+                        points=\"35,80 50,85 60,88 65,90\" \n+                        stroke=\"yellow\" \n+                        strokeWidth=\"0.8\" \n+                        fill=\"none\"\n+                      />\n+                    )}\n                     <polyline \n                       points=\"35,80 50,85 60,88 65,90\" \n                       stroke=\"black\" \n-                      strokeWidth={selectedPoints.has('quadriceps') ? \"0.5\" : \"0.3\"} \n+                      strokeWidth=\"0.3\" \n                       fill=\"none\"\n                     />\n                     <rect \n                       x=\"62\" \n@@ -1056,13 +1064,15 @@\n                       stroke={selectedPoints.has('quadriceps') ? \"orange\" : \"none\"}\n                       strokeWidth=\"0.1\"\n                     />\n                     <text \n-                      x=\"65\" \n-                      y=\"92\" \n+                      x=\"70\" \n+                      y=\"92.5\" \n                       fontSize=\"2\" \n                       fill=\"black\"\n                       fontWeight={selectedPoints.has('quadriceps') ? \"bold\" : \"normal\"}\n+                      textAnchor=\"middle\"\n+                      dominantBaseline=\"middle\"\n                     >\n                       ëŒ€ì‚¬ë‘ê·¼\n                     </text>\n                   </g>\n"
                },
                {
                    "date": 1764243613299,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -431,10 +431,55 @@\n       return newSelected;\n     });\n   };\n \n+  // ê·¼ìœ¡ í¬ì¸íŠ¸ ì¢Œí‘œ ì„¤ì • (ì‰½ê²Œ ì¡°ì • ê°€ëŠ¥)\n+  const musclePoints = {\n+    shoulder: {\n+      point: { x: 30, y: 25 },\n+      line: [\n+        { x: 30, y: 25 },  // ì‹œì‘ì  (í¬ì¸í„°)\n+        { x: 25, y: 20 },  // ì²« ë²ˆì§¸ êº¾ì„\n+        { x: 10, y: 15 }   // ëì  (í…ìŠ¤íŠ¸ ì—°ê²°ì )\n+      ],\n+      textBox: { x: 2, y: 11, width: 12, height: 4 },\n+      text: { x: 8, y: 13.5, label: 'ì‚¼ê°ê·¼' }\n+    },\n+    chest: {\n+      point: { x: 40, y: 35 },\n+      line: [\n+        { x: 40, y: 35 },  // ì‹œì‘ì \n+        { x: 55, y: 30 },  // ì²« ë²ˆì§¸ êº¾ì„\n+        { x: 70, y: 22 },  // ë‘ ë²ˆì§¸ êº¾ì„\n+        { x: 75, y: 20 }   // ëì \n+      ],\n+      textBox: { x: 72, y: 16, width: 12, height: 4 },\n+      text: { x: 78, y: 18.5, label: 'ëŒ€í‰ê·¼' }\n+    },\n+    abs: {\n+      point: { x: 45, y: 55 },\n+      line: [\n+        { x: 45, y: 55 },  // ì‹œì‘ì \n+        { x: 35, y: 65 },  // ì²« ë²ˆì§¸ êº¾ì„\n+        { x: 25, y: 68 },  // ë‘ ë²ˆì§¸ êº¾ì„\n+        { x: 20, y: 70 }   // ëì \n+      ],\n+      textBox: { x: 2, y: 70, width: 12, height: 4 },\n+      text: { x: 8, y: 72.5, label: 'ë³µì§ê·¼' }\n+    },\n+    quadriceps: {\n+      point: { x: 35, y: 80 },\n+      line: [\n+        { x: 35, y: 80 },  // ì‹œì‘ì \n+        { x: 50, y: 85 },  // ì²« ë²ˆì§¸ êº¾ì„\n+        { x: 60, y: 88 },  // ë‘ ë²ˆì§¸ êº¾ì„\n+        { x: 65, y: 90 }   // ëì \n+      ],\n+      textBox: { x: 62, y: 90, width: 16, height: 4 },\n+      text: { x: 70, y: 92.5, label: 'ëŒ€ì‚¬ë‘ê·¼' }\n+    }\n+  };\n \n-\n   const handleSave = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n@@ -895,48 +940,48 @@\n                 >\n                   {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n                   <g onClick={() => handlePointClick('shoulder')} style={{ cursor: 'pointer' }}>\n                     <circle \n-                      cx=\"30\" \n-                      cy=\"25\" \n+                      cx={musclePoints.shoulder.point.x} \n+                      cy={musclePoints.shoulder.point.y} \n                       r={selectedPoints.has('shoulder') ? \"1.5\" : \"1\"} \n                       fill={selectedPoints.has('shoulder') ? \"orange\" : \"yellow\"}\n                       stroke={selectedPoints.has('shoulder') ? \"red\" : \"none\"}\n                       strokeWidth={selectedPoints.has('shoulder') ? \"0.2\" : \"0\"}\n                     />\n                     {selectedPoints.has('shoulder') && (\n                       <polyline \n-                        points=\"30,25 25,20 10,15\" \n+                        points={musclePoints.shoulder.line.map(p => `${p.x},${p.y}`).join(' ')} \n                         stroke=\"yellow\" \n                         strokeWidth=\"0.8\" \n                         fill=\"none\"\n                       />\n                     )}\n                     <polyline \n-                      points=\"30,25 25,20 10,15\" \n+                      points={musclePoints.shoulder.line.map(p => `${p.x},${p.y}`).join(' ')} \n                       stroke=\"black\" \n                       strokeWidth=\"0.3\" \n                       fill=\"none\"\n                     />\n                     <rect \n-                      x=\"2\" \n-                      y=\"11\" \n-                      width=\"12\" \n-                      height=\"4\" \n+                      x={musclePoints.shoulder.textBox.x} \n+                      y={musclePoints.shoulder.textBox.y} \n+                      width={musclePoints.shoulder.textBox.width} \n+                      height={musclePoints.shoulder.textBox.height} \n                       fill={selectedPoints.has('shoulder') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n                       stroke={selectedPoints.has('shoulder') ? \"orange\" : \"none\"}\n                       strokeWidth=\"0.1\"\n                     />\n                     <text \n-                      x=\"8\" \n-                      y=\"13.5\" \n+                      x={musclePoints.shoulder.text.x} \n+                      y={musclePoints.shoulder.text.y} \n                       fontSize=\"2\" \n                       fill=\"black\"\n                       fontWeight={selectedPoints.has('shoulder') ? \"bold\" : \"normal\"}\n                       textAnchor=\"middle\"\n                       dominantBaseline=\"middle\"\n                     >\n-                      ì‚¼ê°ê·¼\n+                      {musclePoints.shoulder.text.label}\n                     </text>\n                   </g>\n                   \n                   {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n"
                },
                {
                    "date": 1764243657445,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1182 @@\n+import React, { useEffect, useState, useCallback, useRef } from 'react';\n+import { useSearchParams } from 'react-router-dom';\n+import styled from 'styled-components';\n+import html2canvas from 'html2canvas';\n+import jsPDF from 'jspdf';\n+import { AppColors } from '../styles/colors';\n+import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n+\n+const PageContainer = styled.div`\n+  min-height: 100vh;\n+  display: flex;\n+  background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n+`;\n+\n+const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n+  width: ${props => props.$collapsed ? '0px' : '300px'};\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: ${props => props.$collapsed ? '0' : '20px'};\n+  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n+  transition: all 0.3s ease;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n+  width: 55px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 10px 2px;\n+  display: ${props => props.$hidden ? 'none' : 'flex'};\n+  flex-direction: column;\n+  gap: 6px;\n+  align-items: stretch;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n+  width: 100%;\n+  height: 36px;\n+  border: none;\n+  border-radius: 6px;\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n+  font-size: 16px;\n+  font-weight: 600;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+  }\n+`;\n+\n+const PageButton = styled.button<{ active?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.active ? AppColors.primary : 'white'};\n+  color: ${props => props.active ? 'white' : '#333'};\n+  font-size: 14px;\n+  font-weight: ${props => props.active ? 'bold' : 'normal'};\n+  cursor: pointer;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n+  }\n+`;\n+\n+const Divider = styled.div`\n+  height: 1px;\n+  background: ${AppColors.borderLight};\n+  margin: 10px 0;\n+`;\n+\n+const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n+  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  font-size: 14px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${AppColors.primary};\n+    color: ${AppColors.onPrimary};\n+  }\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  box-sizing: border-box;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  width: 210mm;\n+  height: 297mm;\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  box-sizing: border-box;\n+  overflow: hidden;\n+  \n+  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n+  scrollbar-width: none; /* Firefox */\n+  -ms-overflow-style: none; /* IE/Edge */\n+  \n+  &::-webkit-scrollbar {\n+    display: none; /* Chrome, Safari, Opera */\n+  }\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20mm;\n+    margin: 0;\n+    max-width: none;\n+    width: 210mm;\n+    height: 297mm;\n+    overflow: visible;\n+  }\n+  \n+  @media screen and (max-width: 900px) {\n+    width: 100%;\n+    height: auto;\n+    min-height: calc(100vh - 40px);\n+  }\n+`;\n+\n+\n+\n+const FormLabel = styled.label`\n+  display: block;\n+  font-size: ${AppTextStyles.label1.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 8px;\n+`;\n+\n+const FormTextarea = styled.textarea`\n+  width: 100%;\n+  padding: 10px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  resize: vertical;\n+  box-sizing: border-box;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+\n+\n+const ExercisePrescriptionPage: React.FC = () => {\n+  const [searchParams] = useSearchParams();\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n+  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n+  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: ''\n+  });\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n+\n+    loadMembers();\n+  }, []);\n+\n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+\n+          });\n+          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n+  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n+    try {\n+      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+      if (prescription) {\n+        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n+        const member = members.find(m => m.id === prescription.memberId);\n+        if (member) {\n+          setSelectedMember(member);\n+        }\n+        \n+        setCurrentPrescription(prescription);\n+        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n+        setFormData({\n+          height: prescription.height,\n+          weight: prescription.weight,\n+          footSize: prescription.footSize,\n+          medications: prescription.medications,\n+          medicalHistory: prescription.medicalHistory,\n+          painHistory: prescription.painHistory,\n+\n+        });\n+        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n+      }\n+    } catch (error) {\n+      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [members]);\n+\n+  useEffect(() => {\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    const prescriptionIdParam = searchParams.get('prescriptionId');\n+    \n+    if (prescriptionIdParam) {\n+      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+      loadSpecificPrescription(prescriptionIdParam);\n+    } else if (userIdParam && members.length > 0) {\n+      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n+      const member = members.find(m => m.id === userIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n+    }\n+  }, [searchParams, members, loadSpecificPrescription]);\n+\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value\n+    }));\n+  };\n+\n+  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n+  const handlePointClick = (pointId: string) => {\n+    setSelectedPoints(prev => {\n+      const newSelected = new Set(prev);\n+      if (newSelected.has(pointId)) {\n+        newSelected.delete(pointId);\n+      } else {\n+        newSelected.add(pointId);\n+      }\n+      return newSelected;\n+    });\n+  };\n+\n+  // ê·¼ìœ¡ í¬ì¸íŠ¸ ì¢Œí‘œ ì„¤ì • (ì‰½ê²Œ ì¡°ì • ê°€ëŠ¥)\n+  const musclePoints = {\n+    shoulder: {\n+      point: { x: 30, y: 25 },\n+      line: [\n+        { x: 30, y: 25 },  // ì‹œì‘ì  (í¬ì¸í„°)\n+        { x: 25, y: 20 },  // ì²« ë²ˆì§¸ êº¾ì„\n+        { x: 10, y: 15 }   // ëì  (í…ìŠ¤íŠ¸ ì—°ê²°ì )\n+      ],\n+      textBox: { x: 2, y: 11, width: 12, height: 4 },\n+      text: { x: 8, y: 13.5, label: 'ì‚¼ê°ê·¼' }\n+    },\n+    chest: {\n+      point: { x: 40, y: 35 },\n+      line: [\n+        { x: 40, y: 35 },  // ì‹œì‘ì \n+        { x: 55, y: 30 },  // ì²« ë²ˆì§¸ êº¾ì„\n+        { x: 70, y: 22 },  // ë‘ ë²ˆì§¸ êº¾ì„\n+        { x: 75, y: 20 }   // ëì \n+      ],\n+      textBox: { x: 72, y: 16, width: 12, height: 4 },\n+      text: { x: 78, y: 18.5, label: 'ëŒ€í‰ê·¼' }\n+    },\n+    abs: {\n+      point: { x: 45, y: 55 },\n+      line: [\n+        { x: 45, y: 55 },  // ì‹œì‘ì \n+        { x: 35, y: 65 },  // ì²« ë²ˆì§¸ êº¾ì„\n+        { x: 25, y: 68 },  // ë‘ ë²ˆì§¸ êº¾ì„\n+        { x: 20, y: 70 }   // ëì \n+      ],\n+      textBox: { x: 2, y: 70, width: 12, height: 4 },\n+      text: { x: 8, y: 72.5, label: 'ë³µì§ê·¼' }\n+    },\n+    quadriceps: {\n+      point: { x: 35, y: 80 },\n+      line: [\n+        { x: 35, y: 80 },  // ì‹œì‘ì \n+        { x: 50, y: 85 },  // ì²« ë²ˆì§¸ êº¾ì„\n+        { x: 60, y: 88 },  // ë‘ ë²ˆì§¸ êº¾ì„\n+        { x: 65, y: 90 }   // ëì \n+      ],\n+      textBox: { x: 62, y: 90, width: 16, height: 4 },\n+      text: { x: 70, y: 92.5, label: 'ëŒ€ì‚¬ë‘ê·¼' }\n+    }\n+  };\n+\n+  const handleSave = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: { front: [], spine: [], back: [] },\n+        signatureData: '',\n+        signedAt: null,\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n+        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n+      };\n+\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+\n+\n+\n+  const handleShare = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n+    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n+    \n+    try {\n+      if (navigator.share) {\n+        await navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: currentUrl,\n+        });\n+      } else {\n+        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      }\n+    } catch (error) {\n+      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n+      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n+      try {\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      } catch {\n+        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n+      }\n+    }\n+  };\n+\n+  const handlePrint = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      // PDF ìƒì„±\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n+      const originalPage = currentPage;\n+      \n+      for (let page = 1; page <= 3; page++) {\n+        if (page > 1) {\n+          pdf.addPage();\n+        }\n+\n+        // í˜ì´ì§€ ë³€ê²½\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n+        if (!prescriptionRef.current) continue;\n+        \n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+\n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210;\n+        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+      }\n+\n+      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n+      setCurrentPage(originalPage);\n+\n+      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n+      const pdfBlob = pdf.output('blob');\n+      const pdfUrl = URL.createObjectURL(pdfBlob);\n+      \n+      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n+      const printWindow = window.open(pdfUrl, '_blank');\n+      if (printWindow) {\n+        printWindow.onload = () => {\n+          setTimeout(() => {\n+            printWindow.print();\n+          }, 1000);\n+        };\n+      }\n+    } catch (error) {\n+      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n+      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  const handleDownloadPDF = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n+      for (let page = 1; page <= 3; page++) {\n+        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n+        const originalPage = currentPage;\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        if (!prescriptionRef.current) continue;\n+        \n+        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+        \n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n+        const imgHeight = 297; // A4 ë†’ì´ (mm)\n+        \n+        // ì²« ë²ˆì§¸ í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n+        if (page > 1) {\n+          pdf.addPage();\n+        }\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+        \n+        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n+        setCurrentPage(originalPage);\n+      }\n+      \n+      // PDF ë‹¤ìš´ë¡œë“œ\n+      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n+      pdf.save(fileName);\n+      \n+    } catch (error) {\n+      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n+      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  return (\n+    <PageContainer>\n+      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n+        {!isSearchPanelCollapsed && (\n+          <>\n+            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birth}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+          </MemberList>\n+          </>\n+        )}\n+      </SearchPanel>      <ButtonPanel>\n+        <ToggleButton \n+          $collapsed={isSearchPanelCollapsed}\n+          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n+          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n+        >\n+          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n+        </ToggleButton>\n+        \n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={isReadOnly}\n+        >\n+          ğŸ’¾\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          ğŸ“¤\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n+          ğŸ–¨ï¸\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n+          ğŸ“\n+        </ActionButton>\n+        \n+        <Divider />\n+        \n+        <PageButton \n+          active={currentPage === 1}\n+          onClick={() => setCurrentPage(1)}\n+        >\n+          1\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 2}\n+          onClick={() => setCurrentPage(2)}\n+        >\n+          2\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 3}\n+          onClick={() => setCurrentPage(3)}\n+        >\n+          3\n+        </PageButton>\n+      </ButtonPanel>\n+\n+      <PrescriptionPanel>\n+\n+\n+        <PrescriptionContainer ref={prescriptionRef}>\n+          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n+          {currentPage === 1 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n+              <div style={{ \n+                display: 'flex', \n+                alignItems: 'center', \n+                gap: '20px', \n+                marginBottom: '30px',\n+                fontSize: '14px',\n+                fontWeight: 'bold',\n+                height: '30px'\n+              }}>\n+                <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n+                <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n+                  year: 'numeric',\n+                  month: 'long', \n+                  day: 'numeric'\n+                }) : ''}</span>\n+                <span>ì‹ ì¥: \n+                  <input \n+                    type=\"text\" \n+                    value={formData.height}\n+                    onChange={(e) => handleInputChange('height', e.target.value)}\n+                    readOnly={isReadOnly}\n+                    style={{\n+                      border: 'none',\n+                      borderBottom: '1px solid #ccc',\n+                      background: 'transparent',\n+                      width: '60px',\n+                      textAlign: 'center',\n+                      fontSize: '14px',\n+                      fontWeight: 'bold',\n+                      marginLeft: '5px',\n+                      marginRight: '2px'\n+                    }}\n+                    placeholder=\"í‚¤\"\n+                  />cm</span>\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '20px',\n+                color: '#333'\n+              }}>SPINE Mapping Chart</div>\n+              \n+              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1,\n+                margin: '20px 0'\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n+                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n+                  style={{ \n+                    maxHeight: '100%',\n+                    maxWidth: '300px',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+              </div>\n+\n+              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n+              <div style={{ margin: '20px 0' }}>\n+                <FormLabel style={{ \n+                  fontSize: '16px', \n+                  fontWeight: 'bold', \n+                  marginBottom: '10px', \n+                  display: 'block'\n+                }}>\n+                  ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n+                </FormLabel>\n+                <FormTextarea\n+                  rows={6}\n+                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n+                  value={formData.painHistory}\n+                  onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+                  readOnly={isReadOnly}\n+                  style={{ \n+                    background: isReadOnly ? '#f5f5f5' : 'white',\n+                    height: '100px',\n+                    resize: 'none'\n+                  }}\n+                />\n+              </div>\n+\n+              {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n+              <div style={{ \n+                marginTop: 'auto',\n+                paddingTop: '20px',\n+                textAlign: 'left', \n+                fontSize: '12px', \n+                color: '#666' \n+              }}>\n+                ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n+                  ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n+                  : new Date().toISOString().split('T')[0]\n+                }\n+              </div>\n+            </div>\n+          )}\n+\n+          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n+          {currentPage === 2 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1,\n+                position: 'relative'\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n+                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+                \n+                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'auto'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"xMidYMid meet\"\n+                >\n+                  {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n+                  <g onClick={() => handlePointClick('shoulder')} style={{ cursor: 'pointer' }}>\n+                    <circle \n+                      cx={musclePoints.shoulder.point.x} \n+                      cy={musclePoints.shoulder.point.y} \n+                      r={selectedPoints.has('shoulder') ? \"1.5\" : \"1\"} \n+                      fill={selectedPoints.has('shoulder') ? \"orange\" : \"yellow\"}\n+                      stroke={selectedPoints.has('shoulder') ? \"red\" : \"none\"}\n+                      strokeWidth={selectedPoints.has('shoulder') ? \"0.2\" : \"0\"}\n+                    />\n+                    {selectedPoints.has('shoulder') && (\n+                      <polyline \n+                        points={musclePoints.shoulder.line.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"yellow\" \n+                        strokeWidth=\"0.8\" \n+                        fill=\"none\"\n+                      />\n+                    )}\n+                    <polyline \n+                      points={musclePoints.shoulder.line.map(p => `${p.x},${p.y}`).join(' ')} \n+                      stroke=\"black\" \n+                      strokeWidth=\"0.3\" \n+                      fill=\"none\"\n+                    />\n+                    <rect \n+                      x={musclePoints.shoulder.textBox.x} \n+                      y={musclePoints.shoulder.textBox.y} \n+                      width={musclePoints.shoulder.textBox.width} \n+                      height={musclePoints.shoulder.textBox.height} \n+                      fill={selectedPoints.has('shoulder') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                      stroke={selectedPoints.has('shoulder') ? \"orange\" : \"none\"}\n+                      strokeWidth=\"0.1\"\n+                    />\n+                    <text \n+                      x={musclePoints.shoulder.text.x} \n+                      y={musclePoints.shoulder.text.y} \n+                      fontSize=\"2\" \n+                      fill=\"black\"\n+                      fontWeight={selectedPoints.has('shoulder') ? \"bold\" : \"normal\"}\n+                      textAnchor=\"middle\"\n+                      dominantBaseline=\"middle\"\n+                    >\n+                      {musclePoints.shoulder.text.label}\n+                    </text>\n+                  </g>\n+                  \n+                  {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n+                  <g onClick={() => handlePointClick('chest')} style={{ cursor: 'pointer' }}>\n+                    <circle \n+                      cx={musclePoints.chest.point.x} \n+                      cy={musclePoints.chest.point.y} \n+                      r={selectedPoints.has('chest') ? \"1.5\" : \"1\"} \n+                      fill={selectedPoints.has('chest') ? \"orange\" : \"yellow\"}\n+                      stroke={selectedPoints.has('chest') ? \"red\" : \"none\"}\n+                      strokeWidth={selectedPoints.has('chest') ? \"0.2\" : \"0\"}\n+                    />\n+                    {selectedPoints.has('chest') && (\n+                      <polyline \n+                        points={musclePoints.chest.line.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"yellow\" \n+                        strokeWidth=\"0.8\" \n+                        fill=\"none\"\n+                      />\n+                    )}\n+                    <polyline \n+                      points={musclePoints.chest.line.map(p => `${p.x},${p.y}`).join(' ')} \n+                      stroke=\"black\" \n+                      strokeWidth=\"0.3\" \n+                      fill=\"none\"\n+                    />\n+                    <rect \n+                      x={musclePoints.chest.textBox.x} \n+                      y={musclePoints.chest.textBox.y} \n+                      width={musclePoints.chest.textBox.width} \n+                      height={musclePoints.chest.textBox.height} \n+                      fill={selectedPoints.has('chest') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                      stroke={selectedPoints.has('chest') ? \"orange\" : \"none\"}\n+                      strokeWidth=\"0.1\"\n+                    />\n+                    <text \n+                      x={musclePoints.chest.text.x} \n+                      y={musclePoints.chest.text.y} \n+                      fontSize=\"2\" \n+                      fill=\"black\"\n+                      fontWeight={selectedPoints.has('chest') ? \"bold\" : \"normal\"}\n+                      textAnchor=\"middle\"\n+                      dominantBaseline=\"middle\"\n+                    >\n+                      {musclePoints.chest.text.label}\n+                    </text>\n+                  </g>\n+                  \n+                  {/* í¬ì¸íŠ¸ 3: ë³µë¶€ ê·¼ìœ¡ */}\n+                  <g onClick={() => handlePointClick('abs')} style={{ cursor: 'pointer' }}>\n+                    <circle \n+                      cx={musclePoints.abs.point.x} \n+                      cy={musclePoints.abs.point.y} \n+                      r={selectedPoints.has('abs') ? \"1.5\" : \"1\"} \n+                      fill={selectedPoints.has('abs') ? \"orange\" : \"yellow\"}\n+                      stroke={selectedPoints.has('abs') ? \"red\" : \"none\"}\n+                      strokeWidth={selectedPoints.has('abs') ? \"0.2\" : \"0\"}\n+                    />\n+                    {selectedPoints.has('abs') && (\n+                      <polyline \n+                        points={musclePoints.abs.line.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"yellow\" \n+                        strokeWidth=\"0.8\" \n+                        fill=\"none\"\n+                      />\n+                    )}\n+                    <polyline \n+                      points={musclePoints.abs.line.map(p => `${p.x},${p.y}`).join(' ')} \n+                      stroke=\"black\" \n+                      strokeWidth=\"0.3\" \n+                      fill=\"none\"\n+                    />\n+                    <rect \n+                      x={musclePoints.abs.textBox.x} \n+                      y={musclePoints.abs.textBox.y} \n+                      width={musclePoints.abs.textBox.width} \n+                      height={musclePoints.abs.textBox.height} \n+                      fill={selectedPoints.has('abs') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                      stroke={selectedPoints.has('abs') ? \"orange\" : \"none\"}\n+                      strokeWidth=\"0.1\"\n+                    />\n+                    <text \n+                      x={musclePoints.abs.text.x} \n+                      y={musclePoints.abs.text.y} \n+                      fontSize=\"2\" \n+                      fill=\"black\"\n+                      fontWeight={selectedPoints.has('abs') ? \"bold\" : \"normal\"}\n+                      textAnchor=\"middle\"\n+                      dominantBaseline=\"middle\"\n+                    >\n+                      {musclePoints.abs.text.label}\n+                    </text>\n+                  </g>\n+                  \n+                  {/* í¬ì¸íŠ¸ 4: ë‹¤ë¦¬ ê·¼ìœ¡ */}\n+                  <g onClick={() => handlePointClick('quadriceps')} style={{ cursor: 'pointer' }}>\n+                    <circle \n+                      cx={musclePoints.quadriceps.point.x} \n+                      cy={musclePoints.quadriceps.point.y} \n+                      r={selectedPoints.has('quadriceps') ? \"1.5\" : \"1\"} \n+                      fill={selectedPoints.has('quadriceps') ? \"orange\" : \"yellow\"}\n+                      stroke={selectedPoints.has('quadriceps') ? \"red\" : \"none\"}\n+                      strokeWidth={selectedPoints.has('quadriceps') ? \"0.2\" : \"0\"}\n+                    />\n+                    {selectedPoints.has('quadriceps') && (\n+                      <polyline \n+                        points={musclePoints.quadriceps.line.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"yellow\" \n+                        strokeWidth=\"0.8\" \n+                        fill=\"none\"\n+                      />\n+                    )}\n+                    <polyline \n+                      points={musclePoints.quadriceps.line.map(p => `${p.x},${p.y}`).join(' ')} \n+                      stroke=\"black\" \n+                      strokeWidth=\"0.3\" \n+                      fill=\"none\"\n+                    />\n+                    <rect \n+                      x={musclePoints.quadriceps.textBox.x} \n+                      y={musclePoints.quadriceps.textBox.y} \n+                      width={musclePoints.quadriceps.textBox.width} \n+                      height={musclePoints.quadriceps.textBox.height} \n+                      fill={selectedPoints.has('quadriceps') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                      stroke={selectedPoints.has('quadriceps') ? \"orange\" : \"none\"}\n+                      strokeWidth=\"0.1\"\n+                    />\n+                    <text \n+                      x={musclePoints.quadriceps.text.x} \n+                      y={musclePoints.quadriceps.text.y} \n+                      fontSize=\"2\" \n+                      fill=\"black\"\n+                      fontWeight={selectedPoints.has('quadriceps') ? \"bold\" : \"normal\"}\n+                      textAnchor=\"middle\"\n+                      dominantBaseline=\"middle\"\n+                    >\n+                      {musclePoints.quadriceps.text.label}\n+                    </text>\n+                  </g>\n+                </svg>\n+              </div>\n+            </div>\n+          )}\n+\n+          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n+          {currentPage === 3 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n+                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+              </div>\n+            </div>\n+          )}\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n+    </PageContainer>\n+  );\n+};\n+\n+export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764245602509,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -237,10 +237,74 @@\n     border-color: ${AppColors.primary};\n   }\n `;\n \n+const CoordinateEditor = styled.div<{ $open?: boolean }>`\n+  position: fixed;\n+  left: ${props => props.$open ? '320px' : '-400px'};\n+  top: 20px;\n+  width: 350px;\n+  height: calc(100vh - 40px);\n+  background: white;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  padding: 20px;\n+  overflow-y: auto;\n+  transition: left 0.3s ease;\n+  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n+  z-index: 1000;\n+`;\n \n+const CoordinateToggleBtn = styled.button<{ $editorOpen?: boolean }>`\n+  position: fixed;\n+  left: ${props => props.$editorOpen ? '685px' : '325px'};\n+  top: 20px;\n+  width: 40px;\n+  height: 40px;\n+  background: ${AppColors.primary};\n+  color: white;\n+  border: none;\n+  border-radius: 50%;\n+  font-size: 18px;\n+  cursor: pointer;\n+  transition: all 0.3s ease;\n+  z-index: 1001;\n+  \n+  &:hover {\n+    background: ${AppColors.secondary};\n+    transform: scale(1.1);\n+  }\n+`;\n \n+const InputGroup = styled.div`\n+  margin-bottom: 15px;\n+`;\n+\n+const InputLabel = styled.label`\n+  display: block;\n+  margin-bottom: 5px;\n+  font-size: 12px;\n+  font-weight: bold;\n+  color: ${AppColors.onSurface};\n+`;\n+\n+const CoordinateInput = styled.input`\n+  width: 60px;\n+  padding: 4px 6px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 3px;\n+  font-size: 12px;\n+  margin-right: 5px;\n+`;\n+\n+const MuscleSelector = styled.select`\n+  width: 100%;\n+  padding: 8px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 4px;\n+  margin-bottom: 15px;\n+`;\n+\n const ExercisePrescriptionPage: React.FC = () => {\n   const [searchParams] = useSearchParams();\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n@@ -248,9 +312,11 @@\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n   const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n-  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n+  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ\n+  const [editingMuscle, setEditingMuscle] = useState<string | null>(null); // í¸ì§‘ ì¤‘ì¸ ê·¼ìœ¡ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n@@ -431,10 +497,10 @@\n       return newSelected;\n     });\n   };\n \n-  // ê·¼ìœ¡ í¬ì¸íŠ¸ ì¢Œí‘œ ì„¤ì • (ì‰½ê²Œ ì¡°ì • ê°€ëŠ¥)\n-  const musclePoints = {\n+  // ê·¼ìœ¡ í¬ì¸íŠ¸ ì¢Œí‘œ ì„¤ì • (í¸ì§‘ ê°€ëŠ¥)\n+  const [musclePoints, setMusclePoints] = useState({\n     shoulder: {\n       point: { x: 30, y: 25 },\n       line: [\n         { x: 30, y: 25 },  // ì‹œì‘ì  (í¬ì¸í„°)\n@@ -476,9 +542,9 @@\n       ],\n       textBox: { x: 62, y: 90, width: 16, height: 4 },\n       text: { x: 70, y: 92.5, label: 'ëŒ€ì‚¬ë‘ê·¼' }\n     }\n-  };\n+  });\n \n   const handleSave = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n@@ -682,8 +748,184 @@\n   };\n \n   return (\n     <PageContainer>\n+      {/* ì¢Œí‘œ í¸ì§‘ê¸° í† ê¸€ ë²„íŠ¼ */}\n+      <CoordinateToggleBtn \n+        $editorOpen={isCoordinateEditorOpen}\n+        onClick={() => setIsCoordinateEditorOpen(!isCoordinateEditorOpen)}\n+      >\n+        +\n+      </CoordinateToggleBtn>\n+\n+      {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n+      <CoordinateEditor $open={isCoordinateEditorOpen}>\n+        <h3>ì¢Œí‘œ í¸ì§‘ê¸°</h3>\n+        \n+        <InputGroup>\n+          <InputLabel>ê·¼ìœ¡ ì„ íƒ</InputLabel>\n+          <MuscleSelector \n+            value={editingMuscle || ''} \n+            onChange={(e) => setEditingMuscle(e.target.value || null)}\n+          >\n+            <option value=\"\">ê·¼ìœ¡ ì„ íƒ</option>\n+            <option value=\"shoulder\">ì‚¼ê°ê·¼</option>\n+            <option value=\"chest\">ëŒ€í‰ê·¼</option>\n+            <option value=\"abs\">ë³µì§ê·¼</option>\n+            <option value=\"quadriceps\">ëŒ€ì‚¬ë‘ê·¼</option>\n+          </MuscleSelector>\n+        </InputGroup>\n+\n+        {editingMuscle && (\n+          <>\n+            <InputGroup>\n+              <InputLabel>í¬ì¸í„° ì¢Œí‘œ</InputLabel>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={musclePoints[editingMuscle as keyof typeof musclePoints]?.point.x || 0}\n+                onChange={(e) => {\n+                  const newPoints = { ...musclePoints };\n+                  newPoints[editingMuscle as keyof typeof musclePoints].point.x = Number(e.target.value);\n+                  newPoints[editingMuscle as keyof typeof musclePoints].line[0].x = Number(e.target.value);\n+                  setMusclePoints(newPoints);\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={musclePoints[editingMuscle as keyof typeof musclePoints]?.point.y || 0}\n+                onChange={(e) => {\n+                  const newPoints = { ...musclePoints };\n+                  newPoints[editingMuscle as keyof typeof musclePoints].point.y = Number(e.target.value);\n+                  newPoints[editingMuscle as keyof typeof musclePoints].line[0].y = Number(e.target.value);\n+                  setMusclePoints(newPoints);\n+                }}\n+              />\n+            </InputGroup>\n+\n+            <InputGroup>\n+              <InputLabel>ì„  ì¢Œí‘œë“¤</InputLabel>\n+              {musclePoints[editingMuscle as keyof typeof musclePoints]?.line.map((point, index) => (\n+                <div key={index} style={{ marginBottom: '5px' }}>\n+                  <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+                  <CoordinateInput \n+                    type=\"number\" \n+                    placeholder=\"X\" \n+                    value={point.x}\n+                    onChange={(e) => {\n+                      const newPoints = { ...musclePoints };\n+                      newPoints[editingMuscle as keyof typeof musclePoints].line[index].x = Number(e.target.value);\n+                      setMusclePoints(newPoints);\n+                    }}\n+                  />\n+                  <CoordinateInput \n+                    type=\"number\" \n+                    placeholder=\"Y\" \n+                    value={point.y}\n+                    onChange={(e) => {\n+                      const newPoints = { ...musclePoints };\n+                      newPoints[editingMuscle as keyof typeof musclePoints].line[index].y = Number(e.target.value);\n+                      setMusclePoints(newPoints);\n+                    }}\n+                  />\n+                </div>\n+              ))}\n+            </InputGroup>\n+\n+            <InputGroup>\n+              <InputLabel>í…ìŠ¤íŠ¸ ì¢Œí‘œ</InputLabel>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={musclePoints[editingMuscle as keyof typeof musclePoints]?.text.x || 0}\n+                onChange={(e) => {\n+                  const newPoints = { ...musclePoints };\n+                  newPoints[editingMuscle as keyof typeof musclePoints].text.x = Number(e.target.value);\n+                  setMusclePoints(newPoints);\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={musclePoints[editingMuscle as keyof typeof musclePoints]?.text.y || 0}\n+                onChange={(e) => {\n+                  const newPoints = { ...musclePoints };\n+                  newPoints[editingMuscle as keyof typeof musclePoints].text.y = Number(e.target.value);\n+                  setMusclePoints(newPoints);\n+                }}\n+              />\n+            </InputGroup>\n+\n+            <InputGroup>\n+              <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n+              <div>\n+                <span style={{ fontSize: '11px' }}>X: </span>\n+                <CoordinateInput \n+                  type=\"number\" \n+                  value={musclePoints[editingMuscle as keyof typeof musclePoints]?.textBox.x || 0}\n+                  onChange={(e) => {\n+                    const newPoints = { ...musclePoints };\n+                    newPoints[editingMuscle as keyof typeof musclePoints].textBox.x = Number(e.target.value);\n+                    setMusclePoints(newPoints);\n+                  }}\n+                />\n+                <span style={{ fontSize: '11px' }}>Y: </span>\n+                <CoordinateInput \n+                  type=\"number\" \n+                  value={musclePoints[editingMuscle as keyof typeof musclePoints]?.textBox.y || 0}\n+                  onChange={(e) => {\n+                    const newPoints = { ...musclePoints };\n+                    newPoints[editingMuscle as keyof typeof musclePoints].textBox.y = Number(e.target.value);\n+                    setMusclePoints(newPoints);\n+                  }}\n+                />\n+              </div>\n+              <div style={{ marginTop: '5px' }}>\n+                <span style={{ fontSize: '11px' }}>W: </span>\n+                <CoordinateInput \n+                  type=\"number\" \n+                  value={musclePoints[editingMuscle as keyof typeof musclePoints]?.textBox.width || 0}\n+                  onChange={(e) => {\n+                    const newPoints = { ...musclePoints };\n+                    newPoints[editingMuscle as keyof typeof musclePoints].textBox.width = Number(e.target.value);\n+                    setMusclePoints(newPoints);\n+                  }}\n+                />\n+                <span style={{ fontSize: '11px' }}>H: </span>\n+                <CoordinateInput \n+                  type=\"number\" \n+                  value={musclePoints[editingMuscle as keyof typeof musclePoints]?.textBox.height || 0}\n+                  onChange={(e) => {\n+                    const newPoints = { ...musclePoints };\n+                    newPoints[editingMuscle as keyof typeof musclePoints].textBox.height = Number(e.target.value);\n+                    setMusclePoints(newPoints);\n+                  }}\n+                />\n+              </div>\n+            </InputGroup>\n+\n+            <button \n+              onClick={() => {\n+                console.log('í˜„ì¬ ì¢Œí‘œ ë°ì´í„°:', JSON.stringify(musclePoints[editingMuscle as keyof typeof musclePoints], null, 2));\n+              }}\n+              style={{\n+                width: '100%',\n+                padding: '8px',\n+                background: AppColors.primary,\n+                color: 'white',\n+                border: 'none',\n+                borderRadius: '4px',\n+                cursor: 'pointer',\n+                marginTop: '10px'\n+              }}\n+            >\n+              ì½˜ì†”ì— ì¢Œí‘œ ì¶œë ¥\n+            </button>\n+          </>\n+        )}\n+      </CoordinateEditor>\n+\n       <SearchPanel $collapsed={isSearchPanelCollapsed}>\n         {!isSearchPanelCollapsed && (\n           <>\n             <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n@@ -1178,1187 +1420,5 @@\n     </PageContainer>\n   );\n };\n \n-export default ExercisePrescriptionPage;\n-import React, { useEffect, useState, useCallback, useRef } from 'react';\n-import { useSearchParams } from 'react-router-dom';\n-import styled from 'styled-components';\n-import html2canvas from 'html2canvas';\n-import jsPDF from 'jspdf';\n-import { AppColors } from '../styles/colors';\n-import { AppTextStyles } from '../styles/textStyles';\n-import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n-\n-const PageContainer = styled.div`\n-  min-height: 100vh;\n-  display: flex;\n-  background: ${AppColors.background};\n-  \n-  @media print {\n-    display: block;\n-    background: white;\n-  }\n-`;\n-\n-const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n-  width: ${props => props.$collapsed ? '0px' : '300px'};\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: ${props => props.$collapsed ? '0' : '20px'};\n-  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n-  transition: all 0.3s ease;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n-  width: 55px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 10px 2px;\n-  display: ${props => props.$hidden ? 'none' : 'flex'};\n-  flex-direction: column;\n-  gap: 6px;\n-  align-items: stretch;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 100%;\n-  height: 36px;\n-  border: none;\n-  border-radius: 6px;\n-  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n-  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: 16px;\n-  font-weight: 600;\n-  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-  }\n-`;\n-\n-const PageButton = styled.button<{ active?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.active ? AppColors.primary : 'white'};\n-  color: ${props => props.active ? 'white' : '#333'};\n-  font-size: 14px;\n-  font-weight: ${props => props.active ? 'bold' : 'normal'};\n-  cursor: pointer;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n-  }\n-`;\n-\n-const Divider = styled.div`\n-  height: 1px;\n-  background: ${AppColors.borderLight};\n-  margin: 10px 0;\n-`;\n-\n-const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n-  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n-  cursor: pointer;\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  font-size: 14px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${AppColors.primary};\n-    color: ${AppColors.onPrimary};\n-  }\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-\n-\n-const SearchTitle = styled.h2`\n-  font-size: ${AppTextStyles.title2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SearchInput = styled.input`\n-  width: 100%;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  margin-bottom: 16px;\n-  box-sizing: border-box;\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const MemberList = styled.div`\n-  max-height: 400px;\n-  overflow-y: auto;\n-`;\n-\n-const MemberItem = styled.div<{ selected?: boolean }>`\n-  padding: 12px;\n-  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 8px;\n-  margin-bottom: 8px;\n-  cursor: pointer;\n-  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n-  \n-  &:hover {\n-    background: ${AppColors.primary}20;\n-  }\n-`;\n-\n-const MemberName = styled.div`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 4px;\n-`;\n-\n-const MemberInfo = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const PrescriptionPanel = styled.div`\n-  flex: 1;\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    padding: 0;\n-    overflow: visible;\n-  }\n-`;\n-\n-const PrescriptionContainer = styled.div`\n-  width: 210mm;\n-  height: 297mm;\n-  max-width: 800px;\n-  margin: 0 auto;\n-  background: white;\n-  padding: 40px;\n-  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  box-sizing: border-box;\n-  overflow: hidden;\n-  \n-  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n-  scrollbar-width: none; /* Firefox */\n-  -ms-overflow-style: none; /* IE/Edge */\n-  \n-  &::-webkit-scrollbar {\n-    display: none; /* Chrome, Safari, Opera */\n-  }\n-  \n-  @media print {\n-    box-shadow: none;\n-    padding: 20mm;\n-    margin: 0;\n-    max-width: none;\n-    width: 210mm;\n-    height: 297mm;\n-    overflow: visible;\n-  }\n-  \n-  @media screen and (max-width: 900px) {\n-    width: 100%;\n-    height: auto;\n-    min-height: calc(100vh - 40px);\n-  }\n-`;\n-\n-\n-\n-const FormLabel = styled.label`\n-  display: block;\n-  font-size: ${AppTextStyles.label1.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 8px;\n-`;\n-\n-const FormTextarea = styled.textarea`\n-  width: 100%;\n-  padding: 10px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  resize: vertical;\n-  box-sizing: border-box;\n-  \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-\n-\n-const ExercisePrescriptionPage: React.FC = () => {\n-  const [searchParams] = useSearchParams();\n-  const [searchTerm, setSearchTerm] = useState('');\n-  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n-  const [members, setMembers] = useState<Member[]>([]);\n-  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n-  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n-  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n-  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n-  const [formData, setFormData] = useState({\n-    height: '',\n-    weight: '',\n-    footSize: '',\n-    medications: '',\n-    medicalHistory: {\n-      musculoskeletal: false,\n-      cardiovascular: false,\n-      diabetes: false,\n-      osteoporosis: false,\n-      thyroid: false,\n-      varicose: false,\n-      arthritis: false,\n-    } as ExercisePrescriptionMedicalHistory,\n-    painHistory: ''\n-  });\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n-  useEffect(() => {\n-    const loadMembers = async () => {\n-      try {\n-        const allMembers = await dbManager.getAllMembers();\n-        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n-        const activeMembers = allMembers.filter(member => member.isActive);\n-        setMembers(activeMembers);\n-      } catch (error) {\n-        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-      }\n-    };\n-\n-    loadMembers();\n-  }, []);\n-\n-  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n-  useEffect(() => {\n-    const loadPrescription = async () => {\n-      if (!selectedMember) {\n-        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n-        setCurrentPrescription(null);\n-        setFormData({\n-          height: '',\n-          weight: '',\n-          footSize: '',\n-          medications: '',\n-          medicalHistory: {\n-            musculoskeletal: false,\n-            cardiovascular: false,\n-            diabetes: false,\n-            osteoporosis: false,\n-            thyroid: false,\n-            varicose: false,\n-            arthritis: false,\n-          },\n-          painHistory: '',\n-\n-        });\n-        return;\n-      }\n-\n-      try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n-        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n-        \n-        if (prescription) {\n-          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n-          setCurrentPrescription(prescription);\n-          setFormData({\n-            height: prescription.height,\n-            weight: prescription.weight,\n-            footSize: prescription.footSize,\n-            medications: prescription.medications,\n-            medicalHistory: prescription.medicalHistory,\n-            painHistory: prescription.painHistory,\n-\n-          });\n-          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n-        } else {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n-          setCurrentPrescription(null);\n-          setFormData({\n-            height: '',\n-            weight: '',\n-            footSize: '',\n-            medications: '',\n-            medicalHistory: {\n-              musculoskeletal: false,\n-              cardiovascular: false,\n-              diabetes: false,\n-              osteoporosis: false,\n-              thyroid: false,\n-              varicose: false,\n-              arthritis: false,\n-            },\n-            painHistory: '',\n-\n-          });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n-        }\n-      } catch (error) {\n-        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-      }\n-    };\n-\n-    loadPrescription();\n-  }, [selectedMember]);\n-\n-  const filteredMembers = members.filter(member =>\n-    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n-  );\n-\n-  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n-    try {\n-      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-      if (prescription) {\n-        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n-        const member = members.find(m => m.id === prescription.memberId);\n-        if (member) {\n-          setSelectedMember(member);\n-        }\n-        \n-        setCurrentPrescription(prescription);\n-        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n-        setFormData({\n-          height: prescription.height,\n-          weight: prescription.weight,\n-          footSize: prescription.footSize,\n-          medications: prescription.medications,\n-          medicalHistory: prescription.medicalHistory,\n-          painHistory: prescription.painHistory,\n-\n-        });\n-        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n-      }\n-    } catch (error) {\n-      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-    }\n-  }, [members]);\n-\n-  useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n-    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    const prescriptionIdParam = searchParams.get('prescriptionId');\n-    \n-    if (prescriptionIdParam) {\n-      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-      loadSpecificPrescription(prescriptionIdParam);\n-    } else if (userIdParam && members.length > 0) {\n-      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n-      const member = members.find(m => m.id === userIdParam);\n-      if (member) {\n-        setSelectedMember(member);\n-      }\n-    }\n-  }, [searchParams, members, loadSpecificPrescription]);\n-\n-  const handleMemberSelect = (member: Member) => {\n-    setSelectedMember(member);\n-  };\n-\n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value\n-    }));\n-  };\n-\n-  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n-  const handlePointClick = (pointId: string) => {\n-    setSelectedPoints(prev => {\n-      const newSelected = new Set(prev);\n-      if (newSelected.has(pointId)) {\n-        newSelected.delete(pointId);\n-      } else {\n-        newSelected.add(pointId);\n-      }\n-      return newSelected;\n-    });\n-  };\n-\n-  // ê·¼ìœ¡ í¬ì¸íŠ¸ ì¢Œí‘œ ì„¤ì • (ì‰½ê²Œ ì¡°ì • ê°€ëŠ¥)\n-  const musclePoints = {\n-    shoulder: {\n-      point: { x: 30, y: 25 },\n-      line: [\n-        { x: 30, y: 25 },  // ì‹œì‘ì  (í¬ì¸í„°)\n-        { x: 25, y: 20 },  // ì²« ë²ˆì§¸ êº¾ì„\n-        { x: 10, y: 15 }   // ëì  (í…ìŠ¤íŠ¸ ì—°ê²°ì )\n-      ],\n-      textBox: { x: 2, y: 11, width: 12, height: 4 },\n-      text: { x: 8, y: 13.5, label: 'ì‚¼ê°ê·¼' }\n-    },\n-    chest: {\n-      point: { x: 40, y: 35 },\n-      line: [\n-        { x: 40, y: 35 },  // ì‹œì‘ì \n-        { x: 55, y: 30 },  // ì²« ë²ˆì§¸ êº¾ì„\n-        { x: 70, y: 22 },  // ë‘ ë²ˆì§¸ êº¾ì„\n-        { x: 75, y: 20 }   // ëì \n-      ],\n-      textBox: { x: 72, y: 16, width: 12, height: 4 },\n-      text: { x: 78, y: 18.5, label: 'ëŒ€í‰ê·¼' }\n-    },\n-    abs: {\n-      point: { x: 45, y: 55 },\n-      line: [\n-        { x: 45, y: 55 },  // ì‹œì‘ì \n-        { x: 35, y: 65 },  // ì²« ë²ˆì§¸ êº¾ì„\n-        { x: 25, y: 68 },  // ë‘ ë²ˆì§¸ êº¾ì„\n-        { x: 20, y: 70 }   // ëì \n-      ],\n-      textBox: { x: 2, y: 70, width: 12, height: 4 },\n-      text: { x: 8, y: 72.5, label: 'ë³µì§ê·¼' }\n-    },\n-    quadriceps: {\n-      point: { x: 35, y: 80 },\n-      line: [\n-        { x: 35, y: 80 },  // ì‹œì‘ì \n-        { x: 50, y: 85 },  // ì²« ë²ˆì§¸ êº¾ì„\n-        { x: 60, y: 88 },  // ë‘ ë²ˆì§¸ êº¾ì„\n-        { x: 65, y: 90 }   // ëì \n-      ],\n-      textBox: { x: 62, y: 90, width: 16, height: 4 },\n-      text: { x: 70, y: 92.5, label: 'ëŒ€ì‚¬ë‘ê·¼' }\n-    }\n-  };\n-\n-  const handleSave = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const prescriptionData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        height: formData.height,\n-        weight: formData.weight,\n-        footSize: formData.footSize,\n-        medications: formData.medications,\n-        medicalHistory: formData.medicalHistory,\n-        painHistory: formData.painHistory,\n-        bodyImages: { front: [], spine: [], back: [] },\n-        signatureData: '',\n-        signedAt: null,\n-        isActive: true,\n-        prescriptionDate: new Date(),\n-        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n-        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n-      };\n-\n-      if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      } else {\n-        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      }\n-      \n-      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    } catch (error) {\n-      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-\n-\n-\n-  const handleShare = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n-    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n-    \n-    try {\n-      if (navigator.share) {\n-        await navigator.share({\n-          title: 'ìš´ë™ì²˜ë°©ì„œ',\n-          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: currentUrl,\n-        });\n-      } else {\n-        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      }\n-    } catch (error) {\n-      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n-      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n-      try {\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      } catch {\n-        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n-      }\n-    }\n-  };\n-\n-  const handlePrint = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      // PDF ìƒì„±\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      \n-      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n-      const originalPage = currentPage;\n-      \n-      for (let page = 1; page <= 3; page++) {\n-        if (page > 1) {\n-          pdf.addPage();\n-        }\n-\n-        // í˜ì´ì§€ ë³€ê²½\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n-        if (!prescriptionRef.current) continue;\n-        \n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-\n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210;\n-        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-      }\n-\n-      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n-      setCurrentPage(originalPage);\n-\n-      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n-      const pdfBlob = pdf.output('blob');\n-      const pdfUrl = URL.createObjectURL(pdfBlob);\n-      \n-      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n-      const printWindow = window.open(pdfUrl, '_blank');\n-      if (printWindow) {\n-        printWindow.onload = () => {\n-          setTimeout(() => {\n-            printWindow.print();\n-          }, 1000);\n-        };\n-      }\n-    } catch (error) {\n-      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n-      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  const handleDownloadPDF = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      \n-      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n-      for (let page = 1; page <= 3; page++) {\n-        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n-        const originalPage = currentPage;\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        if (!prescriptionRef.current) continue;\n-        \n-        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-        \n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n-        const imgHeight = 297; // A4 ë†’ì´ (mm)\n-        \n-        // ì²« ë²ˆì§¸ í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n-        if (page > 1) {\n-          pdf.addPage();\n-        }\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-        \n-        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n-        setCurrentPage(originalPage);\n-      }\n-      \n-      // PDF ë‹¤ìš´ë¡œë“œ\n-      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n-      pdf.save(fileName);\n-      \n-    } catch (error) {\n-      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n-      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  return (\n-    <PageContainer>\n-      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n-        {!isSearchPanelCollapsed && (\n-          <>\n-            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n-        <SearchInput\n-          type=\"text\"\n-          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n-          value={searchTerm}\n-          onChange={(e) => setSearchTerm(e.target.value)}\n-        />\n-        <MemberList>\n-          {filteredMembers.map(member => (\n-            <MemberItem\n-              key={member.id}\n-              selected={selectedMember?.id === member.id}\n-              onClick={() => handleMemberSelect(member)}\n-            >\n-              <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birth}</MemberInfo>\n-              <MemberInfo>{member.phone}</MemberInfo>\n-            </MemberItem>\n-          ))}\n-          </MemberList>\n-          </>\n-        )}\n-      </SearchPanel>      <ButtonPanel>\n-        <ToggleButton \n-          $collapsed={isSearchPanelCollapsed}\n-          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n-          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n-        >\n-          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n-        </ToggleButton>\n-        \n-        <ActionButton \n-          onClick={handleSave} \n-          title=\"ì €ì¥\"\n-          disabled={isReadOnly}\n-        >\n-          ğŸ’¾\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          ğŸ“¤\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n-          ğŸ–¨ï¸\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n-          ğŸ“\n-        </ActionButton>\n-        \n-        <Divider />\n-        \n-        <PageButton \n-          active={currentPage === 1}\n-          onClick={() => setCurrentPage(1)}\n-        >\n-          1\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 2}\n-          onClick={() => setCurrentPage(2)}\n-        >\n-          2\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 3}\n-          onClick={() => setCurrentPage(3)}\n-        >\n-          3\n-        </PageButton>\n-      </ButtonPanel>\n-\n-      <PrescriptionPanel>\n-\n-\n-        <PrescriptionContainer ref={prescriptionRef}>\n-          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n-          {currentPage === 1 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n-              <div style={{ \n-                display: 'flex', \n-                alignItems: 'center', \n-                gap: '20px', \n-                marginBottom: '30px',\n-                fontSize: '14px',\n-                fontWeight: 'bold',\n-                height: '30px'\n-              }}>\n-                <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n-                <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n-                  year: 'numeric',\n-                  month: 'long', \n-                  day: 'numeric'\n-                }) : ''}</span>\n-                <span>ì‹ ì¥: \n-                  <input \n-                    type=\"text\" \n-                    value={formData.height}\n-                    onChange={(e) => handleInputChange('height', e.target.value)}\n-                    readOnly={isReadOnly}\n-                    style={{\n-                      border: 'none',\n-                      borderBottom: '1px solid #ccc',\n-                      background: 'transparent',\n-                      width: '60px',\n-                      textAlign: 'center',\n-                      fontSize: '14px',\n-                      fontWeight: 'bold',\n-                      marginLeft: '5px',\n-                      marginRight: '2px'\n-                    }}\n-                    placeholder=\"í‚¤\"\n-                  />cm</span>\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '20px',\n-                color: '#333'\n-              }}>SPINE Mapping Chart</div>\n-              \n-              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                margin: '20px 0'\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n-                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n-                  style={{ \n-                    maxHeight: '100%',\n-                    maxWidth: '300px',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-              </div>\n-\n-              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n-              <div style={{ margin: '20px 0' }}>\n-                <FormLabel style={{ \n-                  fontSize: '16px', \n-                  fontWeight: 'bold', \n-                  marginBottom: '10px', \n-                  display: 'block'\n-                }}>\n-                  ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n-                </FormLabel>\n-                <FormTextarea\n-                  rows={6}\n-                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n-                  value={formData.painHistory}\n-                  onChange={(e) => handleInputChange('painHistory', e.target.value)}\n-                  readOnly={isReadOnly}\n-                  style={{ \n-                    background: isReadOnly ? '#f5f5f5' : 'white',\n-                    height: '100px',\n-                    resize: 'none'\n-                  }}\n-                />\n-              </div>\n-\n-              {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n-              <div style={{ \n-                marginTop: 'auto',\n-                paddingTop: '20px',\n-                textAlign: 'left', \n-                fontSize: '12px', \n-                color: '#666' \n-              }}>\n-                ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n-                  ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n-                  : new Date().toISOString().split('T')[0]\n-                }\n-              </div>\n-            </div>\n-          )}\n-\n-          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n-          {currentPage === 2 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                position: 'relative'\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n-                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-                \n-                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n-                <svg \n-                  style={{\n-                    position: 'absolute',\n-                    top: 0,\n-                    left: 0,\n-                    width: '100%',\n-                    height: '100%',\n-                    pointerEvents: 'auto'\n-                  }}\n-                  viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"xMidYMid meet\"\n-                >\n-                  {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n-                  <g onClick={() => handlePointClick('shoulder')} style={{ cursor: 'pointer' }}>\n-                    <circle \n-                      cx={musclePoints.shoulder.point.x} \n-                      cy={musclePoints.shoulder.point.y} \n-                      r={selectedPoints.has('shoulder') ? \"1.5\" : \"1\"} \n-                      fill={selectedPoints.has('shoulder') ? \"orange\" : \"yellow\"}\n-                      stroke={selectedPoints.has('shoulder') ? \"red\" : \"none\"}\n-                      strokeWidth={selectedPoints.has('shoulder') ? \"0.2\" : \"0\"}\n-                    />\n-                    {selectedPoints.has('shoulder') && (\n-                      <polyline \n-                        points={musclePoints.shoulder.line.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"yellow\" \n-                        strokeWidth=\"0.8\" \n-                        fill=\"none\"\n-                      />\n-                    )}\n-                    <polyline \n-                      points={musclePoints.shoulder.line.map(p => `${p.x},${p.y}`).join(' ')} \n-                      stroke=\"black\" \n-                      strokeWidth=\"0.3\" \n-                      fill=\"none\"\n-                    />\n-                    <rect \n-                      x={musclePoints.shoulder.textBox.x} \n-                      y={musclePoints.shoulder.textBox.y} \n-                      width={musclePoints.shoulder.textBox.width} \n-                      height={musclePoints.shoulder.textBox.height} \n-                      fill={selectedPoints.has('shoulder') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                      stroke={selectedPoints.has('shoulder') ? \"orange\" : \"none\"}\n-                      strokeWidth=\"0.1\"\n-                    />\n-                    <text \n-                      x={musclePoints.shoulder.text.x} \n-                      y={musclePoints.shoulder.text.y} \n-                      fontSize=\"2\" \n-                      fill=\"black\"\n-                      fontWeight={selectedPoints.has('shoulder') ? \"bold\" : \"normal\"}\n-                      textAnchor=\"middle\"\n-                      dominantBaseline=\"middle\"\n-                    >\n-                      {musclePoints.shoulder.text.label}\n-                    </text>\n-                  </g>\n-                  \n-                  {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n-                  <g onClick={() => handlePointClick('chest')} style={{ cursor: 'pointer' }}>\n-                    <circle \n-                      cx=\"40\" \n-                      cy=\"35\" \n-                      r={selectedPoints.has('chest') ? \"1.5\" : \"1\"} \n-                      fill={selectedPoints.has('chest') ? \"orange\" : \"yellow\"}\n-                      stroke={selectedPoints.has('chest') ? \"red\" : \"none\"}\n-                      strokeWidth={selectedPoints.has('chest') ? \"0.2\" : \"0\"}\n-                    />\n-                    {selectedPoints.has('chest') && (\n-                      <polyline \n-                        points=\"40,35 55,30 70,22 75,20\" \n-                        stroke=\"yellow\" \n-                        strokeWidth=\"0.8\" \n-                        fill=\"none\"\n-                      />\n-                    )}\n-                    <polyline \n-                      points=\"40,35 55,30 70,22 75,20\" \n-                      stroke=\"black\" \n-                      strokeWidth=\"0.3\" \n-                      fill=\"none\"\n-                    />\n-                    <rect \n-                      x=\"72\" \n-                      y=\"16\" \n-                      width=\"12\" \n-                      height=\"4\" \n-                      fill={selectedPoints.has('chest') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                      stroke={selectedPoints.has('chest') ? \"orange\" : \"none\"}\n-                      strokeWidth=\"0.1\"\n-                    />\n-                    <text \n-                      x=\"78\" \n-                      y=\"18.5\" \n-                      fontSize=\"2\" \n-                      fill=\"black\"\n-                      fontWeight={selectedPoints.has('chest') ? \"bold\" : \"normal\"}\n-                      textAnchor=\"middle\"\n-                      dominantBaseline=\"middle\"\n-                    >\n-                      ëŒ€í‰ê·¼\n-                    </text>\n-                  </g>\n-                  \n-                  {/* í¬ì¸íŠ¸ 3: ë³µë¶€ ê·¼ìœ¡ */}\n-                  <g onClick={() => handlePointClick('abs')} style={{ cursor: 'pointer' }}>\n-                    <circle \n-                      cx=\"45\" \n-                      cy=\"55\" \n-                      r={selectedPoints.has('abs') ? \"1.5\" : \"1\"} \n-                      fill={selectedPoints.has('abs') ? \"orange\" : \"yellow\"}\n-                      stroke={selectedPoints.has('abs') ? \"red\" : \"none\"}\n-                      strokeWidth={selectedPoints.has('abs') ? \"0.2\" : \"0\"}\n-                    />\n-                    {selectedPoints.has('abs') && (\n-                      <polyline \n-                        points=\"45,55 35,65 25,68 20,70\" \n-                        stroke=\"yellow\" \n-                        strokeWidth=\"0.8\" \n-                        fill=\"none\"\n-                      />\n-                    )}\n-                    <polyline \n-                      points=\"45,55 35,65 25,68 20,70\" \n-                      stroke=\"black\" \n-                      strokeWidth=\"0.3\" \n-                      fill=\"none\"\n-                    />\n-                    <rect \n-                      x=\"2\" \n-                      y=\"70\" \n-                      width=\"12\" \n-                      height=\"4\" \n-                      fill={selectedPoints.has('abs') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                      stroke={selectedPoints.has('abs') ? \"orange\" : \"none\"}\n-                      strokeWidth=\"0.1\"\n-                    />\n-                    <text \n-                      x=\"8\" \n-                      y=\"72.5\" \n-                      fontSize=\"2\" \n-                      fill=\"black\"\n-                      fontWeight={selectedPoints.has('abs') ? \"bold\" : \"normal\"}\n-                      textAnchor=\"middle\"\n-                      dominantBaseline=\"middle\"\n-                    >\n-                      ë³µì§ê·¼\n-                    </text>\n-                  </g>\n-                  \n-                  {/* í¬ì¸íŠ¸ 4: ë‹¤ë¦¬ ê·¼ìœ¡ */}\n-                  <g onClick={() => handlePointClick('quadriceps')} style={{ cursor: 'pointer' }}>\n-                    <circle \n-                      cx=\"35\" \n-                      cy=\"80\" \n-                      r={selectedPoints.has('quadriceps') ? \"1.5\" : \"1\"} \n-                      fill={selectedPoints.has('quadriceps') ? \"orange\" : \"yellow\"}\n-                      stroke={selectedPoints.has('quadriceps') ? \"red\" : \"none\"}\n-                      strokeWidth={selectedPoints.has('quadriceps') ? \"0.2\" : \"0\"}\n-                    />\n-                    {selectedPoints.has('quadriceps') && (\n-                      <polyline \n-                        points=\"35,80 50,85 60,88 65,90\" \n-                        stroke=\"yellow\" \n-                        strokeWidth=\"0.8\" \n-                        fill=\"none\"\n-                      />\n-                    )}\n-                    <polyline \n-                      points=\"35,80 50,85 60,88 65,90\" \n-                      stroke=\"black\" \n-                      strokeWidth=\"0.3\" \n-                      fill=\"none\"\n-                    />\n-                    <rect \n-                      x=\"62\" \n-                      y=\"90\" \n-                      width=\"16\" \n-                      height=\"4\" \n-                      fill={selectedPoints.has('quadriceps') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                      stroke={selectedPoints.has('quadriceps') ? \"orange\" : \"none\"}\n-                      strokeWidth=\"0.1\"\n-                    />\n-                    <text \n-                      x=\"70\" \n-                      y=\"92.5\" \n-                      fontSize=\"2\" \n-                      fill=\"black\"\n-                      fontWeight={selectedPoints.has('quadriceps') ? \"bold\" : \"normal\"}\n-                      textAnchor=\"middle\"\n-                      dominantBaseline=\"middle\"\n-                    >\n-                      ëŒ€ì‚¬ë‘ê·¼\n-                    </text>\n-                  </g>\n-                </svg>\n-              </div>\n-            </div>\n-          )}\n-\n-          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n-          {currentPage === 3 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n-                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-              </div>\n-            </div>\n-          )}\n-        </PrescriptionContainer>\n-      </PrescriptionPanel>\n-    </PageContainer>\n-  );\n-};\n-\n export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764245804993,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -313,10 +313,9 @@\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n   const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n-  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ\n-  const [editingMuscle, setEditingMuscle] = useState<string | null>(null); // í¸ì§‘ ì¤‘ì¸ ê·¼ìœ¡ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n@@ -497,55 +496,59 @@\n       return newSelected;\n     });\n   };\n \n-  // ê·¼ìœ¡ í¬ì¸íŠ¸ ì¢Œí‘œ ì„¤ì • (í¸ì§‘ ê°€ëŠ¥)\n-  const [musclePoints, setMusclePoints] = useState({\n-    shoulder: {\n-      point: { x: 30, y: 25 },\n-      line: [\n-        { x: 30, y: 25 },  // ì‹œì‘ì  (í¬ì¸í„°)\n-        { x: 25, y: 20 },  // ì²« ë²ˆì§¸ êº¾ì„\n-        { x: 10, y: 15 }   // ëì  (í…ìŠ¤íŠ¸ ì—°ê²°ì )\n-      ],\n-      textBox: { x: 2, y: 11, width: 12, height: 4 },\n-      text: { x: 8, y: 13.5, label: 'ì‚¼ê°ê·¼' }\n+  // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n+  const [pagePoints, setPagePoints] = useState<{\n+    [pageNum: number]: {\n+      [pointId: string]: {\n+        id: string;\n+        name: string;\n+        point: { x: number, y: number };\n+        linePoints: { x: number, y: number }[];  // êº¾ì€ì„  ì¢Œí‘œë“¤\n+        areaPoints: { x: number, y: number }[];  // í´ë¦­ ë²”ìœ„ (ë‹¤ê°í˜•)\n+        textBox: { x: number, y: number, width: number, height: number };\n+        text: { x: number, y: number };\n+      }\n+    }\n+  }>({\n+    1: {}, // ì²« í˜ì´ì§€\n+    2: {   // ë‘ ë²ˆì§¸ í˜ì´ì§€ (ê¸°ë³¸ ì˜ˆì‹œë“¤)\n+      'muscle_1': {\n+        id: 'muscle_1',\n+        name: 'ì‚¼ê°ê·¼',\n+        point: { x: 30, y: 25 },\n+        linePoints: [\n+          { x: 30, y: 25 },\n+          { x: 25, y: 20 },\n+          { x: 10, y: 15 }\n+        ],\n+        areaPoints: [\n+          { x: 25, y: 20 },\n+          { x: 35, y: 20 },\n+          { x: 35, y: 30 },\n+          { x: 25, y: 30 }\n+        ],\n+        textBox: { x: 2, y: 11, width: 12, height: 4 },\n+        text: { x: 8, y: 13.5 }\n+      }\n     },\n-    chest: {\n-      point: { x: 40, y: 35 },\n-      line: [\n-        { x: 40, y: 35 },  // ì‹œì‘ì \n-        { x: 55, y: 30 },  // ì²« ë²ˆì§¸ êº¾ì„\n-        { x: 70, y: 22 },  // ë‘ ë²ˆì§¸ êº¾ì„\n-        { x: 75, y: 20 }   // ëì \n-      ],\n-      textBox: { x: 72, y: 16, width: 12, height: 4 },\n-      text: { x: 78, y: 18.5, label: 'ëŒ€í‰ê·¼' }\n-    },\n-    abs: {\n-      point: { x: 45, y: 55 },\n-      line: [\n-        { x: 45, y: 55 },  // ì‹œì‘ì \n-        { x: 35, y: 65 },  // ì²« ë²ˆì§¸ êº¾ì„\n-        { x: 25, y: 68 },  // ë‘ ë²ˆì§¸ êº¾ì„\n-        { x: 20, y: 70 }   // ëì \n-      ],\n-      textBox: { x: 2, y: 70, width: 12, height: 4 },\n-      text: { x: 8, y: 72.5, label: 'ë³µì§ê·¼' }\n-    },\n-    quadriceps: {\n-      point: { x: 35, y: 80 },\n-      line: [\n-        { x: 35, y: 80 },  // ì‹œì‘ì \n-        { x: 50, y: 85 },  // ì²« ë²ˆì§¸ êº¾ì„\n-        { x: 60, y: 88 },  // ë‘ ë²ˆì§¸ êº¾ì„\n-        { x: 65, y: 90 }   // ëì \n-      ],\n-      textBox: { x: 62, y: 90, width: 16, height: 4 },\n-      text: { x: 70, y: 92.5, label: 'ëŒ€ì‚¬ë‘ê·¼' }\n-    }\n+    3: {}  // ì„¸ ë²ˆì§¸ í˜ì´ì§€\n   });\n \n+  // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n+  const [newPoint, setNewPoint] = useState({\n+    name: '',\n+    pointX: 0,\n+    pointY: 0,\n+    linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 2ì \n+    areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 3ì \n+    textBoxX: 0,\n+    textBoxY: 0,\n+    textBoxWidth: 10,\n+    textBoxHeight: 4\n+  });\n+\n   const handleSave = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n@@ -758,172 +761,247 @@\n       </CoordinateToggleBtn>\n \n       {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n       <CoordinateEditor $open={isCoordinateEditorOpen}>\n-        <h3>ì¢Œí‘œ í¸ì§‘ê¸°</h3>\n+        <h3>í˜ì´ì§€ {currentPage} - ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€</h3>\n         \n         <InputGroup>\n-          <InputLabel>ê·¼ìœ¡ ì„ íƒ</InputLabel>\n-          <MuscleSelector \n-            value={editingMuscle || ''} \n-            onChange={(e) => setEditingMuscle(e.target.value || null)}\n-          >\n-            <option value=\"\">ê·¼ìœ¡ ì„ íƒ</option>\n-            <option value=\"shoulder\">ì‚¼ê°ê·¼</option>\n-            <option value=\"chest\">ëŒ€í‰ê·¼</option>\n-            <option value=\"abs\">ë³µì§ê·¼</option>\n-            <option value=\"quadriceps\">ëŒ€ì‚¬ë‘ê·¼</option>\n-          </MuscleSelector>\n+          <InputLabel>ê·¼ìœ¡ ì´ë¦„</InputLabel>\n+          <CoordinateInput \n+            type=\"text\" \n+            placeholder=\"ì˜ˆ: ì‚¼ê°ê·¼\" \n+            value={newPoint.name}\n+            onChange={(e) => setNewPoint({ ...newPoint, name: e.target.value })}\n+            style={{ width: '100%' }}\n+          />\n         </InputGroup>\n \n-        {editingMuscle && (\n-          <>\n-            <InputGroup>\n-              <InputLabel>í¬ì¸í„° ì¢Œí‘œ</InputLabel>\n+        <InputGroup>\n+          <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"X\" \n+            value={newPoint.pointX}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n+          />\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"Y\" \n+            value={newPoint.pointY}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n+          />\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n+          {newPoint.linePoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n               <CoordinateInput \n                 type=\"number\" \n                 placeholder=\"X\" \n-                value={musclePoints[editingMuscle as keyof typeof musclePoints]?.point.x || 0}\n+                value={point.x}\n                 onChange={(e) => {\n-                  const newPoints = { ...musclePoints };\n-                  newPoints[editingMuscle as keyof typeof musclePoints].point.x = Number(e.target.value);\n-                  newPoints[editingMuscle as keyof typeof musclePoints].line[0].x = Number(e.target.value);\n-                  setMusclePoints(newPoints);\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n                 }}\n               />\n               <CoordinateInput \n                 type=\"number\" \n                 placeholder=\"Y\" \n-                value={musclePoints[editingMuscle as keyof typeof musclePoints]?.point.y || 0}\n+                value={point.y}\n                 onChange={(e) => {\n-                  const newPoints = { ...musclePoints };\n-                  newPoints[editingMuscle as keyof typeof musclePoints].point.y = Number(e.target.value);\n-                  newPoints[editingMuscle as keyof typeof musclePoints].line[0].y = Number(e.target.value);\n-                  setMusclePoints(newPoints);\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n                 }}\n               />\n-            </InputGroup>\n+              {index >= 2 && (\n+                <button \n+                  onClick={() => {\n+                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n+            </div>\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ì„  ì  ì¶”ê°€\n+          </button>\n+        </InputGroup>\n \n-            <InputGroup>\n-              <InputLabel>ì„  ì¢Œí‘œë“¤</InputLabel>\n-              {musclePoints[editingMuscle as keyof typeof musclePoints]?.line.map((point, index) => (\n-                <div key={index} style={{ marginBottom: '5px' }}>\n-                  <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-                  <CoordinateInput \n-                    type=\"number\" \n-                    placeholder=\"X\" \n-                    value={point.x}\n-                    onChange={(e) => {\n-                      const newPoints = { ...musclePoints };\n-                      newPoints[editingMuscle as keyof typeof musclePoints].line[index].x = Number(e.target.value);\n-                      setMusclePoints(newPoints);\n-                    }}\n-                  />\n-                  <CoordinateInput \n-                    type=\"number\" \n-                    placeholder=\"Y\" \n-                    value={point.y}\n-                    onChange={(e) => {\n-                      const newPoints = { ...musclePoints };\n-                      newPoints[editingMuscle as keyof typeof musclePoints].line[index].y = Number(e.target.value);\n-                      setMusclePoints(newPoints);\n-                    }}\n-                  />\n-                </div>\n-              ))}\n-            </InputGroup>\n-\n-            <InputGroup>\n-              <InputLabel>í…ìŠ¤íŠ¸ ì¢Œí‘œ</InputLabel>\n+        <InputGroup>\n+          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n+          {newPoint.areaPoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n               <CoordinateInput \n                 type=\"number\" \n                 placeholder=\"X\" \n-                value={musclePoints[editingMuscle as keyof typeof musclePoints]?.text.x || 0}\n+                value={point.x}\n                 onChange={(e) => {\n-                  const newPoints = { ...musclePoints };\n-                  newPoints[editingMuscle as keyof typeof musclePoints].text.x = Number(e.target.value);\n-                  setMusclePoints(newPoints);\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n                 }}\n               />\n               <CoordinateInput \n                 type=\"number\" \n                 placeholder=\"Y\" \n-                value={musclePoints[editingMuscle as keyof typeof musclePoints]?.text.y || 0}\n+                value={point.y}\n                 onChange={(e) => {\n-                  const newPoints = { ...musclePoints };\n-                  newPoints[editingMuscle as keyof typeof musclePoints].text.y = Number(e.target.value);\n-                  setMusclePoints(newPoints);\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n                 }}\n               />\n-            </InputGroup>\n-\n-            <InputGroup>\n-              <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n-              <div>\n-                <span style={{ fontSize: '11px' }}>X: </span>\n-                <CoordinateInput \n-                  type=\"number\" \n-                  value={musclePoints[editingMuscle as keyof typeof musclePoints]?.textBox.x || 0}\n-                  onChange={(e) => {\n-                    const newPoints = { ...musclePoints };\n-                    newPoints[editingMuscle as keyof typeof musclePoints].textBox.x = Number(e.target.value);\n-                    setMusclePoints(newPoints);\n+              {index >= 3 && (\n+                <button \n+                  onClick={() => {\n+                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n                   }}\n-                />\n-                <span style={{ fontSize: '11px' }}>Y: </span>\n-                <CoordinateInput \n-                  type=\"number\" \n-                  value={musclePoints[editingMuscle as keyof typeof musclePoints]?.textBox.y || 0}\n-                  onChange={(e) => {\n-                    const newPoints = { ...musclePoints };\n-                    newPoints[editingMuscle as keyof typeof musclePoints].textBox.y = Number(e.target.value);\n-                    setMusclePoints(newPoints);\n-                  }}\n-                />\n-              </div>\n-              <div style={{ marginTop: '5px' }}>\n-                <span style={{ fontSize: '11px' }}>W: </span>\n-                <CoordinateInput \n-                  type=\"number\" \n-                  value={musclePoints[editingMuscle as keyof typeof musclePoints]?.textBox.width || 0}\n-                  onChange={(e) => {\n-                    const newPoints = { ...musclePoints };\n-                    newPoints[editingMuscle as keyof typeof musclePoints].textBox.width = Number(e.target.value);\n-                    setMusclePoints(newPoints);\n-                  }}\n-                />\n-                <span style={{ fontSize: '11px' }}>H: </span>\n-                <CoordinateInput \n-                  type=\"number\" \n-                  value={musclePoints[editingMuscle as keyof typeof musclePoints]?.textBox.height || 0}\n-                  onChange={(e) => {\n-                    const newPoints = { ...musclePoints };\n-                    newPoints[editingMuscle as keyof typeof musclePoints].textBox.height = Number(e.target.value);\n-                    setMusclePoints(newPoints);\n-                  }}\n-                />\n-              </div>\n-            </InputGroup>\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n+            </div>\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ë©´ ì  ì¶”ê°€\n+          </button>\n+        </InputGroup>\n \n-            <button \n-              onClick={() => {\n-                console.log('í˜„ì¬ ì¢Œí‘œ ë°ì´í„°:', JSON.stringify(musclePoints[editingMuscle as keyof typeof musclePoints], null, 2));\n-              }}\n-              style={{\n-                width: '100%',\n-                padding: '8px',\n-                background: AppColors.primary,\n-                color: 'white',\n-                border: 'none',\n-                borderRadius: '4px',\n-                cursor: 'pointer',\n-                marginTop: '10px'\n-              }}\n-            >\n-              ì½˜ì†”ì— ì¢Œí‘œ ì¶œë ¥\n-            </button>\n-          </>\n-        )}\n+        <InputGroup>\n+          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n+          <div>\n+            <span style={{ fontSize: '11px' }}>X: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxX}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n+            />\n+            <span style={{ fontSize: '11px' }}>Y: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxY}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n+            />\n+          </div>\n+          <div style={{ marginTop: '5px' }}>\n+            <span style={{ fontSize: '11px' }}>W: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxWidth}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n+            />\n+            <span style={{ fontSize: '11px' }}>H: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxHeight}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n+            />\n+          </div>\n+        </InputGroup>\n+\n+        <button \n+          onClick={() => {\n+            if (newPoint.name.trim()) {\n+              const newId = `muscle_${Date.now()}`;\n+              const newPagePoints = { ...pagePoints };\n+              \n+              newPagePoints[currentPage] = {\n+                ...newPagePoints[currentPage],\n+                [newId]: {\n+                  id: newId,\n+                  name: newPoint.name,\n+                  point: { x: newPoint.pointX, y: newPoint.pointY },\n+                  linePoints: newPoint.linePoints,\n+                  areaPoints: newPoint.areaPoints,\n+                  textBox: { \n+                    x: newPoint.textBoxX, \n+                    y: newPoint.textBoxY, \n+                    width: newPoint.textBoxWidth, \n+                    height: newPoint.textBoxHeight \n+                  },\n+                  text: { \n+                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n+                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n+                  }\n+                }\n+              };\n+              \n+              setPagePoints(newPagePoints);\n+              \n+              // ì…ë ¥ í¼ ì´ˆê¸°í™”\n+              setNewPoint({\n+                name: '',\n+                pointX: 0,\n+                pointY: 0,\n+                linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }],\n+                areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }],\n+                textBoxX: 0,\n+                textBoxY: 0,\n+                textBoxWidth: 10,\n+                textBoxHeight: 4\n+              });\n+            } else {\n+              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n+            }\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '10px',\n+            background: AppColors.primary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '15px'\n+          }}\n+        >\n+          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n+        </button>\n+\n+        <button \n+          onClick={() => {\n+            console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '8px',\n+            background: AppColors.secondary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '10px'\n+          }}\n+        >\n+          ì½˜ì†”ì— í˜„ì¬ í˜ì´ì§€ ë°ì´í„° ì¶œë ¥\n+        </button>\n       </CoordinateEditor>\n \n       <SearchPanel $collapsed={isSearchPanelCollapsed}>\n         {!isSearchPanelCollapsed && (\n@@ -1179,191 +1257,72 @@\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"xMidYMid meet\"\n                 >\n-                  {/* í¬ì¸íŠ¸ 1: ì–´ê¹¨ ê·¼ìœ¡ */}\n-                  <g onClick={() => handlePointClick('shoulder')} style={{ cursor: 'pointer' }}>\n-                    <circle \n-                      cx={musclePoints.shoulder.point.x} \n-                      cy={musclePoints.shoulder.point.y} \n-                      r={selectedPoints.has('shoulder') ? \"1.5\" : \"1\"} \n-                      fill={selectedPoints.has('shoulder') ? \"orange\" : \"yellow\"}\n-                      stroke={selectedPoints.has('shoulder') ? \"red\" : \"none\"}\n-                      strokeWidth={selectedPoints.has('shoulder') ? \"0.2\" : \"0\"}\n-                    />\n-                    {selectedPoints.has('shoulder') && (\n-                      <polyline \n-                        points={musclePoints.shoulder.line.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"yellow\" \n-                        strokeWidth=\"0.8\" \n-                        fill=\"none\"\n+                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n+                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n+                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë³´ì´ì§€ ì•ŠëŠ” ë‹¤ê°í˜• */}\n+                      <polygon \n+                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n+                        fill=\"transparent\"\n+                        stroke=\"none\"\n+                        style={{ cursor: 'pointer' }}\n                       />\n-                    )}\n-                    <polyline \n-                      points={musclePoints.shoulder.line.map(p => `${p.x},${p.y}`).join(' ')} \n-                      stroke=\"black\" \n-                      strokeWidth=\"0.3\" \n-                      fill=\"none\"\n-                    />\n-                    <rect \n-                      x={musclePoints.shoulder.textBox.x} \n-                      y={musclePoints.shoulder.textBox.y} \n-                      width={musclePoints.shoulder.textBox.width} \n-                      height={musclePoints.shoulder.textBox.height} \n-                      fill={selectedPoints.has('shoulder') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                      stroke={selectedPoints.has('shoulder') ? \"orange\" : \"none\"}\n-                      strokeWidth=\"0.1\"\n-                    />\n-                    <text \n-                      x={musclePoints.shoulder.text.x} \n-                      y={musclePoints.shoulder.text.y} \n-                      fontSize=\"2\" \n-                      fill=\"black\"\n-                      fontWeight={selectedPoints.has('shoulder') ? \"bold\" : \"normal\"}\n-                      textAnchor=\"middle\"\n-                      dominantBaseline=\"middle\"\n-                    >\n-                      {musclePoints.shoulder.text.label}\n-                    </text>\n-                  </g>\n-                  \n-                  {/* í¬ì¸íŠ¸ 2: ê°€ìŠ´ ê·¼ìœ¡ */}\n-                  <g onClick={() => handlePointClick('chest')} style={{ cursor: 'pointer' }}>\n-                    <circle \n-                      cx={musclePoints.chest.point.x} \n-                      cy={musclePoints.chest.point.y} \n-                      r={selectedPoints.has('chest') ? \"1.5\" : \"1\"} \n-                      fill={selectedPoints.has('chest') ? \"orange\" : \"yellow\"}\n-                      stroke={selectedPoints.has('chest') ? \"red\" : \"none\"}\n-                      strokeWidth={selectedPoints.has('chest') ? \"0.2\" : \"0\"}\n-                    />\n-                    {selectedPoints.has('chest') && (\n-                      <polyline \n-                        points={musclePoints.chest.line.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"yellow\" \n-                        strokeWidth=\"0.8\" \n-                        fill=\"none\"\n+                      \n+                      {/* í¬ì¸í„° */}\n+                      <circle \n+                        cx={muscle.point.x} \n+                        cy={muscle.point.y} \n+                        r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n+                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n                       />\n-                    )}\n-                    <polyline \n-                      points={musclePoints.chest.line.map(p => `${p.x},${p.y}`).join(' ')} \n-                      stroke=\"black\" \n-                      strokeWidth=\"0.3\" \n-                      fill=\"none\"\n-                    />\n-                    <rect \n-                      x={musclePoints.chest.textBox.x} \n-                      y={musclePoints.chest.textBox.y} \n-                      width={musclePoints.chest.textBox.width} \n-                      height={musclePoints.chest.textBox.height} \n-                      fill={selectedPoints.has('chest') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                      stroke={selectedPoints.has('chest') ? \"orange\" : \"none\"}\n-                      strokeWidth=\"0.1\"\n-                    />\n-                    <text \n-                      x={musclePoints.chest.text.x} \n-                      y={musclePoints.chest.text.y} \n-                      fontSize=\"2\" \n-                      fill=\"black\"\n-                      fontWeight={selectedPoints.has('chest') ? \"bold\" : \"normal\"}\n-                      textAnchor=\"middle\"\n-                      dominantBaseline=\"middle\"\n-                    >\n-                      {musclePoints.chest.text.label}\n-                    </text>\n-                  </g>\n-                  \n-                  {/* í¬ì¸íŠ¸ 3: ë³µë¶€ ê·¼ìœ¡ */}\n-                  <g onClick={() => handlePointClick('abs')} style={{ cursor: 'pointer' }}>\n-                    <circle \n-                      cx={musclePoints.abs.point.x} \n-                      cy={musclePoints.abs.point.y} \n-                      r={selectedPoints.has('abs') ? \"1.5\" : \"1\"} \n-                      fill={selectedPoints.has('abs') ? \"orange\" : \"yellow\"}\n-                      stroke={selectedPoints.has('abs') ? \"red\" : \"none\"}\n-                      strokeWidth={selectedPoints.has('abs') ? \"0.2\" : \"0\"}\n-                    />\n-                    {selectedPoints.has('abs') && (\n+                      \n+                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n+                      {selectedPoints.has(muscle.id) && (\n+                        <polyline \n+                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"yellow\" \n+                          strokeWidth=\"0.8\" \n+                          fill=\"none\"\n+                        />\n+                      )}\n+                      \n+                      {/* ë©”ì¸ êº¾ì€ì„  */}\n                       <polyline \n-                        points={musclePoints.abs.line.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"yellow\" \n-                        strokeWidth=\"0.8\" \n+                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"black\" \n+                        strokeWidth=\"0.3\" \n                         fill=\"none\"\n                       />\n-                    )}\n-                    <polyline \n-                      points={musclePoints.abs.line.map(p => `${p.x},${p.y}`).join(' ')} \n-                      stroke=\"black\" \n-                      strokeWidth=\"0.3\" \n-                      fill=\"none\"\n-                    />\n-                    <rect \n-                      x={musclePoints.abs.textBox.x} \n-                      y={musclePoints.abs.textBox.y} \n-                      width={musclePoints.abs.textBox.width} \n-                      height={musclePoints.abs.textBox.height} \n-                      fill={selectedPoints.has('abs') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                      stroke={selectedPoints.has('abs') ? \"orange\" : \"none\"}\n-                      strokeWidth=\"0.1\"\n-                    />\n-                    <text \n-                      x={musclePoints.abs.text.x} \n-                      y={musclePoints.abs.text.y} \n-                      fontSize=\"2\" \n-                      fill=\"black\"\n-                      fontWeight={selectedPoints.has('abs') ? \"bold\" : \"normal\"}\n-                      textAnchor=\"middle\"\n-                      dominantBaseline=\"middle\"\n-                    >\n-                      {musclePoints.abs.text.label}\n-                    </text>\n-                  </g>\n-                  \n-                  {/* í¬ì¸íŠ¸ 4: ë‹¤ë¦¬ ê·¼ìœ¡ */}\n-                  <g onClick={() => handlePointClick('quadriceps')} style={{ cursor: 'pointer' }}>\n-                    <circle \n-                      cx={musclePoints.quadriceps.point.x} \n-                      cy={musclePoints.quadriceps.point.y} \n-                      r={selectedPoints.has('quadriceps') ? \"1.5\" : \"1\"} \n-                      fill={selectedPoints.has('quadriceps') ? \"orange\" : \"yellow\"}\n-                      stroke={selectedPoints.has('quadriceps') ? \"red\" : \"none\"}\n-                      strokeWidth={selectedPoints.has('quadriceps') ? \"0.2\" : \"0\"}\n-                    />\n-                    {selectedPoints.has('quadriceps') && (\n-                      <polyline \n-                        points={musclePoints.quadriceps.line.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"yellow\" \n-                        strokeWidth=\"0.8\" \n-                        fill=\"none\"\n+                      \n+                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n+                      <rect \n+                        x={muscle.textBox.x} \n+                        y={muscle.textBox.y} \n+                        width={muscle.textBox.width} \n+                        height={muscle.textBox.height} \n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        strokeWidth=\"0.1\"\n                       />\n-                    )}\n-                    <polyline \n-                      points={musclePoints.quadriceps.line.map(p => `${p.x},${p.y}`).join(' ')} \n-                      stroke=\"black\" \n-                      strokeWidth=\"0.3\" \n-                      fill=\"none\"\n-                    />\n-                    <rect \n-                      x={musclePoints.quadriceps.textBox.x} \n-                      y={musclePoints.quadriceps.textBox.y} \n-                      width={musclePoints.quadriceps.textBox.width} \n-                      height={musclePoints.quadriceps.textBox.height} \n-                      fill={selectedPoints.has('quadriceps') ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                      stroke={selectedPoints.has('quadriceps') ? \"orange\" : \"none\"}\n-                      strokeWidth=\"0.1\"\n-                    />\n-                    <text \n-                      x={musclePoints.quadriceps.text.x} \n-                      y={musclePoints.quadriceps.text.y} \n-                      fontSize=\"2\" \n-                      fill=\"black\"\n-                      fontWeight={selectedPoints.has('quadriceps') ? \"bold\" : \"normal\"}\n-                      textAnchor=\"middle\"\n-                      dominantBaseline=\"middle\"\n-                    >\n-                      {musclePoints.quadriceps.text.label}\n-                    </text>\n-                  </g>\n+                      \n+                      {/* í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x={muscle.text.x} \n+                        y={muscle.text.y} \n+                        fontSize=\"2\" \n+                        fill=\"black\"\n+                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n+                        textAnchor=\"middle\"\n+                        dominantBaseline=\"middle\"\n+                      >\n+                        {muscle.name}\n+                      </text>\n+                    </g>\n+                  ))}\n                 </svg>\n               </div>\n             </div>\n           )}\n"
                },
                {
                    "date": 1764245998977,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -310,9 +310,9 @@\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€\n+  const [currentPage, setCurrentPage] = useState(2); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (2í˜ì´ì§€ë¡œ ì‹œì‘)\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n@@ -510,9 +510,8 @@\n         text: { x: number, y: number };\n       }\n     }\n   }>({\n-    1: {}, // ì²« í˜ì´ì§€\n     2: {   // ë‘ ë²ˆì§¸ í˜ì´ì§€ (ê¸°ë³¸ ì˜ˆì‹œë“¤)\n       'muscle_1': {\n         id: 'muscle_1',\n         name: 'ì‚¼ê°ê·¼',\n@@ -751,16 +750,8 @@\n   };\n \n   return (\n     <PageContainer>\n-      {/* ì¢Œí‘œ í¸ì§‘ê¸° í† ê¸€ ë²„íŠ¼ */}\n-      <CoordinateToggleBtn \n-        $editorOpen={isCoordinateEditorOpen}\n-        onClick={() => setIsCoordinateEditorOpen(!isCoordinateEditorOpen)}\n-      >\n-        +\n-      </CoordinateToggleBtn>\n-\n       {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n       <CoordinateEditor $open={isCoordinateEditorOpen}>\n         <h3>í˜ì´ì§€ {currentPage} - ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€</h3>\n         \n@@ -1059,20 +1050,21 @@\n         \n         <Divider />\n         \n         <PageButton \n-          active={currentPage === 1}\n-          onClick={() => setCurrentPage(1)}\n-        >\n-          1\n-        </PageButton>\n-        \n-        <PageButton \n           active={currentPage === 2}\n           onClick={() => setCurrentPage(2)}\n         >\n           2\n         </PageButton>\n+\n+        {/* ì¢Œí‘œ í¸ì§‘ê¸° í† ê¸€ ë²„íŠ¼ì„ í˜ì´ì§€ ë²„íŠ¼ ì‚¬ì´ì— ìœ„ì¹˜ */}\n+        <CoordinateToggleBtn \n+          $editorOpen={isCoordinateEditorOpen}\n+          onClick={() => setIsCoordinateEditorOpen(!isCoordinateEditorOpen)}\n+        >\n+          +\n+        </CoordinateToggleBtn>\n         \n         <PageButton \n           active={currentPage === 3}\n           onClick={() => setCurrentPage(3)}\n"
                },
                {
                    "date": 1764246085222,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -214,30 +214,9 @@\n `;\n \n \n \n-const FormLabel = styled.label`\n-  display: block;\n-  font-size: ${AppTextStyles.label1.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 8px;\n-`;\n \n-const FormTextarea = styled.textarea`\n-  width: 100%;\n-  padding: 10px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  resize: vertical;\n-  box-sizing: border-box;\n-  \n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n \n const CoordinateEditor = styled.div<{ $open?: boolean }>`\n   position: fixed;\n   left: ${props => props.$open ? '320px' : '-400px'};\n@@ -295,16 +274,10 @@\n   font-size: 12px;\n   margin-right: 5px;\n `;\n \n-const MuscleSelector = styled.select`\n-  width: 100%;\n-  padding: 8px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 4px;\n-  margin-bottom: 15px;\n-`;\n \n+\n const ExercisePrescriptionPage: React.FC = () => {\n   const [searchParams] = useSearchParams();\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n@@ -476,15 +449,10 @@\n   const handleMemberSelect = (member: Member) => {\n     setSelectedMember(member);\n   };\n \n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value\n-    }));\n-  };\n \n+\n   // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n   const handlePointClick = (pointId: string) => {\n     setSelectedPoints(prev => {\n       const newSelected = new Set(prev);\n@@ -705,9 +673,9 @@\n     try {\n       const pdf = new jsPDF('p', 'mm', 'a4');\n       \n       // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n-      for (let page = 1; page <= 3; page++) {\n+      for (let page = 2; page <= 3; page++) {\n         // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n         const originalPage = currentPage;\n         setCurrentPage(page);\n         \n@@ -727,10 +695,10 @@\n         const imgData = canvas.toDataURL('image/png');\n         const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n         const imgHeight = 297; // A4 ë†’ì´ (mm)\n         \n-        // ì²« ë²ˆì§¸ í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n-        if (page > 1) {\n+        // ì²« ë²ˆì§¸ PDF í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n+        if (page > 2) {\n           pdf.addPage();\n         }\n         \n         pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n@@ -1076,122 +1044,8 @@\n       <PrescriptionPanel>\n \n \n         <PrescriptionContainer ref={prescriptionRef}>\n-          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n-          {currentPage === 1 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ íšŒì› ì •ë³´ í•œ ì¤„ */}\n-              <div style={{ \n-                display: 'flex', \n-                alignItems: 'center', \n-                gap: '20px', \n-                marginBottom: '30px',\n-                fontSize: '14px',\n-                fontWeight: 'bold',\n-                height: '30px'\n-              }}>\n-                <span>ì„±ëª…: {selectedMember?.name || ''}</span>\n-                <span>ìƒë…„ì›”ì¼: {selectedMember?.birth ? new Date(selectedMember.birth).toLocaleDateString('ko-KR', {\n-                  year: 'numeric',\n-                  month: 'long', \n-                  day: 'numeric'\n-                }) : ''}</span>\n-                <span>ì‹ ì¥: \n-                  <input \n-                    type=\"text\" \n-                    value={formData.height}\n-                    onChange={(e) => handleInputChange('height', e.target.value)}\n-                    readOnly={isReadOnly}\n-                    style={{\n-                      border: 'none',\n-                      borderBottom: '1px solid #ccc',\n-                      background: 'transparent',\n-                      width: '60px',\n-                      textAlign: 'center',\n-                      fontSize: '14px',\n-                      fontWeight: 'bold',\n-                      marginLeft: '5px',\n-                      marginRight: '2px'\n-                    }}\n-                    placeholder=\"í‚¤\"\n-                  />cm</span>\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '20px',\n-                color: '#333'\n-              }}>SPINE Mapping Chart</div>\n-              \n-              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                margin: '20px 0'\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n-                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n-                  style={{ \n-                    maxHeight: '100%',\n-                    maxWidth: '300px',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-              </div>\n-\n-              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n-              <div style={{ margin: '20px 0' }}>\n-                <FormLabel style={{ \n-                  fontSize: '16px', \n-                  fontWeight: 'bold', \n-                  marginBottom: '10px', \n-                  display: 'block'\n-                }}>\n-                  ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)\n-                </FormLabel>\n-                <FormTextarea\n-                  rows={6}\n-                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”\"\n-                  value={formData.painHistory}\n-                  onChange={(e) => handleInputChange('painHistory', e.target.value)}\n-                  readOnly={isReadOnly}\n-                  style={{ \n-                    background: isReadOnly ? '#f5f5f5' : 'white',\n-                    height: '100px',\n-                    resize: 'none'\n-                  }}\n-                />\n-              </div>\n-\n-              {/* ìµœì´ˆ ì‘ì„±ì¼ */}\n-              <div style={{ \n-                marginTop: 'auto',\n-                paddingTop: '20px',\n-                textAlign: 'left', \n-                fontSize: '12px', \n-                color: '#666' \n-              }}>\n-                ìµœì´ˆ ì‘ì„±ì¼ : {currentPrescription?.createdAt \n-                  ? new Date(currentPrescription.createdAt).toISOString().split('T')[0]\n-                  : new Date().toISOString().split('T')[0]\n-                }\n-              </div>\n-            </div>\n-          )}\n-\n           {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n           {currentPage === 2 && (\n             <div style={{\n               display: 'flex',\n"
                },
                {
                    "date": 1764246442434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -288,8 +288,14 @@\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n+  \n+  // í´ë¦­ ëª¨ë“œ ìƒíƒœ\n+  const [clickMode, setClickMode] = useState<'none' | 'point' | 'line' | 'area' | 'text'>('none');\n+  const [isSettingCoordinates, setIsSettingCoordinates] = useState(false);\n+  const [tempLinePoints, setTempLinePoints] = useState<{ x: number, y: number }[]>([]);\n+  const [tempAreaPoints, setTempAreaPoints] = useState<{ x: number, y: number }[]>([]);\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -464,8 +470,105 @@\n       return newSelected;\n     });\n   };\n \n+  // ì´ë¯¸ì§€ í´ë¦­ í•¸ë“¤ëŸ¬ - SVG ì¢Œí‘œê³„ë¡œ ë³€í™˜\n+  const handleImageClick = (event: React.MouseEvent<SVGElement>) => {\n+    if (clickMode === 'none' || !isSettingCoordinates) return;\n+\n+    const svgElement = event.currentTarget as SVGSVGElement;\n+    const rect = svgElement.getBoundingClientRect();\n+    const viewBox = svgElement.viewBox.baseVal;\n+    \n+    // í´ë¦­ ì¢Œí‘œë¥¼ SVG viewBox ì¢Œí‘œê³„ë¡œ ë³€í™˜\n+    const x = ((event.clientX - rect.left) / rect.width) * viewBox.width;\n+    const y = ((event.clientY - rect.top) / rect.height) * viewBox.height;\n+\n+    const roundedX = Math.round(x * 10) / 10; // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n+    const roundedY = Math.round(y * 10) / 10;\n+\n+    switch (clickMode) {\n+      case 'point':\n+        setNewPoint(prev => ({ ...prev, pointX: roundedX, pointY: roundedY }));\n+        setClickMode('none');\n+        setIsSettingCoordinates(false);\n+        break;\n+        \n+      case 'line':\n+        setTempLinePoints(prev => {\n+          const updated = [...prev, { x: roundedX, y: roundedY }];\n+          return updated;\n+        });\n+        break;\n+        \n+      case 'area':\n+        setTempAreaPoints(prev => {\n+          const updated = [...prev, { x: roundedX, y: roundedY }];\n+          return updated;\n+        });\n+        break;\n+        \n+      case 'text':\n+        setNewPoint(prev => ({ \n+          ...prev, \n+          textBoxX: roundedX, \n+          textBoxY: roundedY \n+        }));\n+        setClickMode('none');\n+        setIsSettingCoordinates(false);\n+        break;\n+        \n+      default:\n+        break;\n+    }\n+  };\n+\n+  // í´ë¦­ ëª¨ë“œ ì‹œì‘ í•¨ìˆ˜ë“¤\n+  const startPointClick = () => {\n+    setClickMode('point');\n+    setIsSettingCoordinates(true);\n+  };\n+\n+  const startLineClick = () => {\n+    setClickMode('line');\n+    setIsSettingCoordinates(true);\n+    setTempLinePoints([]);\n+  };\n+\n+  const startAreaClick = () => {\n+    setClickMode('area');\n+    setIsSettingCoordinates(true);\n+    setTempAreaPoints([]);\n+  };\n+\n+  const startTextClick = () => {\n+    setClickMode('text');\n+    setIsSettingCoordinates(true);\n+  };\n+\n+  // í´ë¦­ ëª¨ë“œ ì™„ë£Œ í•¨ìˆ˜ë“¤\n+  const finishLineClick = () => {\n+    setNewPoint(prev => ({ ...prev, linePoints: tempLinePoints }));\n+    setTempLinePoints([]);\n+    setClickMode('none');\n+    setIsSettingCoordinates(false);\n+  };\n+\n+  const finishAreaClick = () => {\n+    setNewPoint(prev => ({ ...prev, areaPoints: tempAreaPoints }));\n+    setTempAreaPoints([]);\n+    setClickMode('none');\n+    setIsSettingCoordinates(false);\n+  };\n+\n+  // í´ë¦­ ëª¨ë“œ ì·¨ì†Œ\n+  const cancelClickMode = () => {\n+    setClickMode('none');\n+    setIsSettingCoordinates(false);\n+    setTempLinePoints([]);\n+    setTempAreaPoints([]);\n+  };\n+\n   // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n   const [pagePoints, setPagePoints] = useState<{\n     [pageNum: number]: {\n       [pointId: string]: {\n@@ -733,152 +836,225 @@\n             style={{ width: '100%' }}\n           />\n         </InputGroup>\n \n+        {/* í´ë¦­ ëª¨ë“œ ìƒíƒœ í‘œì‹œ */}\n+        {isSettingCoordinates && (\n+          <div style={{\n+            background: '#fff3cd',\n+            border: '1px solid #ffeaa7',\n+            borderRadius: '4px',\n+            padding: '10px',\n+            marginBottom: '15px',\n+            fontSize: '12px',\n+            fontWeight: 'bold'\n+          }}>\n+            ğŸ¯ {clickMode === 'point' && 'í¬ì¸í„° ìœ„ì¹˜ í´ë¦­'}\n+            {clickMode === 'line' && `ì„  ê·¸ë¦¬ê¸° ì¤‘ (${tempLinePoints.length}ì )`}\n+            {clickMode === 'area' && `ë©´ì  ê·¸ë¦¬ê¸° ì¤‘ (${tempAreaPoints.length}ì )`}\n+            {clickMode === 'text' && 'í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìœ„ì¹˜ í´ë¦­'}\n+            <br />\n+            ğŸ‘† ì¸ì²´ë„ë¥¼ í´ë¦­í•˜ì„¸ìš”\n+            {(clickMode === 'line' || clickMode === 'area') && (\n+              <>\n+                <br />\n+                <button \n+                  onClick={clickMode === 'line' ? finishLineClick : finishAreaClick}\n+                  style={{ \n+                    fontSize: '11px', \n+                    padding: '2px 6px', \n+                    marginRight: '5px',\n+                    background: '#28a745',\n+                    color: 'white',\n+                    border: 'none',\n+                    borderRadius: '3px'\n+                  }}\n+                >\n+                  ì™„ë£Œ\n+                </button>\n+                <button \n+                  onClick={cancelClickMode}\n+                  style={{ \n+                    fontSize: '11px', \n+                    padding: '2px 6px',\n+                    background: '#dc3545',\n+                    color: 'white', \n+                    border: 'none',\n+                    borderRadius: '3px'\n+                  }}\n+                >\n+                  ì·¨ì†Œ\n+                </button>\n+              </>\n+            )}\n+          </div>\n+        )}\n+\n         <InputGroup>\n           <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n-          <CoordinateInput \n-            type=\"number\" \n-            placeholder=\"X\" \n-            value={newPoint.pointX}\n-            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n-          />\n-          <CoordinateInput \n-            type=\"number\" \n-            placeholder=\"Y\" \n-            value={newPoint.pointY}\n-            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n-          />\n+          <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\n+            <CoordinateInput \n+              type=\"number\" \n+              placeholder=\"X\" \n+              value={newPoint.pointX}\n+              onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n+            />\n+            <CoordinateInput \n+              type=\"number\" \n+              placeholder=\"Y\" \n+              value={newPoint.pointY}\n+              onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n+            />\n+            <button \n+              onClick={startPointClick}\n+              disabled={isSettingCoordinates}\n+              style={{\n+                padding: '4px 8px',\n+                fontSize: '11px',\n+                background: isSettingCoordinates ? '#ccc' : '#007bff',\n+                color: 'white',\n+                border: 'none',\n+                borderRadius: '3px',\n+                cursor: isSettingCoordinates ? 'not-allowed' : 'pointer'\n+              }}\n+            >\n+              ğŸ¯ í´ë¦­\n+            </button>\n+          </div>\n         </InputGroup>\n \n         <InputGroup>\n-          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n-          {newPoint.linePoints.map((point, index) => (\n-            <div key={index} style={{ marginBottom: '5px' }}>\n-              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"X\" \n-                value={point.x}\n-                onChange={(e) => {\n-                  const newLinePoints = [...newPoint.linePoints];\n-                  newLinePoints[index].x = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                }}\n-              />\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"Y\" \n-                value={point.y}\n-                onChange={(e) => {\n-                  const newLinePoints = [...newPoint.linePoints];\n-                  newLinePoints[index].y = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                }}\n-              />\n-              {index >= 2 && (\n-                <button \n-                  onClick={() => {\n-                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n-                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                  }}\n-                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n-                >\n-                  ì‚­ì œ\n-                </button>\n-              )}\n+          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„ )</InputLabel>\n+          <div style={{ marginBottom: '10px' }}>\n+            <button \n+              onClick={startLineClick}\n+              disabled={isSettingCoordinates}\n+              style={{\n+                padding: '6px 12px',\n+                fontSize: '12px',\n+                background: isSettingCoordinates ? '#ccc' : '#28a745',\n+                color: 'white',\n+                border: 'none',\n+                borderRadius: '4px',\n+                cursor: isSettingCoordinates ? 'not-allowed' : 'pointer',\n+                marginRight: '5px'\n+              }}\n+            >\n+              âœï¸ í´ë¦­ìœ¼ë¡œ ì„  ê·¸ë¦¬ê¸°\n+            </button>\n+            <button \n+              onClick={() => setNewPoint({ ...newPoint, linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }] })}\n+              style={{\n+                padding: '6px 12px',\n+                fontSize: '12px',\n+                background: '#6c757d',\n+                color: 'white',\n+                border: 'none',\n+                borderRadius: '4px',\n+                cursor: 'pointer'\n+              }}\n+            >\n+              ğŸ—‘ï¸ ì´ˆê¸°í™”\n+            </button>\n+          </div>\n+          {(newPoint.linePoints.length > 0 || tempLinePoints.length > 0) && (\n+            <div style={{ fontSize: '11px', color: '#666', marginBottom: '5px' }}>\n+              {(clickMode === 'line' ? tempLinePoints : newPoint.linePoints).map((point, index) => (\n+                <div key={index}>\n+                  ì  {index + 1}: ({point.x.toFixed(1)}, {point.y.toFixed(1)})\n+                </div>\n+              ))}\n             </div>\n-          ))}\n-          <button \n-            onClick={() => {\n-              setNewPoint({ \n-                ...newPoint, \n-                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n-              });\n-            }}\n-            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n-          >\n-            ì„  ì  ì¶”ê°€\n-          </button>\n+          )}\n         </InputGroup>\n \n         <InputGroup>\n-          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n-          {newPoint.areaPoints.map((point, index) => (\n-            <div key={index} style={{ marginBottom: '5px' }}>\n-              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"X\" \n-                value={point.x}\n-                onChange={(e) => {\n-                  const newAreaPoints = [...newPoint.areaPoints];\n-                  newAreaPoints[index].x = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                }}\n-              />\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"Y\" \n-                value={point.y}\n-                onChange={(e) => {\n-                  const newAreaPoints = [...newPoint.areaPoints];\n-                  newAreaPoints[index].y = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                }}\n-              />\n-              {index >= 3 && (\n-                <button \n-                  onClick={() => {\n-                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n-                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                  }}\n-                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n-                >\n-                  ì‚­ì œ\n-                </button>\n-              )}\n+          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„)</InputLabel>\n+          <div style={{ marginBottom: '10px' }}>\n+            <button \n+              onClick={startAreaClick}\n+              disabled={isSettingCoordinates}\n+              style={{\n+                padding: '6px 12px',\n+                fontSize: '12px',\n+                background: isSettingCoordinates ? '#ccc' : '#17a2b8',\n+                color: 'white',\n+                border: 'none',\n+                borderRadius: '4px',\n+                cursor: isSettingCoordinates ? 'not-allowed' : 'pointer',\n+                marginRight: '5px'\n+              }}\n+            >\n+              ğŸ”² í´ë¦­ìœ¼ë¡œ ë©´ì  ê·¸ë¦¬ê¸°\n+            </button>\n+            <button \n+              onClick={() => setNewPoint({ ...newPoint, areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }] })}\n+              style={{\n+                padding: '6px 12px',\n+                fontSize: '12px',\n+                background: '#6c757d',\n+                color: 'white',\n+                border: 'none',\n+                borderRadius: '4px',\n+                cursor: 'pointer'\n+              }}\n+            >\n+              ğŸ—‘ï¸ ì´ˆê¸°í™”\n+            </button>\n+          </div>\n+          {(newPoint.areaPoints.length > 0 || tempAreaPoints.length > 0) && (\n+            <div style={{ fontSize: '11px', color: '#666', marginBottom: '5px' }}>\n+              {(clickMode === 'area' ? tempAreaPoints : newPoint.areaPoints).map((point, index) => (\n+                <div key={index}>\n+                  ì  {index + 1}: ({point.x.toFixed(1)}, {point.y.toFixed(1)})\n+                </div>\n+              ))}\n             </div>\n-          ))}\n-          <button \n-            onClick={() => {\n-              setNewPoint({ \n-                ...newPoint, \n-                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n-              });\n-            }}\n-            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n-          >\n-            ë©´ ì  ì¶”ê°€\n-          </button>\n+          )}\n         </InputGroup>\n \n         <InputGroup>\n-          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n-          <div>\n-            <span style={{ fontSize: '11px' }}>X: </span>\n+          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìœ„ì¹˜</InputLabel>\n+          <div style={{ display: 'flex', alignItems: 'center', gap: '5px', marginBottom: '5px' }}>\n             <CoordinateInput \n               type=\"number\" \n+              placeholder=\"X\"\n               value={newPoint.textBoxX}\n               onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n             />\n-            <span style={{ fontSize: '11px' }}>Y: </span>\n             <CoordinateInput \n               type=\"number\" \n+              placeholder=\"Y\"\n               value={newPoint.textBoxY}\n               onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n             />\n+            <button \n+              onClick={startTextClick}\n+              disabled={isSettingCoordinates}\n+              style={{\n+                padding: '4px 8px',\n+                fontSize: '11px',\n+                background: isSettingCoordinates ? '#ccc' : '#ffc107',\n+                color: 'black',\n+                border: 'none',\n+                borderRadius: '3px',\n+                cursor: isSettingCoordinates ? 'not-allowed' : 'pointer'\n+              }}\n+            >\n+              ğŸ“ í´ë¦­\n+            </button>\n           </div>\n-          <div style={{ marginTop: '5px' }}>\n-            <span style={{ fontSize: '11px' }}>W: </span>\n+          <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\n+            <span style={{ fontSize: '11px' }}>í¬ê¸°: </span>\n             <CoordinateInput \n               type=\"number\" \n+              placeholder=\"ë„ˆë¹„\"\n               value={newPoint.textBoxWidth}\n               onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n             />\n-            <span style={{ fontSize: '11px' }}>H: </span>\n             <CoordinateInput \n               type=\"number\" \n+              placeholder=\"ë†’ì´\"\n               value={newPoint.textBoxHeight}\n               onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n             />\n           </div>\n@@ -1098,13 +1274,83 @@\n                     top: 0,\n                     left: 0,\n                     width: '100%',\n                     height: '100%',\n-                    pointerEvents: 'auto'\n+                    pointerEvents: 'auto',\n+                    cursor: isSettingCoordinates ? 'crosshair' : 'default'\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"xMidYMid meet\"\n+                  onClick={handleImageClick}\n                 >\n+                  {/* í´ë¦­ ê°€ì´ë“œ ì˜¤ë²„ë ˆì´ */}\n+                  {isSettingCoordinates && (\n+                    <>\n+                      {/* ì„ì‹œ ì„  ê·¸ë¦¬ê¸° ë¯¸ë¦¬ë³´ê¸° */}\n+                      {clickMode === 'line' && tempLinePoints.length > 0 && (\n+                        <polyline \n+                          points={tempLinePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"red\" \n+                          strokeWidth=\"0.5\" \n+                          fill=\"none\"\n+                          strokeDasharray=\"2,1\"\n+                        />\n+                      )}\n+                      \n+                      {/* ì„ì‹œ ë©´ ê·¸ë¦¬ê¸° ë¯¸ë¦¬ë³´ê¸° */}\n+                      {clickMode === 'area' && tempAreaPoints.length >= 2 && (\n+                        <polygon \n+                          points={tempAreaPoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          fill=\"rgba(255,0,0,0.2)\" \n+                          stroke=\"red\"\n+                          strokeWidth=\"0.3\"\n+                          strokeDasharray=\"2,1\"\n+                        />\n+                      )}\n+                      \n+                      {/* ì„ì‹œ ì ë“¤ í‘œì‹œ */}\n+                      {clickMode === 'line' && tempLinePoints.map((point, index) => (\n+                        <circle \n+                          key={`temp-line-${index}`}\n+                          cx={point.x} \n+                          cy={point.y} \n+                          r=\"0.8\" \n+                          fill=\"red\"\n+                          stroke=\"white\"\n+                          strokeWidth=\"0.2\"\n+                        />\n+                      ))}\n+                      \n+                      {clickMode === 'area' && tempAreaPoints.map((point, index) => (\n+                        <circle \n+                          key={`temp-area-${index}`}\n+                          cx={point.x} \n+                          cy={point.y} \n+                          r=\"0.8\" \n+                          fill=\"blue\"\n+                          stroke=\"white\"\n+                          strokeWidth=\"0.2\"\n+                        />\n+                      ))}\n+                      \n+                      {/* ê°€ì´ë“œ í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x=\"50\" \n+                        y=\"10\" \n+                        fontSize=\"3\" \n+                        fill=\"red\"\n+                        fontWeight=\"bold\"\n+                        textAnchor=\"middle\"\n+                        style={{ pointerEvents: 'none' }}\n+                      >\n+                        {clickMode === 'point' && 'ğŸ“ í¬ì¸í„° ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”'}\n+                        {clickMode === 'line' && `âœï¸ ì„  ì  ${tempLinePoints.length + 1}ë²ˆì§¸ë¥¼ í´ë¦­í•˜ì„¸ìš”`}\n+                        {clickMode === 'area' && `ğŸ”² ë©´ì  ì  ${tempAreaPoints.length + 1}ë²ˆì§¸ë¥¼ í´ë¦­í•˜ì„¸ìš”`}\n+                        {clickMode === 'text' && 'ğŸ“ í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”'}\n+                      </text>\n+                    </>\n+                  )}\n+\n                   {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n                   {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n                     <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n                       {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë³´ì´ì§€ ì•ŠëŠ” ë‹¤ê°í˜• */}\n"
                },
                {
                    "date": 1764246638339,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1059,11 +1059,48 @@\n             />\n           </div>\n         </InputGroup>\n \n-        <button \n-          onClick={() => {\n-            if (newPoint.name.trim()) {\n+        <div style={{ marginTop: '20px', borderTop: '1px solid #eee', paddingTop: '15px' }}>\n+          <button \n+            onClick={() => {\n+              if (isSettingCoordinates) {\n+                cancelClickMode();\n+                return;\n+              }\n+              \n+              if (!newPoint.name.trim()) {\n+                alert('ê·¼ìœ¡ ì´ë¦„ì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');\n+                return;\n+              }\n+              \n+              // í•„ìˆ˜ ë°ì´í„° ì²´í¬\n+              const hasPoint = newPoint.pointX !== 0 || newPoint.pointY !== 0;\n+              const hasLine = newPoint.linePoints.length >= 2 && newPoint.linePoints.some(p => p.x !== 0 || p.y !== 0);\n+              const hasArea = newPoint.areaPoints.length >= 3 && newPoint.areaPoints.some(p => p.x !== 0 || p.y !== 0);\n+              const hasText = newPoint.textBoxX !== 0 || newPoint.textBoxY !== 0;\n+              \n+              if (!hasPoint) {\n+                alert('í¬ì¸í„° ì¢Œí‘œë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');\n+                return;\n+              }\n+              \n+              if (!hasLine) {\n+                alert('ì„  ì¢Œí‘œë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');\n+                return;\n+              }\n+              \n+              if (!hasArea) {\n+                alert('ë©´ì  ì¢Œí‘œë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');\n+                return;\n+              }\n+              \n+              if (!hasText) {\n+                alert('í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìœ„ì¹˜ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');\n+                return;\n+              }\n+              \n+              // ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n               const newId = `muscle_${Date.now()}`;\n               const newPagePoints = { ...pagePoints };\n               \n               newPagePoints[currentPage] = {\n@@ -1100,25 +1137,29 @@\n                 textBoxY: 0,\n                 textBoxWidth: 10,\n                 textBoxHeight: 4\n               });\n-            } else {\n-              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n-            }\n-          }}\n-          style={{\n-            width: '100%',\n-            padding: '10px',\n-            background: AppColors.primary,\n-            color: 'white',\n-            border: 'none',\n-            borderRadius: '4px',\n-            cursor: 'pointer',\n-            marginTop: '15px'\n-          }}\n-        >\n-          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n-        </button>\n+              \n+              alert('ê·¼ìœ¡ í¬ì¸íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');\n+            }}\n+            disabled={!newPoint.name.trim()}\n+            style={{\n+              width: '100%',\n+              padding: '12px',\n+              background: isSettingCoordinates \n+                ? '#dc3545' \n+                : (newPoint.name.trim() ? AppColors.primary : '#ccc'),\n+              color: 'white',\n+              border: 'none',\n+              borderRadius: '6px',\n+              cursor: newPoint.name.trim() || isSettingCoordinates ? 'pointer' : 'not-allowed',\n+              fontSize: '14px',\n+              fontWeight: 'bold'\n+            }}\n+          >\n+            {isSettingCoordinates ? 'âŒ í´ë¦­ ëª¨ë“œ ì·¨ì†Œ' : 'âœ… ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€'}\n+          </button>\n+        </div>\n \n         <button \n           onClick={() => {\n             console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n@@ -1444,14 +1485,15 @@\n                 marginBottom: '30px',\n                 color: '#333'\n               }}>Target Muscles List</div>\n               \n-              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n+              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n               <div style={{ \n                 display: 'flex', \n                 justifyContent: 'center', \n                 alignItems: 'center',\n-                flex: 1\n+                flex: 1,\n+                position: 'relative'\n               }}>\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/back.png`} \n                   alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n@@ -1462,8 +1504,157 @@\n                     height: 'auto',\n                     objectFit: 'contain'\n                   }} \n                 />\n+                \n+                {/* í›„ë©´ ê·¼ìœ¡ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'auto',\n+                    cursor: isSettingCoordinates ? 'crosshair' : 'default'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"xMidYMid meet\"\n+                  onClick={handleImageClick}\n+                >\n+                  {/* í´ë¦­ ê°€ì´ë“œ ì˜¤ë²„ë ˆì´ */}\n+                  {isSettingCoordinates && (\n+                    <>\n+                      {/* ì„ì‹œ ì„  ê·¸ë¦¬ê¸° ë¯¸ë¦¬ë³´ê¸° */}\n+                      {clickMode === 'line' && tempLinePoints.length > 0 && (\n+                        <polyline \n+                          points={tempLinePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"red\" \n+                          strokeWidth=\"0.5\" \n+                          fill=\"none\"\n+                          strokeDasharray=\"2,1\"\n+                        />\n+                      )}\n+                      \n+                      {/* ì„ì‹œ ë©´ ê·¸ë¦¬ê¸° ë¯¸ë¦¬ë³´ê¸° */}\n+                      {clickMode === 'area' && tempAreaPoints.length >= 2 && (\n+                        <polygon \n+                          points={tempAreaPoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          fill=\"rgba(255,0,0,0.2)\" \n+                          stroke=\"red\"\n+                          strokeWidth=\"0.3\"\n+                          strokeDasharray=\"2,1\"\n+                        />\n+                      )}\n+                      \n+                      {/* ì„ì‹œ ì ë“¤ í‘œì‹œ */}\n+                      {clickMode === 'line' && tempLinePoints.map((point, index) => (\n+                        <circle \n+                          key={`temp-line-${index}`}\n+                          cx={point.x} \n+                          cy={point.y} \n+                          r=\"0.8\" \n+                          fill=\"red\"\n+                          stroke=\"white\"\n+                          strokeWidth=\"0.2\"\n+                        />\n+                      ))}\n+                      \n+                      {clickMode === 'area' && tempAreaPoints.map((point, index) => (\n+                        <circle \n+                          key={`temp-area-${index}`}\n+                          cx={point.x} \n+                          cy={point.y} \n+                          r=\"0.8\" \n+                          fill=\"blue\"\n+                          stroke=\"white\"\n+                          strokeWidth=\"0.2\"\n+                        />\n+                      ))}\n+                      \n+                      {/* ê°€ì´ë“œ í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x=\"50\" \n+                        y=\"10\" \n+                        fontSize=\"3\" \n+                        fill=\"red\"\n+                        fontWeight=\"bold\"\n+                        textAnchor=\"middle\"\n+                        style={{ pointerEvents: 'none' }}\n+                      >\n+                        {clickMode === 'point' && 'ğŸ“ í¬ì¸í„° ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”'}\n+                        {clickMode === 'line' && `âœï¸ ì„  ì  ${tempLinePoints.length + 1}ë²ˆì§¸ë¥¼ í´ë¦­í•˜ì„¸ìš”`}\n+                        {clickMode === 'area' && `ğŸ”² ë©´ì  ì  ${tempAreaPoints.length + 1}ë²ˆì§¸ë¥¼ í´ë¦­í•˜ì„¸ìš”`}\n+                        {clickMode === 'text' && 'ğŸ“ í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”'}\n+                      </text>\n+                    </>\n+                  )}\n+\n+                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ (3í˜ì´ì§€ìš©) */}\n+                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n+                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë³´ì´ì§€ ì•ŠëŠ” ë‹¤ê°í˜• */}\n+                      <polygon \n+                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n+                        fill=\"transparent\"\n+                        stroke=\"none\"\n+                        style={{ cursor: 'pointer' }}\n+                      />\n+                      \n+                      {/* í¬ì¸í„° */}\n+                      <circle \n+                        cx={muscle.point.x} \n+                        cy={muscle.point.y} \n+                        r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n+                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n+                      />\n+                      \n+                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n+                      {selectedPoints.has(muscle.id) && (\n+                        <polyline \n+                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"yellow\" \n+                          strokeWidth=\"0.8\" \n+                          fill=\"none\"\n+                        />\n+                      )}\n+                      \n+                      {/* ë©”ì¸ êº¾ì€ì„  */}\n+                      <polyline \n+                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"black\" \n+                        strokeWidth=\"0.3\" \n+                        fill=\"none\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n+                      <rect \n+                        x={muscle.textBox.x} \n+                        y={muscle.textBox.y} \n+                        width={muscle.textBox.width} \n+                        height={muscle.textBox.height} \n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        strokeWidth=\"0.1\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x={muscle.text.x} \n+                        y={muscle.text.y} \n+                        fontSize=\"2\" \n+                        fill=\"black\"\n+                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n+                        textAnchor=\"middle\"\n+                        dominantBaseline=\"middle\"\n+                      >\n+                        {muscle.name}\n+                      </text>\n+                    </g>\n+                  ))}\n+                </svg>\n               </div>\n             </div>\n           )}\n         </PrescriptionContainer>\n"
                },
                {
                    "date": 1764246888340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -294,8 +294,16 @@\n   const [clickMode, setClickMode] = useState<'none' | 'point' | 'line' | 'area' | 'text'>('none');\n   const [isSettingCoordinates, setIsSettingCoordinates] = useState(false);\n   const [tempLinePoints, setTempLinePoints] = useState<{ x: number, y: number }[]>([]);\n   const [tempAreaPoints, setTempAreaPoints] = useState<{ x: number, y: number }[]>([]);\n+  \n+  // ë“œë˜ê·¸ ê´€ë ¨ ìƒíƒœ\n+  const [isDragging, setIsDragging] = useState(false);\n+  const [dragTarget, setDragTarget] = useState<{\n+    muscleId: string;\n+    type: 'point' | 'line' | 'area' | 'text';\n+    index?: number;\n+  } | null>(null);\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -474,15 +482,17 @@\n   // ì´ë¯¸ì§€ í´ë¦­ í•¸ë“¤ëŸ¬ - SVG ì¢Œí‘œê³„ë¡œ ë³€í™˜\n   const handleImageClick = (event: React.MouseEvent<SVGElement>) => {\n     if (clickMode === 'none' || !isSettingCoordinates) return;\n \n+    event.preventDefault();\n+    event.stopPropagation();\n+\n     const svgElement = event.currentTarget as SVGSVGElement;\n     const rect = svgElement.getBoundingClientRect();\n-    const viewBox = svgElement.viewBox.baseVal;\n     \n-    // í´ë¦­ ì¢Œí‘œë¥¼ SVG viewBox ì¢Œí‘œê³„ë¡œ ë³€í™˜\n-    const x = ((event.clientX - rect.left) / rect.width) * viewBox.width;\n-    const y = ((event.clientY - rect.top) / rect.height) * viewBox.height;\n+    // SVGì˜ viewBox ì¢Œí‘œê³„(0~100)ë¡œ ì§ì ‘ ë³€í™˜\n+    const x = ((event.clientX - rect.left) / rect.width) * 100;\n+    const y = ((event.clientY - rect.top) / rect.height) * 100;\n \n     const roundedX = Math.round(x * 10) / 10; // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n     const roundedY = Math.round(y * 10) / 10;\n \n@@ -567,8 +577,65 @@\n     setTempLinePoints([]);\n     setTempAreaPoints([]);\n   };\n \n+  // ë“œë˜ê·¸ ì‹œì‘ í•¸ë“¤ëŸ¬\n+  const handleMouseDown = (event: React.MouseEvent, muscleId: string, type: 'point' | 'line' | 'area' | 'text', index?: number) => {\n+    event.preventDefault();\n+    event.stopPropagation();\n+    setIsDragging(true);\n+    setDragTarget({ muscleId, type, index });\n+  };\n+\n+  // ë“œë˜ê·¸ ì¤‘ í•¸ë“¤ëŸ¬\n+  const handleMouseMove = (event: React.MouseEvent<SVGElement>) => {\n+    if (!isDragging || !dragTarget || isSettingCoordinates) return;\n+\n+    const svgElement = event.currentTarget as SVGSVGElement;\n+    const rect = svgElement.getBoundingClientRect();\n+    \n+    const x = ((event.clientX - rect.left) / rect.width) * 100;\n+    const y = ((event.clientY - rect.top) / rect.height) * 100;\n+\n+    const roundedX = Math.round(x * 10) / 10;\n+    const roundedY = Math.round(y * 10) / 10;\n+\n+    const newPagePoints = { ...pagePoints };\n+    const muscle = newPagePoints[currentPage][dragTarget.muscleId];\n+\n+    if (!muscle) return;\n+\n+    switch (dragTarget.type) {\n+      case 'point':\n+        muscle.point = { x: roundedX, y: roundedY };\n+        break;\n+      case 'line':\n+        if (dragTarget.index !== undefined && muscle.linePoints[dragTarget.index]) {\n+          muscle.linePoints[dragTarget.index] = { x: roundedX, y: roundedY };\n+        }\n+        break;\n+      case 'area':\n+        if (dragTarget.index !== undefined && muscle.areaPoints[dragTarget.index]) {\n+          muscle.areaPoints[dragTarget.index] = { x: roundedX, y: roundedY };\n+        }\n+        break;\n+      case 'text':\n+        muscle.textBox.x = roundedX;\n+        muscle.textBox.y = roundedY;\n+        muscle.text.x = roundedX + muscle.textBox.width / 2;\n+        muscle.text.y = roundedY + muscle.textBox.height / 2;\n+        break;\n+    }\n+\n+    setPagePoints(newPagePoints);\n+  };\n+\n+  // ë“œë˜ê·¸ ì¢…ë£Œ í•¸ë“¤ëŸ¬\n+  const handleMouseUp = () => {\n+    setIsDragging(false);\n+    setDragTarget(null);\n+  };\n+\n   // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n   const [pagePoints, setPagePoints] = useState<{\n     [pageNum: number]: {\n       [pointId: string]: {\n@@ -1316,13 +1383,16 @@\n                     left: 0,\n                     width: '100%',\n                     height: '100%',\n                     pointerEvents: 'auto',\n-                    cursor: isSettingCoordinates ? 'crosshair' : 'default'\n+                    cursor: isSettingCoordinates ? 'crosshair' : (isDragging ? 'move' : 'default')\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"xMidYMid meet\"\n                   onClick={handleImageClick}\n+                  onMouseMove={handleMouseMove}\n+                  onMouseUp={handleMouseUp}\n+                  onMouseLeave={handleMouseUp}\n                 >\n                   {/* í´ë¦­ ê°€ì´ë“œ ì˜¤ë²„ë ˆì´ */}\n                   {isSettingCoordinates && (\n                     <>\n@@ -1393,13 +1463,14 @@\n \n                   {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n                   {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n                     <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë³´ì´ì§€ ì•ŠëŠ” ë‹¤ê°í˜• */}\n+                      {/* ë©´ì  ì˜ì—­ - ë°˜íˆ¬ëª…í•˜ê²Œ í‘œì‹œ */}\n                       <polygon \n                         points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill=\"transparent\"\n-                        stroke=\"none\"\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,200,0,0.4)\" : \"rgba(0,150,255,0.2)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(0,100,200,0.5)\"}\n+                        strokeWidth=\"0.2\"\n                         style={{ cursor: 'pointer' }}\n                       />\n                       \n                       {/* í¬ì¸í„° */}\n@@ -1407,10 +1478,10 @@\n                         cx={muscle.point.x} \n                         cy={muscle.point.y} \n                         r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n                         fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"black\"}\n+                        strokeWidth=\"0.2\"\n                       />\n                       \n                       {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n                       {selectedPoints.has(muscle.id) && (\n@@ -1429,16 +1500,44 @@\n                         strokeWidth=\"0.3\" \n                         fill=\"none\"\n                       />\n                       \n+                      {/* ë¼ì¸ í¬ì¸íŠ¸ë“¤ - ì„ íƒì‹œì—ë§Œ í‘œì‹œ */}\n+                      {selectedPoints.has(muscle.id) && muscle.linePoints.map((point, index) => (\n+                        <circle \n+                          key={`line-point-${index}`}\n+                          cx={point.x} \n+                          cy={point.y} \n+                          r=\"0.5\" \n+                          fill=\"red\"\n+                          stroke=\"white\"\n+                          strokeWidth=\"0.1\"\n+                          style={{ cursor: 'move' }}\n+                        />\n+                      ))}\n+                      \n+                      {/* ë©´ì  í¬ì¸íŠ¸ë“¤ - ì„ íƒì‹œì—ë§Œ í‘œì‹œ */}\n+                      {selectedPoints.has(muscle.id) && muscle.areaPoints.map((point, index) => (\n+                        <circle \n+                          key={`area-point-${index}`}\n+                          cx={point.x} \n+                          cy={point.y} \n+                          r=\"0.5\" \n+                          fill=\"blue\"\n+                          stroke=\"white\"\n+                          strokeWidth=\"0.1\"\n+                          style={{ cursor: 'move' }}\n+                        />\n+                      ))}\n+                      \n                       {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n                       <rect \n                         x={muscle.textBox.x} \n                         y={muscle.textBox.y} \n                         width={muscle.textBox.width} \n                         height={muscle.textBox.height} \n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"rgba(255,255,255,0.8)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"black\"}\n                         strokeWidth=\"0.1\"\n                       />\n                       \n                       {/* í…ìŠ¤íŠ¸ */}\n@@ -1591,13 +1690,14 @@\n \n                   {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ (3í˜ì´ì§€ìš©) */}\n                   {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n                     <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë³´ì´ì§€ ì•ŠëŠ” ë‹¤ê°í˜• */}\n+                      {/* ë©´ì  ì˜ì—­ - ë°˜íˆ¬ëª…í•˜ê²Œ í‘œì‹œ */}\n                       <polygon \n                         points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill=\"transparent\"\n-                        stroke=\"none\"\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,200,0,0.4)\" : \"rgba(0,150,255,0.2)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(0,100,200,0.5)\"}\n+                        strokeWidth=\"0.2\"\n                         style={{ cursor: 'pointer' }}\n                       />\n                       \n                       {/* í¬ì¸í„° */}\n@@ -1605,10 +1705,10 @@\n                         cx={muscle.point.x} \n                         cy={muscle.point.y} \n                         r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n                         fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"black\"}\n+                        strokeWidth=\"0.2\"\n                       />\n                       \n                       {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n                       {selectedPoints.has(muscle.id) && (\n@@ -1627,16 +1727,44 @@\n                         strokeWidth=\"0.3\" \n                         fill=\"none\"\n                       />\n                       \n+                      {/* ë¼ì¸ í¬ì¸íŠ¸ë“¤ - ì„ íƒì‹œì—ë§Œ í‘œì‹œ */}\n+                      {selectedPoints.has(muscle.id) && muscle.linePoints.map((point, index) => (\n+                        <circle \n+                          key={`line-point-${index}`}\n+                          cx={point.x} \n+                          cy={point.y} \n+                          r=\"0.5\" \n+                          fill=\"red\"\n+                          stroke=\"white\"\n+                          strokeWidth=\"0.1\"\n+                          style={{ cursor: 'move' }}\n+                        />\n+                      ))}\n+                      \n+                      {/* ë©´ì  í¬ì¸íŠ¸ë“¤ - ì„ íƒì‹œì—ë§Œ í‘œì‹œ */}\n+                      {selectedPoints.has(muscle.id) && muscle.areaPoints.map((point, index) => (\n+                        <circle \n+                          key={`area-point-${index}`}\n+                          cx={point.x} \n+                          cy={point.y} \n+                          r=\"0.5\" \n+                          fill=\"blue\"\n+                          stroke=\"white\"\n+                          strokeWidth=\"0.1\"\n+                          style={{ cursor: 'move' }}\n+                        />\n+                      ))}\n+                      \n                       {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n                       <rect \n                         x={muscle.textBox.x} \n                         y={muscle.textBox.y} \n                         width={muscle.textBox.width} \n                         height={muscle.textBox.height} \n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"rgba(255,255,255,0.8)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"black\"}\n                         strokeWidth=\"0.1\"\n                       />\n                       \n                       {/* í…ìŠ¤íŠ¸ */}\n"
                },
                {
                    "date": 1764246897014,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1480,8 +1480,10 @@\n                         r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n                         fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n                         stroke={selectedPoints.has(muscle.id) ? \"red\" : \"black\"}\n                         strokeWidth=\"0.2\"\n+                        onMouseDown={(e) => handleMouseDown(e, muscle.id, 'point')}\n+                        style={{ cursor: 'move' }}\n                       />\n                       \n                       {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n                       {selectedPoints.has(muscle.id) && (\n"
                },
                {
                    "date": 1764247167908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -467,8 +467,10 @@\n \n \n   // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n   const handlePointClick = (pointId: string) => {\n+    if (isDragging) return; // ë“œë˜ê·¸ ì¤‘ì¼ ë•ŒëŠ” ì„ íƒ ë³€ê²½ ë°©ì§€\n+    \n     setSelectedPoints(prev => {\n       const newSelected = new Set(prev);\n       if (newSelected.has(pointId)) {\n         newSelected.delete(pointId);\n@@ -480,9 +482,9 @@\n   };\n \n   // ì´ë¯¸ì§€ í´ë¦­ í•¸ë“¤ëŸ¬ - SVG ì¢Œí‘œê³„ë¡œ ë³€í™˜\n   const handleImageClick = (event: React.MouseEvent<SVGElement>) => {\n-    if (clickMode === 'none' || !isSettingCoordinates) return;\n+    if (clickMode === 'none' || !isSettingCoordinates || isDragging) return;\n \n     event.preventDefault();\n     event.stopPropagation();\n \n@@ -1615,13 +1617,16 @@\n                     left: 0,\n                     width: '100%',\n                     height: '100%',\n                     pointerEvents: 'auto',\n-                    cursor: isSettingCoordinates ? 'crosshair' : 'default'\n+                    cursor: isSettingCoordinates ? 'crosshair' : (isDragging ? 'move' : 'default')\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"xMidYMid meet\"\n                   onClick={handleImageClick}\n+                  onMouseMove={handleMouseMove}\n+                  onMouseUp={handleMouseUp}\n+                  onMouseLeave={handleMouseUp}\n                 >\n                   {/* í´ë¦­ ê°€ì´ë“œ ì˜¤ë²„ë ˆì´ */}\n                   {isSettingCoordinates && (\n                     <>\n@@ -1709,8 +1714,10 @@\n                         r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n                         fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n                         stroke={selectedPoints.has(muscle.id) ? \"red\" : \"black\"}\n                         strokeWidth=\"0.2\"\n+                        onMouseDown={(e) => handleMouseDown(e, muscle.id, 'point')}\n+                        style={{ cursor: 'move' }}\n                       />\n                       \n                       {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n                       {selectedPoints.has(muscle.id) && (\n"
                },
                {
                    "date": 1764247685572,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -288,22 +288,8 @@\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n-  \n-  // í´ë¦­ ëª¨ë“œ ìƒíƒœ\n-  const [clickMode, setClickMode] = useState<'none' | 'point' | 'line' | 'area' | 'text'>('none');\n-  const [isSettingCoordinates, setIsSettingCoordinates] = useState(false);\n-  const [tempLinePoints, setTempLinePoints] = useState<{ x: number, y: number }[]>([]);\n-  const [tempAreaPoints, setTempAreaPoints] = useState<{ x: number, y: number }[]>([]);\n-  \n-  // ë“œë˜ê·¸ ê´€ë ¨ ìƒíƒœ\n-  const [isDragging, setIsDragging] = useState(false);\n-  const [dragTarget, setDragTarget] = useState<{\n-    muscleId: string;\n-    type: 'point' | 'line' | 'area' | 'text';\n-    index?: number;\n-  } | null>(null);\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n     footSize: '',\n@@ -467,10 +453,8 @@\n \n \n   // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n   const handlePointClick = (pointId: string) => {\n-    if (isDragging) return; // ë“œë˜ê·¸ ì¤‘ì¼ ë•ŒëŠ” ì„ íƒ ë³€ê²½ ë°©ì§€\n-    \n     setSelectedPoints(prev => {\n       const newSelected = new Set(prev);\n       if (newSelected.has(pointId)) {\n         newSelected.delete(pointId);\n@@ -480,164 +464,8 @@\n       return newSelected;\n     });\n   };\n \n-  // ì´ë¯¸ì§€ í´ë¦­ í•¸ë“¤ëŸ¬ - SVG ì¢Œí‘œê³„ë¡œ ë³€í™˜\n-  const handleImageClick = (event: React.MouseEvent<SVGElement>) => {\n-    if (clickMode === 'none' || !isSettingCoordinates || isDragging) return;\n-\n-    event.preventDefault();\n-    event.stopPropagation();\n-\n-    const svgElement = event.currentTarget as SVGSVGElement;\n-    const rect = svgElement.getBoundingClientRect();\n-    \n-    // SVGì˜ viewBox ì¢Œí‘œê³„(0~100)ë¡œ ì§ì ‘ ë³€í™˜\n-    const x = ((event.clientX - rect.left) / rect.width) * 100;\n-    const y = ((event.clientY - rect.top) / rect.height) * 100;\n-\n-    const roundedX = Math.round(x * 10) / 10; // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n-    const roundedY = Math.round(y * 10) / 10;\n-\n-    switch (clickMode) {\n-      case 'point':\n-        setNewPoint(prev => ({ ...prev, pointX: roundedX, pointY: roundedY }));\n-        setClickMode('none');\n-        setIsSettingCoordinates(false);\n-        break;\n-        \n-      case 'line':\n-        setTempLinePoints(prev => {\n-          const updated = [...prev, { x: roundedX, y: roundedY }];\n-          return updated;\n-        });\n-        break;\n-        \n-      case 'area':\n-        setTempAreaPoints(prev => {\n-          const updated = [...prev, { x: roundedX, y: roundedY }];\n-          return updated;\n-        });\n-        break;\n-        \n-      case 'text':\n-        setNewPoint(prev => ({ \n-          ...prev, \n-          textBoxX: roundedX, \n-          textBoxY: roundedY \n-        }));\n-        setClickMode('none');\n-        setIsSettingCoordinates(false);\n-        break;\n-        \n-      default:\n-        break;\n-    }\n-  };\n-\n-  // í´ë¦­ ëª¨ë“œ ì‹œì‘ í•¨ìˆ˜ë“¤\n-  const startPointClick = () => {\n-    setClickMode('point');\n-    setIsSettingCoordinates(true);\n-  };\n-\n-  const startLineClick = () => {\n-    setClickMode('line');\n-    setIsSettingCoordinates(true);\n-    setTempLinePoints([]);\n-  };\n-\n-  const startAreaClick = () => {\n-    setClickMode('area');\n-    setIsSettingCoordinates(true);\n-    setTempAreaPoints([]);\n-  };\n-\n-  const startTextClick = () => {\n-    setClickMode('text');\n-    setIsSettingCoordinates(true);\n-  };\n-\n-  // í´ë¦­ ëª¨ë“œ ì™„ë£Œ í•¨ìˆ˜ë“¤\n-  const finishLineClick = () => {\n-    setNewPoint(prev => ({ ...prev, linePoints: tempLinePoints }));\n-    setTempLinePoints([]);\n-    setClickMode('none');\n-    setIsSettingCoordinates(false);\n-  };\n-\n-  const finishAreaClick = () => {\n-    setNewPoint(prev => ({ ...prev, areaPoints: tempAreaPoints }));\n-    setTempAreaPoints([]);\n-    setClickMode('none');\n-    setIsSettingCoordinates(false);\n-  };\n-\n-  // í´ë¦­ ëª¨ë“œ ì·¨ì†Œ\n-  const cancelClickMode = () => {\n-    setClickMode('none');\n-    setIsSettingCoordinates(false);\n-    setTempLinePoints([]);\n-    setTempAreaPoints([]);\n-  };\n-\n-  // ë“œë˜ê·¸ ì‹œì‘ í•¸ë“¤ëŸ¬\n-  const handleMouseDown = (event: React.MouseEvent, muscleId: string, type: 'point' | 'line' | 'area' | 'text', index?: number) => {\n-    event.preventDefault();\n-    event.stopPropagation();\n-    setIsDragging(true);\n-    setDragTarget({ muscleId, type, index });\n-  };\n-\n-  // ë“œë˜ê·¸ ì¤‘ í•¸ë“¤ëŸ¬\n-  const handleMouseMove = (event: React.MouseEvent<SVGElement>) => {\n-    if (!isDragging || !dragTarget || isSettingCoordinates) return;\n-\n-    const svgElement = event.currentTarget as SVGSVGElement;\n-    const rect = svgElement.getBoundingClientRect();\n-    \n-    const x = ((event.clientX - rect.left) / rect.width) * 100;\n-    const y = ((event.clientY - rect.top) / rect.height) * 100;\n-\n-    const roundedX = Math.round(x * 10) / 10;\n-    const roundedY = Math.round(y * 10) / 10;\n-\n-    const newPagePoints = { ...pagePoints };\n-    const muscle = newPagePoints[currentPage][dragTarget.muscleId];\n-\n-    if (!muscle) return;\n-\n-    switch (dragTarget.type) {\n-      case 'point':\n-        muscle.point = { x: roundedX, y: roundedY };\n-        break;\n-      case 'line':\n-        if (dragTarget.index !== undefined && muscle.linePoints[dragTarget.index]) {\n-          muscle.linePoints[dragTarget.index] = { x: roundedX, y: roundedY };\n-        }\n-        break;\n-      case 'area':\n-        if (dragTarget.index !== undefined && muscle.areaPoints[dragTarget.index]) {\n-          muscle.areaPoints[dragTarget.index] = { x: roundedX, y: roundedY };\n-        }\n-        break;\n-      case 'text':\n-        muscle.textBox.x = roundedX;\n-        muscle.textBox.y = roundedY;\n-        muscle.text.x = roundedX + muscle.textBox.width / 2;\n-        muscle.text.y = roundedY + muscle.textBox.height / 2;\n-        break;\n-    }\n-\n-    setPagePoints(newPagePoints);\n-  };\n-\n-  // ë“œë˜ê·¸ ì¢…ë£Œ í•¸ë“¤ëŸ¬\n-  const handleMouseUp = () => {\n-    setIsDragging(false);\n-    setDragTarget(null);\n-  };\n-\n   // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n   const [pagePoints, setPagePoints] = useState<{\n     [pageNum: number]: {\n       [pointId: string]: {\n@@ -905,271 +733,161 @@\n             style={{ width: '100%' }}\n           />\n         </InputGroup>\n \n-        {/* í´ë¦­ ëª¨ë“œ ìƒíƒœ í‘œì‹œ */}\n-        {isSettingCoordinates && (\n-          <div style={{\n-            background: '#fff3cd',\n-            border: '1px solid #ffeaa7',\n-            borderRadius: '4px',\n-            padding: '10px',\n-            marginBottom: '15px',\n-            fontSize: '12px',\n-            fontWeight: 'bold'\n-          }}>\n-            ğŸ¯ {clickMode === 'point' && 'í¬ì¸í„° ìœ„ì¹˜ í´ë¦­'}\n-            {clickMode === 'line' && `ì„  ê·¸ë¦¬ê¸° ì¤‘ (${tempLinePoints.length}ì )`}\n-            {clickMode === 'area' && `ë©´ì  ê·¸ë¦¬ê¸° ì¤‘ (${tempAreaPoints.length}ì )`}\n-            {clickMode === 'text' && 'í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìœ„ì¹˜ í´ë¦­'}\n-            <br />\n-            ğŸ‘† ì¸ì²´ë„ë¥¼ í´ë¦­í•˜ì„¸ìš”\n-            {(clickMode === 'line' || clickMode === 'area') && (\n-              <>\n-                <br />\n-                <button \n-                  onClick={clickMode === 'line' ? finishLineClick : finishAreaClick}\n-                  style={{ \n-                    fontSize: '11px', \n-                    padding: '2px 6px', \n-                    marginRight: '5px',\n-                    background: '#28a745',\n-                    color: 'white',\n-                    border: 'none',\n-                    borderRadius: '3px'\n-                  }}\n-                >\n-                  ì™„ë£Œ\n-                </button>\n-                <button \n-                  onClick={cancelClickMode}\n-                  style={{ \n-                    fontSize: '11px', \n-                    padding: '2px 6px',\n-                    background: '#dc3545',\n-                    color: 'white', \n-                    border: 'none',\n-                    borderRadius: '3px'\n-                  }}\n-                >\n-                  ì·¨ì†Œ\n-                </button>\n-              </>\n-            )}\n-          </div>\n-        )}\n-\n         <InputGroup>\n           <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n-          <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\n-            <CoordinateInput \n-              type=\"number\" \n-              placeholder=\"X\" \n-              value={newPoint.pointX}\n-              onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n-            />\n-            <CoordinateInput \n-              type=\"number\" \n-              placeholder=\"Y\" \n-              value={newPoint.pointY}\n-              onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n-            />\n-            <button \n-              onClick={startPointClick}\n-              disabled={isSettingCoordinates}\n-              style={{\n-                padding: '4px 8px',\n-                fontSize: '11px',\n-                background: isSettingCoordinates ? '#ccc' : '#007bff',\n-                color: 'white',\n-                border: 'none',\n-                borderRadius: '3px',\n-                cursor: isSettingCoordinates ? 'not-allowed' : 'pointer'\n-              }}\n-            >\n-              ğŸ¯ í´ë¦­\n-            </button>\n-          </div>\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"X\" \n+            value={newPoint.pointX}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n+          />\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"Y\" \n+            value={newPoint.pointY}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n+          />\n         </InputGroup>\n \n         <InputGroup>\n-          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„ )</InputLabel>\n-          <div style={{ marginBottom: '10px' }}>\n-            <button \n-              onClick={startLineClick}\n-              disabled={isSettingCoordinates}\n-              style={{\n-                padding: '6px 12px',\n-                fontSize: '12px',\n-                background: isSettingCoordinates ? '#ccc' : '#28a745',\n-                color: 'white',\n-                border: 'none',\n-                borderRadius: '4px',\n-                cursor: isSettingCoordinates ? 'not-allowed' : 'pointer',\n-                marginRight: '5px'\n-              }}\n-            >\n-              âœï¸ í´ë¦­ìœ¼ë¡œ ì„  ê·¸ë¦¬ê¸°\n-            </button>\n-            <button \n-              onClick={() => setNewPoint({ ...newPoint, linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }] })}\n-              style={{\n-                padding: '6px 12px',\n-                fontSize: '12px',\n-                background: '#6c757d',\n-                color: 'white',\n-                border: 'none',\n-                borderRadius: '4px',\n-                cursor: 'pointer'\n-              }}\n-            >\n-              ğŸ—‘ï¸ ì´ˆê¸°í™”\n-            </button>\n-          </div>\n-          {(newPoint.linePoints.length > 0 || tempLinePoints.length > 0) && (\n-            <div style={{ fontSize: '11px', color: '#666', marginBottom: '5px' }}>\n-              {(clickMode === 'line' ? tempLinePoints : newPoint.linePoints).map((point, index) => (\n-                <div key={index}>\n-                  ì  {index + 1}: ({point.x.toFixed(1)}, {point.y.toFixed(1)})\n-                </div>\n-              ))}\n+          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n+          {newPoint.linePoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={point.x}\n+                onChange={(e) => {\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={point.y}\n+                onChange={(e) => {\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                }}\n+              />\n+              {index >= 2 && (\n+                <button \n+                  onClick={() => {\n+                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n             </div>\n-          )}\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ì„  ì  ì¶”ê°€\n+          </button>\n         </InputGroup>\n \n         <InputGroup>\n-          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„)</InputLabel>\n-          <div style={{ marginBottom: '10px' }}>\n-            <button \n-              onClick={startAreaClick}\n-              disabled={isSettingCoordinates}\n-              style={{\n-                padding: '6px 12px',\n-                fontSize: '12px',\n-                background: isSettingCoordinates ? '#ccc' : '#17a2b8',\n-                color: 'white',\n-                border: 'none',\n-                borderRadius: '4px',\n-                cursor: isSettingCoordinates ? 'not-allowed' : 'pointer',\n-                marginRight: '5px'\n-              }}\n-            >\n-              ğŸ”² í´ë¦­ìœ¼ë¡œ ë©´ì  ê·¸ë¦¬ê¸°\n-            </button>\n-            <button \n-              onClick={() => setNewPoint({ ...newPoint, areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }] })}\n-              style={{\n-                padding: '6px 12px',\n-                fontSize: '12px',\n-                background: '#6c757d',\n-                color: 'white',\n-                border: 'none',\n-                borderRadius: '4px',\n-                cursor: 'pointer'\n-              }}\n-            >\n-              ğŸ—‘ï¸ ì´ˆê¸°í™”\n-            </button>\n-          </div>\n-          {(newPoint.areaPoints.length > 0 || tempAreaPoints.length > 0) && (\n-            <div style={{ fontSize: '11px', color: '#666', marginBottom: '5px' }}>\n-              {(clickMode === 'area' ? tempAreaPoints : newPoint.areaPoints).map((point, index) => (\n-                <div key={index}>\n-                  ì  {index + 1}: ({point.x.toFixed(1)}, {point.y.toFixed(1)})\n-                </div>\n-              ))}\n+          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n+          {newPoint.areaPoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={point.x}\n+                onChange={(e) => {\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={point.y}\n+                onChange={(e) => {\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                }}\n+              />\n+              {index >= 3 && (\n+                <button \n+                  onClick={() => {\n+                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n             </div>\n-          )}\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ë©´ ì  ì¶”ê°€\n+          </button>\n         </InputGroup>\n \n         <InputGroup>\n-          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìœ„ì¹˜</InputLabel>\n-          <div style={{ display: 'flex', alignItems: 'center', gap: '5px', marginBottom: '5px' }}>\n+          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n+          <div>\n+            <span style={{ fontSize: '11px' }}>X: </span>\n             <CoordinateInput \n               type=\"number\" \n-              placeholder=\"X\"\n               value={newPoint.textBoxX}\n               onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n             />\n+            <span style={{ fontSize: '11px' }}>Y: </span>\n             <CoordinateInput \n               type=\"number\" \n-              placeholder=\"Y\"\n               value={newPoint.textBoxY}\n               onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n             />\n-            <button \n-              onClick={startTextClick}\n-              disabled={isSettingCoordinates}\n-              style={{\n-                padding: '4px 8px',\n-                fontSize: '11px',\n-                background: isSettingCoordinates ? '#ccc' : '#ffc107',\n-                color: 'black',\n-                border: 'none',\n-                borderRadius: '3px',\n-                cursor: isSettingCoordinates ? 'not-allowed' : 'pointer'\n-              }}\n-            >\n-              ğŸ“ í´ë¦­\n-            </button>\n           </div>\n-          <div style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\n-            <span style={{ fontSize: '11px' }}>í¬ê¸°: </span>\n+          <div style={{ marginTop: '5px' }}>\n+            <span style={{ fontSize: '11px' }}>W: </span>\n             <CoordinateInput \n               type=\"number\" \n-              placeholder=\"ë„ˆë¹„\"\n               value={newPoint.textBoxWidth}\n               onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n             />\n+            <span style={{ fontSize: '11px' }}>H: </span>\n             <CoordinateInput \n               type=\"number\" \n-              placeholder=\"ë†’ì´\"\n               value={newPoint.textBoxHeight}\n               onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n             />\n           </div>\n         </InputGroup>\n \n-        <div style={{ marginTop: '20px', borderTop: '1px solid #eee', paddingTop: '15px' }}>\n-          <button \n-            onClick={() => {\n-              if (isSettingCoordinates) {\n-                cancelClickMode();\n-                return;\n-              }\n-              \n-              if (!newPoint.name.trim()) {\n-                alert('ê·¼ìœ¡ ì´ë¦„ì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');\n-                return;\n-              }\n-              \n-              // í•„ìˆ˜ ë°ì´í„° ì²´í¬\n-              const hasPoint = newPoint.pointX !== 0 || newPoint.pointY !== 0;\n-              const hasLine = newPoint.linePoints.length >= 2 && newPoint.linePoints.some(p => p.x !== 0 || p.y !== 0);\n-              const hasArea = newPoint.areaPoints.length >= 3 && newPoint.areaPoints.some(p => p.x !== 0 || p.y !== 0);\n-              const hasText = newPoint.textBoxX !== 0 || newPoint.textBoxY !== 0;\n-              \n-              if (!hasPoint) {\n-                alert('í¬ì¸í„° ì¢Œí‘œë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');\n-                return;\n-              }\n-              \n-              if (!hasLine) {\n-                alert('ì„  ì¢Œí‘œë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');\n-                return;\n-              }\n-              \n-              if (!hasArea) {\n-                alert('ë©´ì  ì¢Œí‘œë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');\n-                return;\n-              }\n-              \n-              if (!hasText) {\n-                alert('í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìœ„ì¹˜ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');\n-                return;\n-              }\n-              \n-              // ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n+        <button \n+          onClick={() => {\n+            if (newPoint.name.trim()) {\n               const newId = `muscle_${Date.now()}`;\n               const newPagePoints = { ...pagePoints };\n               \n               newPagePoints[currentPage] = {\n@@ -1206,29 +924,25 @@\n                 textBoxY: 0,\n                 textBoxWidth: 10,\n                 textBoxHeight: 4\n               });\n-              \n-              alert('ê·¼ìœ¡ í¬ì¸íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');\n-            }}\n-            disabled={!newPoint.name.trim()}\n-            style={{\n-              width: '100%',\n-              padding: '12px',\n-              background: isSettingCoordinates \n-                ? '#dc3545' \n-                : (newPoint.name.trim() ? AppColors.primary : '#ccc'),\n-              color: 'white',\n-              border: 'none',\n-              borderRadius: '6px',\n-              cursor: newPoint.name.trim() || isSettingCoordinates ? 'pointer' : 'not-allowed',\n-              fontSize: '14px',\n-              fontWeight: 'bold'\n-            }}\n-          >\n-            {isSettingCoordinates ? 'âŒ í´ë¦­ ëª¨ë“œ ì·¨ì†Œ' : 'âœ… ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€'}\n-          </button>\n-        </div>\n+            } else {\n+              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n+            }\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '10px',\n+            background: AppColors.primary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '15px'\n+          }}\n+        >\n+          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n+        </button>\n \n         <button \n           onClick={() => {\n             console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n@@ -1384,95 +1098,21 @@\n                     top: 0,\n                     left: 0,\n                     width: '100%',\n                     height: '100%',\n-                    pointerEvents: 'auto',\n-                    cursor: isSettingCoordinates ? 'crosshair' : (isDragging ? 'move' : 'default')\n+                    pointerEvents: 'auto'\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"xMidYMid meet\"\n-                  onClick={handleImageClick}\n-                  onMouseMove={handleMouseMove}\n-                  onMouseUp={handleMouseUp}\n-                  onMouseLeave={handleMouseUp}\n                 >\n-                  {/* í´ë¦­ ê°€ì´ë“œ ì˜¤ë²„ë ˆì´ */}\n-                  {isSettingCoordinates && (\n-                    <>\n-                      {/* ì„ì‹œ ì„  ê·¸ë¦¬ê¸° ë¯¸ë¦¬ë³´ê¸° */}\n-                      {clickMode === 'line' && tempLinePoints.length > 0 && (\n-                        <polyline \n-                          points={tempLinePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          stroke=\"red\" \n-                          strokeWidth=\"0.5\" \n-                          fill=\"none\"\n-                          strokeDasharray=\"2,1\"\n-                        />\n-                      )}\n-                      \n-                      {/* ì„ì‹œ ë©´ ê·¸ë¦¬ê¸° ë¯¸ë¦¬ë³´ê¸° */}\n-                      {clickMode === 'area' && tempAreaPoints.length >= 2 && (\n-                        <polygon \n-                          points={tempAreaPoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          fill=\"rgba(255,0,0,0.2)\" \n-                          stroke=\"red\"\n-                          strokeWidth=\"0.3\"\n-                          strokeDasharray=\"2,1\"\n-                        />\n-                      )}\n-                      \n-                      {/* ì„ì‹œ ì ë“¤ í‘œì‹œ */}\n-                      {clickMode === 'line' && tempLinePoints.map((point, index) => (\n-                        <circle \n-                          key={`temp-line-${index}`}\n-                          cx={point.x} \n-                          cy={point.y} \n-                          r=\"0.8\" \n-                          fill=\"red\"\n-                          stroke=\"white\"\n-                          strokeWidth=\"0.2\"\n-                        />\n-                      ))}\n-                      \n-                      {clickMode === 'area' && tempAreaPoints.map((point, index) => (\n-                        <circle \n-                          key={`temp-area-${index}`}\n-                          cx={point.x} \n-                          cy={point.y} \n-                          r=\"0.8\" \n-                          fill=\"blue\"\n-                          stroke=\"white\"\n-                          strokeWidth=\"0.2\"\n-                        />\n-                      ))}\n-                      \n-                      {/* ê°€ì´ë“œ í…ìŠ¤íŠ¸ */}\n-                      <text \n-                        x=\"50\" \n-                        y=\"10\" \n-                        fontSize=\"3\" \n-                        fill=\"red\"\n-                        fontWeight=\"bold\"\n-                        textAnchor=\"middle\"\n-                        style={{ pointerEvents: 'none' }}\n-                      >\n-                        {clickMode === 'point' && 'ğŸ“ í¬ì¸í„° ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”'}\n-                        {clickMode === 'line' && `âœï¸ ì„  ì  ${tempLinePoints.length + 1}ë²ˆì§¸ë¥¼ í´ë¦­í•˜ì„¸ìš”`}\n-                        {clickMode === 'area' && `ğŸ”² ë©´ì  ì  ${tempAreaPoints.length + 1}ë²ˆì§¸ë¥¼ í´ë¦­í•˜ì„¸ìš”`}\n-                        {clickMode === 'text' && 'ğŸ“ í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”'}\n-                      </text>\n-                    </>\n-                  )}\n-\n                   {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n                   {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n                     <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* ë©´ì  ì˜ì—­ - ë°˜íˆ¬ëª…í•˜ê²Œ í‘œì‹œ */}\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë³´ì´ì§€ ì•ŠëŠ” ë‹¤ê°í˜• */}\n                       <polygon \n                         points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,200,0,0.4)\" : \"rgba(0,150,255,0.2)\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(0,100,200,0.5)\"}\n-                        strokeWidth=\"0.2\"\n+                        fill=\"transparent\"\n+                        stroke=\"none\"\n                         style={{ cursor: 'pointer' }}\n                       />\n                       \n                       {/* í¬ì¸í„° */}\n@@ -1480,12 +1120,10 @@\n                         cx={muscle.point.x} \n                         cy={muscle.point.y} \n                         r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n                         fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"black\"}\n-                        strokeWidth=\"0.2\"\n-                        onMouseDown={(e) => handleMouseDown(e, muscle.id, 'point')}\n-                        style={{ cursor: 'move' }}\n+                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n                       />\n                       \n                       {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n                       {selectedPoints.has(muscle.id) && (\n@@ -1504,44 +1142,16 @@\n                         strokeWidth=\"0.3\" \n                         fill=\"none\"\n                       />\n                       \n-                      {/* ë¼ì¸ í¬ì¸íŠ¸ë“¤ - ì„ íƒì‹œì—ë§Œ í‘œì‹œ */}\n-                      {selectedPoints.has(muscle.id) && muscle.linePoints.map((point, index) => (\n-                        <circle \n-                          key={`line-point-${index}`}\n-                          cx={point.x} \n-                          cy={point.y} \n-                          r=\"0.5\" \n-                          fill=\"red\"\n-                          stroke=\"white\"\n-                          strokeWidth=\"0.1\"\n-                          style={{ cursor: 'move' }}\n-                        />\n-                      ))}\n-                      \n-                      {/* ë©´ì  í¬ì¸íŠ¸ë“¤ - ì„ íƒì‹œì—ë§Œ í‘œì‹œ */}\n-                      {selectedPoints.has(muscle.id) && muscle.areaPoints.map((point, index) => (\n-                        <circle \n-                          key={`area-point-${index}`}\n-                          cx={point.x} \n-                          cy={point.y} \n-                          r=\"0.5\" \n-                          fill=\"blue\"\n-                          stroke=\"white\"\n-                          strokeWidth=\"0.1\"\n-                          style={{ cursor: 'move' }}\n-                        />\n-                      ))}\n-                      \n                       {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n                       <rect \n                         x={muscle.textBox.x} \n                         y={muscle.textBox.y} \n                         width={muscle.textBox.width} \n                         height={muscle.textBox.height} \n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"rgba(255,255,255,0.8)\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"black\"}\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n                         strokeWidth=\"0.1\"\n                       />\n                       \n                       {/* í…ìŠ¤íŠ¸ */}\n@@ -1588,15 +1198,14 @@\n                 marginBottom: '30px',\n                 color: '#333'\n               }}>Target Muscles List</div>\n               \n-              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n+              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n               <div style={{ \n                 display: 'flex', \n                 justifyContent: 'center', \n                 alignItems: 'center',\n-                flex: 1,\n-                position: 'relative'\n+                flex: 1\n               }}>\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/back.png`} \n                   alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n@@ -1607,191 +1216,8 @@\n                     height: 'auto',\n                     objectFit: 'contain'\n                   }} \n                 />\n-                \n-                {/* í›„ë©´ ê·¼ìœ¡ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n-                <svg \n-                  style={{\n-                    position: 'absolute',\n-                    top: 0,\n-                    left: 0,\n-                    width: '100%',\n-                    height: '100%',\n-                    pointerEvents: 'auto',\n-                    cursor: isSettingCoordinates ? 'crosshair' : (isDragging ? 'move' : 'default')\n-                  }}\n-                  viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"xMidYMid meet\"\n-                  onClick={handleImageClick}\n-                  onMouseMove={handleMouseMove}\n-                  onMouseUp={handleMouseUp}\n-                  onMouseLeave={handleMouseUp}\n-                >\n-                  {/* í´ë¦­ ê°€ì´ë“œ ì˜¤ë²„ë ˆì´ */}\n-                  {isSettingCoordinates && (\n-                    <>\n-                      {/* ì„ì‹œ ì„  ê·¸ë¦¬ê¸° ë¯¸ë¦¬ë³´ê¸° */}\n-                      {clickMode === 'line' && tempLinePoints.length > 0 && (\n-                        <polyline \n-                          points={tempLinePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          stroke=\"red\" \n-                          strokeWidth=\"0.5\" \n-                          fill=\"none\"\n-                          strokeDasharray=\"2,1\"\n-                        />\n-                      )}\n-                      \n-                      {/* ì„ì‹œ ë©´ ê·¸ë¦¬ê¸° ë¯¸ë¦¬ë³´ê¸° */}\n-                      {clickMode === 'area' && tempAreaPoints.length >= 2 && (\n-                        <polygon \n-                          points={tempAreaPoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          fill=\"rgba(255,0,0,0.2)\" \n-                          stroke=\"red\"\n-                          strokeWidth=\"0.3\"\n-                          strokeDasharray=\"2,1\"\n-                        />\n-                      )}\n-                      \n-                      {/* ì„ì‹œ ì ë“¤ í‘œì‹œ */}\n-                      {clickMode === 'line' && tempLinePoints.map((point, index) => (\n-                        <circle \n-                          key={`temp-line-${index}`}\n-                          cx={point.x} \n-                          cy={point.y} \n-                          r=\"0.8\" \n-                          fill=\"red\"\n-                          stroke=\"white\"\n-                          strokeWidth=\"0.2\"\n-                        />\n-                      ))}\n-                      \n-                      {clickMode === 'area' && tempAreaPoints.map((point, index) => (\n-                        <circle \n-                          key={`temp-area-${index}`}\n-                          cx={point.x} \n-                          cy={point.y} \n-                          r=\"0.8\" \n-                          fill=\"blue\"\n-                          stroke=\"white\"\n-                          strokeWidth=\"0.2\"\n-                        />\n-                      ))}\n-                      \n-                      {/* ê°€ì´ë“œ í…ìŠ¤íŠ¸ */}\n-                      <text \n-                        x=\"50\" \n-                        y=\"10\" \n-                        fontSize=\"3\" \n-                        fill=\"red\"\n-                        fontWeight=\"bold\"\n-                        textAnchor=\"middle\"\n-                        style={{ pointerEvents: 'none' }}\n-                      >\n-                        {clickMode === 'point' && 'ğŸ“ í¬ì¸í„° ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”'}\n-                        {clickMode === 'line' && `âœï¸ ì„  ì  ${tempLinePoints.length + 1}ë²ˆì§¸ë¥¼ í´ë¦­í•˜ì„¸ìš”`}\n-                        {clickMode === 'area' && `ğŸ”² ë©´ì  ì  ${tempAreaPoints.length + 1}ë²ˆì§¸ë¥¼ í´ë¦­í•˜ì„¸ìš”`}\n-                        {clickMode === 'text' && 'ğŸ“ í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”'}\n-                      </text>\n-                    </>\n-                  )}\n-\n-                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ (3í˜ì´ì§€ìš©) */}\n-                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n-                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* ë©´ì  ì˜ì—­ - ë°˜íˆ¬ëª…í•˜ê²Œ í‘œì‹œ */}\n-                      <polygon \n-                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,200,0,0.4)\" : \"rgba(0,150,255,0.2)\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(0,100,200,0.5)\"}\n-                        strokeWidth=\"0.2\"\n-                        style={{ cursor: 'pointer' }}\n-                      />\n-                      \n-                      {/* í¬ì¸í„° */}\n-                      <circle \n-                        cx={muscle.point.x} \n-                        cy={muscle.point.y} \n-                        r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n-                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"black\"}\n-                        strokeWidth=\"0.2\"\n-                        onMouseDown={(e) => handleMouseDown(e, muscle.id, 'point')}\n-                        style={{ cursor: 'move' }}\n-                      />\n-                      \n-                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n-                      {selectedPoints.has(muscle.id) && (\n-                        <polyline \n-                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          stroke=\"yellow\" \n-                          strokeWidth=\"0.8\" \n-                          fill=\"none\"\n-                        />\n-                      )}\n-                      \n-                      {/* ë©”ì¸ êº¾ì€ì„  */}\n-                      <polyline \n-                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"black\" \n-                        strokeWidth=\"0.3\" \n-                        fill=\"none\"\n-                      />\n-                      \n-                      {/* ë¼ì¸ í¬ì¸íŠ¸ë“¤ - ì„ íƒì‹œì—ë§Œ í‘œì‹œ */}\n-                      {selectedPoints.has(muscle.id) && muscle.linePoints.map((point, index) => (\n-                        <circle \n-                          key={`line-point-${index}`}\n-                          cx={point.x} \n-                          cy={point.y} \n-                          r=\"0.5\" \n-                          fill=\"red\"\n-                          stroke=\"white\"\n-                          strokeWidth=\"0.1\"\n-                          style={{ cursor: 'move' }}\n-                        />\n-                      ))}\n-                      \n-                      {/* ë©´ì  í¬ì¸íŠ¸ë“¤ - ì„ íƒì‹œì—ë§Œ í‘œì‹œ */}\n-                      {selectedPoints.has(muscle.id) && muscle.areaPoints.map((point, index) => (\n-                        <circle \n-                          key={`area-point-${index}`}\n-                          cx={point.x} \n-                          cy={point.y} \n-                          r=\"0.5\" \n-                          fill=\"blue\"\n-                          stroke=\"white\"\n-                          strokeWidth=\"0.1\"\n-                          style={{ cursor: 'move' }}\n-                        />\n-                      ))}\n-                      \n-                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n-                      <rect \n-                        x={muscle.textBox.x} \n-                        y={muscle.textBox.y} \n-                        width={muscle.textBox.width} \n-                        height={muscle.textBox.height} \n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"rgba(255,255,255,0.8)\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"black\"}\n-                        strokeWidth=\"0.1\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ */}\n-                      <text \n-                        x={muscle.text.x} \n-                        y={muscle.text.y} \n-                        fontSize=\"2\" \n-                        fill=\"black\"\n-                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n-                        textAnchor=\"middle\"\n-                        dominantBaseline=\"middle\"\n-                      >\n-                        {muscle.name}\n-                      </text>\n-                    </g>\n-                  ))}\n-                </svg>\n               </div>\n             </div>\n           )}\n         </PrescriptionContainer>\n"
                },
                {
                    "date": 1764589965846,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -498,9 +498,46 @@\n         textBox: { x: 2, y: 11, width: 12, height: 4 },\n         text: { x: 8, y: 13.5 }\n       }\n     },\n-    3: {}  // ì„¸ ë²ˆì§¸ í˜ì´ì§€\n+    3: {   // ì„¸ ë²ˆì§¸ í˜ì´ì§€ (í›„ë©´ ê·¼ìœ¡ ì˜ˆì‹œ)\n+      'muscle_back_1': {\n+        id: 'muscle_back_1',\n+        name: 'ìŠ¹ëª¨ê·¼',\n+        point: { x: 50, y: 20 },\n+        linePoints: [\n+          { x: 50, y: 20 },\n+          { x: 45, y: 15 },\n+          { x: 30, y: 10 }\n+        ],\n+        areaPoints: [\n+          { x: 45, y: 15 },\n+          { x: 55, y: 15 },\n+          { x: 55, y: 25 },\n+          { x: 45, y: 25 }\n+        ],\n+        textBox: { x: 22, y: 6, width: 12, height: 4 },\n+        text: { x: 28, y: 8.5 }\n+      },\n+      'muscle_back_2': {\n+        id: 'muscle_back_2',\n+        name: 'ê´‘ë°°ê·¼',\n+        point: { x: 40, y: 35 },\n+        linePoints: [\n+          { x: 40, y: 35 },\n+          { x: 35, y: 30 },\n+          { x: 20, y: 25 }\n+        ],\n+        areaPoints: [\n+          { x: 35, y: 30 },\n+          { x: 45, y: 30 },\n+          { x: 45, y: 40 },\n+          { x: 35, y: 40 }\n+        ],\n+        textBox: { x: 12, y: 21, width: 12, height: 4 },\n+        text: { x: 18, y: 23.5 }\n+      }\n+    }\n   });\n \n   // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n   const [newPoint, setNewPoint] = useState({\n@@ -1106,13 +1143,14 @@\n                 >\n                   {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n                   {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n                     <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë³´ì´ì§€ ì•ŠëŠ” ë‹¤ê°í˜• */}\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n                       <polygon \n                         points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill=\"transparent\"\n-                        stroke=\"none\"\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n+                        strokeWidth=\"0.2\"\n                         style={{ cursor: 'pointer' }}\n                       />\n                       \n                       {/* í¬ì¸í„° */}\n@@ -1198,14 +1236,15 @@\n                 marginBottom: '30px',\n                 color: '#333'\n               }}>Target Muscles List</div>\n               \n-              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ */}\n+              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n               <div style={{ \n                 display: 'flex', \n                 justifyContent: 'center', \n                 alignItems: 'center',\n-                flex: 1\n+                flex: 1,\n+                position: 'relative'\n               }}>\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/back.png`} \n                   alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n@@ -1216,8 +1255,88 @@\n                     height: 'auto',\n                     objectFit: 'contain'\n                   }} \n                 />\n+                \n+                {/* í›„ë©´ ê·¼ìœ¡ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'auto'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"xMidYMid meet\"\n+                >\n+                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n+                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n+                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n+                      <polygon \n+                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n+                        strokeWidth=\"0.2\"\n+                        style={{ cursor: 'pointer' }}\n+                      />\n+                      \n+                      {/* í¬ì¸í„° */}\n+                      <circle \n+                        cx={muscle.point.x} \n+                        cy={muscle.point.y} \n+                        r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n+                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n+                      />\n+                      \n+                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n+                      {selectedPoints.has(muscle.id) && (\n+                        <polyline \n+                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"yellow\" \n+                          strokeWidth=\"0.8\" \n+                          fill=\"none\"\n+                        />\n+                      )}\n+                      \n+                      {/* ë©”ì¸ êº¾ì€ì„  */}\n+                      <polyline \n+                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"black\" \n+                        strokeWidth=\"0.3\" \n+                        fill=\"none\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n+                      <rect \n+                        x={muscle.textBox.x} \n+                        y={muscle.textBox.y} \n+                        width={muscle.textBox.width} \n+                        height={muscle.textBox.height} \n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        strokeWidth=\"0.1\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x={muscle.text.x} \n+                        y={muscle.text.y} \n+                        fontSize=\"2\" \n+                        fill=\"black\"\n+                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n+                        textAnchor=\"middle\"\n+                        dominantBaseline=\"middle\"\n+                      >\n+                        {muscle.name}\n+                      </text>\n+                    </g>\n+                  ))}\n+                </svg>\n               </div>\n             </div>\n           )}\n         </PrescriptionContainer>\n"
                },
                {
                    "date": 1764590200066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n+import { frontMuscles, backMuscles, MusclePoint } from '../constants/muscleCoordinates';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -467,77 +468,13 @@\n \n   // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n   const [pagePoints, setPagePoints] = useState<{\n     [pageNum: number]: {\n-      [pointId: string]: {\n-        id: string;\n-        name: string;\n-        point: { x: number, y: number };\n-        linePoints: { x: number, y: number }[];  // êº¾ì€ì„  ì¢Œí‘œë“¤\n-        areaPoints: { x: number, y: number }[];  // í´ë¦­ ë²”ìœ„ (ë‹¤ê°í˜•)\n-        textBox: { x: number, y: number, width: number, height: number };\n-        text: { x: number, y: number };\n-      }\n+      [pointId: string]: MusclePoint\n     }\n   }>({\n-    2: {   // ë‘ ë²ˆì§¸ í˜ì´ì§€ (ê¸°ë³¸ ì˜ˆì‹œë“¤)\n-      'muscle_1': {\n-        id: 'muscle_1',\n-        name: 'ì‚¼ê°ê·¼',\n-        point: { x: 30, y: 25 },\n-        linePoints: [\n-          { x: 30, y: 25 },\n-          { x: 25, y: 20 },\n-          { x: 10, y: 15 }\n-        ],\n-        areaPoints: [\n-          { x: 25, y: 20 },\n-          { x: 35, y: 20 },\n-          { x: 35, y: 30 },\n-          { x: 25, y: 30 }\n-        ],\n-        textBox: { x: 2, y: 11, width: 12, height: 4 },\n-        text: { x: 8, y: 13.5 }\n-      }\n-    },\n-    3: {   // ì„¸ ë²ˆì§¸ í˜ì´ì§€ (í›„ë©´ ê·¼ìœ¡ ì˜ˆì‹œ)\n-      'muscle_back_1': {\n-        id: 'muscle_back_1',\n-        name: 'ìŠ¹ëª¨ê·¼',\n-        point: { x: 50, y: 20 },\n-        linePoints: [\n-          { x: 50, y: 20 },\n-          { x: 45, y: 15 },\n-          { x: 30, y: 10 }\n-        ],\n-        areaPoints: [\n-          { x: 45, y: 15 },\n-          { x: 55, y: 15 },\n-          { x: 55, y: 25 },\n-          { x: 45, y: 25 }\n-        ],\n-        textBox: { x: 22, y: 6, width: 12, height: 4 },\n-        text: { x: 28, y: 8.5 }\n-      },\n-      'muscle_back_2': {\n-        id: 'muscle_back_2',\n-        name: 'ê´‘ë°°ê·¼',\n-        point: { x: 40, y: 35 },\n-        linePoints: [\n-          { x: 40, y: 35 },\n-          { x: 35, y: 30 },\n-          { x: 20, y: 25 }\n-        ],\n-        areaPoints: [\n-          { x: 35, y: 30 },\n-          { x: 45, y: 30 },\n-          { x: 45, y: 40 },\n-          { x: 35, y: 40 }\n-        ],\n-        textBox: { x: 12, y: 21, width: 12, height: 4 },\n-        text: { x: 18, y: 23.5 }\n-      }\n-    }\n+    2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n+    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n   });\n \n   // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n   const [newPoint, setNewPoint] = useState({\n"
                },
                {
                    "date": 1764590583290,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -233,29 +233,10 @@\n   box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n   z-index: 1000;\n `;\n \n-const CoordinateToggleBtn = styled.button<{ $editorOpen?: boolean }>`\n-  position: fixed;\n-  left: ${props => props.$editorOpen ? '685px' : '325px'};\n-  top: 20px;\n-  width: 40px;\n-  height: 40px;\n-  background: ${AppColors.primary};\n-  color: white;\n-  border: none;\n-  border-radius: 50%;\n-  font-size: 18px;\n-  cursor: pointer;\n-  transition: all 0.3s ease;\n-  z-index: 1001;\n-  \n-  &:hover {\n-    background: ${AppColors.secondary};\n-    transform: scale(1.1);\n-  }\n-`;\n \n+\n const InputGroup = styled.div`\n   margin-bottom: 15px;\n `;\n \n@@ -284,9 +265,9 @@\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(2); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (2í˜ì´ì§€ë¡œ ì‹œì‘)\n+  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (1í˜ì´ì§€ë¡œ ì‹œì‘)\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n@@ -992,21 +973,20 @@\n         \n         <Divider />\n         \n         <PageButton \n+          active={currentPage === 1}\n+          onClick={() => setCurrentPage(1)}\n+        >\n+          1\n+        </PageButton>\n+        \n+        <PageButton \n           active={currentPage === 2}\n           onClick={() => setCurrentPage(2)}\n         >\n           2\n         </PageButton>\n-\n-        {/* ì¢Œí‘œ í¸ì§‘ê¸° í† ê¸€ ë²„íŠ¼ì„ í˜ì´ì§€ ë²„íŠ¼ ì‚¬ì´ì— ìœ„ì¹˜ */}\n-        <CoordinateToggleBtn \n-          $editorOpen={isCoordinateEditorOpen}\n-          onClick={() => setIsCoordinateEditorOpen(!isCoordinateEditorOpen)}\n-        >\n-          +\n-        </CoordinateToggleBtn>\n         \n         <PageButton \n           active={currentPage === 3}\n           onClick={() => setCurrentPage(3)}\n@@ -1018,8 +998,94 @@\n       <PrescriptionPanel>\n \n \n         <PrescriptionContainer ref={prescriptionRef}>\n+          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n+          {currentPage === 1 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>SPINE Mapping Chart</div>\n+              \n+              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1,\n+                margin: '20px 0'\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n+                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n+                  style={{ \n+                    maxHeight: '100%',\n+                    maxWidth: '300px',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+              </div>\n+\n+              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n+              <div style={{\n+                marginTop: 'auto',\n+                padding: '20px 0'\n+              }}>\n+                <div style={{\n+                  fontSize: '18px',\n+                  fontWeight: 'bold',\n+                  marginBottom: '15px',\n+                  textAlign: 'center'\n+                }}>ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n+                <div style={{\n+                  border: '2px solid #333',\n+                  minHeight: '80px',\n+                  padding: '15px',\n+                  fontSize: '14px',\n+                  lineHeight: '1.6'\n+                }}>\n+                  {/* í˜¸ì†Œ ì¦ìƒ ë‚´ìš©ì´ ë“¤ì–´ê°ˆ ê³µê°„ */}\n+                  <textarea\n+                    style={{\n+                      width: '100%',\n+                      height: '60px',\n+                      border: 'none',\n+                      outline: 'none',\n+                      resize: 'none',\n+                      fontSize: '14px',\n+                      background: 'transparent'\n+                    }}\n+                    placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”...\"\n+                    value={formData.painHistory}\n+                    onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+                    readOnly={isReadOnly}\n+                  />\n+                </div>\n+              </div>\n+            </div>\n+          )}\n+          \n           {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n           {currentPage === 2 && (\n             <div style={{\n               display: 'flex',\n"
                },
                {
                    "date": 1764590638397,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -287,8 +287,27 @@\n     } as ExercisePrescriptionMedicalHistory,\n     painHistory: ''\n   });\n \n+  // ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value\n+    }));\n+  };\n+\n+  // ì²´í¬ë°•ìŠ¤ ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleCheckboxChange = (field: string, checked: boolean) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      medicalHistory: {\n+        ...prev.medicalHistory,\n+        [field]: checked\n+      }\n+    }));\n+  };\n+\n   // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n   useEffect(() => {\n     const loadMembers = async () => {\n       try {\n"
                },
                {
                    "date": 1764672788927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -266,9 +266,9 @@\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n   const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (1í˜ì´ì§€ë¡œ ì‹œì‘)\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n   const [formData, setFormData] = useState({\n"
                },
                {
                    "date": 1764672859950,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -269,8 +269,10 @@\n   const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (1í˜ì´ì§€ë¡œ ì‹œì‘)\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n+  const [showCoords, setShowCoords] = useState(false);\n   const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n@@ -1130,15 +1132,19 @@\n                 color: '#333'\n               }}>Target Muscles List</div>\n               \n               {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                position: 'relative'\n-              }}>\n+              <div \n+                style={{ \n+                  display: 'flex', \n+                  justifyContent: 'center', \n+                  alignItems: 'center',\n+                  flex: 1,\n+                  position: 'relative'\n+                }}\n+                onMouseMove={handleMouseMove}\n+                onMouseLeave={handleMouseLeave}\n+              >\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/front.png`} \n                   alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n                   style={{ \n"
                },
                {
                    "date": 1764672894445,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1395 @@\n+import React, { useEffect, useState, useCallback, useRef } from 'react';\n+import { useSearchParams } from 'react-router-dom';\n+import styled from 'styled-components';\n+import html2canvas from 'html2canvas';\n+import jsPDF from 'jspdf';\n+import { AppColors } from '../styles/colors';\n+import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n+import { frontMuscles, backMuscles, MusclePoint } from '../constants/muscleCoordinates';\n+\n+const PageContainer = styled.div`\n+  min-height: 100vh;\n+  display: flex;\n+  background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n+`;\n+\n+const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n+  width: ${props => props.$collapsed ? '0px' : '300px'};\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: ${props => props.$collapsed ? '0' : '20px'};\n+  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n+  transition: all 0.3s ease;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n+  width: 55px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 10px 2px;\n+  display: ${props => props.$hidden ? 'none' : 'flex'};\n+  flex-direction: column;\n+  gap: 6px;\n+  align-items: stretch;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n+  width: 100%;\n+  height: 36px;\n+  border: none;\n+  border-radius: 6px;\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n+  font-size: 16px;\n+  font-weight: 600;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+  }\n+`;\n+\n+const PageButton = styled.button<{ active?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.active ? AppColors.primary : 'white'};\n+  color: ${props => props.active ? 'white' : '#333'};\n+  font-size: 14px;\n+  font-weight: ${props => props.active ? 'bold' : 'normal'};\n+  cursor: pointer;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n+  }\n+`;\n+\n+const Divider = styled.div`\n+  height: 1px;\n+  background: ${AppColors.borderLight};\n+  margin: 10px 0;\n+`;\n+\n+const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n+  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  font-size: 14px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${AppColors.primary};\n+    color: ${AppColors.onPrimary};\n+  }\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  box-sizing: border-box;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  width: 210mm;\n+  height: 297mm;\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  box-sizing: border-box;\n+  overflow: hidden;\n+  \n+  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n+  scrollbar-width: none; /* Firefox */\n+  -ms-overflow-style: none; /* IE/Edge */\n+  \n+  &::-webkit-scrollbar {\n+    display: none; /* Chrome, Safari, Opera */\n+  }\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20mm;\n+    margin: 0;\n+    max-width: none;\n+    width: 210mm;\n+    height: 297mm;\n+    overflow: visible;\n+  }\n+  \n+  @media screen and (max-width: 900px) {\n+    width: 100%;\n+    height: auto;\n+    min-height: calc(100vh - 40px);\n+  }\n+`;\n+\n+\n+\n+\n+\n+const CoordinateEditor = styled.div<{ $open?: boolean }>`\n+  position: fixed;\n+  left: ${props => props.$open ? '320px' : '-400px'};\n+  top: 20px;\n+  width: 350px;\n+  height: calc(100vh - 40px);\n+  background: white;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  padding: 20px;\n+  overflow-y: auto;\n+  transition: left 0.3s ease;\n+  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n+  z-index: 1000;\n+`;\n+\n+\n+\n+const InputGroup = styled.div`\n+  margin-bottom: 15px;\n+`;\n+\n+const InputLabel = styled.label`\n+  display: block;\n+  margin-bottom: 5px;\n+  font-size: 12px;\n+  font-weight: bold;\n+  color: ${AppColors.onSurface};\n+`;\n+\n+const CoordinateInput = styled.input`\n+  width: 60px;\n+  padding: 4px 6px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 3px;\n+  font-size: 12px;\n+  margin-right: 5px;\n+`;\n+\n+\n+\n+const ExercisePrescriptionPage: React.FC = () => {\n+  const [searchParams] = useSearchParams();\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n+  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (1í˜ì´ì§€ë¡œ ì‹œì‘)\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n+  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n+  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n+  const [showCoords, setShowCoords] = useState(false);\n+  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n+  const [showCoords, setShowCoords] = useState(false);\n+  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: ''\n+  });\n+\n+  // ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value\n+    }));\n+  };\n+\n+  // ì²´í¬ë°•ìŠ¤ ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleCheckboxChange = (field: string, checked: boolean) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      medicalHistory: {\n+        ...prev.medicalHistory,\n+        [field]: checked\n+      }\n+    }));\n+  };\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n+\n+    loadMembers();\n+  }, []);\n+\n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+\n+          });\n+          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n+  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n+    try {\n+      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+      if (prescription) {\n+        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n+        const member = members.find(m => m.id === prescription.memberId);\n+        if (member) {\n+          setSelectedMember(member);\n+        }\n+        \n+        setCurrentPrescription(prescription);\n+        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n+        setFormData({\n+          height: prescription.height,\n+          weight: prescription.weight,\n+          footSize: prescription.footSize,\n+          medications: prescription.medications,\n+          medicalHistory: prescription.medicalHistory,\n+          painHistory: prescription.painHistory,\n+\n+        });\n+        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n+      }\n+    } catch (error) {\n+      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [members]);\n+\n+  useEffect(() => {\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    const prescriptionIdParam = searchParams.get('prescriptionId');\n+    \n+    if (prescriptionIdParam) {\n+      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+      loadSpecificPrescription(prescriptionIdParam);\n+    } else if (userIdParam && members.length > 0) {\n+      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n+      const member = members.find(m => m.id === userIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n+    }\n+  }, [searchParams, members, loadSpecificPrescription]);\n+\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬\n+  const handleMouseMove = (event: React.MouseEvent) => {\n+    const target = event.currentTarget as HTMLElement;\n+    const rect = target.getBoundingClientRect();\n+    const x = ((event.clientX - rect.left) / rect.width) * 100;\n+    const y = ((event.clientY - rect.top) / rect.height) * 100;\n+\n+    setCurrentCoords({\n+      x: Math.round(x * 100) / 100,\n+      y: Math.round(y * 100) / 100\n+    });\n+    setShowCoords(true);\n+  };\n+\n+  const handleMouseLeave = () => {\n+    setShowCoords(false);\n+    setCurrentCoords(null);\n+  };\n+\n+  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n+  const handlePointClick = (pointId: string) => {\n+    setSelectedPoints(prev => {\n+      const newSelected = new Set(prev);\n+      if (newSelected.has(pointId)) {\n+        newSelected.delete(pointId);\n+      } else {\n+        newSelected.add(pointId);\n+      }\n+      return newSelected;\n+    });\n+  };\n+\n+  // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n+  const [pagePoints, setPagePoints] = useState<{\n+    [pageNum: number]: {\n+      [pointId: string]: MusclePoint\n+    }\n+  }>({\n+    2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n+    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n+  });\n+\n+  // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n+  const [newPoint, setNewPoint] = useState({\n+    name: '',\n+    pointX: 0,\n+    pointY: 0,\n+    linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 2ì \n+    areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 3ì \n+    textBoxX: 0,\n+    textBoxY: 0,\n+    textBoxWidth: 10,\n+    textBoxHeight: 4\n+  });\n+\n+  const handleSave = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: { front: [], spine: [], back: [] },\n+        signatureData: '',\n+        signedAt: null,\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n+        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n+      };\n+\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+\n+\n+\n+  const handleShare = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n+    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n+    \n+    try {\n+      if (navigator.share) {\n+        await navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: currentUrl,\n+        });\n+      } else {\n+        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      }\n+    } catch (error) {\n+      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n+      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n+      try {\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      } catch {\n+        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n+      }\n+    }\n+  };\n+\n+  const handlePrint = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      // PDF ìƒì„±\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n+      const originalPage = currentPage;\n+      \n+      for (let page = 1; page <= 3; page++) {\n+        if (page > 1) {\n+          pdf.addPage();\n+        }\n+\n+        // í˜ì´ì§€ ë³€ê²½\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n+        if (!prescriptionRef.current) continue;\n+        \n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+\n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210;\n+        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+      }\n+\n+      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n+      setCurrentPage(originalPage);\n+\n+      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n+      const pdfBlob = pdf.output('blob');\n+      const pdfUrl = URL.createObjectURL(pdfBlob);\n+      \n+      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n+      const printWindow = window.open(pdfUrl, '_blank');\n+      if (printWindow) {\n+        printWindow.onload = () => {\n+          setTimeout(() => {\n+            printWindow.print();\n+          }, 1000);\n+        };\n+      }\n+    } catch (error) {\n+      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n+      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  const handleDownloadPDF = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n+      for (let page = 2; page <= 3; page++) {\n+        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n+        const originalPage = currentPage;\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        if (!prescriptionRef.current) continue;\n+        \n+        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+        \n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n+        const imgHeight = 297; // A4 ë†’ì´ (mm)\n+        \n+        // ì²« ë²ˆì§¸ PDF í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n+        if (page > 2) {\n+          pdf.addPage();\n+        }\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+        \n+        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n+        setCurrentPage(originalPage);\n+      }\n+      \n+      // PDF ë‹¤ìš´ë¡œë“œ\n+      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n+      pdf.save(fileName);\n+      \n+    } catch (error) {\n+      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n+      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  return (\n+    <PageContainer>\n+      {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n+      <CoordinateEditor $open={isCoordinateEditorOpen}>\n+        <h3>í˜ì´ì§€ {currentPage} - ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€</h3>\n+        \n+        <InputGroup>\n+          <InputLabel>ê·¼ìœ¡ ì´ë¦„</InputLabel>\n+          <CoordinateInput \n+            type=\"text\" \n+            placeholder=\"ì˜ˆ: ì‚¼ê°ê·¼\" \n+            value={newPoint.name}\n+            onChange={(e) => setNewPoint({ ...newPoint, name: e.target.value })}\n+            style={{ width: '100%' }}\n+          />\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"X\" \n+            value={newPoint.pointX}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n+          />\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"Y\" \n+            value={newPoint.pointY}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n+          />\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n+          {newPoint.linePoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={point.x}\n+                onChange={(e) => {\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={point.y}\n+                onChange={(e) => {\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                }}\n+              />\n+              {index >= 2 && (\n+                <button \n+                  onClick={() => {\n+                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n+            </div>\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ì„  ì  ì¶”ê°€\n+          </button>\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n+          {newPoint.areaPoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={point.x}\n+                onChange={(e) => {\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={point.y}\n+                onChange={(e) => {\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                }}\n+              />\n+              {index >= 3 && (\n+                <button \n+                  onClick={() => {\n+                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n+            </div>\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ë©´ ì  ì¶”ê°€\n+          </button>\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n+          <div>\n+            <span style={{ fontSize: '11px' }}>X: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxX}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n+            />\n+            <span style={{ fontSize: '11px' }}>Y: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxY}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n+            />\n+          </div>\n+          <div style={{ marginTop: '5px' }}>\n+            <span style={{ fontSize: '11px' }}>W: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxWidth}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n+            />\n+            <span style={{ fontSize: '11px' }}>H: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxHeight}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n+            />\n+          </div>\n+        </InputGroup>\n+\n+        <button \n+          onClick={() => {\n+            if (newPoint.name.trim()) {\n+              const newId = `muscle_${Date.now()}`;\n+              const newPagePoints = { ...pagePoints };\n+              \n+              newPagePoints[currentPage] = {\n+                ...newPagePoints[currentPage],\n+                [newId]: {\n+                  id: newId,\n+                  name: newPoint.name,\n+                  point: { x: newPoint.pointX, y: newPoint.pointY },\n+                  linePoints: newPoint.linePoints,\n+                  areaPoints: newPoint.areaPoints,\n+                  textBox: { \n+                    x: newPoint.textBoxX, \n+                    y: newPoint.textBoxY, \n+                    width: newPoint.textBoxWidth, \n+                    height: newPoint.textBoxHeight \n+                  },\n+                  text: { \n+                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n+                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n+                  }\n+                }\n+              };\n+              \n+              setPagePoints(newPagePoints);\n+              \n+              // ì…ë ¥ í¼ ì´ˆê¸°í™”\n+              setNewPoint({\n+                name: '',\n+                pointX: 0,\n+                pointY: 0,\n+                linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }],\n+                areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }],\n+                textBoxX: 0,\n+                textBoxY: 0,\n+                textBoxWidth: 10,\n+                textBoxHeight: 4\n+              });\n+            } else {\n+              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n+            }\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '10px',\n+            background: AppColors.primary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '15px'\n+          }}\n+        >\n+          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n+        </button>\n+\n+        <button \n+          onClick={() => {\n+            console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '8px',\n+            background: AppColors.secondary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '10px'\n+          }}\n+        >\n+          ì½˜ì†”ì— í˜„ì¬ í˜ì´ì§€ ë°ì´í„° ì¶œë ¥\n+        </button>\n+      </CoordinateEditor>\n+\n+      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n+        {!isSearchPanelCollapsed && (\n+          <>\n+            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birth}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+          </MemberList>\n+          </>\n+        )}\n+      </SearchPanel>      <ButtonPanel>\n+        <ToggleButton \n+          $collapsed={isSearchPanelCollapsed}\n+          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n+          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n+        >\n+          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n+        </ToggleButton>\n+        \n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={isReadOnly}\n+        >\n+          ğŸ’¾\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          ğŸ“¤\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n+          ğŸ–¨ï¸\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n+          ğŸ“\n+        </ActionButton>\n+        \n+        <Divider />\n+        \n+        <PageButton \n+          active={currentPage === 1}\n+          onClick={() => setCurrentPage(1)}\n+        >\n+          1\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 2}\n+          onClick={() => setCurrentPage(2)}\n+        >\n+          2\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 3}\n+          onClick={() => setCurrentPage(3)}\n+        >\n+          3\n+        </PageButton>\n+      </ButtonPanel>\n+\n+      <PrescriptionPanel>\n+\n+\n+        <PrescriptionContainer ref={prescriptionRef}>\n+          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n+          {currentPage === 1 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>SPINE Mapping Chart</div>\n+              \n+              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1,\n+                margin: '20px 0'\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n+                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n+                  style={{ \n+                    maxHeight: '100%',\n+                    maxWidth: '300px',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+              </div>\n+\n+              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n+              <div style={{\n+                marginTop: 'auto',\n+                padding: '20px 0'\n+              }}>\n+                <div style={{\n+                  fontSize: '18px',\n+                  fontWeight: 'bold',\n+                  marginBottom: '15px',\n+                  textAlign: 'center'\n+                }}>ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n+                <div style={{\n+                  border: '2px solid #333',\n+                  minHeight: '80px',\n+                  padding: '15px',\n+                  fontSize: '14px',\n+                  lineHeight: '1.6'\n+                }}>\n+                  {/* í˜¸ì†Œ ì¦ìƒ ë‚´ìš©ì´ ë“¤ì–´ê°ˆ ê³µê°„ */}\n+                  <textarea\n+                    style={{\n+                      width: '100%',\n+                      height: '60px',\n+                      border: 'none',\n+                      outline: 'none',\n+                      resize: 'none',\n+                      fontSize: '14px',\n+                      background: 'transparent'\n+                    }}\n+                    placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”...\"\n+                    value={formData.painHistory}\n+                    onChange={(e) => handleInputChange('painHistory', e.target.value)}\n+                    readOnly={isReadOnly}\n+                  />\n+                </div>\n+              </div>\n+            </div>\n+          )}\n+          \n+          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n+          {currentPage === 2 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n+              <div \n+                style={{ \n+                  display: 'flex', \n+                  justifyContent: 'center', \n+                  alignItems: 'center',\n+                  flex: 1,\n+                  position: 'relative'\n+                }}\n+                onMouseMove={handleMouseMove}\n+                onMouseLeave={handleMouseLeave}\n+              >\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n+                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+                \n+                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'auto'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"xMidYMid meet\"\n+                >\n+                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n+                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n+                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n+                      <polygon \n+                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n+                        strokeWidth=\"0.2\"\n+                        style={{ cursor: 'pointer' }}\n+                      />\n+                      \n+                      {/* í¬ì¸í„° */}\n+                      <circle \n+                        cx={muscle.point.x} \n+                        cy={muscle.point.y} \n+                        r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n+                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n+                      />\n+                      \n+                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n+                      {selectedPoints.has(muscle.id) && (\n+                        <polyline \n+                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"yellow\" \n+                          strokeWidth=\"0.8\" \n+                          fill=\"none\"\n+                        />\n+                      )}\n+                      \n+                      {/* ë©”ì¸ êº¾ì€ì„  */}\n+                      <polyline \n+                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"black\" \n+                        strokeWidth=\"0.3\" \n+                        fill=\"none\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n+                      <rect \n+                        x={muscle.textBox.x} \n+                        y={muscle.textBox.y} \n+                        width={muscle.textBox.width} \n+                        height={muscle.textBox.height} \n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        strokeWidth=\"0.1\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x={muscle.text.x} \n+                        y={muscle.text.y} \n+                        fontSize=\"2\" \n+                        fill=\"black\"\n+                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n+                        textAnchor=\"middle\"\n+                        dominantBaseline=\"middle\"\n+                      >\n+                        {muscle.name}\n+                      </text>\n+                    </g>\n+                  ))}\n+                </svg>\n+              </div>\n+            </div>\n+          )}\n+\n+          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n+          {currentPage === 3 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1,\n+                position: 'relative'\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n+                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+                \n+                {/* í›„ë©´ ê·¼ìœ¡ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'auto'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"xMidYMid meet\"\n+                >\n+                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n+                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n+                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n+                      <polygon \n+                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n+                        strokeWidth=\"0.2\"\n+                        style={{ cursor: 'pointer' }}\n+                      />\n+                      \n+                      {/* í¬ì¸í„° */}\n+                      <circle \n+                        cx={muscle.point.x} \n+                        cy={muscle.point.y} \n+                        r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n+                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n+                      />\n+                      \n+                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n+                      {selectedPoints.has(muscle.id) && (\n+                        <polyline \n+                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"yellow\" \n+                          strokeWidth=\"0.8\" \n+                          fill=\"none\"\n+                        />\n+                      )}\n+                      \n+                      {/* ë©”ì¸ êº¾ì€ì„  */}\n+                      <polyline \n+                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"black\" \n+                        strokeWidth=\"0.3\" \n+                        fill=\"none\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n+                      <rect \n+                        x={muscle.textBox.x} \n+                        y={muscle.textBox.y} \n+                        width={muscle.textBox.width} \n+                        height={muscle.textBox.height} \n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        strokeWidth=\"0.1\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x={muscle.text.x} \n+                        y={muscle.text.y} \n+                        fontSize=\"2\" \n+                        fill=\"black\"\n+                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n+                        textAnchor=\"middle\"\n+                        dominantBaseline=\"middle\"\n+                      >\n+                        {muscle.name}\n+                      </text>\n+                    </g>\n+                  ))}\n+                </svg>\n+              </div>\n+            </div>\n+          )}\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n+    </PageContainer>\n+  );\n+};\n+\n+export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764672907771,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1187,137 +1187,32 @@\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"xMidYMid meet\"\n                 >\n-                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n-                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n-                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n-                      <polygon \n-                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n-                        strokeWidth=\"0.2\"\n-                        style={{ cursor: 'pointer' }}\n-                      />\n-                      \n-                      {/* í¬ì¸í„° */}\n-                      <circle \n-                        cx={muscle.point.x} \n-                        cy={muscle.point.y} \n-                        r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n-                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n-                      />\n-                      \n-                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n-                      {selectedPoints.has(muscle.id) && (\n-                        <polyline \n-                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          stroke=\"yellow\" \n-                          strokeWidth=\"0.8\" \n-                          fill=\"none\"\n-                        />\n-                      )}\n-                      \n-                      {/* ë©”ì¸ êº¾ì€ì„  */}\n-                      <polyline \n-                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"black\" \n-                        strokeWidth=\"0.3\" \n-                        fill=\"none\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n+                  {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n+                  {showCoords && currentCoords && currentPage === 2 && (\n+                    <g>\n                       <rect \n-                        x={muscle.textBox.x} \n-                        y={muscle.textBox.y} \n-                        width={muscle.textBox.width} \n-                        height={muscle.textBox.height} \n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n-                        strokeWidth=\"0.1\"\n+                        x={currentCoords.x - 8} \n+                        y={currentCoords.y - 4} \n+                        width=\"16\" \n+                        height=\"3\" \n+                        fill=\"rgba(0, 0, 0, 0.8)\" \n+                        rx=\"0.5\"\n                       />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ */}\n                       <text \n-                        x={muscle.text.x} \n-                        y={muscle.text.y} \n-                        fontSize=\"2\" \n-                        fill=\"black\"\n-                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n-                        textAnchor=\"middle\"\n-                        dominantBaseline=\"middle\"\n+                        x={currentCoords.x} \n+                        y={currentCoords.y - 1} \n+                        textAnchor=\"middle\" \n+                        fontSize=\"1.2\" \n+                        fill=\"white\" \n+                        fontWeight=\"bold\"\n                       >\n-                        {muscle.name}\n+                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n                       </text>\n                     </g>\n-                  ))}\n-                </svg>\n-              </div>\n-            </div>\n-          )}\n-\n-          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n-          {currentPage === 3 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                position: 'relative'\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n-                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-                \n-                {/* í›„ë©´ ê·¼ìœ¡ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n-                <svg \n-                  style={{\n-                    position: 'absolute',\n-                    top: 0,\n-                    left: 0,\n-                    width: '100%',\n-                    height: '100%',\n-                    pointerEvents: 'auto'\n-                  }}\n-                  viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"xMidYMid meet\"\n-                >\n+                  )}\n+                  \n                   {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n                   {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n                     <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n                       {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n@@ -1385,1256 +1280,9 @@\n                 </svg>\n               </div>\n             </div>\n           )}\n-        </PrescriptionContainer>\n-      </PrescriptionPanel>\n-    </PageContainer>\n-  );\n-};\n \n-export default ExercisePrescriptionPage;\n-import React, { useEffect, useState, useCallback, useRef } from 'react';\n-import { useSearchParams } from 'react-router-dom';\n-import styled from 'styled-components';\n-import html2canvas from 'html2canvas';\n-import jsPDF from 'jspdf';\n-import { AppColors } from '../styles/colors';\n-import { AppTextStyles } from '../styles/textStyles';\n-import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n-import { frontMuscles, backMuscles, MusclePoint } from '../constants/muscleCoordinates';\n-\n-const PageContainer = styled.div`\n-  min-height: 100vh;\n-  display: flex;\n-  background: ${AppColors.background};\n-  \n-  @media print {\n-    display: block;\n-    background: white;\n-  }\n-`;\n-\n-const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n-  width: ${props => props.$collapsed ? '0px' : '300px'};\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: ${props => props.$collapsed ? '0' : '20px'};\n-  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n-  transition: all 0.3s ease;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n-  width: 55px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 10px 2px;\n-  display: ${props => props.$hidden ? 'none' : 'flex'};\n-  flex-direction: column;\n-  gap: 6px;\n-  align-items: stretch;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 100%;\n-  height: 36px;\n-  border: none;\n-  border-radius: 6px;\n-  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n-  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: 16px;\n-  font-weight: 600;\n-  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-  }\n-`;\n-\n-const PageButton = styled.button<{ active?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.active ? AppColors.primary : 'white'};\n-  color: ${props => props.active ? 'white' : '#333'};\n-  font-size: 14px;\n-  font-weight: ${props => props.active ? 'bold' : 'normal'};\n-  cursor: pointer;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n-  }\n-`;\n-\n-const Divider = styled.div`\n-  height: 1px;\n-  background: ${AppColors.borderLight};\n-  margin: 10px 0;\n-`;\n-\n-const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n-  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n-  cursor: pointer;\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  font-size: 14px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${AppColors.primary};\n-    color: ${AppColors.onPrimary};\n-  }\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-\n-\n-const SearchTitle = styled.h2`\n-  font-size: ${AppTextStyles.title2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SearchInput = styled.input`\n-  width: 100%;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  margin-bottom: 16px;\n-  box-sizing: border-box;\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const MemberList = styled.div`\n-  max-height: 400px;\n-  overflow-y: auto;\n-`;\n-\n-const MemberItem = styled.div<{ selected?: boolean }>`\n-  padding: 12px;\n-  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 8px;\n-  margin-bottom: 8px;\n-  cursor: pointer;\n-  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n-  \n-  &:hover {\n-    background: ${AppColors.primary}20;\n-  }\n-`;\n-\n-const MemberName = styled.div`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 4px;\n-`;\n-\n-const MemberInfo = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const PrescriptionPanel = styled.div`\n-  flex: 1;\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    padding: 0;\n-    overflow: visible;\n-  }\n-`;\n-\n-const PrescriptionContainer = styled.div`\n-  width: 210mm;\n-  height: 297mm;\n-  max-width: 800px;\n-  margin: 0 auto;\n-  background: white;\n-  padding: 40px;\n-  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  box-sizing: border-box;\n-  overflow: hidden;\n-  \n-  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n-  scrollbar-width: none; /* Firefox */\n-  -ms-overflow-style: none; /* IE/Edge */\n-  \n-  &::-webkit-scrollbar {\n-    display: none; /* Chrome, Safari, Opera */\n-  }\n-  \n-  @media print {\n-    box-shadow: none;\n-    padding: 20mm;\n-    margin: 0;\n-    max-width: none;\n-    width: 210mm;\n-    height: 297mm;\n-    overflow: visible;\n-  }\n-  \n-  @media screen and (max-width: 900px) {\n-    width: 100%;\n-    height: auto;\n-    min-height: calc(100vh - 40px);\n-  }\n-`;\n-\n-\n-\n-\n-\n-const CoordinateEditor = styled.div<{ $open?: boolean }>`\n-  position: fixed;\n-  left: ${props => props.$open ? '320px' : '-400px'};\n-  top: 20px;\n-  width: 350px;\n-  height: calc(100vh - 40px);\n-  background: white;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  padding: 20px;\n-  overflow-y: auto;\n-  transition: left 0.3s ease;\n-  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n-  z-index: 1000;\n-`;\n-\n-\n-\n-const InputGroup = styled.div`\n-  margin-bottom: 15px;\n-`;\n-\n-const InputLabel = styled.label`\n-  display: block;\n-  margin-bottom: 5px;\n-  font-size: 12px;\n-  font-weight: bold;\n-  color: ${AppColors.onSurface};\n-`;\n-\n-const CoordinateInput = styled.input`\n-  width: 60px;\n-  padding: 4px 6px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 3px;\n-  font-size: 12px;\n-  margin-right: 5px;\n-`;\n-\n-\n-\n-const ExercisePrescriptionPage: React.FC = () => {\n-  const [searchParams] = useSearchParams();\n-  const [searchTerm, setSearchTerm] = useState('');\n-  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n-  const [members, setMembers] = useState<Member[]>([]);\n-  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n-  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (1í˜ì´ì§€ë¡œ ì‹œì‘)\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n-  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n-  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n-  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n-  const [showCoords, setShowCoords] = useState(false);\n-  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n-  const [formData, setFormData] = useState({\n-    height: '',\n-    weight: '',\n-    footSize: '',\n-    medications: '',\n-    medicalHistory: {\n-      musculoskeletal: false,\n-      cardiovascular: false,\n-      diabetes: false,\n-      osteoporosis: false,\n-      thyroid: false,\n-      varicose: false,\n-      arthritis: false,\n-    } as ExercisePrescriptionMedicalHistory,\n-    painHistory: ''\n-  });\n-\n-  // ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value\n-    }));\n-  };\n-\n-  // ì²´í¬ë°•ìŠ¤ ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleCheckboxChange = (field: string, checked: boolean) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      medicalHistory: {\n-        ...prev.medicalHistory,\n-        [field]: checked\n-      }\n-    }));\n-  };\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n-  useEffect(() => {\n-    const loadMembers = async () => {\n-      try {\n-        const allMembers = await dbManager.getAllMembers();\n-        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n-        const activeMembers = allMembers.filter(member => member.isActive);\n-        setMembers(activeMembers);\n-      } catch (error) {\n-        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-      }\n-    };\n-\n-    loadMembers();\n-  }, []);\n-\n-  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n-  useEffect(() => {\n-    const loadPrescription = async () => {\n-      if (!selectedMember) {\n-        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n-        setCurrentPrescription(null);\n-        setFormData({\n-          height: '',\n-          weight: '',\n-          footSize: '',\n-          medications: '',\n-          medicalHistory: {\n-            musculoskeletal: false,\n-            cardiovascular: false,\n-            diabetes: false,\n-            osteoporosis: false,\n-            thyroid: false,\n-            varicose: false,\n-            arthritis: false,\n-          },\n-          painHistory: '',\n-\n-        });\n-        return;\n-      }\n-\n-      try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n-        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n-        \n-        if (prescription) {\n-          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n-          setCurrentPrescription(prescription);\n-          setFormData({\n-            height: prescription.height,\n-            weight: prescription.weight,\n-            footSize: prescription.footSize,\n-            medications: prescription.medications,\n-            medicalHistory: prescription.medicalHistory,\n-            painHistory: prescription.painHistory,\n-\n-          });\n-          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n-        } else {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n-          setCurrentPrescription(null);\n-          setFormData({\n-            height: '',\n-            weight: '',\n-            footSize: '',\n-            medications: '',\n-            medicalHistory: {\n-              musculoskeletal: false,\n-              cardiovascular: false,\n-              diabetes: false,\n-              osteoporosis: false,\n-              thyroid: false,\n-              varicose: false,\n-              arthritis: false,\n-            },\n-            painHistory: '',\n-\n-          });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n-        }\n-      } catch (error) {\n-        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-      }\n-    };\n-\n-    loadPrescription();\n-  }, [selectedMember]);\n-\n-  const filteredMembers = members.filter(member =>\n-    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n-  );\n-\n-  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n-    try {\n-      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-      if (prescription) {\n-        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n-        const member = members.find(m => m.id === prescription.memberId);\n-        if (member) {\n-          setSelectedMember(member);\n-        }\n-        \n-        setCurrentPrescription(prescription);\n-        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n-        setFormData({\n-          height: prescription.height,\n-          weight: prescription.weight,\n-          footSize: prescription.footSize,\n-          medications: prescription.medications,\n-          medicalHistory: prescription.medicalHistory,\n-          painHistory: prescription.painHistory,\n-\n-        });\n-        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n-      }\n-    } catch (error) {\n-      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-    }\n-  }, [members]);\n-\n-  useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n-    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    const prescriptionIdParam = searchParams.get('prescriptionId');\n-    \n-    if (prescriptionIdParam) {\n-      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-      loadSpecificPrescription(prescriptionIdParam);\n-    } else if (userIdParam && members.length > 0) {\n-      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n-      const member = members.find(m => m.id === userIdParam);\n-      if (member) {\n-        setSelectedMember(member);\n-      }\n-    }\n-  }, [searchParams, members, loadSpecificPrescription]);\n-\n-  const handleMemberSelect = (member: Member) => {\n-    setSelectedMember(member);\n-  };\n-\n-\n-\n-  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n-  const handlePointClick = (pointId: string) => {\n-    setSelectedPoints(prev => {\n-      const newSelected = new Set(prev);\n-      if (newSelected.has(pointId)) {\n-        newSelected.delete(pointId);\n-      } else {\n-        newSelected.add(pointId);\n-      }\n-      return newSelected;\n-    });\n-  };\n-\n-  // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n-  const [pagePoints, setPagePoints] = useState<{\n-    [pageNum: number]: {\n-      [pointId: string]: MusclePoint\n-    }\n-  }>({\n-    2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n-    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n-  });\n-\n-  // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n-  const [newPoint, setNewPoint] = useState({\n-    name: '',\n-    pointX: 0,\n-    pointY: 0,\n-    linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 2ì \n-    areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 3ì \n-    textBoxX: 0,\n-    textBoxY: 0,\n-    textBoxWidth: 10,\n-    textBoxHeight: 4\n-  });\n-\n-  const handleSave = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const prescriptionData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        height: formData.height,\n-        weight: formData.weight,\n-        footSize: formData.footSize,\n-        medications: formData.medications,\n-        medicalHistory: formData.medicalHistory,\n-        painHistory: formData.painHistory,\n-        bodyImages: { front: [], spine: [], back: [] },\n-        signatureData: '',\n-        signedAt: null,\n-        isActive: true,\n-        prescriptionDate: new Date(),\n-        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n-        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n-      };\n-\n-      if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      } else {\n-        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      }\n-      \n-      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    } catch (error) {\n-      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-\n-\n-\n-  const handleShare = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n-    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n-    \n-    try {\n-      if (navigator.share) {\n-        await navigator.share({\n-          title: 'ìš´ë™ì²˜ë°©ì„œ',\n-          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: currentUrl,\n-        });\n-      } else {\n-        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      }\n-    } catch (error) {\n-      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n-      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n-      try {\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      } catch {\n-        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n-      }\n-    }\n-  };\n-\n-  const handlePrint = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      // PDF ìƒì„±\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      \n-      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n-      const originalPage = currentPage;\n-      \n-      for (let page = 1; page <= 3; page++) {\n-        if (page > 1) {\n-          pdf.addPage();\n-        }\n-\n-        // í˜ì´ì§€ ë³€ê²½\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n-        if (!prescriptionRef.current) continue;\n-        \n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-\n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210;\n-        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-      }\n-\n-      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n-      setCurrentPage(originalPage);\n-\n-      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n-      const pdfBlob = pdf.output('blob');\n-      const pdfUrl = URL.createObjectURL(pdfBlob);\n-      \n-      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n-      const printWindow = window.open(pdfUrl, '_blank');\n-      if (printWindow) {\n-        printWindow.onload = () => {\n-          setTimeout(() => {\n-            printWindow.print();\n-          }, 1000);\n-        };\n-      }\n-    } catch (error) {\n-      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n-      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  const handleDownloadPDF = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      \n-      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n-      for (let page = 2; page <= 3; page++) {\n-        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n-        const originalPage = currentPage;\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        if (!prescriptionRef.current) continue;\n-        \n-        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-        \n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n-        const imgHeight = 297; // A4 ë†’ì´ (mm)\n-        \n-        // ì²« ë²ˆì§¸ PDF í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n-        if (page > 2) {\n-          pdf.addPage();\n-        }\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-        \n-        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n-        setCurrentPage(originalPage);\n-      }\n-      \n-      // PDF ë‹¤ìš´ë¡œë“œ\n-      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n-      pdf.save(fileName);\n-      \n-    } catch (error) {\n-      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n-      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  return (\n-    <PageContainer>\n-      {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n-      <CoordinateEditor $open={isCoordinateEditorOpen}>\n-        <h3>í˜ì´ì§€ {currentPage} - ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€</h3>\n-        \n-        <InputGroup>\n-          <InputLabel>ê·¼ìœ¡ ì´ë¦„</InputLabel>\n-          <CoordinateInput \n-            type=\"text\" \n-            placeholder=\"ì˜ˆ: ì‚¼ê°ê·¼\" \n-            value={newPoint.name}\n-            onChange={(e) => setNewPoint({ ...newPoint, name: e.target.value })}\n-            style={{ width: '100%' }}\n-          />\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n-          <CoordinateInput \n-            type=\"number\" \n-            placeholder=\"X\" \n-            value={newPoint.pointX}\n-            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n-          />\n-          <CoordinateInput \n-            type=\"number\" \n-            placeholder=\"Y\" \n-            value={newPoint.pointY}\n-            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n-          />\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n-          {newPoint.linePoints.map((point, index) => (\n-            <div key={index} style={{ marginBottom: '5px' }}>\n-              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"X\" \n-                value={point.x}\n-                onChange={(e) => {\n-                  const newLinePoints = [...newPoint.linePoints];\n-                  newLinePoints[index].x = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                }}\n-              />\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"Y\" \n-                value={point.y}\n-                onChange={(e) => {\n-                  const newLinePoints = [...newPoint.linePoints];\n-                  newLinePoints[index].y = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                }}\n-              />\n-              {index >= 2 && (\n-                <button \n-                  onClick={() => {\n-                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n-                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                  }}\n-                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n-                >\n-                  ì‚­ì œ\n-                </button>\n-              )}\n-            </div>\n-          ))}\n-          <button \n-            onClick={() => {\n-              setNewPoint({ \n-                ...newPoint, \n-                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n-              });\n-            }}\n-            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n-          >\n-            ì„  ì  ì¶”ê°€\n-          </button>\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n-          {newPoint.areaPoints.map((point, index) => (\n-            <div key={index} style={{ marginBottom: '5px' }}>\n-              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"X\" \n-                value={point.x}\n-                onChange={(e) => {\n-                  const newAreaPoints = [...newPoint.areaPoints];\n-                  newAreaPoints[index].x = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                }}\n-              />\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"Y\" \n-                value={point.y}\n-                onChange={(e) => {\n-                  const newAreaPoints = [...newPoint.areaPoints];\n-                  newAreaPoints[index].y = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                }}\n-              />\n-              {index >= 3 && (\n-                <button \n-                  onClick={() => {\n-                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n-                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                  }}\n-                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n-                >\n-                  ì‚­ì œ\n-                </button>\n-              )}\n-            </div>\n-          ))}\n-          <button \n-            onClick={() => {\n-              setNewPoint({ \n-                ...newPoint, \n-                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n-              });\n-            }}\n-            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n-          >\n-            ë©´ ì  ì¶”ê°€\n-          </button>\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n-          <div>\n-            <span style={{ fontSize: '11px' }}>X: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxX}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n-            />\n-            <span style={{ fontSize: '11px' }}>Y: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxY}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n-            />\n-          </div>\n-          <div style={{ marginTop: '5px' }}>\n-            <span style={{ fontSize: '11px' }}>W: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxWidth}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n-            />\n-            <span style={{ fontSize: '11px' }}>H: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxHeight}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n-            />\n-          </div>\n-        </InputGroup>\n-\n-        <button \n-          onClick={() => {\n-            if (newPoint.name.trim()) {\n-              const newId = `muscle_${Date.now()}`;\n-              const newPagePoints = { ...pagePoints };\n-              \n-              newPagePoints[currentPage] = {\n-                ...newPagePoints[currentPage],\n-                [newId]: {\n-                  id: newId,\n-                  name: newPoint.name,\n-                  point: { x: newPoint.pointX, y: newPoint.pointY },\n-                  linePoints: newPoint.linePoints,\n-                  areaPoints: newPoint.areaPoints,\n-                  textBox: { \n-                    x: newPoint.textBoxX, \n-                    y: newPoint.textBoxY, \n-                    width: newPoint.textBoxWidth, \n-                    height: newPoint.textBoxHeight \n-                  },\n-                  text: { \n-                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n-                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n-                  }\n-                }\n-              };\n-              \n-              setPagePoints(newPagePoints);\n-              \n-              // ì…ë ¥ í¼ ì´ˆê¸°í™”\n-              setNewPoint({\n-                name: '',\n-                pointX: 0,\n-                pointY: 0,\n-                linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }],\n-                areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }],\n-                textBoxX: 0,\n-                textBoxY: 0,\n-                textBoxWidth: 10,\n-                textBoxHeight: 4\n-              });\n-            } else {\n-              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n-            }\n-          }}\n-          style={{\n-            width: '100%',\n-            padding: '10px',\n-            background: AppColors.primary,\n-            color: 'white',\n-            border: 'none',\n-            borderRadius: '4px',\n-            cursor: 'pointer',\n-            marginTop: '15px'\n-          }}\n-        >\n-          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n-        </button>\n-\n-        <button \n-          onClick={() => {\n-            console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n-          }}\n-          style={{\n-            width: '100%',\n-            padding: '8px',\n-            background: AppColors.secondary,\n-            color: 'white',\n-            border: 'none',\n-            borderRadius: '4px',\n-            cursor: 'pointer',\n-            marginTop: '10px'\n-          }}\n-        >\n-          ì½˜ì†”ì— í˜„ì¬ í˜ì´ì§€ ë°ì´í„° ì¶œë ¥\n-        </button>\n-      </CoordinateEditor>\n-\n-      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n-        {!isSearchPanelCollapsed && (\n-          <>\n-            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n-        <SearchInput\n-          type=\"text\"\n-          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n-          value={searchTerm}\n-          onChange={(e) => setSearchTerm(e.target.value)}\n-        />\n-        <MemberList>\n-          {filteredMembers.map(member => (\n-            <MemberItem\n-              key={member.id}\n-              selected={selectedMember?.id === member.id}\n-              onClick={() => handleMemberSelect(member)}\n-            >\n-              <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birth}</MemberInfo>\n-              <MemberInfo>{member.phone}</MemberInfo>\n-            </MemberItem>\n-          ))}\n-          </MemberList>\n-          </>\n-        )}\n-      </SearchPanel>      <ButtonPanel>\n-        <ToggleButton \n-          $collapsed={isSearchPanelCollapsed}\n-          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n-          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n-        >\n-          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n-        </ToggleButton>\n-        \n-        <ActionButton \n-          onClick={handleSave} \n-          title=\"ì €ì¥\"\n-          disabled={isReadOnly}\n-        >\n-          ğŸ’¾\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          ğŸ“¤\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n-          ğŸ–¨ï¸\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n-          ğŸ“\n-        </ActionButton>\n-        \n-        <Divider />\n-        \n-        <PageButton \n-          active={currentPage === 1}\n-          onClick={() => setCurrentPage(1)}\n-        >\n-          1\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 2}\n-          onClick={() => setCurrentPage(2)}\n-        >\n-          2\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 3}\n-          onClick={() => setCurrentPage(3)}\n-        >\n-          3\n-        </PageButton>\n-      </ButtonPanel>\n-\n-      <PrescriptionPanel>\n-\n-\n-        <PrescriptionContainer ref={prescriptionRef}>\n-          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n-          {currentPage === 1 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>SPINE Mapping Chart</div>\n-              \n-              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                margin: '20px 0'\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n-                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n-                  style={{ \n-                    maxHeight: '100%',\n-                    maxWidth: '300px',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-              </div>\n-\n-              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n-              <div style={{\n-                marginTop: 'auto',\n-                padding: '20px 0'\n-              }}>\n-                <div style={{\n-                  fontSize: '18px',\n-                  fontWeight: 'bold',\n-                  marginBottom: '15px',\n-                  textAlign: 'center'\n-                }}>ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n-                <div style={{\n-                  border: '2px solid #333',\n-                  minHeight: '80px',\n-                  padding: '15px',\n-                  fontSize: '14px',\n-                  lineHeight: '1.6'\n-                }}>\n-                  {/* í˜¸ì†Œ ì¦ìƒ ë‚´ìš©ì´ ë“¤ì–´ê°ˆ ê³µê°„ */}\n-                  <textarea\n-                    style={{\n-                      width: '100%',\n-                      height: '60px',\n-                      border: 'none',\n-                      outline: 'none',\n-                      resize: 'none',\n-                      fontSize: '14px',\n-                      background: 'transparent'\n-                    }}\n-                    placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”...\"\n-                    value={formData.painHistory}\n-                    onChange={(e) => handleInputChange('painHistory', e.target.value)}\n-                    readOnly={isReadOnly}\n-                  />\n-                </div>\n-              </div>\n-            </div>\n-          )}\n-          \n-          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n-          {currentPage === 2 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div \n-                style={{ \n-                  display: 'flex', \n-                  justifyContent: 'center', \n-                  alignItems: 'center',\n-                  flex: 1,\n-                  position: 'relative'\n-                }}\n-                onMouseMove={handleMouseMove}\n-                onMouseLeave={handleMouseLeave}\n-              >\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n-                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-                \n-                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n-                <svg \n-                  style={{\n-                    position: 'absolute',\n-                    top: 0,\n-                    left: 0,\n-                    width: '100%',\n-                    height: '100%',\n-                    pointerEvents: 'auto'\n-                  }}\n-                  viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"xMidYMid meet\"\n-                >\n-                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n-                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n-                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n-                      <polygon \n-                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n-                        strokeWidth=\"0.2\"\n-                        style={{ cursor: 'pointer' }}\n-                      />\n-                      \n-                      {/* í¬ì¸í„° */}\n-                      <circle \n-                        cx={muscle.point.x} \n-                        cy={muscle.point.y} \n-                        r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n-                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n-                      />\n-                      \n-                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n-                      {selectedPoints.has(muscle.id) && (\n-                        <polyline \n-                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          stroke=\"yellow\" \n-                          strokeWidth=\"0.8\" \n-                          fill=\"none\"\n-                        />\n-                      )}\n-                      \n-                      {/* ë©”ì¸ êº¾ì€ì„  */}\n-                      <polyline \n-                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"black\" \n-                        strokeWidth=\"0.3\" \n-                        fill=\"none\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n-                      <rect \n-                        x={muscle.textBox.x} \n-                        y={muscle.textBox.y} \n-                        width={muscle.textBox.width} \n-                        height={muscle.textBox.height} \n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n-                        strokeWidth=\"0.1\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ */}\n-                      <text \n-                        x={muscle.text.x} \n-                        y={muscle.text.y} \n-                        fontSize=\"2\" \n-                        fill=\"black\"\n-                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n-                        textAnchor=\"middle\"\n-                        dominantBaseline=\"middle\"\n-                      >\n-                        {muscle.name}\n-                      </text>\n-                    </g>\n-                  ))}\n-                </svg>\n-              </div>\n-            </div>\n-          )}\n-\n           {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n           {currentPage === 3 && (\n             <div style={{\n               display: 'flex',\n"
                },
                {
                    "date": 1764672926765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1308,15 +1308,19 @@\n                 color: '#333'\n               }}>Target Muscles List</div>\n               \n               {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                position: 'relative'\n-              }}>\n+              <div \n+                style={{ \n+                  display: 'flex', \n+                  justifyContent: 'center', \n+                  alignItems: 'center',\n+                  flex: 1,\n+                  position: 'relative'\n+                }}\n+                onMouseMove={handleMouseMove}\n+                onMouseLeave={handleMouseLeave}\n+              >\n                 <img \n                   src={`${process.env.PUBLIC_URL}/cms/back.png`} \n                   alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n                   style={{ \n@@ -1340,8 +1344,32 @@\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"xMidYMid meet\"\n                 >\n+                  {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n+                  {showCoords && currentCoords && currentPage === 3 && (\n+                    <g>\n+                      <rect \n+                        x={currentCoords.x - 8} \n+                        y={currentCoords.y - 4} \n+                        width=\"16\" \n+                        height=\"3\" \n+                        fill=\"rgba(0, 0, 0, 0.8)\" \n+                        rx=\"0.5\"\n+                      />\n+                      <text \n+                        x={currentCoords.x} \n+                        y={currentCoords.y - 1} \n+                        textAnchor=\"middle\" \n+                        fontSize=\"1.2\" \n+                        fill=\"white\" \n+                        fontWeight=\"bold\"\n+                      >\n+                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n+                      </text>\n+                    </g>\n+                  )}\n+                  \n                   {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n                   {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n                     <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n                       {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n"
                },
                {
                    "date": 1764673011466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -265,9 +265,9 @@\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (1í˜ì´ì§€ë¡œ ì‹œì‘)\n+  const [currentPage, setCurrentPage] = useState(2); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (2í˜ì´ì§€ë¡œ ì‹œì‘)\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n@@ -1012,36 +1012,36 @@\n         </ActionButton>\n         \n         <Divider />\n         \n-        <PageButton \n+        {/* <PageButton \n           active={currentPage === 1}\n           onClick={() => setCurrentPage(1)}\n         >\n           1\n-        </PageButton>\n+        </PageButton> */}\n         \n         <PageButton \n           active={currentPage === 2}\n           onClick={() => setCurrentPage(2)}\n         >\n           2\n         </PageButton>\n         \n-        <PageButton \n+        {/* <PageButton \n           active={currentPage === 3}\n           onClick={() => setCurrentPage(3)}\n         >\n           3\n-        </PageButton>\n+        </PageButton> */}\n       </ButtonPanel>\n \n       <PrescriptionPanel>\n \n \n         <PrescriptionContainer ref={prescriptionRef}>\n           {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n-          {currentPage === 1 && (\n+          {/* {currentPage === 1 && (\n             <div style={{\n               display: 'flex',\n               flexDirection: 'column',\n               height: '100%'\n@@ -1122,9 +1122,9 @@\n                   />\n                 </div>\n               </div>\n             </div>\n-          )}\n+          )} */\n           \n           {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n           {currentPage === 2 && (\n             <div style={{\n"
                },
                {
                    "date": 1764673027158,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1282,9 +1282,9 @@\n             </div>\n           )}\n \n           {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n-          {currentPage === 3 && (\n+          {/* {currentPage === 3 && (\n             <div style={{\n               display: 'flex',\n               flexDirection: 'column',\n               height: '100%'\n@@ -1436,9 +1436,9 @@\n                   ))}\n                 </svg>\n               </div>\n             </div>\n-          )}\n+          )} */\n         </PrescriptionContainer>\n       </PrescriptionPanel>\n     </PageContainer>\n   );\n"
                },
                {
                    "date": 1764673047219,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -271,10 +271,8 @@\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n   const [showCoords, setShowCoords] = useState(false);\n-  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n-  const [showCoords, setShowCoords] = useState(false);\n   const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n   const [formData, setFormData] = useState({\n     height: '',\n     weight: '',\n"
                },
                {
                    "date": 1764673071307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1036,10 +1036,10 @@\n       <PrescriptionPanel>\n \n \n         <PrescriptionContainer ref={prescriptionRef}>\n-          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n-          {/* {currentPage === 1 && (\n+          {/* í˜ì´ì§€ 1: SPINE Mapping Chart\n+          {currentPage === 1 && (\n             <div style={{\n               display: 'flex',\n               flexDirection: 'column',\n               height: '100%'\n@@ -1120,9 +1120,10 @@\n                   />\n                 </div>\n               </div>\n             </div>\n-          )} */\n+          )}\n+          */\n           \n           {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n           {currentPage === 2 && (\n             <div style={{\n@@ -1279,10 +1280,10 @@\n               </div>\n             </div>\n           )}\n \n-          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n-          {/* {currentPage === 3 && (\n+          {/* í˜ì´ì§€ 3: Target Muscles (Back)\n+          {currentPage === 3 && (\n             <div style={{\n               display: 'flex',\n               flexDirection: 'column',\n               height: '100%'\n@@ -1434,9 +1435,10 @@\n                   ))}\n                 </svg>\n               </div>\n             </div>\n-          )} */\n+          )}\n+          */\n         </PrescriptionContainer>\n       </PrescriptionPanel>\n     </PageContainer>\n   );\n"
                },
                {
                    "date": 1764673125243,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1036,94 +1036,8 @@\n       <PrescriptionPanel>\n \n \n         <PrescriptionContainer ref={prescriptionRef}>\n-          {/* í˜ì´ì§€ 1: SPINE Mapping Chart\n-          {currentPage === 1 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>SPINE Mapping Chart</div>\n-              \n-              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n-              <div style={{ \n-                display: 'flex', \n-                justifyContent: 'center', \n-                alignItems: 'center',\n-                flex: 1,\n-                margin: '20px 0'\n-              }}>\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n-                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n-                  style={{ \n-                    maxHeight: '100%',\n-                    maxWidth: '300px',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-              </div>\n-\n-              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n-              <div style={{\n-                marginTop: 'auto',\n-                padding: '20px 0'\n-              }}>\n-                <div style={{\n-                  fontSize: '18px',\n-                  fontWeight: 'bold',\n-                  marginBottom: '15px',\n-                  textAlign: 'center'\n-                }}>ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n-                <div style={{\n-                  border: '2px solid #333',\n-                  minHeight: '80px',\n-                  padding: '15px',\n-                  fontSize: '14px',\n-                  lineHeight: '1.6'\n-                }}>\n-                  {/* í˜¸ì†Œ ì¦ìƒ ë‚´ìš©ì´ ë“¤ì–´ê°ˆ ê³µê°„ */}\n-                  <textarea\n-                    style={{\n-                      width: '100%',\n-                      height: '60px',\n-                      border: 'none',\n-                      outline: 'none',\n-                      resize: 'none',\n-                      fontSize: '14px',\n-                      background: 'transparent'\n-                    }}\n-                    placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”...\"\n-                    value={formData.painHistory}\n-                    onChange={(e) => handleInputChange('painHistory', e.target.value)}\n-                    readOnly={isReadOnly}\n-                  />\n-                </div>\n-              </div>\n-            </div>\n-          )}\n-          */\n           \n           {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n           {currentPage === 2 && (\n             <div style={{\n@@ -1280,165 +1194,9 @@\n               </div>\n             </div>\n           )}\n \n-          {/* í˜ì´ì§€ 3: Target Muscles (Back)\n-          {currentPage === 3 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n \n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div \n-                style={{ \n-                  display: 'flex', \n-                  justifyContent: 'center', \n-                  alignItems: 'center',\n-                  flex: 1,\n-                  position: 'relative'\n-                }}\n-                onMouseMove={handleMouseMove}\n-                onMouseLeave={handleMouseLeave}\n-              >\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n-                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-                \n-                {/* í›„ë©´ ê·¼ìœ¡ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n-                <svg \n-                  style={{\n-                    position: 'absolute',\n-                    top: 0,\n-                    left: 0,\n-                    width: '100%',\n-                    height: '100%',\n-                    pointerEvents: 'auto'\n-                  }}\n-                  viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"xMidYMid meet\"\n-                >\n-                  {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n-                  {showCoords && currentCoords && currentPage === 3 && (\n-                    <g>\n-                      <rect \n-                        x={currentCoords.x - 8} \n-                        y={currentCoords.y - 4} \n-                        width=\"16\" \n-                        height=\"3\" \n-                        fill=\"rgba(0, 0, 0, 0.8)\" \n-                        rx=\"0.5\"\n-                      />\n-                      <text \n-                        x={currentCoords.x} \n-                        y={currentCoords.y - 1} \n-                        textAnchor=\"middle\" \n-                        fontSize=\"1.2\" \n-                        fill=\"white\" \n-                        fontWeight=\"bold\"\n-                      >\n-                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n-                      </text>\n-                    </g>\n-                  )}\n-                  \n-                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n-                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n-                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n-                      <polygon \n-                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n-                        strokeWidth=\"0.2\"\n-                        style={{ cursor: 'pointer' }}\n-                      />\n-                      \n-                      {/* í¬ì¸í„° */}\n-                      <circle \n-                        cx={muscle.point.x} \n-                        cy={muscle.point.y} \n-                        r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n-                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n-                      />\n-                      \n-                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n-                      {selectedPoints.has(muscle.id) && (\n-                        <polyline \n-                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          stroke=\"yellow\" \n-                          strokeWidth=\"0.8\" \n-                          fill=\"none\"\n-                        />\n-                      )}\n-                      \n-                      {/* ë©”ì¸ êº¾ì€ì„  */}\n-                      <polyline \n-                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"black\" \n-                        strokeWidth=\"0.3\" \n-                        fill=\"none\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n-                      <rect \n-                        x={muscle.textBox.x} \n-                        y={muscle.textBox.y} \n-                        width={muscle.textBox.width} \n-                        height={muscle.textBox.height} \n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n-                        strokeWidth=\"0.1\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ */}\n-                      <text \n-                        x={muscle.text.x} \n-                        y={muscle.text.y} \n-                        fontSize=\"2\" \n-                        fill=\"black\"\n-                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n-                        textAnchor=\"middle\"\n-                        dominantBaseline=\"middle\"\n-                      >\n-                        {muscle.name}\n-                      </text>\n-                    </g>\n-                  ))}\n-                </svg>\n-              </div>\n-            </div>\n-          )}\n-          */\n         </PrescriptionContainer>\n       </PrescriptionPanel>\n     </PageContainer>\n   );\n"
                },
                {
                    "date": 1764673581339,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -452,18 +452,19 @@\n   const handleMemberSelect = (member: Member) => {\n     setSelectedMember(member);\n   };\n \n-  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬\n+  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (SVG viewBox=\"0 0 100 100\" ê¸°ì¤€)\n   const handleMouseMove = (event: React.MouseEvent) => {\n     const target = event.currentTarget as HTMLElement;\n     const rect = target.getBoundingClientRect();\n+    // SVG viewBox=\"0 0 100 100\" ê¸°ì¤€ìœ¼ë¡œ ì¢Œí‘œ ê³„ì‚°\n     const x = ((event.clientX - rect.left) / rect.width) * 100;\n     const y = ((event.clientY - rect.top) / rect.height) * 100;\n \n     setCurrentCoords({\n-      x: Math.round(x * 100) / 100,\n-      y: Math.round(y * 100) / 100\n+      x: Math.round(x * 10) / 10, // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n+      y: Math.round(y * 10) / 10  // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n     });\n     setShowCoords(true);\n   };\n \n@@ -1119,9 +1120,9 @@\n                         fontSize=\"1.2\" \n                         fill=\"white\" \n                         fontWeight=\"bold\"\n                       >\n-                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n+                        x: {currentCoords.x.toFixed(1)}, y: {currentCoords.y.toFixed(1)} (SVG)\n                       </text>\n                     </g>\n                   )}\n                   \n"
                },
                {
                    "date": 1764673811058,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -456,12 +456,26 @@\n   // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (SVG viewBox=\"0 0 100 100\" ê¸°ì¤€)\n   const handleMouseMove = (event: React.MouseEvent) => {\n     const target = event.currentTarget as HTMLElement;\n     const rect = target.getBoundingClientRect();\n-    // SVG viewBox=\"0 0 100 100\" ê¸°ì¤€ìœ¼ë¡œ ì¢Œí‘œ ê³„ì‚°\n-    const x = ((event.clientX - rect.left) / rect.width) * 100;\n-    const y = ((event.clientY - rect.top) / rect.height) * 100;\n+    \n+    // ì‹¤ì œ ì´ë¯¸ì§€ ìš”ì†Œ ì°¾ê¸°\n+    const img = target.querySelector('img');\n+    if (!img) return;\n+    \n+    const imgRect = img.getBoundingClientRect();\n+    \n+    // ì´ë¯¸ì§€ ì˜ì—­ ë‚´ì—ì„œì˜ ìƒëŒ€ì  ì¢Œí‘œ ê³„ì‚°\n+    const x = ((event.clientX - imgRect.left) / imgRect.width) * 100;\n+    const y = ((event.clientY - imgRect.top) / imgRect.height) * 100;\n \n+    // ì´ë¯¸ì§€ ì˜ì—­ì„ ë²—ì–´ë‚œ ê²½ìš° ì²˜ë¦¬\n+    if (x < 0 || x > 100 || y < 0 || y > 100) {\n+      setShowCoords(false);\n+      setCurrentCoords(null);\n+      return;\n+    }\n+\n     setCurrentCoords({\n       x: Math.round(x * 10) / 10, // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n       y: Math.round(y * 10) / 10  // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n     });\n"
                },
                {
                    "date": 1764674151487,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -452,30 +452,17 @@\n   const handleMemberSelect = (member: Member) => {\n     setSelectedMember(member);\n   };\n \n-  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (SVG viewBox=\"0 0 100 100\" ê¸°ì¤€)\n+  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ì»¨í…Œì´ë„ˆ ê¸°ì¤€ í¼ì„¼íŠ¸)\n   const handleMouseMove = (event: React.MouseEvent) => {\n     const target = event.currentTarget as HTMLElement;\n     const rect = target.getBoundingClientRect();\n     \n-    // ì‹¤ì œ ì´ë¯¸ì§€ ìš”ì†Œ ì°¾ê¸°\n-    const img = target.querySelector('img');\n-    if (!img) return;\n-    \n-    const imgRect = img.getBoundingClientRect();\n-    \n-    // ì´ë¯¸ì§€ ì˜ì—­ ë‚´ì—ì„œì˜ ìƒëŒ€ì  ì¢Œí‘œ ê³„ì‚°\n-    const x = ((event.clientX - imgRect.left) / imgRect.width) * 100;\n-    const y = ((event.clientY - imgRect.top) / imgRect.height) * 100;\n+    // ì»¨í…Œì´ë„ˆ ê¸°ì¤€ìœ¼ë¡œ í¼ì„¼íŠ¸ ì¢Œí‘œ ê³„ì‚°\n+    const x = ((event.clientX - rect.left) / rect.width) * 100;\n+    const y = ((event.clientY - rect.top) / rect.height) * 100;\n \n-    // ì´ë¯¸ì§€ ì˜ì—­ì„ ë²—ì–´ë‚œ ê²½ìš° ì²˜ë¦¬\n-    if (x < 0 || x > 100 || y < 0 || y > 100) {\n-      setShowCoords(false);\n-      setCurrentCoords(null);\n-      return;\n-    }\n-\n     setCurrentCoords({\n       x: Math.round(x * 10) / 10, // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n       y: Math.round(y * 10) / 10  // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n     });\n@@ -1113,9 +1100,9 @@\n                     height: '100%',\n                     pointerEvents: 'auto'\n                   }}\n                   viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"xMidYMid meet\"\n+                  preserveAspectRatio=\"none\"\n                 >\n                   {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n                   {showCoords && currentCoords && currentPage === 2 && (\n                     <g>\n@@ -1134,9 +1121,9 @@\n                         fontSize=\"1.2\" \n                         fill=\"white\" \n                         fontWeight=\"bold\"\n                       >\n-                        x: {currentCoords.x.toFixed(1)}, y: {currentCoords.y.toFixed(1)} (SVG)\n+                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n                       </text>\n                     </g>\n                   )}\n                   \n"
                },
                {
                    "date": 1764674284110,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1134,28 +1134,28 @@\n                       <polygon \n                         points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n                         fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n                         stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n-                        strokeWidth=\"0.2\"\n+                        strokeWidth=\"0.05\"\n                         style={{ cursor: 'pointer' }}\n                       />\n                       \n                       {/* í¬ì¸í„° */}\n                       <circle \n                         cx={muscle.point.x} \n                         cy={muscle.point.y} \n-                        r={selectedPoints.has(muscle.id) ? \"1.5\" : \"1\"} \n+                        r={selectedPoints.has(muscle.id) ? \"0.8\" : \"0.6\"} \n                         fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n                         stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.2\" : \"0\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0\"}\n                       />\n                       \n                       {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n                       {selectedPoints.has(muscle.id) && (\n                         <polyline \n                           points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n                           stroke=\"yellow\" \n-                          strokeWidth=\"0.8\" \n+                          strokeWidth=\"0.4\" \n                           fill=\"none\"\n                         />\n                       )}\n                       \n@@ -1174,16 +1174,16 @@\n                         width={muscle.textBox.width} \n                         height={muscle.textBox.height} \n                         fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n                         stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n-                        strokeWidth=\"0.1\"\n+                        strokeWidth=\"0.05\"\n                       />\n                       \n                       {/* í…ìŠ¤íŠ¸ */}\n                       <text \n                         x={muscle.text.x} \n                         y={muscle.text.y} \n-                        fontSize=\"2\" \n+                        fontSize=\"1.2\" \n                         fill=\"black\"\n                         fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n                         textAnchor=\"middle\"\n                         dominantBaseline=\"middle\"\n"
                },
                {
                    "date": 1764674298055,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1162,9 +1162,9 @@\n                       {/* ë©”ì¸ êº¾ì€ì„  */}\n                       <polyline \n                         points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n                         stroke=\"black\" \n-                        strokeWidth=\"0.3\" \n+                        strokeWidth=\"0.15\" \n                         fill=\"none\"\n                       />\n                       \n                       {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n"
                },
                {
                    "date": 1764674597879,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1207 @@\n+import React, { useEffect, useState, useCallback, useRef } from 'react';\n+import { useSearchParams } from 'react-router-dom';\n+import styled from 'styled-components';\n+import html2canvas from 'html2canvas';\n+import jsPDF from 'jspdf';\n+import { AppColors } from '../styles/colors';\n+import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n+import { frontMuscles } from '../constants/muscleCoordinates';\n+\n+const PageContainer = styled.div`\n+  min-height: 100vh;\n+  display: flex;\n+  background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n+`;\n+\n+const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n+  width: ${props => props.$collapsed ? '0px' : '300px'};\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: ${props => props.$collapsed ? '0' : '20px'};\n+  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n+  transition: all 0.3s ease;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n+  width: 55px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 10px 2px;\n+  display: ${props => props.$hidden ? 'none' : 'flex'};\n+  flex-direction: column;\n+  gap: 6px;\n+  align-items: stretch;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n+  width: 100%;\n+  height: 36px;\n+  border: none;\n+  border-radius: 6px;\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n+  font-size: 16px;\n+  font-weight: 600;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+  }\n+`;\n+\n+const PageButton = styled.button<{ active?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.active ? AppColors.primary : 'white'};\n+  color: ${props => props.active ? 'white' : '#333'};\n+  font-size: 14px;\n+  font-weight: ${props => props.active ? 'bold' : 'normal'};\n+  cursor: pointer;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n+  }\n+`;\n+\n+const Divider = styled.div`\n+  height: 1px;\n+  background: ${AppColors.borderLight};\n+  margin: 10px 0;\n+`;\n+\n+const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n+  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  font-size: 14px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${AppColors.primary};\n+    color: ${AppColors.onPrimary};\n+  }\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  box-sizing: border-box;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  width: 210mm;\n+  height: 297mm;\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  box-sizing: border-box;\n+  overflow: hidden;\n+  \n+  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n+  scrollbar-width: none; /* Firefox */\n+  -ms-overflow-style: none; /* IE/Edge */\n+  \n+  &::-webkit-scrollbar {\n+    display: none; /* Chrome, Safari, Opera */\n+  }\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20mm;\n+    margin: 0;\n+    max-width: none;\n+    width: 210mm;\n+    height: 297mm;\n+    overflow: visible;\n+  }\n+  \n+  @media screen and (max-width: 900px) {\n+    width: 100%;\n+    height: auto;\n+    min-height: calc(100vh - 40px);\n+  }\n+`;\n+\n+\n+\n+\n+\n+const CoordinateEditor = styled.div<{ $open?: boolean }>`\n+  position: fixed;\n+  left: ${props => props.$open ? '320px' : '-400px'};\n+  top: 20px;\n+  width: 350px;\n+  height: calc(100vh - 40px);\n+  background: white;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  padding: 20px;\n+  overflow-y: auto;\n+  transition: left 0.3s ease;\n+  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n+  z-index: 1000;\n+`;\n+\n+\n+\n+const InputGroup = styled.div`\n+  margin-bottom: 15px;\n+`;\n+\n+const InputLabel = styled.label`\n+  display: block;\n+  margin-bottom: 5px;\n+  font-size: 12px;\n+  font-weight: bold;\n+  color: ${AppColors.onSurface};\n+`;\n+\n+const CoordinateInput = styled.input`\n+  width: 60px;\n+  padding: 4px 6px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 3px;\n+  font-size: 12px;\n+  margin-right: 5px;\n+`;\n+\n+\n+\n+const ExercisePrescriptionPage: React.FC = () => {\n+  const [searchParams] = useSearchParams();\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n+  const [currentPage, setCurrentPage] = useState(2); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (2í˜ì´ì§€ë¡œ ì‹œì‘)\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n+  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n+  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n+  const [showCoords, setShowCoords] = useState(false);\n+  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: ''\n+  });\n+\n+  // ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value\n+    }));\n+  };\n+\n+  // ì²´í¬ë°•ìŠ¤ ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleCheckboxChange = (field: string, checked: boolean) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      medicalHistory: {\n+        ...prev.medicalHistory,\n+        [field]: checked\n+      }\n+    }));\n+  };\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n+\n+    loadMembers();\n+  }, []);\n+\n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+\n+          });\n+          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n+  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n+    try {\n+      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+      if (prescription) {\n+        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n+        const member = members.find(m => m.id === prescription.memberId);\n+        if (member) {\n+          setSelectedMember(member);\n+        }\n+        \n+        setCurrentPrescription(prescription);\n+        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n+        setFormData({\n+          height: prescription.height,\n+          weight: prescription.weight,\n+          footSize: prescription.footSize,\n+          medications: prescription.medications,\n+          medicalHistory: prescription.medicalHistory,\n+          painHistory: prescription.painHistory,\n+\n+        });\n+        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n+      }\n+    } catch (error) {\n+      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [members]);\n+\n+  useEffect(() => {\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    const prescriptionIdParam = searchParams.get('prescriptionId');\n+    \n+    if (prescriptionIdParam) {\n+      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+      loadSpecificPrescription(prescriptionIdParam);\n+    } else if (userIdParam && members.length > 0) {\n+      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n+      const member = members.find(m => m.id === userIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n+    }\n+  }, [searchParams, members, loadSpecificPrescription]);\n+\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ì»¨í…Œì´ë„ˆ ê¸°ì¤€ í¼ì„¼íŠ¸)\n+  const handleMouseMove = (event: React.MouseEvent) => {\n+    const target = event.currentTarget as HTMLElement;\n+    const rect = target.getBoundingClientRect();\n+    \n+    // ì»¨í…Œì´ë„ˆ ê¸°ì¤€ìœ¼ë¡œ í¼ì„¼íŠ¸ ì¢Œí‘œ ê³„ì‚°\n+    const x = ((event.clientX - rect.left) / rect.width) * 100;\n+    const y = ((event.clientY - rect.top) / rect.height) * 100;\n+\n+    setCurrentCoords({\n+      x: Math.round(x * 10) / 10, // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n+      y: Math.round(y * 10) / 10  // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n+    });\n+    setShowCoords(true);\n+  };\n+\n+  const handleMouseLeave = () => {\n+    setShowCoords(false);\n+    setCurrentCoords(null);\n+  };\n+\n+  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n+  const handlePointClick = (pointId: string) => {\n+    setSelectedPoints(prev => {\n+      const newSelected = new Set(prev);\n+      if (newSelected.has(pointId)) {\n+        newSelected.delete(pointId);\n+      } else {\n+        newSelected.add(pointId);\n+      }\n+      return newSelected;\n+    });\n+  };\n+\n+  // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n+  const [pagePoints, setPagePoints] = useState<{\n+    [pageNum: number]: {\n+      [pointId: string]: MusclePoint\n+    }\n+  }>({\n+    2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n+    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n+  });\n+\n+  // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n+  const [newPoint, setNewPoint] = useState({\n+    name: '',\n+    pointX: 0,\n+    pointY: 0,\n+    linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 2ì \n+    areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 3ì \n+    textBoxX: 0,\n+    textBoxY: 0,\n+    textBoxWidth: 10,\n+    textBoxHeight: 4\n+  });\n+\n+  const handleSave = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: { front: [], spine: [], back: [] },\n+        signatureData: '',\n+        signedAt: null,\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n+        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n+      };\n+\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+\n+\n+\n+  const handleShare = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n+    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n+    \n+    try {\n+      if (navigator.share) {\n+        await navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: currentUrl,\n+        });\n+      } else {\n+        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      }\n+    } catch (error) {\n+      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n+      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n+      try {\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      } catch {\n+        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n+      }\n+    }\n+  };\n+\n+  const handlePrint = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      // PDF ìƒì„±\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n+      const originalPage = currentPage;\n+      \n+      for (let page = 1; page <= 3; page++) {\n+        if (page > 1) {\n+          pdf.addPage();\n+        }\n+\n+        // í˜ì´ì§€ ë³€ê²½\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n+        if (!prescriptionRef.current) continue;\n+        \n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+\n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210;\n+        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+      }\n+\n+      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n+      setCurrentPage(originalPage);\n+\n+      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n+      const pdfBlob = pdf.output('blob');\n+      const pdfUrl = URL.createObjectURL(pdfBlob);\n+      \n+      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n+      const printWindow = window.open(pdfUrl, '_blank');\n+      if (printWindow) {\n+        printWindow.onload = () => {\n+          setTimeout(() => {\n+            printWindow.print();\n+          }, 1000);\n+        };\n+      }\n+    } catch (error) {\n+      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n+      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  const handleDownloadPDF = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n+      for (let page = 2; page <= 3; page++) {\n+        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n+        const originalPage = currentPage;\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        if (!prescriptionRef.current) continue;\n+        \n+        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+        \n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n+        const imgHeight = 297; // A4 ë†’ì´ (mm)\n+        \n+        // ì²« ë²ˆì§¸ PDF í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n+        if (page > 2) {\n+          pdf.addPage();\n+        }\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+        \n+        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n+        setCurrentPage(originalPage);\n+      }\n+      \n+      // PDF ë‹¤ìš´ë¡œë“œ\n+      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n+      pdf.save(fileName);\n+      \n+    } catch (error) {\n+      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n+      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  return (\n+    <PageContainer>\n+      {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n+      <CoordinateEditor $open={isCoordinateEditorOpen}>\n+        <h3>í˜ì´ì§€ {currentPage} - ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€</h3>\n+        \n+        <InputGroup>\n+          <InputLabel>ê·¼ìœ¡ ì´ë¦„</InputLabel>\n+          <CoordinateInput \n+            type=\"text\" \n+            placeholder=\"ì˜ˆ: ì‚¼ê°ê·¼\" \n+            value={newPoint.name}\n+            onChange={(e) => setNewPoint({ ...newPoint, name: e.target.value })}\n+            style={{ width: '100%' }}\n+          />\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"X\" \n+            value={newPoint.pointX}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n+          />\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"Y\" \n+            value={newPoint.pointY}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n+          />\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n+          {newPoint.linePoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={point.x}\n+                onChange={(e) => {\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={point.y}\n+                onChange={(e) => {\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                }}\n+              />\n+              {index >= 2 && (\n+                <button \n+                  onClick={() => {\n+                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n+            </div>\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ì„  ì  ì¶”ê°€\n+          </button>\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n+          {newPoint.areaPoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={point.x}\n+                onChange={(e) => {\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={point.y}\n+                onChange={(e) => {\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                }}\n+              />\n+              {index >= 3 && (\n+                <button \n+                  onClick={() => {\n+                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n+            </div>\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ë©´ ì  ì¶”ê°€\n+          </button>\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n+          <div>\n+            <span style={{ fontSize: '11px' }}>X: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxX}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n+            />\n+            <span style={{ fontSize: '11px' }}>Y: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxY}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n+            />\n+          </div>\n+          <div style={{ marginTop: '5px' }}>\n+            <span style={{ fontSize: '11px' }}>W: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxWidth}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n+            />\n+            <span style={{ fontSize: '11px' }}>H: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxHeight}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n+            />\n+          </div>\n+        </InputGroup>\n+\n+        <button \n+          onClick={() => {\n+            if (newPoint.name.trim()) {\n+              const newId = `muscle_${Date.now()}`;\n+              const newPagePoints = { ...pagePoints };\n+              \n+              newPagePoints[currentPage] = {\n+                ...newPagePoints[currentPage],\n+                [newId]: {\n+                  id: newId,\n+                  name: newPoint.name,\n+                  point: { x: newPoint.pointX, y: newPoint.pointY },\n+                  linePoints: newPoint.linePoints,\n+                  areaPoints: newPoint.areaPoints,\n+                  textBox: { \n+                    x: newPoint.textBoxX, \n+                    y: newPoint.textBoxY, \n+                    width: newPoint.textBoxWidth, \n+                    height: newPoint.textBoxHeight \n+                  },\n+                  text: { \n+                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n+                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n+                  }\n+                }\n+              };\n+              \n+              setPagePoints(newPagePoints);\n+              \n+              // ì…ë ¥ í¼ ì´ˆê¸°í™”\n+              setNewPoint({\n+                name: '',\n+                pointX: 0,\n+                pointY: 0,\n+                linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }],\n+                areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }],\n+                textBoxX: 0,\n+                textBoxY: 0,\n+                textBoxWidth: 10,\n+                textBoxHeight: 4\n+              });\n+            } else {\n+              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n+            }\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '10px',\n+            background: AppColors.primary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '15px'\n+          }}\n+        >\n+          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n+        </button>\n+\n+        <button \n+          onClick={() => {\n+            console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '8px',\n+            background: AppColors.secondary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '10px'\n+          }}\n+        >\n+          ì½˜ì†”ì— í˜„ì¬ í˜ì´ì§€ ë°ì´í„° ì¶œë ¥\n+        </button>\n+      </CoordinateEditor>\n+\n+      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n+        {!isSearchPanelCollapsed && (\n+          <>\n+            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birth}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+          </MemberList>\n+          </>\n+        )}\n+      </SearchPanel>      <ButtonPanel>\n+        <ToggleButton \n+          $collapsed={isSearchPanelCollapsed}\n+          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n+          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n+        >\n+          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n+        </ToggleButton>\n+        \n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={isReadOnly}\n+        >\n+          ğŸ’¾\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          ğŸ“¤\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n+          ğŸ–¨ï¸\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n+          ğŸ“\n+        </ActionButton>\n+        \n+        <Divider />\n+        \n+        {/* <PageButton \n+          active={currentPage === 1}\n+          onClick={() => setCurrentPage(1)}\n+        >\n+          1\n+        </PageButton> */}\n+        \n+        <PageButton \n+          active={currentPage === 2}\n+          onClick={() => setCurrentPage(2)}\n+        >\n+          2\n+        </PageButton>\n+        \n+        {/* <PageButton \n+          active={currentPage === 3}\n+          onClick={() => setCurrentPage(3)}\n+        >\n+          3\n+        </PageButton> */}\n+      </ButtonPanel>\n+\n+      <PrescriptionPanel>\n+\n+\n+        <PrescriptionContainer ref={prescriptionRef}>\n+          \n+          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n+          {currentPage === 2 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n+              <div \n+                style={{ \n+                  display: 'flex', \n+                  justifyContent: 'center', \n+                  alignItems: 'center',\n+                  flex: 1,\n+                  position: 'relative'\n+                }}\n+                onMouseMove={handleMouseMove}\n+                onMouseLeave={handleMouseLeave}\n+              >\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n+                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+                \n+                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'auto'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"none\"\n+                >\n+                  {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n+                  {showCoords && currentCoords && currentPage === 2 && (\n+                    <g>\n+                      <rect \n+                        x={currentCoords.x - 8} \n+                        y={currentCoords.y - 4} \n+                        width=\"16\" \n+                        height=\"3\" \n+                        fill=\"rgba(0, 0, 0, 0.8)\" \n+                        rx=\"0.5\"\n+                      />\n+                      <text \n+                        x={currentCoords.x} \n+                        y={currentCoords.y - 1} \n+                        textAnchor=\"middle\" \n+                        fontSize=\"1.2\" \n+                        fill=\"white\" \n+                        fontWeight=\"bold\"\n+                      >\n+                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n+                      </text>\n+                    </g>\n+                  )}\n+                  \n+                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n+                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n+                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n+                      <polygon \n+                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n+                        strokeWidth=\"0.05\"\n+                        style={{ cursor: 'pointer' }}\n+                      />\n+                      \n+                      {/* í¬ì¸í„° */}\n+                      <circle \n+                        cx={muscle.point.x} \n+                        cy={muscle.point.y} \n+                        r={selectedPoints.has(muscle.id) ? \"0.8\" : \"0.6\"} \n+                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0\"}\n+                      />\n+                      \n+                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n+                      {selectedPoints.has(muscle.id) && (\n+                        <polyline \n+                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"yellow\" \n+                          strokeWidth=\"0.4\" \n+                          fill=\"none\"\n+                        />\n+                      )}\n+                      \n+                      {/* ë©”ì¸ êº¾ì€ì„  */}\n+                      <polyline \n+                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"black\" \n+                        strokeWidth=\"0.15\" \n+                        fill=\"none\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n+                      <rect \n+                        x={muscle.textBox.x} \n+                        y={muscle.textBox.y} \n+                        width={muscle.textBox.width} \n+                        height={muscle.textBox.height} \n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        strokeWidth=\"0.05\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x={muscle.text.x} \n+                        y={muscle.text.y} \n+                        fontSize=\"1.2\" \n+                        fill=\"black\"\n+                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n+                        textAnchor=\"middle\"\n+                        dominantBaseline=\"middle\"\n+                      >\n+                        {muscle.name}\n+                      </text>\n+                    </g>\n+                  ))}\n+                </svg>\n+              </div>\n+            </div>\n+          )}\n+\n+\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n+    </PageContainer>\n+  );\n+};\n+\n+export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764674610174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -488,14 +488,14 @@\n   };\n \n   // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n   const [pagePoints, setPagePoints] = useState<{\n-    [pageNum: number]: {\n-      [pointId: string]: MusclePoint\n-    }\n+    // [pageNum: number]: {\n+    //   [pointId: string]: MusclePoint\n+    // }\n   }>({\n     2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n-    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n+    // 3: backMuscles    \n   });\n \n   // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n   const [newPoint, setNewPoint] = useState({\n@@ -1203,1212 +1203,5 @@\n     </PageContainer>\n   );\n };\n \n-export default ExercisePrescriptionPage;\n-import React, { useEffect, useState, useCallback, useRef } from 'react';\n-import { useSearchParams } from 'react-router-dom';\n-import styled from 'styled-components';\n-import html2canvas from 'html2canvas';\n-import jsPDF from 'jspdf';\n-import { AppColors } from '../styles/colors';\n-import { AppTextStyles } from '../styles/textStyles';\n-import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n-import { frontMuscles, backMuscles, MusclePoint } from '../constants/muscleCoordinates';\n-\n-const PageContainer = styled.div`\n-  min-height: 100vh;\n-  display: flex;\n-  background: ${AppColors.background};\n-  \n-  @media print {\n-    display: block;\n-    background: white;\n-  }\n-`;\n-\n-const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n-  width: ${props => props.$collapsed ? '0px' : '300px'};\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: ${props => props.$collapsed ? '0' : '20px'};\n-  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n-  transition: all 0.3s ease;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n-  width: 55px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 10px 2px;\n-  display: ${props => props.$hidden ? 'none' : 'flex'};\n-  flex-direction: column;\n-  gap: 6px;\n-  align-items: stretch;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 100%;\n-  height: 36px;\n-  border: none;\n-  border-radius: 6px;\n-  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n-  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: 16px;\n-  font-weight: 600;\n-  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-  }\n-`;\n-\n-const PageButton = styled.button<{ active?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.active ? AppColors.primary : 'white'};\n-  color: ${props => props.active ? 'white' : '#333'};\n-  font-size: 14px;\n-  font-weight: ${props => props.active ? 'bold' : 'normal'};\n-  cursor: pointer;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n-  }\n-`;\n-\n-const Divider = styled.div`\n-  height: 1px;\n-  background: ${AppColors.borderLight};\n-  margin: 10px 0;\n-`;\n-\n-const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n-  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n-  cursor: pointer;\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  font-size: 14px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${AppColors.primary};\n-    color: ${AppColors.onPrimary};\n-  }\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-\n-\n-const SearchTitle = styled.h2`\n-  font-size: ${AppTextStyles.title2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SearchInput = styled.input`\n-  width: 100%;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  margin-bottom: 16px;\n-  box-sizing: border-box;\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const MemberList = styled.div`\n-  max-height: 400px;\n-  overflow-y: auto;\n-`;\n-\n-const MemberItem = styled.div<{ selected?: boolean }>`\n-  padding: 12px;\n-  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 8px;\n-  margin-bottom: 8px;\n-  cursor: pointer;\n-  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n-  \n-  &:hover {\n-    background: ${AppColors.primary}20;\n-  }\n-`;\n-\n-const MemberName = styled.div`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 4px;\n-`;\n-\n-const MemberInfo = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const PrescriptionPanel = styled.div`\n-  flex: 1;\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    padding: 0;\n-    overflow: visible;\n-  }\n-`;\n-\n-const PrescriptionContainer = styled.div`\n-  width: 210mm;\n-  height: 297mm;\n-  max-width: 800px;\n-  margin: 0 auto;\n-  background: white;\n-  padding: 40px;\n-  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  box-sizing: border-box;\n-  overflow: hidden;\n-  \n-  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n-  scrollbar-width: none; /* Firefox */\n-  -ms-overflow-style: none; /* IE/Edge */\n-  \n-  &::-webkit-scrollbar {\n-    display: none; /* Chrome, Safari, Opera */\n-  }\n-  \n-  @media print {\n-    box-shadow: none;\n-    padding: 20mm;\n-    margin: 0;\n-    max-width: none;\n-    width: 210mm;\n-    height: 297mm;\n-    overflow: visible;\n-  }\n-  \n-  @media screen and (max-width: 900px) {\n-    width: 100%;\n-    height: auto;\n-    min-height: calc(100vh - 40px);\n-  }\n-`;\n-\n-\n-\n-\n-\n-const CoordinateEditor = styled.div<{ $open?: boolean }>`\n-  position: fixed;\n-  left: ${props => props.$open ? '320px' : '-400px'};\n-  top: 20px;\n-  width: 350px;\n-  height: calc(100vh - 40px);\n-  background: white;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  padding: 20px;\n-  overflow-y: auto;\n-  transition: left 0.3s ease;\n-  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n-  z-index: 1000;\n-`;\n-\n-\n-\n-const InputGroup = styled.div`\n-  margin-bottom: 15px;\n-`;\n-\n-const InputLabel = styled.label`\n-  display: block;\n-  margin-bottom: 5px;\n-  font-size: 12px;\n-  font-weight: bold;\n-  color: ${AppColors.onSurface};\n-`;\n-\n-const CoordinateInput = styled.input`\n-  width: 60px;\n-  padding: 4px 6px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 3px;\n-  font-size: 12px;\n-  margin-right: 5px;\n-`;\n-\n-\n-\n-const ExercisePrescriptionPage: React.FC = () => {\n-  const [searchParams] = useSearchParams();\n-  const [searchTerm, setSearchTerm] = useState('');\n-  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n-  const [members, setMembers] = useState<Member[]>([]);\n-  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n-  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(2); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (2í˜ì´ì§€ë¡œ ì‹œì‘)\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n-  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n-  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n-  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n-  const [showCoords, setShowCoords] = useState(false);\n-  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n-  const [formData, setFormData] = useState({\n-    height: '',\n-    weight: '',\n-    footSize: '',\n-    medications: '',\n-    medicalHistory: {\n-      musculoskeletal: false,\n-      cardiovascular: false,\n-      diabetes: false,\n-      osteoporosis: false,\n-      thyroid: false,\n-      varicose: false,\n-      arthritis: false,\n-    } as ExercisePrescriptionMedicalHistory,\n-    painHistory: ''\n-  });\n-\n-  // ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value\n-    }));\n-  };\n-\n-  // ì²´í¬ë°•ìŠ¤ ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleCheckboxChange = (field: string, checked: boolean) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      medicalHistory: {\n-        ...prev.medicalHistory,\n-        [field]: checked\n-      }\n-    }));\n-  };\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n-  useEffect(() => {\n-    const loadMembers = async () => {\n-      try {\n-        const allMembers = await dbManager.getAllMembers();\n-        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n-        const activeMembers = allMembers.filter(member => member.isActive);\n-        setMembers(activeMembers);\n-      } catch (error) {\n-        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-      }\n-    };\n-\n-    loadMembers();\n-  }, []);\n-\n-  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n-  useEffect(() => {\n-    const loadPrescription = async () => {\n-      if (!selectedMember) {\n-        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n-        setCurrentPrescription(null);\n-        setFormData({\n-          height: '',\n-          weight: '',\n-          footSize: '',\n-          medications: '',\n-          medicalHistory: {\n-            musculoskeletal: false,\n-            cardiovascular: false,\n-            diabetes: false,\n-            osteoporosis: false,\n-            thyroid: false,\n-            varicose: false,\n-            arthritis: false,\n-          },\n-          painHistory: '',\n-\n-        });\n-        return;\n-      }\n-\n-      try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n-        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n-        \n-        if (prescription) {\n-          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n-          setCurrentPrescription(prescription);\n-          setFormData({\n-            height: prescription.height,\n-            weight: prescription.weight,\n-            footSize: prescription.footSize,\n-            medications: prescription.medications,\n-            medicalHistory: prescription.medicalHistory,\n-            painHistory: prescription.painHistory,\n-\n-          });\n-          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n-        } else {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n-          setCurrentPrescription(null);\n-          setFormData({\n-            height: '',\n-            weight: '',\n-            footSize: '',\n-            medications: '',\n-            medicalHistory: {\n-              musculoskeletal: false,\n-              cardiovascular: false,\n-              diabetes: false,\n-              osteoporosis: false,\n-              thyroid: false,\n-              varicose: false,\n-              arthritis: false,\n-            },\n-            painHistory: '',\n-\n-          });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n-        }\n-      } catch (error) {\n-        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-      }\n-    };\n-\n-    loadPrescription();\n-  }, [selectedMember]);\n-\n-  const filteredMembers = members.filter(member =>\n-    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n-  );\n-\n-  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n-    try {\n-      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-      if (prescription) {\n-        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n-        const member = members.find(m => m.id === prescription.memberId);\n-        if (member) {\n-          setSelectedMember(member);\n-        }\n-        \n-        setCurrentPrescription(prescription);\n-        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n-        setFormData({\n-          height: prescription.height,\n-          weight: prescription.weight,\n-          footSize: prescription.footSize,\n-          medications: prescription.medications,\n-          medicalHistory: prescription.medicalHistory,\n-          painHistory: prescription.painHistory,\n-\n-        });\n-        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n-      }\n-    } catch (error) {\n-      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-    }\n-  }, [members]);\n-\n-  useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n-    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    const prescriptionIdParam = searchParams.get('prescriptionId');\n-    \n-    if (prescriptionIdParam) {\n-      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-      loadSpecificPrescription(prescriptionIdParam);\n-    } else if (userIdParam && members.length > 0) {\n-      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n-      const member = members.find(m => m.id === userIdParam);\n-      if (member) {\n-        setSelectedMember(member);\n-      }\n-    }\n-  }, [searchParams, members, loadSpecificPrescription]);\n-\n-  const handleMemberSelect = (member: Member) => {\n-    setSelectedMember(member);\n-  };\n-\n-  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ì»¨í…Œì´ë„ˆ ê¸°ì¤€ í¼ì„¼íŠ¸)\n-  const handleMouseMove = (event: React.MouseEvent) => {\n-    const target = event.currentTarget as HTMLElement;\n-    const rect = target.getBoundingClientRect();\n-    \n-    // ì»¨í…Œì´ë„ˆ ê¸°ì¤€ìœ¼ë¡œ í¼ì„¼íŠ¸ ì¢Œí‘œ ê³„ì‚°\n-    const x = ((event.clientX - rect.left) / rect.width) * 100;\n-    const y = ((event.clientY - rect.top) / rect.height) * 100;\n-\n-    setCurrentCoords({\n-      x: Math.round(x * 10) / 10, // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n-      y: Math.round(y * 10) / 10  // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n-    });\n-    setShowCoords(true);\n-  };\n-\n-  const handleMouseLeave = () => {\n-    setShowCoords(false);\n-    setCurrentCoords(null);\n-  };\n-\n-  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n-  const handlePointClick = (pointId: string) => {\n-    setSelectedPoints(prev => {\n-      const newSelected = new Set(prev);\n-      if (newSelected.has(pointId)) {\n-        newSelected.delete(pointId);\n-      } else {\n-        newSelected.add(pointId);\n-      }\n-      return newSelected;\n-    });\n-  };\n-\n-  // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n-  const [pagePoints, setPagePoints] = useState<{\n-    [pageNum: number]: {\n-      [pointId: string]: MusclePoint\n-    }\n-  }>({\n-    2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n-    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n-  });\n-\n-  // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n-  const [newPoint, setNewPoint] = useState({\n-    name: '',\n-    pointX: 0,\n-    pointY: 0,\n-    linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 2ì \n-    areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 3ì \n-    textBoxX: 0,\n-    textBoxY: 0,\n-    textBoxWidth: 10,\n-    textBoxHeight: 4\n-  });\n-\n-  const handleSave = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const prescriptionData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        height: formData.height,\n-        weight: formData.weight,\n-        footSize: formData.footSize,\n-        medications: formData.medications,\n-        medicalHistory: formData.medicalHistory,\n-        painHistory: formData.painHistory,\n-        bodyImages: { front: [], spine: [], back: [] },\n-        signatureData: '',\n-        signedAt: null,\n-        isActive: true,\n-        prescriptionDate: new Date(),\n-        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n-        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n-      };\n-\n-      if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      } else {\n-        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      }\n-      \n-      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    } catch (error) {\n-      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-\n-\n-\n-  const handleShare = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n-    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n-    \n-    try {\n-      if (navigator.share) {\n-        await navigator.share({\n-          title: 'ìš´ë™ì²˜ë°©ì„œ',\n-          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: currentUrl,\n-        });\n-      } else {\n-        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      }\n-    } catch (error) {\n-      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n-      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n-      try {\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      } catch {\n-        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n-      }\n-    }\n-  };\n-\n-  const handlePrint = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      // PDF ìƒì„±\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      \n-      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n-      const originalPage = currentPage;\n-      \n-      for (let page = 1; page <= 3; page++) {\n-        if (page > 1) {\n-          pdf.addPage();\n-        }\n-\n-        // í˜ì´ì§€ ë³€ê²½\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n-        if (!prescriptionRef.current) continue;\n-        \n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-\n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210;\n-        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-      }\n-\n-      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n-      setCurrentPage(originalPage);\n-\n-      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n-      const pdfBlob = pdf.output('blob');\n-      const pdfUrl = URL.createObjectURL(pdfBlob);\n-      \n-      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n-      const printWindow = window.open(pdfUrl, '_blank');\n-      if (printWindow) {\n-        printWindow.onload = () => {\n-          setTimeout(() => {\n-            printWindow.print();\n-          }, 1000);\n-        };\n-      }\n-    } catch (error) {\n-      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n-      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  const handleDownloadPDF = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      \n-      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n-      for (let page = 2; page <= 3; page++) {\n-        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n-        const originalPage = currentPage;\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        if (!prescriptionRef.current) continue;\n-        \n-        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-        \n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n-        const imgHeight = 297; // A4 ë†’ì´ (mm)\n-        \n-        // ì²« ë²ˆì§¸ PDF í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n-        if (page > 2) {\n-          pdf.addPage();\n-        }\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-        \n-        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n-        setCurrentPage(originalPage);\n-      }\n-      \n-      // PDF ë‹¤ìš´ë¡œë“œ\n-      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n-      pdf.save(fileName);\n-      \n-    } catch (error) {\n-      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n-      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  return (\n-    <PageContainer>\n-      {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n-      <CoordinateEditor $open={isCoordinateEditorOpen}>\n-        <h3>í˜ì´ì§€ {currentPage} - ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€</h3>\n-        \n-        <InputGroup>\n-          <InputLabel>ê·¼ìœ¡ ì´ë¦„</InputLabel>\n-          <CoordinateInput \n-            type=\"text\" \n-            placeholder=\"ì˜ˆ: ì‚¼ê°ê·¼\" \n-            value={newPoint.name}\n-            onChange={(e) => setNewPoint({ ...newPoint, name: e.target.value })}\n-            style={{ width: '100%' }}\n-          />\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n-          <CoordinateInput \n-            type=\"number\" \n-            placeholder=\"X\" \n-            value={newPoint.pointX}\n-            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n-          />\n-          <CoordinateInput \n-            type=\"number\" \n-            placeholder=\"Y\" \n-            value={newPoint.pointY}\n-            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n-          />\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n-          {newPoint.linePoints.map((point, index) => (\n-            <div key={index} style={{ marginBottom: '5px' }}>\n-              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"X\" \n-                value={point.x}\n-                onChange={(e) => {\n-                  const newLinePoints = [...newPoint.linePoints];\n-                  newLinePoints[index].x = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                }}\n-              />\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"Y\" \n-                value={point.y}\n-                onChange={(e) => {\n-                  const newLinePoints = [...newPoint.linePoints];\n-                  newLinePoints[index].y = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                }}\n-              />\n-              {index >= 2 && (\n-                <button \n-                  onClick={() => {\n-                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n-                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                  }}\n-                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n-                >\n-                  ì‚­ì œ\n-                </button>\n-              )}\n-            </div>\n-          ))}\n-          <button \n-            onClick={() => {\n-              setNewPoint({ \n-                ...newPoint, \n-                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n-              });\n-            }}\n-            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n-          >\n-            ì„  ì  ì¶”ê°€\n-          </button>\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n-          {newPoint.areaPoints.map((point, index) => (\n-            <div key={index} style={{ marginBottom: '5px' }}>\n-              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"X\" \n-                value={point.x}\n-                onChange={(e) => {\n-                  const newAreaPoints = [...newPoint.areaPoints];\n-                  newAreaPoints[index].x = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                }}\n-              />\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"Y\" \n-                value={point.y}\n-                onChange={(e) => {\n-                  const newAreaPoints = [...newPoint.areaPoints];\n-                  newAreaPoints[index].y = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                }}\n-              />\n-              {index >= 3 && (\n-                <button \n-                  onClick={() => {\n-                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n-                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                  }}\n-                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n-                >\n-                  ì‚­ì œ\n-                </button>\n-              )}\n-            </div>\n-          ))}\n-          <button \n-            onClick={() => {\n-              setNewPoint({ \n-                ...newPoint, \n-                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n-              });\n-            }}\n-            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n-          >\n-            ë©´ ì  ì¶”ê°€\n-          </button>\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n-          <div>\n-            <span style={{ fontSize: '11px' }}>X: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxX}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n-            />\n-            <span style={{ fontSize: '11px' }}>Y: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxY}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n-            />\n-          </div>\n-          <div style={{ marginTop: '5px' }}>\n-            <span style={{ fontSize: '11px' }}>W: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxWidth}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n-            />\n-            <span style={{ fontSize: '11px' }}>H: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxHeight}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n-            />\n-          </div>\n-        </InputGroup>\n-\n-        <button \n-          onClick={() => {\n-            if (newPoint.name.trim()) {\n-              const newId = `muscle_${Date.now()}`;\n-              const newPagePoints = { ...pagePoints };\n-              \n-              newPagePoints[currentPage] = {\n-                ...newPagePoints[currentPage],\n-                [newId]: {\n-                  id: newId,\n-                  name: newPoint.name,\n-                  point: { x: newPoint.pointX, y: newPoint.pointY },\n-                  linePoints: newPoint.linePoints,\n-                  areaPoints: newPoint.areaPoints,\n-                  textBox: { \n-                    x: newPoint.textBoxX, \n-                    y: newPoint.textBoxY, \n-                    width: newPoint.textBoxWidth, \n-                    height: newPoint.textBoxHeight \n-                  },\n-                  text: { \n-                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n-                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n-                  }\n-                }\n-              };\n-              \n-              setPagePoints(newPagePoints);\n-              \n-              // ì…ë ¥ í¼ ì´ˆê¸°í™”\n-              setNewPoint({\n-                name: '',\n-                pointX: 0,\n-                pointY: 0,\n-                linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }],\n-                areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }],\n-                textBoxX: 0,\n-                textBoxY: 0,\n-                textBoxWidth: 10,\n-                textBoxHeight: 4\n-              });\n-            } else {\n-              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n-            }\n-          }}\n-          style={{\n-            width: '100%',\n-            padding: '10px',\n-            background: AppColors.primary,\n-            color: 'white',\n-            border: 'none',\n-            borderRadius: '4px',\n-            cursor: 'pointer',\n-            marginTop: '15px'\n-          }}\n-        >\n-          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n-        </button>\n-\n-        <button \n-          onClick={() => {\n-            console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n-          }}\n-          style={{\n-            width: '100%',\n-            padding: '8px',\n-            background: AppColors.secondary,\n-            color: 'white',\n-            border: 'none',\n-            borderRadius: '4px',\n-            cursor: 'pointer',\n-            marginTop: '10px'\n-          }}\n-        >\n-          ì½˜ì†”ì— í˜„ì¬ í˜ì´ì§€ ë°ì´í„° ì¶œë ¥\n-        </button>\n-      </CoordinateEditor>\n-\n-      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n-        {!isSearchPanelCollapsed && (\n-          <>\n-            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n-        <SearchInput\n-          type=\"text\"\n-          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n-          value={searchTerm}\n-          onChange={(e) => setSearchTerm(e.target.value)}\n-        />\n-        <MemberList>\n-          {filteredMembers.map(member => (\n-            <MemberItem\n-              key={member.id}\n-              selected={selectedMember?.id === member.id}\n-              onClick={() => handleMemberSelect(member)}\n-            >\n-              <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birth}</MemberInfo>\n-              <MemberInfo>{member.phone}</MemberInfo>\n-            </MemberItem>\n-          ))}\n-          </MemberList>\n-          </>\n-        )}\n-      </SearchPanel>      <ButtonPanel>\n-        <ToggleButton \n-          $collapsed={isSearchPanelCollapsed}\n-          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n-          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n-        >\n-          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n-        </ToggleButton>\n-        \n-        <ActionButton \n-          onClick={handleSave} \n-          title=\"ì €ì¥\"\n-          disabled={isReadOnly}\n-        >\n-          ğŸ’¾\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          ğŸ“¤\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n-          ğŸ–¨ï¸\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n-          ğŸ“\n-        </ActionButton>\n-        \n-        <Divider />\n-        \n-        {/* <PageButton \n-          active={currentPage === 1}\n-          onClick={() => setCurrentPage(1)}\n-        >\n-          1\n-        </PageButton> */}\n-        \n-        <PageButton \n-          active={currentPage === 2}\n-          onClick={() => setCurrentPage(2)}\n-        >\n-          2\n-        </PageButton>\n-        \n-        {/* <PageButton \n-          active={currentPage === 3}\n-          onClick={() => setCurrentPage(3)}\n-        >\n-          3\n-        </PageButton> */}\n-      </ButtonPanel>\n-\n-      <PrescriptionPanel>\n-\n-\n-        <PrescriptionContainer ref={prescriptionRef}>\n-          \n-          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n-          {currentPage === 2 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div \n-                style={{ \n-                  display: 'flex', \n-                  justifyContent: 'center', \n-                  alignItems: 'center',\n-                  flex: 1,\n-                  position: 'relative'\n-                }}\n-                onMouseMove={handleMouseMove}\n-                onMouseLeave={handleMouseLeave}\n-              >\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n-                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-                \n-                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n-                <svg \n-                  style={{\n-                    position: 'absolute',\n-                    top: 0,\n-                    left: 0,\n-                    width: '100%',\n-                    height: '100%',\n-                    pointerEvents: 'auto'\n-                  }}\n-                  viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"none\"\n-                >\n-                  {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n-                  {showCoords && currentCoords && currentPage === 2 && (\n-                    <g>\n-                      <rect \n-                        x={currentCoords.x - 8} \n-                        y={currentCoords.y - 4} \n-                        width=\"16\" \n-                        height=\"3\" \n-                        fill=\"rgba(0, 0, 0, 0.8)\" \n-                        rx=\"0.5\"\n-                      />\n-                      <text \n-                        x={currentCoords.x} \n-                        y={currentCoords.y - 1} \n-                        textAnchor=\"middle\" \n-                        fontSize=\"1.2\" \n-                        fill=\"white\" \n-                        fontWeight=\"bold\"\n-                      >\n-                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n-                      </text>\n-                    </g>\n-                  )}\n-                  \n-                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n-                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n-                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n-                      <polygon \n-                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n-                        strokeWidth=\"0.05\"\n-                        style={{ cursor: 'pointer' }}\n-                      />\n-                      \n-                      {/* í¬ì¸í„° */}\n-                      <circle \n-                        cx={muscle.point.x} \n-                        cy={muscle.point.y} \n-                        r={selectedPoints.has(muscle.id) ? \"0.8\" : \"0.6\"} \n-                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0\"}\n-                      />\n-                      \n-                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n-                      {selectedPoints.has(muscle.id) && (\n-                        <polyline \n-                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          stroke=\"yellow\" \n-                          strokeWidth=\"0.4\" \n-                          fill=\"none\"\n-                        />\n-                      )}\n-                      \n-                      {/* ë©”ì¸ êº¾ì€ì„  */}\n-                      <polyline \n-                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"black\" \n-                        strokeWidth=\"0.15\" \n-                        fill=\"none\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n-                      <rect \n-                        x={muscle.textBox.x} \n-                        y={muscle.textBox.y} \n-                        width={muscle.textBox.width} \n-                        height={muscle.textBox.height} \n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n-                        strokeWidth=\"0.05\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ */}\n-                      <text \n-                        x={muscle.text.x} \n-                        y={muscle.text.y} \n-                        fontSize=\"1.2\" \n-                        fill=\"black\"\n-                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n-                        textAnchor=\"middle\"\n-                        dominantBaseline=\"middle\"\n-                      >\n-                        {muscle.name}\n-                      </text>\n-                    </g>\n-                  ))}\n-                </svg>\n-              </div>\n-            </div>\n-          )}\n-\n-\n-        </PrescriptionContainer>\n-      </PrescriptionPanel>\n-    </PageContainer>\n-  );\n-};\n-\n export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764674616239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -884,28 +884,28 @@\n             if (newPoint.name.trim()) {\n               const newId = `muscle_${Date.now()}`;\n               const newPagePoints = { ...pagePoints };\n               \n-              newPagePoints[currentPage] = {\n-                ...newPagePoints[currentPage],\n-                [newId]: {\n-                  id: newId,\n-                  name: newPoint.name,\n-                  point: { x: newPoint.pointX, y: newPoint.pointY },\n-                  linePoints: newPoint.linePoints,\n-                  areaPoints: newPoint.areaPoints,\n-                  textBox: { \n-                    x: newPoint.textBoxX, \n-                    y: newPoint.textBoxY, \n-                    width: newPoint.textBoxWidth, \n-                    height: newPoint.textBoxHeight \n-                  },\n-                  text: { \n-                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n-                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n-                  }\n-                }\n-              };\n+              // newPagePoints[currentPage] = {\n+              //   ...newPagePoints[currentPage],\n+              //   [newId]: {\n+              //     id: newId,\n+              //     name: newPoint.name,\n+              //     point: { x: newPoint.pointX, y: newPoint.pointY },\n+              //     linePoints: newPoint.linePoints,\n+              //     areaPoints: newPoint.areaPoints,\n+              //     textBox: { \n+              //       x: newPoint.textBoxX, \n+              //       y: newPoint.textBoxY, \n+              //       width: newPoint.textBoxWidth, \n+              //       height: newPoint.textBoxHeight \n+              //     },\n+              //     text: { \n+              //       x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n+              //       y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n+              //     }\n+              //   }\n+              // };\n               \n               setPagePoints(newPagePoints);\n               \n               // ì…ë ¥ í¼ ì´ˆê¸°í™”\n"
                },
                {
                    "date": 1764674624073,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n-import { frontMuscles } from '../constants/muscleCoordinates';\n+import { frontMuscles, backMuscles, MusclePoint } from '../constants/muscleCoordinates';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -488,14 +488,14 @@\n   };\n \n   // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n   const [pagePoints, setPagePoints] = useState<{\n-    // [pageNum: number]: {\n-    //   [pointId: string]: MusclePoint\n-    // }\n+    [pageNum: number]: {\n+      [pointId: string]: MusclePoint\n+    }\n   }>({\n     2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n-    // 3: backMuscles    \n+    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n   });\n \n   // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n   const [newPoint, setNewPoint] = useState({\n@@ -884,28 +884,28 @@\n             if (newPoint.name.trim()) {\n               const newId = `muscle_${Date.now()}`;\n               const newPagePoints = { ...pagePoints };\n               \n-              // newPagePoints[currentPage] = {\n-              //   ...newPagePoints[currentPage],\n-              //   [newId]: {\n-              //     id: newId,\n-              //     name: newPoint.name,\n-              //     point: { x: newPoint.pointX, y: newPoint.pointY },\n-              //     linePoints: newPoint.linePoints,\n-              //     areaPoints: newPoint.areaPoints,\n-              //     textBox: { \n-              //       x: newPoint.textBoxX, \n-              //       y: newPoint.textBoxY, \n-              //       width: newPoint.textBoxWidth, \n-              //       height: newPoint.textBoxHeight \n-              //     },\n-              //     text: { \n-              //       x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n-              //       y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n-              //     }\n-              //   }\n-              // };\n+              newPagePoints[currentPage] = {\n+                ...newPagePoints[currentPage],\n+                [newId]: {\n+                  id: newId,\n+                  name: newPoint.name,\n+                  point: { x: newPoint.pointX, y: newPoint.pointY },\n+                  linePoints: newPoint.linePoints,\n+                  areaPoints: newPoint.areaPoints,\n+                  textBox: { \n+                    x: newPoint.textBoxX, \n+                    y: newPoint.textBoxY, \n+                    width: newPoint.textBoxWidth, \n+                    height: newPoint.textBoxHeight \n+                  },\n+                  text: { \n+                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n+                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n+                  }\n+                }\n+              };\n               \n               setPagePoints(newPagePoints);\n               \n               // ì…ë ¥ í¼ ì´ˆê¸°í™”\n@@ -1134,9 +1134,9 @@\n                       <polygon \n                         points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n                         fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n                         stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n-                        strokeWidth=\"0.05\"\n+                        strokeWidth=\"0.1\"\n                         style={{ cursor: 'pointer' }}\n                       />\n                       \n                       {/* í¬ì¸í„° */}\n@@ -1153,18 +1153,18 @@\n                       {selectedPoints.has(muscle.id) && (\n                         <polyline \n                           points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n                           stroke=\"yellow\" \n-                          strokeWidth=\"0.4\" \n+                          strokeWidth=\"0.8\" \n                           fill=\"none\"\n                         />\n                       )}\n                       \n                       {/* ë©”ì¸ êº¾ì€ì„  */}\n                       <polyline \n                         points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n                         stroke=\"black\" \n-                        strokeWidth=\"0.15\" \n+                        strokeWidth=\"0.3\" \n                         fill=\"none\"\n                       />\n                       \n                       {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n"
                },
                {
                    "date": 1764676853438,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1133,10 +1133,10 @@\n                       {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n                       <polygon \n                         points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n                         fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"rgba(255, 255, 0, 0.5)\"}\n-                        strokeWidth=\"0.1\"\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"#0066ff\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0.3\"}\n                         style={{ cursor: 'pointer' }}\n                       />\n                       \n                       {/* í¬ì¸í„° */}\n"
                },
                {
                    "date": 1764759444001,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,16 @@\n import { AppColors } from '../styles/colors';\n import { AppTextStyles } from '../styles/textStyles';\n import { dbManager } from '../utils/indexedDB';\n import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n-import { frontMuscles, backMuscles, MusclePoint } from '../constants/muscleCoordinates';\n+import { \n+  frontMuscles, \n+  backMuscles, \n+  MusclePoint,\n+  isPointInPolygon,\n+  setMusclePoint,\n+  findMuscleAtPosition \n+} from '../constants/muscleCoordinates';\n \n const PageContainer = styled.div`\n   min-height: 100vh;\n   display: flex;\n@@ -509,8 +516,81 @@\n     textBoxWidth: 10,\n     textBoxHeight: 4\n   });\n \n+  // SVG í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ë™ì  í¬ì¸íŠ¸ ê¸°ëŠ¥)\n+  const handleSvgClick = (event: React.MouseEvent<SVGElement>) => {\n+    if (currentPage !== 2 && currentPage !== 3) return; // ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ ì‘ë™\n+    \n+    const svgElement = event.currentTarget;\n+    const rect = svgElement.getBoundingClientRect();\n+    const x = ((event.clientX - rect.left) / rect.width) * 100;\n+    const y = ((event.clientY - rect.top) / rect.height) * 100;\n+    \n+    const currentMuscles = pagePoints[currentPage];\n+    if (!currentMuscles) return;\n+    \n+    // í´ë¦­ëœ ìœ„ì¹˜ì— ìˆëŠ” ê·¼ìœ¡ ì°¾ê¸°\n+    const clickedMuscleId = findMuscleAtPosition({ x, y }, currentMuscles);\n+    \n+    if (clickedMuscleId) {\n+      const clickedMuscle = currentMuscles[clickedMuscleId];\n+      \n+      // ë™ì  ê·¼ìœ¡ì¸ ê²½ìš°ì—ë§Œ í¬ì¸íŠ¸ ë³€ê²½\n+      if (clickedMuscle.isDynamic) {\n+        const updatedMuscles = setMusclePoint(clickedMuscleId, { x, y }, currentMuscles);\n+        \n+        if (updatedMuscles) {\n+          setPagePoints({\n+            ...pagePoints,\n+            [currentPage]: updatedMuscles\n+          });\n+          \n+          // í•´ë‹¹ ê·¼ìœ¡ì„ ì„ íƒ ìƒíƒœë¡œ ì„¤ì •\n+          setSelectedPoints(new Set([clickedMuscleId]));\n+        }\n+      } else {\n+        // ì •ì  ê·¼ìœ¡ì¸ ê²½ìš° ë‹¨ìˆœíˆ ì„ íƒë§Œ ë³€ê²½\n+        setSelectedPoints(new Set([clickedMuscleId]));\n+      }\n+    }\n+  };\n+\n+  // ë™ì  ê·¼ìœ¡ í¬ì¸íŠ¸ ë¦¬ì…‹ ê¸°ëŠ¥\n+  const resetDynamicMuscle = (muscleId: string) => {\n+    const currentMuscles = pagePoints[currentPage];\n+    if (!currentMuscles) return;\n+    \n+    const muscle = currentMuscles[muscleId];\n+    if (!muscle || !muscle.isDynamic) return;\n+    \n+    // ì›ë³¸ ë°ì´í„°ì—ì„œ ê¸°ë³¸ê°’ ê°€ì ¸ì˜¤ê¸°\n+    const originalMuscles = currentPage === 2 ? frontMuscles : backMuscles;\n+    const originalMuscle = originalMuscles[muscleId];\n+    \n+    if (originalMuscle) {\n+      setPagePoints({\n+        ...pagePoints,\n+        [currentPage]: {\n+          ...currentMuscles,\n+          [muscleId]: {\n+            ...muscle,\n+            point: originalMuscle.point,\n+            linePoints: [...originalMuscle.linePoints],\n+            isSelected: false\n+          }\n+        }\n+      });\n+      \n+      // ì„ íƒ í•´ì œ\n+      setSelectedPoints(prev => {\n+        const newSet = new Set(prev);\n+        newSet.delete(muscleId);\n+        return newSet;\n+      });\n+    }\n+  };\n+\n   const handleSave = async () => {\n     if (!selectedMember) {\n       alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n       return;\n@@ -998,8 +1078,37 @@\n         >\n           ğŸ’¾\n         </ActionButton>\n         \n+        {/* ë™ì  ê·¼ìœ¡ ê´€ë¦¬ ë²„íŠ¼ë“¤ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n+        {(currentPage === 2 || currentPage === 3) && (\n+          <>\n+            <ActionButton \n+              onClick={() => {\n+                const currentMuscles = pagePoints[currentPage];\n+                const selectedMuscleIds = Array.from(selectedPoints);\n+                selectedMuscleIds.forEach(muscleId => {\n+                  if (currentMuscles[muscleId]?.isDynamic) {\n+                    resetDynamicMuscle(muscleId);\n+                  }\n+                });\n+              }} \n+              title=\"ì„ íƒëœ ë™ì  ê·¼ìœ¡ ë¦¬ì…‹\"\n+              disabled={selectedPoints.size === 0}\n+            >\n+              ğŸ”„\n+            </ActionButton>\n+            <ActionButton \n+              onClick={() => {\n+                setSelectedPoints(new Set());\n+              }} \n+              title=\"ëª¨ë“  ì„ íƒ í•´ì œ\"\n+            >\n+              âŒ\n+            </ActionButton>\n+          </>\n+        )}\n+        \n         <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n           ğŸ“¤\n         </ActionButton>\n         \n@@ -1026,19 +1135,33 @@\n         >\n           2\n         </PageButton>\n         \n-        {/* <PageButton \n+        <PageButton \n           active={currentPage === 3}\n           onClick={() => setCurrentPage(3)}\n         >\n           3\n-        </PageButton> */}\n+        </PageButton>\n       </ButtonPanel>\n \n       <PrescriptionPanel>\n+        {/* ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²• ì•ˆë‚´ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n+        {(currentPage === 2 || currentPage === 3) && (\n+          <div style={{\n+            padding: '8px 16px',\n+            backgroundColor: '#f0f8ff',\n+            border: '1px solid #b3d9ff',\n+            borderRadius: '4px',\n+            margin: '8px',\n+            fontSize: '12px',\n+            color: '#0066cc'\n+          }}>\n+            ğŸ’¡ <strong>ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²•:</strong> íŒŒë€ìƒ‰ ì ì„  ì˜ì—­ì€ í´ë¦­ìœ¼ë¡œ í¬ì¸íŠ¸ ìœ„ì¹˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n+            ì„ íƒëœ ê·¼ìœ¡ì€ ğŸ”„ ë²„íŠ¼ìœ¼ë¡œ ì›ë˜ ìœ„ì¹˜ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n+          </div>\n+        )}\n \n-\n         <PrescriptionContainer ref={prescriptionRef}>\n           \n           {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n           {currentPage === 2 && (\n@@ -1097,12 +1220,14 @@\n                     top: 0,\n                     left: 0,\n                     width: '100%',\n                     height: '100%',\n-                    pointerEvents: 'auto'\n+                    pointerEvents: 'auto',\n+                    cursor: currentPage === 2 || currentPage === 3 ? 'crosshair' : 'default'\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"none\"\n+                  onClick={handleSvgClick}\n                 >\n                   {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n                   {showCoords && currentCoords && currentPage === 2 && (\n                     <g>\n@@ -1132,22 +1257,47 @@\n                     <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n                       {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n                       <polygon \n                         points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"#0066ff\"}\n+                        fill={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"rgba(255, 165, 0, 0.3)\" \n+                            : muscle.isDynamic \n+                              ? \"rgba(100, 200, 255, 0.2)\" \n+                              : \"rgba(255, 255, 0, 0.2)\"\n+                        }\n+                        stroke={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"orange\" \n+                            : muscle.isDynamic \n+                              ? \"#0088ff\" \n+                              : \"#0066ff\"\n+                        }\n                         strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0.3\"}\n-                        style={{ cursor: 'pointer' }}\n+                        strokeDasharray={muscle.isDynamic ? \"1,1\" : \"none\"}\n+                        style={{ cursor: muscle.isDynamic ? 'crosshair' : 'pointer' }}\n                       />\n                       \n                       {/* í¬ì¸í„° */}\n                       <circle \n                         cx={muscle.point.x} \n                         cy={muscle.point.y} \n                         r={selectedPoints.has(muscle.id) ? \"0.8\" : \"0.6\"} \n-                        fill={selectedPoints.has(muscle.id) ? \"orange\" : \"yellow\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"red\" : \"none\"}\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0\"}\n+                        fill={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"orange\" \n+                            : muscle.isDynamic \n+                              ? \"#00aaff\" \n+                              : \"yellow\"\n+                        }\n+                        stroke={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"red\" \n+                            : muscle.isDynamic \n+                              ? \"#0088ff\" \n+                              : \"none\"\n+                        }\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : muscle.isDynamic ? \"0.05\" : \"0\"}\n                       />\n                       \n                       {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n                       {selectedPoints.has(muscle.id) && (\n"
                },
                {
                    "date": 1765602127614,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1357 @@\n+import React, { useEffect, useState, useCallback, useRef } from 'react';\n+import { useSearchParams } from 'react-router-dom';\n+import styled from 'styled-components';\n+import html2canvas from 'html2canvas';\n+import jsPDF from 'jspdf';\n+import { AppColors } from '../styles/colors';\n+import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n+import { \n+  frontMuscles, \n+  backMuscles, \n+  MusclePoint,\n+  isPointInPolygon,\n+  setMusclePoint,\n+  findMuscleAtPosition \n+} from '../constants/muscleCoordinates';\n+\n+const PageContainer = styled.div`\n+  min-height: 100vh;\n+  display: flex;\n+  background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n+`;\n+\n+const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n+  width: ${props => props.$collapsed ? '0px' : '300px'};\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: ${props => props.$collapsed ? '0' : '20px'};\n+  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n+  transition: all 0.3s ease;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n+  width: 55px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 10px 2px;\n+  display: ${props => props.$hidden ? 'none' : 'flex'};\n+  flex-direction: column;\n+  gap: 6px;\n+  align-items: stretch;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n+  width: 100%;\n+  height: 36px;\n+  border: none;\n+  border-radius: 6px;\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n+  font-size: 16px;\n+  font-weight: 600;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+  }\n+`;\n+\n+const PageButton = styled.button<{ active?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.active ? AppColors.primary : 'white'};\n+  color: ${props => props.active ? 'white' : '#333'};\n+  font-size: 14px;\n+  font-weight: ${props => props.active ? 'bold' : 'normal'};\n+  cursor: pointer;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n+  }\n+`;\n+\n+const Divider = styled.div`\n+  height: 1px;\n+  background: ${AppColors.borderLight};\n+  margin: 10px 0;\n+`;\n+\n+const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n+  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  font-size: 14px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${AppColors.primary};\n+    color: ${AppColors.onPrimary};\n+  }\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  box-sizing: border-box;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  width: 210mm;\n+  height: 297mm;\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  box-sizing: border-box;\n+  overflow: hidden;\n+  \n+  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n+  scrollbar-width: none; /* Firefox */\n+  -ms-overflow-style: none; /* IE/Edge */\n+  \n+  &::-webkit-scrollbar {\n+    display: none; /* Chrome, Safari, Opera */\n+  }\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20mm;\n+    margin: 0;\n+    max-width: none;\n+    width: 210mm;\n+    height: 297mm;\n+    overflow: visible;\n+  }\n+  \n+  @media screen and (max-width: 900px) {\n+    width: 100%;\n+    height: auto;\n+    min-height: calc(100vh - 40px);\n+  }\n+`;\n+\n+\n+\n+\n+\n+const CoordinateEditor = styled.div<{ $open?: boolean }>`\n+  position: fixed;\n+  left: ${props => props.$open ? '320px' : '-400px'};\n+  top: 20px;\n+  width: 350px;\n+  height: calc(100vh - 40px);\n+  background: white;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  padding: 20px;\n+  overflow-y: auto;\n+  transition: left 0.3s ease;\n+  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n+  z-index: 1000;\n+`;\n+\n+\n+\n+const InputGroup = styled.div`\n+  margin-bottom: 15px;\n+`;\n+\n+const InputLabel = styled.label`\n+  display: block;\n+  margin-bottom: 5px;\n+  font-size: 12px;\n+  font-weight: bold;\n+  color: ${AppColors.onSurface};\n+`;\n+\n+const CoordinateInput = styled.input`\n+  width: 60px;\n+  padding: 4px 6px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 3px;\n+  font-size: 12px;\n+  margin-right: 5px;\n+`;\n+\n+\n+\n+const ExercisePrescriptionPage: React.FC = () => {\n+  const [searchParams] = useSearchParams();\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n+  const [currentPage, setCurrentPage] = useState(2); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (2í˜ì´ì§€ë¡œ ì‹œì‘)\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n+  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n+  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n+  const [showCoords, setShowCoords] = useState(false);\n+  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: ''\n+  });\n+\n+  // ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value\n+    }));\n+  };\n+\n+  // ì²´í¬ë°•ìŠ¤ ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleCheckboxChange = (field: string, checked: boolean) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      medicalHistory: {\n+        ...prev.medicalHistory,\n+        [field]: checked\n+      }\n+    }));\n+  };\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n+\n+    loadMembers();\n+  }, []);\n+\n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+\n+          });\n+          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n+  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n+    try {\n+      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+      if (prescription) {\n+        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n+        const member = members.find(m => m.id === prescription.memberId);\n+        if (member) {\n+          setSelectedMember(member);\n+        }\n+        \n+        setCurrentPrescription(prescription);\n+        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n+        setFormData({\n+          height: prescription.height,\n+          weight: prescription.weight,\n+          footSize: prescription.footSize,\n+          medications: prescription.medications,\n+          medicalHistory: prescription.medicalHistory,\n+          painHistory: prescription.painHistory,\n+\n+        });\n+        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n+      }\n+    } catch (error) {\n+      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [members]);\n+\n+  useEffect(() => {\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    const prescriptionIdParam = searchParams.get('prescriptionId');\n+    \n+    if (prescriptionIdParam) {\n+      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+      loadSpecificPrescription(prescriptionIdParam);\n+    } else if (userIdParam && members.length > 0) {\n+      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n+      const member = members.find(m => m.id === userIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n+    }\n+  }, [searchParams, members, loadSpecificPrescription]);\n+\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ì»¨í…Œì´ë„ˆ ê¸°ì¤€ í¼ì„¼íŠ¸)\n+  const handleMouseMove = (event: React.MouseEvent) => {\n+    const target = event.currentTarget as HTMLElement;\n+    const rect = target.getBoundingClientRect();\n+    \n+    // ì»¨í…Œì´ë„ˆ ê¸°ì¤€ìœ¼ë¡œ í¼ì„¼íŠ¸ ì¢Œí‘œ ê³„ì‚°\n+    const x = ((event.clientX - rect.left) / rect.width) * 100;\n+    const y = ((event.clientY - rect.top) / rect.height) * 100;\n+\n+    setCurrentCoords({\n+      x: Math.round(x * 10) / 10, // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n+      y: Math.round(y * 10) / 10  // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n+    });\n+    setShowCoords(true);\n+  };\n+\n+  const handleMouseLeave = () => {\n+    setShowCoords(false);\n+    setCurrentCoords(null);\n+  };\n+\n+  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n+  const handlePointClick = (pointId: string) => {\n+    setSelectedPoints(prev => {\n+      const newSelected = new Set(prev);\n+      if (newSelected.has(pointId)) {\n+        newSelected.delete(pointId);\n+      } else {\n+        newSelected.add(pointId);\n+      }\n+      return newSelected;\n+    });\n+  };\n+\n+  // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n+  const [pagePoints, setPagePoints] = useState<{\n+    [pageNum: number]: {\n+      [pointId: string]: MusclePoint\n+    }\n+  }>({\n+    2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n+    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n+  });\n+\n+  // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n+  const [newPoint, setNewPoint] = useState({\n+    name: '',\n+    pointX: 0,\n+    pointY: 0,\n+    linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 2ì \n+    areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 3ì \n+    textBoxX: 0,\n+    textBoxY: 0,\n+    textBoxWidth: 10,\n+    textBoxHeight: 4\n+  });\n+\n+  // SVG í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ë™ì  í¬ì¸íŠ¸ ê¸°ëŠ¥)\n+  const handleSvgClick = (event: React.MouseEvent<SVGElement>) => {\n+    if (currentPage !== 2 && currentPage !== 3) return; // ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ ì‘ë™\n+    \n+    const svgElement = event.currentTarget;\n+    const rect = svgElement.getBoundingClientRect();\n+    const x = ((event.clientX - rect.left) / rect.width) * 100;\n+    const y = ((event.clientY - rect.top) / rect.height) * 100;\n+    \n+    const currentMuscles = pagePoints[currentPage];\n+    if (!currentMuscles) return;\n+    \n+    // í´ë¦­ëœ ìœ„ì¹˜ì— ìˆëŠ” ê·¼ìœ¡ ì°¾ê¸°\n+    const clickedMuscleId = findMuscleAtPosition({ x, y }, currentMuscles);\n+    \n+    if (clickedMuscleId) {\n+      const clickedMuscle = currentMuscles[clickedMuscleId];\n+      \n+      // ë™ì  ê·¼ìœ¡ì¸ ê²½ìš°ì—ë§Œ í¬ì¸íŠ¸ ë³€ê²½\n+      if (clickedMuscle.isDynamic) {\n+        const updatedMuscles = setMusclePoint(clickedMuscleId, { x, y }, currentMuscles);\n+        \n+        if (updatedMuscles) {\n+          setPagePoints({\n+            ...pagePoints,\n+            [currentPage]: updatedMuscles\n+          });\n+          \n+          // í•´ë‹¹ ê·¼ìœ¡ì„ ì„ íƒ ìƒíƒœë¡œ ì„¤ì •\n+          setSelectedPoints(new Set([clickedMuscleId]));\n+        }\n+      } else {\n+        // ì •ì  ê·¼ìœ¡ì¸ ê²½ìš° ë‹¨ìˆœíˆ ì„ íƒë§Œ ë³€ê²½\n+        setSelectedPoints(new Set([clickedMuscleId]));\n+      }\n+    }\n+  };\n+\n+  // ë™ì  ê·¼ìœ¡ í¬ì¸íŠ¸ ë¦¬ì…‹ ê¸°ëŠ¥\n+  const resetDynamicMuscle = (muscleId: string) => {\n+    const currentMuscles = pagePoints[currentPage];\n+    if (!currentMuscles) return;\n+    \n+    const muscle = currentMuscles[muscleId];\n+    if (!muscle || !muscle.isDynamic) return;\n+    \n+    // ì›ë³¸ ë°ì´í„°ì—ì„œ ê¸°ë³¸ê°’ ê°€ì ¸ì˜¤ê¸°\n+    const originalMuscles = currentPage === 2 ? frontMuscles : backMuscles;\n+    const originalMuscle = originalMuscles[muscleId];\n+    \n+    if (originalMuscle) {\n+      setPagePoints({\n+        ...pagePoints,\n+        [currentPage]: {\n+          ...currentMuscles,\n+          [muscleId]: {\n+            ...muscle,\n+            point: originalMuscle.point,\n+            linePoints: [...originalMuscle.linePoints],\n+            isSelected: false\n+          }\n+        }\n+      });\n+      \n+      // ì„ íƒ í•´ì œ\n+      setSelectedPoints(prev => {\n+        const newSet = new Set(prev);\n+        newSet.delete(muscleId);\n+        return newSet;\n+      });\n+    }\n+  };\n+\n+  const handleSave = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: { front: [], spine: [], back: [] },\n+        signatureData: '',\n+        signedAt: null,\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n+        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n+      };\n+\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+\n+\n+\n+  const handleShare = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n+    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n+    \n+    try {\n+      if (navigator.share) {\n+        await navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: currentUrl,\n+        });\n+      } else {\n+        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      }\n+    } catch (error) {\n+      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n+      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n+      try {\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      } catch {\n+        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n+      }\n+    }\n+  };\n+\n+  const handlePrint = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      // PDF ìƒì„±\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n+      const originalPage = currentPage;\n+      \n+      for (let page = 1; page <= 3; page++) {\n+        if (page > 1) {\n+          pdf.addPage();\n+        }\n+\n+        // í˜ì´ì§€ ë³€ê²½\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n+        if (!prescriptionRef.current) continue;\n+        \n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+\n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210;\n+        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+      }\n+\n+      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n+      setCurrentPage(originalPage);\n+\n+      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n+      const pdfBlob = pdf.output('blob');\n+      const pdfUrl = URL.createObjectURL(pdfBlob);\n+      \n+      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n+      const printWindow = window.open(pdfUrl, '_blank');\n+      if (printWindow) {\n+        printWindow.onload = () => {\n+          setTimeout(() => {\n+            printWindow.print();\n+          }, 1000);\n+        };\n+      }\n+    } catch (error) {\n+      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n+      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  const handleDownloadPDF = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n+      for (let page = 2; page <= 3; page++) {\n+        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n+        const originalPage = currentPage;\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        if (!prescriptionRef.current) continue;\n+        \n+        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+        \n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n+        const imgHeight = 297; // A4 ë†’ì´ (mm)\n+        \n+        // ì²« ë²ˆì§¸ PDF í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n+        if (page > 2) {\n+          pdf.addPage();\n+        }\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+        \n+        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n+        setCurrentPage(originalPage);\n+      }\n+      \n+      // PDF ë‹¤ìš´ë¡œë“œ\n+      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n+      pdf.save(fileName);\n+      \n+    } catch (error) {\n+      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n+      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  return (\n+    <PageContainer>\n+      {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n+      <CoordinateEditor $open={isCoordinateEditorOpen}>\n+        <h3>í˜ì´ì§€ {currentPage} - ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€</h3>\n+        \n+        <InputGroup>\n+          <InputLabel>ê·¼ìœ¡ ì´ë¦„</InputLabel>\n+          <CoordinateInput \n+            type=\"text\" \n+            placeholder=\"ì˜ˆ: ì‚¼ê°ê·¼\" \n+            value={newPoint.name}\n+            onChange={(e) => setNewPoint({ ...newPoint, name: e.target.value })}\n+            style={{ width: '100%' }}\n+          />\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"X\" \n+            value={newPoint.pointX}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n+          />\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"Y\" \n+            value={newPoint.pointY}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n+          />\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n+          {newPoint.linePoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={point.x}\n+                onChange={(e) => {\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={point.y}\n+                onChange={(e) => {\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                }}\n+              />\n+              {index >= 2 && (\n+                <button \n+                  onClick={() => {\n+                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n+            </div>\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ì„  ì  ì¶”ê°€\n+          </button>\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n+          {newPoint.areaPoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={point.x}\n+                onChange={(e) => {\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={point.y}\n+                onChange={(e) => {\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                }}\n+              />\n+              {index >= 3 && (\n+                <button \n+                  onClick={() => {\n+                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n+            </div>\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ë©´ ì  ì¶”ê°€\n+          </button>\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n+          <div>\n+            <span style={{ fontSize: '11px' }}>X: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxX}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n+            />\n+            <span style={{ fontSize: '11px' }}>Y: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxY}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n+            />\n+          </div>\n+          <div style={{ marginTop: '5px' }}>\n+            <span style={{ fontSize: '11px' }}>W: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxWidth}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n+            />\n+            <span style={{ fontSize: '11px' }}>H: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxHeight}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n+            />\n+          </div>\n+        </InputGroup>\n+\n+        <button \n+          onClick={() => {\n+            if (newPoint.name.trim()) {\n+              const newId = `muscle_${Date.now()}`;\n+              const newPagePoints = { ...pagePoints };\n+              \n+              newPagePoints[currentPage] = {\n+                ...newPagePoints[currentPage],\n+                [newId]: {\n+                  id: newId,\n+                  name: newPoint.name,\n+                  point: { x: newPoint.pointX, y: newPoint.pointY },\n+                  linePoints: newPoint.linePoints,\n+                  areaPoints: newPoint.areaPoints,\n+                  textBox: { \n+                    x: newPoint.textBoxX, \n+                    y: newPoint.textBoxY, \n+                    width: newPoint.textBoxWidth, \n+                    height: newPoint.textBoxHeight \n+                  },\n+                  text: { \n+                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n+                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n+                  }\n+                }\n+              };\n+              \n+              setPagePoints(newPagePoints);\n+              \n+              // ì…ë ¥ í¼ ì´ˆê¸°í™”\n+              setNewPoint({\n+                name: '',\n+                pointX: 0,\n+                pointY: 0,\n+                linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }],\n+                areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }],\n+                textBoxX: 0,\n+                textBoxY: 0,\n+                textBoxWidth: 10,\n+                textBoxHeight: 4\n+              });\n+            } else {\n+              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n+            }\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '10px',\n+            background: AppColors.primary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '15px'\n+          }}\n+        >\n+          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n+        </button>\n+\n+        <button \n+          onClick={() => {\n+            console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '8px',\n+            background: AppColors.secondary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '10px'\n+          }}\n+        >\n+          ì½˜ì†”ì— í˜„ì¬ í˜ì´ì§€ ë°ì´í„° ì¶œë ¥\n+        </button>\n+      </CoordinateEditor>\n+\n+      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n+        {!isSearchPanelCollapsed && (\n+          <>\n+            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birth}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+          </MemberList>\n+          </>\n+        )}\n+      </SearchPanel>      <ButtonPanel>\n+        <ToggleButton \n+          $collapsed={isSearchPanelCollapsed}\n+          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n+          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n+        >\n+          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n+        </ToggleButton>\n+        \n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={isReadOnly}\n+        >\n+          ğŸ’¾\n+        </ActionButton>\n+        \n+        {/* ë™ì  ê·¼ìœ¡ ê´€ë¦¬ ë²„íŠ¼ë“¤ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n+        {(currentPage === 2 || currentPage === 3) && (\n+          <>\n+            <ActionButton \n+              onClick={() => {\n+                const currentMuscles = pagePoints[currentPage];\n+                const selectedMuscleIds = Array.from(selectedPoints);\n+                selectedMuscleIds.forEach(muscleId => {\n+                  if (currentMuscles[muscleId]?.isDynamic) {\n+                    resetDynamicMuscle(muscleId);\n+                  }\n+                });\n+              }} \n+              title=\"ì„ íƒëœ ë™ì  ê·¼ìœ¡ ë¦¬ì…‹\"\n+              disabled={selectedPoints.size === 0}\n+            >\n+              ğŸ”„\n+            </ActionButton>\n+            <ActionButton \n+              onClick={() => {\n+                setSelectedPoints(new Set());\n+              }} \n+              title=\"ëª¨ë“  ì„ íƒ í•´ì œ\"\n+            >\n+              âŒ\n+            </ActionButton>\n+          </>\n+        )}\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          ğŸ“¤\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n+          ğŸ–¨ï¸\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n+          ğŸ“\n+        </ActionButton>\n+        \n+        <Divider />\n+        \n+        {/* <PageButton \n+          active={currentPage === 1}\n+          onClick={() => setCurrentPage(1)}\n+        >\n+          1\n+        </PageButton> */}\n+        \n+        <PageButton \n+          active={currentPage === 2}\n+          onClick={() => setCurrentPage(2)}\n+        >\n+          2\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 3}\n+          onClick={() => setCurrentPage(3)}\n+        >\n+          3\n+        </PageButton>\n+      </ButtonPanel>\n+\n+      <PrescriptionPanel>\n+        {/* ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²• ì•ˆë‚´ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n+        {(currentPage === 2 || currentPage === 3) && (\n+          <div style={{\n+            padding: '8px 16px',\n+            backgroundColor: '#f0f8ff',\n+            border: '1px solid #b3d9ff',\n+            borderRadius: '4px',\n+            margin: '8px',\n+            fontSize: '12px',\n+            color: '#0066cc'\n+          }}>\n+            ğŸ’¡ <strong>ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²•:</strong> íŒŒë€ìƒ‰ ì ì„  ì˜ì—­ì€ í´ë¦­ìœ¼ë¡œ í¬ì¸íŠ¸ ìœ„ì¹˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n+            ì„ íƒëœ ê·¼ìœ¡ì€ ğŸ”„ ë²„íŠ¼ìœ¼ë¡œ ì›ë˜ ìœ„ì¹˜ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n+          </div>\n+        )}\n+\n+        <PrescriptionContainer ref={prescriptionRef}>\n+          \n+          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n+          {currentPage === 2 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n+              <div \n+                style={{ \n+                  display: 'flex', \n+                  justifyContent: 'center', \n+                  alignItems: 'center',\n+                  flex: 1,\n+                  position: 'relative'\n+                }}\n+                onMouseMove={handleMouseMove}\n+                onMouseLeave={handleMouseLeave}\n+              >\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n+                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+                \n+                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'auto',\n+                    cursor: currentPage === 2 || currentPage === 3 ? 'crosshair' : 'default'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"none\"\n+                  onClick={handleSvgClick}\n+                >\n+                  {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n+                  {showCoords && currentCoords && currentPage === 2 && (\n+                    <g>\n+                      <rect \n+                        x={currentCoords.x - 8} \n+                        y={currentCoords.y - 4} \n+                        width=\"16\" \n+                        height=\"3\" \n+                        fill=\"rgba(0, 0, 0, 0.8)\" \n+                        rx=\"0.5\"\n+                      />\n+                      <text \n+                        x={currentCoords.x} \n+                        y={currentCoords.y - 1} \n+                        textAnchor=\"middle\" \n+                        fontSize=\"1.2\" \n+                        fill=\"white\" \n+                        fontWeight=\"bold\"\n+                      >\n+                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n+                      </text>\n+                    </g>\n+                  )}\n+                  \n+                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n+                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n+                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n+                      <polygon \n+                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n+                        fill={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"rgba(255, 165, 0, 0.3)\" \n+                            : muscle.isDynamic \n+                              ? \"rgba(100, 200, 255, 0.2)\" \n+                              : \"rgba(255, 255, 0, 0.2)\"\n+                        }\n+                        stroke={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"orange\" \n+                            : muscle.isDynamic \n+                              ? \"#0088ff\" \n+                              : \"#0066ff\"\n+                        }\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0.3\"}\n+                        strokeDasharray={muscle.isDynamic ? \"1,1\" : \"none\"}\n+                        style={{ cursor: muscle.isDynamic ? 'crosshair' : 'pointer' }}\n+                      />\n+                      \n+                      {/* í¬ì¸í„° */}\n+                      <circle \n+                        cx={muscle.point.x} \n+                        cy={muscle.point.y} \n+                        r={selectedPoints.has(muscle.id) ? \"0.8\" : \"0.6\"} \n+                        fill={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"orange\" \n+                            : muscle.isDynamic \n+                              ? \"#00aaff\" \n+                              : \"yellow\"\n+                        }\n+                        stroke={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"red\" \n+                            : muscle.isDynamic \n+                              ? \"#0088ff\" \n+                              : \"none\"\n+                        }\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : muscle.isDynamic ? \"0.05\" : \"0\"}\n+                      />\n+                      \n+                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n+                      {selectedPoints.has(muscle.id) && (\n+                        <polyline \n+                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"yellow\" \n+                          strokeWidth=\"0.4\" \n+                          fill=\"none\"\n+                        />\n+                      )}\n+                      \n+                      {/* ë©”ì¸ êº¾ì€ì„  */}\n+                      <polyline \n+                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"black\" \n+                        strokeWidth=\"0.15\" \n+                        fill=\"none\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n+                      <rect \n+                        x={muscle.textBox.x} \n+                        y={muscle.textBox.y} \n+                        width={muscle.textBox.width} \n+                        height={muscle.textBox.height} \n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        strokeWidth=\"0.05\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x={muscle.text.x} \n+                        y={muscle.text.y} \n+                        fontSize=\"1.2\" \n+                        fill=\"black\"\n+                        fontWeight={selectedPoints.has(muscle.id) ? \"900\" : \"bold\"}\n+                        textAnchor=\"middle\"\n+                        dominantBaseline=\"middle\"\n+                      >\n+                        {muscle.name}\n+                      </text>\n+                    </g>\n+                  ))}\n+                </svg>\n+              </div>\n+            </div>\n+          )}\n+\n+\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n+    </PageContainer>\n+  );\n+};\n+\n+export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765602796218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1350 @@\n+import React, { useEffect, useState, useCallback, useRef } from 'react';\n+import { useSearchParams } from 'react-router-dom';\n+import styled from 'styled-components';\n+import html2canvas from 'html2canvas';\n+import jsPDF from 'jspdf';\n+import { AppColors } from '../styles/colors';\n+import { AppTextStyles } from '../styles/textStyles';\n+import { dbManager } from '../utils/indexedDB';\n+import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n+import { \n+  frontMuscles, \n+  backMuscles, \n+  MusclePoint,\n+  isPointInPolygon,\n+  setMusclePoint,\n+  findMuscleAtPosition \n+} from '../constants/muscleCoordinates';\n+\n+const PageContainer = styled.div`\n+  min-height: 100vh;\n+  display: flex;\n+  background: ${AppColors.background};\n+  \n+  @media print {\n+    display: block;\n+    background: white;\n+  }\n+`;\n+\n+const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n+  width: ${props => props.$collapsed ? '0px' : '300px'};\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: ${props => props.$collapsed ? '0' : '20px'};\n+  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n+  transition: all 0.3s ease;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n+  width: 55px;\n+  background: ${AppColors.surface};\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding: 10px 2px;\n+  display: ${props => props.$hidden ? 'none' : 'flex'};\n+  flex-direction: column;\n+  gap: 6px;\n+  align-items: stretch;\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+const ActionButton = styled.button<{ disabled?: boolean }>`\n+  width: 100%;\n+  height: 36px;\n+  border: none;\n+  border-radius: 6px;\n+  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n+  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n+  font-size: 16px;\n+  font-weight: 600;\n+  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n+  }\n+`;\n+\n+const PageButton = styled.button<{ active?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.active ? AppColors.primary : 'white'};\n+  color: ${props => props.active ? 'white' : '#333'};\n+  font-size: 14px;\n+  font-weight: ${props => props.active ? 'bold' : 'normal'};\n+  cursor: pointer;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n+  }\n+`;\n+\n+const Divider = styled.div`\n+  height: 1px;\n+  background: ${AppColors.borderLight};\n+  margin: 10px 0;\n+`;\n+\n+const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n+  width: 100%;\n+  height: 32px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 4px;\n+  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n+  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: center;\n+  font-size: 14px;\n+  transition: all 0.2s ease;\n+  \n+  &:hover {\n+    background: ${AppColors.primary};\n+    color: ${AppColors.onPrimary};\n+  }\n+  \n+  @media print {\n+    display: none;\n+  }\n+`;\n+\n+\n+\n+const SearchTitle = styled.h2`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 20px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  margin-bottom: 16px;\n+  box-sizing: border-box;\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const MemberList = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+`;\n+\n+const MemberItem = styled.div<{ selected?: boolean }>`\n+  padding: 12px;\n+  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n+  border-radius: 8px;\n+  margin-bottom: 8px;\n+  cursor: pointer;\n+  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n+  \n+  &:hover {\n+    background: ${AppColors.primary}20;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const PrescriptionPanel = styled.div`\n+  flex: 1;\n+  padding: 20px;\n+  overflow-y: auto;\n+  \n+  @media print {\n+    padding: 0;\n+    overflow: visible;\n+  }\n+`;\n+\n+const PrescriptionContainer = styled.div`\n+  width: 210mm;\n+  height: 297mm;\n+  max-width: 800px;\n+  margin: 0 auto;\n+  background: white;\n+  padding: 40px;\n+  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n+  box-sizing: border-box;\n+  overflow: hidden;\n+  \n+  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n+  scrollbar-width: none; /* Firefox */\n+  -ms-overflow-style: none; /* IE/Edge */\n+  \n+  &::-webkit-scrollbar {\n+    display: none; /* Chrome, Safari, Opera */\n+  }\n+  \n+  @media print {\n+    box-shadow: none;\n+    padding: 20mm;\n+    margin: 0;\n+    max-width: none;\n+    width: 210mm;\n+    height: 297mm;\n+    overflow: visible;\n+  }\n+  \n+  @media screen and (max-width: 900px) {\n+    width: 100%;\n+    height: auto;\n+    min-height: calc(100vh - 40px);\n+  }\n+`;\n+\n+\n+\n+\n+\n+const CoordinateEditor = styled.div<{ $open?: boolean }>`\n+  position: fixed;\n+  left: ${props => props.$open ? '320px' : '-400px'};\n+  top: 20px;\n+  width: 350px;\n+  height: calc(100vh - 40px);\n+  background: white;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  padding: 20px;\n+  overflow-y: auto;\n+  transition: left 0.3s ease;\n+  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n+  z-index: 1000;\n+`;\n+\n+\n+\n+const InputGroup = styled.div`\n+  margin-bottom: 15px;\n+`;\n+\n+const InputLabel = styled.label`\n+  display: block;\n+  margin-bottom: 5px;\n+  font-size: 12px;\n+  font-weight: bold;\n+  color: ${AppColors.onSurface};\n+`;\n+\n+const CoordinateInput = styled.input`\n+  width: 60px;\n+  padding: 4px 6px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 3px;\n+  font-size: 12px;\n+  margin-right: 5px;\n+`;\n+\n+\n+\n+const ExercisePrescriptionPage: React.FC = () => {\n+  const [searchParams] = useSearchParams();\n+  const [searchTerm, setSearchTerm] = useState('');\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [members, setMembers] = useState<Member[]>([]);\n+  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n+  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n+  const [currentPage, setCurrentPage] = useState(3); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (3í˜ì´ì§€ë¡œ ì‹œì‘)\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n+  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n+  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n+  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n+  const [showCoords, setShowCoords] = useState(false);\n+  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n+  const [formData, setFormData] = useState({\n+    height: '',\n+    weight: '',\n+    footSize: '',\n+    medications: '',\n+    medicalHistory: {\n+      musculoskeletal: false,\n+      cardiovascular: false,\n+      diabetes: false,\n+      osteoporosis: false,\n+      thyroid: false,\n+      varicose: false,\n+      arthritis: false,\n+    } as ExercisePrescriptionMedicalHistory,\n+    painHistory: ''\n+  });\n+\n+  // ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleInputChange = (field: string, value: string) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      [field]: value\n+    }));\n+  };\n+\n+  // ì²´í¬ë°•ìŠ¤ ë³€ê²½ í•¸ë“¤ëŸ¬\n+  const handleCheckboxChange = (field: string, checked: boolean) => {\n+    setFormData(prev => ({\n+      ...prev,\n+      medicalHistory: {\n+        ...prev.medicalHistory,\n+        [field]: checked\n+      }\n+    }));\n+  };\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n+  useEffect(() => {\n+    const loadMembers = async () => {\n+      try {\n+        const allMembers = await dbManager.getAllMembers();\n+        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n+        const activeMembers = allMembers.filter(member => member.isActive);\n+        setMembers(activeMembers);\n+      } catch (error) {\n+        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+      }\n+    };\n+\n+    loadMembers();\n+  }, []);\n+\n+  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n+  useEffect(() => {\n+    const loadPrescription = async () => {\n+      if (!selectedMember) {\n+        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n+        setCurrentPrescription(null);\n+        setFormData({\n+          height: '',\n+          weight: '',\n+          footSize: '',\n+          medications: '',\n+          medicalHistory: {\n+            musculoskeletal: false,\n+            cardiovascular: false,\n+            diabetes: false,\n+            osteoporosis: false,\n+            thyroid: false,\n+            varicose: false,\n+            arthritis: false,\n+          },\n+          painHistory: '',\n+\n+        });\n+        return;\n+      }\n+\n+      try {\n+        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n+        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n+        \n+        if (prescription) {\n+          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n+          setCurrentPrescription(prescription);\n+          setFormData({\n+            height: prescription.height,\n+            weight: prescription.weight,\n+            footSize: prescription.footSize,\n+            medications: prescription.medications,\n+            medicalHistory: prescription.medicalHistory,\n+            painHistory: prescription.painHistory,\n+\n+          });\n+          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n+        } else {\n+          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n+          setCurrentPrescription(null);\n+          setFormData({\n+            height: '',\n+            weight: '',\n+            footSize: '',\n+            medications: '',\n+            medicalHistory: {\n+              musculoskeletal: false,\n+              cardiovascular: false,\n+              diabetes: false,\n+              osteoporosis: false,\n+              thyroid: false,\n+              varicose: false,\n+              arthritis: false,\n+            },\n+            painHistory: '',\n+\n+          });\n+          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n+        }\n+      } catch (error) {\n+        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+      }\n+    };\n+\n+    loadPrescription();\n+  }, [selectedMember]);\n+\n+  const filteredMembers = members.filter(member =>\n+    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n+  );\n+\n+  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n+    try {\n+      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+      if (prescription) {\n+        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n+        const member = members.find(m => m.id === prescription.memberId);\n+        if (member) {\n+          setSelectedMember(member);\n+        }\n+        \n+        setCurrentPrescription(prescription);\n+        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n+        setFormData({\n+          height: prescription.height,\n+          weight: prescription.weight,\n+          footSize: prescription.footSize,\n+          medications: prescription.medications,\n+          medicalHistory: prescription.medicalHistory,\n+          painHistory: prescription.painHistory,\n+\n+        });\n+        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n+      }\n+    } catch (error) {\n+      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [members]);\n+\n+  useEffect(() => {\n+    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n+    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n+    const prescriptionIdParam = searchParams.get('prescriptionId');\n+    \n+    if (prescriptionIdParam) {\n+      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n+      loadSpecificPrescription(prescriptionIdParam);\n+    } else if (userIdParam && members.length > 0) {\n+      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n+      const member = members.find(m => m.id === userIdParam);\n+      if (member) {\n+        setSelectedMember(member);\n+      }\n+    }\n+  }, [searchParams, members, loadSpecificPrescription]);\n+\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+  };\n+\n+  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ì»¨í…Œì´ë„ˆ ê¸°ì¤€ í¼ì„¼íŠ¸)\n+  const handleMouseMove = (event: React.MouseEvent) => {\n+    const target = event.currentTarget as HTMLElement;\n+    const rect = target.getBoundingClientRect();\n+    \n+    // ì»¨í…Œì´ë„ˆ ê¸°ì¤€ìœ¼ë¡œ í¼ì„¼íŠ¸ ì¢Œí‘œ ê³„ì‚°\n+    const x = ((event.clientX - rect.left) / rect.width) * 100;\n+    const y = ((event.clientY - rect.top) / rect.height) * 100;\n+\n+    setCurrentCoords({\n+      x: Math.round(x * 10) / 10, // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n+      y: Math.round(y * 10) / 10  // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n+    });\n+    setShowCoords(true);\n+  };\n+\n+  const handleMouseLeave = () => {\n+    setShowCoords(false);\n+    setCurrentCoords(null);\n+  };\n+\n+  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n+  const handlePointClick = (pointId: string) => {\n+    setSelectedPoints(prev => {\n+      const newSelected = new Set(prev);\n+      if (newSelected.has(pointId)) {\n+        newSelected.delete(pointId);\n+      } else {\n+        newSelected.add(pointId);\n+      }\n+      return newSelected;\n+    });\n+  };\n+\n+  // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n+  const [pagePoints, setPagePoints] = useState<{\n+    [pageNum: number]: {\n+      [pointId: string]: MusclePoint\n+    }\n+  }>({\n+    2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n+    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n+  });\n+\n+  // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n+  const [newPoint, setNewPoint] = useState({\n+    name: '',\n+    pointX: 0,\n+    pointY: 0,\n+    linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 2ì \n+    areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 3ì \n+    textBoxX: 0,\n+    textBoxY: 0,\n+    textBoxWidth: 10,\n+    textBoxHeight: 4\n+  });\n+\n+  // SVG í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ë™ì  í¬ì¸íŠ¸ ê¸°ëŠ¥)\n+  const handleSvgClick = (event: React.MouseEvent<SVGElement>) => {\n+    if (currentPage !== 2 && currentPage !== 3) return; // ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ ì‘ë™\n+    \n+    const svgElement = event.currentTarget;\n+    const rect = svgElement.getBoundingClientRect();\n+    const x = ((event.clientX - rect.left) / rect.width) * 100;\n+    const y = ((event.clientY - rect.top) / rect.height) * 100;\n+    \n+    const currentMuscles = pagePoints[currentPage];\n+    if (!currentMuscles) return;\n+    \n+    // í´ë¦­ëœ ìœ„ì¹˜ì— ìˆëŠ” ê·¼ìœ¡ ì°¾ê¸°\n+    const clickedMuscleId = findMuscleAtPosition({ x, y }, currentMuscles);\n+    \n+    if (clickedMuscleId) {\n+      const clickedMuscle = currentMuscles[clickedMuscleId];\n+      \n+      // ë™ì  ê·¼ìœ¡ì¸ ê²½ìš°ì—ë§Œ í¬ì¸íŠ¸ ë³€ê²½\n+      if (clickedMuscle.isDynamic) {\n+        const updatedMuscles = setMusclePoint(clickedMuscleId, { x, y }, currentMuscles);\n+        \n+        if (updatedMuscles) {\n+          setPagePoints({\n+            ...pagePoints,\n+            [currentPage]: updatedMuscles\n+          });\n+          \n+          // í•´ë‹¹ ê·¼ìœ¡ì„ ì„ íƒ ìƒíƒœë¡œ ì„¤ì •\n+          setSelectedPoints(new Set([clickedMuscleId]));\n+        }\n+      } else {\n+        // ì •ì  ê·¼ìœ¡ì¸ ê²½ìš° ë‹¨ìˆœíˆ ì„ íƒë§Œ ë³€ê²½\n+        setSelectedPoints(new Set([clickedMuscleId]));\n+      }\n+    }\n+  };\n+\n+  // ë™ì  ê·¼ìœ¡ í¬ì¸íŠ¸ ë¦¬ì…‹ ê¸°ëŠ¥\n+  const resetDynamicMuscle = (muscleId: string) => {\n+    const currentMuscles = pagePoints[currentPage];\n+    if (!currentMuscles) return;\n+    \n+    const muscle = currentMuscles[muscleId];\n+    if (!muscle || !muscle.isDynamic) return;\n+    \n+    // ì›ë³¸ ë°ì´í„°ì—ì„œ ê¸°ë³¸ê°’ ê°€ì ¸ì˜¤ê¸°\n+    const originalMuscles = currentPage === 2 ? frontMuscles : backMuscles;\n+    const originalMuscle = originalMuscles[muscleId];\n+    \n+    if (originalMuscle) {\n+      setPagePoints({\n+        ...pagePoints,\n+        [currentPage]: {\n+          ...currentMuscles,\n+          [muscleId]: {\n+            ...muscle,\n+            point: originalMuscle.point,\n+            linePoints: [...originalMuscle.linePoints],\n+            isSelected: false\n+          }\n+        }\n+      });\n+      \n+      // ì„ íƒ í•´ì œ\n+      setSelectedPoints(prev => {\n+        const newSet = new Set(prev);\n+        newSet.delete(muscleId);\n+        return newSet;\n+      });\n+    }\n+  };\n+\n+  const handleSave = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const prescriptionData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        height: formData.height,\n+        weight: formData.weight,\n+        footSize: formData.footSize,\n+        medications: formData.medications,\n+        medicalHistory: formData.medicalHistory,\n+        painHistory: formData.painHistory,\n+        bodyImages: { front: [], spine: [], back: [] },\n+        signatureData: '',\n+        signedAt: null,\n+        isActive: true,\n+        prescriptionDate: new Date(),\n+        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n+        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n+      };\n+\n+      if (currentPrescription) {\n+        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      } else {\n+        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n+        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n+        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n+        \n+        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n+        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n+        setCurrentPrescription(savedPrescription);\n+      }\n+      \n+      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    } catch (error) {\n+      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n+      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+\n+\n+\n+  const handleShare = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n+    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n+    \n+    try {\n+      if (navigator.share) {\n+        await navigator.share({\n+          title: 'ìš´ë™ì²˜ë°©ì„œ',\n+          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n+          url: currentUrl,\n+        });\n+      } else {\n+        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      }\n+    } catch (error) {\n+      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n+      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n+      try {\n+        await navigator.clipboard.writeText(currentUrl);\n+        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      } catch {\n+        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n+      }\n+    }\n+  };\n+\n+  const handlePrint = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      // PDF ìƒì„±\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n+      const originalPage = currentPage;\n+      \n+      for (let page = 1; page <= 3; page++) {\n+        if (page > 1) {\n+          pdf.addPage();\n+        }\n+\n+        // í˜ì´ì§€ ë³€ê²½\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n+        if (!prescriptionRef.current) continue;\n+        \n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+\n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210;\n+        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+      }\n+\n+      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n+      setCurrentPage(originalPage);\n+\n+      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n+      const pdfBlob = pdf.output('blob');\n+      const pdfUrl = URL.createObjectURL(pdfBlob);\n+      \n+      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n+      const printWindow = window.open(pdfUrl, '_blank');\n+      if (printWindow) {\n+        printWindow.onload = () => {\n+          setTimeout(() => {\n+            printWindow.print();\n+          }, 1000);\n+        };\n+      }\n+    } catch (error) {\n+      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n+      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  const handleDownloadPDF = async () => {\n+    if (!selectedMember) {\n+      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      const pdf = new jsPDF('p', 'mm', 'a4');\n+      \n+      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n+      for (let page = 2; page <= 3; page++) {\n+        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n+        const originalPage = currentPage;\n+        setCurrentPage(page);\n+        \n+        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n+        await new Promise(resolve => setTimeout(resolve, 100));\n+        \n+        if (!prescriptionRef.current) continue;\n+        \n+        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n+        const canvas = await html2canvas(prescriptionRef.current, {\n+          scale: 2,\n+          useCORS: true,\n+          allowTaint: true,\n+          backgroundColor: '#ffffff'\n+        });\n+        \n+        const imgData = canvas.toDataURL('image/png');\n+        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n+        const imgHeight = 297; // A4 ë†’ì´ (mm)\n+        \n+        // ì²« ë²ˆì§¸ PDF í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n+        if (page > 2) {\n+          pdf.addPage();\n+        }\n+        \n+        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n+        \n+        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n+        setCurrentPage(originalPage);\n+      }\n+      \n+      // PDF ë‹¤ìš´ë¡œë“œ\n+      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n+      pdf.save(fileName);\n+      \n+    } catch (error) {\n+      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n+      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n+    }\n+  };\n+\n+  return (\n+    <PageContainer>\n+      {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n+      <CoordinateEditor $open={isCoordinateEditorOpen}>\n+        <h3>í˜ì´ì§€ {currentPage} - ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€</h3>\n+        \n+        <InputGroup>\n+          <InputLabel>ê·¼ìœ¡ ì´ë¦„</InputLabel>\n+          <CoordinateInput \n+            type=\"text\" \n+            placeholder=\"ì˜ˆ: ì‚¼ê°ê·¼\" \n+            value={newPoint.name}\n+            onChange={(e) => setNewPoint({ ...newPoint, name: e.target.value })}\n+            style={{ width: '100%' }}\n+          />\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"X\" \n+            value={newPoint.pointX}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n+          />\n+          <CoordinateInput \n+            type=\"number\" \n+            placeholder=\"Y\" \n+            value={newPoint.pointY}\n+            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n+          />\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n+          {newPoint.linePoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={point.x}\n+                onChange={(e) => {\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={point.y}\n+                onChange={(e) => {\n+                  const newLinePoints = [...newPoint.linePoints];\n+                  newLinePoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                }}\n+              />\n+              {index >= 2 && (\n+                <button \n+                  onClick={() => {\n+                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n+            </div>\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ì„  ì  ì¶”ê°€\n+          </button>\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n+          {newPoint.areaPoints.map((point, index) => (\n+            <div key={index} style={{ marginBottom: '5px' }}>\n+              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"X\" \n+                value={point.x}\n+                onChange={(e) => {\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].x = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                }}\n+              />\n+              <CoordinateInput \n+                type=\"number\" \n+                placeholder=\"Y\" \n+                value={point.y}\n+                onChange={(e) => {\n+                  const newAreaPoints = [...newPoint.areaPoints];\n+                  newAreaPoints[index].y = Number(e.target.value);\n+                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                }}\n+              />\n+              {index >= 3 && (\n+                <button \n+                  onClick={() => {\n+                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n+                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n+                  }}\n+                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n+                >\n+                  ì‚­ì œ\n+                </button>\n+              )}\n+            </div>\n+          ))}\n+          <button \n+            onClick={() => {\n+              setNewPoint({ \n+                ...newPoint, \n+                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n+              });\n+            }}\n+            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n+          >\n+            ë©´ ì  ì¶”ê°€\n+          </button>\n+        </InputGroup>\n+\n+        <InputGroup>\n+          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n+          <div>\n+            <span style={{ fontSize: '11px' }}>X: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxX}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n+            />\n+            <span style={{ fontSize: '11px' }}>Y: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxY}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n+            />\n+          </div>\n+          <div style={{ marginTop: '5px' }}>\n+            <span style={{ fontSize: '11px' }}>W: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxWidth}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n+            />\n+            <span style={{ fontSize: '11px' }}>H: </span>\n+            <CoordinateInput \n+              type=\"number\" \n+              value={newPoint.textBoxHeight}\n+              onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n+            />\n+          </div>\n+        </InputGroup>\n+\n+        <button \n+          onClick={() => {\n+            if (newPoint.name.trim()) {\n+              const newId = `muscle_${Date.now()}`;\n+              const newPagePoints = { ...pagePoints };\n+              \n+              newPagePoints[currentPage] = {\n+                ...newPagePoints[currentPage],\n+                [newId]: {\n+                  id: newId,\n+                  name: newPoint.name,\n+                  point: { x: newPoint.pointX, y: newPoint.pointY },\n+                  linePoints: newPoint.linePoints,\n+                  areaPoints: newPoint.areaPoints,\n+                  textBox: { \n+                    x: newPoint.textBoxX, \n+                    y: newPoint.textBoxY, \n+                    width: newPoint.textBoxWidth, \n+                    height: newPoint.textBoxHeight \n+                  },\n+                  text: { \n+                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n+                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n+                  }\n+                }\n+              };\n+              \n+              setPagePoints(newPagePoints);\n+              \n+              // ì…ë ¥ í¼ ì´ˆê¸°í™”\n+              setNewPoint({\n+                name: '',\n+                pointX: 0,\n+                pointY: 0,\n+                linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }],\n+                areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }],\n+                textBoxX: 0,\n+                textBoxY: 0,\n+                textBoxWidth: 10,\n+                textBoxHeight: 4\n+              });\n+            } else {\n+              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n+            }\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '10px',\n+            background: AppColors.primary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '15px'\n+          }}\n+        >\n+          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n+        </button>\n+\n+        <button \n+          onClick={() => {\n+            console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n+          }}\n+          style={{\n+            width: '100%',\n+            padding: '8px',\n+            background: AppColors.secondary,\n+            color: 'white',\n+            border: 'none',\n+            borderRadius: '4px',\n+            cursor: 'pointer',\n+            marginTop: '10px'\n+          }}\n+        >\n+          ì½˜ì†”ì— í˜„ì¬ í˜ì´ì§€ ë°ì´í„° ì¶œë ¥\n+        </button>\n+      </CoordinateEditor>\n+\n+      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n+        {!isSearchPanelCollapsed && (\n+          <>\n+            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n+        <SearchInput\n+          type=\"text\"\n+          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n+          value={searchTerm}\n+          onChange={(e) => setSearchTerm(e.target.value)}\n+        />\n+        <MemberList>\n+          {filteredMembers.map(member => (\n+            <MemberItem\n+              key={member.id}\n+              selected={selectedMember?.id === member.id}\n+              onClick={() => handleMemberSelect(member)}\n+            >\n+              <MemberName>{member.name}</MemberName>\n+              <MemberInfo>{member.birth}</MemberInfo>\n+              <MemberInfo>{member.phone}</MemberInfo>\n+            </MemberItem>\n+          ))}\n+          </MemberList>\n+          </>\n+        )}\n+      </SearchPanel>      <ButtonPanel>\n+        <ToggleButton \n+          $collapsed={isSearchPanelCollapsed}\n+          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n+          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n+        >\n+          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n+        </ToggleButton>\n+        \n+        <ActionButton \n+          onClick={handleSave} \n+          title=\"ì €ì¥\"\n+          disabled={isReadOnly}\n+        >\n+          ğŸ’¾\n+        </ActionButton>\n+        \n+        {/* ë™ì  ê·¼ìœ¡ ê´€ë¦¬ ë²„íŠ¼ë“¤ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n+        {(currentPage === 2 || currentPage === 3) && (\n+          <>\n+            <ActionButton \n+              onClick={() => {\n+                const currentMuscles = pagePoints[currentPage];\n+                const selectedMuscleIds = Array.from(selectedPoints);\n+                selectedMuscleIds.forEach(muscleId => {\n+                  if (currentMuscles[muscleId]?.isDynamic) {\n+                    resetDynamicMuscle(muscleId);\n+                  }\n+                });\n+              }} \n+              title=\"ì„ íƒëœ ë™ì  ê·¼ìœ¡ ë¦¬ì…‹\"\n+              disabled={selectedPoints.size === 0}\n+            >\n+              ğŸ”„\n+            </ActionButton>\n+            <ActionButton \n+              onClick={() => {\n+                setSelectedPoints(new Set());\n+              }} \n+              title=\"ëª¨ë“  ì„ íƒ í•´ì œ\"\n+            >\n+              âŒ\n+            </ActionButton>\n+          </>\n+        )}\n+        \n+        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n+          ğŸ“¤\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n+          ğŸ–¨ï¸\n+        </ActionButton>\n+        \n+        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n+          ğŸ“\n+        </ActionButton>\n+        \n+        <Divider />\n+        \n+        {/* <PageButton \n+          active={currentPage === 1}\n+          onClick={() => setCurrentPage(1)}\n+        >\n+          1\n+        </PageButton> */}\n+        \n+        <PageButton \n+          active={currentPage === 2}\n+          onClick={() => setCurrentPage(2)}\n+        >\n+          2\n+        </PageButton>\n+        \n+        <PageButton \n+          active={currentPage === 3}\n+          onClick={() => setCurrentPage(3)}\n+        >\n+          3\n+        </PageButton>\n+      </ButtonPanel>\n+\n+      <PrescriptionPanel>\n+        {/* ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²• ì•ˆë‚´ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n+        {(currentPage === 2 || currentPage === 3) && (\n+          <div style={{\n+            padding: '8px 16px',\n+            backgroundColor: '#f0f8ff',\n+            border: '1px solid #b3d9ff',\n+            borderRadius: '4px',\n+            margin: '8px',\n+            fontSize: '12px',\n+            color: '#0066cc'\n+          }}>\n+            ğŸ’¡ <strong>ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²•:</strong> íŒŒë€ìƒ‰ ì ì„  ì˜ì—­ì€ í´ë¦­ìœ¼ë¡œ í¬ì¸íŠ¸ ìœ„ì¹˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n+            ì„ íƒëœ ê·¼ìœ¡ì€ ğŸ”„ ë²„íŠ¼ìœ¼ë¡œ ì›ë˜ ìœ„ì¹˜ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n+          </div>\n+        )}\n+\n+        <PrescriptionContainer ref={prescriptionRef}>\n+          \n+          {/* í˜ì´ì§€ 2: Target Muscles (Front) - ì„ì‹œ ì£¼ì„ ì²˜ë¦¬\n+          {currentPage === 2 && (\n+            <div>ì „ë©´ ê·¼ìœ¡ í˜ì´ì§€ ë‚´ìš©</div>\n+          )}\n+          */}\n+\n+          {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n+          {currentPage === 3 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List (Back)</div>\n+              \n+              {/* í›„ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n+              <div \n+                style={{ \n+                  display: 'flex', \n+                  justifyContent: 'center', \n+                  alignItems: 'center',\n+                  flex: 1,\n+                  position: 'relative'\n+                }}\n+                onMouseMove={handleMouseMove}\n+                onMouseLeave={handleMouseLeave}\n+              >\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/back.png`} \n+                  alt=\"ì¸ì²´ í›„ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+                \n+                {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'auto',\n+                    cursor: currentPage === 2 || currentPage === 3 ? 'crosshair' : 'default'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"none\"\n+                  onClick={handleSvgClick}\n+                >\n+                  {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n+                  {showCoords && currentCoords && currentPage === 3 && (\n+                    <g>\n+                      <rect \n+                        x={currentCoords.x - 8} \n+                        y={currentCoords.y - 4} \n+                        width=\"16\" \n+                        height=\"3\" \n+                        fill=\"rgba(0, 0, 0, 0.8)\" \n+                        rx=\"0.5\"\n+                      />\n+                      <text \n+                        x={currentCoords.x} \n+                        y={currentCoords.y - 1} \n+                        textAnchor=\"middle\" \n+                        fontSize=\"1.2\" \n+                        fill=\"white\" \n+                        fontWeight=\"bold\"\n+                      >\n+                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n+                      </text>\n+                    </g>\n+                  )}\n+                  \n+                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n+                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n+                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n+                      <polygon \n+                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"#0066ff\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0.3\"}\n+                        strokeDasharray={muscle.isDynamic ? \"1,1\" : \"none\"}\n+                        style={{ cursor: muscle.isDynamic ? 'crosshair' : 'pointer' }}\n+                      />\n+                      \n+                      {/* í¬ì¸í„° */}\n+                      <circle \n+                        cx={muscle.point.x} \n+                        cy={muscle.point.y} \n+                        r={selectedPoints.has(muscle.id) ? \"0.8\" : \"0.6\"} \n+                        fill={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"orange\" \n+                            : muscle.isDynamic \n+                              ? \"#00aaff\" \n+                              : \"yellow\"\n+                        }\n+                        stroke={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"red\" \n+                            : muscle.isDynamic \n+                              ? \"#0088ff\" \n+                              : \"none\"\n+                        }\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : muscle.isDynamic ? \"0.05\" : \"0\"}\n+                      />\n+                      \n+                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n+                      {selectedPoints.has(muscle.id) && (\n+                        <polyline \n+                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"yellow\" \n+                          strokeWidth=\"0.4\" \n+                          fill=\"none\"\n+                        />\n+                      )}\n+                      \n+                      {/* ë©”ì¸ êº¾ì€ì„  */}\n+                      <polyline \n+                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"black\" \n+                        strokeWidth=\"0.15\" \n+                        fill=\"none\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n+                      <rect \n+                        x={muscle.textBox.x} \n+                        y={muscle.textBox.y} \n+                        width={muscle.textBox.width} \n+                        height={muscle.textBox.height} \n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        strokeWidth=\"0.05\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x={muscle.text.x} \n+                        y={muscle.text.y} \n+                        fontSize=\"1.2\" \n+                        fill=\"black\"\n+                        fontWeight={selectedPoints.has(muscle.id) ? \"900\" : \"bold\"}\n+                        textAnchor=\"middle\"\n+                        dominantBaseline=\"middle\"\n+                      >\n+                        {muscle.name}\n+                      </text>\n+                    </g>\n+                  ))}\n+                </svg>\n+              </div>\n+            </div>\n+          )}\n+\n+        </PrescriptionContainer>\n+      </PrescriptionPanel>\n+    </PageContainer>\n+  );\n+};\n+\n+export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765602882412,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1079,9 +1079,9 @@\n           ğŸ’¾\n         </ActionButton>\n         \n         {/* ë™ì  ê·¼ìœ¡ ê´€ë¦¬ ë²„íŠ¼ë“¤ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n-        {(currentPage === 2 || currentPage === 3) && (\n+        {currentPage === 3 && (\n           <>\n             <ActionButton \n               onClick={() => {\n                 const currentMuscles = pagePoints[currentPage];\n@@ -1145,9 +1145,9 @@\n       </ButtonPanel>\n \n       <PrescriptionPanel>\n         {/* ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²• ì•ˆë‚´ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n-        {(currentPage === 2 || currentPage === 3) && (\n+        {currentPage === 3 && (\n           <div style={{\n             padding: '8px 16px',\n             backgroundColor: '#f0f8ff',\n             border: '1px solid #b3d9ff',\n@@ -1227,9 +1227,9 @@\n                     left: 0,\n                     width: '100%',\n                     height: '100%',\n                     pointerEvents: 'auto',\n-                    cursor: currentPage === 2 || currentPage === 3 ? 'crosshair' : 'default'\n+                    cursor: currentPage === 3 ? 'crosshair' : 'default'\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"none\"\n                   onClick={handleSvgClick}\n@@ -1346,2719 +1346,5 @@\n     </PageContainer>\n   );\n };\n \n-export default ExercisePrescriptionPage;\n-import React, { useEffect, useState, useCallback, useRef } from 'react';\n-import { useSearchParams } from 'react-router-dom';\n-import styled from 'styled-components';\n-import html2canvas from 'html2canvas';\n-import jsPDF from 'jspdf';\n-import { AppColors } from '../styles/colors';\n-import { AppTextStyles } from '../styles/textStyles';\n-import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n-import { \n-  frontMuscles, \n-  backMuscles, \n-  MusclePoint,\n-  isPointInPolygon,\n-  setMusclePoint,\n-  findMuscleAtPosition \n-} from '../constants/muscleCoordinates';\n-\n-const PageContainer = styled.div`\n-  min-height: 100vh;\n-  display: flex;\n-  background: ${AppColors.background};\n-  \n-  @media print {\n-    display: block;\n-    background: white;\n-  }\n-`;\n-\n-const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n-  width: ${props => props.$collapsed ? '0px' : '300px'};\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: ${props => props.$collapsed ? '0' : '20px'};\n-  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n-  transition: all 0.3s ease;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n-  width: 55px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 10px 2px;\n-  display: ${props => props.$hidden ? 'none' : 'flex'};\n-  flex-direction: column;\n-  gap: 6px;\n-  align-items: stretch;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 100%;\n-  height: 36px;\n-  border: none;\n-  border-radius: 6px;\n-  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n-  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: 16px;\n-  font-weight: 600;\n-  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-  }\n-`;\n-\n-const PageButton = styled.button<{ active?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.active ? AppColors.primary : 'white'};\n-  color: ${props => props.active ? 'white' : '#333'};\n-  font-size: 14px;\n-  font-weight: ${props => props.active ? 'bold' : 'normal'};\n-  cursor: pointer;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n-  }\n-`;\n-\n-const Divider = styled.div`\n-  height: 1px;\n-  background: ${AppColors.borderLight};\n-  margin: 10px 0;\n-`;\n-\n-const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n-  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n-  cursor: pointer;\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  font-size: 14px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${AppColors.primary};\n-    color: ${AppColors.onPrimary};\n-  }\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-\n-\n-const SearchTitle = styled.h2`\n-  font-size: ${AppTextStyles.title2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SearchInput = styled.input`\n-  width: 100%;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  margin-bottom: 16px;\n-  box-sizing: border-box;\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const MemberList = styled.div`\n-  max-height: 400px;\n-  overflow-y: auto;\n-`;\n-\n-const MemberItem = styled.div<{ selected?: boolean }>`\n-  padding: 12px;\n-  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 8px;\n-  margin-bottom: 8px;\n-  cursor: pointer;\n-  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n-  \n-  &:hover {\n-    background: ${AppColors.primary}20;\n-  }\n-`;\n-\n-const MemberName = styled.div`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 4px;\n-`;\n-\n-const MemberInfo = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const PrescriptionPanel = styled.div`\n-  flex: 1;\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    padding: 0;\n-    overflow: visible;\n-  }\n-`;\n-\n-const PrescriptionContainer = styled.div`\n-  width: 210mm;\n-  height: 297mm;\n-  max-width: 800px;\n-  margin: 0 auto;\n-  background: white;\n-  padding: 40px;\n-  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  box-sizing: border-box;\n-  overflow: hidden;\n-  \n-  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n-  scrollbar-width: none; /* Firefox */\n-  -ms-overflow-style: none; /* IE/Edge */\n-  \n-  &::-webkit-scrollbar {\n-    display: none; /* Chrome, Safari, Opera */\n-  }\n-  \n-  @media print {\n-    box-shadow: none;\n-    padding: 20mm;\n-    margin: 0;\n-    max-width: none;\n-    width: 210mm;\n-    height: 297mm;\n-    overflow: visible;\n-  }\n-  \n-  @media screen and (max-width: 900px) {\n-    width: 100%;\n-    height: auto;\n-    min-height: calc(100vh - 40px);\n-  }\n-`;\n-\n-\n-\n-\n-\n-const CoordinateEditor = styled.div<{ $open?: boolean }>`\n-  position: fixed;\n-  left: ${props => props.$open ? '320px' : '-400px'};\n-  top: 20px;\n-  width: 350px;\n-  height: calc(100vh - 40px);\n-  background: white;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  padding: 20px;\n-  overflow-y: auto;\n-  transition: left 0.3s ease;\n-  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n-  z-index: 1000;\n-`;\n-\n-\n-\n-const InputGroup = styled.div`\n-  margin-bottom: 15px;\n-`;\n-\n-const InputLabel = styled.label`\n-  display: block;\n-  margin-bottom: 5px;\n-  font-size: 12px;\n-  font-weight: bold;\n-  color: ${AppColors.onSurface};\n-`;\n-\n-const CoordinateInput = styled.input`\n-  width: 60px;\n-  padding: 4px 6px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 3px;\n-  font-size: 12px;\n-  margin-right: 5px;\n-`;\n-\n-\n-\n-const ExercisePrescriptionPage: React.FC = () => {\n-  const [searchParams] = useSearchParams();\n-  const [searchTerm, setSearchTerm] = useState('');\n-  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n-  const [members, setMembers] = useState<Member[]>([]);\n-  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n-  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(2); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (2í˜ì´ì§€ë¡œ ì‹œì‘)\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n-  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n-  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n-  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n-  const [showCoords, setShowCoords] = useState(false);\n-  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n-  const [formData, setFormData] = useState({\n-    height: '',\n-    weight: '',\n-    footSize: '',\n-    medications: '',\n-    medicalHistory: {\n-      musculoskeletal: false,\n-      cardiovascular: false,\n-      diabetes: false,\n-      osteoporosis: false,\n-      thyroid: false,\n-      varicose: false,\n-      arthritis: false,\n-    } as ExercisePrescriptionMedicalHistory,\n-    painHistory: ''\n-  });\n-\n-  // ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value\n-    }));\n-  };\n-\n-  // ì²´í¬ë°•ìŠ¤ ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleCheckboxChange = (field: string, checked: boolean) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      medicalHistory: {\n-        ...prev.medicalHistory,\n-        [field]: checked\n-      }\n-    }));\n-  };\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n-  useEffect(() => {\n-    const loadMembers = async () => {\n-      try {\n-        const allMembers = await dbManager.getAllMembers();\n-        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n-        const activeMembers = allMembers.filter(member => member.isActive);\n-        setMembers(activeMembers);\n-      } catch (error) {\n-        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-      }\n-    };\n-\n-    loadMembers();\n-  }, []);\n-\n-  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n-  useEffect(() => {\n-    const loadPrescription = async () => {\n-      if (!selectedMember) {\n-        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n-        setCurrentPrescription(null);\n-        setFormData({\n-          height: '',\n-          weight: '',\n-          footSize: '',\n-          medications: '',\n-          medicalHistory: {\n-            musculoskeletal: false,\n-            cardiovascular: false,\n-            diabetes: false,\n-            osteoporosis: false,\n-            thyroid: false,\n-            varicose: false,\n-            arthritis: false,\n-          },\n-          painHistory: '',\n-\n-        });\n-        return;\n-      }\n-\n-      try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n-        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n-        \n-        if (prescription) {\n-          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n-          setCurrentPrescription(prescription);\n-          setFormData({\n-            height: prescription.height,\n-            weight: prescription.weight,\n-            footSize: prescription.footSize,\n-            medications: prescription.medications,\n-            medicalHistory: prescription.medicalHistory,\n-            painHistory: prescription.painHistory,\n-\n-          });\n-          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n-        } else {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n-          setCurrentPrescription(null);\n-          setFormData({\n-            height: '',\n-            weight: '',\n-            footSize: '',\n-            medications: '',\n-            medicalHistory: {\n-              musculoskeletal: false,\n-              cardiovascular: false,\n-              diabetes: false,\n-              osteoporosis: false,\n-              thyroid: false,\n-              varicose: false,\n-              arthritis: false,\n-            },\n-            painHistory: '',\n-\n-          });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n-        }\n-      } catch (error) {\n-        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-      }\n-    };\n-\n-    loadPrescription();\n-  }, [selectedMember]);\n-\n-  const filteredMembers = members.filter(member =>\n-    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n-  );\n-\n-  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n-    try {\n-      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-      if (prescription) {\n-        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n-        const member = members.find(m => m.id === prescription.memberId);\n-        if (member) {\n-          setSelectedMember(member);\n-        }\n-        \n-        setCurrentPrescription(prescription);\n-        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n-        setFormData({\n-          height: prescription.height,\n-          weight: prescription.weight,\n-          footSize: prescription.footSize,\n-          medications: prescription.medications,\n-          medicalHistory: prescription.medicalHistory,\n-          painHistory: prescription.painHistory,\n-\n-        });\n-        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n-      }\n-    } catch (error) {\n-      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-    }\n-  }, [members]);\n-\n-  useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n-    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    const prescriptionIdParam = searchParams.get('prescriptionId');\n-    \n-    if (prescriptionIdParam) {\n-      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-      loadSpecificPrescription(prescriptionIdParam);\n-    } else if (userIdParam && members.length > 0) {\n-      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n-      const member = members.find(m => m.id === userIdParam);\n-      if (member) {\n-        setSelectedMember(member);\n-      }\n-    }\n-  }, [searchParams, members, loadSpecificPrescription]);\n-\n-  const handleMemberSelect = (member: Member) => {\n-    setSelectedMember(member);\n-  };\n-\n-  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ì»¨í…Œì´ë„ˆ ê¸°ì¤€ í¼ì„¼íŠ¸)\n-  const handleMouseMove = (event: React.MouseEvent) => {\n-    const target = event.currentTarget as HTMLElement;\n-    const rect = target.getBoundingClientRect();\n-    \n-    // ì»¨í…Œì´ë„ˆ ê¸°ì¤€ìœ¼ë¡œ í¼ì„¼íŠ¸ ì¢Œí‘œ ê³„ì‚°\n-    const x = ((event.clientX - rect.left) / rect.width) * 100;\n-    const y = ((event.clientY - rect.top) / rect.height) * 100;\n-\n-    setCurrentCoords({\n-      x: Math.round(x * 10) / 10, // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n-      y: Math.round(y * 10) / 10  // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n-    });\n-    setShowCoords(true);\n-  };\n-\n-  const handleMouseLeave = () => {\n-    setShowCoords(false);\n-    setCurrentCoords(null);\n-  };\n-\n-  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n-  const handlePointClick = (pointId: string) => {\n-    setSelectedPoints(prev => {\n-      const newSelected = new Set(prev);\n-      if (newSelected.has(pointId)) {\n-        newSelected.delete(pointId);\n-      } else {\n-        newSelected.add(pointId);\n-      }\n-      return newSelected;\n-    });\n-  };\n-\n-  // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n-  const [pagePoints, setPagePoints] = useState<{\n-    [pageNum: number]: {\n-      [pointId: string]: MusclePoint\n-    }\n-  }>({\n-    2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n-    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n-  });\n-\n-  // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n-  const [newPoint, setNewPoint] = useState({\n-    name: '',\n-    pointX: 0,\n-    pointY: 0,\n-    linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 2ì \n-    areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 3ì \n-    textBoxX: 0,\n-    textBoxY: 0,\n-    textBoxWidth: 10,\n-    textBoxHeight: 4\n-  });\n-\n-  // SVG í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ë™ì  í¬ì¸íŠ¸ ê¸°ëŠ¥)\n-  const handleSvgClick = (event: React.MouseEvent<SVGElement>) => {\n-    if (currentPage !== 2 && currentPage !== 3) return; // ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ ì‘ë™\n-    \n-    const svgElement = event.currentTarget;\n-    const rect = svgElement.getBoundingClientRect();\n-    const x = ((event.clientX - rect.left) / rect.width) * 100;\n-    const y = ((event.clientY - rect.top) / rect.height) * 100;\n-    \n-    const currentMuscles = pagePoints[currentPage];\n-    if (!currentMuscles) return;\n-    \n-    // í´ë¦­ëœ ìœ„ì¹˜ì— ìˆëŠ” ê·¼ìœ¡ ì°¾ê¸°\n-    const clickedMuscleId = findMuscleAtPosition({ x, y }, currentMuscles);\n-    \n-    if (clickedMuscleId) {\n-      const clickedMuscle = currentMuscles[clickedMuscleId];\n-      \n-      // ë™ì  ê·¼ìœ¡ì¸ ê²½ìš°ì—ë§Œ í¬ì¸íŠ¸ ë³€ê²½\n-      if (clickedMuscle.isDynamic) {\n-        const updatedMuscles = setMusclePoint(clickedMuscleId, { x, y }, currentMuscles);\n-        \n-        if (updatedMuscles) {\n-          setPagePoints({\n-            ...pagePoints,\n-            [currentPage]: updatedMuscles\n-          });\n-          \n-          // í•´ë‹¹ ê·¼ìœ¡ì„ ì„ íƒ ìƒíƒœë¡œ ì„¤ì •\n-          setSelectedPoints(new Set([clickedMuscleId]));\n-        }\n-      } else {\n-        // ì •ì  ê·¼ìœ¡ì¸ ê²½ìš° ë‹¨ìˆœíˆ ì„ íƒë§Œ ë³€ê²½\n-        setSelectedPoints(new Set([clickedMuscleId]));\n-      }\n-    }\n-  };\n-\n-  // ë™ì  ê·¼ìœ¡ í¬ì¸íŠ¸ ë¦¬ì…‹ ê¸°ëŠ¥\n-  const resetDynamicMuscle = (muscleId: string) => {\n-    const currentMuscles = pagePoints[currentPage];\n-    if (!currentMuscles) return;\n-    \n-    const muscle = currentMuscles[muscleId];\n-    if (!muscle || !muscle.isDynamic) return;\n-    \n-    // ì›ë³¸ ë°ì´í„°ì—ì„œ ê¸°ë³¸ê°’ ê°€ì ¸ì˜¤ê¸°\n-    const originalMuscles = currentPage === 2 ? frontMuscles : backMuscles;\n-    const originalMuscle = originalMuscles[muscleId];\n-    \n-    if (originalMuscle) {\n-      setPagePoints({\n-        ...pagePoints,\n-        [currentPage]: {\n-          ...currentMuscles,\n-          [muscleId]: {\n-            ...muscle,\n-            point: originalMuscle.point,\n-            linePoints: [...originalMuscle.linePoints],\n-            isSelected: false\n-          }\n-        }\n-      });\n-      \n-      // ì„ íƒ í•´ì œ\n-      setSelectedPoints(prev => {\n-        const newSet = new Set(prev);\n-        newSet.delete(muscleId);\n-        return newSet;\n-      });\n-    }\n-  };\n-\n-  const handleSave = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const prescriptionData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        height: formData.height,\n-        weight: formData.weight,\n-        footSize: formData.footSize,\n-        medications: formData.medications,\n-        medicalHistory: formData.medicalHistory,\n-        painHistory: formData.painHistory,\n-        bodyImages: { front: [], spine: [], back: [] },\n-        signatureData: '',\n-        signedAt: null,\n-        isActive: true,\n-        prescriptionDate: new Date(),\n-        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n-        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n-      };\n-\n-      if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      } else {\n-        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      }\n-      \n-      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    } catch (error) {\n-      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-\n-\n-\n-  const handleShare = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n-    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n-    \n-    try {\n-      if (navigator.share) {\n-        await navigator.share({\n-          title: 'ìš´ë™ì²˜ë°©ì„œ',\n-          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: currentUrl,\n-        });\n-      } else {\n-        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      }\n-    } catch (error) {\n-      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n-      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n-      try {\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      } catch {\n-        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n-      }\n-    }\n-  };\n-\n-  const handlePrint = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      // PDF ìƒì„±\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      \n-      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n-      const originalPage = currentPage;\n-      \n-      for (let page = 1; page <= 3; page++) {\n-        if (page > 1) {\n-          pdf.addPage();\n-        }\n-\n-        // í˜ì´ì§€ ë³€ê²½\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n-        if (!prescriptionRef.current) continue;\n-        \n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-\n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210;\n-        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-      }\n-\n-      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n-      setCurrentPage(originalPage);\n-\n-      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n-      const pdfBlob = pdf.output('blob');\n-      const pdfUrl = URL.createObjectURL(pdfBlob);\n-      \n-      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n-      const printWindow = window.open(pdfUrl, '_blank');\n-      if (printWindow) {\n-        printWindow.onload = () => {\n-          setTimeout(() => {\n-            printWindow.print();\n-          }, 1000);\n-        };\n-      }\n-    } catch (error) {\n-      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n-      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  const handleDownloadPDF = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      \n-      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n-      for (let page = 2; page <= 3; page++) {\n-        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n-        const originalPage = currentPage;\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        if (!prescriptionRef.current) continue;\n-        \n-        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-        \n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n-        const imgHeight = 297; // A4 ë†’ì´ (mm)\n-        \n-        // ì²« ë²ˆì§¸ PDF í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n-        if (page > 2) {\n-          pdf.addPage();\n-        }\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-        \n-        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n-        setCurrentPage(originalPage);\n-      }\n-      \n-      // PDF ë‹¤ìš´ë¡œë“œ\n-      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n-      pdf.save(fileName);\n-      \n-    } catch (error) {\n-      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n-      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  return (\n-    <PageContainer>\n-      {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n-      <CoordinateEditor $open={isCoordinateEditorOpen}>\n-        <h3>í˜ì´ì§€ {currentPage} - ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€</h3>\n-        \n-        <InputGroup>\n-          <InputLabel>ê·¼ìœ¡ ì´ë¦„</InputLabel>\n-          <CoordinateInput \n-            type=\"text\" \n-            placeholder=\"ì˜ˆ: ì‚¼ê°ê·¼\" \n-            value={newPoint.name}\n-            onChange={(e) => setNewPoint({ ...newPoint, name: e.target.value })}\n-            style={{ width: '100%' }}\n-          />\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n-          <CoordinateInput \n-            type=\"number\" \n-            placeholder=\"X\" \n-            value={newPoint.pointX}\n-            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n-          />\n-          <CoordinateInput \n-            type=\"number\" \n-            placeholder=\"Y\" \n-            value={newPoint.pointY}\n-            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n-          />\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n-          {newPoint.linePoints.map((point, index) => (\n-            <div key={index} style={{ marginBottom: '5px' }}>\n-              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"X\" \n-                value={point.x}\n-                onChange={(e) => {\n-                  const newLinePoints = [...newPoint.linePoints];\n-                  newLinePoints[index].x = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                }}\n-              />\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"Y\" \n-                value={point.y}\n-                onChange={(e) => {\n-                  const newLinePoints = [...newPoint.linePoints];\n-                  newLinePoints[index].y = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                }}\n-              />\n-              {index >= 2 && (\n-                <button \n-                  onClick={() => {\n-                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n-                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                  }}\n-                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n-                >\n-                  ì‚­ì œ\n-                </button>\n-              )}\n-            </div>\n-          ))}\n-          <button \n-            onClick={() => {\n-              setNewPoint({ \n-                ...newPoint, \n-                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n-              });\n-            }}\n-            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n-          >\n-            ì„  ì  ì¶”ê°€\n-          </button>\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n-          {newPoint.areaPoints.map((point, index) => (\n-            <div key={index} style={{ marginBottom: '5px' }}>\n-              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"X\" \n-                value={point.x}\n-                onChange={(e) => {\n-                  const newAreaPoints = [...newPoint.areaPoints];\n-                  newAreaPoints[index].x = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                }}\n-              />\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"Y\" \n-                value={point.y}\n-                onChange={(e) => {\n-                  const newAreaPoints = [...newPoint.areaPoints];\n-                  newAreaPoints[index].y = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                }}\n-              />\n-              {index >= 3 && (\n-                <button \n-                  onClick={() => {\n-                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n-                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                  }}\n-                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n-                >\n-                  ì‚­ì œ\n-                </button>\n-              )}\n-            </div>\n-          ))}\n-          <button \n-            onClick={() => {\n-              setNewPoint({ \n-                ...newPoint, \n-                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n-              });\n-            }}\n-            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n-          >\n-            ë©´ ì  ì¶”ê°€\n-          </button>\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n-          <div>\n-            <span style={{ fontSize: '11px' }}>X: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxX}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n-            />\n-            <span style={{ fontSize: '11px' }}>Y: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxY}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n-            />\n-          </div>\n-          <div style={{ marginTop: '5px' }}>\n-            <span style={{ fontSize: '11px' }}>W: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxWidth}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n-            />\n-            <span style={{ fontSize: '11px' }}>H: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxHeight}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n-            />\n-          </div>\n-        </InputGroup>\n-\n-        <button \n-          onClick={() => {\n-            if (newPoint.name.trim()) {\n-              const newId = `muscle_${Date.now()}`;\n-              const newPagePoints = { ...pagePoints };\n-              \n-              newPagePoints[currentPage] = {\n-                ...newPagePoints[currentPage],\n-                [newId]: {\n-                  id: newId,\n-                  name: newPoint.name,\n-                  point: { x: newPoint.pointX, y: newPoint.pointY },\n-                  linePoints: newPoint.linePoints,\n-                  areaPoints: newPoint.areaPoints,\n-                  textBox: { \n-                    x: newPoint.textBoxX, \n-                    y: newPoint.textBoxY, \n-                    width: newPoint.textBoxWidth, \n-                    height: newPoint.textBoxHeight \n-                  },\n-                  text: { \n-                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n-                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n-                  }\n-                }\n-              };\n-              \n-              setPagePoints(newPagePoints);\n-              \n-              // ì…ë ¥ í¼ ì´ˆê¸°í™”\n-              setNewPoint({\n-                name: '',\n-                pointX: 0,\n-                pointY: 0,\n-                linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }],\n-                areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }],\n-                textBoxX: 0,\n-                textBoxY: 0,\n-                textBoxWidth: 10,\n-                textBoxHeight: 4\n-              });\n-            } else {\n-              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n-            }\n-          }}\n-          style={{\n-            width: '100%',\n-            padding: '10px',\n-            background: AppColors.primary,\n-            color: 'white',\n-            border: 'none',\n-            borderRadius: '4px',\n-            cursor: 'pointer',\n-            marginTop: '15px'\n-          }}\n-        >\n-          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n-        </button>\n-\n-        <button \n-          onClick={() => {\n-            console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n-          }}\n-          style={{\n-            width: '100%',\n-            padding: '8px',\n-            background: AppColors.secondary,\n-            color: 'white',\n-            border: 'none',\n-            borderRadius: '4px',\n-            cursor: 'pointer',\n-            marginTop: '10px'\n-          }}\n-        >\n-          ì½˜ì†”ì— í˜„ì¬ í˜ì´ì§€ ë°ì´í„° ì¶œë ¥\n-        </button>\n-      </CoordinateEditor>\n-\n-      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n-        {!isSearchPanelCollapsed && (\n-          <>\n-            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n-        <SearchInput\n-          type=\"text\"\n-          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n-          value={searchTerm}\n-          onChange={(e) => setSearchTerm(e.target.value)}\n-        />\n-        <MemberList>\n-          {filteredMembers.map(member => (\n-            <MemberItem\n-              key={member.id}\n-              selected={selectedMember?.id === member.id}\n-              onClick={() => handleMemberSelect(member)}\n-            >\n-              <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birth}</MemberInfo>\n-              <MemberInfo>{member.phone}</MemberInfo>\n-            </MemberItem>\n-          ))}\n-          </MemberList>\n-          </>\n-        )}\n-      </SearchPanel>      <ButtonPanel>\n-        <ToggleButton \n-          $collapsed={isSearchPanelCollapsed}\n-          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n-          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n-        >\n-          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n-        </ToggleButton>\n-        \n-        <ActionButton \n-          onClick={handleSave} \n-          title=\"ì €ì¥\"\n-          disabled={isReadOnly}\n-        >\n-          ğŸ’¾\n-        </ActionButton>\n-        \n-        {/* ë™ì  ê·¼ìœ¡ ê´€ë¦¬ ë²„íŠ¼ë“¤ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n-        {(currentPage === 2 || currentPage === 3) && (\n-          <>\n-            <ActionButton \n-              onClick={() => {\n-                const currentMuscles = pagePoints[currentPage];\n-                const selectedMuscleIds = Array.from(selectedPoints);\n-                selectedMuscleIds.forEach(muscleId => {\n-                  if (currentMuscles[muscleId]?.isDynamic) {\n-                    resetDynamicMuscle(muscleId);\n-                  }\n-                });\n-              }} \n-              title=\"ì„ íƒëœ ë™ì  ê·¼ìœ¡ ë¦¬ì…‹\"\n-              disabled={selectedPoints.size === 0}\n-            >\n-              ğŸ”„\n-            </ActionButton>\n-            <ActionButton \n-              onClick={() => {\n-                setSelectedPoints(new Set());\n-              }} \n-              title=\"ëª¨ë“  ì„ íƒ í•´ì œ\"\n-            >\n-              âŒ\n-            </ActionButton>\n-          </>\n-        )}\n-        \n-        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          ğŸ“¤\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n-          ğŸ–¨ï¸\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n-          ğŸ“\n-        </ActionButton>\n-        \n-        <Divider />\n-        \n-        {/* <PageButton \n-          active={currentPage === 1}\n-          onClick={() => setCurrentPage(1)}\n-        >\n-          1\n-        </PageButton> */}\n-        \n-        <PageButton \n-          active={currentPage === 2}\n-          onClick={() => setCurrentPage(2)}\n-        >\n-          2\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 3}\n-          onClick={() => setCurrentPage(3)}\n-        >\n-          3\n-        </PageButton>\n-      </ButtonPanel>\n-\n-      <PrescriptionPanel>\n-        {/* ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²• ì•ˆë‚´ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n-        {(currentPage === 2 || currentPage === 3) && (\n-          <div style={{\n-            padding: '8px 16px',\n-            backgroundColor: '#f0f8ff',\n-            border: '1px solid #b3d9ff',\n-            borderRadius: '4px',\n-            margin: '8px',\n-            fontSize: '12px',\n-            color: '#0066cc'\n-          }}>\n-            ğŸ’¡ <strong>ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²•:</strong> íŒŒë€ìƒ‰ ì ì„  ì˜ì—­ì€ í´ë¦­ìœ¼ë¡œ í¬ì¸íŠ¸ ìœ„ì¹˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n-            ì„ íƒëœ ê·¼ìœ¡ì€ ğŸ”„ ë²„íŠ¼ìœ¼ë¡œ ì›ë˜ ìœ„ì¹˜ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n-          </div>\n-        )}\n-\n-        <PrescriptionContainer ref={prescriptionRef}>\n-          \n-          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n-          {currentPage === 2 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div \n-                style={{ \n-                  display: 'flex', \n-                  justifyContent: 'center', \n-                  alignItems: 'center',\n-                  flex: 1,\n-                  position: 'relative'\n-                }}\n-                onMouseMove={handleMouseMove}\n-                onMouseLeave={handleMouseLeave}\n-              >\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n-                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-                \n-                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n-                <svg \n-                  style={{\n-                    position: 'absolute',\n-                    top: 0,\n-                    left: 0,\n-                    width: '100%',\n-                    height: '100%',\n-                    pointerEvents: 'auto',\n-                    cursor: currentPage === 2 || currentPage === 3 ? 'crosshair' : 'default'\n-                  }}\n-                  viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"none\"\n-                  onClick={handleSvgClick}\n-                >\n-                  {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n-                  {showCoords && currentCoords && currentPage === 2 && (\n-                    <g>\n-                      <rect \n-                        x={currentCoords.x - 8} \n-                        y={currentCoords.y - 4} \n-                        width=\"16\" \n-                        height=\"3\" \n-                        fill=\"rgba(0, 0, 0, 0.8)\" \n-                        rx=\"0.5\"\n-                      />\n-                      <text \n-                        x={currentCoords.x} \n-                        y={currentCoords.y - 1} \n-                        textAnchor=\"middle\" \n-                        fontSize=\"1.2\" \n-                        fill=\"white\" \n-                        fontWeight=\"bold\"\n-                      >\n-                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n-                      </text>\n-                    </g>\n-                  )}\n-                  \n-                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n-                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n-                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n-                      <polygon \n-                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill={\n-                          selectedPoints.has(muscle.id) \n-                            ? \"rgba(255, 165, 0, 0.3)\" \n-                            : muscle.isDynamic \n-                              ? \"rgba(100, 200, 255, 0.2)\" \n-                              : \"rgba(255, 255, 0, 0.2)\"\n-                        }\n-                        stroke={\n-                          selectedPoints.has(muscle.id) \n-                            ? \"orange\" \n-                            : muscle.isDynamic \n-                              ? \"#0088ff\" \n-                              : \"#0066ff\"\n-                        }\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0.3\"}\n-                        strokeDasharray={muscle.isDynamic ? \"1,1\" : \"none\"}\n-                        style={{ cursor: muscle.isDynamic ? 'crosshair' : 'pointer' }}\n-                      />\n-                      \n-                      {/* í¬ì¸í„° */}\n-                      <circle \n-                        cx={muscle.point.x} \n-                        cy={muscle.point.y} \n-                        r={selectedPoints.has(muscle.id) ? \"0.8\" : \"0.6\"} \n-                        fill={\n-                          selectedPoints.has(muscle.id) \n-                            ? \"orange\" \n-                            : muscle.isDynamic \n-                              ? \"#00aaff\" \n-                              : \"yellow\"\n-                        }\n-                        stroke={\n-                          selectedPoints.has(muscle.id) \n-                            ? \"red\" \n-                            : muscle.isDynamic \n-                              ? \"#0088ff\" \n-                              : \"none\"\n-                        }\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : muscle.isDynamic ? \"0.05\" : \"0\"}\n-                      />\n-                      \n-                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n-                      {selectedPoints.has(muscle.id) && (\n-                        <polyline \n-                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          stroke=\"yellow\" \n-                          strokeWidth=\"0.4\" \n-                          fill=\"none\"\n-                        />\n-                      )}\n-                      \n-                      {/* ë©”ì¸ êº¾ì€ì„  */}\n-                      <polyline \n-                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"black\" \n-                        strokeWidth=\"0.15\" \n-                        fill=\"none\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n-                      <rect \n-                        x={muscle.textBox.x} \n-                        y={muscle.textBox.y} \n-                        width={muscle.textBox.width} \n-                        height={muscle.textBox.height} \n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n-                        strokeWidth=\"0.05\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ */}\n-                      <text \n-                        x={muscle.text.x} \n-                        y={muscle.text.y} \n-                        fontSize=\"1.2\" \n-                        fill=\"black\"\n-                        fontWeight={selectedPoints.has(muscle.id) ? \"900\" : \"bold\"}\n-                        textAnchor=\"middle\"\n-                        dominantBaseline=\"middle\"\n-                      >\n-                        {muscle.name}\n-                      </text>\n-                    </g>\n-                  ))}\n-                </svg>\n-              </div>\n-            </div>\n-          )}\n-\n-\n-        </PrescriptionContainer>\n-      </PrescriptionPanel>\n-    </PageContainer>\n-  );\n-};\n-\n-export default ExercisePrescriptionPage;\n-import React, { useEffect, useState, useCallback, useRef } from 'react';\n-import { useSearchParams } from 'react-router-dom';\n-import styled from 'styled-components';\n-import html2canvas from 'html2canvas';\n-import jsPDF from 'jspdf';\n-import { AppColors } from '../styles/colors';\n-import { AppTextStyles } from '../styles/textStyles';\n-import { dbManager } from '../utils/indexedDB';\n-import { Member, ExercisePrescription, ExercisePrescriptionMedicalHistory } from '../utils/db/types';\n-import { \n-  frontMuscles, \n-  backMuscles, \n-  MusclePoint,\n-  isPointInPolygon,\n-  setMusclePoint,\n-  findMuscleAtPosition \n-} from '../constants/muscleCoordinates';\n-\n-const PageContainer = styled.div`\n-  min-height: 100vh;\n-  display: flex;\n-  background: ${AppColors.background};\n-  \n-  @media print {\n-    display: block;\n-    background: white;\n-  }\n-`;\n-\n-const SearchPanel = styled.div<{ $collapsed?: boolean }>`\n-  width: ${props => props.$collapsed ? '0px' : '300px'};\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: ${props => props.$collapsed ? '0' : '20px'};\n-  overflow: ${props => props.$collapsed ? 'hidden' : 'auto'};\n-  transition: all 0.3s ease;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ButtonPanel = styled.div<{ $hidden?: boolean }>`\n-  width: 55px;\n-  background: ${AppColors.surface};\n-  border-right: 1px solid ${AppColors.borderLight};\n-  padding: 10px 2px;\n-  display: ${props => props.$hidden ? 'none' : 'flex'};\n-  flex-direction: column;\n-  gap: 6px;\n-  align-items: stretch;\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-const ActionButton = styled.button<{ disabled?: boolean }>`\n-  width: 100%;\n-  height: 36px;\n-  border: none;\n-  border-radius: 6px;\n-  background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary};\n-  color: ${props => props.disabled ? AppColors.disabled : AppColors.onPrimary};\n-  font-size: 16px;\n-  font-weight: 600;\n-  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.disabled ? AppColors.buttonDisabled : AppColors.primary + 'dd'};\n-  }\n-`;\n-\n-const PageButton = styled.button<{ active?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${props => props.active ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.active ? AppColors.primary : 'white'};\n-  color: ${props => props.active ? 'white' : '#333'};\n-  font-size: 14px;\n-  font-weight: ${props => props.active ? 'bold' : 'normal'};\n-  cursor: pointer;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${props => props.active ? AppColors.primary : '#f8f9fa'};\n-  }\n-`;\n-\n-const Divider = styled.div`\n-  height: 1px;\n-  background: ${AppColors.borderLight};\n-  margin: 10px 0;\n-`;\n-\n-const ToggleButton = styled.button<{ $collapsed?: boolean }>`\n-  width: 100%;\n-  height: 32px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 4px;\n-  background: ${props => props.$collapsed ? AppColors.primary : AppColors.surface};\n-  color: ${props => props.$collapsed ? AppColors.onPrimary : AppColors.onBackground};\n-  cursor: pointer;\n-  display: flex;\n-  align-items: center;\n-  justify-content: center;\n-  font-size: 14px;\n-  transition: all 0.2s ease;\n-  \n-  &:hover {\n-    background: ${AppColors.primary};\n-    color: ${AppColors.onPrimary};\n-  }\n-  \n-  @media print {\n-    display: none;\n-  }\n-`;\n-\n-\n-\n-const SearchTitle = styled.h2`\n-  font-size: ${AppTextStyles.title2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 20px;\n-`;\n-\n-const SearchInput = styled.input`\n-  width: 100%;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  margin-bottom: 16px;\n-  box-sizing: border-box;\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n-const MemberList = styled.div`\n-  max-height: 400px;\n-  overflow-y: auto;\n-`;\n-\n-const MemberItem = styled.div<{ selected?: boolean }>`\n-  padding: 12px;\n-  border: 1px solid ${props => props.selected ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 8px;\n-  margin-bottom: 8px;\n-  cursor: pointer;\n-  background: ${props => props.selected ? AppColors.primary + '10' : AppColors.surface};\n-  \n-  &:hover {\n-    background: ${AppColors.primary}20;\n-  }\n-`;\n-\n-const MemberName = styled.div`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin-bottom: 4px;\n-`;\n-\n-const MemberInfo = styled.div`\n-  font-size: ${AppTextStyles.body3.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const PrescriptionPanel = styled.div`\n-  flex: 1;\n-  padding: 20px;\n-  overflow-y: auto;\n-  \n-  @media print {\n-    padding: 0;\n-    overflow: visible;\n-  }\n-`;\n-\n-const PrescriptionContainer = styled.div`\n-  width: 210mm;\n-  height: 297mm;\n-  max-width: 800px;\n-  margin: 0 auto;\n-  background: white;\n-  padding: 40px;\n-  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);\n-  box-sizing: border-box;\n-  overflow: hidden;\n-  \n-  /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */\n-  scrollbar-width: none; /* Firefox */\n-  -ms-overflow-style: none; /* IE/Edge */\n-  \n-  &::-webkit-scrollbar {\n-    display: none; /* Chrome, Safari, Opera */\n-  }\n-  \n-  @media print {\n-    box-shadow: none;\n-    padding: 20mm;\n-    margin: 0;\n-    max-width: none;\n-    width: 210mm;\n-    height: 297mm;\n-    overflow: visible;\n-  }\n-  \n-  @media screen and (max-width: 900px) {\n-    width: 100%;\n-    height: auto;\n-    min-height: calc(100vh - 40px);\n-  }\n-`;\n-\n-\n-\n-\n-\n-const CoordinateEditor = styled.div<{ $open?: boolean }>`\n-  position: fixed;\n-  left: ${props => props.$open ? '320px' : '-400px'};\n-  top: 20px;\n-  width: 350px;\n-  height: calc(100vh - 40px);\n-  background: white;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  padding: 20px;\n-  overflow-y: auto;\n-  transition: left 0.3s ease;\n-  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n-  z-index: 1000;\n-`;\n-\n-\n-\n-const InputGroup = styled.div`\n-  margin-bottom: 15px;\n-`;\n-\n-const InputLabel = styled.label`\n-  display: block;\n-  margin-bottom: 5px;\n-  font-size: 12px;\n-  font-weight: bold;\n-  color: ${AppColors.onSurface};\n-`;\n-\n-const CoordinateInput = styled.input`\n-  width: 60px;\n-  padding: 4px 6px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 3px;\n-  font-size: 12px;\n-  margin-right: 5px;\n-`;\n-\n-\n-\n-const ExercisePrescriptionPage: React.FC = () => {\n-  const [searchParams] = useSearchParams();\n-  const [searchTerm, setSearchTerm] = useState('');\n-  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n-  const [members, setMembers] = useState<Member[]>([]);\n-  const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n-  const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(2); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (2í˜ì´ì§€ë¡œ ì‹œì‘)\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n-  const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n-  const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n-  const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n-  const [showCoords, setShowCoords] = useState(false);\n-  const prescriptionRef = useRef<HTMLDivElement>(null); // PDF ìƒì„±ì„ ìœ„í•œ ref\n-  const [formData, setFormData] = useState({\n-    height: '',\n-    weight: '',\n-    footSize: '',\n-    medications: '',\n-    medicalHistory: {\n-      musculoskeletal: false,\n-      cardiovascular: false,\n-      diabetes: false,\n-      osteoporosis: false,\n-      thyroid: false,\n-      varicose: false,\n-      arthritis: false,\n-    } as ExercisePrescriptionMedicalHistory,\n-    painHistory: ''\n-  });\n-\n-  // ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleInputChange = (field: string, value: string) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      [field]: value\n-    }));\n-  };\n-\n-  // ì²´í¬ë°•ìŠ¤ ë³€ê²½ í•¸ë“¤ëŸ¬\n-  const handleCheckboxChange = (field: string, checked: boolean) => {\n-    setFormData(prev => ({\n-      ...prev,\n-      medicalHistory: {\n-        ...prev.medicalHistory,\n-        [field]: checked\n-      }\n-    }));\n-  };\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ íšŒì› ë°ì´í„° ë¡œë“œ\n-  useEffect(() => {\n-    const loadMembers = async () => {\n-      try {\n-        const allMembers = await dbManager.getAllMembers();\n-        // í™œì„± íšŒì›ë§Œ í•„í„°ë§\n-        const activeMembers = allMembers.filter(member => member.isActive);\n-        setMembers(activeMembers);\n-      } catch (error) {\n-        console.error('íšŒì› ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-      }\n-    };\n-\n-    loadMembers();\n-  }, []);\n-\n-  // ì„ íƒëœ íšŒì›ì´ ë³€ê²½ë  ë•Œ ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ\n-  useEffect(() => {\n-    const loadPrescription = async () => {\n-      if (!selectedMember) {\n-        // íšŒì›ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì´ˆê¸°í™”\n-        setCurrentPrescription(null);\n-        setFormData({\n-          height: '',\n-          weight: '',\n-          footSize: '',\n-          medications: '',\n-          medicalHistory: {\n-            musculoskeletal: false,\n-            cardiovascular: false,\n-            diabetes: false,\n-            osteoporosis: false,\n-            thyroid: false,\n-            varicose: false,\n-            arthritis: false,\n-          },\n-          painHistory: '',\n-\n-        });\n-        return;\n-      }\n-\n-      try {\n-        // í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ì¡°íšŒ\n-        const prescription = await dbManager.exercisePrescription.getExercisePrescriptionByMember(selectedMember.id);\n-        \n-        if (prescription) {\n-          // ìµœì‹  ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ë¡œë“œ\n-          setCurrentPrescription(prescription);\n-          setFormData({\n-            height: prescription.height,\n-            weight: prescription.weight,\n-            footSize: prescription.footSize,\n-            medications: prescription.medications,\n-            medicalHistory: prescription.medicalHistory,\n-            painHistory: prescription.painHistory,\n-\n-          });\n-          console.log('ìµœì‹  ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ:', prescription);\n-        } else {\n-          // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ì—†ìœ¼ë©´ ë¹ˆ í…œí”Œë¦¿ ì‚¬ìš©\n-          setCurrentPrescription(null);\n-          setFormData({\n-            height: '',\n-            weight: '',\n-            footSize: '',\n-            medications: '',\n-            medicalHistory: {\n-              musculoskeletal: false,\n-              cardiovascular: false,\n-              diabetes: false,\n-              osteoporosis: false,\n-              thyroid: false,\n-              varicose: false,\n-              arthritis: false,\n-            },\n-            painHistory: '',\n-\n-          });\n-          console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ í…œí”Œë¦¿ ìƒì„± - ì„œëª… ë°ì´í„° ì´ˆê¸°í™”ë¨');\n-        }\n-      } catch (error) {\n-        console.error('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-        alert('ìš´ë™ì²˜ë°©ì„œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-      }\n-    };\n-\n-    loadPrescription();\n-  }, [selectedMember]);\n-\n-  const filteredMembers = members.filter(member =>\n-    member.name.includes(searchTerm) || member.phone.includes(searchTerm)\n-  );\n-\n-  // íŠ¹ì • ì²˜ë°©ì„œ IDë¡œ ì§ì ‘ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-  const loadSpecificPrescription = useCallback(async (prescriptionId: string) => {\n-    try {\n-      const prescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-      if (prescription) {\n-        // ì²˜ë°©ì„œì— í•´ë‹¹í•˜ëŠ” íšŒì› ì •ë³´ë„ ì°¾ê¸°\n-        const member = members.find(m => m.id === prescription.memberId);\n-        if (member) {\n-          setSelectedMember(member);\n-        }\n-        \n-        setCurrentPrescription(prescription);\n-        setIsReadOnly(true); // íˆìŠ¤í† ë¦¬ ë³´ê¸°ëŠ” ì½ê¸° ì „ìš©\n-        setFormData({\n-          height: prescription.height,\n-          weight: prescription.weight,\n-          footSize: prescription.footSize,\n-          medications: prescription.medications,\n-          medicalHistory: prescription.medicalHistory,\n-          painHistory: prescription.painHistory,\n-\n-        });\n-        console.log('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ (ì½ê¸° ì „ìš©):', prescription);\n-      }\n-    } catch (error) {\n-      console.error('íŠ¹ì • ìš´ë™ì²˜ë°©ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\n-    }\n-  }, [members]);\n-\n-  useEffect(() => {\n-    // URL íŒŒë¼ë¯¸í„°ì—ì„œ userid, memberId, prescriptionId í™•ì¸\n-    const userIdParam = searchParams.get('userid') || searchParams.get('memberId');\n-    const prescriptionIdParam = searchParams.get('prescriptionId');\n-    \n-    if (prescriptionIdParam) {\n-      // prescriptionIdê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì²˜ë°©ì„œë¥¼ ì§ì ‘ ë¡œë“œ (íˆìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸°ìš©)\n-      loadSpecificPrescription(prescriptionIdParam);\n-    } else if (userIdParam && members.length > 0) {\n-      // memberIdë§Œ ìˆìœ¼ë©´ í•´ë‹¹ íšŒì›ì˜ ìµœì‹  ì²˜ë°©ì„œ ë¡œë“œ\n-      const member = members.find(m => m.id === userIdParam);\n-      if (member) {\n-        setSelectedMember(member);\n-      }\n-    }\n-  }, [searchParams, members, loadSpecificPrescription]);\n-\n-  const handleMemberSelect = (member: Member) => {\n-    setSelectedMember(member);\n-  };\n-\n-  // í˜ì´ì§€ 2, 3ìš© ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ì»¨í…Œì´ë„ˆ ê¸°ì¤€ í¼ì„¼íŠ¸)\n-  const handleMouseMove = (event: React.MouseEvent) => {\n-    const target = event.currentTarget as HTMLElement;\n-    const rect = target.getBoundingClientRect();\n-    \n-    // ì»¨í…Œì´ë„ˆ ê¸°ì¤€ìœ¼ë¡œ í¼ì„¼íŠ¸ ì¢Œí‘œ ê³„ì‚°\n-    const x = ((event.clientX - rect.left) / rect.width) * 100;\n-    const y = ((event.clientY - rect.top) / rect.height) * 100;\n-\n-    setCurrentCoords({\n-      x: Math.round(x * 10) / 10, // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n-      y: Math.round(y * 10) / 10  // ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€\n-    });\n-    setShowCoords(true);\n-  };\n-\n-  const handleMouseLeave = () => {\n-    setShowCoords(false);\n-    setCurrentCoords(null);\n-  };\n-\n-  // í¬ì¸íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬\n-  const handlePointClick = (pointId: string) => {\n-    setSelectedPoints(prev => {\n-      const newSelected = new Set(prev);\n-      if (newSelected.has(pointId)) {\n-        newSelected.delete(pointId);\n-      } else {\n-        newSelected.add(pointId);\n-      }\n-      return newSelected;\n-    });\n-  };\n-\n-  // í˜ì´ì§€ë³„ ê·¼ìœ¡ í¬ì¸íŠ¸ ê´€ë¦¬\n-  const [pagePoints, setPagePoints] = useState<{\n-    [pageNum: number]: {\n-      [pointId: string]: MusclePoint\n-    }\n-  }>({\n-    2: frontMuscles,   // ì „ë©´ ê·¼ìœ¡ë“¤\n-    3: backMuscles     // í›„ë©´ ê·¼ìœ¡ë“¤\n-  });\n-\n-  // ìƒˆë¡œìš´ í¬ì¸íŠ¸ ì¶”ê°€ìš© ì„ì‹œ ë°ì´í„°\n-  const [newPoint, setNewPoint] = useState({\n-    name: '',\n-    pointX: 0,\n-    pointY: 0,\n-    linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 2ì \n-    areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }], // ìµœì†Œ 3ì \n-    textBoxX: 0,\n-    textBoxY: 0,\n-    textBoxWidth: 10,\n-    textBoxHeight: 4\n-  });\n-\n-  // SVG í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ë™ì  í¬ì¸íŠ¸ ê¸°ëŠ¥)\n-  const handleSvgClick = (event: React.MouseEvent<SVGElement>) => {\n-    if (currentPage !== 2 && currentPage !== 3) return; // ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ ì‘ë™\n-    \n-    const svgElement = event.currentTarget;\n-    const rect = svgElement.getBoundingClientRect();\n-    const x = ((event.clientX - rect.left) / rect.width) * 100;\n-    const y = ((event.clientY - rect.top) / rect.height) * 100;\n-    \n-    const currentMuscles = pagePoints[currentPage];\n-    if (!currentMuscles) return;\n-    \n-    // í´ë¦­ëœ ìœ„ì¹˜ì— ìˆëŠ” ê·¼ìœ¡ ì°¾ê¸°\n-    const clickedMuscleId = findMuscleAtPosition({ x, y }, currentMuscles);\n-    \n-    if (clickedMuscleId) {\n-      const clickedMuscle = currentMuscles[clickedMuscleId];\n-      \n-      // ë™ì  ê·¼ìœ¡ì¸ ê²½ìš°ì—ë§Œ í¬ì¸íŠ¸ ë³€ê²½\n-      if (clickedMuscle.isDynamic) {\n-        const updatedMuscles = setMusclePoint(clickedMuscleId, { x, y }, currentMuscles);\n-        \n-        if (updatedMuscles) {\n-          setPagePoints({\n-            ...pagePoints,\n-            [currentPage]: updatedMuscles\n-          });\n-          \n-          // í•´ë‹¹ ê·¼ìœ¡ì„ ì„ íƒ ìƒíƒœë¡œ ì„¤ì •\n-          setSelectedPoints(new Set([clickedMuscleId]));\n-        }\n-      } else {\n-        // ì •ì  ê·¼ìœ¡ì¸ ê²½ìš° ë‹¨ìˆœíˆ ì„ íƒë§Œ ë³€ê²½\n-        setSelectedPoints(new Set([clickedMuscleId]));\n-      }\n-    }\n-  };\n-\n-  // ë™ì  ê·¼ìœ¡ í¬ì¸íŠ¸ ë¦¬ì…‹ ê¸°ëŠ¥\n-  const resetDynamicMuscle = (muscleId: string) => {\n-    const currentMuscles = pagePoints[currentPage];\n-    if (!currentMuscles) return;\n-    \n-    const muscle = currentMuscles[muscleId];\n-    if (!muscle || !muscle.isDynamic) return;\n-    \n-    // ì›ë³¸ ë°ì´í„°ì—ì„œ ê¸°ë³¸ê°’ ê°€ì ¸ì˜¤ê¸°\n-    const originalMuscles = currentPage === 2 ? frontMuscles : backMuscles;\n-    const originalMuscle = originalMuscles[muscleId];\n-    \n-    if (originalMuscle) {\n-      setPagePoints({\n-        ...pagePoints,\n-        [currentPage]: {\n-          ...currentMuscles,\n-          [muscleId]: {\n-            ...muscle,\n-            point: originalMuscle.point,\n-            linePoints: [...originalMuscle.linePoints],\n-            isSelected: false\n-          }\n-        }\n-      });\n-      \n-      // ì„ íƒ í•´ì œ\n-      setSelectedPoints(prev => {\n-        const newSet = new Set(prev);\n-        newSet.delete(muscleId);\n-        return newSet;\n-      });\n-    }\n-  };\n-\n-  const handleSave = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const prescriptionData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        height: formData.height,\n-        weight: formData.weight,\n-        footSize: formData.footSize,\n-        medications: formData.medications,\n-        medicalHistory: formData.medicalHistory,\n-        painHistory: formData.painHistory,\n-        bodyImages: { front: [], spine: [], back: [] },\n-        signatureData: '',\n-        signedAt: null,\n-        isActive: true,\n-        prescriptionDate: new Date(),\n-        version: 1, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ê³„ì‚°ë¨)\n-        isLatest: true, // ê¸°ë³¸ê°’ (ì„œë¹„ìŠ¤ì—ì„œ ìë™ ì„¤ì •ë¨)\n-      };\n-\n-      if (currentPrescription) {\n-        // ê¸°ì¡´ ìš´ë™ì²˜ë°©ì„œê°€ ìˆìœ¼ë©´ ìƒˆ ë²„ì „ìœ¼ë¡œ ì €ì¥ (ì—…ë°ì´íŠ¸ê°€ ì•„ë‹Œ ì‹ ê·œ ë²„ì „ ìƒì„±)\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ë²„ì „ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ìµœì‹  ì²˜ë°©ì„œ ì •ë³´ ë¡œë“œ\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      } else {\n-        // ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„±\n-        const prescriptionId = await dbManager.exercisePrescription.saveExercisePrescription(prescriptionData);\n-        console.log('ìƒˆ ìš´ë™ì²˜ë°©ì„œ ìƒì„± ì™„ë£Œ:', prescriptionId);\n-        \n-        // ìƒì„±ëœ ì²˜ë°©ì„œ ì •ë³´ ì—…ë°ì´íŠ¸\n-        const savedPrescription = await dbManager.exercisePrescription.getExercisePrescriptionById(prescriptionId);\n-        setCurrentPrescription(savedPrescription);\n-      }\n-      \n-      alert('ìš´ë™ì²˜ë°©ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    } catch (error) {\n-      console.error('ìš´ë™ì²˜ë°©ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\n-      alert(error instanceof Error ? error.message : 'ìš´ë™ì²˜ë°©ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-\n-\n-\n-  const handleShare = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    // í˜„ì¬ í˜ì´ì§€ì˜ URL ìƒì„±\n-    const currentUrl = `${window.location.origin}${window.location.pathname}?userid=${selectedMember.id}`;\n-    \n-    try {\n-      if (navigator.share) {\n-        await navigator.share({\n-          title: 'ìš´ë™ì²˜ë°©ì„œ',\n-          text: `${selectedMember.name}ë‹˜ì˜ ìš´ë™ì²˜ë°©ì„œ`,\n-          url: currentUrl,\n-        });\n-      } else {\n-        // ë„¤ì´í‹°ë¸Œ ê³µìœ ê°€ ì§€ì›ë˜ì§€ ì•Šìœ¼ë©´ URL ë³µì‚¬\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      }\n-    } catch (error) {\n-      console.log('ê³µìœ  ì·¨ì†Œ ë˜ëŠ” ì˜¤ë¥˜:', error);\n-      // ëŒ€ì²´ ë°©ë²•: URL ë³µì‚¬\n-      try {\n-        await navigator.clipboard.writeText(currentUrl);\n-        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-      } catch {\n-        alert(`ê³µìœ  ë§í¬: ${currentUrl}`);\n-      }\n-    }\n-  };\n-\n-  const handlePrint = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      // PDF ìƒì„±\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      \n-      // í˜„ì¬ í˜ì´ì§€ ì €ì¥\n-      const originalPage = currentPage;\n-      \n-      for (let page = 1; page <= 3; page++) {\n-        if (page > 1) {\n-          pdf.addPage();\n-        }\n-\n-        // í˜ì´ì§€ ë³€ê²½\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì ì‹œ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ìº¡ì²˜\n-        if (!prescriptionRef.current) continue;\n-        \n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-\n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210;\n-        const imgHeight = (canvas.height * imgWidth) / canvas.width;\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-      }\n-\n-      // ì›ë˜ í˜ì´ì§€ë¡œ ë³µì›\n-      setCurrentPage(originalPage);\n-\n-      // PDFë¥¼ Blobìœ¼ë¡œ ìƒì„±í•˜ì—¬ ìƒˆ ì°½ì—ì„œ ì—´ê¸°\n-      const pdfBlob = pdf.output('blob');\n-      const pdfUrl = URL.createObjectURL(pdfBlob);\n-      \n-      // ìƒˆ ì°½ì—ì„œ PDF ì—´ê³  ìë™ ì¸ì‡„\n-      const printWindow = window.open(pdfUrl, '_blank');\n-      if (printWindow) {\n-        printWindow.onload = () => {\n-          setTimeout(() => {\n-            printWindow.print();\n-          }, 1000);\n-        };\n-      }\n-    } catch (error) {\n-      console.error('ì¸ì‡„ìš© PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n-      alert('ì¸ì‡„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  const handleDownloadPDF = async () => {\n-    if (!selectedMember) {\n-      alert('íšŒì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n-      return;\n-    }\n-\n-    try {\n-      const pdf = new jsPDF('p', 'mm', 'a4');\n-      \n-      // ê° í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìºíŠ²í•˜ì—¬ PDFì— ì¶”ê°€\n-      for (let page = 2; page <= 3; page++) {\n-        // ì„ì‹œë¡œ í˜ì´ì§€ ë³€ê²½\n-        const originalPage = currentPage;\n-        setCurrentPage(page);\n-        \n-        // DOM ì—…ë°ì´íŠ¸ ëŒ€ê¸°\n-        await new Promise(resolve => setTimeout(resolve, 100));\n-        \n-        if (!prescriptionRef.current) continue;\n-        \n-        // í˜„ì¬ í˜ì´ì§€ ìºíŠ³\n-        const canvas = await html2canvas(prescriptionRef.current, {\n-          scale: 2,\n-          useCORS: true,\n-          allowTaint: true,\n-          backgroundColor: '#ffffff'\n-        });\n-        \n-        const imgData = canvas.toDataURL('image/png');\n-        const imgWidth = 210; // A4 ë„ˆë¹„ (mm)\n-        const imgHeight = 297; // A4 ë†’ì´ (mm)\n-        \n-        // ì²« ë²ˆì§¸ PDF í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ ìƒˆ í˜ì´ì§€ ì¶”ê°€\n-        if (page > 2) {\n-          pdf.addPage();\n-        }\n-        \n-        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);\n-        \n-        // ì›ë˜ í˜ì´ì§€ë¡œ ë³µêµ¬\n-        setCurrentPage(originalPage);\n-      }\n-      \n-      // PDF ë‹¤ìš´ë¡œë“œ\n-      const fileName = `ìš´ë™ì²˜ë°©ì„œ_${selectedMember.name}_ì „ì²´_${new Date().toISOString().split('T')[0]}.pdf`;\n-      pdf.save(fileName);\n-      \n-    } catch (error) {\n-      console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);\n-      alert('PDF ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\n-    }\n-  };\n-\n-  return (\n-    <PageContainer>\n-      {/* ì¢Œí‘œ í¸ì§‘ê¸° */}\n-      <CoordinateEditor $open={isCoordinateEditorOpen}>\n-        <h3>í˜ì´ì§€ {currentPage} - ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€</h3>\n-        \n-        <InputGroup>\n-          <InputLabel>ê·¼ìœ¡ ì´ë¦„</InputLabel>\n-          <CoordinateInput \n-            type=\"text\" \n-            placeholder=\"ì˜ˆ: ì‚¼ê°ê·¼\" \n-            value={newPoint.name}\n-            onChange={(e) => setNewPoint({ ...newPoint, name: e.target.value })}\n-            style={{ width: '100%' }}\n-          />\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>í¬ì¸í„° ì¢Œí‘œ (ë…¸ë€ìƒ‰ ì›)</InputLabel>\n-          <CoordinateInput \n-            type=\"number\" \n-            placeholder=\"X\" \n-            value={newPoint.pointX}\n-            onChange={(e) => setNewPoint({ ...newPoint, pointX: Number(e.target.value) })}\n-          />\n-          <CoordinateInput \n-            type=\"number\" \n-            placeholder=\"Y\" \n-            value={newPoint.pointY}\n-            onChange={(e) => setNewPoint({ ...newPoint, pointY: Number(e.target.value) })}\n-          />\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>ì„  ì¢Œí‘œë“¤ (êº¾ì€ì„  - í¬ì¸í„°ì—ì„œ í…ìŠ¤íŠ¸ê¹Œì§€)</InputLabel>\n-          {newPoint.linePoints.map((point, index) => (\n-            <div key={index} style={{ marginBottom: '5px' }}>\n-              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"X\" \n-                value={point.x}\n-                onChange={(e) => {\n-                  const newLinePoints = [...newPoint.linePoints];\n-                  newLinePoints[index].x = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                }}\n-              />\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"Y\" \n-                value={point.y}\n-                onChange={(e) => {\n-                  const newLinePoints = [...newPoint.linePoints];\n-                  newLinePoints[index].y = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                }}\n-              />\n-              {index >= 2 && (\n-                <button \n-                  onClick={() => {\n-                    const newLinePoints = newPoint.linePoints.filter((_, i) => i !== index);\n-                    setNewPoint({ ...newPoint, linePoints: newLinePoints });\n-                  }}\n-                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n-                >\n-                  ì‚­ì œ\n-                </button>\n-              )}\n-            </div>\n-          ))}\n-          <button \n-            onClick={() => {\n-              setNewPoint({ \n-                ...newPoint, \n-                linePoints: [...newPoint.linePoints, { x: 0, y: 0 }] \n-              });\n-            }}\n-            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n-          >\n-            ì„  ì  ì¶”ê°€\n-          </button>\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>ë©´ ì¢Œí‘œë“¤ (í´ë¦­ ë²”ìœ„ - ë‹¤ê°í˜•)</InputLabel>\n-          {newPoint.areaPoints.map((point, index) => (\n-            <div key={index} style={{ marginBottom: '5px' }}>\n-              <span style={{ fontSize: '11px', marginRight: '5px' }}>ì  {index + 1}:</span>\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"X\" \n-                value={point.x}\n-                onChange={(e) => {\n-                  const newAreaPoints = [...newPoint.areaPoints];\n-                  newAreaPoints[index].x = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                }}\n-              />\n-              <CoordinateInput \n-                type=\"number\" \n-                placeholder=\"Y\" \n-                value={point.y}\n-                onChange={(e) => {\n-                  const newAreaPoints = [...newPoint.areaPoints];\n-                  newAreaPoints[index].y = Number(e.target.value);\n-                  setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                }}\n-              />\n-              {index >= 3 && (\n-                <button \n-                  onClick={() => {\n-                    const newAreaPoints = newPoint.areaPoints.filter((_, i) => i !== index);\n-                    setNewPoint({ ...newPoint, areaPoints: newAreaPoints });\n-                  }}\n-                  style={{ marginLeft: '5px', fontSize: '10px', padding: '2px 5px' }}\n-                >\n-                  ì‚­ì œ\n-                </button>\n-              )}\n-            </div>\n-          ))}\n-          <button \n-            onClick={() => {\n-              setNewPoint({ \n-                ...newPoint, \n-                areaPoints: [...newPoint.areaPoints, { x: 0, y: 0 }] \n-              });\n-            }}\n-            style={{ fontSize: '12px', padding: '4px 8px', marginTop: '5px' }}\n-          >\n-            ë©´ ì  ì¶”ê°€\n-          </button>\n-        </InputGroup>\n-\n-        <InputGroup>\n-          <InputLabel>í…ìŠ¤íŠ¸ ë°•ìŠ¤</InputLabel>\n-          <div>\n-            <span style={{ fontSize: '11px' }}>X: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxX}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxX: Number(e.target.value) })}\n-            />\n-            <span style={{ fontSize: '11px' }}>Y: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxY}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxY: Number(e.target.value) })}\n-            />\n-          </div>\n-          <div style={{ marginTop: '5px' }}>\n-            <span style={{ fontSize: '11px' }}>W: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxWidth}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxWidth: Number(e.target.value) })}\n-            />\n-            <span style={{ fontSize: '11px' }}>H: </span>\n-            <CoordinateInput \n-              type=\"number\" \n-              value={newPoint.textBoxHeight}\n-              onChange={(e) => setNewPoint({ ...newPoint, textBoxHeight: Number(e.target.value) })}\n-            />\n-          </div>\n-        </InputGroup>\n-\n-        <button \n-          onClick={() => {\n-            if (newPoint.name.trim()) {\n-              const newId = `muscle_${Date.now()}`;\n-              const newPagePoints = { ...pagePoints };\n-              \n-              newPagePoints[currentPage] = {\n-                ...newPagePoints[currentPage],\n-                [newId]: {\n-                  id: newId,\n-                  name: newPoint.name,\n-                  point: { x: newPoint.pointX, y: newPoint.pointY },\n-                  linePoints: newPoint.linePoints,\n-                  areaPoints: newPoint.areaPoints,\n-                  textBox: { \n-                    x: newPoint.textBoxX, \n-                    y: newPoint.textBoxY, \n-                    width: newPoint.textBoxWidth, \n-                    height: newPoint.textBoxHeight \n-                  },\n-                  text: { \n-                    x: newPoint.textBoxX + newPoint.textBoxWidth / 2, \n-                    y: newPoint.textBoxY + newPoint.textBoxHeight / 2 \n-                  }\n-                }\n-              };\n-              \n-              setPagePoints(newPagePoints);\n-              \n-              // ì…ë ¥ í¼ ì´ˆê¸°í™”\n-              setNewPoint({\n-                name: '',\n-                pointX: 0,\n-                pointY: 0,\n-                linePoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }],\n-                areaPoints: [{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }],\n-                textBoxX: 0,\n-                textBoxY: 0,\n-                textBoxWidth: 10,\n-                textBoxHeight: 4\n-              });\n-            } else {\n-              alert('ê·¼ìœ¡ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n-            }\n-          }}\n-          style={{\n-            width: '100%',\n-            padding: '10px',\n-            background: AppColors.primary,\n-            color: 'white',\n-            border: 'none',\n-            borderRadius: '4px',\n-            cursor: 'pointer',\n-            marginTop: '15px'\n-          }}\n-        >\n-          ê·¼ìœ¡ í¬ì¸íŠ¸ ì¶”ê°€\n-        </button>\n-\n-        <button \n-          onClick={() => {\n-            console.log('í˜„ì¬ í˜ì´ì§€ í¬ì¸íŠ¸ ë°ì´í„°:', JSON.stringify(pagePoints[currentPage], null, 2));\n-          }}\n-          style={{\n-            width: '100%',\n-            padding: '8px',\n-            background: AppColors.secondary,\n-            color: 'white',\n-            border: 'none',\n-            borderRadius: '4px',\n-            cursor: 'pointer',\n-            marginTop: '10px'\n-          }}\n-        >\n-          ì½˜ì†”ì— í˜„ì¬ í˜ì´ì§€ ë°ì´í„° ì¶œë ¥\n-        </button>\n-      </CoordinateEditor>\n-\n-      <SearchPanel $collapsed={isSearchPanelCollapsed}>\n-        {!isSearchPanelCollapsed && (\n-          <>\n-            <SearchTitle>íšŒì› ê²€ìƒ‰</SearchTitle>\n-        <SearchInput\n-          type=\"text\"\n-          placeholder=\"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰\"\n-          value={searchTerm}\n-          onChange={(e) => setSearchTerm(e.target.value)}\n-        />\n-        <MemberList>\n-          {filteredMembers.map(member => (\n-            <MemberItem\n-              key={member.id}\n-              selected={selectedMember?.id === member.id}\n-              onClick={() => handleMemberSelect(member)}\n-            >\n-              <MemberName>{member.name}</MemberName>\n-              <MemberInfo>{member.birth}</MemberInfo>\n-              <MemberInfo>{member.phone}</MemberInfo>\n-            </MemberItem>\n-          ))}\n-          </MemberList>\n-          </>\n-        )}\n-      </SearchPanel>      <ButtonPanel>\n-        <ToggleButton \n-          $collapsed={isSearchPanelCollapsed}\n-          onClick={() => setIsSearchPanelCollapsed(!isSearchPanelCollapsed)}\n-          title={isSearchPanelCollapsed ? 'íšŒì›ê²€ìƒ‰ í¼ì¹˜ê¸°' : 'íšŒì›ê²€ìƒ‰ ì ‘ê¸°'}\n-        >\n-          {isSearchPanelCollapsed ? 'â–¶' : 'â—€'}\n-        </ToggleButton>\n-        \n-        <ActionButton \n-          onClick={handleSave} \n-          title=\"ì €ì¥\"\n-          disabled={isReadOnly}\n-        >\n-          ğŸ’¾\n-        </ActionButton>\n-        \n-        {/* ë™ì  ê·¼ìœ¡ ê´€ë¦¬ ë²„íŠ¼ë“¤ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n-        {(currentPage === 2 || currentPage === 3) && (\n-          <>\n-            <ActionButton \n-              onClick={() => {\n-                const currentMuscles = pagePoints[currentPage];\n-                const selectedMuscleIds = Array.from(selectedPoints);\n-                selectedMuscleIds.forEach(muscleId => {\n-                  if (currentMuscles[muscleId]?.isDynamic) {\n-                    resetDynamicMuscle(muscleId);\n-                  }\n-                });\n-              }} \n-              title=\"ì„ íƒëœ ë™ì  ê·¼ìœ¡ ë¦¬ì…‹\"\n-              disabled={selectedPoints.size === 0}\n-            >\n-              ğŸ”„\n-            </ActionButton>\n-            <ActionButton \n-              onClick={() => {\n-                setSelectedPoints(new Set());\n-              }} \n-              title=\"ëª¨ë“  ì„ íƒ í•´ì œ\"\n-            >\n-              âŒ\n-            </ActionButton>\n-          </>\n-        )}\n-        \n-        <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n-          ğŸ“¤\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handlePrint} title=\"ì¸ì‡„\">\n-          ğŸ–¨ï¸\n-        </ActionButton>\n-        \n-        <ActionButton onClick={handleDownloadPDF} title=\"PDF ë‹¤ìš´ë¡œë“œ\">\n-          ğŸ“\n-        </ActionButton>\n-        \n-        <Divider />\n-        \n-        {/* <PageButton \n-          active={currentPage === 1}\n-          onClick={() => setCurrentPage(1)}\n-        >\n-          1\n-        </PageButton> */}\n-        \n-        <PageButton \n-          active={currentPage === 2}\n-          onClick={() => setCurrentPage(2)}\n-        >\n-          2\n-        </PageButton>\n-        \n-        <PageButton \n-          active={currentPage === 3}\n-          onClick={() => setCurrentPage(3)}\n-        >\n-          3\n-        </PageButton>\n-      </ButtonPanel>\n-\n-      <PrescriptionPanel>\n-        {/* ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²• ì•ˆë‚´ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n-        {(currentPage === 2 || currentPage === 3) && (\n-          <div style={{\n-            padding: '8px 16px',\n-            backgroundColor: '#f0f8ff',\n-            border: '1px solid #b3d9ff',\n-            borderRadius: '4px',\n-            margin: '8px',\n-            fontSize: '12px',\n-            color: '#0066cc'\n-          }}>\n-            ğŸ’¡ <strong>ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²•:</strong> íŒŒë€ìƒ‰ ì ì„  ì˜ì—­ì€ í´ë¦­ìœ¼ë¡œ í¬ì¸íŠ¸ ìœ„ì¹˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n-            ì„ íƒëœ ê·¼ìœ¡ì€ ğŸ”„ ë²„íŠ¼ìœ¼ë¡œ ì›ë˜ ìœ„ì¹˜ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n-          </div>\n-        )}\n-\n-        <PrescriptionContainer ref={prescriptionRef}>\n-          \n-          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n-          {currentPage === 2 && (\n-            <div style={{\n-              display: 'flex',\n-              flexDirection: 'column',\n-              height: '100%'\n-            }}>\n-              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n-              <div style={{ \n-                textAlign: 'left', \n-                marginBottom: '40px',\n-                fontSize: '16px',\n-                fontWeight: 'bold'\n-              }}>\n-                {selectedMember?.name || ''}\n-              </div>\n-\n-              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n-              <div style={{\n-                textAlign: 'center',\n-                fontSize: '24px',\n-                fontWeight: 'bold',\n-                marginBottom: '30px',\n-                color: '#333'\n-              }}>Target Muscles List</div>\n-              \n-              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n-              <div \n-                style={{ \n-                  display: 'flex', \n-                  justifyContent: 'center', \n-                  alignItems: 'center',\n-                  flex: 1,\n-                  position: 'relative'\n-                }}\n-                onMouseMove={handleMouseMove}\n-                onMouseLeave={handleMouseLeave}\n-              >\n-                <img \n-                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n-                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n-                  style={{ \n-                    maxHeight: '100%', \n-                    maxWidth: '100%',\n-                    width: 'auto',\n-                    height: 'auto',\n-                    objectFit: 'contain'\n-                  }} \n-                />\n-                \n-                {/* í•˜ë“œì½”ë”©ëœ í¬ì¸íŠ¸ì™€ ì„ , í…ìŠ¤íŠ¸ */}\n-                <svg \n-                  style={{\n-                    position: 'absolute',\n-                    top: 0,\n-                    left: 0,\n-                    width: '100%',\n-                    height: '100%',\n-                    pointerEvents: 'auto',\n-                    cursor: currentPage === 2 || currentPage === 3 ? 'crosshair' : 'default'\n-                  }}\n-                  viewBox=\"0 0 100 100\"\n-                  preserveAspectRatio=\"none\"\n-                  onClick={handleSvgClick}\n-                >\n-                  {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n-                  {showCoords && currentCoords && currentPage === 2 && (\n-                    <g>\n-                      <rect \n-                        x={currentCoords.x - 8} \n-                        y={currentCoords.y - 4} \n-                        width=\"16\" \n-                        height=\"3\" \n-                        fill=\"rgba(0, 0, 0, 0.8)\" \n-                        rx=\"0.5\"\n-                      />\n-                      <text \n-                        x={currentCoords.x} \n-                        y={currentCoords.y - 1} \n-                        textAnchor=\"middle\" \n-                        fontSize=\"1.2\" \n-                        fill=\"white\" \n-                        fontWeight=\"bold\"\n-                      >\n-                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n-                      </text>\n-                    </g>\n-                  )}\n-                  \n-                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n-                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n-                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n-                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n-                      <polygon \n-                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n-                        fill={\n-                          selectedPoints.has(muscle.id) \n-                            ? \"rgba(255, 165, 0, 0.3)\" \n-                            : muscle.isDynamic \n-                              ? \"rgba(100, 200, 255, 0.2)\" \n-                              : \"rgba(255, 255, 0, 0.2)\"\n-                        }\n-                        stroke={\n-                          selectedPoints.has(muscle.id) \n-                            ? \"orange\" \n-                            : muscle.isDynamic \n-                              ? \"#0088ff\" \n-                              : \"#0066ff\"\n-                        }\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0.3\"}\n-                        strokeDasharray={muscle.isDynamic ? \"1,1\" : \"none\"}\n-                        style={{ cursor: muscle.isDynamic ? 'crosshair' : 'pointer' }}\n-                      />\n-                      \n-                      {/* í¬ì¸í„° */}\n-                      <circle \n-                        cx={muscle.point.x} \n-                        cy={muscle.point.y} \n-                        r={selectedPoints.has(muscle.id) ? \"0.8\" : \"0.6\"} \n-                        fill={\n-                          selectedPoints.has(muscle.id) \n-                            ? \"orange\" \n-                            : muscle.isDynamic \n-                              ? \"#00aaff\" \n-                              : \"yellow\"\n-                        }\n-                        stroke={\n-                          selectedPoints.has(muscle.id) \n-                            ? \"red\" \n-                            : muscle.isDynamic \n-                              ? \"#0088ff\" \n-                              : \"none\"\n-                        }\n-                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : muscle.isDynamic ? \"0.05\" : \"0\"}\n-                      />\n-                      \n-                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n-                      {selectedPoints.has(muscle.id) && (\n-                        <polyline \n-                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                          stroke=\"yellow\" \n-                          strokeWidth=\"0.8\" \n-                          fill=\"none\"\n-                        />\n-                      )}\n-                      \n-                      {/* ë©”ì¸ êº¾ì€ì„  */}\n-                      <polyline \n-                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n-                        stroke=\"black\" \n-                        strokeWidth=\"0.3\" \n-                        fill=\"none\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n-                      <rect \n-                        x={muscle.textBox.x} \n-                        y={muscle.textBox.y} \n-                        width={muscle.textBox.width} \n-                        height={muscle.textBox.height} \n-                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n-                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n-                        strokeWidth=\"0.05\"\n-                      />\n-                      \n-                      {/* í…ìŠ¤íŠ¸ */}\n-                      <text \n-                        x={muscle.text.x} \n-                        y={muscle.text.y} \n-                        fontSize=\"1.2\" \n-                        fill=\"black\"\n-                        fontWeight={selectedPoints.has(muscle.id) ? \"bold\" : \"normal\"}\n-                        textAnchor=\"middle\"\n-                        dominantBaseline=\"middle\"\n-                      >\n-                        {muscle.name}\n-                      </text>\n-                    </g>\n-                  ))}\n-                </svg>\n-              </div>\n-            </div>\n-          )}\n-\n-\n-        </PrescriptionContainer>\n-      </PrescriptionPanel>\n-    </PageContainer>\n-  );\n-};\n-\n export default ExercisePrescriptionPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765602944446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1079,9 +1079,9 @@\n           ğŸ’¾\n         </ActionButton>\n         \n         {/* ë™ì  ê·¼ìœ¡ ê´€ë¦¬ ë²„íŠ¼ë“¤ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n-        {currentPage === 3 && (\n+        {(currentPage === 2 || currentPage === 3) && (\n           <>\n             <ActionButton \n               onClick={() => {\n                 const currentMuscles = pagePoints[currentPage];\n@@ -1145,9 +1145,9 @@\n       </ButtonPanel>\n \n       <PrescriptionPanel>\n         {/* ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²• ì•ˆë‚´ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n-        {currentPage === 3 && (\n+        {(currentPage === 2 || currentPage === 3) && (\n           <div style={{\n             padding: '8px 16px',\n             backgroundColor: '#f0f8ff',\n             border: '1px solid #b3d9ff',\n@@ -1162,13 +1162,179 @@\n         )}\n \n         <PrescriptionContainer ref={prescriptionRef}>\n           \n-          {/* í˜ì´ì§€ 2: Target Muscles (Front) - ì„ì‹œ ì£¼ì„ ì²˜ë¦¬\n+          {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n           {currentPage === 2 && (\n-            <div>ì „ë©´ ê·¼ìœ¡ í˜ì´ì§€ ë‚´ìš©</div>\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>Target Muscles List</div>\n+              \n+              {/* ì „ë©´ ê·¼ìœ¡ ì´ë¯¸ì§€ with í¬ì¸íŠ¸ */}\n+              <div \n+                style={{ \n+                  display: 'flex', \n+                  justifyContent: 'center', \n+                  alignItems: 'center',\n+                  flex: 1,\n+                  position: 'relative'\n+                }}\n+                onMouseMove={handleMouseMove}\n+                onMouseLeave={handleMouseLeave}\n+              >\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/front.png`} \n+                  alt=\"ì¸ì²´ ì „ë©´ ê·¼ìœ¡ë„\" \n+                  style={{ \n+                    maxHeight: '100%', \n+                    maxWidth: '100%',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+                \n+                {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n+                <svg \n+                  style={{\n+                    position: 'absolute',\n+                    top: 0,\n+                    left: 0,\n+                    width: '100%',\n+                    height: '100%',\n+                    pointerEvents: 'auto',\n+                    cursor: currentPage === 2 || currentPage === 3 ? 'crosshair' : 'default'\n+                  }}\n+                  viewBox=\"0 0 100 100\"\n+                  preserveAspectRatio=\"none\"\n+                  onClick={handleSvgClick}\n+                >\n+                  {/* í˜„ì¬ ë§ˆìš°ìŠ¤ ì¢Œí‘œ í‘œì‹œ */}\n+                  {showCoords && currentCoords && currentPage === 2 && (\n+                    <g>\n+                      <rect \n+                        x={currentCoords.x - 8} \n+                        y={currentCoords.y - 4} \n+                        width=\"16\" \n+                        height=\"3\" \n+                        fill=\"rgba(0, 0, 0, 0.8)\" \n+                        rx=\"0.5\"\n+                      />\n+                      <text \n+                        x={currentCoords.x} \n+                        y={currentCoords.y - 1} \n+                        textAnchor=\"middle\" \n+                        fontSize=\"1.2\" \n+                        fill=\"white\" \n+                        fontWeight=\"bold\"\n+                      >\n+                        x: {currentCoords.x.toFixed(1)}%, y: {currentCoords.y.toFixed(1)}%\n+                      </text>\n+                    </g>\n+                  )}\n+                  \n+                  {/* ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê·¼ìœ¡ í¬ì¸íŠ¸ë“¤ */}\n+                  {pagePoints[currentPage] && Object.values(pagePoints[currentPage]).map((muscle) => (\n+                    <g key={muscle.id} onClick={() => handlePointClick(muscle.id)} style={{ cursor: 'pointer' }}>\n+                      {/* í´ë¦­ ë²”ìœ„ (ë©´) - ë°˜íˆ¬ëª… ë‹¤ê°í˜• */}\n+                      <polygon \n+                        points={muscle.areaPoints.map(p => `${p.x},${p.y}`).join(' ')}\n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255, 165, 0, 0.3)\" : \"rgba(255, 255, 0, 0.2)\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"#0066ff\"}\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : \"0.3\"}\n+                        strokeDasharray={muscle.isDynamic ? \"1,1\" : \"none\"}\n+                        style={{ cursor: muscle.isDynamic ? 'crosshair' : 'pointer' }}\n+                      />\n+                      \n+                      {/* í¬ì¸í„° */}\n+                      <circle \n+                        cx={muscle.point.x} \n+                        cy={muscle.point.y} \n+                        r={selectedPoints.has(muscle.id) ? \"0.8\" : \"0.6\"} \n+                        fill={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"orange\" \n+                            : muscle.isDynamic \n+                              ? \"#00aaff\" \n+                              : \"yellow\"\n+                        }\n+                        stroke={\n+                          selectedPoints.has(muscle.id) \n+                            ? \"red\" \n+                            : muscle.isDynamic \n+                              ? \"#0088ff\" \n+                              : \"none\"\n+                        }\n+                        strokeWidth={selectedPoints.has(muscle.id) ? \"0.1\" : muscle.isDynamic ? \"0.05\" : \"0\"}\n+                      />\n+                      \n+                      {/* ì„ íƒì‹œ ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ ì„  */}\n+                      {selectedPoints.has(muscle.id) && (\n+                        <polyline \n+                          points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                          stroke=\"yellow\" \n+                          strokeWidth=\"0.4\" \n+                          fill=\"none\"\n+                        />\n+                      )}\n+                      \n+                      {/* ë©”ì¸ êº¾ì€ì„  */}\n+                      <polyline \n+                        points={muscle.linePoints.map(p => `${p.x},${p.y}`).join(' ')} \n+                        stroke=\"black\" \n+                        strokeWidth=\"0.15\" \n+                        fill=\"none\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ ë°°ê²½ ë°•ìŠ¤ */}\n+                      <rect \n+                        x={muscle.textBox.x} \n+                        y={muscle.textBox.y} \n+                        width={muscle.textBox.width} \n+                        height={muscle.textBox.height} \n+                        fill={selectedPoints.has(muscle.id) ? \"rgba(255,255,0,0.3)\" : \"transparent\"}\n+                        stroke={selectedPoints.has(muscle.id) ? \"orange\" : \"none\"}\n+                        strokeWidth=\"0.05\"\n+                      />\n+                      \n+                      {/* í…ìŠ¤íŠ¸ */}\n+                      <text \n+                        x={muscle.text.x} \n+                        y={muscle.text.y} \n+                        fontSize=\"1.2\" \n+                        fill=\"black\"\n+                        fontWeight={selectedPoints.has(muscle.id) ? \"900\" : \"bold\"}\n+                        textAnchor=\"middle\"\n+                        dominantBaseline=\"middle\"\n+                      >\n+                        {muscle.name}\n+                      </text>\n+                    </g>\n+                  ))}\n+                </svg>\n+              </div>\n+            </div>\n           )}\n-          */}\n \n           {/* í˜ì´ì§€ 3: Target Muscles (Back) */}\n           {currentPage === 3 && (\n             <div style={{\n@@ -1227,9 +1393,9 @@\n                     left: 0,\n                     width: '100%',\n                     height: '100%',\n                     pointerEvents: 'auto',\n-                    cursor: currentPage === 3 ? 'crosshair' : 'default'\n+                    cursor: currentPage === 2 || currentPage === 3 ? 'crosshair' : 'default'\n                   }}\n                   viewBox=\"0 0 100 100\"\n                   preserveAspectRatio=\"none\"\n                   onClick={handleSvgClick}\n"
                },
                {
                    "date": 1765605251287,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -272,9 +272,9 @@\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState(3); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (3í˜ì´ì§€ë¡œ ì‹œì‘)\n+  const [currentPage, setCurrentPage] = useState<number>(3); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (3í˜ì´ì§€ë¡œ ì‹œì‘)\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n"
                },
                {
                    "date": 1765614639814,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -272,9 +272,9 @@\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n-  const [currentPage, setCurrentPage] = useState<number>(3); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (3í˜ì´ì§€ë¡œ ì‹œì‘)\n+  const [currentPage, setCurrentPage] = useState<number>(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (1í˜ì´ì§€ë¡œ ì‹œì‘)\n   const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n@@ -1121,14 +1121,14 @@\n         </ActionButton>\n         \n         <Divider />\n         \n-        {/* <PageButton \n+        <PageButton \n           active={currentPage === 1}\n           onClick={() => setCurrentPage(1)}\n         >\n           1\n-        </PageButton> */}\n+        </PageButton>\n         \n         <PageButton \n           active={currentPage === 2}\n           onClick={() => setCurrentPage(2)}\n@@ -1161,8 +1161,84 @@\n           </div>\n         )}\n \n         <PrescriptionContainer ref={prescriptionRef}>\n+          {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n+          {currentPage === 1 && (\n+            <div style={{\n+              display: 'flex',\n+              flexDirection: 'column',\n+              height: '100%'\n+            }}>\n+              {/* ìƒë‹¨ ì´ë¦„ë§Œ */}\n+              <div style={{ \n+                textAlign: 'left', \n+                marginBottom: '40px',\n+                fontSize: '16px',\n+                fontWeight: 'bold'\n+              }}>\n+                {selectedMember?.name || ''}\n+              </div>\n+\n+              {/* ì¤‘ì•™ íƒ€ì´í‹€ */}\n+              <div style={{\n+                textAlign: 'center',\n+                fontSize: '24px',\n+                fontWeight: 'bold',\n+                marginBottom: '30px',\n+                color: '#333'\n+              }}>SPINE Mapping Chart</div>\n+              \n+              {/* ì²™ì¶” ì´ë¯¸ì§€ */}\n+              <div style={{ \n+                display: 'flex', \n+                justifyContent: 'center', \n+                alignItems: 'center',\n+                flex: 1,\n+                margin: '20px 0'\n+              }}>\n+                <img \n+                  src={`${process.env.PUBLIC_URL}/cms/bone.svg`} \n+                  alt=\"ì²™ì¶” ì´ë¯¸ì§€\" \n+                  style={{ \n+                    maxHeight: '100%',\n+                    maxWidth: '300px',\n+                    width: 'auto',\n+                    height: 'auto',\n+                    objectFit: 'contain'\n+                  }} \n+                />\n+              </div>\n+\n+              {/* ì£¼ìš” í˜¸ì†Œ ì¦ìƒ */}\n+              <div style={{\n+                marginTop: '30px',\n+                padding: '20px',\n+                border: '1px solid #ddd',\n+                borderRadius: '5px'\n+              }}>\n+                <div style={{\n+                  fontSize: '14px',\n+                  fontWeight: 'bold',\n+                  marginBottom: '10px'\n+                }}>ì£¼ìš” í˜¸ì†Œ ì¦ìƒ (Chief Complaint)</div>\n+                \n+                <textarea\n+                  style={{\n+                    width: '100%',\n+                    minHeight: '80px',\n+                    padding: '8px',\n+                    border: '1px solid #ddd',\n+                    borderRadius: '3px',\n+                    fontSize: '12px',\n+                    resize: 'vertical',\n+                    fontFamily: 'inherit'\n+                  }}\n+                  placeholder=\"ì£¼ìš” í˜¸ì†Œ ì¦ìƒì„ ì…ë ¥í•˜ì„¸ìš”...\"\n+                />\n+              </div>\n+            </div>\n+          )}\n           \n           {/* í˜ì´ì§€ 2: Target Muscles (Front) */}\n           {currentPage === 2 && (\n             <div style={{\n"
                },
                {
                    "date": 1765614694914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1078,37 +1078,8 @@\n         >\n           ğŸ’¾\n         </ActionButton>\n         \n-        {/* ë™ì  ê·¼ìœ¡ ê´€ë¦¬ ë²„íŠ¼ë“¤ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n-        {(currentPage === 2 || currentPage === 3) && (\n-          <>\n-            <ActionButton \n-              onClick={() => {\n-                const currentMuscles = pagePoints[currentPage];\n-                const selectedMuscleIds = Array.from(selectedPoints);\n-                selectedMuscleIds.forEach(muscleId => {\n-                  if (currentMuscles[muscleId]?.isDynamic) {\n-                    resetDynamicMuscle(muscleId);\n-                  }\n-                });\n-              }} \n-              title=\"ì„ íƒëœ ë™ì  ê·¼ìœ¡ ë¦¬ì…‹\"\n-              disabled={selectedPoints.size === 0}\n-            >\n-              ğŸ”„\n-            </ActionButton>\n-            <ActionButton \n-              onClick={() => {\n-                setSelectedPoints(new Set());\n-              }} \n-              title=\"ëª¨ë“  ì„ íƒ í•´ì œ\"\n-            >\n-              âŒ\n-            </ActionButton>\n-          </>\n-        )}\n-        \n         <ActionButton onClick={handleShare} title=\"ê³µìœ \">\n           ğŸ“¤\n         </ActionButton>\n         \n@@ -1144,24 +1115,8 @@\n         </PageButton>\n       </ButtonPanel>\n \n       <PrescriptionPanel>\n-        {/* ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²• ì•ˆë‚´ - ê·¼ìœ¡ í˜ì´ì§€ì—ì„œë§Œ í‘œì‹œ */}\n-        {(currentPage === 2 || currentPage === 3) && (\n-          <div style={{\n-            padding: '8px 16px',\n-            backgroundColor: '#f0f8ff',\n-            border: '1px solid #b3d9ff',\n-            borderRadius: '4px',\n-            margin: '8px',\n-            fontSize: '12px',\n-            color: '#0066cc'\n-          }}>\n-            ğŸ’¡ <strong>ë™ì  ê·¼ìœ¡ ì‚¬ìš©ë²•:</strong> íŒŒë€ìƒ‰ ì ì„  ì˜ì—­ì€ í´ë¦­ìœ¼ë¡œ í¬ì¸íŠ¸ ìœ„ì¹˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n-            ì„ íƒëœ ê·¼ìœ¡ì€ ğŸ”„ ë²„íŠ¼ìœ¼ë¡œ ì›ë˜ ìœ„ì¹˜ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n-          </div>\n-        )}\n-\n         <PrescriptionContainer ref={prescriptionRef}>\n           {/* í˜ì´ì§€ 1: SPINE Mapping Chart */}\n           {currentPage === 1 && (\n             <div style={{\n"
                },
                {
                    "date": 1765614716729,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -273,9 +273,9 @@\n   const [members, setMembers] = useState<Member[]>([]);\n   const [currentPrescription, setCurrentPrescription] = useState<ExercisePrescription | null>(null);\n   const [isReadOnly, setIsReadOnly] = useState(false); // ì½ê¸° ì „ìš© ëª¨ë“œ ìƒíƒœ\n   const [currentPage, setCurrentPage] = useState<number>(1); // í˜„ì¬ í˜ì´ì§€ ìƒíƒœ ì¶”ê°€ (1í˜ì´ì§€ë¡œ ì‹œì‘)\n-  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(true);\n+  const [isSearchPanelCollapsed, setIsSearchPanelCollapsed] = useState(false);\n   const [selectedPoints, setSelectedPoints] = useState<Set<string>>(new Set()); // ì„ íƒëœ í¬ì¸íŠ¸ë“¤\n   const [isCoordinateEditorOpen, setIsCoordinateEditorOpen] = useState(false); // ì¢Œí‘œ í¸ì§‘ê¸° ì—´ë¦¼ ìƒíƒœ // ê²€ìƒ‰ íŒ¨ë„ ì ‘ê¸° ìƒíƒœ\n   const [currentCoords, setCurrentCoords] = useState<{ x: number; y: number } | null>(null);\n   const [showCoords, setShowCoords] = useState(false);\n"
                }
            ],
            "date": 1761379597392,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { AppColors } from '../styles/colors';\nimport { AppTextStyles } from '../styles/textStyles';\n\nconst PageContainer = styled.div`\n  min-height: 100vh;\n  padding: 40px 20px;\n  background: ${AppColors.background};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst ContentContainer = styled.div`\n  background: ${AppColors.surface};\n  border-radius: 16px;\n  padding: 48px;\n  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);\n  text-align: center;\n  max-width: 600px;\n  width: 100%;\n`;\n\nconst Title = styled.h1`\n  font-size: ${AppTextStyles.title1.fontSize};\n  font-weight: 700;\n  color: ${AppColors.onBackground};\n  margin: 0 0 24px 0;\n`;\n\nconst Description = styled.p`\n  font-size: ${AppTextStyles.body1.fontSize};\n  color: ${AppColors.onInput1};\n  margin: 0 0 32px 0;\n  line-height: 1.6;\n`;\n\nconst InfoCard = styled.div`\n  background: #f8f9fa;\n  border: 1px solid ${AppColors.borderLight};\n  border-radius: 12px;\n  padding: 24px;\n  margin: 24px 0;\n`;\n\nconst InfoLabel = styled.div`\n  font-size: ${AppTextStyles.label2.fontSize};\n  color: ${AppColors.onInput1};\n  margin-bottom: 8px;\n`;\n\nconst InfoValue = styled.div`\n  font-size: ${AppTextStyles.body1.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onBackground};\n`;\n\nconst ComingSoonBadge = styled.div`\n  display: inline-block;\n  background: ${AppColors.primary};\n  color: ${AppColors.onPrimary};\n  padding: 8px 16px;\n  border-radius: 20px;\n  font-size: ${AppTextStyles.label2.fontSize};\n  font-weight: 500;\n  margin-bottom: 16px;\n`;\n\nconst ExercisePrescriptionPage: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const [memberId, setMemberId] = useState<string>('');\n\n  useEffect(() => {\n    const memberIdParam = searchParams.get('memberId');\n    if (memberIdParam) {\n      setMemberId(memberIdParam);\n    }\n  }, [searchParams]);\n\n  return (\n    <PageContainer>\n      <ContentContainer>\n        <ComingSoonBadge>ê°œë°œ ì¤‘</ComingSoonBadge>\n        <Title>ìš´ë™ì²˜ë°© í˜ì´ì§€</Title>\n        <Description>\n          ê°œì¸ ë§ì¶¤í˜• ìš´ë™ í”„ë¡œê·¸ë¨ì„ ì œê³µí•˜ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.\n          <br />\n          í˜„ì¬ ê°œë°œ ì¤‘ì´ë©°, ê³§ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•  ì˜ˆì •ì…ë‹ˆë‹¤.\n        </Description>\n        \n        {memberId && (\n          <InfoCard>\n            <InfoLabel>ì „ë‹¬ë°›ì€ íšŒì› ID</InfoLabel>\n            <InfoValue>{memberId}</InfoValue>\n          </InfoCard>\n        )}\n        \n        <Description>\n          ì´ í˜ì´ì§€ëŠ” QR ì½”ë“œë¥¼ í†µí•´ ì ‘ê·¼ë˜ì—ˆìœ¼ë©°,\n          <br />\n          í–¥í›„ íšŒì›ë³„ ë§ì¶¤ ìš´ë™ì²˜ë°© ì •ë³´ë¥¼ ì œê³µí•  ì˜ˆì •ì…ë‹ˆë‹¤.\n        </Description>\n      </ContentContainer>\n    </PageContainer>\n  );\n};\n\nexport default ExercisePrescriptionPage;"
        }
    ]
}