{
    "sourceFile": "src/pages/CMS/MemberExercisePrescriptionDetail.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1762429025961,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1762429025961,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { ExercisePrescription } from '../../utils/db/types';\nimport { ExercisePrescriptionService } from '../../utils/db/ExercisePrescriptionService';\nimport ExercisePrescriptionForm from '../../components/ExercisePrescriptionForm';\nimport { AppColors } from '../../styles/colors';\n\nconst Container = styled.div`\n  padding: 24px;\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: between;\n  align-items: center;\n  margin-bottom: 24px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid ${AppColors.borderLight};\n`;\n\nconst Title = styled.h1`\n  font-size: 24px;\n  font-weight: 600;\n  color: ${AppColors.onSurface};\n  margin: 0;\n`;\n\nconst BackButton = styled.button`\n  padding: 8px 16px;\n  border: 1px solid ${AppColors.borderLight};\n  border-radius: 8px;\n  background: white;\n  color: ${AppColors.onSurface};\n  cursor: pointer;\n  font-size: 14px;\n  \n  &:hover {\n    background: ${AppColors.background};\n  }\n`;\n\nconst VersionBadge = styled.span`\n  background: ${AppColors.primary};\n  color: white;\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n  margin-left: 12px;\n`;\n\nconst LoadingContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 400px;\n  font-size: 16px;\n  color: ${AppColors.onInput2};\n`;\n\nconst ErrorContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 400px;\n  font-size: 16px;\n  color: ${AppColors.error};\n  text-align: center;\n`;\n\ninterface MemberExercisePrescriptionDetailProps {\n}\n\nconst MemberExercisePrescriptionDetail: React.FC<MemberExercisePrescriptionDetailProps> = () => {\n  const { prescriptionId } = useParams<{ prescriptionId: string }>();\n  const navigate = useNavigate();\n  const [prescription, setPrescription] = useState<ExercisePrescription | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadPrescription = async () => {\n      if (!prescriptionId) {\n        setError('운동처방 ID가 제공되지 않았습니다.');\n        setLoading(false);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        const service = new ExercisePrescriptionService();\n        const data = await service.getExercisePrescriptionById(prescriptionId);\n        if (data) {\n          setPrescription(data);\n        } else {\n          setError('운동처방을 찾을 수 없습니다.');\n        }\n      } catch (err) {\n        console.error('운동처방 로드 중 오류:', err);\n        setError('운동처방을 불러오는 중 오류가 발생했습니다.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadPrescription();\n  }, [prescriptionId]);\n\n  const handleGoBack = () => {\n    navigate(-1);\n  };\n\n  if (loading) {\n    return (\n      <Container>\n        <LoadingContainer>\n          운동처방을 불러오는 중...\n        </LoadingContainer>\n      </Container>\n    );\n  }\n\n  if (error || !prescription) {\n    return (\n      <Container>\n        <ErrorContainer>\n          <div>\n            <div>{error || '운동처방을 찾을 수 없습니다.'}</div>\n            <BackButton onClick={handleGoBack} style={{ marginTop: '16px' }}>\n              돌아가기\n            </BackButton>\n          </div>\n        </ErrorContainer>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <Header>\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n          <Title>운동처방 상세보기</Title>\n          <VersionBadge>v{prescription.version}</VersionBadge>\n        </div>\n        <BackButton onClick={handleGoBack}>\n          목록으로 돌아가기\n        </BackButton>\n      </Header>\n\n      <ExercisePrescriptionForm\n        selectedMember={{\n          id: prescription.memberId,\n          name: prescription.memberName,\n          phone: '',\n          email: '',\n          birth: '',\n          gender: 'male',\n          address: '',\n          sigunguCode: '',\n          dong: '',\n          roadAddress: '',\n          jibunAddress: '',\n          branchId: '',\n          branchName: '',\n          coach: '',\n          coachName: '',\n          joinPath: '',\n          loginId: '',\n          loginPassword: null,\n          enableLogin: false,\n          agreementInfo: {\n            agreements: [],\n            customerSignature: '',\n            staffSignature: ''\n          },\n          isActive: true,\n          registrationDate: '',\n          createdAt: new Date(),\n          updatedAt: new Date()\n        }}\n        prescription={prescription}\n        formData={{\n          height: prescription.height,\n          weight: prescription.weight,\n          footSize: prescription.footSize,\n          medications: prescription.medications,\n          medicalHistory: prescription.medicalHistory,\n          painHistory: prescription.painHistory,\n          bodyImages: prescription.bodyImages,\n          signatureData: prescription.signatureData\n        }}\n        readOnly={true}\n      />\n    </Container>\n  );\n};\n\nexport default MemberExercisePrescriptionDetail;"
        }
    ]
}