{
    "sourceFile": "src/pages/CMS/Member/CourseHistory.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 50,
            "patches": [
                {
                    "date": 1760758580231,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1760762285625,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,93 +1,16 @@\n-import React, { useState, useEffect } from 'react';\n+import React, { useState, useEffect, useCallback } from 'react';\n import styled from 'styled-components';\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n import { dbManager, type CourseEnrollment } from '../../../utils/indexedDB';\n+import { SearchArea, type PeriodOption } from '../../../components/SearchArea';\n+import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n \n const PageContainer = styled.div`\n   width: 100%;\n `;\n \n-const SearchSection = styled.div`\n-  background: ${AppColors.surface};\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 16px;\n-  padding: 24px;\n-  margin-bottom: 24px;\n-  box-shadow: 0 1px 2px rgba(16, 24, 40, 0.04);\n-`;\n-\n-const SearchRow = styled.div`\n-  display: flex;\n-  gap: 12px;\n-  align-items: center;\n-  margin-bottom: 16px;\n-`;\n-\n-const SearchInput = styled.input`\n-  flex: 1;\n-  padding: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 8px;\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  outline: none;\n-  \n-  &:focus {\n-    border-color: ${AppColors.primary};\n-  }\n-  \n-  &::placeholder {\n-    color: ${AppColors.onInput1};\n-  }\n-`;\n-\n-const Button = styled.button<{ variant?: 'primary' | 'secondary' }>`\n-  padding: 12px 18px;\n-  border: ${props => props.variant === 'secondary' ? `1px solid ${AppColors.borderLight}` : 'none'};\n-  border-radius: 8px;\n-  background: ${props => props.variant === 'secondary' ? AppColors.surface : AppColors.primary};\n-  color: ${props => props.variant === 'secondary' ? AppColors.onSurface : AppColors.onPrimary};\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: 600;\n-  cursor: pointer;\n-  transition: all 0.2s;\n-  \n-  &:hover {\n-    opacity: 0.9;\n-    transform: translateY(-1px);\n-  }\n-  \n-  &:disabled {\n-    opacity: 0.5;\n-    cursor: not-allowed;\n-    transform: none;\n-  }\n-`;\n-\n-const FilterRow = styled.div<{ $visible: boolean }>`\n-  display: ${props => props.$visible ? 'flex' : 'none'};\n-  gap: 8px;\n-  align-items: center;\n-  flex-wrap: wrap;\n-`;\n-\n-const FilterChip = styled.button<{ $active: boolean }>`\n-  padding: 6px 12px;\n-  border: 1px solid ${props => props.$active ? AppColors.primary : AppColors.borderLight};\n-  border-radius: 20px;\n-  background: ${props => props.$active ? AppColors.primary : AppColors.surface};\n-  color: ${props => props.$active ? AppColors.onPrimary : AppColors.onSurface};\n-  font-size: ${AppTextStyles.label2.fontSize};\n-  cursor: pointer;\n-  transition: all 0.2s;\n-  \n-  &:hover {\n-    border-color: ${AppColors.primary};\n-    background: ${props => props.$active ? AppColors.primary : 'rgba(0, 123, 255, 0.1)'};\n-  }\n-`;\n-\n const ResultsSection = styled.div`\n   background: ${AppColors.surface};\n   border: 1px solid ${AppColors.borderLight};\n   border-radius: 16px;\n@@ -197,34 +120,166 @@\n const CourseHistory: React.FC = () => {\n   const [searchQuery, setSearchQuery] = useState<string>('');\n   const [courseEnrollments, setCourseEnrollments] = useState<CourseEnrollment[]>([]);\n   const [filteredEnrollments, setFilteredEnrollments] = useState<CourseEnrollment[]>([]);\n-  const [showFilters, setShowFilters] = useState<boolean>(false);\n-  const [activeFilters, setActiveFilters] = useState<string[]>([]);\n   const [loading, setLoading] = useState<boolean>(true);\n+  \n+  // ê¸°ê°„ ì„ íƒ ê´€ë ¨ ìƒíƒœ\n+  const [selectedPeriod, setSelectedPeriod] = useState<PeriodOption>('1month');\n+  const [customStartDate, setCustomStartDate] = useState<string>('');\n+  const [customEndDate, setCustomEndDate] = useState<string>('');\n+  \n+  // ë¯¸ìˆ˜ í•„í„° ê´€ë ¨ ìƒíƒœ\n+  const [showUnpaidOnly, setShowUnpaidOnly] = useState<boolean>(false);\n+  const [unpaidMetaInfo, setUnpaidMetaInfo] = useState<{ unpaidCourseCount: number; totalUnpaidAmount: number }>({\n+    unpaidCourseCount: 0,\n+    totalUnpaidAmount: 0\n+  });\n \n-  useEffect(() => {\n-    loadCourseEnrollments();\n+  // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n+  const loadUnpaidMetaInfo = useCallback(async () => {\n+    try {\n+      const allEnrollments = await dbManager.getAllCourseEnrollments();\n+      const unpaidEnrollments = allEnrollments.filter(e => e.enrollmentStatus === 'unpaid');\n+      const unpaidCourseCount = unpaidEnrollments.length;\n+      const totalUnpaidAmount = unpaidEnrollments.reduce((sum, e) => sum + (e.unpaidAmount || 0), 0);\n+      \n+      setUnpaidMetaInfo({ unpaidCourseCount, totalUnpaidAmount });\n+    } catch (error) {\n+      console.error('ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n   }, []);\n \n-  const loadCourseEnrollments = async () => {\n+  // ê¸°ê°„ë³„ ê²€ìƒ‰ ë²”ìœ„ ê³„ì‚°\n+  const getDateRange = useCallback(() => {\n+    const today = new Date();\n+    const startDate = new Date();\n+    \n+    switch (selectedPeriod) {\n+      case '1month':\n+        startDate.setMonth(today.getMonth() - 1);\n+        return { start: startDate, end: today };\n+      case '3month':\n+        startDate.setMonth(today.getMonth() - 3);\n+        return { start: startDate, end: today };\n+      case '6month':\n+        startDate.setMonth(today.getMonth() - 6);\n+        return { start: startDate, end: today };\n+      case 'custom':\n+        if (customStartDate && customEndDate) {\n+          return { \n+            start: new Date(customStartDate), \n+            end: new Date(customEndDate) \n+          };\n+        }\n+        // ì»¤ìŠ¤í…€ ë‚ ì§œê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ 1ê°œì›”\n+        startDate.setMonth(today.getMonth() - 1);\n+        return { start: startDate, end: today };\n+      default:\n+        startDate.setMonth(today.getMonth() - 1);\n+        return { start: startDate, end: today };\n+    }\n+  }, [selectedPeriod, customStartDate, customEndDate]);\n+\n+  // ë‚ ì§œ ë²”ìœ„ í‘œì‹œ ë¬¸ìì—´ ìƒì„±\n+  const getDateRangeDisplay = useCallback(() => {\n+    const range = getDateRange();\n+    const formatDate = (date: Date) => {\n+      return date.toLocaleDateString('ko-KR', {\n+        year: 'numeric',\n+        month: 'short',\n+        day: 'numeric'\n+      });\n+    };\n+    return `${formatDate(range.start)} ~ ${formatDate(range.end)}`;\n+  }, [getDateRange]);\n+\n+  const loadCourseEnrollments = useCallback(async (period?: PeriodOption, startDate?: string, endDate?: string) => {\n     try {\n       setLoading(true);\n-      const enrollments = await dbManager.getAllCourseEnrollments();\n-      setCourseEnrollments(enrollments);\n-      setFilteredEnrollments(enrollments);\n+      console.log('ìˆ˜ê°• ë°ì´í„° ë¡œë”© ì‹œì‘...');\n+      \n+      // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n+      await loadUnpaidMetaInfo();\n+      \n+      const allEnrollments = await dbManager.getAllCourseEnrollments();\n+      console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥ ìˆ˜:', allEnrollments.length);\n+      \n+      // ê¸°ê°„ë³„ í•„í„°ë§ (ë“±ë¡ì¼ ê¸°ì¤€) - ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ í˜„ì¬ ìƒíƒœ ì‚¬ìš©\n+      const currentPeriod = period ?? selectedPeriod;\n+      const currentStartDate = startDate ?? customStartDate;\n+      const currentEndDate = endDate ?? customEndDate;\n+      \n+      let dateRange: { start: Date; end: Date };\n+      const today = new Date();\n+      const rangeStartDate = new Date();\n+      \n+      switch (currentPeriod) {\n+        case '1month':\n+          rangeStartDate.setMonth(today.getMonth() - 1);\n+          dateRange = { start: rangeStartDate, end: today };\n+          break;\n+        case '3month':\n+          rangeStartDate.setMonth(today.getMonth() - 3);\n+          dateRange = { start: rangeStartDate, end: today };\n+          break;\n+        case '6month':\n+          rangeStartDate.setMonth(today.getMonth() - 6);\n+          dateRange = { start: rangeStartDate, end: today };\n+          break;\n+        case 'custom':\n+          if (currentStartDate && currentEndDate) {\n+            dateRange = { \n+              start: new Date(currentStartDate), \n+              end: new Date(currentEndDate) \n+            };\n+          } else {\n+            // ì»¤ìŠ¤í…€ ë‚ ì§œê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ 1ê°œì›”\n+            rangeStartDate.setMonth(today.getMonth() - 1);\n+            dateRange = { start: rangeStartDate, end: today };\n+          }\n+          break;\n+        default:\n+          rangeStartDate.setMonth(today.getMonth() - 1);\n+          dateRange = { start: rangeStartDate, end: today };\n+      }\n+      \n+      const filteredByDate = allEnrollments.filter(enrollment => {\n+        const enrollmentDate = new Date(enrollment.createdAt);\n+        return enrollmentDate >= dateRange.start && enrollmentDate <= dateRange.end;\n+      });\n+      \n+      console.log(`${currentPeriod} ê¸°ê°„ ë‚´ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n+      \n+      setCourseEnrollments(filteredByDate);\n+      setFilteredEnrollments(filteredByDate);\n     } catch (error) {\n       console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n     } finally {\n       setLoading(false);\n     }\n-  };\n+  }, [loadUnpaidMetaInfo, selectedPeriod, customStartDate, customEndDate]);\n \n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì´ˆê¸° ë°ì´í„° ë¡œë“œ (1ê°œì›” ê¸°ì¤€)\n+  useEffect(() => {\n+    const initializeData = async () => {\n+      await loadCourseEnrollments();\n+    };\n+    initializeData();\n+  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n+\n   const handleSearch = async () => {\n-    await loadCourseEnrollments();\n+    // í˜„ì¬ ì„ íƒëœ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤\n+    await loadCourseEnrollments(selectedPeriod, customStartDate, customEndDate);\n     \n     let filtered = courseEnrollments;\n     \n+    // ë¯¸ìˆ˜ í•„í„° ì ìš©\n+    if (showUnpaidOnly) {\n+      filtered = filtered.filter(enrollment => enrollment.enrollmentStatus === 'unpaid');\n+    }\n+    \n+    // í…ìŠ¤íŠ¸ ê²€ìƒ‰\n     if (searchQuery.trim()) {\n       const query = searchQuery.toLowerCase().trim();\n       filtered = filtered.filter(enrollment =>\n         enrollment.memberName.toLowerCase().includes(query) ||\n@@ -234,50 +289,11 @@\n         enrollment.coachName.toLowerCase().includes(query)\n       );\n     }\n     \n-    if (activeFilters.length > 0) {\n-      filtered = filtered.filter(enrollment => {\n-        return activeFilters.some(filter => {\n-          switch (filter) {\n-            case 'ì™„ë£Œ':\n-              return enrollment.enrollmentStatus === 'completed';\n-            case 'ë¯¸ìˆ˜':\n-              return enrollment.enrollmentStatus === 'unpaid';\n-            case 'íšŸìˆ˜ì œ':\n-              return enrollment.programType === 'íšŸìˆ˜ì œ';\n-            case 'ê¸°ê°„ì œ':\n-              return enrollment.programType === 'ê¸°ê°„ì œ';\n-            default:\n-              return enrollment.branchName === filter;\n-          }\n-        });\n-      });\n-    }\n-    \n     setFilteredEnrollments(filtered);\n   };\n \n-  const handleKeyPress = (e: React.KeyboardEvent) => {\n-    if (e.key === 'Enter') {\n-      handleSearch();\n-    }\n-  };\n-\n-  const toggleFilter = (filter: string) => {\n-    setActiveFilters(prev => \n-      prev.includes(filter) \n-        ? prev.filter(f => f !== filter)\n-        : [...prev, filter]\n-    );\n-  };\n-\n-  const clearFilters = () => {\n-    setActiveFilters([]);\n-    setSearchQuery('');\n-    setFilteredEnrollments(courseEnrollments);\n-  };\n-\n   const formatDate = (date: Date | null | undefined) => {\n     return date ? new Date(date).toLocaleDateString() : '-';\n   };\n \n@@ -301,11 +317,8 @@\n     }\n     return 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n   };\n \n-  const branchNames = Array.from(new Set(courseEnrollments.map(e => e.branchName))).filter(Boolean);\n-  const filterOptions = ['ì™„ë£Œ', 'ë¯¸ìˆ˜', 'íšŸìˆ˜ì œ', 'ê¸°ê°„ì œ', ...branchNames];\n-\n   if (loading) {\n     return (\n       <PageContainer>\n         <LoadingState>\n@@ -316,47 +329,46 @@\n   }\n \n   return (\n     <PageContainer>\n-      <SearchSection>\n-        <SearchRow>\n-          <SearchInput\n-            value={searchQuery}\n-            onChange={(e) => setSearchQuery(e.target.value)}\n-            onKeyPress={handleKeyPress}\n-            placeholder=\"íšŒì›ëª…, ìƒí’ˆëª…, í”„ë¡œê·¸ë¨ëª…, ì§€ì ëª…, ì½”ì¹˜ëª…ìœ¼ë¡œ ê²€ìƒ‰...\"\n-          />\n-          <Button onClick={handleSearch}>ê²€ìƒ‰</Button>\n-          <Button variant=\"secondary\" onClick={() => setShowFilters(!showFilters)}>\n-            í•„í„°\n-          </Button>\n-          <Button variant=\"secondary\" onClick={loadCourseEnrollments}>\n-            ìƒˆë¡œê³ ì¹¨\n-          </Button>\n-          {(activeFilters.length > 0 || searchQuery) && (\n-            <Button variant=\"secondary\" onClick={clearFilters}>\n-              ì´ˆê¸°í™”\n-            </Button>\n-          )}\n-        </SearchRow>\n-        \n-        <FilterRow $visible={showFilters}>\n-          {filterOptions.map(filter => (\n-            <FilterChip\n-              key={filter}\n-              $active={activeFilters.includes(filter)}\n-              onClick={() => toggleFilter(filter)}\n-            >\n-              {filter}\n-            </FilterChip>\n-          ))}\n-        </FilterRow>\n-      </SearchSection>\n+      {/* ìƒˆë¡œìš´ SearchArea ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© */}\n+      <SearchArea\n+        metaContent={\n+          <div style={{ display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n+            <UnpaidFilter\n+              active={showUnpaidOnly}\n+              unpaidCount={unpaidMetaInfo.unpaidCourseCount}\n+              totalAmount={unpaidMetaInfo.totalUnpaidAmount}\n+              onClick={() => setShowUnpaidOnly(!showUnpaidOnly)}\n+            />\n+          </div>\n+        }\n+        selectedPeriod={selectedPeriod}\n+        onPeriodChange={setSelectedPeriod}\n+        customStartDate={customStartDate}\n+        customEndDate={customEndDate}\n+        onCustomStartDateChange={setCustomStartDate}\n+        onCustomEndDateChange={setCustomEndDate}\n+        dateRangeDisplay={getDateRangeDisplay()}\n+        searchValue={searchQuery}\n+        onSearchChange={setSearchQuery}\n+        onSearch={handleSearch}\n+        searchPlaceholder=\"íšŒì›ëª…, ìƒí’ˆëª…, í”„ë¡œê·¸ë¨ëª…, ì§€ì ëª…, ì½”ì¹˜ëª…ìœ¼ë¡œ ê²€ìƒ‰...\"\n+        autoSearchOnDateChange={false}\n+      />\n \n       <ResultsSection>\n         <ResultsHeader>\n           <ResultsTitle>ìˆ˜ê°• ì´ë ¥</ResultsTitle>\n-          <ResultsCount>ì´ {filteredEnrollments.length}ê±´</ResultsCount>\n+          <ResultsCount>\n+            {showUnpaidOnly ? 'ë¯¸ìˆ˜ ìˆ˜ê°•: ' : ''}{filteredEnrollments.length}ê±´ \n+            (ì™„ë£Œ: {filteredEnrollments.filter(e => e.enrollmentStatus === 'completed').length}ê±´, \n+            ë¯¸ìˆ˜: {filteredEnrollments.filter(e => e.enrollmentStatus === 'unpaid').length}ê±´)\n+            <br />\n+            <span style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+              ê¸°ê°„: {getDateRangeDisplay()} | ì „ì²´: {courseEnrollments.length}ê±´\n+            </span>\n+          </ResultsCount>\n         </ResultsHeader>\n \n         {filteredEnrollments.length > 0 ? (\n           <TableContainer>\n"
                },
                {
                    "date": 1760762493059,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,13 @@\n import React, { useState, useEffect, useCallback } from 'react';\n import styled from 'styled-components';\n+import { toast } from 'react-toastify';\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n import { dbManager, type CourseEnrollment } from '../../../utils/indexedDB';\n import { SearchArea, type PeriodOption } from '../../../components/SearchArea';\n import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n+import Modal from '../../../components/Modal';\n \n const PageContainer = styled.div`\n   width: 100%;\n `;\n@@ -74,15 +76,22 @@\n   color: ${AppColors.onBackground};\n   vertical-align: middle;\n `;\n \n-const StatusBadge = styled.span<{ $status: 'completed' | 'unpaid' }>`\n+const StatusBadge = styled.span<{ $status: 'completed' | 'unpaid'; $clickable?: boolean }>`\n   padding: 4px 8px;\n   border-radius: 12px;\n   font-size: 12px;\n   font-weight: 500;\n   background: ${props => props.$status === 'completed' ? '#e7f5e7' : '#fff2f2'};\n   color: ${props => props.$status === 'completed' ? '#2d5a2d' : '#8b1538'};\n+  cursor: ${props => props.$clickable ? 'pointer' : 'default'};\n+  transition: all 0.2s;\n+  \n+  &:hover {\n+    opacity: ${props => props.$clickable ? 0.8 : 1};\n+    transform: ${props => props.$clickable ? 'translateY(-1px)' : 'none'};\n+  }\n `;\n \n const ProgressInfo = styled.div`\n   font-size: 12px;\n@@ -116,8 +125,73 @@\n   text-align: center;\n   color: ${AppColors.onInput1};\n `;\n \n+const Button = styled.button<{ variant?: 'primary' | 'secondary' }>`\n+  padding: 12px 18px;\n+  border: ${props => props.variant === 'secondary' ? `1px solid ${AppColors.borderLight}` : 'none'};\n+  border-radius: 8px;\n+  background: ${props => props.variant === 'secondary' ? AppColors.surface : AppColors.primary};\n+  color: ${props => props.variant === 'secondary' ? AppColors.onSurface : AppColors.onPrimary};\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  font-weight: 600;\n+  cursor: pointer;\n+  transition: all 0.2s;\n+  \n+  &:hover {\n+    opacity: 0.9;\n+    transform: translateY(-1px);\n+  }\n+  \n+  &:disabled {\n+    opacity: 0.5;\n+    cursor: not-allowed;\n+    transform: none;\n+  }\n+`;\n+\n+const ModalContent = styled.div`\n+  text-align: left;\n+`;\n+\n+const InfoRow = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  padding: 12px 0;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  \n+  &:last-child {\n+    border-bottom: none;\n+  }\n+`;\n+\n+const InfoLabel = styled.span`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+`;\n+\n+const InfoValue = styled.span`\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const ModalUnpaidAmount = styled.span`\n+  color: #d32f2f;\n+  font-weight: 600;\n+  font-size: 16px;\n+`;\n+\n+const WarningText = styled.div`\n+  background: #fff3cd;\n+  border: 1px solid #ffeaa7;\n+  border-radius: 8px;\n+  padding: 12px;\n+  margin: 16px 0;\n+  color: #856404;\n+  font-size: 14px;\n+  text-align: center;\n+`;\n+\n const CourseHistory: React.FC = () => {\n   const [searchQuery, setSearchQuery] = useState<string>('');\n   const [courseEnrollments, setCourseEnrollments] = useState<CourseEnrollment[]>([]);\n   const [filteredEnrollments, setFilteredEnrollments] = useState<CourseEnrollment[]>([]);\n@@ -133,8 +207,13 @@\n   const [unpaidMetaInfo, setUnpaidMetaInfo] = useState<{ unpaidCourseCount: number; totalUnpaidAmount: number }>({\n     unpaidCourseCount: 0,\n     totalUnpaidAmount: 0\n   });\n+  \n+  // ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n+  const [showCompleteModal, setShowCompleteModal] = useState<boolean>(false);\n+  const [selectedEnrollment, setSelectedEnrollment] = useState<CourseEnrollment | null>(null);\n+  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n \n   // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n   const loadUnpaidMetaInfo = useCallback(async () => {\n     try {\n@@ -292,8 +371,83 @@\n     \n     setFilteredEnrollments(filtered);\n   };\n \n+  // ë¯¸ìˆ˜ ìƒíƒœ í´ë¦­ ì²˜ë¦¬\n+  const handleUnpaidClick = (enrollment: CourseEnrollment) => {\n+    setSelectedEnrollment(enrollment);\n+    setShowCompleteModal(true);\n+  };\n+\n+  // ì™„ë£Œ ì²˜ë¦¬ í™•ì¸\n+  const handleCompletePayment = async () => {\n+    if (!selectedEnrollment) return;\n+\n+    try {\n+      setIsProcessing(true);\n+\n+      // 1. ìˆ˜ê°• ì´ë ¥ì˜ ìƒíƒœë¥¼ 'completed'ë¡œ ë³€ê²½í•˜ê³  ë¯¸ìˆ˜ê¸ˆì•¡ì„ 0ìœ¼ë¡œ ì„¤ì •\n+      const updatedEnrollment: CourseEnrollment = {\n+        ...selectedEnrollment,\n+        enrollmentStatus: 'completed',\n+        paidAmount: selectedEnrollment.productPrice, // ìƒí’ˆ ì „ì²´ ê¸ˆì•¡ìœ¼ë¡œ ì„¤ì •\n+        unpaidAmount: 0\n+      };\n+\n+      await dbManager.updateCourseEnrollment(selectedEnrollment.id, updatedEnrollment);\n+\n+      // 2. ê²°ì œ ë°ì´í„° ìƒì„± ë° ì €ì¥\n+      const paymentData = {\n+        memberId: selectedEnrollment.memberId,\n+        memberName: selectedEnrollment.memberName,\n+        branchId: selectedEnrollment.branchId,\n+        branchName: selectedEnrollment.branchName,\n+        coach: selectedEnrollment.coach,\n+        coachName: selectedEnrollment.coachName,\n+        paymentMethod: 'cash', // ê¸°ë³¸ê°’ìœ¼ë¡œ í˜„ê¸ˆ ì„¤ì •\n+        paymentStatus: 'completed' as const, // ì™„ë£Œ ìƒíƒœë¡œ ì„¤ì •\n+        totalAmount: selectedEnrollment.unpaidAmount || 0,\n+        paidAmount: selectedEnrollment.unpaidAmount || 0,\n+        unpaidAmount: 0,\n+        paymentDate: new Date(),\n+        products: [{\n+          id: selectedEnrollment.productId,\n+          name: selectedEnrollment.productName,\n+          price: selectedEnrollment.unpaidAmount || 0,\n+          quantity: 1,\n+          programId: selectedEnrollment.programId,\n+          programName: selectedEnrollment.programName,\n+          programType: selectedEnrollment.programType\n+        }],\n+        memo: `ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬ - ${selectedEnrollment.productName}`\n+      };\n+\n+      await dbManager.addPayment(paymentData);\n+\n+      toast.success('ë¯¸ìˆ˜ê¸ˆì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      \n+      // 3. ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n+      await loadCourseEnrollments();\n+      await handleSearch(); // í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ ê²€ìƒ‰\n+      \n+      // 4. ëª¨ë‹¬ ë‹«ê¸°\n+      setShowCompleteModal(false);\n+      setSelectedEnrollment(null);\n+      \n+    } catch (error) {\n+      console.error('ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n+      toast.error('ì™„ë£Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n+    } finally {\n+      setIsProcessing(false);\n+    }\n+  };\n+\n+  // ëª¨ë‹¬ ë‹«ê¸°\n+  const handleCloseCompleteModal = () => {\n+    setShowCompleteModal(false);\n+    setSelectedEnrollment(null);\n+  };\n+\n   const formatDate = (date: Date | null | undefined) => {\n     return date ? new Date(date).toLocaleDateString() : '-';\n   };\n \n@@ -430,9 +584,14 @@\n                         </div>\n                       )}\n                     </TableCell>\n                     <TableCell>\n-                      <StatusBadge $status={enrollment.enrollmentStatus}>\n+                      <StatusBadge \n+                        $status={enrollment.enrollmentStatus}\n+                        $clickable={enrollment.enrollmentStatus === 'unpaid'}\n+                        onClick={enrollment.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(enrollment) : undefined}\n+                        title={enrollment.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n+                      >\n                         {enrollment.enrollmentStatus === 'completed' ? 'ì™„ë£Œ' : 'ë¯¸ìˆ˜'}\n                       </StatusBadge>\n                     </TableCell>\n                   </TableRow>\n@@ -446,8 +605,77 @@\n             <p>ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.</p>\n           </EmptyState>\n         )}\n       </ResultsSection>\n+\n+      {/* ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ */}\n+      {showCompleteModal && selectedEnrollment && (\n+        <Modal \n+          isOpen={showCompleteModal}\n+          onClose={handleCloseCompleteModal}\n+          width=\"min(95vw, 500px)\"\n+          header=\"ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬\"\n+          body={\n+            <ModalContent>\n+              <WarningText>\n+                âš ï¸ ë¯¸ìˆ˜ê¸ˆì„ ì™„ë£Œ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n+              </WarningText>\n+              \n+              <InfoRow>\n+                <InfoLabel>íšŒì›ëª…:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.memberName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ìƒí’ˆëª…:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.productName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>í”„ë¡œê·¸ë¨:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.programName} ({selectedEnrollment.programType})</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ì§€ì :</InfoLabel>\n+                <InfoValue>{selectedEnrollment.branchName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ë‹´ë‹¹ì½”ì¹˜:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.coachName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ë¯¸ìˆ˜ê¸ˆì•¡:</InfoLabel>\n+                <ModalUnpaidAmount>{selectedEnrollment.unpaidAmount?.toLocaleString() || 0}ì›</ModalUnpaidAmount>\n+              </InfoRow>\n+              \n+              <div style={{ \n+                padding: '12px', \n+                backgroundColor: '#f0f9ff', \n+                border: '1px solid #93c5fd', \n+                borderRadius: '8px',\n+                fontSize: '14px',\n+                color: '#1e40af',\n+                marginTop: '16px'\n+              }}>\n+                ğŸ’¡ ì™„ë£Œ ì²˜ë¦¬ ì‹œ í•´ë‹¹ ê¸ˆì•¡ì´ ê²°ì œ ë‚´ì—­ì— ìë™ìœ¼ë¡œ ë“±ë¡ë˜ë©°, ìˆ˜ê°• ìƒíƒœê°€ 'ì™„ë£Œ'ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.\n+              </div>\n+            </ModalContent>\n+          }\n+          footer={\n+            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px', width: '100%' }}>\n+              <Button variant=\"secondary\" onClick={handleCloseCompleteModal} disabled={isProcessing}>\n+                ì·¨ì†Œ\n+              </Button>\n+              <Button onClick={handleCompletePayment} disabled={isProcessing}>\n+                {isProcessing ? 'ì²˜ë¦¬ ì¤‘...' : 'ì™„ë£Œ ì²˜ë¦¬'}\n+              </Button>\n+            </div>\n+          }\n+        />\n+      )}\n     </PageContainer>\n   );\n };\n \n"
                },
                {
                    "date": 1760762961938,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -404,33 +404,41 @@\n         coach: selectedEnrollment.coach,\n         coachName: selectedEnrollment.coachName,\n         paymentMethod: 'cash', // ê¸°ë³¸ê°’ìœ¼ë¡œ í˜„ê¸ˆ ì„¤ì •\n         paymentStatus: 'completed' as const, // ì™„ë£Œ ìƒíƒœë¡œ ì„¤ì •\n-        totalAmount: selectedEnrollment.unpaidAmount || 0,\n-        paidAmount: selectedEnrollment.unpaidAmount || 0,\n-        unpaidAmount: 0,\n+        totalAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n+        paidAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n+        unpaidAmount: 0, // ì™„ë£Œ ì²˜ë¦¬ì´ë¯€ë¡œ 0\n         paymentDate: new Date(),\n+        // ìˆ˜ê°•/ìì‚° êµ¬ë¶„ ë° ì—°ê²° ì •ë³´ ì¶”ê°€\n+        paymentType: 'course' as const, // 'course' | 'asset' | 'other'\n+        relatedCourseId: selectedEnrollment.id, // ìˆ˜ê°• ì´ë ¥ IDë¡œ ì—°ê²°\n+        relatedAssetId: null, // ìì‚° ê´€ë ¨ ê²°ì œê°€ ì•„ë‹ˆë¯€ë¡œ null\n         products: [{\n           id: selectedEnrollment.productId,\n           name: selectedEnrollment.productName,\n-          price: selectedEnrollment.unpaidAmount || 0,\n+          price: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n           quantity: 1,\n           programId: selectedEnrollment.programId,\n           programName: selectedEnrollment.programName,\n           programType: selectedEnrollment.programType\n         }],\n-        memo: `ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬ - ${selectedEnrollment.productName}`\n+        memo: `ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬ - ${selectedEnrollment.productName} (ìˆ˜ê°• ID: ${selectedEnrollment.id})`\n       };\n \n       await dbManager.addPayment(paymentData);\n \n       toast.success('ë¯¸ìˆ˜ê¸ˆì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n       \n       // 3. ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n       await loadCourseEnrollments();\n-      await handleSearch(); // í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ ê²€ìƒ‰\n       \n-      // 4. ëª¨ë‹¬ ë‹«ê¸°\n+      // 4. í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n+      setTimeout(() => {\n+        handleSearch();\n+      }, 100);\n+      \n+      // 5. ëª¨ë‹¬ ë‹«ê¸°\n       setShowCompleteModal(false);\n       setSelectedEnrollment(null);\n       \n     } catch (error) {\n"
                },
                {
                    "date": 1760763299913,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -543,8 +543,9 @@\n                   <TableHeaderCell>ì§„í–‰ìƒí™©</TableHeaderCell>\n                   <TableHeaderCell>ì§€ì </TableHeaderCell>\n                   <TableHeaderCell>ë‹´ë‹¹ì½”ì¹˜</TableHeaderCell>\n                   <TableHeaderCell>ê²°ì œì •ë³´</TableHeaderCell>\n+                  <TableHeaderCell>ì—°ê²°ì •ë³´</TableHeaderCell>\n                   <TableHeaderCell>ìˆ˜ê°•ê¸°ê°„</TableHeaderCell>\n                   <TableHeaderCell>ìƒíƒœ</TableHeaderCell>\n                 </TableRow>\n               </TableHeader>\n@@ -584,8 +585,18 @@\n                         </UnpaidAmount>\n                       </PriceInfo>\n                     </TableCell>\n                     <TableCell>\n+                      <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+                        <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n+                          ìˆ˜ê°• ID: {enrollment.id.slice(-8)}\n+                        </div>\n+                        <div style={{ marginTop: '2px', fontSize: '11px' }}>\n+                          ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n+                        </div>\n+                      </div>\n+                    </TableCell>\n+                    <TableCell>\n                       <div>{formatDate(enrollment.startDate)}</div>\n                       {enrollment.endDate && (\n                         <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n                           ~ {formatDate(enrollment.endDate)}\n"
                },
                {
                    "date": 1760763753156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n import { dbManager, type CourseEnrollment } from '../../../utils/indexedDB';\n import { SearchArea, type PeriodOption } from '../../../components/SearchArea';\n import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n import Modal from '../../../components/Modal';\n+import CustomDropdown from '../../../components/CustomDropdown';\n \n const PageContainer = styled.div`\n   width: 100%;\n `;\n@@ -212,8 +213,9 @@\n   // ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n   const [showCompleteModal, setShowCompleteModal] = useState<boolean>(false);\n   const [selectedEnrollment, setSelectedEnrollment] = useState<CourseEnrollment | null>(null);\n   const [isProcessing, setIsProcessing] = useState<boolean>(false);\n+  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState<string>('card');\n \n   // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n   const loadUnpaidMetaInfo = useCallback(async () => {\n     try {\n@@ -374,8 +376,9 @@\n \n   // ë¯¸ìˆ˜ ìƒíƒœ í´ë¦­ ì²˜ë¦¬\n   const handleUnpaidClick = (enrollment: CourseEnrollment) => {\n     setSelectedEnrollment(enrollment);\n+    setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ì„ ì¹´ë“œë¡œ ì„¤ì •\n     setShowCompleteModal(true);\n   };\n \n   // ì™„ë£Œ ì²˜ë¦¬ í™•ì¸\n@@ -402,9 +405,9 @@\n         branchId: selectedEnrollment.branchId,\n         branchName: selectedEnrollment.branchName,\n         coach: selectedEnrollment.coach,\n         coachName: selectedEnrollment.coachName,\n-        paymentMethod: 'cash', // ê¸°ë³¸ê°’ìœ¼ë¡œ í˜„ê¸ˆ ì„¤ì •\n+        paymentMethod: selectedPaymentMethod, // ì‚¬ìš©ìê°€ ì„ íƒí•œ ê²°ì œ ë°©ë²• ì‚¬ìš©\n         paymentStatus: 'completed' as const, // ì™„ë£Œ ìƒíƒœë¡œ ì„¤ì •\n         totalAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n         paidAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n         unpaidAmount: 0, // ì™„ë£Œ ì²˜ë¦¬ì´ë¯€ë¡œ 0\n@@ -426,10 +429,18 @@\n       };\n \n       await dbManager.addPayment(paymentData);\n \n-      toast.success('ë¯¸ìˆ˜ê¸ˆì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+      // ê²°ì œ ë°©ë²•ë³„ ë©”ì‹œì§€ í‘œì‹œ\n+      const paymentMethodLabels: { [key: string]: string } = {\n+        'card': 'ì¹´ë“œ',\n+        'cash': 'í˜„ê¸ˆ',\n+        'transfer': 'ê³„ì¢Œì´ì²´'\n+      };\n+      const paymentMethodLabel = paymentMethodLabels[selectedPaymentMethod] || 'ì¹´ë“œ';\n       \n+      toast.success(`ë¯¸ìˆ˜ê¸ˆì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. (ê²°ì œë°©ë²•: ${paymentMethodLabel})`);\n+      \n       // 3. ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n       await loadCourseEnrollments();\n       \n       // 4. í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n@@ -452,8 +463,9 @@\n   // ëª¨ë‹¬ ë‹«ê¸°\n   const handleCloseCompleteModal = () => {\n     setShowCompleteModal(false);\n     setSelectedEnrollment(null);\n+    setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ìœ¼ë¡œ ë¦¬ì…‹\n   };\n \n   const formatDate = (date: Date | null | undefined) => {\n     return date ? new Date(date).toLocaleDateString() : '-';\n@@ -479,8 +491,15 @@\n     }\n     return 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n   };\n \n+  // ê²°ì œ ë°©ë²• ì˜µì…˜\n+  const paymentMethodOptions = [\n+    { value: 'card', label: 'ì¹´ë“œ' },\n+    { value: 'cash', label: 'í˜„ê¸ˆ' },\n+    { value: 'transfer', label: 'ê³„ì¢Œì´ì²´' }\n+  ];\n+\n   if (loading) {\n     return (\n       <PageContainer>\n         <LoadingState>\n@@ -667,8 +686,19 @@\n               <InfoRow>\n                 <InfoLabel>ë¯¸ìˆ˜ê¸ˆì•¡:</InfoLabel>\n                 <ModalUnpaidAmount>{selectedEnrollment.unpaidAmount?.toLocaleString() || 0}ì›</ModalUnpaidAmount>\n               </InfoRow>\n+\n+              <InfoRow>\n+                <InfoLabel>ê²°ì œ ë°©ë²•:</InfoLabel>\n+                <div style={{ flex: 1, marginLeft: '12px' }}>\n+                  <CustomDropdown\n+                    value={selectedPaymentMethod}\n+                    onChange={setSelectedPaymentMethod}\n+                    options={paymentMethodOptions}\n+                  />\n+                </div>\n+              </InfoRow>\n               \n               <div style={{ \n                 padding: '12px', \n                 backgroundColor: '#f0f9ff', \n"
                },
                {
                    "date": 1760763851586,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -656,8 +656,20 @@\n             <ModalContent>\n               <WarningText>\n                 âš ï¸ ë¯¸ìˆ˜ê¸ˆì„ ì™„ë£Œ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n               </WarningText>\n+\n+              <InfoRow>\n+                <InfoLabel>ê²°ì œ ë°©ë²•:</InfoLabel>\n+                <div style={{ flex: 1, marginLeft: '12px' }}>\n+                  <CustomDropdown\n+                    value={selectedPaymentMethod}\n+                    onChange={setSelectedPaymentMethod}\n+                    options={paymentMethodOptions}\n+                    inModal={true}\n+                  />\n+                </div>\n+              </InfoRow>\n               \n               <InfoRow>\n                 <InfoLabel>íšŒì›ëª…:</InfoLabel>\n                 <InfoValue>{selectedEnrollment.memberName}</InfoValue>\n@@ -686,19 +698,8 @@\n               <InfoRow>\n                 <InfoLabel>ë¯¸ìˆ˜ê¸ˆì•¡:</InfoLabel>\n                 <ModalUnpaidAmount>{selectedEnrollment.unpaidAmount?.toLocaleString() || 0}ì›</ModalUnpaidAmount>\n               </InfoRow>\n-\n-              <InfoRow>\n-                <InfoLabel>ê²°ì œ ë°©ë²•:</InfoLabel>\n-                <div style={{ flex: 1, marginLeft: '12px' }}>\n-                  <CustomDropdown\n-                    value={selectedPaymentMethod}\n-                    onChange={setSelectedPaymentMethod}\n-                    options={paymentMethodOptions}\n-                  />\n-                </div>\n-              </InfoRow>\n               \n               <div style={{ \n                 padding: '12px', \n                 backgroundColor: '#f0f9ff', \n"
                },
                {
                    "date": 1761130065875,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -347,12 +347,10 @@\n     };\n     initializeData();\n   }, []); // eslint-disable-line react-hooks/exhaustive-deps\n \n-  const handleSearch = async () => {\n-    // í˜„ì¬ ì„ íƒëœ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤\n-    await loadCourseEnrollments(selectedPeriod, customStartDate, customEndDate);\n-    \n+  // í•„í„° ì ìš© í•¨ìˆ˜ (ë°ì´í„° ë¡œë“œì™€ ë¶„ë¦¬)\n+  const applyFilters = useCallback(() => {\n     let filtered = courseEnrollments;\n     \n     // ë¯¸ìˆ˜ í•„í„° ì ìš©\n     if (showUnpaidOnly) {\n@@ -371,8 +369,18 @@\n       );\n     }\n     \n     setFilteredEnrollments(filtered);\n+  }, [courseEnrollments, showUnpaidOnly, searchQuery]);\n+\n+  // ë°ì´í„°ë‚˜ í•„í„° ì¡°ê±´ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•„í„° ì ìš©\n+  useEffect(() => {\n+    applyFilters();\n+  }, [applyFilters]);\n+\n+  const handleSearch = async () => {\n+    // í˜„ì¬ ì„ íƒëœ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤\n+    await loadCourseEnrollments(selectedPeriod, customStartDate, customEndDate);\n   };\n \n   // ë¯¸ìˆ˜ ìƒíƒœ í´ë¦­ ì²˜ë¦¬\n   const handleUnpaidClick = (enrollment: CourseEnrollment) => {\n"
                },
                {
                    "date": 1761130638652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,78 +7,14 @@\n import { SearchArea, type PeriodOption } from '../../../components/SearchArea';\n import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n import Modal from '../../../components/Modal';\n import CustomDropdown from '../../../components/CustomDropdown';\n+import DataTable, { type TableColumn } from '../../../components/DataTable';\n \n const PageContainer = styled.div`\n   width: 100%;\n `;\n \n-const ResultsSection = styled.div`\n-  background: ${AppColors.surface};\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 16px;\n-  overflow: hidden;\n-  box-shadow: 0 1px 2px rgba(16, 24, 40, 0.04);\n-`;\n-\n-const ResultsHeader = styled.div`\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-  padding: 20px 24px;\n-  border-bottom: 1px solid ${AppColors.borderLight};\n-`;\n-\n-const ResultsTitle = styled.h2`\n-  font-size: ${AppTextStyles.title3.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-  margin: 0;\n-`;\n-\n-const ResultsCount = styled.span`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const TableContainer = styled.div`\n-  overflow-x: auto;\n-`;\n-\n-const Table = styled.table`\n-  width: 100%;\n-  border-collapse: collapse;\n-`;\n-\n-const TableHeader = styled.thead`\n-  background: #f8f9fa;\n-`;\n-\n-const TableRow = styled.tr`\n-  border-bottom: 1px solid ${AppColors.borderLight};\n-  \n-  &:hover {\n-    background: #f8f9fa;\n-  }\n-`;\n-\n-const TableHeaderCell = styled.th`\n-  padding: 12px 16px;\n-  text-align: left;\n-  font-size: ${AppTextStyles.label2.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onInput1};\n-  border-bottom: 1px solid ${AppColors.borderLight};\n-`;\n-\n-const TableCell = styled.td`\n-  padding: 12px 16px;\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onBackground};\n-  vertical-align: middle;\n-`;\n-\n const StatusBadge = styled.span<{ $status: 'completed' | 'unpaid'; $clickable?: boolean }>`\n   padding: 4px 8px;\n   border-radius: 12px;\n   font-size: 12px;\n@@ -114,20 +50,8 @@\n   font-size: 12px;\n   margin-top: 2px;\n `;\n \n-const EmptyState = styled.div`\n-  padding: 60px 24px;\n-  text-align: center;\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const LoadingState = styled.div`\n-  padding: 60px 24px;\n-  text-align: center;\n-  color: ${AppColors.onInput1};\n-`;\n-\n const Button = styled.button<{ variant?: 'primary' | 'secondary' }>`\n   padding: 12px 18px;\n   border: ${props => props.variant === 'secondary' ? `1px solid ${AppColors.borderLight}` : 'none'};\n   border-radius: 8px;\n@@ -506,14 +430,150 @@\n     { value: 'cash', label: 'í˜„ê¸ˆ' },\n     { value: 'transfer', label: 'ê³„ì¢Œì´ì²´' }\n   ];\n \n+  // í…Œì´ë¸” ì»¬ëŸ¼ ì •ì˜\n+  const columns: TableColumn<CourseEnrollment>[] = [\n+    {\n+      key: 'memberName',\n+      title: 'íšŒì›ëª…',\n+      width: '120px'\n+    },\n+    {\n+      key: 'productName',\n+      title: 'ìƒí’ˆëª…',\n+      width: '180px',\n+      render: (value, record) => (\n+        <div>\n+          <div>{record.productName}</div>\n+          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+            {record.productPrice.toLocaleString()}ì›\n+          </div>\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'programName',\n+      title: 'í”„ë¡œê·¸ë¨',\n+      width: '150px',\n+      render: (value, record) => (\n+        <div>\n+          <div>{record.programName}</div>\n+          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+            {record.programType}\n+          </div>\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'progress',\n+      title: 'ì§„í–‰ìƒí™©',\n+      width: '120px',\n+      render: (value, record) => (\n+        <ProgressInfo>\n+          {getProgressInfo(record)}\n+        </ProgressInfo>\n+      )\n+    },\n+    {\n+      key: 'branchName',\n+      title: 'ì§€ì ',\n+      width: '100px'\n+    },\n+    {\n+      key: 'coachName',\n+      title: 'ë‹´ë‹¹ì½”ì¹˜',\n+      width: '100px'\n+    },\n+    {\n+      key: 'payment',\n+      title: 'ê²°ì œì •ë³´',\n+      width: '140px',\n+      align: 'right' as const,\n+      render: (value, record) => (\n+        <PriceInfo>\n+          <PaidAmount>\n+            {record.paidAmount.toLocaleString()}ì›\n+          </PaidAmount>\n+          <UnpaidAmount $hasUnpaid={record.unpaidAmount > 0}>\n+            {record.unpaidAmount > 0 ? \n+              `ë¯¸ìˆ˜: ${record.unpaidAmount.toLocaleString()}ì›` : \n+              'ì™„ë‚©'\n+            }\n+          </UnpaidAmount>\n+        </PriceInfo>\n+      )\n+    },\n+    {\n+      key: 'connection',\n+      title: 'ì—°ê²°ì •ë³´',\n+      width: '140px',\n+      render: (value, record) => (\n+        <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+          <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n+            ìˆ˜ê°• ID: {record.id.slice(-8)}\n+          </div>\n+          <div style={{ marginTop: '2px', fontSize: '11px' }}>\n+            ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n+          </div>\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'period',\n+      title: 'ìˆ˜ê°•ê¸°ê°„',\n+      width: '140px',\n+      render: (value, record) => (\n+        <div>\n+          <div>{formatDate(record.startDate)}</div>\n+          {record.endDate && (\n+            <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+              ~ {formatDate(record.endDate)}\n+            </div>\n+          )}\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'enrollmentStatus',\n+      title: 'ìƒíƒœ',\n+      width: '80px',\n+      align: 'center' as const,\n+      render: (value, record) => (\n+        <StatusBadge \n+          $status={record.enrollmentStatus}\n+          $clickable={record.enrollmentStatus === 'unpaid'}\n+          onClick={record.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(record) : undefined}\n+          title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n+        >\n+          {record.enrollmentStatus === 'completed' ? 'ì™„ë£Œ' : 'ë¯¸ìˆ˜'}\n+        </StatusBadge>\n+      )\n+    }\n+  ];\n+\n+  // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n+  const resultCountInfo = (\n+    <>\n+      {showUnpaidOnly ? 'ë¯¸ìˆ˜ ìˆ˜ê°•: ' : ''}{filteredEnrollments.length}ê±´ \n+      (ì™„ë£Œ: {filteredEnrollments.filter(e => e.enrollmentStatus === 'completed').length}ê±´, \n+      ë¯¸ìˆ˜: {filteredEnrollments.filter(e => e.enrollmentStatus === 'unpaid').length}ê±´)\n+      <br />\n+      <span style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+        ê¸°ê°„: {getDateRangeDisplay()} | ì „ì²´: {courseEnrollments.length}ê±´\n+      </span>\n+    </>\n+  );\n+\n   if (loading) {\n     return (\n       <PageContainer>\n-        <LoadingState>\n-          <h3>ìˆ˜ê°• ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</h3>\n-        </LoadingState>\n+        <DataTable\n+          title=\"ìˆ˜ê°• ì´ë ¥\"\n+          columns={columns}\n+          data={[]}\n+          loading={true}\n+        />\n       </PageContainer>\n     );\n   }\n \n@@ -544,116 +604,18 @@\n         searchPlaceholder=\"íšŒì›ëª…, ìƒí’ˆëª…, í”„ë¡œê·¸ë¨ëª…, ì§€ì ëª…, ì½”ì¹˜ëª…ìœ¼ë¡œ ê²€ìƒ‰...\"\n         autoSearchOnDateChange={false}\n       />\n \n-      <ResultsSection>\n-        <ResultsHeader>\n-          <ResultsTitle>ìˆ˜ê°• ì´ë ¥</ResultsTitle>\n-          <ResultsCount>\n-            {showUnpaidOnly ? 'ë¯¸ìˆ˜ ìˆ˜ê°•: ' : ''}{filteredEnrollments.length}ê±´ \n-            (ì™„ë£Œ: {filteredEnrollments.filter(e => e.enrollmentStatus === 'completed').length}ê±´, \n-            ë¯¸ìˆ˜: {filteredEnrollments.filter(e => e.enrollmentStatus === 'unpaid').length}ê±´)\n-            <br />\n-            <span style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-              ê¸°ê°„: {getDateRangeDisplay()} | ì „ì²´: {courseEnrollments.length}ê±´\n-            </span>\n-          </ResultsCount>\n-        </ResultsHeader>\n+      <DataTable\n+        title=\"ìˆ˜ê°• ì´ë ¥\"\n+        columns={columns}\n+        data={filteredEnrollments}\n+        loading={loading}\n+        emptyText=\"ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤\"\n+        emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n+        resultCount={resultCountInfo}\n+      />\n \n-        {filteredEnrollments.length > 0 ? (\n-          <TableContainer>\n-            <Table>\n-              <TableHeader>\n-                <TableRow>\n-                  <TableHeaderCell>íšŒì›ëª…</TableHeaderCell>\n-                  <TableHeaderCell>ìƒí’ˆëª…</TableHeaderCell>\n-                  <TableHeaderCell>í”„ë¡œê·¸ë¨</TableHeaderCell>\n-                  <TableHeaderCell>ì§„í–‰ìƒí™©</TableHeaderCell>\n-                  <TableHeaderCell>ì§€ì </TableHeaderCell>\n-                  <TableHeaderCell>ë‹´ë‹¹ì½”ì¹˜</TableHeaderCell>\n-                  <TableHeaderCell>ê²°ì œì •ë³´</TableHeaderCell>\n-                  <TableHeaderCell>ì—°ê²°ì •ë³´</TableHeaderCell>\n-                  <TableHeaderCell>ìˆ˜ê°•ê¸°ê°„</TableHeaderCell>\n-                  <TableHeaderCell>ìƒíƒœ</TableHeaderCell>\n-                </TableRow>\n-              </TableHeader>\n-              <tbody>\n-                {filteredEnrollments.map(enrollment => (\n-                  <TableRow key={enrollment.id}>\n-                    <TableCell>{enrollment.memberName}</TableCell>\n-                    <TableCell>\n-                      <div>{enrollment.productName}</div>\n-                      <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-                        {enrollment.productPrice.toLocaleString()}ì›\n-                      </div>\n-                    </TableCell>\n-                    <TableCell>\n-                      <div>{enrollment.programName}</div>\n-                      <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-                        {enrollment.programType}\n-                      </div>\n-                    </TableCell>\n-                    <TableCell>\n-                      <ProgressInfo>\n-                        {getProgressInfo(enrollment)}\n-                      </ProgressInfo>\n-                    </TableCell>\n-                    <TableCell>{enrollment.branchName}</TableCell>\n-                    <TableCell>{enrollment.coachName}</TableCell>\n-                    <TableCell>\n-                      <PriceInfo>\n-                        <PaidAmount>\n-                          {enrollment.paidAmount.toLocaleString()}ì›\n-                        </PaidAmount>\n-                        <UnpaidAmount $hasUnpaid={enrollment.unpaidAmount > 0}>\n-                          {enrollment.unpaidAmount > 0 ? \n-                            `ë¯¸ìˆ˜: ${enrollment.unpaidAmount.toLocaleString()}ì›` : \n-                            'ì™„ë‚©'\n-                          }\n-                        </UnpaidAmount>\n-                      </PriceInfo>\n-                    </TableCell>\n-                    <TableCell>\n-                      <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-                        <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n-                          ìˆ˜ê°• ID: {enrollment.id.slice(-8)}\n-                        </div>\n-                        <div style={{ marginTop: '2px', fontSize: '11px' }}>\n-                          ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n-                        </div>\n-                      </div>\n-                    </TableCell>\n-                    <TableCell>\n-                      <div>{formatDate(enrollment.startDate)}</div>\n-                      {enrollment.endDate && (\n-                        <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-                          ~ {formatDate(enrollment.endDate)}\n-                        </div>\n-                      )}\n-                    </TableCell>\n-                    <TableCell>\n-                      <StatusBadge \n-                        $status={enrollment.enrollmentStatus}\n-                        $clickable={enrollment.enrollmentStatus === 'unpaid'}\n-                        onClick={enrollment.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(enrollment) : undefined}\n-                        title={enrollment.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n-                      >\n-                        {enrollment.enrollmentStatus === 'completed' ? 'ì™„ë£Œ' : 'ë¯¸ìˆ˜'}\n-                      </StatusBadge>\n-                    </TableCell>\n-                  </TableRow>\n-                ))}\n-              </tbody>\n-            </Table>\n-          </TableContainer>\n-        ) : (\n-          <EmptyState>\n-            <h3>ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤</h3>\n-            <p>ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.</p>\n-          </EmptyState>\n-        )}\n-      </ResultsSection>\n-\n       {/* ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ */}\n       {showCompleteModal && selectedEnrollment && (\n         <Modal \n           isOpen={showCompleteModal}\n"
                },
                {
                    "date": 1761131475171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -612,8 +612,14 @@\n         loading={loading}\n         emptyText=\"ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤\"\n         emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n         resultCount={resultCountInfo}\n+        pagination={{\n+          enabled: true,\n+          pageSize: 15,\n+          pageSizeOptions: [15, 30, 100],\n+          showTotal: true\n+        }}\n       />\n \n       {/* ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ */}\n       {showCompleteModal && selectedEnrollment && (\n"
                },
                {
                    "date": 1761131758238,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -614,10 +614,10 @@\n         emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n         resultCount={resultCountInfo}\n         pagination={{\n           enabled: true,\n-          pageSize: 15,\n-          pageSizeOptions: [15, 30, 100],\n+          pageSize: 5,\n+          pageSizeOptions: [5, 15, 30],\n           showTotal: true\n         }}\n       />\n \n"
                },
                {
                    "date": 1761132526132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,8 +8,9 @@\n import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n import Modal from '../../../components/Modal';\n import CustomDropdown from '../../../components/CustomDropdown';\n import DataTable, { type TableColumn } from '../../../components/DataTable';\n+import CourseRegistrationModal from './CourseRegistrationModal';\n \n const PageContainer = styled.div`\n   width: 100%;\n `;\n@@ -139,8 +140,11 @@\n   const [selectedEnrollment, setSelectedEnrollment] = useState<CourseEnrollment | null>(null);\n   const [isProcessing, setIsProcessing] = useState<boolean>(false);\n   const [selectedPaymentMethod, setSelectedPaymentMethod] = useState<string>('card');\n \n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n+  const [showRegistrationModal, setShowRegistrationModal] = useState<boolean>(false);\n+\n   // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n   const loadUnpaidMetaInfo = useCallback(async () => {\n     try {\n       const allEnrollments = await dbManager.getAllCourseEnrollments();\n@@ -305,8 +309,29 @@\n     // í˜„ì¬ ì„ íƒëœ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤\n     await loadCourseEnrollments(selectedPeriod, customStartDate, customEndDate);\n   };\n \n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ì—´ê¸°\n+  const handleOpenRegistrationModal = () => {\n+    setShowRegistrationModal(true);\n+  };\n+\n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ë‹«ê¸°\n+  const handleCloseRegistrationModal = () => {\n+    setShowRegistrationModal(false);\n+  };\n+\n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ì„±ê³µ ì²˜ë¦¬\n+  const handleRegistrationSuccess = async () => {\n+    toast.success('ìƒˆ ìˆ˜ê°•ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');\n+    // ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n+    await loadCourseEnrollments();\n+    // í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n+    setTimeout(() => {\n+      handleSearch();\n+    }, 100);\n+  };\n+\n   // ë¯¸ìˆ˜ ìƒíƒœ í´ë¦­ ì²˜ë¦¬\n   const handleUnpaidClick = (enrollment: CourseEnrollment) => {\n     setSelectedEnrollment(enrollment);\n     setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ì„ ì¹´ë“œë¡œ ì„¤ì •\n@@ -582,8 +607,11 @@\n       {/* ìƒˆë¡œìš´ SearchArea ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© */}\n       <SearchArea\n         metaContent={\n           <div style={{ display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n+            <Button onClick={handleOpenRegistrationModal}>\n+              + ìƒˆ ìˆ˜ê°• ë“±ë¡\n+            </Button>\n             <UnpaidFilter\n               active={showUnpaidOnly}\n               unpaidCount={unpaidMetaInfo.unpaidCourseCount}\n               totalAmount={unpaidMetaInfo.totalUnpaidAmount}\n@@ -620,8 +648,15 @@\n           showTotal: true\n         }}\n       />\n \n+      {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n+      <CourseRegistrationModal\n+        isOpen={showRegistrationModal}\n+        onClose={handleCloseRegistrationModal}\n+        onSuccess={handleRegistrationSuccess}\n+      />\n+\n       {/* ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ */}\n       {showCompleteModal && selectedEnrollment && (\n         <Modal \n           isOpen={showCompleteModal}\n"
                },
                {
                    "date": 1761132724869,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,749 @@\n+import React, { useState, useEffect, useCallback } from 'react';\n+import styled from 'styled-components';\n+import { toast } from 'react-toastify';\n+import { AppColors } from '../../../styles/colors';\n+import { AppTextStyles } from '../../../styles/textStyles';\n+import { dbManager, type CourseEnrollment } from '../../../utils/indexedDB';\n+import { SearchArea, type PeriodOption } from '../../../components/SearchArea';\n+import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n+import Modal from '../../../components/Modal';\n+import CustomDropdown from '../../../components/CustomDropdown';\n+import DataTable, { type TableColumn } from '../../../components/DataTable';\n+import CourseRegistrationModal from './CourseRegistrationModal';\n+\n+const PageContainer = styled.div`\n+  width: 100%;\n+`;\n+\n+const StatusBadge = styled.span<{ $status: 'completed' | 'unpaid'; $clickable?: boolean }>`\n+  padding: 4px 8px;\n+  border-radius: 12px;\n+  font-size: 12px;\n+  font-weight: 500;\n+  background: ${props => props.$status === 'completed' ? '#e7f5e7' : '#fff2f2'};\n+  color: ${props => props.$status === 'completed' ? '#2d5a2d' : '#8b1538'};\n+  cursor: ${props => props.$clickable ? 'pointer' : 'default'};\n+  transition: all 0.2s;\n+  \n+  &:hover {\n+    opacity: ${props => props.$clickable ? 0.8 : 1};\n+    transform: ${props => props.$clickable ? 'translateY(-1px)' : 'none'};\n+  }\n+`;\n+\n+const ProgressInfo = styled.div`\n+  font-size: 12px;\n+  color: ${AppColors.onInput1};\n+  margin-top: 4px;\n+`;\n+\n+const PriceInfo = styled.div`\n+  text-align: right;\n+`;\n+\n+const PaidAmount = styled.div`\n+  color: ${AppColors.primary};\n+  font-weight: 600;\n+`;\n+\n+const UnpaidAmount = styled.div<{ $hasUnpaid: boolean }>`\n+  color: ${props => props.$hasUnpaid ? '#d32f2f' : AppColors.onInput1};\n+  font-size: 12px;\n+  margin-top: 2px;\n+`;\n+\n+const Button = styled.button<{ variant?: 'primary' | 'secondary' }>`\n+  padding: 12px 18px;\n+  border: ${props => props.variant === 'secondary' ? `1px solid ${AppColors.borderLight}` : 'none'};\n+  border-radius: 8px;\n+  background: ${props => props.variant === 'secondary' ? AppColors.surface : AppColors.primary};\n+  color: ${props => props.variant === 'secondary' ? AppColors.onSurface : AppColors.onPrimary};\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  font-weight: 600;\n+  cursor: pointer;\n+  transition: all 0.2s;\n+  \n+  &:hover {\n+    opacity: 0.9;\n+    transform: translateY(-1px);\n+  }\n+  \n+  &:disabled {\n+    opacity: 0.5;\n+    cursor: not-allowed;\n+    transform: none;\n+  }\n+`;\n+\n+const ModalContent = styled.div`\n+  text-align: left;\n+`;\n+\n+const InfoRow = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  padding: 12px 0;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  \n+  &:last-child {\n+    border-bottom: none;\n+  }\n+`;\n+\n+const InfoLabel = styled.span`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+`;\n+\n+const InfoValue = styled.span`\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const ModalUnpaidAmount = styled.span`\n+  color: #d32f2f;\n+  font-weight: 600;\n+  font-size: 16px;\n+`;\n+\n+const WarningText = styled.div`\n+  background: #fff3cd;\n+  border: 1px solid #ffeaa7;\n+  border-radius: 8px;\n+  padding: 12px;\n+  margin: 16px 0;\n+  color: #856404;\n+  font-size: 14px;\n+  text-align: center;\n+`;\n+\n+const CourseHistory: React.FC = () => {\n+  const [searchQuery, setSearchQuery] = useState<string>('');\n+  const [courseEnrollments, setCourseEnrollments] = useState<CourseEnrollment[]>([]);\n+  const [filteredEnrollments, setFilteredEnrollments] = useState<CourseEnrollment[]>([]);\n+  const [loading, setLoading] = useState<boolean>(true);\n+  \n+  // ê¸°ê°„ ì„ íƒ ê´€ë ¨ ìƒíƒœ\n+  const [selectedPeriod, setSelectedPeriod] = useState<PeriodOption>('1month');\n+  const [customStartDate, setCustomStartDate] = useState<string>('');\n+  const [customEndDate, setCustomEndDate] = useState<string>('');\n+  \n+  // ë¯¸ìˆ˜ í•„í„° ê´€ë ¨ ìƒíƒœ\n+  const [showUnpaidOnly, setShowUnpaidOnly] = useState<boolean>(false);\n+  const [unpaidMetaInfo, setUnpaidMetaInfo] = useState<{ unpaidCourseCount: number; totalUnpaidAmount: number }>({\n+    unpaidCourseCount: 0,\n+    totalUnpaidAmount: 0\n+  });\n+  \n+  // ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n+  const [showCompleteModal, setShowCompleteModal] = useState<boolean>(false);\n+  const [selectedEnrollment, setSelectedEnrollment] = useState<CourseEnrollment | null>(null);\n+  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n+  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState<string>('card');\n+\n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n+  const [showRegistrationModal, setShowRegistrationModal] = useState<boolean>(false);\n+\n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ì„±ê³µ ì²˜ë¦¬\n+  const handleRegistrationSuccess = async () => {\n+    // ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n+    await loadCourseEnrollments();\n+    // í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n+    setTimeout(() => {\n+      handleSearch();\n+    }, 100);\n+  };\n+\n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ì—´ê¸°\n+  const handleOpenRegistrationModal = () => {\n+    setShowRegistrationModal(true);\n+  };\n+\n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ë‹«ê¸°\n+  const handleCloseRegistrationModal = () => {\n+    setShowRegistrationModal(false);\n+  };\n+\n+  // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n+  const loadUnpaidMetaInfo = useCallback(async () => {\n+    try {\n+      const allEnrollments = await dbManager.getAllCourseEnrollments();\n+      const unpaidEnrollments = allEnrollments.filter(e => e.enrollmentStatus === 'unpaid');\n+      const unpaidCourseCount = unpaidEnrollments.length;\n+      const totalUnpaidAmount = unpaidEnrollments.reduce((sum, e) => sum + (e.unpaidAmount || 0), 0);\n+      \n+      setUnpaidMetaInfo({ unpaidCourseCount, totalUnpaidAmount });\n+    } catch (error) {\n+      console.error('ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, []);\n+\n+  // ê¸°ê°„ë³„ ê²€ìƒ‰ ë²”ìœ„ ê³„ì‚°\n+  const getDateRange = useCallback(() => {\n+    const today = new Date();\n+    const startDate = new Date();\n+    \n+    switch (selectedPeriod) {\n+      case '1month':\n+        startDate.setMonth(today.getMonth() - 1);\n+        return { start: startDate, end: today };\n+      case '3month':\n+        startDate.setMonth(today.getMonth() - 3);\n+        return { start: startDate, end: today };\n+      case '6month':\n+        startDate.setMonth(today.getMonth() - 6);\n+        return { start: startDate, end: today };\n+      case 'custom':\n+        if (customStartDate && customEndDate) {\n+          return { \n+            start: new Date(customStartDate), \n+            end: new Date(customEndDate) \n+          };\n+        }\n+        // ì»¤ìŠ¤í…€ ë‚ ì§œê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ 1ê°œì›”\n+        startDate.setMonth(today.getMonth() - 1);\n+        return { start: startDate, end: today };\n+      default:\n+        startDate.setMonth(today.getMonth() - 1);\n+        return { start: startDate, end: today };\n+    }\n+  }, [selectedPeriod, customStartDate, customEndDate]);\n+\n+  // ë‚ ì§œ ë²”ìœ„ í‘œì‹œ ë¬¸ìì—´ ìƒì„±\n+  const getDateRangeDisplay = useCallback(() => {\n+    const range = getDateRange();\n+    const formatDate = (date: Date) => {\n+      return date.toLocaleDateString('ko-KR', {\n+        year: 'numeric',\n+        month: 'short',\n+        day: 'numeric'\n+      });\n+    };\n+    return `${formatDate(range.start)} ~ ${formatDate(range.end)}`;\n+  }, [getDateRange]);\n+\n+  const loadCourseEnrollments = useCallback(async (period?: PeriodOption, startDate?: string, endDate?: string) => {\n+    try {\n+      setLoading(true);\n+      console.log('ìˆ˜ê°• ë°ì´í„° ë¡œë”© ì‹œì‘...');\n+      \n+      // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n+      await loadUnpaidMetaInfo();\n+      \n+      const allEnrollments = await dbManager.getAllCourseEnrollments();\n+      console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥ ìˆ˜:', allEnrollments.length);\n+      \n+      // ê¸°ê°„ë³„ í•„í„°ë§ (ë“±ë¡ì¼ ê¸°ì¤€) - ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ í˜„ì¬ ìƒíƒœ ì‚¬ìš©\n+      const currentPeriod = period ?? selectedPeriod;\n+      const currentStartDate = startDate ?? customStartDate;\n+      const currentEndDate = endDate ?? customEndDate;\n+      \n+      let dateRange: { start: Date; end: Date };\n+      const today = new Date();\n+      const rangeStartDate = new Date();\n+      \n+      switch (currentPeriod) {\n+        case '1month':\n+          rangeStartDate.setMonth(today.getMonth() - 1);\n+          dateRange = { start: rangeStartDate, end: today };\n+          break;\n+        case '3month':\n+          rangeStartDate.setMonth(today.getMonth() - 3);\n+          dateRange = { start: rangeStartDate, end: today };\n+          break;\n+        case '6month':\n+          rangeStartDate.setMonth(today.getMonth() - 6);\n+          dateRange = { start: rangeStartDate, end: today };\n+          break;\n+        case 'custom':\n+          if (currentStartDate && currentEndDate) {\n+            dateRange = { \n+              start: new Date(currentStartDate), \n+              end: new Date(currentEndDate) \n+            };\n+          } else {\n+            // ì»¤ìŠ¤í…€ ë‚ ì§œê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ 1ê°œì›”\n+            rangeStartDate.setMonth(today.getMonth() - 1);\n+            dateRange = { start: rangeStartDate, end: today };\n+          }\n+          break;\n+        default:\n+          rangeStartDate.setMonth(today.getMonth() - 1);\n+          dateRange = { start: rangeStartDate, end: today };\n+      }\n+      \n+      const filteredByDate = allEnrollments.filter(enrollment => {\n+        const enrollmentDate = new Date(enrollment.createdAt);\n+        return enrollmentDate >= dateRange.start && enrollmentDate <= dateRange.end;\n+      });\n+      \n+      console.log(`${currentPeriod} ê¸°ê°„ ë‚´ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n+      \n+      setCourseEnrollments(filteredByDate);\n+      setFilteredEnrollments(filteredByDate);\n+    } catch (error) {\n+      console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+    } finally {\n+      setLoading(false);\n+    }\n+  }, [loadUnpaidMetaInfo, selectedPeriod, customStartDate, customEndDate]);\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì´ˆê¸° ë°ì´í„° ë¡œë“œ (1ê°œì›” ê¸°ì¤€)\n+  useEffect(() => {\n+    const initializeData = async () => {\n+      await loadCourseEnrollments();\n+    };\n+    initializeData();\n+  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n+\n+  // í•„í„° ì ìš© í•¨ìˆ˜ (ë°ì´í„° ë¡œë“œì™€ ë¶„ë¦¬)\n+  const applyFilters = useCallback(() => {\n+    let filtered = courseEnrollments;\n+    \n+    // ë¯¸ìˆ˜ í•„í„° ì ìš©\n+    if (showUnpaidOnly) {\n+      filtered = filtered.filter(enrollment => enrollment.enrollmentStatus === 'unpaid');\n+    }\n+    \n+    // í…ìŠ¤íŠ¸ ê²€ìƒ‰\n+    if (searchQuery.trim()) {\n+      const query = searchQuery.toLowerCase().trim();\n+      filtered = filtered.filter(enrollment =>\n+        enrollment.memberName.toLowerCase().includes(query) ||\n+        enrollment.productName.toLowerCase().includes(query) ||\n+        enrollment.programName.toLowerCase().includes(query) ||\n+        enrollment.branchName.toLowerCase().includes(query) ||\n+        enrollment.coachName.toLowerCase().includes(query)\n+      );\n+    }\n+    \n+    setFilteredEnrollments(filtered);\n+  }, [courseEnrollments, showUnpaidOnly, searchQuery]);\n+\n+  // ë°ì´í„°ë‚˜ í•„í„° ì¡°ê±´ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•„í„° ì ìš©\n+  useEffect(() => {\n+    applyFilters();\n+  }, [applyFilters]);\n+\n+  const handleSearch = async () => {\n+    // í˜„ì¬ ì„ íƒëœ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤\n+    await loadCourseEnrollments(selectedPeriod, customStartDate, customEndDate);\n+  };\n+\n+  // ë¯¸ìˆ˜ ìƒíƒœ í´ë¦­ ì²˜ë¦¬\n+  const handleUnpaidClick = (enrollment: CourseEnrollment) => {\n+    setSelectedEnrollment(enrollment);\n+    setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ì„ ì¹´ë“œë¡œ ì„¤ì •\n+    setShowCompleteModal(true);\n+  };\n+\n+  // ì™„ë£Œ ì²˜ë¦¬ í™•ì¸\n+  const handleCompletePayment = async () => {\n+    if (!selectedEnrollment) return;\n+\n+    try {\n+      setIsProcessing(true);\n+\n+      // 1. ìˆ˜ê°• ì´ë ¥ì˜ ìƒíƒœë¥¼ 'completed'ë¡œ ë³€ê²½í•˜ê³  ë¯¸ìˆ˜ê¸ˆì•¡ì„ 0ìœ¼ë¡œ ì„¤ì •\n+      const updatedEnrollment: CourseEnrollment = {\n+        ...selectedEnrollment,\n+        enrollmentStatus: 'completed',\n+        paidAmount: selectedEnrollment.productPrice, // ìƒí’ˆ ì „ì²´ ê¸ˆì•¡ìœ¼ë¡œ ì„¤ì •\n+        unpaidAmount: 0\n+      };\n+\n+      await dbManager.updateCourseEnrollment(selectedEnrollment.id, updatedEnrollment);\n+\n+      // 2. ê²°ì œ ë°ì´í„° ìƒì„± ë° ì €ì¥\n+      const paymentData = {\n+        memberId: selectedEnrollment.memberId,\n+        memberName: selectedEnrollment.memberName,\n+        branchId: selectedEnrollment.branchId,\n+        branchName: selectedEnrollment.branchName,\n+        coach: selectedEnrollment.coach,\n+        coachName: selectedEnrollment.coachName,\n+        paymentMethod: selectedPaymentMethod, // ì‚¬ìš©ìê°€ ì„ íƒí•œ ê²°ì œ ë°©ë²• ì‚¬ìš©\n+        paymentStatus: 'completed' as const, // ì™„ë£Œ ìƒíƒœë¡œ ì„¤ì •\n+        totalAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n+        paidAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n+        unpaidAmount: 0, // ì™„ë£Œ ì²˜ë¦¬ì´ë¯€ë¡œ 0\n+        paymentDate: new Date(),\n+        // ìˆ˜ê°•/ìì‚° êµ¬ë¶„ ë° ì—°ê²° ì •ë³´ ì¶”ê°€\n+        paymentType: 'course' as const, // 'course' | 'asset' | 'other'\n+        relatedCourseId: selectedEnrollment.id, // ìˆ˜ê°• ì´ë ¥ IDë¡œ ì—°ê²°\n+        relatedAssetId: null, // ìì‚° ê´€ë ¨ ê²°ì œê°€ ì•„ë‹ˆë¯€ë¡œ null\n+        products: [{\n+          id: selectedEnrollment.productId,\n+          name: selectedEnrollment.productName,\n+          price: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n+          quantity: 1,\n+          programId: selectedEnrollment.programId,\n+          programName: selectedEnrollment.programName,\n+          programType: selectedEnrollment.programType\n+        }],\n+        memo: `ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬ - ${selectedEnrollment.productName} (ìˆ˜ê°• ID: ${selectedEnrollment.id})`\n+      };\n+\n+      await dbManager.addPayment(paymentData);\n+\n+      // ê²°ì œ ë°©ë²•ë³„ ë©”ì‹œì§€ í‘œì‹œ\n+      const paymentMethodLabels: { [key: string]: string } = {\n+        'card': 'ì¹´ë“œ',\n+        'cash': 'í˜„ê¸ˆ',\n+        'transfer': 'ê³„ì¢Œì´ì²´'\n+      };\n+      const paymentMethodLabel = paymentMethodLabels[selectedPaymentMethod] || 'ì¹´ë“œ';\n+      \n+      toast.success(`ë¯¸ìˆ˜ê¸ˆì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. (ê²°ì œë°©ë²•: ${paymentMethodLabel})`);\n+      \n+      // 3. ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n+      await loadCourseEnrollments();\n+      \n+      // 4. í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n+      setTimeout(() => {\n+        handleSearch();\n+      }, 100);\n+      \n+      // 5. ëª¨ë‹¬ ë‹«ê¸°\n+      setShowCompleteModal(false);\n+      setSelectedEnrollment(null);\n+      \n+    } catch (error) {\n+      console.error('ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n+      toast.error('ì™„ë£Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n+    } finally {\n+      setIsProcessing(false);\n+    }\n+  };\n+\n+  // ëª¨ë‹¬ ë‹«ê¸°\n+  const handleCloseCompleteModal = () => {\n+    setShowCompleteModal(false);\n+    setSelectedEnrollment(null);\n+    setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ìœ¼ë¡œ ë¦¬ì…‹\n+  };\n+\n+  const formatDate = (date: Date | null | undefined) => {\n+    return date ? new Date(date).toLocaleDateString() : '-';\n+  };\n+\n+  const getProgressInfo = (enrollment: CourseEnrollment) => {\n+    if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n+      const remaining = enrollment.sessionCount - (enrollment.completedSessions || 0);\n+      return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n+    } else if (enrollment.programType === 'ê¸°ê°„ì œ' && enrollment.endDate) {\n+      const today = new Date();\n+      const endDate = new Date(enrollment.endDate);\n+      const timeDiff = endDate.getTime() - today.getTime();\n+      const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n+      \n+      if (daysDiff > 0) {\n+        return `${daysDiff}ì¼ ë‚¨ìŒ`;\n+      } else if (daysDiff === 0) {\n+        return 'ì˜¤ëŠ˜ ì¢…ë£Œ';\n+      } else {\n+        return `${Math.abs(daysDiff)}ì¼ ê²½ê³¼`;\n+      }\n+    }\n+    return 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n+  };\n+\n+  // ê²°ì œ ë°©ë²• ì˜µì…˜\n+  const paymentMethodOptions = [\n+    { value: 'card', label: 'ì¹´ë“œ' },\n+    { value: 'cash', label: 'í˜„ê¸ˆ' },\n+    { value: 'transfer', label: 'ê³„ì¢Œì´ì²´' }\n+  ];\n+\n+  // í…Œì´ë¸” ì»¬ëŸ¼ ì •ì˜\n+  const columns: TableColumn<CourseEnrollment>[] = [\n+    {\n+      key: 'memberName',\n+      title: 'íšŒì›ëª…',\n+      width: '120px'\n+    },\n+    {\n+      key: 'productName',\n+      title: 'ìƒí’ˆëª…',\n+      width: '180px',\n+      render: (value, record) => (\n+        <div>\n+          <div>{record.productName}</div>\n+          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+            {record.productPrice.toLocaleString()}ì›\n+          </div>\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'programName',\n+      title: 'í”„ë¡œê·¸ë¨',\n+      width: '150px',\n+      render: (value, record) => (\n+        <div>\n+          <div>{record.programName}</div>\n+          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+            {record.programType}\n+          </div>\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'progress',\n+      title: 'ì§„í–‰ìƒí™©',\n+      width: '120px',\n+      render: (value, record) => (\n+        <ProgressInfo>\n+          {getProgressInfo(record)}\n+        </ProgressInfo>\n+      )\n+    },\n+    {\n+      key: 'branchName',\n+      title: 'ì§€ì ',\n+      width: '100px'\n+    },\n+    {\n+      key: 'coachName',\n+      title: 'ë‹´ë‹¹ì½”ì¹˜',\n+      width: '100px'\n+    },\n+    {\n+      key: 'payment',\n+      title: 'ê²°ì œì •ë³´',\n+      width: '140px',\n+      align: 'right' as const,\n+      render: (value, record) => (\n+        <PriceInfo>\n+          <PaidAmount>\n+            {record.paidAmount.toLocaleString()}ì›\n+          </PaidAmount>\n+          <UnpaidAmount $hasUnpaid={record.unpaidAmount > 0}>\n+            {record.unpaidAmount > 0 ? \n+              `ë¯¸ìˆ˜: ${record.unpaidAmount.toLocaleString()}ì›` : \n+              'ì™„ë‚©'\n+            }\n+          </UnpaidAmount>\n+        </PriceInfo>\n+      )\n+    },\n+    {\n+      key: 'connection',\n+      title: 'ì—°ê²°ì •ë³´',\n+      width: '140px',\n+      render: (value, record) => (\n+        <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+          <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n+            ìˆ˜ê°• ID: {record.id.slice(-8)}\n+          </div>\n+          <div style={{ marginTop: '2px', fontSize: '11px' }}>\n+            ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n+          </div>\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'period',\n+      title: 'ìˆ˜ê°•ê¸°ê°„',\n+      width: '140px',\n+      render: (value, record) => (\n+        <div>\n+          <div>{formatDate(record.startDate)}</div>\n+          {record.endDate && (\n+            <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+              ~ {formatDate(record.endDate)}\n+            </div>\n+          )}\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'enrollmentStatus',\n+      title: 'ìƒíƒœ',\n+      width: '80px',\n+      align: 'center' as const,\n+      render: (value, record) => (\n+        <StatusBadge \n+          $status={record.enrollmentStatus}\n+          $clickable={record.enrollmentStatus === 'unpaid'}\n+          onClick={record.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(record) : undefined}\n+          title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n+        >\n+          {record.enrollmentStatus === 'completed' ? 'ì™„ë£Œ' : 'ë¯¸ìˆ˜'}\n+        </StatusBadge>\n+      )\n+    }\n+  ];\n+\n+  // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n+  const resultCountInfo = (\n+    <>\n+      {showUnpaidOnly ? 'ë¯¸ìˆ˜ ìˆ˜ê°•: ' : ''}{filteredEnrollments.length}ê±´ \n+      (ì™„ë£Œ: {filteredEnrollments.filter(e => e.enrollmentStatus === 'completed').length}ê±´, \n+      ë¯¸ìˆ˜: {filteredEnrollments.filter(e => e.enrollmentStatus === 'unpaid').length}ê±´)\n+      <br />\n+      <span style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+        ê¸°ê°„: {getDateRangeDisplay()} | ì „ì²´: {courseEnrollments.length}ê±´\n+      </span>\n+    </>\n+  );\n+\n+  if (loading) {\n+    return (\n+      <PageContainer>\n+        <DataTable\n+          title=\"ìˆ˜ê°• ì´ë ¥\"\n+          columns={columns}\n+          data={[]}\n+          loading={true}\n+        />\n+      </PageContainer>\n+    );\n+  }\n+\n+  return (\n+    <PageContainer>\n+      {/* ìƒˆë¡œìš´ SearchArea ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© */}\n+      <SearchArea\n+        metaContent={\n+          <div style={{ display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n+            <Button onClick={handleOpenRegistrationModal}>\n+              + ìƒˆ ìˆ˜ê°• ë“±ë¡\n+            </Button>\n+            <UnpaidFilter\n+              active={showUnpaidOnly}\n+              unpaidCount={unpaidMetaInfo.unpaidCourseCount}\n+              totalAmount={unpaidMetaInfo.totalUnpaidAmount}\n+              onClick={() => setShowUnpaidOnly(!showUnpaidOnly)}\n+            />\n+          </div>\n+        }\n+        selectedPeriod={selectedPeriod}\n+        onPeriodChange={setSelectedPeriod}\n+        customStartDate={customStartDate}\n+        customEndDate={customEndDate}\n+        onCustomStartDateChange={setCustomStartDate}\n+        onCustomEndDateChange={setCustomEndDate}\n+        dateRangeDisplay={getDateRangeDisplay()}\n+        searchValue={searchQuery}\n+        onSearchChange={setSearchQuery}\n+        onSearch={handleSearch}\n+        searchPlaceholder=\"íšŒì›ëª…, ìƒí’ˆëª…, í”„ë¡œê·¸ë¨ëª…, ì§€ì ëª…, ì½”ì¹˜ëª…ìœ¼ë¡œ ê²€ìƒ‰...\"\n+        autoSearchOnDateChange={false}\n+      />\n+\n+      <DataTable\n+        title=\"ìˆ˜ê°• ì´ë ¥\"\n+        columns={columns}\n+        data={filteredEnrollments}\n+        loading={loading}\n+        emptyText=\"ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤\"\n+        emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n+        resultCount={resultCountInfo}\n+        pagination={{\n+          enabled: true,\n+          pageSize: 5,\n+          pageSizeOptions: [5, 15, 30],\n+          showTotal: true\n+        }}\n+      />\n+\n+      {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n+      <CourseRegistrationModal\n+        isOpen={showRegistrationModal}\n+        onClose={handleCloseRegistrationModal}\n+        onSuccess={handleRegistrationSuccess}\n+      />\n+\n+      {/* ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ */}\n+      {showCompleteModal && selectedEnrollment && (\n+        <Modal \n+          isOpen={showCompleteModal}\n+          onClose={handleCloseCompleteModal}\n+          width=\"min(95vw, 500px)\"\n+          header=\"ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬\"\n+          body={\n+            <ModalContent>\n+              <WarningText>\n+                âš ï¸ ë¯¸ìˆ˜ê¸ˆì„ ì™„ë£Œ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n+              </WarningText>\n+\n+              <InfoRow>\n+                <InfoLabel>ê²°ì œ ë°©ë²•:</InfoLabel>\n+                <div style={{ flex: 1, marginLeft: '12px' }}>\n+                  <CustomDropdown\n+                    value={selectedPaymentMethod}\n+                    onChange={setSelectedPaymentMethod}\n+                    options={paymentMethodOptions}\n+                    inModal={true}\n+                  />\n+                </div>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>íšŒì›ëª…:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.memberName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ìƒí’ˆëª…:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.productName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>í”„ë¡œê·¸ë¨:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.programName} ({selectedEnrollment.programType})</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ì§€ì :</InfoLabel>\n+                <InfoValue>{selectedEnrollment.branchName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ë‹´ë‹¹ì½”ì¹˜:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.coachName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ë¯¸ìˆ˜ê¸ˆì•¡:</InfoLabel>\n+                <ModalUnpaidAmount>{selectedEnrollment.unpaidAmount?.toLocaleString() || 0}ì›</ModalUnpaidAmount>\n+              </InfoRow>\n+              \n+              <div style={{ \n+                padding: '12px', \n+                backgroundColor: '#f0f9ff', \n+                border: '1px solid #93c5fd', \n+                borderRadius: '8px',\n+                fontSize: '14px',\n+                color: '#1e40af',\n+                marginTop: '16px'\n+              }}>\n+                ğŸ’¡ ì™„ë£Œ ì²˜ë¦¬ ì‹œ í•´ë‹¹ ê¸ˆì•¡ì´ ê²°ì œ ë‚´ì—­ì— ìë™ìœ¼ë¡œ ë“±ë¡ë˜ë©°, ìˆ˜ê°• ìƒíƒœê°€ 'ì™„ë£Œ'ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.\n+              </div>\n+            </ModalContent>\n+          }\n+          footer={\n+            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px', width: '100%' }}>\n+              <Button variant=\"secondary\" onClick={handleCloseCompleteModal} disabled={isProcessing}>\n+                ì·¨ì†Œ\n+              </Button>\n+              <Button onClick={handleCompletePayment} disabled={isProcessing}>\n+                {isProcessing ? 'ì²˜ë¦¬ ì¤‘...' : 'ì™„ë£Œ ì²˜ë¦¬'}\n+              </Button>\n+            </div>\n+          }\n+        />\n+      )}\n+\n+      {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n+      <CourseRegistrationModal\n+        isOpen={showRegistrationModal}\n+        onClose={handleCloseRegistrationModal}\n+        onSuccess={handleRegistrationSuccess}\n+      />\n+    </PageContainer>\n+  );\n+};\n+\n+export default CourseHistory;\n"
                },
                {
                    "date": 1761366606848,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,15 +14,33 @@\n const PageContainer = styled.div`\n   width: 100%;\n `;\n \n-const StatusBadge = styled.span<{ $status: 'completed' | 'unpaid'; $clickable?: boolean }>`\n+const StatusBadge = styled.span<{ $status: 'active' | 'completed' | 'suspended' | 'cancelled' | 'unpaid'; $clickable?: boolean }>`\n   padding: 4px 8px;\n   border-radius: 12px;\n   font-size: 12px;\n   font-weight: 500;\n-  background: ${props => props.$status === 'completed' ? '#e7f5e7' : '#fff2f2'};\n-  color: ${props => props.$status === 'completed' ? '#2d5a2d' : '#8b1538'};\n+  background: ${props => {\n+    switch (props.$status) {\n+      case 'completed': return '#e7f5e7';\n+      case 'active': return '#e3f2fd';\n+      case 'suspended': return '#fff3e0';\n+      case 'cancelled': return '#fce4ec';\n+      case 'unpaid': return '#fff2f2';\n+      default: return '#f5f5f5';\n+    }\n+  }};\n+  color: ${props => {\n+    switch (props.$status) {\n+      case 'completed': return '#2d5a2d';\n+      case 'active': return '#1565c0';\n+      case 'suspended': return '#ef6c00';\n+      case 'cancelled': return '#c2185b';\n+      case 'unpaid': return '#8b1538';\n+      default: return '#424242';\n+    }\n+  }};\n   cursor: ${props => props.$clickable ? 'pointer' : 'default'};\n   transition: all 0.2s;\n   \n   &:hover {\n@@ -568,9 +586,18 @@\n           $clickable={record.enrollmentStatus === 'unpaid'}\n           onClick={record.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(record) : undefined}\n           title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n         >\n-          {record.enrollmentStatus === 'completed' ? 'ì™„ë£Œ' : 'ë¯¸ìˆ˜'}\n+          {(() => {\n+            switch (record.enrollmentStatus) {\n+              case 'active': return 'ìˆ˜ê°•ì¤‘';\n+              case 'completed': return 'ì™„ë£Œ';\n+              case 'suspended': return 'ì¤‘ë‹¨';\n+              case 'cancelled': return 'ì·¨ì†Œ';\n+              case 'unpaid': return 'ë¯¸ìˆ˜';\n+              default: return record.enrollmentStatus;\n+            }\n+          })()}\n         </StatusBadge>\n       )\n     }\n   ];\n@@ -746,747 +773,4 @@\n   );\n };\n \n export default CourseHistory;\n-import React, { useState, useEffect, useCallback } from 'react';\n-import styled from 'styled-components';\n-import { toast } from 'react-toastify';\n-import { AppColors } from '../../../styles/colors';\n-import { AppTextStyles } from '../../../styles/textStyles';\n-import { dbManager, type CourseEnrollment } from '../../../utils/indexedDB';\n-import { SearchArea, type PeriodOption } from '../../../components/SearchArea';\n-import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n-import Modal from '../../../components/Modal';\n-import CustomDropdown from '../../../components/CustomDropdown';\n-import DataTable, { type TableColumn } from '../../../components/DataTable';\n-import CourseRegistrationModal from './CourseRegistrationModal';\n-\n-const PageContainer = styled.div`\n-  width: 100%;\n-`;\n-\n-const StatusBadge = styled.span<{ $status: 'completed' | 'unpaid'; $clickable?: boolean }>`\n-  padding: 4px 8px;\n-  border-radius: 12px;\n-  font-size: 12px;\n-  font-weight: 500;\n-  background: ${props => props.$status === 'completed' ? '#e7f5e7' : '#fff2f2'};\n-  color: ${props => props.$status === 'completed' ? '#2d5a2d' : '#8b1538'};\n-  cursor: ${props => props.$clickable ? 'pointer' : 'default'};\n-  transition: all 0.2s;\n-  \n-  &:hover {\n-    opacity: ${props => props.$clickable ? 0.8 : 1};\n-    transform: ${props => props.$clickable ? 'translateY(-1px)' : 'none'};\n-  }\n-`;\n-\n-const ProgressInfo = styled.div`\n-  font-size: 12px;\n-  color: ${AppColors.onInput1};\n-  margin-top: 4px;\n-`;\n-\n-const PriceInfo = styled.div`\n-  text-align: right;\n-`;\n-\n-const PaidAmount = styled.div`\n-  color: ${AppColors.primary};\n-  font-weight: 600;\n-`;\n-\n-const UnpaidAmount = styled.div<{ $hasUnpaid: boolean }>`\n-  color: ${props => props.$hasUnpaid ? '#d32f2f' : AppColors.onInput1};\n-  font-size: 12px;\n-  margin-top: 2px;\n-`;\n-\n-const Button = styled.button<{ variant?: 'primary' | 'secondary' }>`\n-  padding: 12px 18px;\n-  border: ${props => props.variant === 'secondary' ? `1px solid ${AppColors.borderLight}` : 'none'};\n-  border-radius: 8px;\n-  background: ${props => props.variant === 'secondary' ? AppColors.surface : AppColors.primary};\n-  color: ${props => props.variant === 'secondary' ? AppColors.onSurface : AppColors.onPrimary};\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: 600;\n-  cursor: pointer;\n-  transition: all 0.2s;\n-  \n-  &:hover {\n-    opacity: 0.9;\n-    transform: translateY(-1px);\n-  }\n-  \n-  &:disabled {\n-    opacity: 0.5;\n-    cursor: not-allowed;\n-    transform: none;\n-  }\n-`;\n-\n-const ModalContent = styled.div`\n-  text-align: left;\n-`;\n-\n-const InfoRow = styled.div`\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-  padding: 12px 0;\n-  border-bottom: 1px solid ${AppColors.borderLight};\n-  \n-  &:last-child {\n-    border-bottom: none;\n-  }\n-`;\n-\n-const InfoLabel = styled.span`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-`;\n-\n-const InfoValue = styled.span`\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const ModalUnpaidAmount = styled.span`\n-  color: #d32f2f;\n-  font-weight: 600;\n-  font-size: 16px;\n-`;\n-\n-const WarningText = styled.div`\n-  background: #fff3cd;\n-  border: 1px solid #ffeaa7;\n-  border-radius: 8px;\n-  padding: 12px;\n-  margin: 16px 0;\n-  color: #856404;\n-  font-size: 14px;\n-  text-align: center;\n-`;\n-\n-const CourseHistory: React.FC = () => {\n-  const [searchQuery, setSearchQuery] = useState<string>('');\n-  const [courseEnrollments, setCourseEnrollments] = useState<CourseEnrollment[]>([]);\n-  const [filteredEnrollments, setFilteredEnrollments] = useState<CourseEnrollment[]>([]);\n-  const [loading, setLoading] = useState<boolean>(true);\n-  \n-  // ê¸°ê°„ ì„ íƒ ê´€ë ¨ ìƒíƒœ\n-  const [selectedPeriod, setSelectedPeriod] = useState<PeriodOption>('1month');\n-  const [customStartDate, setCustomStartDate] = useState<string>('');\n-  const [customEndDate, setCustomEndDate] = useState<string>('');\n-  \n-  // ë¯¸ìˆ˜ í•„í„° ê´€ë ¨ ìƒíƒœ\n-  const [showUnpaidOnly, setShowUnpaidOnly] = useState<boolean>(false);\n-  const [unpaidMetaInfo, setUnpaidMetaInfo] = useState<{ unpaidCourseCount: number; totalUnpaidAmount: number }>({\n-    unpaidCourseCount: 0,\n-    totalUnpaidAmount: 0\n-  });\n-  \n-  // ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n-  const [showCompleteModal, setShowCompleteModal] = useState<boolean>(false);\n-  const [selectedEnrollment, setSelectedEnrollment] = useState<CourseEnrollment | null>(null);\n-  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n-  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState<string>('card');\n-\n-  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n-  const [showRegistrationModal, setShowRegistrationModal] = useState<boolean>(false);\n-\n-  // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n-  const loadUnpaidMetaInfo = useCallback(async () => {\n-    try {\n-      const allEnrollments = await dbManager.getAllCourseEnrollments();\n-      const unpaidEnrollments = allEnrollments.filter(e => e.enrollmentStatus === 'unpaid');\n-      const unpaidCourseCount = unpaidEnrollments.length;\n-      const totalUnpaidAmount = unpaidEnrollments.reduce((sum, e) => sum + (e.unpaidAmount || 0), 0);\n-      \n-      setUnpaidMetaInfo({ unpaidCourseCount, totalUnpaidAmount });\n-    } catch (error) {\n-      console.error('ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);\n-    }\n-  }, []);\n-\n-  // ê¸°ê°„ë³„ ê²€ìƒ‰ ë²”ìœ„ ê³„ì‚°\n-  const getDateRange = useCallback(() => {\n-    const today = new Date();\n-    const startDate = new Date();\n-    \n-    switch (selectedPeriod) {\n-      case '1month':\n-        startDate.setMonth(today.getMonth() - 1);\n-        return { start: startDate, end: today };\n-      case '3month':\n-        startDate.setMonth(today.getMonth() - 3);\n-        return { start: startDate, end: today };\n-      case '6month':\n-        startDate.setMonth(today.getMonth() - 6);\n-        return { start: startDate, end: today };\n-      case 'custom':\n-        if (customStartDate && customEndDate) {\n-          return { \n-            start: new Date(customStartDate), \n-            end: new Date(customEndDate) \n-          };\n-        }\n-        // ì»¤ìŠ¤í…€ ë‚ ì§œê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ 1ê°œì›”\n-        startDate.setMonth(today.getMonth() - 1);\n-        return { start: startDate, end: today };\n-      default:\n-        startDate.setMonth(today.getMonth() - 1);\n-        return { start: startDate, end: today };\n-    }\n-  }, [selectedPeriod, customStartDate, customEndDate]);\n-\n-  // ë‚ ì§œ ë²”ìœ„ í‘œì‹œ ë¬¸ìì—´ ìƒì„±\n-  const getDateRangeDisplay = useCallback(() => {\n-    const range = getDateRange();\n-    const formatDate = (date: Date) => {\n-      return date.toLocaleDateString('ko-KR', {\n-        year: 'numeric',\n-        month: 'short',\n-        day: 'numeric'\n-      });\n-    };\n-    return `${formatDate(range.start)} ~ ${formatDate(range.end)}`;\n-  }, [getDateRange]);\n-\n-  const loadCourseEnrollments = useCallback(async (period?: PeriodOption, startDate?: string, endDate?: string) => {\n-    try {\n-      setLoading(true);\n-      console.log('ìˆ˜ê°• ë°ì´í„° ë¡œë”© ì‹œì‘...');\n-      \n-      // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n-      await loadUnpaidMetaInfo();\n-      \n-      const allEnrollments = await dbManager.getAllCourseEnrollments();\n-      console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥ ìˆ˜:', allEnrollments.length);\n-      \n-      // ê¸°ê°„ë³„ í•„í„°ë§ (ë“±ë¡ì¼ ê¸°ì¤€) - ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ í˜„ì¬ ìƒíƒœ ì‚¬ìš©\n-      const currentPeriod = period ?? selectedPeriod;\n-      const currentStartDate = startDate ?? customStartDate;\n-      const currentEndDate = endDate ?? customEndDate;\n-      \n-      let dateRange: { start: Date; end: Date };\n-      const today = new Date();\n-      const rangeStartDate = new Date();\n-      \n-      switch (currentPeriod) {\n-        case '1month':\n-          rangeStartDate.setMonth(today.getMonth() - 1);\n-          dateRange = { start: rangeStartDate, end: today };\n-          break;\n-        case '3month':\n-          rangeStartDate.setMonth(today.getMonth() - 3);\n-          dateRange = { start: rangeStartDate, end: today };\n-          break;\n-        case '6month':\n-          rangeStartDate.setMonth(today.getMonth() - 6);\n-          dateRange = { start: rangeStartDate, end: today };\n-          break;\n-        case 'custom':\n-          if (currentStartDate && currentEndDate) {\n-            dateRange = { \n-              start: new Date(currentStartDate), \n-              end: new Date(currentEndDate) \n-            };\n-          } else {\n-            // ì»¤ìŠ¤í…€ ë‚ ì§œê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ 1ê°œì›”\n-            rangeStartDate.setMonth(today.getMonth() - 1);\n-            dateRange = { start: rangeStartDate, end: today };\n-          }\n-          break;\n-        default:\n-          rangeStartDate.setMonth(today.getMonth() - 1);\n-          dateRange = { start: rangeStartDate, end: today };\n-      }\n-      \n-      const filteredByDate = allEnrollments.filter(enrollment => {\n-        const enrollmentDate = new Date(enrollment.createdAt);\n-        return enrollmentDate >= dateRange.start && enrollmentDate <= dateRange.end;\n-      });\n-      \n-      console.log(`${currentPeriod} ê¸°ê°„ ë‚´ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n-      \n-      setCourseEnrollments(filteredByDate);\n-      setFilteredEnrollments(filteredByDate);\n-    } catch (error) {\n-      console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-    } finally {\n-      setLoading(false);\n-    }\n-  }, [loadUnpaidMetaInfo, selectedPeriod, customStartDate, customEndDate]);\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì´ˆê¸° ë°ì´í„° ë¡œë“œ (1ê°œì›” ê¸°ì¤€)\n-  useEffect(() => {\n-    const initializeData = async () => {\n-      await loadCourseEnrollments();\n-    };\n-    initializeData();\n-  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n-\n-  // í•„í„° ì ìš© í•¨ìˆ˜ (ë°ì´í„° ë¡œë“œì™€ ë¶„ë¦¬)\n-  const applyFilters = useCallback(() => {\n-    let filtered = courseEnrollments;\n-    \n-    // ë¯¸ìˆ˜ í•„í„° ì ìš©\n-    if (showUnpaidOnly) {\n-      filtered = filtered.filter(enrollment => enrollment.enrollmentStatus === 'unpaid');\n-    }\n-    \n-    // í…ìŠ¤íŠ¸ ê²€ìƒ‰\n-    if (searchQuery.trim()) {\n-      const query = searchQuery.toLowerCase().trim();\n-      filtered = filtered.filter(enrollment =>\n-        enrollment.memberName.toLowerCase().includes(query) ||\n-        enrollment.productName.toLowerCase().includes(query) ||\n-        enrollment.programName.toLowerCase().includes(query) ||\n-        enrollment.branchName.toLowerCase().includes(query) ||\n-        enrollment.coachName.toLowerCase().includes(query)\n-      );\n-    }\n-    \n-    setFilteredEnrollments(filtered);\n-  }, [courseEnrollments, showUnpaidOnly, searchQuery]);\n-\n-  // ë°ì´í„°ë‚˜ í•„í„° ì¡°ê±´ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•„í„° ì ìš©\n-  useEffect(() => {\n-    applyFilters();\n-  }, [applyFilters]);\n-\n-  const handleSearch = async () => {\n-    // í˜„ì¬ ì„ íƒëœ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤\n-    await loadCourseEnrollments(selectedPeriod, customStartDate, customEndDate);\n-  };\n-\n-  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ì—´ê¸°\n-  const handleOpenRegistrationModal = () => {\n-    setShowRegistrationModal(true);\n-  };\n-\n-  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ë‹«ê¸°\n-  const handleCloseRegistrationModal = () => {\n-    setShowRegistrationModal(false);\n-  };\n-\n-  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ì„±ê³µ ì²˜ë¦¬\n-  const handleRegistrationSuccess = async () => {\n-    toast.success('ìƒˆ ìˆ˜ê°•ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');\n-    // ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n-    await loadCourseEnrollments();\n-    // í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n-    setTimeout(() => {\n-      handleSearch();\n-    }, 100);\n-  };\n-\n-  // ë¯¸ìˆ˜ ìƒíƒœ í´ë¦­ ì²˜ë¦¬\n-  const handleUnpaidClick = (enrollment: CourseEnrollment) => {\n-    setSelectedEnrollment(enrollment);\n-    setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ì„ ì¹´ë“œë¡œ ì„¤ì •\n-    setShowCompleteModal(true);\n-  };\n-\n-  // ì™„ë£Œ ì²˜ë¦¬ í™•ì¸\n-  const handleCompletePayment = async () => {\n-    if (!selectedEnrollment) return;\n-\n-    try {\n-      setIsProcessing(true);\n-\n-      // 1. ìˆ˜ê°• ì´ë ¥ì˜ ìƒíƒœë¥¼ 'completed'ë¡œ ë³€ê²½í•˜ê³  ë¯¸ìˆ˜ê¸ˆì•¡ì„ 0ìœ¼ë¡œ ì„¤ì •\n-      const updatedEnrollment: CourseEnrollment = {\n-        ...selectedEnrollment,\n-        enrollmentStatus: 'completed',\n-        paidAmount: selectedEnrollment.productPrice, // ìƒí’ˆ ì „ì²´ ê¸ˆì•¡ìœ¼ë¡œ ì„¤ì •\n-        unpaidAmount: 0\n-      };\n-\n-      await dbManager.updateCourseEnrollment(selectedEnrollment.id, updatedEnrollment);\n-\n-      // 2. ê²°ì œ ë°ì´í„° ìƒì„± ë° ì €ì¥\n-      const paymentData = {\n-        memberId: selectedEnrollment.memberId,\n-        memberName: selectedEnrollment.memberName,\n-        branchId: selectedEnrollment.branchId,\n-        branchName: selectedEnrollment.branchName,\n-        coach: selectedEnrollment.coach,\n-        coachName: selectedEnrollment.coachName,\n-        paymentMethod: selectedPaymentMethod, // ì‚¬ìš©ìê°€ ì„ íƒí•œ ê²°ì œ ë°©ë²• ì‚¬ìš©\n-        paymentStatus: 'completed' as const, // ì™„ë£Œ ìƒíƒœë¡œ ì„¤ì •\n-        totalAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n-        paidAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n-        unpaidAmount: 0, // ì™„ë£Œ ì²˜ë¦¬ì´ë¯€ë¡œ 0\n-        paymentDate: new Date(),\n-        // ìˆ˜ê°•/ìì‚° êµ¬ë¶„ ë° ì—°ê²° ì •ë³´ ì¶”ê°€\n-        paymentType: 'course' as const, // 'course' | 'asset' | 'other'\n-        relatedCourseId: selectedEnrollment.id, // ìˆ˜ê°• ì´ë ¥ IDë¡œ ì—°ê²°\n-        relatedAssetId: null, // ìì‚° ê´€ë ¨ ê²°ì œê°€ ì•„ë‹ˆë¯€ë¡œ null\n-        products: [{\n-          id: selectedEnrollment.productId,\n-          name: selectedEnrollment.productName,\n-          price: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n-          quantity: 1,\n-          programId: selectedEnrollment.programId,\n-          programName: selectedEnrollment.programName,\n-          programType: selectedEnrollment.programType\n-        }],\n-        memo: `ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬ - ${selectedEnrollment.productName} (ìˆ˜ê°• ID: ${selectedEnrollment.id})`\n-      };\n-\n-      await dbManager.addPayment(paymentData);\n-\n-      // ê²°ì œ ë°©ë²•ë³„ ë©”ì‹œì§€ í‘œì‹œ\n-      const paymentMethodLabels: { [key: string]: string } = {\n-        'card': 'ì¹´ë“œ',\n-        'cash': 'í˜„ê¸ˆ',\n-        'transfer': 'ê³„ì¢Œì´ì²´'\n-      };\n-      const paymentMethodLabel = paymentMethodLabels[selectedPaymentMethod] || 'ì¹´ë“œ';\n-      \n-      toast.success(`ë¯¸ìˆ˜ê¸ˆì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. (ê²°ì œë°©ë²•: ${paymentMethodLabel})`);\n-      \n-      // 3. ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n-      await loadCourseEnrollments();\n-      \n-      // 4. í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n-      setTimeout(() => {\n-        handleSearch();\n-      }, 100);\n-      \n-      // 5. ëª¨ë‹¬ ë‹«ê¸°\n-      setShowCompleteModal(false);\n-      setSelectedEnrollment(null);\n-      \n-    } catch (error) {\n-      console.error('ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n-      toast.error('ì™„ë£Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n-    } finally {\n-      setIsProcessing(false);\n-    }\n-  };\n-\n-  // ëª¨ë‹¬ ë‹«ê¸°\n-  const handleCloseCompleteModal = () => {\n-    setShowCompleteModal(false);\n-    setSelectedEnrollment(null);\n-    setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ìœ¼ë¡œ ë¦¬ì…‹\n-  };\n-\n-  const formatDate = (date: Date | null | undefined) => {\n-    return date ? new Date(date).toLocaleDateString() : '-';\n-  };\n-\n-  const getProgressInfo = (enrollment: CourseEnrollment) => {\n-    if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n-      const remaining = enrollment.sessionCount - (enrollment.completedSessions || 0);\n-      return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n-    } else if (enrollment.programType === 'ê¸°ê°„ì œ' && enrollment.endDate) {\n-      const today = new Date();\n-      const endDate = new Date(enrollment.endDate);\n-      const timeDiff = endDate.getTime() - today.getTime();\n-      const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n-      \n-      if (daysDiff > 0) {\n-        return `${daysDiff}ì¼ ë‚¨ìŒ`;\n-      } else if (daysDiff === 0) {\n-        return 'ì˜¤ëŠ˜ ì¢…ë£Œ';\n-      } else {\n-        return `${Math.abs(daysDiff)}ì¼ ê²½ê³¼`;\n-      }\n-    }\n-    return 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n-  };\n-\n-  // ê²°ì œ ë°©ë²• ì˜µì…˜\n-  const paymentMethodOptions = [\n-    { value: 'card', label: 'ì¹´ë“œ' },\n-    { value: 'cash', label: 'í˜„ê¸ˆ' },\n-    { value: 'transfer', label: 'ê³„ì¢Œì´ì²´' }\n-  ];\n-\n-  // í…Œì´ë¸” ì»¬ëŸ¼ ì •ì˜\n-  const columns: TableColumn<CourseEnrollment>[] = [\n-    {\n-      key: 'memberName',\n-      title: 'íšŒì›ëª…',\n-      width: '120px'\n-    },\n-    {\n-      key: 'productName',\n-      title: 'ìƒí’ˆëª…',\n-      width: '180px',\n-      render: (value, record) => (\n-        <div>\n-          <div>{record.productName}</div>\n-          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-            {record.productPrice.toLocaleString()}ì›\n-          </div>\n-        </div>\n-      )\n-    },\n-    {\n-      key: 'programName',\n-      title: 'í”„ë¡œê·¸ë¨',\n-      width: '150px',\n-      render: (value, record) => (\n-        <div>\n-          <div>{record.programName}</div>\n-          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-            {record.programType}\n-          </div>\n-        </div>\n-      )\n-    },\n-    {\n-      key: 'progress',\n-      title: 'ì§„í–‰ìƒí™©',\n-      width: '120px',\n-      render: (value, record) => (\n-        <ProgressInfo>\n-          {getProgressInfo(record)}\n-        </ProgressInfo>\n-      )\n-    },\n-    {\n-      key: 'branchName',\n-      title: 'ì§€ì ',\n-      width: '100px'\n-    },\n-    {\n-      key: 'coachName',\n-      title: 'ë‹´ë‹¹ì½”ì¹˜',\n-      width: '100px'\n-    },\n-    {\n-      key: 'payment',\n-      title: 'ê²°ì œì •ë³´',\n-      width: '140px',\n-      align: 'right' as const,\n-      render: (value, record) => (\n-        <PriceInfo>\n-          <PaidAmount>\n-            {record.paidAmount.toLocaleString()}ì›\n-          </PaidAmount>\n-          <UnpaidAmount $hasUnpaid={record.unpaidAmount > 0}>\n-            {record.unpaidAmount > 0 ? \n-              `ë¯¸ìˆ˜: ${record.unpaidAmount.toLocaleString()}ì›` : \n-              'ì™„ë‚©'\n-            }\n-          </UnpaidAmount>\n-        </PriceInfo>\n-      )\n-    },\n-    {\n-      key: 'connection',\n-      title: 'ì—°ê²°ì •ë³´',\n-      width: '140px',\n-      render: (value, record) => (\n-        <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-          <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n-            ìˆ˜ê°• ID: {record.id.slice(-8)}\n-          </div>\n-          <div style={{ marginTop: '2px', fontSize: '11px' }}>\n-            ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n-          </div>\n-        </div>\n-      )\n-    },\n-    {\n-      key: 'period',\n-      title: 'ìˆ˜ê°•ê¸°ê°„',\n-      width: '140px',\n-      render: (value, record) => (\n-        <div>\n-          <div>{formatDate(record.startDate)}</div>\n-          {record.endDate && (\n-            <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-              ~ {formatDate(record.endDate)}\n-            </div>\n-          )}\n-        </div>\n-      )\n-    },\n-    {\n-      key: 'enrollmentStatus',\n-      title: 'ìƒíƒœ',\n-      width: '80px',\n-      align: 'center' as const,\n-      render: (value, record) => (\n-        <StatusBadge \n-          $status={record.enrollmentStatus}\n-          $clickable={record.enrollmentStatus === 'unpaid'}\n-          onClick={record.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(record) : undefined}\n-          title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n-        >\n-          {record.enrollmentStatus === 'completed' ? 'ì™„ë£Œ' : 'ë¯¸ìˆ˜'}\n-        </StatusBadge>\n-      )\n-    }\n-  ];\n-\n-  // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n-  const resultCountInfo = (\n-    <>\n-      {showUnpaidOnly ? 'ë¯¸ìˆ˜ ìˆ˜ê°•: ' : ''}{filteredEnrollments.length}ê±´ \n-      (ì™„ë£Œ: {filteredEnrollments.filter(e => e.enrollmentStatus === 'completed').length}ê±´, \n-      ë¯¸ìˆ˜: {filteredEnrollments.filter(e => e.enrollmentStatus === 'unpaid').length}ê±´)\n-      <br />\n-      <span style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-        ê¸°ê°„: {getDateRangeDisplay()} | ì „ì²´: {courseEnrollments.length}ê±´\n-      </span>\n-    </>\n-  );\n-\n-  if (loading) {\n-    return (\n-      <PageContainer>\n-        <DataTable\n-          title=\"ìˆ˜ê°• ì´ë ¥\"\n-          columns={columns}\n-          data={[]}\n-          loading={true}\n-        />\n-      </PageContainer>\n-    );\n-  }\n-\n-  return (\n-    <PageContainer>\n-      {/* ìƒˆë¡œìš´ SearchArea ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© */}\n-      <SearchArea\n-        metaContent={\n-          <div style={{ display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n-            <Button onClick={handleOpenRegistrationModal}>\n-              + ìƒˆ ìˆ˜ê°• ë“±ë¡\n-            </Button>\n-            <UnpaidFilter\n-              active={showUnpaidOnly}\n-              unpaidCount={unpaidMetaInfo.unpaidCourseCount}\n-              totalAmount={unpaidMetaInfo.totalUnpaidAmount}\n-              onClick={() => setShowUnpaidOnly(!showUnpaidOnly)}\n-            />\n-          </div>\n-        }\n-        selectedPeriod={selectedPeriod}\n-        onPeriodChange={setSelectedPeriod}\n-        customStartDate={customStartDate}\n-        customEndDate={customEndDate}\n-        onCustomStartDateChange={setCustomStartDate}\n-        onCustomEndDateChange={setCustomEndDate}\n-        dateRangeDisplay={getDateRangeDisplay()}\n-        searchValue={searchQuery}\n-        onSearchChange={setSearchQuery}\n-        onSearch={handleSearch}\n-        searchPlaceholder=\"íšŒì›ëª…, ìƒí’ˆëª…, í”„ë¡œê·¸ë¨ëª…, ì§€ì ëª…, ì½”ì¹˜ëª…ìœ¼ë¡œ ê²€ìƒ‰...\"\n-        autoSearchOnDateChange={false}\n-      />\n-\n-      <DataTable\n-        title=\"ìˆ˜ê°• ì´ë ¥\"\n-        columns={columns}\n-        data={filteredEnrollments}\n-        loading={loading}\n-        emptyText=\"ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤\"\n-        emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n-        resultCount={resultCountInfo}\n-        pagination={{\n-          enabled: true,\n-          pageSize: 5,\n-          pageSizeOptions: [5, 15, 30],\n-          showTotal: true\n-        }}\n-      />\n-\n-      {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n-      <CourseRegistrationModal\n-        isOpen={showRegistrationModal}\n-        onClose={handleCloseRegistrationModal}\n-        onSuccess={handleRegistrationSuccess}\n-      />\n-\n-      {/* ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ */}\n-      {showCompleteModal && selectedEnrollment && (\n-        <Modal \n-          isOpen={showCompleteModal}\n-          onClose={handleCloseCompleteModal}\n-          width=\"min(95vw, 500px)\"\n-          header=\"ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬\"\n-          body={\n-            <ModalContent>\n-              <WarningText>\n-                âš ï¸ ë¯¸ìˆ˜ê¸ˆì„ ì™„ë£Œ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n-              </WarningText>\n-\n-              <InfoRow>\n-                <InfoLabel>ê²°ì œ ë°©ë²•:</InfoLabel>\n-                <div style={{ flex: 1, marginLeft: '12px' }}>\n-                  <CustomDropdown\n-                    value={selectedPaymentMethod}\n-                    onChange={setSelectedPaymentMethod}\n-                    options={paymentMethodOptions}\n-                    inModal={true}\n-                  />\n-                </div>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>íšŒì›ëª…:</InfoLabel>\n-                <InfoValue>{selectedEnrollment.memberName}</InfoValue>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>ìƒí’ˆëª…:</InfoLabel>\n-                <InfoValue>{selectedEnrollment.productName}</InfoValue>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>í”„ë¡œê·¸ë¨:</InfoLabel>\n-                <InfoValue>{selectedEnrollment.programName} ({selectedEnrollment.programType})</InfoValue>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>ì§€ì :</InfoLabel>\n-                <InfoValue>{selectedEnrollment.branchName}</InfoValue>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>ë‹´ë‹¹ì½”ì¹˜:</InfoLabel>\n-                <InfoValue>{selectedEnrollment.coachName}</InfoValue>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>ë¯¸ìˆ˜ê¸ˆì•¡:</InfoLabel>\n-                <ModalUnpaidAmount>{selectedEnrollment.unpaidAmount?.toLocaleString() || 0}ì›</ModalUnpaidAmount>\n-              </InfoRow>\n-              \n-              <div style={{ \n-                padding: '12px', \n-                backgroundColor: '#f0f9ff', \n-                border: '1px solid #93c5fd', \n-                borderRadius: '8px',\n-                fontSize: '14px',\n-                color: '#1e40af',\n-                marginTop: '16px'\n-              }}>\n-                ğŸ’¡ ì™„ë£Œ ì²˜ë¦¬ ì‹œ í•´ë‹¹ ê¸ˆì•¡ì´ ê²°ì œ ë‚´ì—­ì— ìë™ìœ¼ë¡œ ë“±ë¡ë˜ë©°, ìˆ˜ê°• ìƒíƒœê°€ 'ì™„ë£Œ'ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.\n-              </div>\n-            </ModalContent>\n-          }\n-          footer={\n-            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px', width: '100%' }}>\n-              <Button variant=\"secondary\" onClick={handleCloseCompleteModal} disabled={isProcessing}>\n-                ì·¨ì†Œ\n-              </Button>\n-              <Button onClick={handleCompletePayment} disabled={isProcessing}>\n-                {isProcessing ? 'ì²˜ë¦¬ ì¤‘...' : 'ì™„ë£Œ ì²˜ë¦¬'}\n-              </Button>\n-            </div>\n-          }\n-        />\n-      )}\n-    </PageContainer>\n-  );\n-};\n-\n-export default CourseHistory;\n"
                },
                {
                    "date": 1761367350416,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -296,10 +296,18 @@\n       });\n       \n       console.log(`${currentPeriod} ê¸°ê°„ ë‚´ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n       \n+      console.log('=== CourseHistory ìµœì¢… ë°ì´í„° ì„¤ì • ===');\n+      console.log('filteredByDate ê°œìˆ˜:', filteredByDate.length);\n+      if (filteredByDate.length > 0) {\n+        console.log('ì²« ë²ˆì§¸ ìˆ˜ê°• ì´ë ¥:', filteredByDate[0]);\n+      }\n+      \n       setCourseEnrollments(filteredByDate);\n       setFilteredEnrollments(filteredByDate);\n+      \n+      console.log('ìˆ˜ê°• ì´ë ¥ ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ');\n     } catch (error) {\n       console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n     } finally {\n       setLoading(false);\n"
                },
                {
                    "date": 1761369384242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -676,10 +676,10 @@\n         emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n         resultCount={resultCountInfo}\n         pagination={{\n           enabled: true,\n-          pageSize: 5,\n-          pageSizeOptions: [5, 15, 30],\n+          pageSize: 15,\n+          pageSizeOptions: [15, 30, 100],\n           showTotal: true\n         }}\n       />\n \n"
                },
                {
                    "date": 1761369814921,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -296,16 +296,21 @@\n       });\n       \n       console.log(`${currentPeriod} ê¸°ê°„ ë‚´ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n       \n+      // ìµœê·¼ ë“±ë¡ìˆœìœ¼ë¡œ ì •ë ¬ (createdAt ë‚´ë¦¼ì°¨ìˆœ)\n+      const sortedEnrollments = filteredByDate.sort((a, b) => \n+        new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n+      );\n+      \n       console.log('=== CourseHistory ìµœì¢… ë°ì´í„° ì„¤ì • ===');\n-      console.log('filteredByDate ê°œìˆ˜:', filteredByDate.length);\n-      if (filteredByDate.length > 0) {\n-        console.log('ì²« ë²ˆì§¸ ìˆ˜ê°• ì´ë ¥:', filteredByDate[0]);\n+      console.log('sortedEnrollments ê°œìˆ˜:', sortedEnrollments.length);\n+      if (sortedEnrollments.length > 0) {\n+        console.log('ì²« ë²ˆì§¸ ìˆ˜ê°• ì´ë ¥:', sortedEnrollments[0]);\n       }\n       \n-      setCourseEnrollments(filteredByDate);\n-      setFilteredEnrollments(filteredByDate);\n+      setCourseEnrollments(sortedEnrollments);\n+      setFilteredEnrollments(sortedEnrollments);\n       \n       console.log('ìˆ˜ê°• ì´ë ¥ ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ');\n     } catch (error) {\n       console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n"
                },
                {
                    "date": 1761458892719,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -500,9 +500,9 @@\n       render: (value, record) => (\n         <div>\n           <div>{record.productName}</div>\n           <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-            {record.productPrice.toLocaleString()}ì›\n+            ID: {record.productId.slice(-8)}\n           </div>\n         </div>\n       )\n     },\n@@ -519,8 +519,24 @@\n         </div>\n       )\n     },\n     {\n+      key: 'productPrice',\n+      title: 'ìƒí’ˆê¸ˆì•¡',\n+      width: '100px',\n+      align: 'right' as const,\n+      render: (value, record) => (\n+        <div style={{ \n+          textAlign: 'right',\n+          fontSize: '14px',\n+          fontWeight: '600',\n+          color: AppColors.onBackground\n+        }}>\n+          {record.productPrice.toLocaleString()}ì›\n+        </div>\n+      )\n+    },\n+    {\n       key: 'progress',\n       title: 'ì§„í–‰ìƒí™©',\n       width: '120px',\n       render: (value, record) => (\n@@ -546,16 +562,27 @@\n       align: 'right' as const,\n       render: (value, record) => (\n         <PriceInfo>\n           <PaidAmount>\n-            {record.paidAmount.toLocaleString()}ì›\n+            ì ìš©: {record.paidAmount.toLocaleString()}ì›\n           </PaidAmount>\n           <UnpaidAmount $hasUnpaid={record.unpaidAmount > 0}>\n             {record.unpaidAmount > 0 ? \n               `ë¯¸ìˆ˜: ${record.unpaidAmount.toLocaleString()}ì›` : \n               'ì™„ë‚©'\n             }\n           </UnpaidAmount>\n+          {record.productPrice !== record.paidAmount && record.unpaidAmount === 0 && (\n+            <div style={{ \n+              fontSize: '11px', \n+              color: record.paidAmount > record.productPrice ? '#dc3545' : '#28a745',\n+              marginTop: '2px'\n+            }}>\n+              {record.paidAmount > record.productPrice ? 'ì¶”ê°€ìˆ˜ë‚©' : 'í• ì¸ì ìš©'}\n+              {record.paidAmount > record.productPrice ? '+' : ''}\n+              {(record.paidAmount - record.productPrice).toLocaleString()}ì›\n+            </div>\n+          )}\n         </PriceInfo>\n       )\n     },\n     {\n"
                },
                {
                    "date": 1761459201960,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -562,25 +562,28 @@\n       align: 'right' as const,\n       render: (value, record) => (\n         <PriceInfo>\n           <PaidAmount>\n-            ì ìš©: {record.paidAmount.toLocaleString()}ì›\n+            ì ìš©: {record.appliedPrice.toLocaleString()}ì›\n           </PaidAmount>\n+          <div style={{ fontSize: '12px', color: AppColors.onInput1, marginTop: '2px' }}>\n+            ìˆ˜ë‚©: {record.paidAmount.toLocaleString()}ì›\n+          </div>\n           <UnpaidAmount $hasUnpaid={record.unpaidAmount > 0}>\n             {record.unpaidAmount > 0 ? \n               `ë¯¸ìˆ˜: ${record.unpaidAmount.toLocaleString()}ì›` : \n               'ì™„ë‚©'\n             }\n           </UnpaidAmount>\n-          {record.productPrice !== record.paidAmount && record.unpaidAmount === 0 && (\n+          {record.productPrice !== record.appliedPrice && (\n             <div style={{ \n               fontSize: '11px', \n-              color: record.paidAmount > record.productPrice ? '#dc3545' : '#28a745',\n+              color: record.appliedPrice > record.productPrice ? '#dc3545' : '#28a745',\n               marginTop: '2px'\n             }}>\n-              {record.paidAmount > record.productPrice ? 'ì¶”ê°€ìˆ˜ë‚©' : 'í• ì¸ì ìš©'}\n-              {record.paidAmount > record.productPrice ? '+' : ''}\n-              {(record.paidAmount - record.productPrice).toLocaleString()}ì›\n+              {record.appliedPrice > record.productPrice ? 'ì¶”ê°€' : 'í• ì¸'}\n+              {record.appliedPrice > record.productPrice ? '+' : ''}\n+              {(record.appliedPrice - record.productPrice).toLocaleString()}ì›\n             </div>\n           )}\n         </PriceInfo>\n       )\n"
                },
                {
                    "date": 1761459341689,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -562,9 +562,9 @@\n       align: 'right' as const,\n       render: (value, record) => (\n         <PriceInfo>\n           <PaidAmount>\n-            ì ìš©: {record.appliedPrice.toLocaleString()}ì›\n+            ì ìš©: {(record.appliedPrice || record.paidAmount).toLocaleString()}ì›\n           </PaidAmount>\n           <div style={{ fontSize: '12px', color: AppColors.onInput1, marginTop: '2px' }}>\n             ìˆ˜ë‚©: {record.paidAmount.toLocaleString()}ì›\n           </div>\n@@ -573,9 +573,9 @@\n               `ë¯¸ìˆ˜: ${record.unpaidAmount.toLocaleString()}ì›` : \n               'ì™„ë‚©'\n             }\n           </UnpaidAmount>\n-          {record.productPrice !== record.appliedPrice && (\n+          {record.appliedPrice && record.productPrice !== record.appliedPrice && (\n             <div style={{ \n               fontSize: '11px', \n               color: record.appliedPrice > record.productPrice ? '#dc3545' : '#28a745',\n               marginTop: '2px'\n"
                },
                {
                    "date": 1761914622493,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n import Modal from '../../../components/Modal';\n import CustomDropdown from '../../../components/CustomDropdown';\n import DataTable, { type TableColumn } from '../../../components/DataTable';\n import CourseRegistrationModal from './CourseRegistrationModal';\n+import CourseTransferModal from './CourseTransferModal';\n \n const PageContainer = styled.div`\n   width: 100%;\n `;\n@@ -161,8 +162,12 @@\n \n   // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n   const [showRegistrationModal, setShowRegistrationModal] = useState<boolean>(false);\n \n+  // ì–‘ë„ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n+  const [showTransferModal, setShowTransferModal] = useState<boolean>(false);\n+  const [selectedForTransfer, setSelectedForTransfer] = useState<CourseEnrollment | null>(null);\n+\n   // ìƒˆ ìˆ˜ê°• ë“±ë¡ ì„±ê³µ ì²˜ë¦¬\n   const handleRegistrationSuccess = async () => {\n     // ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n     await loadCourseEnrollments();\n@@ -181,8 +186,30 @@\n   const handleCloseRegistrationModal = () => {\n     setShowRegistrationModal(false);\n   };\n \n+  // ì–‘ë„ ëª¨ë‹¬ ì—´ê¸°\n+  const handleOpenTransferModal = (enrollment: CourseEnrollment) => {\n+    setSelectedForTransfer(enrollment);\n+    setShowTransferModal(true);\n+  };\n+\n+  // ì–‘ë„ ëª¨ë‹¬ ë‹«ê¸°\n+  const handleCloseTransferModal = () => {\n+    setShowTransferModal(false);\n+    setSelectedForTransfer(null);\n+  };\n+\n+  // ì–‘ë„ ì„±ê³µ ì²˜ë¦¬\n+  const handleTransferSuccess = async () => {\n+    // ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n+    await loadCourseEnrollments();\n+    // í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n+    setTimeout(() => {\n+      handleSearch();\n+    }, 100);\n+  };\n+\n   // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n   const loadUnpaidMetaInfo = useCallback(async () => {\n     try {\n       const allEnrollments = await dbManager.getAllCourseEnrollments();\n@@ -709,8 +736,9 @@\n         loading={loading}\n         emptyText=\"ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤\"\n         emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n         resultCount={resultCountInfo}\n+        onRowClick={(record) => handleOpenTransferModal(record)}\n         pagination={{\n           enabled: true,\n           pageSize: 15,\n           pageSizeOptions: [15, 30, 100],\n@@ -806,12 +834,13 @@\n         />\n       )}\n \n       {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n-      <CourseRegistrationModal\n-        isOpen={showRegistrationModal}\n-        onClose={handleCloseRegistrationModal}\n-        onSuccess={handleRegistrationSuccess}\n+      <CourseTransferModal\n+        isOpen={showTransferModal}\n+        onClose={handleCloseTransferModal}\n+        onSuccess={handleTransferSuccess}\n+        courseEnrollment={selectedForTransfer}\n       />\n     </PageContainer>\n   );\n };\n"
                },
                {
                    "date": 1761914695546,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -129,14 +129,33 @@\n   background: #fff3cd;\n   border: 1px solid #ffeaa7;\n   border-radius: 8px;\n   padding: 12px;\n-  margin: 16px 0;\n   color: #856404;\n   font-size: 14px;\n   text-align: center;\n `;\n \n+const TransferBadge = styled.span<{ $type: 'transferred' | 'received' }>`\n+  display: inline-flex;\n+  align-items: center;\n+  gap: 4px;\n+  padding: 2px 6px;\n+  border-radius: 4px;\n+  font-size: 10px;\n+  font-weight: 600;\n+  background: ${props => props.$type === 'transferred' ? '#fff3e0' : '#e8f5e8'};\n+  color: ${props => props.$type === 'transferred' ? '#ef6c00' : '#2e7d32'};\n+  border: 1px solid ${props => props.$type === 'transferred' ? '#ffcc02' : '#81c784'};\n+  margin-bottom: 2px;\n+`;\n+\n+const MemberNameContainer = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  gap: 2px;\n+`;\n+\n const CourseHistory: React.FC = () => {\n   const [searchQuery, setSearchQuery] = useState<string>('');\n   const [courseEnrollments, setCourseEnrollments] = useState<CourseEnrollment[]>([]);\n   const [filteredEnrollments, setFilteredEnrollments] = useState<CourseEnrollment[]>([]);\n@@ -484,8 +503,41 @@\n   const formatDate = (date: Date | null | undefined) => {\n     return date ? new Date(date).toLocaleDateString() : '-';\n   };\n \n+  // ì–‘ë„ ì •ë³´ í™•ì¸ í•¨ìˆ˜\n+  const getTransferInfo = (enrollment: CourseEnrollment) => {\n+    if (!enrollment.notes) return null;\n+    \n+    const notes = enrollment.notes.toLowerCase();\n+    \n+    if (notes.includes('[ì–‘ë„]')) {\n+      // ì–‘ë„í•œ ê²½ìš°\n+      const match = enrollment.notes.match(/\\[ì–‘ë„\\].*?(\\d{4}\\.\\s*\\d{1,2}\\.\\s*\\d{1,2}).*?(.+?)ë‹˜ì—ê²Œ ì–‘ë„/);\n+      if (match) {\n+        return {\n+          type: 'transferred' as const,\n+          date: match[1],\n+          memberName: match[2]\n+        };\n+      }\n+    }\n+    \n+    if (notes.includes('[ì–‘ë„ë°›ìŒ]')) {\n+      // ì–‘ë„ë°›ì€ ê²½ìš°\n+      const match = enrollment.notes.match(/\\[ì–‘ë„ë°›ìŒ\\].*?(\\d{4}\\.\\s*\\d{1,2}\\.\\s*\\d{1,2}).*?(.+?)ë‹˜ìœ¼ë¡œë¶€í„° ì–‘ë„ë°›ìŒ/);\n+      if (match) {\n+        return {\n+          type: 'received' as const,\n+          date: match[1],\n+          memberName: match[2]\n+        };\n+      }\n+    }\n+    \n+    return null;\n+  };\n+\n   const getProgressInfo = (enrollment: CourseEnrollment) => {\n     if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n       const remaining = enrollment.sessionCount - (enrollment.completedSessions || 0);\n       return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n@@ -517,9 +569,25 @@\n   const columns: TableColumn<CourseEnrollment>[] = [\n     {\n       key: 'memberName',\n       title: 'íšŒì›ëª…',\n-      width: '120px'\n+      width: '120px',\n+      render: (value, record) => {\n+        const transferInfo = getTransferInfo(record);\n+        return (\n+          <MemberNameContainer>\n+            <div>{record.memberName}</div>\n+            {transferInfo && (\n+              <TransferBadge $type={transferInfo.type}>\n+                {transferInfo.type === 'transferred' ? \n+                  `â†— ${transferInfo.memberName}ë‹˜ê»˜ ì–‘ë„` : \n+                  `â†˜ ${transferInfo.memberName}ë‹˜ê»˜ì„œ ì–‘ë„ë°›ìŒ`\n+                }\n+              </TransferBadge>\n+            )}\n+          </MemberNameContainer>\n+        );\n+      }\n     },\n     {\n       key: 'productName',\n       title: 'ìƒí’ˆëª…',\n@@ -618,18 +686,31 @@\n     {\n       key: 'connection',\n       title: 'ì—°ê²°ì •ë³´',\n       width: '140px',\n-      render: (value, record) => (\n-        <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-          <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n-            ìˆ˜ê°• ID: {record.id.slice(-8)}\n+      render: (value, record) => {\n+        const transferInfo = getTransferInfo(record);\n+        return (\n+          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+            <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n+              ìˆ˜ê°• ID: {record.id.slice(-8)}\n+            </div>\n+            {transferInfo && (\n+              <div style={{ \n+                marginTop: '2px', \n+                fontSize: '10px',\n+                color: transferInfo.type === 'transferred' ? '#ef6c00' : '#2e7d32',\n+                fontWeight: '600'\n+              }}>\n+                {transferInfo.type === 'transferred' ? 'ì–‘ë„í•¨' : 'ì–‘ë„ë°›ìŒ'} ({transferInfo.date})\n+              </div>\n+            )}\n+            <div style={{ marginTop: '2px', fontSize: '11px' }}>\n+              ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n+            </div>\n           </div>\n-          <div style={{ marginTop: '2px', fontSize: '11px' }}>\n-            ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n-          </div>\n-        </div>\n-      )\n+        );\n+      }\n     },\n     {\n       key: 'period',\n       title: 'ìˆ˜ê°•ê¸°ê°„',\n@@ -649,27 +730,45 @@\n       key: 'enrollmentStatus',\n       title: 'ìƒíƒœ',\n       width: '80px',\n       align: 'center' as const,\n-      render: (value, record) => (\n-        <StatusBadge \n-          $status={record.enrollmentStatus}\n-          $clickable={record.enrollmentStatus === 'unpaid'}\n-          onClick={record.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(record) : undefined}\n-          title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n-        >\n-          {(() => {\n-            switch (record.enrollmentStatus) {\n-              case 'active': return 'ìˆ˜ê°•ì¤‘';\n-              case 'completed': return 'ì™„ë£Œ';\n-              case 'suspended': return 'ì¤‘ë‹¨';\n-              case 'cancelled': return 'ì·¨ì†Œ';\n-              case 'unpaid': return 'ë¯¸ìˆ˜';\n-              default: return record.enrollmentStatus;\n-            }\n-          })()}\n-        </StatusBadge>\n-      )\n+      render: (value, record) => {\n+        const transferInfo = getTransferInfo(record);\n+        const isTransferCancelled = record.enrollmentStatus === 'cancelled' && transferInfo?.type === 'transferred';\n+        \n+        return (\n+          <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '2px' }}>\n+            <StatusBadge \n+              $status={record.enrollmentStatus}\n+              $clickable={record.enrollmentStatus === 'unpaid'}\n+              onClick={record.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(record) : undefined}\n+              title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n+            >\n+              {(() => {\n+                if (isTransferCancelled) return 'ì–‘ë„ì™„ë£Œ';\n+                switch (record.enrollmentStatus) {\n+                  case 'active': return 'ìˆ˜ê°•ì¤‘';\n+                  case 'completed': return 'ì™„ë£Œ';\n+                  case 'suspended': return 'ì¤‘ë‹¨';\n+                  case 'cancelled': return 'ì·¨ì†Œ';\n+                  case 'unpaid': return 'ë¯¸ìˆ˜';\n+                  default: return record.enrollmentStatus;\n+                }\n+              })()}\n+            </StatusBadge>\n+            {transferInfo?.type === 'received' && (\n+              <div style={{ \n+                fontSize: '9px', \n+                color: '#2e7d32', \n+                fontWeight: '600',\n+                textAlign: 'center'\n+              }}>\n+                ì–‘ë„ë°›ìŒ\n+              </div>\n+            )}\n+          </div>\n+        );\n+      }\n     }\n   ];\n \n   // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n"
                },
                {
                    "date": 1761914752330,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -686,31 +686,18 @@\n     {\n       key: 'connection',\n       title: 'ì—°ê²°ì •ë³´',\n       width: '140px',\n-      render: (value, record) => {\n-        const transferInfo = getTransferInfo(record);\n-        return (\n-          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-            <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n-              ìˆ˜ê°• ID: {record.id.slice(-8)}\n-            </div>\n-            {transferInfo && (\n-              <div style={{ \n-                marginTop: '2px', \n-                fontSize: '10px',\n-                color: transferInfo.type === 'transferred' ? '#ef6c00' : '#2e7d32',\n-                fontWeight: '600'\n-              }}>\n-                {transferInfo.type === 'transferred' ? 'ì–‘ë„í•¨' : 'ì–‘ë„ë°›ìŒ'} ({transferInfo.date})\n-              </div>\n-            )}\n-            <div style={{ marginTop: '2px', fontSize: '11px' }}>\n-              ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n-            </div>\n+      render: (value, record) => (\n+        <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+          <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n+            ìˆ˜ê°• ID: {record.id.slice(-8)}\n           </div>\n-        );\n-      }\n+          <div style={{ marginTop: '2px', fontSize: '11px' }}>\n+            ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n+          </div>\n+        </div>\n+      )\n     },\n     {\n       key: 'period',\n       title: 'ìˆ˜ê°•ê¸°ê°„',\n@@ -730,45 +717,27 @@\n       key: 'enrollmentStatus',\n       title: 'ìƒíƒœ',\n       width: '80px',\n       align: 'center' as const,\n-      render: (value, record) => {\n-        const transferInfo = getTransferInfo(record);\n-        const isTransferCancelled = record.enrollmentStatus === 'cancelled' && transferInfo?.type === 'transferred';\n-        \n-        return (\n-          <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '2px' }}>\n-            <StatusBadge \n-              $status={record.enrollmentStatus}\n-              $clickable={record.enrollmentStatus === 'unpaid'}\n-              onClick={record.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(record) : undefined}\n-              title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n-            >\n-              {(() => {\n-                if (isTransferCancelled) return 'ì–‘ë„ì™„ë£Œ';\n-                switch (record.enrollmentStatus) {\n-                  case 'active': return 'ìˆ˜ê°•ì¤‘';\n-                  case 'completed': return 'ì™„ë£Œ';\n-                  case 'suspended': return 'ì¤‘ë‹¨';\n-                  case 'cancelled': return 'ì·¨ì†Œ';\n-                  case 'unpaid': return 'ë¯¸ìˆ˜';\n-                  default: return record.enrollmentStatus;\n-                }\n-              })()}\n-            </StatusBadge>\n-            {transferInfo?.type === 'received' && (\n-              <div style={{ \n-                fontSize: '9px', \n-                color: '#2e7d32', \n-                fontWeight: '600',\n-                textAlign: 'center'\n-              }}>\n-                ì–‘ë„ë°›ìŒ\n-              </div>\n-            )}\n-          </div>\n-        );\n-      }\n+      render: (value, record) => (\n+        <StatusBadge \n+          $status={record.enrollmentStatus}\n+          $clickable={record.enrollmentStatus === 'unpaid'}\n+          onClick={record.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(record) : undefined}\n+          title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n+        >\n+          {(() => {\n+            switch (record.enrollmentStatus) {\n+              case 'active': return 'ìˆ˜ê°•ì¤‘';\n+              case 'completed': return 'ì™„ë£Œ';\n+              case 'suspended': return 'ì¤‘ë‹¨';\n+              case 'cancelled': return 'ì·¨ì†Œ';\n+              case 'unpaid': return 'ë¯¸ìˆ˜';\n+              default: return record.enrollmentStatus;\n+            }\n+          })()}\n+        </StatusBadge>\n+      )\n     }\n   ];\n \n   // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n"
                },
                {
                    "date": 1761914877764,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -633,13 +633,32 @@\n     {\n       key: 'progress',\n       title: 'ì§„í–‰ìƒí™©',\n       width: '120px',\n-      render: (value, record) => (\n-        <ProgressInfo>\n-          {getProgressInfo(record)}\n-        </ProgressInfo>\n-      )\n+      render: (value, record) => {\n+        // ì·¨ì†Œëœ ìˆ˜ê°•ê¶Œì€ ì§„í–‰ìƒí™©ì„ í‘œì‹œí•˜ì§€ ì•ŠìŒ\n+        if (record.enrollmentStatus === 'cancelled') {\n+          const transferInfo = getTransferInfo(record);\n+          if (transferInfo?.type === 'transferred') {\n+            return (\n+              <ProgressInfo style={{ color: '#ef6c00' }}>\n+                ì–‘ë„ ì™„ë£Œ\n+              </ProgressInfo>\n+            );\n+          }\n+          return (\n+            <ProgressInfo style={{ color: '#666' }}>\n+              ì·¨ì†Œë¨\n+            </ProgressInfo>\n+          );\n+        }\n+        \n+        return (\n+          <ProgressInfo>\n+            {getProgressInfo(record)}\n+          </ProgressInfo>\n+        );\n+      }\n     },\n     {\n       key: 'branchName',\n       title: 'ì§€ì ',\n@@ -804,9 +823,14 @@\n         loading={loading}\n         emptyText=\"ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤\"\n         emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n         resultCount={resultCountInfo}\n-        onRowClick={(record) => handleOpenTransferModal(record)}\n+        onRowClick={(record) => {\n+          // ì–‘ë„ ê°€ëŠ¥í•œ ìˆ˜ê°•ê¶Œë§Œ í´ë¦­ ê°€ëŠ¥ (active ë˜ëŠ” unpaid ìƒíƒœ)\n+          if (record.enrollmentStatus === 'active' || record.enrollmentStatus === 'unpaid') {\n+            handleOpenTransferModal(record);\n+          }\n+        }}\n         pagination={{\n           enabled: true,\n           pageSize: 15,\n           pageSizeOptions: [15, 30, 100],\n"
                },
                {
                    "date": 1762069695478,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -788,9 +788,9 @@\n   return (\n     <PageContainer>\n       {/* ìƒˆë¡œìš´ SearchArea ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© */}\n       <SearchArea\n-        metaContent={\n+        leftContent={\n           <div style={{ display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n             <Button onClick={handleOpenRegistrationModal}>\n               + ìƒˆ ìˆ˜ê°• ë“±ë¡\n             </Button>\n"
                },
                {
                    "date": 1762070993867,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,15 +9,15 @@\n import Modal from '../../../components/Modal';\n import CustomDropdown from '../../../components/CustomDropdown';\n import DataTable, { type TableColumn } from '../../../components/DataTable';\n import CourseRegistrationModal from './CourseRegistrationModal';\n-import CourseTransferModal from './CourseTransferModal';\n+import CourseManagementModal from './CourseManagementModal';\n \n const PageContainer = styled.div`\n   width: 100%;\n `;\n \n-const StatusBadge = styled.span<{ $status: 'active' | 'completed' | 'suspended' | 'cancelled' | 'unpaid'; $clickable?: boolean }>`\n+const StatusBadge = styled.span<{ $status: 'active' | 'completed' | 'suspended' | 'cancelled' | 'unpaid' | 'hold'; $clickable?: boolean }>`\n   padding: 4px 8px;\n   border-radius: 12px;\n   font-size: 12px;\n   font-weight: 500;\n@@ -27,8 +27,9 @@\n       case 'active': return '#e3f2fd';\n       case 'suspended': return '#fff3e0';\n       case 'cancelled': return '#fce4ec';\n       case 'unpaid': return '#fff2f2';\n+      case 'hold': return '#fff3e0';\n       default: return '#f5f5f5';\n     }\n   }};\n   color: ${props => {\n@@ -37,8 +38,9 @@\n       case 'active': return '#1565c0';\n       case 'suspended': return '#ef6c00';\n       case 'cancelled': return '#c2185b';\n       case 'unpaid': return '#8b1538';\n+      case 'hold': return '#ef6c00';\n       default: return '#424242';\n     }\n   }};\n   cursor: ${props => props.$clickable ? 'pointer' : 'default'};\n@@ -750,8 +752,9 @@\n               case 'completed': return 'ì™„ë£Œ';\n               case 'suspended': return 'ì¤‘ë‹¨';\n               case 'cancelled': return 'ì·¨ì†Œ';\n               case 'unpaid': return 'ë¯¸ìˆ˜';\n+              case 'hold': return 'í™€ë“œ';\n               default: return record.enrollmentStatus;\n             }\n           })()}\n         </StatusBadge>\n@@ -926,9 +929,9 @@\n         />\n       )}\n \n       {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n-      <CourseTransferModal\n+      <CourseManagementModal\n         isOpen={showTransferModal}\n         onClose={handleCloseTransferModal}\n         onSuccess={handleTransferSuccess}\n         courseEnrollment={selectedForTransfer}\n"
                },
                {
                    "date": 1762071099938,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -827,10 +827,10 @@\n         emptyText=\"ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤\"\n         emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n         resultCount={resultCountInfo}\n         onRowClick={(record) => {\n-          // ì–‘ë„ ê°€ëŠ¥í•œ ìˆ˜ê°•ê¶Œë§Œ í´ë¦­ ê°€ëŠ¥ (active ë˜ëŠ” unpaid ìƒíƒœ)\n-          if (record.enrollmentStatus === 'active' || record.enrollmentStatus === 'unpaid') {\n+          // ê´€ë¦¬ ê°€ëŠ¥í•œ ìˆ˜ê°•ê¶Œë§Œ í´ë¦­ ê°€ëŠ¥ (active, unpaid, hold ìƒíƒœ)\n+          if (record.enrollmentStatus === 'active' || record.enrollmentStatus === 'unpaid' || record.enrollmentStatus === 'hold') {\n             handleOpenTransferModal(record);\n           }\n         }}\n         pagination={{\n"
                },
                {
                    "date": 1763983196511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -353,8 +353,18 @@\n       console.log('=== CourseHistory ìµœì¢… ë°ì´í„° ì„¤ì • ===');\n       console.log('sortedEnrollments ê°œìˆ˜:', sortedEnrollments.length);\n       if (sortedEnrollments.length > 0) {\n         console.log('ì²« ë²ˆì§¸ ìˆ˜ê°• ì´ë ¥:', sortedEnrollments[0]);\n+        console.log('=== IndexedDB ìˆ˜ê°• ì´ë ¥ ìƒì„¸ ë¶„ì„ (ìµœê·¼ 5ê°œ) ===');\n+        sortedEnrollments.slice(0, 5).forEach((enrollment, index) => {\n+          console.log(`\\n[${index + 1}] ${enrollment.memberName} - ${enrollment.productName}`);\n+          console.log('  - programType:', enrollment.programType);\n+          console.log('  - startDate:', enrollment.startDate);\n+          console.log('  - endDate:', enrollment.endDate);\n+          console.log('  - createdAt:', enrollment.createdAt);\n+          console.log('  - sessionCount:', enrollment.sessionCount);\n+          console.log('  - ì „ì²´ ê°ì²´:', enrollment);\n+        });\n       }\n       \n       setCourseEnrollments(sortedEnrollments);\n       setFilteredEnrollments(sortedEnrollments);\n"
                },
                {
                    "date": 1763985096556,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -548,11 +548,20 @@\n     \n     return null;\n   };\n \n-  const getProgressInfo = (enrollment: CourseEnrollment) => {\n+  // ì´ë²¤íŠ¸ ì†Œì‹±: ì™„ë£Œ ì„¸ì…˜ ìºì‹œ\n+  const [enrollmentSessions, setEnrollmentSessions] = useState<Map<string, number>>(new Map());\n+\n+  const getProgressInfo = async (enrollment: CourseEnrollment) => {\n     if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n-      const remaining = enrollment.sessionCount - (enrollment.completedSessions || 0);\n+      // ì´ë²¤íŠ¸ ì†Œì‹±: ì‹¤ì‹œê°„ ì™„ë£Œ íšŸìˆ˜ ê³„ì‚°\n+      let completedSessions = enrollmentSessions.get(enrollment.id);\n+      if (completedSessions === undefined) {\n+        completedSessions = await getCompletedSessions(enrollment.id);\n+        setEnrollmentSessions(prev => new Map(prev).set(enrollment.id, completedSessions!));\n+      }\n+      const remaining = enrollment.sessionCount - completedSessions;\n       return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n     } else if (enrollment.programType === 'ê¸°ê°„ì œ' && enrollment.endDate) {\n       const today = new Date();\n       const endDate = new Date(enrollment.endDate);\n"
                },
                {
                    "date": 1763985222164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -177,8 +177,11 @@\n   \n   // ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n   const [showCompleteModal, setShowCompleteModal] = useState<boolean>(false);\n   const [selectedEnrollment, setSelectedEnrollment] = useState<CourseEnrollment | null>(null);\n+  \n+  // ì„¸ì…˜ ì •ë³´ ìºì‹œ (enrollmentId -> progressInfo)\n+  const [enrollmentSessions, setEnrollmentSessions] = useState<Map<string, string>>(new Map());\n   const [isProcessing, setIsProcessing] = useState<boolean>(false);\n   const [selectedPaymentMethod, setSelectedPaymentMethod] = useState<string>('card');\n \n   // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n@@ -368,8 +371,16 @@\n       \n       setCourseEnrollments(sortedEnrollments);\n       setFilteredEnrollments(sortedEnrollments);\n       \n+      // ì„¸ì…˜ ì •ë³´ ë¯¸ë¦¬ ê³„ì‚°\n+      const sessionsMap = new Map<string, string>();\n+      for (const enrollment of sortedEnrollments) {\n+        const progressInfo = await getProgressInfo(enrollment);\n+        sessionsMap.set(enrollment.id!, progressInfo);\n+      }\n+      setEnrollmentSessions(sessionsMap);\n+      \n       console.log('ìˆ˜ê°• ì´ë ¥ ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ');\n     } catch (error) {\n       console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n     } finally {\n@@ -672,11 +683,13 @@\n             </ProgressInfo>\n           );\n         }\n         \n+        // ìºì‹œëœ ì„¸ì…˜ ì •ë³´ ì‚¬ìš©\n+        const progressInfo = enrollmentSessions.get(record.id!) || '-';\n         return (\n           <ProgressInfo>\n-            {getProgressInfo(record)}\n+            {progressInfo}\n           </ProgressInfo>\n         );\n       }\n     },\n"
                },
                {
                    "date": 1763985298846,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -559,19 +559,12 @@\n     \n     return null;\n   };\n \n-  // ì´ë²¤íŠ¸ ì†Œì‹±: ì™„ë£Œ ì„¸ì…˜ ìºì‹œ\n-  const [enrollmentSessions, setEnrollmentSessions] = useState<Map<string, number>>(new Map());\n-\n   const getProgressInfo = async (enrollment: CourseEnrollment) => {\n     if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n       // ì´ë²¤íŠ¸ ì†Œì‹±: ì‹¤ì‹œê°„ ì™„ë£Œ íšŸìˆ˜ ê³„ì‚°\n-      let completedSessions = enrollmentSessions.get(enrollment.id);\n-      if (completedSessions === undefined) {\n-        completedSessions = await getCompletedSessions(enrollment.id);\n-        setEnrollmentSessions(prev => new Map(prev).set(enrollment.id, completedSessions!));\n-      }\n+      const completedSessions = await getCompletedSessions(enrollment.id);\n       const remaining = enrollment.sessionCount - completedSessions;\n       return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n     } else if (enrollment.programType === 'ê¸°ê°„ì œ' && enrollment.endDate) {\n       const today = new Date();\n"
                },
                {
                    "date": 1763985513698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -246,8 +246,32 @@\n       console.error('ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);\n     }\n   }, []);\n \n+  // ì§„í–‰ìƒí™© ê³„ì‚° í•¨ìˆ˜\n+  const getProgressInfo = useCallback(async (enrollment: CourseEnrollment): Promise<string> => {\n+    if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n+      // ì´ë²¤íŠ¸ ì†Œì‹±: ì‹¤ì‹œê°„ ì™„ë£Œ íšŸìˆ˜ ê³„ì‚°\n+      const completedSessions = await getCompletedSessions(enrollment.id);\n+      const remaining = enrollment.sessionCount - completedSessions;\n+      return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n+    } else if (enrollment.programType === 'ê¸°ê°„ì œ' && enrollment.endDate) {\n+      const today = new Date();\n+      const endDate = new Date(enrollment.endDate);\n+      const timeDiff = endDate.getTime() - today.getTime();\n+      const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n+      \n+      if (daysDiff > 0) {\n+        return `${daysDiff}ì¼ ë‚¨ìŒ`;\n+      } else if (daysDiff === 0) {\n+        return 'ì˜¤ëŠ˜ ì¢…ë£Œ';\n+      } else {\n+        return `${Math.abs(daysDiff)}ì¼ ê²½ê³¼`;\n+      }\n+    }\n+    return 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n+  }, []);\n+\n   // ê¸°ê°„ë³„ ê²€ìƒ‰ ë²”ìœ„ ê³„ì‚°\n   const getDateRange = useCallback(() => {\n     const today = new Date();\n     const startDate = new Date();\n@@ -559,31 +583,8 @@\n     \n     return null;\n   };\n \n-  const getProgressInfo = async (enrollment: CourseEnrollment) => {\n-    if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n-      // ì´ë²¤íŠ¸ ì†Œì‹±: ì‹¤ì‹œê°„ ì™„ë£Œ íšŸìˆ˜ ê³„ì‚°\n-      const completedSessions = await getCompletedSessions(enrollment.id);\n-      const remaining = enrollment.sessionCount - completedSessions;\n-      return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n-    } else if (enrollment.programType === 'ê¸°ê°„ì œ' && enrollment.endDate) {\n-      const today = new Date();\n-      const endDate = new Date(enrollment.endDate);\n-      const timeDiff = endDate.getTime() - today.getTime();\n-      const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n-      \n-      if (daysDiff > 0) {\n-        return `${daysDiff}ì¼ ë‚¨ìŒ`;\n-      } else if (daysDiff === 0) {\n-        return 'ì˜¤ëŠ˜ ì¢…ë£Œ';\n-      } else {\n-        return `${Math.abs(daysDiff)}ì¼ ê²½ê³¼`;\n-      }\n-    }\n-    return 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n-  };\n-\n   // ê²°ì œ ë°©ë²• ì˜µì…˜\n   const paymentMethodOptions = [\n     { value: 'card', label: 'ì¹´ë“œ' },\n     { value: 'cash', label: 'í˜„ê¸ˆ' },\n"
                },
                {
                    "date": 1763985565359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -409,9 +409,9 @@\n       console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n     } finally {\n       setLoading(false);\n     }\n-  }, [loadUnpaidMetaInfo, selectedPeriod, customStartDate, customEndDate]);\n+  }, [loadUnpaidMetaInfo, selectedPeriod, customStartDate, customEndDate, getProgressInfo]);\n \n   // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì´ˆê¸° ë°ì´í„° ë¡œë“œ (1ê°œì›” ê¸°ì¤€)\n   useEffect(() => {\n     const initializeData = async () => {\n"
                },
                {
                    "date": 1763985619685,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import { toast } from 'react-toastify';\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n import { dbManager, type CourseEnrollment } from '../../../utils/indexedDB';\n+import { getCompletedSessions } from '../../../utils/db/ReservationHelper';\n import { SearchArea, type PeriodOption } from '../../../components/SearchArea';\n import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n import Modal from '../../../components/Modal';\n import CustomDropdown from '../../../components/CustomDropdown';\n"
                },
                {
                    "date": 1765685728931,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -468,12 +468,30 @@\n \n     try {\n       setIsProcessing(true);\n \n-      // 1. ìˆ˜ê°• ì´ë ¥ì˜ ìƒíƒœë¥¼ 'completed'ë¡œ ë³€ê²½í•˜ê³  ë¯¸ìˆ˜ê¸ˆì•¡ì„ 0ìœ¼ë¡œ ì„¤ì •\n+      // 1. ë¯¸ìˆ˜ ì™„ë£Œ í›„ ìƒíƒœ ê²°ì • ë¡œì§\n+      let newEnrollmentStatus: 'active' | 'completed' = 'active'; // ê¸°ë³¸ì ìœ¼ë¡œ í™œì„± ìƒíƒœ\n+      \n+      // ìˆ˜ê°• ì™„ë£Œ ì¡°ê±´ ì²´í¬\n+      if (selectedEnrollment.programType === 'íšŸìˆ˜ì œ' && selectedEnrollment.sessionCount) {\n+        // íšŸìˆ˜ì œ: ì™„ë£Œ íšŸìˆ˜ê°€ ì´ íšŸìˆ˜ì™€ ê°™ê±°ë‚˜ ë§ìœ¼ë©´ ì™„ë£Œ\n+        const completedSessions = selectedEnrollment.completedSessions || 0;\n+        if (completedSessions >= selectedEnrollment.sessionCount) {\n+          newEnrollmentStatus = 'completed';\n+        }\n+      } else if (selectedEnrollment.programType === 'ê¸°ê°„ì œ' && selectedEnrollment.endDate) {\n+        // ê¸°ê°„ì œ: ì¢…ë£Œì¼ì´ ì§€ë‚¬ìœ¼ë©´ ì™„ë£Œ\n+        const today = new Date();\n+        const endDate = new Date(selectedEnrollment.endDate);\n+        if (endDate <= today) {\n+          newEnrollmentStatus = 'completed';\n+        }\n+      }\n+\n       const updatedEnrollment: CourseEnrollment = {\n         ...selectedEnrollment,\n-        enrollmentStatus: 'completed',\n+        enrollmentStatus: newEnrollmentStatus, // ì¡°ê±´ì— ë”°ë¼ active ë˜ëŠ” completed\n         paidAmount: selectedEnrollment.productPrice, // ìƒí’ˆ ì „ì²´ ê¸ˆì•¡ìœ¼ë¡œ ì„¤ì •\n         unpaidAmount: 0\n       };\n \n"
                },
                {
                    "date": 1765686004147,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,9 +157,21 @@\n   flex-direction: column;\n   gap: 2px;\n `;\n \n-const CourseHistory: React.FC = () => {\n+interface CourseHistoryProps {\n+  preselectedMemberId?: string;\n+  showUnpaidOnly?: boolean;\n+  onUnpaidComplete?: () => void;\n+  isModal?: boolean;\n+}\n+\n+const CourseHistory: React.FC<CourseHistoryProps> = ({ \n+  preselectedMemberId, \n+  showUnpaidOnly = false, \n+  onUnpaidComplete,\n+  isModal = false \n+}) => {\n   const [searchQuery, setSearchQuery] = useState<string>('');\n   const [courseEnrollments, setCourseEnrollments] = useState<CourseEnrollment[]>([]);\n   const [filteredEnrollments, setFilteredEnrollments] = useState<CourseEnrollment[]>([]);\n   const [loading, setLoading] = useState<boolean>(true);\n@@ -169,9 +181,9 @@\n   const [customStartDate, setCustomStartDate] = useState<string>('');\n   const [customEndDate, setCustomEndDate] = useState<string>('');\n   \n   // ë¯¸ìˆ˜ í•„í„° ê´€ë ¨ ìƒíƒœ\n-  const [showUnpaidOnly, setShowUnpaidOnly] = useState<boolean>(false);\n+  const [showUnpaidOnlyState, setShowUnpaidOnlyState] = useState<boolean>(showUnpaidOnly);\n   const [unpaidMetaInfo, setUnpaidMetaInfo] = useState<{ unpaidCourseCount: number; totalUnpaidAmount: number }>({\n     unpaidCourseCount: 0,\n     totalUnpaidAmount: 0\n   });\n@@ -365,14 +377,22 @@\n           rangeStartDate.setMonth(today.getMonth() - 1);\n           dateRange = { start: rangeStartDate, end: today };\n       }\n       \n-      const filteredByDate = allEnrollments.filter(enrollment => {\n+      let filteredByDate = allEnrollments.filter(enrollment => {\n         const enrollmentDate = new Date(enrollment.createdAt);\n         return enrollmentDate >= dateRange.start && enrollmentDate <= dateRange.end;\n       });\n       \n-      console.log(`${currentPeriod} ê¸°ê°„ ë‚´ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n+      // íŠ¹ì • íšŒì› IDê°€ ì§€ì •ëœ ê²½ìš° í•´ë‹¹ íšŒì›ì˜ ìˆ˜ê°• ì´ë ¥ë§Œ í•„í„°ë§\n+      if (preselectedMemberId) {\n+        filteredByDate = filteredByDate.filter(enrollment => \n+          enrollment.memberId === preselectedMemberId\n+        );\n+        console.log(`íšŒì› ID ${preselectedMemberId}ì˜ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n+      } else {\n+        console.log(`${currentPeriod} ê¸°ê°„ ë‚´ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n+      }\n       \n       // ìµœê·¼ ë“±ë¡ìˆœìœ¼ë¡œ ì •ë ¬ (createdAt ë‚´ë¦¼ì°¨ìˆœ)\n       const sortedEnrollments = filteredByDate.sort((a, b) => \n         new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n@@ -425,9 +445,9 @@\n   const applyFilters = useCallback(() => {\n     let filtered = courseEnrollments;\n     \n     // ë¯¸ìˆ˜ í•„í„° ì ìš©\n-    if (showUnpaidOnly) {\n+    if (showUnpaidOnlyState) {\n       filtered = filtered.filter(enrollment => enrollment.enrollmentStatus === 'unpaid');\n     }\n     \n     // í…ìŠ¤íŠ¸ ê²€ìƒ‰\n@@ -442,9 +462,9 @@\n       );\n     }\n     \n     setFilteredEnrollments(filtered);\n-  }, [courseEnrollments, showUnpaidOnly, searchQuery]);\n+  }, [courseEnrollments, showUnpaidOnlyState, searchQuery]);\n \n   // ë°ì´í„°ë‚˜ í•„í„° ì¡°ê±´ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•„í„° ì ìš©\n   useEffect(() => {\n     applyFilters();\n@@ -550,8 +570,13 @@\n       // 5. ëª¨ë‹¬ ë‹«ê¸°\n       setShowCompleteModal(false);\n       setSelectedEnrollment(null);\n       \n+      // 6. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— ì™„ë£Œ ì•Œë¦¼\n+      if (onUnpaidComplete) {\n+        onUnpaidComplete();\n+      }\n+      \n     } catch (error) {\n       console.error('ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n       toast.error('ì™„ë£Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n     } finally {\n@@ -809,9 +834,9 @@\n \n   // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n   const resultCountInfo = (\n     <>\n-      {showUnpaidOnly ? 'ë¯¸ìˆ˜ ìˆ˜ê°•: ' : ''}{filteredEnrollments.length}ê±´ \n+      {showUnpaidOnlyState ? 'ë¯¸ìˆ˜ ìˆ˜ê°•: ' : ''}{filteredEnrollments.length}ê±´ \n       (ì™„ë£Œ: {filteredEnrollments.filter(e => e.enrollmentStatus === 'completed').length}ê±´, \n       ë¯¸ìˆ˜: {filteredEnrollments.filter(e => e.enrollmentStatus === 'unpaid').length}ê±´)\n       <br />\n       <span style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n@@ -834,20 +859,21 @@\n   }\n \n   return (\n     <PageContainer>\n-      {/* ìƒˆë¡œìš´ SearchArea ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© */}\n-      <SearchArea\n+      {/* SearchAreaëŠ” ëª¨ë‹¬ì´ ì•„ë‹ ë•Œë§Œ í‘œì‹œ */}\n+      {!isModal && (\n+        <SearchArea\n         leftContent={\n           <div style={{ display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n             <Button onClick={handleOpenRegistrationModal}>\n               + ìƒˆ ìˆ˜ê°• ë“±ë¡\n             </Button>\n             <UnpaidFilter\n-              active={showUnpaidOnly}\n+              active={showUnpaidOnlyState}\n               unpaidCount={unpaidMetaInfo.unpaidCourseCount}\n               totalAmount={unpaidMetaInfo.totalUnpaidAmount}\n-              onClick={() => setShowUnpaidOnly(!showUnpaidOnly)}\n+              onClick={() => setShowUnpaidOnlyState(!showUnpaidOnlyState)}\n             />\n           </div>\n         }\n         selectedPeriod={selectedPeriod}\n@@ -862,8 +888,9 @@\n         onSearch={handleSearch}\n         searchPlaceholder=\"íšŒì›ëª…, ìƒí’ˆëª…, í”„ë¡œê·¸ë¨ëª…, ì§€ì ëª…, ì½”ì¹˜ëª…ìœ¼ë¡œ ê²€ìƒ‰...\"\n         autoSearchOnDateChange={false}\n       />\n+      )}\n \n       <DataTable\n         title=\"ìˆ˜ê°• ì´ë ¥\"\n         columns={columns}\n"
                },
                {
                    "date": 1765686149378,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -812,9 +812,12 @@\n       render: (value, record) => (\n         <StatusBadge \n           $status={record.enrollmentStatus}\n           $clickable={record.enrollmentStatus === 'unpaid'}\n-          onClick={record.enrollmentStatus === 'unpaid' ? () => handleUnpaidClick(record) : undefined}\n+          onClick={record.enrollmentStatus === 'unpaid' ? (e) => {\n+            e.stopPropagation(); // row í´ë¦­ ì´ë²¤íŠ¸ ì°¨ë‹¨\n+            handleUnpaidClick(record);\n+          } : undefined}\n           title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n         >\n           {(() => {\n             switch (record.enrollmentStatus) {\n"
                },
                {
                    "date": 1765686213132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -986,9 +986,10 @@\n                 fontSize: '14px',\n                 color: '#1e40af',\n                 marginTop: '16px'\n               }}>\n-                ğŸ’¡ ì™„ë£Œ ì²˜ë¦¬ ì‹œ í•´ë‹¹ ê¸ˆì•¡ì´ ê²°ì œ ë‚´ì—­ì— ìë™ìœ¼ë¡œ ë“±ë¡ë˜ë©°, ìˆ˜ê°• ìƒíƒœê°€ 'ì™„ë£Œ'ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.\n+                ğŸ’¡ ì™„ë£Œ ì²˜ë¦¬ ì‹œ í•´ë‹¹ ê¸ˆì•¡ì´ ê²°ì œ ë‚´ì—­ì— ìë™ìœ¼ë¡œ ë“±ë¡ë©ë‹ˆë‹¤.<br/>\n+                ìˆ˜ê°• ìƒíƒœëŠ” ë‚¨ì€ ê¸°ê°„/íšŸìˆ˜ì— ë”°ë¼ 'ìˆ˜ê°•ì¤‘' ë˜ëŠ” 'ì™„ë£Œ'ë¡œ ìë™ ë³€ê²½ë©ë‹ˆë‹¤.\n               </div>\n             </ModalContent>\n           }\n           footer={\n"
                },
                {
                    "date": 1765689008058,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -335,8 +335,11 @@\n       \n       // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n       await loadUnpaidMetaInfo();\n       \n+      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œ ì²´í¬ ë° ìƒíƒœ ì—…ë°ì´íŠ¸\n+      await dbManager.checkAndUpdateExpiredEnrollments();\n+      \n       const allEnrollments = await dbManager.getAllCourseEnrollments();\n       console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥ ìˆ˜:', allEnrollments.length);\n       \n       // ê¸°ê°„ë³„ í•„í„°ë§ (ë“±ë¡ì¼ ê¸°ì¤€) - ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ í˜„ì¬ ìƒíƒœ ì‚¬ìš©\n@@ -808,19 +811,40 @@\n       key: 'enrollmentStatus',\n       title: 'ìƒíƒœ',\n       width: '80px',\n       align: 'center' as const,\n-      render: (value, record) => (\n-        <StatusBadge \n-          $status={record.enrollmentStatus}\n-          $clickable={record.enrollmentStatus === 'unpaid'}\n-          onClick={record.enrollmentStatus === 'unpaid' ? (e) => {\n-            e.stopPropagation(); // row í´ë¦­ ì´ë²¤íŠ¸ ì°¨ë‹¨\n-            handleUnpaidClick(record);\n-          } : undefined}\n-          title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n-        >\n+      render: (value, record) => {\n+        // ì‹¤ì‹œê°„ ê¸°ê°„ë§Œë£Œ ì²´í¬\n+        let displayStatus = record.enrollmentStatus;\n+        let isExpired = false;\n+        \n+        if (record.enrollmentStatus === 'active' && record.programType === 'ê¸°ê°„ì œ' && record.endDate) {\n+          const today = new Date();\n+          const endDate = new Date(record.endDate);\n+          today.setHours(0, 0, 0, 0);\n+          endDate.setHours(0, 0, 0, 0);\n+          if (endDate < today) {\n+            displayStatus = 'completed'; // ë§Œë£Œëœ ê²½ìš° completed ìƒíƒœë¡œ í‘œì‹œ\n+            isExpired = true;\n+          }\n+        }\n+        \n+        return (\n+          <StatusBadge \n+            $status={displayStatus}\n+            $clickable={record.enrollmentStatus === 'unpaid'}\n+            onClick={record.enrollmentStatus === 'unpaid' ? (e) => {\n+              e.stopPropagation(); // row í´ë¦­ ì´ë²¤íŠ¸ ì°¨ë‹¨\n+              handleUnpaidClick(record);\n+            } : undefined}\n+            title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n+          >\n           {(() => {\n+            // ë§Œë£Œëœ ê²½ìš° \"ë§Œë£Œ\" í‘œì‹œ\n+            if (isExpired) {\n+              return 'ë§Œë£Œ';\n+            }\n+            \n             switch (record.enrollmentStatus) {\n               case 'active': return 'ìˆ˜ê°•ì¤‘';\n               case 'completed': return 'ì™„ë£Œ';\n               case 'suspended': return 'ì¤‘ë‹¨';\n"
                },
                {
                    "date": 1765689085340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -854,9 +854,10 @@\n               default: return record.enrollmentStatus;\n             }\n           })()}\n         </StatusBadge>\n-      )\n+        );\n+      }\n     }\n   ];\n \n   // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n"
                },
                {
                    "date": 1765689184669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -335,11 +335,8 @@\n       \n       // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n       await loadUnpaidMetaInfo();\n       \n-      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œ ì²´í¬ ë° ìƒíƒœ ì—…ë°ì´íŠ¸\n-      await dbManager.checkAndUpdateExpiredEnrollments();\n-      \n       const allEnrollments = await dbManager.getAllCourseEnrollments();\n       console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥ ìˆ˜:', allEnrollments.length);\n       \n       // ê¸°ê°„ë³„ í•„í„°ë§ (ë“±ë¡ì¼ ê¸°ì¤€) - ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ í˜„ì¬ ìƒíƒœ ì‚¬ìš©\n"
                },
                {
                    "date": 1765689328372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -338,8 +338,35 @@\n       \n       const allEnrollments = await dbManager.getAllCourseEnrollments();\n       console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥ ìˆ˜:', allEnrollments.length);\n       \n+      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œë“¤ì„ ì°¾ì•„ì„œ ì‹¤ì œ DB ìƒíƒœ ì—…ë°ì´íŠ¸\n+      const today = new Date();\n+      today.setHours(0, 0, 0, 0);\n+      \n+      const expiredEnrollments = allEnrollments.filter(enrollment => \n+        enrollment.enrollmentStatus === 'active' &&\n+        enrollment.programType === 'ê¸°ê°„ì œ' &&\n+        enrollment.endDate &&\n+        new Date(enrollment.endDate) < today\n+      );\n+      \n+      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œë“¤ì„ completedë¡œ ì—…ë°ì´íŠ¸\n+      for (const enrollment of expiredEnrollments) {\n+        try {\n+          await dbManager.updateCourseEnrollment(enrollment.id, {\n+            enrollmentStatus: 'completed'\n+          });\n+          console.log(`ìˆ˜ê°•ê¶Œ ë§Œë£Œ ì²˜ë¦¬: ${enrollment.productName} (${enrollment.memberName})`);\n+        } catch (error) {\n+          console.error('ë§Œë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n+        }\n+      }\n+      \n+      // ì—…ë°ì´íŠ¸ í›„ ë‹¤ì‹œ ë°ì´í„° ë¡œë“œ (ë§Œë£Œ ì²˜ë¦¬ëœ í•­ëª©ë“¤ ë°˜ì˜)\n+      const updatedEnrollments = expiredEnrollments.length > 0 ? \n+        await dbManager.getAllCourseEnrollments() : allEnrollments;\n+      \n       // ê¸°ê°„ë³„ í•„í„°ë§ (ë“±ë¡ì¼ ê¸°ì¤€) - ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ í˜„ì¬ ìƒíƒœ ì‚¬ìš©\n       const currentPeriod = period ?? selectedPeriod;\n       const currentStartDate = startDate ?? customStartDate;\n       const currentEndDate = endDate ?? customEndDate;\n@@ -377,9 +404,9 @@\n           rangeStartDate.setMonth(today.getMonth() - 1);\n           dateRange = { start: rangeStartDate, end: today };\n       }\n       \n-      let filteredByDate = allEnrollments.filter(enrollment => {\n+      let filteredByDate = updatedEnrollments.filter(enrollment => {\n         const enrollmentDate = new Date(enrollment.createdAt);\n         return enrollmentDate >= dateRange.start && enrollmentDate <= dateRange.end;\n       });\n       \n@@ -808,40 +835,19 @@\n       key: 'enrollmentStatus',\n       title: 'ìƒíƒœ',\n       width: '80px',\n       align: 'center' as const,\n-      render: (value, record) => {\n-        // ì‹¤ì‹œê°„ ê¸°ê°„ë§Œë£Œ ì²´í¬\n-        let displayStatus = record.enrollmentStatus;\n-        let isExpired = false;\n-        \n-        if (record.enrollmentStatus === 'active' && record.programType === 'ê¸°ê°„ì œ' && record.endDate) {\n-          const today = new Date();\n-          const endDate = new Date(record.endDate);\n-          today.setHours(0, 0, 0, 0);\n-          endDate.setHours(0, 0, 0, 0);\n-          if (endDate < today) {\n-            displayStatus = 'completed'; // ë§Œë£Œëœ ê²½ìš° completed ìƒíƒœë¡œ í‘œì‹œ\n-            isExpired = true;\n-          }\n-        }\n-        \n-        return (\n-          <StatusBadge \n-            $status={displayStatus}\n-            $clickable={record.enrollmentStatus === 'unpaid'}\n-            onClick={record.enrollmentStatus === 'unpaid' ? (e) => {\n-              e.stopPropagation(); // row í´ë¦­ ì´ë²¤íŠ¸ ì°¨ë‹¨\n-              handleUnpaidClick(record);\n-            } : undefined}\n-            title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n-          >\n+      render: (value, record) => (\n+        <StatusBadge \n+          $status={record.enrollmentStatus}\n+          $clickable={record.enrollmentStatus === 'unpaid'}\n+          onClick={record.enrollmentStatus === 'unpaid' ? (e) => {\n+            e.stopPropagation(); // row í´ë¦­ ì´ë²¤íŠ¸ ì°¨ë‹¨\n+            handleUnpaidClick(record);\n+          } : undefined}\n+          title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n+        >\n           {(() => {\n-            // ë§Œë£Œëœ ê²½ìš° \"ë§Œë£Œ\" í‘œì‹œ\n-            if (isExpired) {\n-              return 'ë§Œë£Œ';\n-            }\n-            \n             switch (record.enrollmentStatus) {\n               case 'active': return 'ìˆ˜ê°•ì¤‘';\n               case 'completed': return 'ì™„ë£Œ';\n               case 'suspended': return 'ì¤‘ë‹¨';\n@@ -851,10 +857,9 @@\n               default: return record.enrollmentStatus;\n             }\n           })()}\n         </StatusBadge>\n-        );\n-      }\n+      )\n     }\n   ];\n \n   // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n"
                },
                {
                    "date": 1765689413926,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -371,9 +371,8 @@\n       const currentStartDate = startDate ?? customStartDate;\n       const currentEndDate = endDate ?? customEndDate;\n       \n       let dateRange: { start: Date; end: Date };\n-      const today = new Date();\n       const rangeStartDate = new Date();\n       \n       switch (currentPeriod) {\n         case '1month':\n"
                },
                {
                    "date": 1765689547424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -338,35 +338,21 @@\n       \n       const allEnrollments = await dbManager.getAllCourseEnrollments();\n       console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥ ìˆ˜:', allEnrollments.length);\n       \n-      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œë“¤ì„ ì°¾ì•„ì„œ ì‹¤ì œ DB ìƒíƒœ ì—…ë°ì´íŠ¸\n-      const today = new Date();\n-      today.setHours(0, 0, 0, 0);\n+      // ë§Œë£Œ ì²˜ë¦¬ ë¡œì§ ì„ì‹œ ë¹„í™œì„±í™” (ë°ì´í„° í™•ì¸ìš©)\n+      const updatedEnrollments = allEnrollments;\n       \n-      const expiredEnrollments = allEnrollments.filter(enrollment => \n-        enrollment.enrollmentStatus === 'active' &&\n-        enrollment.programType === 'ê¸°ê°„ì œ' &&\n-        enrollment.endDate &&\n-        new Date(enrollment.endDate) < today\n-      );\n+      console.log('=== ë°ì´í„° ë¡œë“œ ë””ë²„ê¹… ===');\n+      console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥:', allEnrollments.length);\n+      console.log('ìˆ˜ê°• ì´ë ¥ ìƒì„¸:', allEnrollments.map(e => ({\n+        memberName: e.memberName,\n+        productName: e.productName,\n+        enrollmentStatus: e.enrollmentStatus,\n+        programType: e.programType,\n+        endDate: e.endDate\n+      })));\n       \n-      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œë“¤ì„ completedë¡œ ì—…ë°ì´íŠ¸\n-      for (const enrollment of expiredEnrollments) {\n-        try {\n-          await dbManager.updateCourseEnrollment(enrollment.id, {\n-            enrollmentStatus: 'completed'\n-          });\n-          console.log(`ìˆ˜ê°•ê¶Œ ë§Œë£Œ ì²˜ë¦¬: ${enrollment.productName} (${enrollment.memberName})`);\n-        } catch (error) {\n-          console.error('ë§Œë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n-        }\n-      }\n-      \n-      // ì—…ë°ì´íŠ¸ í›„ ë‹¤ì‹œ ë°ì´í„° ë¡œë“œ (ë§Œë£Œ ì²˜ë¦¬ëœ í•­ëª©ë“¤ ë°˜ì˜)\n-      const updatedEnrollments = expiredEnrollments.length > 0 ? \n-        await dbManager.getAllCourseEnrollments() : allEnrollments;\n-      \n       // ê¸°ê°„ë³„ í•„í„°ë§ (ë“±ë¡ì¼ ê¸°ì¤€) - ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ í˜„ì¬ ìƒíƒœ ì‚¬ìš©\n       const currentPeriod = period ?? selectedPeriod;\n       const currentStartDate = startDate ?? customStartDate;\n       const currentEndDate = endDate ?? customEndDate;\n"
                },
                {
                    "date": 1765689594214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -357,8 +357,9 @@\n       const currentStartDate = startDate ?? customStartDate;\n       const currentEndDate = endDate ?? customEndDate;\n       \n       let dateRange: { start: Date; end: Date };\n+      const today = new Date();\n       const rangeStartDate = new Date();\n       \n       switch (currentPeriod) {\n         case '1month':\n"
                },
                {
                    "date": 1765689724675,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -821,31 +821,51 @@\n       key: 'enrollmentStatus',\n       title: 'ìƒíƒœ',\n       width: '80px',\n       align: 'center' as const,\n-      render: (value, record) => (\n-        <StatusBadge \n-          $status={record.enrollmentStatus}\n-          $clickable={record.enrollmentStatus === 'unpaid'}\n-          onClick={record.enrollmentStatus === 'unpaid' ? (e) => {\n-            e.stopPropagation(); // row í´ë¦­ ì´ë²¤íŠ¸ ì°¨ë‹¨\n-            handleUnpaidClick(record);\n-          } : undefined}\n-          title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n-        >\n-          {(() => {\n-            switch (record.enrollmentStatus) {\n-              case 'active': return 'ìˆ˜ê°•ì¤‘';\n-              case 'completed': return 'ì™„ë£Œ';\n-              case 'suspended': return 'ì¤‘ë‹¨';\n-              case 'cancelled': return 'ì·¨ì†Œ';\n-              case 'unpaid': return 'ë¯¸ìˆ˜';\n-              case 'hold': return 'í™€ë“œ';\n-              default: return record.enrollmentStatus;\n-            }\n-          })()}\n-        </StatusBadge>\n-      )\n+      render: (value, record) => {\n+        // ì‹¤ì‹œê°„ ê¸°ê°„ë§Œë£Œ ì²´í¬\n+        let displayStatus = record.enrollmentStatus;\n+        let statusText = '';\n+        \n+        if (record.enrollmentStatus === 'active' && record.programType === 'ê¸°ê°„ì œ' && record.endDate) {\n+          const today = new Date();\n+          const endDate = new Date(record.endDate);\n+          today.setHours(0, 0, 0, 0);\n+          endDate.setHours(23, 59, 59, 999);\n+          \n+          if (endDate < today) {\n+            displayStatus = 'completed';\n+            statusText = 'ë§Œë£Œ';\n+          } else {\n+            statusText = 'ìˆ˜ê°•ì¤‘';\n+          }\n+        } else {\n+          switch (record.enrollmentStatus) {\n+            case 'active': statusText = 'ìˆ˜ê°•ì¤‘'; break;\n+            case 'completed': statusText = 'ì™„ë£Œ'; break;\n+            case 'suspended': statusText = 'ì¤‘ë‹¨'; break;\n+            case 'cancelled': statusText = 'ì·¨ì†Œ'; break;\n+            case 'unpaid': statusText = 'ë¯¸ìˆ˜'; break;\n+            case 'hold': statusText = 'í™€ë“œ'; break;\n+            default: statusText = record.enrollmentStatus;\n+          }\n+        }\n+        \n+        return (\n+          <StatusBadge \n+            $status={displayStatus}\n+            $clickable={record.enrollmentStatus === 'unpaid'}\n+            onClick={record.enrollmentStatus === 'unpaid' ? (e) => {\n+              e.stopPropagation(); // row í´ë¦­ ì´ë²¤íŠ¸ ì°¨ë‹¨\n+              handleUnpaidClick(record);\n+            } : undefined}\n+            title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n+          >\n+            {statusText}\n+          </StatusBadge>\n+        );\n+      }\n     }\n   ];\n \n   // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n"
                },
                {
                    "date": 1765689902009,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1062 @@\n+import React, { useState, useEffect, useCallback } from 'react';\n+import styled from 'styled-components';\n+import { toast } from 'react-toastify';\n+import { AppColors } from '../../../styles/colors';\n+import { AppTextStyles } from '../../../styles/textStyles';\n+import { dbManager, type CourseEnrollment } from '../../../utils/indexedDB';\n+import { getCompletedSessions } from '../../../utils/db/ReservationHelper';\n+import { SearchArea, type PeriodOption } from '../../../components/SearchArea';\n+import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n+import Modal from '../../../components/Modal';\n+import CustomDropdown from '../../../components/CustomDropdown';\n+import DataTable, { type TableColumn } from '../../../components/DataTable';\n+import CourseRegistrationModal from './CourseRegistrationModal';\n+import CourseManagementModal from './CourseManagementModal';\n+\n+const PageContainer = styled.div`\n+  width: 100%;\n+`;\n+\n+const StatusBadge = styled.span<{ $status: 'active' | 'completed' | 'suspended' | 'cancelled' | 'unpaid' | 'hold'; $clickable?: boolean }>`\n+  padding: 4px 8px;\n+  border-radius: 12px;\n+  font-size: 12px;\n+  font-weight: 500;\n+  background: ${props => {\n+    switch (props.$status) {\n+      case 'completed': return '#e7f5e7';\n+      case 'active': return '#e3f2fd';\n+      case 'suspended': return '#fff3e0';\n+      case 'cancelled': return '#fce4ec';\n+      case 'unpaid': return '#fff2f2';\n+      case 'hold': return '#fff3e0';\n+      default: return '#f5f5f5';\n+    }\n+  }};\n+  color: ${props => {\n+    switch (props.$status) {\n+      case 'completed': return '#2d5a2d';\n+      case 'active': return '#1565c0';\n+      case 'suspended': return '#ef6c00';\n+      case 'cancelled': return '#c2185b';\n+      case 'unpaid': return '#8b1538';\n+      case 'hold': return '#ef6c00';\n+      default: return '#424242';\n+    }\n+  }};\n+  cursor: ${props => props.$clickable ? 'pointer' : 'default'};\n+  transition: all 0.2s;\n+  \n+  &:hover {\n+    opacity: ${props => props.$clickable ? 0.8 : 1};\n+    transform: ${props => props.$clickable ? 'translateY(-1px)' : 'none'};\n+  }\n+`;\n+\n+const ProgressInfo = styled.div`\n+  font-size: 12px;\n+  color: ${AppColors.onInput1};\n+  margin-top: 4px;\n+`;\n+\n+const PriceInfo = styled.div`\n+  text-align: right;\n+`;\n+\n+const PaidAmount = styled.div`\n+  color: ${AppColors.primary};\n+  font-weight: 600;\n+`;\n+\n+const UnpaidAmount = styled.div<{ $hasUnpaid: boolean }>`\n+  color: ${props => props.$hasUnpaid ? '#d32f2f' : AppColors.onInput1};\n+  font-size: 12px;\n+  margin-top: 2px;\n+`;\n+\n+const Button = styled.button<{ variant?: 'primary' | 'secondary' }>`\n+  padding: 12px 18px;\n+  border: ${props => props.variant === 'secondary' ? `1px solid ${AppColors.borderLight}` : 'none'};\n+  border-radius: 8px;\n+  background: ${props => props.variant === 'secondary' ? AppColors.surface : AppColors.primary};\n+  color: ${props => props.variant === 'secondary' ? AppColors.onSurface : AppColors.onPrimary};\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  font-weight: 600;\n+  cursor: pointer;\n+  transition: all 0.2s;\n+  \n+  &:hover {\n+    opacity: 0.9;\n+    transform: translateY(-1px);\n+  }\n+  \n+  &:disabled {\n+    opacity: 0.5;\n+    cursor: not-allowed;\n+    transform: none;\n+  }\n+`;\n+\n+const ModalContent = styled.div`\n+  text-align: left;\n+`;\n+\n+const InfoRow = styled.div`\n+  display: flex;\n+  justify-content: space-between;\n+  align-items: center;\n+  padding: 12px 0;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  \n+  &:last-child {\n+    border-bottom: none;\n+  }\n+`;\n+\n+const InfoLabel = styled.span`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+`;\n+\n+const InfoValue = styled.span`\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const ModalUnpaidAmount = styled.span`\n+  color: #d32f2f;\n+  font-weight: 600;\n+  font-size: 16px;\n+`;\n+\n+const WarningText = styled.div`\n+  background: #fff3cd;\n+  border: 1px solid #ffeaa7;\n+  border-radius: 8px;\n+  padding: 12px;\n+  color: #856404;\n+  font-size: 14px;\n+  text-align: center;\n+`;\n+\n+const TransferBadge = styled.span<{ $type: 'transferred' | 'received' }>`\n+  display: inline-flex;\n+  align-items: center;\n+  gap: 4px;\n+  padding: 2px 6px;\n+  border-radius: 4px;\n+  font-size: 10px;\n+  font-weight: 600;\n+  background: ${props => props.$type === 'transferred' ? '#fff3e0' : '#e8f5e8'};\n+  color: ${props => props.$type === 'transferred' ? '#ef6c00' : '#2e7d32'};\n+  border: 1px solid ${props => props.$type === 'transferred' ? '#ffcc02' : '#81c784'};\n+  margin-bottom: 2px;\n+`;\n+\n+const MemberNameContainer = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  gap: 2px;\n+`;\n+\n+interface CourseHistoryProps {\n+  preselectedMemberId?: string;\n+  showUnpaidOnly?: boolean;\n+  onUnpaidComplete?: () => void;\n+  isModal?: boolean;\n+}\n+\n+const CourseHistory: React.FC<CourseHistoryProps> = ({ \n+  preselectedMemberId, \n+  showUnpaidOnly = false, \n+  onUnpaidComplete,\n+  isModal = false \n+}) => {\n+  const [searchQuery, setSearchQuery] = useState<string>('');\n+  const [courseEnrollments, setCourseEnrollments] = useState<CourseEnrollment[]>([]);\n+  const [filteredEnrollments, setFilteredEnrollments] = useState<CourseEnrollment[]>([]);\n+  const [loading, setLoading] = useState<boolean>(true);\n+  \n+  // ê¸°ê°„ ì„ íƒ ê´€ë ¨ ìƒíƒœ\n+  const [selectedPeriod, setSelectedPeriod] = useState<PeriodOption>('1month');\n+  const [customStartDate, setCustomStartDate] = useState<string>('');\n+  const [customEndDate, setCustomEndDate] = useState<string>('');\n+  \n+  // ë¯¸ìˆ˜ í•„í„° ê´€ë ¨ ìƒíƒœ\n+  const [showUnpaidOnlyState, setShowUnpaidOnlyState] = useState<boolean>(showUnpaidOnly);\n+  const [unpaidMetaInfo, setUnpaidMetaInfo] = useState<{ unpaidCourseCount: number; totalUnpaidAmount: number }>({\n+    unpaidCourseCount: 0,\n+    totalUnpaidAmount: 0\n+  });\n+  \n+  // ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n+  const [showCompleteModal, setShowCompleteModal] = useState<boolean>(false);\n+  const [selectedEnrollment, setSelectedEnrollment] = useState<CourseEnrollment | null>(null);\n+  \n+  // ì„¸ì…˜ ì •ë³´ ìºì‹œ (enrollmentId -> progressInfo)\n+  const [enrollmentSessions, setEnrollmentSessions] = useState<Map<string, string>>(new Map());\n+  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n+  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState<string>('card');\n+\n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n+  const [showRegistrationModal, setShowRegistrationModal] = useState<boolean>(false);\n+\n+  // ì–‘ë„ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n+  const [showTransferModal, setShowTransferModal] = useState<boolean>(false);\n+  const [selectedForTransfer, setSelectedForTransfer] = useState<CourseEnrollment | null>(null);\n+\n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ì„±ê³µ ì²˜ë¦¬\n+  const handleRegistrationSuccess = async () => {\n+    // ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n+    await loadCourseEnrollments();\n+    // í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n+    setTimeout(() => {\n+      handleSearch();\n+    }, 100);\n+  };\n+\n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ì—´ê¸°\n+  const handleOpenRegistrationModal = () => {\n+    setShowRegistrationModal(true);\n+  };\n+\n+  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ë‹«ê¸°\n+  const handleCloseRegistrationModal = () => {\n+    setShowRegistrationModal(false);\n+  };\n+\n+  // ì–‘ë„ ëª¨ë‹¬ ì—´ê¸°\n+  const handleOpenTransferModal = (enrollment: CourseEnrollment) => {\n+    setSelectedForTransfer(enrollment);\n+    setShowTransferModal(true);\n+  };\n+\n+  // ì–‘ë„ ëª¨ë‹¬ ë‹«ê¸°\n+  const handleCloseTransferModal = () => {\n+    setShowTransferModal(false);\n+    setSelectedForTransfer(null);\n+  };\n+\n+  // ì–‘ë„ ì„±ê³µ ì²˜ë¦¬\n+  const handleTransferSuccess = async () => {\n+    // ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n+    await loadCourseEnrollments();\n+    // í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n+    setTimeout(() => {\n+      handleSearch();\n+    }, 100);\n+  };\n+\n+  // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n+  const loadUnpaidMetaInfo = useCallback(async () => {\n+    try {\n+      const allEnrollments = await dbManager.getAllCourseEnrollments();\n+      const unpaidEnrollments = allEnrollments.filter(e => e.enrollmentStatus === 'unpaid');\n+      const unpaidCourseCount = unpaidEnrollments.length;\n+      const totalUnpaidAmount = unpaidEnrollments.reduce((sum, e) => sum + (e.unpaidAmount || 0), 0);\n+      \n+      setUnpaidMetaInfo({ unpaidCourseCount, totalUnpaidAmount });\n+    } catch (error) {\n+      console.error('ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, []);\n+\n+  // ì§„í–‰ìƒí™© ê³„ì‚° í•¨ìˆ˜\n+  const getProgressInfo = useCallback(async (enrollment: CourseEnrollment): Promise<string> => {\n+    if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n+      // ì´ë²¤íŠ¸ ì†Œì‹±: ì‹¤ì‹œê°„ ì™„ë£Œ íšŸìˆ˜ ê³„ì‚°\n+      const completedSessions = await getCompletedSessions(enrollment.id);\n+      const remaining = enrollment.sessionCount - completedSessions;\n+      return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n+    } else if (enrollment.programType === 'ê¸°ê°„ì œ' && enrollment.endDate) {\n+      const today = new Date();\n+      const endDate = new Date(enrollment.endDate);\n+      const timeDiff = endDate.getTime() - today.getTime();\n+      const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n+      \n+      if (daysDiff > 0) {\n+        return `${daysDiff}ì¼ ë‚¨ìŒ`;\n+      } else if (daysDiff === 0) {\n+        return 'ì˜¤ëŠ˜ ì¢…ë£Œ';\n+      } else {\n+        return `${Math.abs(daysDiff)}ì¼ ê²½ê³¼`;\n+      }\n+    }\n+    return 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n+  }, []);\n+\n+  // ê¸°ê°„ë³„ ê²€ìƒ‰ ë²”ìœ„ ê³„ì‚°\n+  const getDateRange = useCallback(() => {\n+    const today = new Date();\n+    const startDate = new Date();\n+    \n+    switch (selectedPeriod) {\n+      case '1month':\n+        startDate.setMonth(today.getMonth() - 1);\n+        return { start: startDate, end: today };\n+      case '3month':\n+        startDate.setMonth(today.getMonth() - 3);\n+        return { start: startDate, end: today };\n+      case '6month':\n+        startDate.setMonth(today.getMonth() - 6);\n+        return { start: startDate, end: today };\n+      case 'custom':\n+        if (customStartDate && customEndDate) {\n+          return { \n+            start: new Date(customStartDate), \n+            end: new Date(customEndDate) \n+          };\n+        }\n+        // ì»¤ìŠ¤í…€ ë‚ ì§œê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ 1ê°œì›”\n+        startDate.setMonth(today.getMonth() - 1);\n+        return { start: startDate, end: today };\n+      default:\n+        startDate.setMonth(today.getMonth() - 1);\n+        return { start: startDate, end: today };\n+    }\n+  }, [selectedPeriod, customStartDate, customEndDate]);\n+\n+  // ë‚ ì§œ ë²”ìœ„ í‘œì‹œ ë¬¸ìì—´ ìƒì„±\n+  const getDateRangeDisplay = useCallback(() => {\n+    const range = getDateRange();\n+    const formatDate = (date: Date) => {\n+      return date.toLocaleDateString('ko-KR', {\n+        year: 'numeric',\n+        month: 'short',\n+        day: 'numeric'\n+      });\n+    };\n+    return `${formatDate(range.start)} ~ ${formatDate(range.end)}`;\n+  }, [getDateRange]);\n+\n+  const loadCourseEnrollments = useCallback(async (period?: PeriodOption, startDate?: string, endDate?: string) => {\n+    try {\n+      setLoading(true);\n+      console.log('ìˆ˜ê°• ë°ì´í„° ë¡œë”© ì‹œì‘...');\n+      \n+      // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n+      await loadUnpaidMetaInfo();\n+      \n+      const allEnrollments = await dbManager.getAllCourseEnrollments();\n+      console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥ ìˆ˜:', allEnrollments.length);\n+      \n+      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œë“¤ì„ ì°¾ì•„ì„œ ì‹¤ì œ DB ìƒíƒœ ì—…ë°ì´íŠ¸\n+      const today = new Date();\n+      today.setHours(0, 0, 0, 0);\n+      \n+      const expiredEnrollments = allEnrollments.filter(enrollment => \n+        enrollment.enrollmentStatus === 'active' &&\n+        enrollment.programType === 'ê¸°ê°„ì œ' &&\n+        enrollment.endDate &&\n+        new Date(enrollment.endDate) < today\n+      );\n+      \n+      console.log('=== ë§Œë£Œ ì²˜ë¦¬ ë””ë²„ê¹… ===');\n+      console.log('ë§Œë£Œ ëŒ€ìƒ ìˆ˜ê°•ê¶Œ:', expiredEnrollments.length);\n+      expiredEnrollments.forEach(e => {\n+        console.log(`- ${e.memberName}: ${e.productName} (ì¢…ë£Œì¼: ${e.endDate})`);\n+      });\n+      \n+      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œë“¤ì„ completedë¡œ ì—…ë°ì´íŠ¸\n+      for (const enrollment of expiredEnrollments) {\n+        try {\n+          await dbManager.updateCourseEnrollment(enrollment.id, {\n+            enrollmentStatus: 'completed'\n+          });\n+          console.log(`ìˆ˜ê°•ê¶Œ ë§Œë£Œ ì²˜ë¦¬ ì™„ë£Œ: ${enrollment.productName} (${enrollment.memberName})`);\n+        } catch (error) {\n+          console.error('ë§Œë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n+        }\n+      }\n+      \n+      // ì—…ë°ì´íŠ¸ í›„ ë‹¤ì‹œ ë°ì´í„° ë¡œë“œ (ë§Œë£Œ ì²˜ë¦¬ëœ í•­ëª©ë“¤ ë°˜ì˜)\n+      const updatedEnrollments = expiredEnrollments.length > 0 ? \n+        await dbManager.getAllCourseEnrollments() : allEnrollments;\n+      \n+      console.log('=== ë°ì´í„° ë¡œë“œ ë””ë²„ê¹… ===');\n+      console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥:', updatedEnrollments.length);\n+      console.log('ìˆ˜ê°• ì´ë ¥ ìƒì„¸:', updatedEnrollments.map(e => ({\n+        memberName: e.memberName,\n+        productName: e.productName,\n+        enrollmentStatus: e.enrollmentStatus,\n+        programType: e.programType,\n+        endDate: e.endDate\n+      })));\n+      \n+      // ê¸°ê°„ë³„ í•„í„°ë§ (ë“±ë¡ì¼ ê¸°ì¤€) - ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ í˜„ì¬ ìƒíƒœ ì‚¬ìš©\n+      const currentPeriod = period ?? selectedPeriod;\n+      const currentStartDate = startDate ?? customStartDate;\n+      const currentEndDate = endDate ?? customEndDate;\n+      \n+      let dateRange: { start: Date; end: Date };\n+      const today = new Date();\n+      const rangeStartDate = new Date();\n+      \n+      switch (currentPeriod) {\n+        case '1month':\n+          rangeStartDate.setMonth(today.getMonth() - 1);\n+          dateRange = { start: rangeStartDate, end: today };\n+          break;\n+        case '3month':\n+          rangeStartDate.setMonth(today.getMonth() - 3);\n+          dateRange = { start: rangeStartDate, end: today };\n+          break;\n+        case '6month':\n+          rangeStartDate.setMonth(today.getMonth() - 6);\n+          dateRange = { start: rangeStartDate, end: today };\n+          break;\n+        case 'custom':\n+          if (currentStartDate && currentEndDate) {\n+            dateRange = { \n+              start: new Date(currentStartDate), \n+              end: new Date(currentEndDate) \n+            };\n+          } else {\n+            // ì»¤ìŠ¤í…€ ë‚ ì§œê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ 1ê°œì›”\n+            rangeStartDate.setMonth(today.getMonth() - 1);\n+            dateRange = { start: rangeStartDate, end: today };\n+          }\n+          break;\n+        default:\n+          rangeStartDate.setMonth(today.getMonth() - 1);\n+          dateRange = { start: rangeStartDate, end: today };\n+      }\n+      \n+      let filteredByDate = updatedEnrollments.filter(enrollment => {\n+        const enrollmentDate = new Date(enrollment.createdAt);\n+        return enrollmentDate >= dateRange.start && enrollmentDate <= dateRange.end;\n+      });\n+      \n+      // íŠ¹ì • íšŒì› IDê°€ ì§€ì •ëœ ê²½ìš° í•´ë‹¹ íšŒì›ì˜ ìˆ˜ê°• ì´ë ¥ë§Œ í•„í„°ë§\n+      if (preselectedMemberId) {\n+        filteredByDate = filteredByDate.filter(enrollment => \n+          enrollment.memberId === preselectedMemberId\n+        );\n+        console.log(`íšŒì› ID ${preselectedMemberId}ì˜ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n+      } else {\n+        console.log(`${currentPeriod} ê¸°ê°„ ë‚´ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n+      }\n+      \n+      // ìµœê·¼ ë“±ë¡ìˆœìœ¼ë¡œ ì •ë ¬ (createdAt ë‚´ë¦¼ì°¨ìˆœ)\n+      const sortedEnrollments = filteredByDate.sort((a, b) => \n+        new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n+      );\n+      \n+      console.log('=== CourseHistory ìµœì¢… ë°ì´í„° ì„¤ì • ===');\n+      console.log('sortedEnrollments ê°œìˆ˜:', sortedEnrollments.length);\n+      if (sortedEnrollments.length > 0) {\n+        console.log('ì²« ë²ˆì§¸ ìˆ˜ê°• ì´ë ¥:', sortedEnrollments[0]);\n+        console.log('=== IndexedDB ìˆ˜ê°• ì´ë ¥ ìƒì„¸ ë¶„ì„ (ìµœê·¼ 5ê°œ) ===');\n+        sortedEnrollments.slice(0, 5).forEach((enrollment, index) => {\n+          console.log(`\\n[${index + 1}] ${enrollment.memberName} - ${enrollment.productName}`);\n+          console.log('  - programType:', enrollment.programType);\n+          console.log('  - startDate:', enrollment.startDate);\n+          console.log('  - endDate:', enrollment.endDate);\n+          console.log('  - createdAt:', enrollment.createdAt);\n+          console.log('  - sessionCount:', enrollment.sessionCount);\n+          console.log('  - ì „ì²´ ê°ì²´:', enrollment);\n+        });\n+      }\n+      \n+      setCourseEnrollments(sortedEnrollments);\n+      setFilteredEnrollments(sortedEnrollments);\n+      \n+      // ì„¸ì…˜ ì •ë³´ ë¯¸ë¦¬ ê³„ì‚°\n+      const sessionsMap = new Map<string, string>();\n+      for (const enrollment of sortedEnrollments) {\n+        const progressInfo = await getProgressInfo(enrollment);\n+        sessionsMap.set(enrollment.id!, progressInfo);\n+      }\n+      setEnrollmentSessions(sessionsMap);\n+      \n+      console.log('ìˆ˜ê°• ì´ë ¥ ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ');\n+    } catch (error) {\n+      console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n+    } finally {\n+      setLoading(false);\n+    }\n+  }, [loadUnpaidMetaInfo, selectedPeriod, customStartDate, customEndDate, getProgressInfo]);\n+\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì´ˆê¸° ë°ì´í„° ë¡œë“œ (1ê°œì›” ê¸°ì¤€)\n+  useEffect(() => {\n+    const initializeData = async () => {\n+      await loadCourseEnrollments();\n+    };\n+    initializeData();\n+  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n+\n+  // í•„í„° ì ìš© í•¨ìˆ˜ (ë°ì´í„° ë¡œë“œì™€ ë¶„ë¦¬)\n+  const applyFilters = useCallback(() => {\n+    let filtered = courseEnrollments;\n+    \n+    // ë¯¸ìˆ˜ í•„í„° ì ìš©\n+    if (showUnpaidOnlyState) {\n+      filtered = filtered.filter(enrollment => enrollment.enrollmentStatus === 'unpaid');\n+    }\n+    \n+    // í…ìŠ¤íŠ¸ ê²€ìƒ‰\n+    if (searchQuery.trim()) {\n+      const query = searchQuery.toLowerCase().trim();\n+      filtered = filtered.filter(enrollment =>\n+        enrollment.memberName.toLowerCase().includes(query) ||\n+        enrollment.productName.toLowerCase().includes(query) ||\n+        enrollment.programName.toLowerCase().includes(query) ||\n+        enrollment.branchName.toLowerCase().includes(query) ||\n+        enrollment.coachName.toLowerCase().includes(query)\n+      );\n+    }\n+    \n+    setFilteredEnrollments(filtered);\n+  }, [courseEnrollments, showUnpaidOnlyState, searchQuery]);\n+\n+  // ë°ì´í„°ë‚˜ í•„í„° ì¡°ê±´ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•„í„° ì ìš©\n+  useEffect(() => {\n+    applyFilters();\n+  }, [applyFilters]);\n+\n+  const handleSearch = async () => {\n+    // í˜„ì¬ ì„ íƒëœ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤\n+    await loadCourseEnrollments(selectedPeriod, customStartDate, customEndDate);\n+  };\n+\n+  // ë¯¸ìˆ˜ ìƒíƒœ í´ë¦­ ì²˜ë¦¬\n+  const handleUnpaidClick = (enrollment: CourseEnrollment) => {\n+    setSelectedEnrollment(enrollment);\n+    setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ì„ ì¹´ë“œë¡œ ì„¤ì •\n+    setShowCompleteModal(true);\n+  };\n+\n+  // ì™„ë£Œ ì²˜ë¦¬ í™•ì¸\n+  const handleCompletePayment = async () => {\n+    if (!selectedEnrollment) return;\n+\n+    try {\n+      setIsProcessing(true);\n+\n+      // 1. ë¯¸ìˆ˜ ì™„ë£Œ í›„ ìƒíƒœ ê²°ì • ë¡œì§\n+      let newEnrollmentStatus: 'active' | 'completed' = 'active'; // ê¸°ë³¸ì ìœ¼ë¡œ í™œì„± ìƒíƒœ\n+      \n+      // ìˆ˜ê°• ì™„ë£Œ ì¡°ê±´ ì²´í¬\n+      if (selectedEnrollment.programType === 'íšŸìˆ˜ì œ' && selectedEnrollment.sessionCount) {\n+        // íšŸìˆ˜ì œ: ì™„ë£Œ íšŸìˆ˜ê°€ ì´ íšŸìˆ˜ì™€ ê°™ê±°ë‚˜ ë§ìœ¼ë©´ ì™„ë£Œ\n+        const completedSessions = selectedEnrollment.completedSessions || 0;\n+        if (completedSessions >= selectedEnrollment.sessionCount) {\n+          newEnrollmentStatus = 'completed';\n+        }\n+      } else if (selectedEnrollment.programType === 'ê¸°ê°„ì œ' && selectedEnrollment.endDate) {\n+        // ê¸°ê°„ì œ: ì¢…ë£Œì¼ì´ ì§€ë‚¬ìœ¼ë©´ ì™„ë£Œ\n+        const today = new Date();\n+        const endDate = new Date(selectedEnrollment.endDate);\n+        if (endDate <= today) {\n+          newEnrollmentStatus = 'completed';\n+        }\n+      }\n+\n+      const updatedEnrollment: CourseEnrollment = {\n+        ...selectedEnrollment,\n+        enrollmentStatus: newEnrollmentStatus, // ì¡°ê±´ì— ë”°ë¼ active ë˜ëŠ” completed\n+        paidAmount: selectedEnrollment.productPrice, // ìƒí’ˆ ì „ì²´ ê¸ˆì•¡ìœ¼ë¡œ ì„¤ì •\n+        unpaidAmount: 0\n+      };\n+\n+      await dbManager.updateCourseEnrollment(selectedEnrollment.id, updatedEnrollment);\n+\n+      // 2. ê²°ì œ ë°ì´í„° ìƒì„± ë° ì €ì¥\n+      const paymentData = {\n+        memberId: selectedEnrollment.memberId,\n+        memberName: selectedEnrollment.memberName,\n+        branchId: selectedEnrollment.branchId,\n+        branchName: selectedEnrollment.branchName,\n+        coach: selectedEnrollment.coach,\n+        coachName: selectedEnrollment.coachName,\n+        paymentMethod: selectedPaymentMethod, // ì‚¬ìš©ìê°€ ì„ íƒí•œ ê²°ì œ ë°©ë²• ì‚¬ìš©\n+        paymentStatus: 'completed' as const, // ì™„ë£Œ ìƒíƒœë¡œ ì„¤ì •\n+        totalAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n+        paidAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n+        unpaidAmount: 0, // ì™„ë£Œ ì²˜ë¦¬ì´ë¯€ë¡œ 0\n+        paymentDate: new Date(),\n+        // ìˆ˜ê°•/ìì‚° êµ¬ë¶„ ë° ì—°ê²° ì •ë³´ ì¶”ê°€\n+        paymentType: 'course' as const, // 'course' | 'asset' | 'other'\n+        relatedCourseId: selectedEnrollment.id, // ìˆ˜ê°• ì´ë ¥ IDë¡œ ì—°ê²°\n+        relatedAssetId: null, // ìì‚° ê´€ë ¨ ê²°ì œê°€ ì•„ë‹ˆë¯€ë¡œ null\n+        products: [{\n+          id: selectedEnrollment.productId,\n+          name: selectedEnrollment.productName,\n+          price: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n+          quantity: 1,\n+          programId: selectedEnrollment.programId,\n+          programName: selectedEnrollment.programName,\n+          programType: selectedEnrollment.programType\n+        }],\n+        memo: `ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬ - ${selectedEnrollment.productName} (ìˆ˜ê°• ID: ${selectedEnrollment.id})`\n+      };\n+\n+      await dbManager.addPayment(paymentData);\n+\n+      // ê²°ì œ ë°©ë²•ë³„ ë©”ì‹œì§€ í‘œì‹œ\n+      const paymentMethodLabels: { [key: string]: string } = {\n+        'card': 'ì¹´ë“œ',\n+        'cash': 'í˜„ê¸ˆ',\n+        'transfer': 'ê³„ì¢Œì´ì²´'\n+      };\n+      const paymentMethodLabel = paymentMethodLabels[selectedPaymentMethod] || 'ì¹´ë“œ';\n+      \n+      toast.success(`ë¯¸ìˆ˜ê¸ˆì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. (ê²°ì œë°©ë²•: ${paymentMethodLabel})`);\n+      \n+      // 3. ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n+      await loadCourseEnrollments();\n+      \n+      // 4. í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n+      setTimeout(() => {\n+        handleSearch();\n+      }, 100);\n+      \n+      // 5. ëª¨ë‹¬ ë‹«ê¸°\n+      setShowCompleteModal(false);\n+      setSelectedEnrollment(null);\n+      \n+      // 6. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— ì™„ë£Œ ì•Œë¦¼\n+      if (onUnpaidComplete) {\n+        onUnpaidComplete();\n+      }\n+      \n+    } catch (error) {\n+      console.error('ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n+      toast.error('ì™„ë£Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n+    } finally {\n+      setIsProcessing(false);\n+    }\n+  };\n+\n+  // ëª¨ë‹¬ ë‹«ê¸°\n+  const handleCloseCompleteModal = () => {\n+    setShowCompleteModal(false);\n+    setSelectedEnrollment(null);\n+    setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ìœ¼ë¡œ ë¦¬ì…‹\n+  };\n+\n+  const formatDate = (date: Date | null | undefined) => {\n+    return date ? new Date(date).toLocaleDateString() : '-';\n+  };\n+\n+  // ì–‘ë„ ì •ë³´ í™•ì¸ í•¨ìˆ˜\n+  const getTransferInfo = (enrollment: CourseEnrollment) => {\n+    if (!enrollment.notes) return null;\n+    \n+    const notes = enrollment.notes.toLowerCase();\n+    \n+    if (notes.includes('[ì–‘ë„]')) {\n+      // ì–‘ë„í•œ ê²½ìš°\n+      const match = enrollment.notes.match(/\\[ì–‘ë„\\].*?(\\d{4}\\.\\s*\\d{1,2}\\.\\s*\\d{1,2}).*?(.+?)ë‹˜ì—ê²Œ ì–‘ë„/);\n+      if (match) {\n+        return {\n+          type: 'transferred' as const,\n+          date: match[1],\n+          memberName: match[2]\n+        };\n+      }\n+    }\n+    \n+    if (notes.includes('[ì–‘ë„ë°›ìŒ]')) {\n+      // ì–‘ë„ë°›ì€ ê²½ìš°\n+      const match = enrollment.notes.match(/\\[ì–‘ë„ë°›ìŒ\\].*?(\\d{4}\\.\\s*\\d{1,2}\\.\\s*\\d{1,2}).*?(.+?)ë‹˜ìœ¼ë¡œë¶€í„° ì–‘ë„ë°›ìŒ/);\n+      if (match) {\n+        return {\n+          type: 'received' as const,\n+          date: match[1],\n+          memberName: match[2]\n+        };\n+      }\n+    }\n+    \n+    return null;\n+  };\n+\n+  // ê²°ì œ ë°©ë²• ì˜µì…˜\n+  const paymentMethodOptions = [\n+    { value: 'card', label: 'ì¹´ë“œ' },\n+    { value: 'cash', label: 'í˜„ê¸ˆ' },\n+    { value: 'transfer', label: 'ê³„ì¢Œì´ì²´' }\n+  ];\n+\n+  // í…Œì´ë¸” ì»¬ëŸ¼ ì •ì˜\n+  const columns: TableColumn<CourseEnrollment>[] = [\n+    {\n+      key: 'memberName',\n+      title: 'íšŒì›ëª…',\n+      width: '120px',\n+      render: (value, record) => {\n+        const transferInfo = getTransferInfo(record);\n+        return (\n+          <MemberNameContainer>\n+            <div>{record.memberName}</div>\n+            {transferInfo && (\n+              <TransferBadge $type={transferInfo.type}>\n+                {transferInfo.type === 'transferred' ? \n+                  `â†— ${transferInfo.memberName}ë‹˜ê»˜ ì–‘ë„` : \n+                  `â†˜ ${transferInfo.memberName}ë‹˜ê»˜ì„œ ì–‘ë„ë°›ìŒ`\n+                }\n+              </TransferBadge>\n+            )}\n+          </MemberNameContainer>\n+        );\n+      }\n+    },\n+    {\n+      key: 'productName',\n+      title: 'ìƒí’ˆëª…',\n+      width: '180px',\n+      render: (value, record) => (\n+        <div>\n+          <div>{record.productName}</div>\n+          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+            ID: {record.productId.slice(-8)}\n+          </div>\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'programName',\n+      title: 'í”„ë¡œê·¸ë¨',\n+      width: '150px',\n+      render: (value, record) => (\n+        <div>\n+          <div>{record.programName}</div>\n+          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+            {record.programType}\n+          </div>\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'productPrice',\n+      title: 'ìƒí’ˆê¸ˆì•¡',\n+      width: '100px',\n+      align: 'right' as const,\n+      render: (value, record) => (\n+        <div style={{ \n+          textAlign: 'right',\n+          fontSize: '14px',\n+          fontWeight: '600',\n+          color: AppColors.onBackground\n+        }}>\n+          {record.productPrice.toLocaleString()}ì›\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'progress',\n+      title: 'ì§„í–‰ìƒí™©',\n+      width: '120px',\n+      render: (value, record) => {\n+        // ì·¨ì†Œëœ ìˆ˜ê°•ê¶Œì€ ì§„í–‰ìƒí™©ì„ í‘œì‹œí•˜ì§€ ì•ŠìŒ\n+        if (record.enrollmentStatus === 'cancelled') {\n+          const transferInfo = getTransferInfo(record);\n+          if (transferInfo?.type === 'transferred') {\n+            return (\n+              <ProgressInfo style={{ color: '#ef6c00' }}>\n+                ì–‘ë„ ì™„ë£Œ\n+              </ProgressInfo>\n+            );\n+          }\n+          return (\n+            <ProgressInfo style={{ color: '#666' }}>\n+              ì·¨ì†Œë¨\n+            </ProgressInfo>\n+          );\n+        }\n+        \n+        // ìºì‹œëœ ì„¸ì…˜ ì •ë³´ ì‚¬ìš©\n+        const progressInfo = enrollmentSessions.get(record.id!) || '-';\n+        return (\n+          <ProgressInfo>\n+            {progressInfo}\n+          </ProgressInfo>\n+        );\n+      }\n+    },\n+    {\n+      key: 'branchName',\n+      title: 'ì§€ì ',\n+      width: '100px'\n+    },\n+    {\n+      key: 'coachName',\n+      title: 'ë‹´ë‹¹ì½”ì¹˜',\n+      width: '100px'\n+    },\n+    {\n+      key: 'payment',\n+      title: 'ê²°ì œì •ë³´',\n+      width: '140px',\n+      align: 'right' as const,\n+      render: (value, record) => (\n+        <PriceInfo>\n+          <PaidAmount>\n+            ì ìš©: {(record.appliedPrice || record.paidAmount).toLocaleString()}ì›\n+          </PaidAmount>\n+          <div style={{ fontSize: '12px', color: AppColors.onInput1, marginTop: '2px' }}>\n+            ìˆ˜ë‚©: {record.paidAmount.toLocaleString()}ì›\n+          </div>\n+          <UnpaidAmount $hasUnpaid={record.unpaidAmount > 0}>\n+            {record.unpaidAmount > 0 ? \n+              `ë¯¸ìˆ˜: ${record.unpaidAmount.toLocaleString()}ì›` : \n+              'ì™„ë‚©'\n+            }\n+          </UnpaidAmount>\n+          {record.appliedPrice && record.productPrice !== record.appliedPrice && (\n+            <div style={{ \n+              fontSize: '11px', \n+              color: record.appliedPrice > record.productPrice ? '#dc3545' : '#28a745',\n+              marginTop: '2px'\n+            }}>\n+              {record.appliedPrice > record.productPrice ? 'ì¶”ê°€' : 'í• ì¸'}\n+              {record.appliedPrice > record.productPrice ? '+' : ''}\n+              {(record.appliedPrice - record.productPrice).toLocaleString()}ì›\n+            </div>\n+          )}\n+        </PriceInfo>\n+      )\n+    },\n+    {\n+      key: 'connection',\n+      title: 'ì—°ê²°ì •ë³´',\n+      width: '140px',\n+      render: (value, record) => (\n+        <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+          <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n+            ìˆ˜ê°• ID: {record.id.slice(-8)}\n+          </div>\n+          <div style={{ marginTop: '2px', fontSize: '11px' }}>\n+            ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n+          </div>\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'period',\n+      title: 'ìˆ˜ê°•ê¸°ê°„',\n+      width: '140px',\n+      render: (value, record) => (\n+        <div>\n+          <div>{formatDate(record.startDate)}</div>\n+          {record.endDate && (\n+            <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+              ~ {formatDate(record.endDate)}\n+            </div>\n+          )}\n+        </div>\n+      )\n+    },\n+    {\n+      key: 'enrollmentStatus',\n+      title: 'ìƒíƒœ',\n+      width: '80px',\n+      align: 'center' as const,\n+      render: (value, record) => (\n+        <StatusBadge \n+          $status={record.enrollmentStatus}\n+          $clickable={record.enrollmentStatus === 'unpaid'}\n+          onClick={record.enrollmentStatus === 'unpaid' ? (e) => {\n+            e.stopPropagation(); // row í´ë¦­ ì´ë²¤íŠ¸ ì°¨ë‹¨\n+            handleUnpaidClick(record);\n+          } : undefined}\n+          title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n+        >\n+          {(() => {\n+            switch (record.enrollmentStatus) {\n+              case 'active': return 'ìˆ˜ê°•ì¤‘';\n+              case 'completed': return 'ì™„ë£Œ';\n+              case 'suspended': return 'ì¤‘ë‹¨';\n+              case 'cancelled': return 'ì·¨ì†Œ';\n+              case 'unpaid': return 'ë¯¸ìˆ˜';\n+              case 'hold': return 'í™€ë“œ';\n+              default: return record.enrollmentStatus;\n+            }\n+          })()}\n+        </StatusBadge>\n+      )\n+    }\n+  ];\n+\n+  // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n+  const resultCountInfo = (\n+    <>\n+      {showUnpaidOnlyState ? 'ë¯¸ìˆ˜ ìˆ˜ê°•: ' : ''}{filteredEnrollments.length}ê±´ \n+      (ì™„ë£Œ: {filteredEnrollments.filter(e => e.enrollmentStatus === 'completed').length}ê±´, \n+      ë¯¸ìˆ˜: {filteredEnrollments.filter(e => e.enrollmentStatus === 'unpaid').length}ê±´)\n+      <br />\n+      <span style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n+        ê¸°ê°„: {getDateRangeDisplay()} | ì „ì²´: {courseEnrollments.length}ê±´\n+      </span>\n+    </>\n+  );\n+\n+  if (loading) {\n+    return (\n+      <PageContainer>\n+        <DataTable\n+          title=\"ìˆ˜ê°• ì´ë ¥\"\n+          columns={columns}\n+          data={[]}\n+          loading={true}\n+        />\n+      </PageContainer>\n+    );\n+  }\n+\n+  return (\n+    <PageContainer>\n+      {/* SearchAreaëŠ” ëª¨ë‹¬ì´ ì•„ë‹ ë•Œë§Œ í‘œì‹œ */}\n+      {!isModal && (\n+        <SearchArea\n+        leftContent={\n+          <div style={{ display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n+            <Button onClick={handleOpenRegistrationModal}>\n+              + ìƒˆ ìˆ˜ê°• ë“±ë¡\n+            </Button>\n+            <UnpaidFilter\n+              active={showUnpaidOnlyState}\n+              unpaidCount={unpaidMetaInfo.unpaidCourseCount}\n+              totalAmount={unpaidMetaInfo.totalUnpaidAmount}\n+              onClick={() => setShowUnpaidOnlyState(!showUnpaidOnlyState)}\n+            />\n+          </div>\n+        }\n+        selectedPeriod={selectedPeriod}\n+        onPeriodChange={setSelectedPeriod}\n+        customStartDate={customStartDate}\n+        customEndDate={customEndDate}\n+        onCustomStartDateChange={setCustomStartDate}\n+        onCustomEndDateChange={setCustomEndDate}\n+        dateRangeDisplay={getDateRangeDisplay()}\n+        searchValue={searchQuery}\n+        onSearchChange={setSearchQuery}\n+        onSearch={handleSearch}\n+        searchPlaceholder=\"íšŒì›ëª…, ìƒí’ˆëª…, í”„ë¡œê·¸ë¨ëª…, ì§€ì ëª…, ì½”ì¹˜ëª…ìœ¼ë¡œ ê²€ìƒ‰...\"\n+        autoSearchOnDateChange={false}\n+      />\n+      )}\n+\n+      <DataTable\n+        title=\"ìˆ˜ê°• ì´ë ¥\"\n+        columns={columns}\n+        data={filteredEnrollments}\n+        loading={loading}\n+        emptyText=\"ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤\"\n+        emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n+        resultCount={resultCountInfo}\n+        onRowClick={(record) => {\n+          // ê´€ë¦¬ ê°€ëŠ¥í•œ ìˆ˜ê°•ê¶Œë§Œ í´ë¦­ ê°€ëŠ¥ (active, unpaid, hold ìƒíƒœ)\n+          if (record.enrollmentStatus === 'active' || record.enrollmentStatus === 'unpaid' || record.enrollmentStatus === 'hold') {\n+            handleOpenTransferModal(record);\n+          }\n+        }}\n+        pagination={{\n+          enabled: true,\n+          pageSize: 15,\n+          pageSizeOptions: [15, 30, 100],\n+          showTotal: true\n+        }}\n+      />\n+\n+      {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n+      <CourseRegistrationModal\n+        isOpen={showRegistrationModal}\n+        onClose={handleCloseRegistrationModal}\n+        onSuccess={handleRegistrationSuccess}\n+      />\n+\n+      {/* ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ */}\n+      {showCompleteModal && selectedEnrollment && (\n+        <Modal \n+          isOpen={showCompleteModal}\n+          onClose={handleCloseCompleteModal}\n+          width=\"min(95vw, 500px)\"\n+          header=\"ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬\"\n+          body={\n+            <ModalContent>\n+              <WarningText>\n+                âš ï¸ ë¯¸ìˆ˜ê¸ˆì„ ì™„ë£Œ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n+              </WarningText>\n+\n+              <InfoRow>\n+                <InfoLabel>ê²°ì œ ë°©ë²•:</InfoLabel>\n+                <div style={{ flex: 1, marginLeft: '12px' }}>\n+                  <CustomDropdown\n+                    value={selectedPaymentMethod}\n+                    onChange={setSelectedPaymentMethod}\n+                    options={paymentMethodOptions}\n+                    inModal={true}\n+                  />\n+                </div>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>íšŒì›ëª…:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.memberName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ìƒí’ˆëª…:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.productName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>í”„ë¡œê·¸ë¨:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.programName} ({selectedEnrollment.programType})</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ì§€ì :</InfoLabel>\n+                <InfoValue>{selectedEnrollment.branchName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ë‹´ë‹¹ì½”ì¹˜:</InfoLabel>\n+                <InfoValue>{selectedEnrollment.coachName}</InfoValue>\n+              </InfoRow>\n+              \n+              <InfoRow>\n+                <InfoLabel>ë¯¸ìˆ˜ê¸ˆì•¡:</InfoLabel>\n+                <ModalUnpaidAmount>{selectedEnrollment.unpaidAmount?.toLocaleString() || 0}ì›</ModalUnpaidAmount>\n+              </InfoRow>\n+              \n+              <div style={{ \n+                padding: '12px', \n+                backgroundColor: '#f0f9ff', \n+                border: '1px solid #93c5fd', \n+                borderRadius: '8px',\n+                fontSize: '14px',\n+                color: '#1e40af',\n+                marginTop: '16px'\n+              }}>\n+                ğŸ’¡ ì™„ë£Œ ì²˜ë¦¬ ì‹œ í•´ë‹¹ ê¸ˆì•¡ì´ ê²°ì œ ë‚´ì—­ì— ìë™ìœ¼ë¡œ ë“±ë¡ë©ë‹ˆë‹¤.<br/>\n+                ìˆ˜ê°• ìƒíƒœëŠ” ë‚¨ì€ ê¸°ê°„/íšŸìˆ˜ì— ë”°ë¼ 'ìˆ˜ê°•ì¤‘' ë˜ëŠ” 'ì™„ë£Œ'ë¡œ ìë™ ë³€ê²½ë©ë‹ˆë‹¤.\n+              </div>\n+            </ModalContent>\n+          }\n+          footer={\n+            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px', width: '100%' }}>\n+              <Button variant=\"secondary\" onClick={handleCloseCompleteModal} disabled={isProcessing}>\n+                ì·¨ì†Œ\n+              </Button>\n+              <Button onClick={handleCompletePayment} disabled={isProcessing}>\n+                {isProcessing ? 'ì²˜ë¦¬ ì¤‘...' : 'ì™„ë£Œ ì²˜ë¦¬'}\n+              </Button>\n+            </div>\n+          }\n+        />\n+      )}\n+\n+      {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n+      <CourseManagementModal\n+        isOpen={showTransferModal}\n+        onClose={handleCloseTransferModal}\n+        onSuccess={handleTransferSuccess}\n+        courseEnrollment={selectedForTransfer}\n+      />\n+    </PageContainer>\n+  );\n+};\n+\n+export default CourseHistory;\n"
                },
                {
                    "date": 1765689923227,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -387,9 +387,8 @@\n       const currentStartDate = startDate ?? customStartDate;\n       const currentEndDate = endDate ?? customEndDate;\n       \n       let dateRange: { start: Date; end: Date };\n-      const today = new Date();\n       const rangeStartDate = new Date();\n       \n       switch (currentPeriod) {\n         case '1month':\n@@ -1059,1056 +1058,4 @@\n   );\n };\n \n export default CourseHistory;\n-import React, { useState, useEffect, useCallback } from 'react';\n-import styled from 'styled-components';\n-import { toast } from 'react-toastify';\n-import { AppColors } from '../../../styles/colors';\n-import { AppTextStyles } from '../../../styles/textStyles';\n-import { dbManager, type CourseEnrollment } from '../../../utils/indexedDB';\n-import { getCompletedSessions } from '../../../utils/db/ReservationHelper';\n-import { SearchArea, type PeriodOption } from '../../../components/SearchArea';\n-import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n-import Modal from '../../../components/Modal';\n-import CustomDropdown from '../../../components/CustomDropdown';\n-import DataTable, { type TableColumn } from '../../../components/DataTable';\n-import CourseRegistrationModal from './CourseRegistrationModal';\n-import CourseManagementModal from './CourseManagementModal';\n-\n-const PageContainer = styled.div`\n-  width: 100%;\n-`;\n-\n-const StatusBadge = styled.span<{ $status: 'active' | 'completed' | 'suspended' | 'cancelled' | 'unpaid' | 'hold'; $clickable?: boolean }>`\n-  padding: 4px 8px;\n-  border-radius: 12px;\n-  font-size: 12px;\n-  font-weight: 500;\n-  background: ${props => {\n-    switch (props.$status) {\n-      case 'completed': return '#e7f5e7';\n-      case 'active': return '#e3f2fd';\n-      case 'suspended': return '#fff3e0';\n-      case 'cancelled': return '#fce4ec';\n-      case 'unpaid': return '#fff2f2';\n-      case 'hold': return '#fff3e0';\n-      default: return '#f5f5f5';\n-    }\n-  }};\n-  color: ${props => {\n-    switch (props.$status) {\n-      case 'completed': return '#2d5a2d';\n-      case 'active': return '#1565c0';\n-      case 'suspended': return '#ef6c00';\n-      case 'cancelled': return '#c2185b';\n-      case 'unpaid': return '#8b1538';\n-      case 'hold': return '#ef6c00';\n-      default: return '#424242';\n-    }\n-  }};\n-  cursor: ${props => props.$clickable ? 'pointer' : 'default'};\n-  transition: all 0.2s;\n-  \n-  &:hover {\n-    opacity: ${props => props.$clickable ? 0.8 : 1};\n-    transform: ${props => props.$clickable ? 'translateY(-1px)' : 'none'};\n-  }\n-`;\n-\n-const ProgressInfo = styled.div`\n-  font-size: 12px;\n-  color: ${AppColors.onInput1};\n-  margin-top: 4px;\n-`;\n-\n-const PriceInfo = styled.div`\n-  text-align: right;\n-`;\n-\n-const PaidAmount = styled.div`\n-  color: ${AppColors.primary};\n-  font-weight: 600;\n-`;\n-\n-const UnpaidAmount = styled.div<{ $hasUnpaid: boolean }>`\n-  color: ${props => props.$hasUnpaid ? '#d32f2f' : AppColors.onInput1};\n-  font-size: 12px;\n-  margin-top: 2px;\n-`;\n-\n-const Button = styled.button<{ variant?: 'primary' | 'secondary' }>`\n-  padding: 12px 18px;\n-  border: ${props => props.variant === 'secondary' ? `1px solid ${AppColors.borderLight}` : 'none'};\n-  border-radius: 8px;\n-  background: ${props => props.variant === 'secondary' ? AppColors.surface : AppColors.primary};\n-  color: ${props => props.variant === 'secondary' ? AppColors.onSurface : AppColors.onPrimary};\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  font-weight: 600;\n-  cursor: pointer;\n-  transition: all 0.2s;\n-  \n-  &:hover {\n-    opacity: 0.9;\n-    transform: translateY(-1px);\n-  }\n-  \n-  &:disabled {\n-    opacity: 0.5;\n-    cursor: not-allowed;\n-    transform: none;\n-  }\n-`;\n-\n-const ModalContent = styled.div`\n-  text-align: left;\n-`;\n-\n-const InfoRow = styled.div`\n-  display: flex;\n-  justify-content: space-between;\n-  align-items: center;\n-  padding: 12px 0;\n-  border-bottom: 1px solid ${AppColors.borderLight};\n-  \n-  &:last-child {\n-    border-bottom: none;\n-  }\n-`;\n-\n-const InfoLabel = styled.span`\n-  font-weight: 600;\n-  color: ${AppColors.onBackground};\n-`;\n-\n-const InfoValue = styled.span`\n-  color: ${AppColors.onInput1};\n-`;\n-\n-const ModalUnpaidAmount = styled.span`\n-  color: #d32f2f;\n-  font-weight: 600;\n-  font-size: 16px;\n-`;\n-\n-const WarningText = styled.div`\n-  background: #fff3cd;\n-  border: 1px solid #ffeaa7;\n-  border-radius: 8px;\n-  padding: 12px;\n-  color: #856404;\n-  font-size: 14px;\n-  text-align: center;\n-`;\n-\n-const TransferBadge = styled.span<{ $type: 'transferred' | 'received' }>`\n-  display: inline-flex;\n-  align-items: center;\n-  gap: 4px;\n-  padding: 2px 6px;\n-  border-radius: 4px;\n-  font-size: 10px;\n-  font-weight: 600;\n-  background: ${props => props.$type === 'transferred' ? '#fff3e0' : '#e8f5e8'};\n-  color: ${props => props.$type === 'transferred' ? '#ef6c00' : '#2e7d32'};\n-  border: 1px solid ${props => props.$type === 'transferred' ? '#ffcc02' : '#81c784'};\n-  margin-bottom: 2px;\n-`;\n-\n-const MemberNameContainer = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  gap: 2px;\n-`;\n-\n-interface CourseHistoryProps {\n-  preselectedMemberId?: string;\n-  showUnpaidOnly?: boolean;\n-  onUnpaidComplete?: () => void;\n-  isModal?: boolean;\n-}\n-\n-const CourseHistory: React.FC<CourseHistoryProps> = ({ \n-  preselectedMemberId, \n-  showUnpaidOnly = false, \n-  onUnpaidComplete,\n-  isModal = false \n-}) => {\n-  const [searchQuery, setSearchQuery] = useState<string>('');\n-  const [courseEnrollments, setCourseEnrollments] = useState<CourseEnrollment[]>([]);\n-  const [filteredEnrollments, setFilteredEnrollments] = useState<CourseEnrollment[]>([]);\n-  const [loading, setLoading] = useState<boolean>(true);\n-  \n-  // ê¸°ê°„ ì„ íƒ ê´€ë ¨ ìƒíƒœ\n-  const [selectedPeriod, setSelectedPeriod] = useState<PeriodOption>('1month');\n-  const [customStartDate, setCustomStartDate] = useState<string>('');\n-  const [customEndDate, setCustomEndDate] = useState<string>('');\n-  \n-  // ë¯¸ìˆ˜ í•„í„° ê´€ë ¨ ìƒíƒœ\n-  const [showUnpaidOnlyState, setShowUnpaidOnlyState] = useState<boolean>(showUnpaidOnly);\n-  const [unpaidMetaInfo, setUnpaidMetaInfo] = useState<{ unpaidCourseCount: number; totalUnpaidAmount: number }>({\n-    unpaidCourseCount: 0,\n-    totalUnpaidAmount: 0\n-  });\n-  \n-  // ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n-  const [showCompleteModal, setShowCompleteModal] = useState<boolean>(false);\n-  const [selectedEnrollment, setSelectedEnrollment] = useState<CourseEnrollment | null>(null);\n-  \n-  // ì„¸ì…˜ ì •ë³´ ìºì‹œ (enrollmentId -> progressInfo)\n-  const [enrollmentSessions, setEnrollmentSessions] = useState<Map<string, string>>(new Map());\n-  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n-  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState<string>('card');\n-\n-  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n-  const [showRegistrationModal, setShowRegistrationModal] = useState<boolean>(false);\n-\n-  // ì–‘ë„ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n-  const [showTransferModal, setShowTransferModal] = useState<boolean>(false);\n-  const [selectedForTransfer, setSelectedForTransfer] = useState<CourseEnrollment | null>(null);\n-\n-  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ì„±ê³µ ì²˜ë¦¬\n-  const handleRegistrationSuccess = async () => {\n-    // ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n-    await loadCourseEnrollments();\n-    // í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n-    setTimeout(() => {\n-      handleSearch();\n-    }, 100);\n-  };\n-\n-  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ì—´ê¸°\n-  const handleOpenRegistrationModal = () => {\n-    setShowRegistrationModal(true);\n-  };\n-\n-  // ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ ë‹«ê¸°\n-  const handleCloseRegistrationModal = () => {\n-    setShowRegistrationModal(false);\n-  };\n-\n-  // ì–‘ë„ ëª¨ë‹¬ ì—´ê¸°\n-  const handleOpenTransferModal = (enrollment: CourseEnrollment) => {\n-    setSelectedForTransfer(enrollment);\n-    setShowTransferModal(true);\n-  };\n-\n-  // ì–‘ë„ ëª¨ë‹¬ ë‹«ê¸°\n-  const handleCloseTransferModal = () => {\n-    setShowTransferModal(false);\n-    setSelectedForTransfer(null);\n-  };\n-\n-  // ì–‘ë„ ì„±ê³µ ì²˜ë¦¬\n-  const handleTransferSuccess = async () => {\n-    // ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n-    await loadCourseEnrollments();\n-    // í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n-    setTimeout(() => {\n-      handleSearch();\n-    }, 100);\n-  };\n-\n-  // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n-  const loadUnpaidMetaInfo = useCallback(async () => {\n-    try {\n-      const allEnrollments = await dbManager.getAllCourseEnrollments();\n-      const unpaidEnrollments = allEnrollments.filter(e => e.enrollmentStatus === 'unpaid');\n-      const unpaidCourseCount = unpaidEnrollments.length;\n-      const totalUnpaidAmount = unpaidEnrollments.reduce((sum, e) => sum + (e.unpaidAmount || 0), 0);\n-      \n-      setUnpaidMetaInfo({ unpaidCourseCount, totalUnpaidAmount });\n-    } catch (error) {\n-      console.error('ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);\n-    }\n-  }, []);\n-\n-  // ì§„í–‰ìƒí™© ê³„ì‚° í•¨ìˆ˜\n-  const getProgressInfo = useCallback(async (enrollment: CourseEnrollment): Promise<string> => {\n-    if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n-      // ì´ë²¤íŠ¸ ì†Œì‹±: ì‹¤ì‹œê°„ ì™„ë£Œ íšŸìˆ˜ ê³„ì‚°\n-      const completedSessions = await getCompletedSessions(enrollment.id);\n-      const remaining = enrollment.sessionCount - completedSessions;\n-      return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n-    } else if (enrollment.programType === 'ê¸°ê°„ì œ' && enrollment.endDate) {\n-      const today = new Date();\n-      const endDate = new Date(enrollment.endDate);\n-      const timeDiff = endDate.getTime() - today.getTime();\n-      const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n-      \n-      if (daysDiff > 0) {\n-        return `${daysDiff}ì¼ ë‚¨ìŒ`;\n-      } else if (daysDiff === 0) {\n-        return 'ì˜¤ëŠ˜ ì¢…ë£Œ';\n-      } else {\n-        return `${Math.abs(daysDiff)}ì¼ ê²½ê³¼`;\n-      }\n-    }\n-    return 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n-  }, []);\n-\n-  // ê¸°ê°„ë³„ ê²€ìƒ‰ ë²”ìœ„ ê³„ì‚°\n-  const getDateRange = useCallback(() => {\n-    const today = new Date();\n-    const startDate = new Date();\n-    \n-    switch (selectedPeriod) {\n-      case '1month':\n-        startDate.setMonth(today.getMonth() - 1);\n-        return { start: startDate, end: today };\n-      case '3month':\n-        startDate.setMonth(today.getMonth() - 3);\n-        return { start: startDate, end: today };\n-      case '6month':\n-        startDate.setMonth(today.getMonth() - 6);\n-        return { start: startDate, end: today };\n-      case 'custom':\n-        if (customStartDate && customEndDate) {\n-          return { \n-            start: new Date(customStartDate), \n-            end: new Date(customEndDate) \n-          };\n-        }\n-        // ì»¤ìŠ¤í…€ ë‚ ì§œê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ 1ê°œì›”\n-        startDate.setMonth(today.getMonth() - 1);\n-        return { start: startDate, end: today };\n-      default:\n-        startDate.setMonth(today.getMonth() - 1);\n-        return { start: startDate, end: today };\n-    }\n-  }, [selectedPeriod, customStartDate, customEndDate]);\n-\n-  // ë‚ ì§œ ë²”ìœ„ í‘œì‹œ ë¬¸ìì—´ ìƒì„±\n-  const getDateRangeDisplay = useCallback(() => {\n-    const range = getDateRange();\n-    const formatDate = (date: Date) => {\n-      return date.toLocaleDateString('ko-KR', {\n-        year: 'numeric',\n-        month: 'short',\n-        day: 'numeric'\n-      });\n-    };\n-    return `${formatDate(range.start)} ~ ${formatDate(range.end)}`;\n-  }, [getDateRange]);\n-\n-  const loadCourseEnrollments = useCallback(async (period?: PeriodOption, startDate?: string, endDate?: string) => {\n-    try {\n-      setLoading(true);\n-      console.log('ìˆ˜ê°• ë°ì´í„° ë¡œë”© ì‹œì‘...');\n-      \n-      // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n-      await loadUnpaidMetaInfo();\n-      \n-      const allEnrollments = await dbManager.getAllCourseEnrollments();\n-      console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥ ìˆ˜:', allEnrollments.length);\n-      \n-      // ë§Œë£Œ ì²˜ë¦¬ ë¡œì§ ì„ì‹œ ë¹„í™œì„±í™” (ë°ì´í„° í™•ì¸ìš©)\n-      const updatedEnrollments = allEnrollments;\n-      \n-      console.log('=== ë°ì´í„° ë¡œë“œ ë””ë²„ê¹… ===');\n-      console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥:', allEnrollments.length);\n-      console.log('ìˆ˜ê°• ì´ë ¥ ìƒì„¸:', allEnrollments.map(e => ({\n-        memberName: e.memberName,\n-        productName: e.productName,\n-        enrollmentStatus: e.enrollmentStatus,\n-        programType: e.programType,\n-        endDate: e.endDate\n-      })));\n-      \n-      // ê¸°ê°„ë³„ í•„í„°ë§ (ë“±ë¡ì¼ ê¸°ì¤€) - ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ í˜„ì¬ ìƒíƒœ ì‚¬ìš©\n-      const currentPeriod = period ?? selectedPeriod;\n-      const currentStartDate = startDate ?? customStartDate;\n-      const currentEndDate = endDate ?? customEndDate;\n-      \n-      let dateRange: { start: Date; end: Date };\n-      const today = new Date();\n-      const rangeStartDate = new Date();\n-      \n-      switch (currentPeriod) {\n-        case '1month':\n-          rangeStartDate.setMonth(today.getMonth() - 1);\n-          dateRange = { start: rangeStartDate, end: today };\n-          break;\n-        case '3month':\n-          rangeStartDate.setMonth(today.getMonth() - 3);\n-          dateRange = { start: rangeStartDate, end: today };\n-          break;\n-        case '6month':\n-          rangeStartDate.setMonth(today.getMonth() - 6);\n-          dateRange = { start: rangeStartDate, end: today };\n-          break;\n-        case 'custom':\n-          if (currentStartDate && currentEndDate) {\n-            dateRange = { \n-              start: new Date(currentStartDate), \n-              end: new Date(currentEndDate) \n-            };\n-          } else {\n-            // ì»¤ìŠ¤í…€ ë‚ ì§œê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ 1ê°œì›”\n-            rangeStartDate.setMonth(today.getMonth() - 1);\n-            dateRange = { start: rangeStartDate, end: today };\n-          }\n-          break;\n-        default:\n-          rangeStartDate.setMonth(today.getMonth() - 1);\n-          dateRange = { start: rangeStartDate, end: today };\n-      }\n-      \n-      let filteredByDate = updatedEnrollments.filter(enrollment => {\n-        const enrollmentDate = new Date(enrollment.createdAt);\n-        return enrollmentDate >= dateRange.start && enrollmentDate <= dateRange.end;\n-      });\n-      \n-      // íŠ¹ì • íšŒì› IDê°€ ì§€ì •ëœ ê²½ìš° í•´ë‹¹ íšŒì›ì˜ ìˆ˜ê°• ì´ë ¥ë§Œ í•„í„°ë§\n-      if (preselectedMemberId) {\n-        filteredByDate = filteredByDate.filter(enrollment => \n-          enrollment.memberId === preselectedMemberId\n-        );\n-        console.log(`íšŒì› ID ${preselectedMemberId}ì˜ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n-      } else {\n-        console.log(`${currentPeriod} ê¸°ê°„ ë‚´ ìˆ˜ê°• ì´ë ¥:`, filteredByDate.length);\n-      }\n-      \n-      // ìµœê·¼ ë“±ë¡ìˆœìœ¼ë¡œ ì •ë ¬ (createdAt ë‚´ë¦¼ì°¨ìˆœ)\n-      const sortedEnrollments = filteredByDate.sort((a, b) => \n-        new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n-      );\n-      \n-      console.log('=== CourseHistory ìµœì¢… ë°ì´í„° ì„¤ì • ===');\n-      console.log('sortedEnrollments ê°œìˆ˜:', sortedEnrollments.length);\n-      if (sortedEnrollments.length > 0) {\n-        console.log('ì²« ë²ˆì§¸ ìˆ˜ê°• ì´ë ¥:', sortedEnrollments[0]);\n-        console.log('=== IndexedDB ìˆ˜ê°• ì´ë ¥ ìƒì„¸ ë¶„ì„ (ìµœê·¼ 5ê°œ) ===');\n-        sortedEnrollments.slice(0, 5).forEach((enrollment, index) => {\n-          console.log(`\\n[${index + 1}] ${enrollment.memberName} - ${enrollment.productName}`);\n-          console.log('  - programType:', enrollment.programType);\n-          console.log('  - startDate:', enrollment.startDate);\n-          console.log('  - endDate:', enrollment.endDate);\n-          console.log('  - createdAt:', enrollment.createdAt);\n-          console.log('  - sessionCount:', enrollment.sessionCount);\n-          console.log('  - ì „ì²´ ê°ì²´:', enrollment);\n-        });\n-      }\n-      \n-      setCourseEnrollments(sortedEnrollments);\n-      setFilteredEnrollments(sortedEnrollments);\n-      \n-      // ì„¸ì…˜ ì •ë³´ ë¯¸ë¦¬ ê³„ì‚°\n-      const sessionsMap = new Map<string, string>();\n-      for (const enrollment of sortedEnrollments) {\n-        const progressInfo = await getProgressInfo(enrollment);\n-        sessionsMap.set(enrollment.id!, progressInfo);\n-      }\n-      setEnrollmentSessions(sessionsMap);\n-      \n-      console.log('ìˆ˜ê°• ì´ë ¥ ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ');\n-    } catch (error) {\n-      console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n-    } finally {\n-      setLoading(false);\n-    }\n-  }, [loadUnpaidMetaInfo, selectedPeriod, customStartDate, customEndDate, getProgressInfo]);\n-\n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì´ˆê¸° ë°ì´í„° ë¡œë“œ (1ê°œì›” ê¸°ì¤€)\n-  useEffect(() => {\n-    const initializeData = async () => {\n-      await loadCourseEnrollments();\n-    };\n-    initializeData();\n-  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n-\n-  // í•„í„° ì ìš© í•¨ìˆ˜ (ë°ì´í„° ë¡œë“œì™€ ë¶„ë¦¬)\n-  const applyFilters = useCallback(() => {\n-    let filtered = courseEnrollments;\n-    \n-    // ë¯¸ìˆ˜ í•„í„° ì ìš©\n-    if (showUnpaidOnlyState) {\n-      filtered = filtered.filter(enrollment => enrollment.enrollmentStatus === 'unpaid');\n-    }\n-    \n-    // í…ìŠ¤íŠ¸ ê²€ìƒ‰\n-    if (searchQuery.trim()) {\n-      const query = searchQuery.toLowerCase().trim();\n-      filtered = filtered.filter(enrollment =>\n-        enrollment.memberName.toLowerCase().includes(query) ||\n-        enrollment.productName.toLowerCase().includes(query) ||\n-        enrollment.programName.toLowerCase().includes(query) ||\n-        enrollment.branchName.toLowerCase().includes(query) ||\n-        enrollment.coachName.toLowerCase().includes(query)\n-      );\n-    }\n-    \n-    setFilteredEnrollments(filtered);\n-  }, [courseEnrollments, showUnpaidOnlyState, searchQuery]);\n-\n-  // ë°ì´í„°ë‚˜ í•„í„° ì¡°ê±´ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•„í„° ì ìš©\n-  useEffect(() => {\n-    applyFilters();\n-  }, [applyFilters]);\n-\n-  const handleSearch = async () => {\n-    // í˜„ì¬ ì„ íƒëœ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤\n-    await loadCourseEnrollments(selectedPeriod, customStartDate, customEndDate);\n-  };\n-\n-  // ë¯¸ìˆ˜ ìƒíƒœ í´ë¦­ ì²˜ë¦¬\n-  const handleUnpaidClick = (enrollment: CourseEnrollment) => {\n-    setSelectedEnrollment(enrollment);\n-    setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ì„ ì¹´ë“œë¡œ ì„¤ì •\n-    setShowCompleteModal(true);\n-  };\n-\n-  // ì™„ë£Œ ì²˜ë¦¬ í™•ì¸\n-  const handleCompletePayment = async () => {\n-    if (!selectedEnrollment) return;\n-\n-    try {\n-      setIsProcessing(true);\n-\n-      // 1. ë¯¸ìˆ˜ ì™„ë£Œ í›„ ìƒíƒœ ê²°ì • ë¡œì§\n-      let newEnrollmentStatus: 'active' | 'completed' = 'active'; // ê¸°ë³¸ì ìœ¼ë¡œ í™œì„± ìƒíƒœ\n-      \n-      // ìˆ˜ê°• ì™„ë£Œ ì¡°ê±´ ì²´í¬\n-      if (selectedEnrollment.programType === 'íšŸìˆ˜ì œ' && selectedEnrollment.sessionCount) {\n-        // íšŸìˆ˜ì œ: ì™„ë£Œ íšŸìˆ˜ê°€ ì´ íšŸìˆ˜ì™€ ê°™ê±°ë‚˜ ë§ìœ¼ë©´ ì™„ë£Œ\n-        const completedSessions = selectedEnrollment.completedSessions || 0;\n-        if (completedSessions >= selectedEnrollment.sessionCount) {\n-          newEnrollmentStatus = 'completed';\n-        }\n-      } else if (selectedEnrollment.programType === 'ê¸°ê°„ì œ' && selectedEnrollment.endDate) {\n-        // ê¸°ê°„ì œ: ì¢…ë£Œì¼ì´ ì§€ë‚¬ìœ¼ë©´ ì™„ë£Œ\n-        const today = new Date();\n-        const endDate = new Date(selectedEnrollment.endDate);\n-        if (endDate <= today) {\n-          newEnrollmentStatus = 'completed';\n-        }\n-      }\n-\n-      const updatedEnrollment: CourseEnrollment = {\n-        ...selectedEnrollment,\n-        enrollmentStatus: newEnrollmentStatus, // ì¡°ê±´ì— ë”°ë¼ active ë˜ëŠ” completed\n-        paidAmount: selectedEnrollment.productPrice, // ìƒí’ˆ ì „ì²´ ê¸ˆì•¡ìœ¼ë¡œ ì„¤ì •\n-        unpaidAmount: 0\n-      };\n-\n-      await dbManager.updateCourseEnrollment(selectedEnrollment.id, updatedEnrollment);\n-\n-      // 2. ê²°ì œ ë°ì´í„° ìƒì„± ë° ì €ì¥\n-      const paymentData = {\n-        memberId: selectedEnrollment.memberId,\n-        memberName: selectedEnrollment.memberName,\n-        branchId: selectedEnrollment.branchId,\n-        branchName: selectedEnrollment.branchName,\n-        coach: selectedEnrollment.coach,\n-        coachName: selectedEnrollment.coachName,\n-        paymentMethod: selectedPaymentMethod, // ì‚¬ìš©ìê°€ ì„ íƒí•œ ê²°ì œ ë°©ë²• ì‚¬ìš©\n-        paymentStatus: 'completed' as const, // ì™„ë£Œ ìƒíƒœë¡œ ì„¤ì •\n-        totalAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n-        paidAmount: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n-        unpaidAmount: 0, // ì™„ë£Œ ì²˜ë¦¬ì´ë¯€ë¡œ 0\n-        paymentDate: new Date(),\n-        // ìˆ˜ê°•/ìì‚° êµ¬ë¶„ ë° ì—°ê²° ì •ë³´ ì¶”ê°€\n-        paymentType: 'course' as const, // 'course' | 'asset' | 'other'\n-        relatedCourseId: selectedEnrollment.id, // ìˆ˜ê°• ì´ë ¥ IDë¡œ ì—°ê²°\n-        relatedAssetId: null, // ìì‚° ê´€ë ¨ ê²°ì œê°€ ì•„ë‹ˆë¯€ë¡œ null\n-        products: [{\n-          id: selectedEnrollment.productId,\n-          name: selectedEnrollment.productName,\n-          price: selectedEnrollment.unpaidAmount || 0, // ì´ë²ˆì— ë°›ëŠ” ê¸ˆì•¡\n-          quantity: 1,\n-          programId: selectedEnrollment.programId,\n-          programName: selectedEnrollment.programName,\n-          programType: selectedEnrollment.programType\n-        }],\n-        memo: `ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬ - ${selectedEnrollment.productName} (ìˆ˜ê°• ID: ${selectedEnrollment.id})`\n-      };\n-\n-      await dbManager.addPayment(paymentData);\n-\n-      // ê²°ì œ ë°©ë²•ë³„ ë©”ì‹œì§€ í‘œì‹œ\n-      const paymentMethodLabels: { [key: string]: string } = {\n-        'card': 'ì¹´ë“œ',\n-        'cash': 'í˜„ê¸ˆ',\n-        'transfer': 'ê³„ì¢Œì´ì²´'\n-      };\n-      const paymentMethodLabel = paymentMethodLabels[selectedPaymentMethod] || 'ì¹´ë“œ';\n-      \n-      toast.success(`ë¯¸ìˆ˜ê¸ˆì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. (ê²°ì œë°©ë²•: ${paymentMethodLabel})`);\n-      \n-      // 3. ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n-      await loadCourseEnrollments();\n-      \n-      // 4. í˜„ì¬ ê²€ìƒ‰ ì¡°ê±´ìœ¼ë¡œ ë‹¤ì‹œ í•„í„°ë§\n-      setTimeout(() => {\n-        handleSearch();\n-      }, 100);\n-      \n-      // 5. ëª¨ë‹¬ ë‹«ê¸°\n-      setShowCompleteModal(false);\n-      setSelectedEnrollment(null);\n-      \n-      // 6. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— ì™„ë£Œ ì•Œë¦¼\n-      if (onUnpaidComplete) {\n-        onUnpaidComplete();\n-      }\n-      \n-    } catch (error) {\n-      console.error('ì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n-      toast.error('ì™„ë£Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n-    } finally {\n-      setIsProcessing(false);\n-    }\n-  };\n-\n-  // ëª¨ë‹¬ ë‹«ê¸°\n-  const handleCloseCompleteModal = () => {\n-    setShowCompleteModal(false);\n-    setSelectedEnrollment(null);\n-    setSelectedPaymentMethod('card'); // ê¸°ë³¸ê°’ìœ¼ë¡œ ë¦¬ì…‹\n-  };\n-\n-  const formatDate = (date: Date | null | undefined) => {\n-    return date ? new Date(date).toLocaleDateString() : '-';\n-  };\n-\n-  // ì–‘ë„ ì •ë³´ í™•ì¸ í•¨ìˆ˜\n-  const getTransferInfo = (enrollment: CourseEnrollment) => {\n-    if (!enrollment.notes) return null;\n-    \n-    const notes = enrollment.notes.toLowerCase();\n-    \n-    if (notes.includes('[ì–‘ë„]')) {\n-      // ì–‘ë„í•œ ê²½ìš°\n-      const match = enrollment.notes.match(/\\[ì–‘ë„\\].*?(\\d{4}\\.\\s*\\d{1,2}\\.\\s*\\d{1,2}).*?(.+?)ë‹˜ì—ê²Œ ì–‘ë„/);\n-      if (match) {\n-        return {\n-          type: 'transferred' as const,\n-          date: match[1],\n-          memberName: match[2]\n-        };\n-      }\n-    }\n-    \n-    if (notes.includes('[ì–‘ë„ë°›ìŒ]')) {\n-      // ì–‘ë„ë°›ì€ ê²½ìš°\n-      const match = enrollment.notes.match(/\\[ì–‘ë„ë°›ìŒ\\].*?(\\d{4}\\.\\s*\\d{1,2}\\.\\s*\\d{1,2}).*?(.+?)ë‹˜ìœ¼ë¡œë¶€í„° ì–‘ë„ë°›ìŒ/);\n-      if (match) {\n-        return {\n-          type: 'received' as const,\n-          date: match[1],\n-          memberName: match[2]\n-        };\n-      }\n-    }\n-    \n-    return null;\n-  };\n-\n-  // ê²°ì œ ë°©ë²• ì˜µì…˜\n-  const paymentMethodOptions = [\n-    { value: 'card', label: 'ì¹´ë“œ' },\n-    { value: 'cash', label: 'í˜„ê¸ˆ' },\n-    { value: 'transfer', label: 'ê³„ì¢Œì´ì²´' }\n-  ];\n-\n-  // í…Œì´ë¸” ì»¬ëŸ¼ ì •ì˜\n-  const columns: TableColumn<CourseEnrollment>[] = [\n-    {\n-      key: 'memberName',\n-      title: 'íšŒì›ëª…',\n-      width: '120px',\n-      render: (value, record) => {\n-        const transferInfo = getTransferInfo(record);\n-        return (\n-          <MemberNameContainer>\n-            <div>{record.memberName}</div>\n-            {transferInfo && (\n-              <TransferBadge $type={transferInfo.type}>\n-                {transferInfo.type === 'transferred' ? \n-                  `â†— ${transferInfo.memberName}ë‹˜ê»˜ ì–‘ë„` : \n-                  `â†˜ ${transferInfo.memberName}ë‹˜ê»˜ì„œ ì–‘ë„ë°›ìŒ`\n-                }\n-              </TransferBadge>\n-            )}\n-          </MemberNameContainer>\n-        );\n-      }\n-    },\n-    {\n-      key: 'productName',\n-      title: 'ìƒí’ˆëª…',\n-      width: '180px',\n-      render: (value, record) => (\n-        <div>\n-          <div>{record.productName}</div>\n-          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-            ID: {record.productId.slice(-8)}\n-          </div>\n-        </div>\n-      )\n-    },\n-    {\n-      key: 'programName',\n-      title: 'í”„ë¡œê·¸ë¨',\n-      width: '150px',\n-      render: (value, record) => (\n-        <div>\n-          <div>{record.programName}</div>\n-          <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-            {record.programType}\n-          </div>\n-        </div>\n-      )\n-    },\n-    {\n-      key: 'productPrice',\n-      title: 'ìƒí’ˆê¸ˆì•¡',\n-      width: '100px',\n-      align: 'right' as const,\n-      render: (value, record) => (\n-        <div style={{ \n-          textAlign: 'right',\n-          fontSize: '14px',\n-          fontWeight: '600',\n-          color: AppColors.onBackground\n-        }}>\n-          {record.productPrice.toLocaleString()}ì›\n-        </div>\n-      )\n-    },\n-    {\n-      key: 'progress',\n-      title: 'ì§„í–‰ìƒí™©',\n-      width: '120px',\n-      render: (value, record) => {\n-        // ì·¨ì†Œëœ ìˆ˜ê°•ê¶Œì€ ì§„í–‰ìƒí™©ì„ í‘œì‹œí•˜ì§€ ì•ŠìŒ\n-        if (record.enrollmentStatus === 'cancelled') {\n-          const transferInfo = getTransferInfo(record);\n-          if (transferInfo?.type === 'transferred') {\n-            return (\n-              <ProgressInfo style={{ color: '#ef6c00' }}>\n-                ì–‘ë„ ì™„ë£Œ\n-              </ProgressInfo>\n-            );\n-          }\n-          return (\n-            <ProgressInfo style={{ color: '#666' }}>\n-              ì·¨ì†Œë¨\n-            </ProgressInfo>\n-          );\n-        }\n-        \n-        // ìºì‹œëœ ì„¸ì…˜ ì •ë³´ ì‚¬ìš©\n-        const progressInfo = enrollmentSessions.get(record.id!) || '-';\n-        return (\n-          <ProgressInfo>\n-            {progressInfo}\n-          </ProgressInfo>\n-        );\n-      }\n-    },\n-    {\n-      key: 'branchName',\n-      title: 'ì§€ì ',\n-      width: '100px'\n-    },\n-    {\n-      key: 'coachName',\n-      title: 'ë‹´ë‹¹ì½”ì¹˜',\n-      width: '100px'\n-    },\n-    {\n-      key: 'payment',\n-      title: 'ê²°ì œì •ë³´',\n-      width: '140px',\n-      align: 'right' as const,\n-      render: (value, record) => (\n-        <PriceInfo>\n-          <PaidAmount>\n-            ì ìš©: {(record.appliedPrice || record.paidAmount).toLocaleString()}ì›\n-          </PaidAmount>\n-          <div style={{ fontSize: '12px', color: AppColors.onInput1, marginTop: '2px' }}>\n-            ìˆ˜ë‚©: {record.paidAmount.toLocaleString()}ì›\n-          </div>\n-          <UnpaidAmount $hasUnpaid={record.unpaidAmount > 0}>\n-            {record.unpaidAmount > 0 ? \n-              `ë¯¸ìˆ˜: ${record.unpaidAmount.toLocaleString()}ì›` : \n-              'ì™„ë‚©'\n-            }\n-          </UnpaidAmount>\n-          {record.appliedPrice && record.productPrice !== record.appliedPrice && (\n-            <div style={{ \n-              fontSize: '11px', \n-              color: record.appliedPrice > record.productPrice ? '#dc3545' : '#28a745',\n-              marginTop: '2px'\n-            }}>\n-              {record.appliedPrice > record.productPrice ? 'ì¶”ê°€' : 'í• ì¸'}\n-              {record.appliedPrice > record.productPrice ? '+' : ''}\n-              {(record.appliedPrice - record.productPrice).toLocaleString()}ì›\n-            </div>\n-          )}\n-        </PriceInfo>\n-      )\n-    },\n-    {\n-      key: 'connection',\n-      title: 'ì—°ê²°ì •ë³´',\n-      width: '140px',\n-      render: (value, record) => (\n-        <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-          <div style={{ color: AppColors.primary, fontWeight: '600' }}>\n-            ìˆ˜ê°• ID: {record.id.slice(-8)}\n-          </div>\n-          <div style={{ marginTop: '2px', fontSize: '11px' }}>\n-            ê²°ì œ ì´ë ¥ì—ì„œ í™•ì¸ ê°€ëŠ¥\n-          </div>\n-        </div>\n-      )\n-    },\n-    {\n-      key: 'period',\n-      title: 'ìˆ˜ê°•ê¸°ê°„',\n-      width: '140px',\n-      render: (value, record) => (\n-        <div>\n-          <div>{formatDate(record.startDate)}</div>\n-          {record.endDate && (\n-            <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-              ~ {formatDate(record.endDate)}\n-            </div>\n-          )}\n-        </div>\n-      )\n-    },\n-    {\n-      key: 'enrollmentStatus',\n-      title: 'ìƒíƒœ',\n-      width: '80px',\n-      align: 'center' as const,\n-      render: (value, record) => {\n-        // ì‹¤ì‹œê°„ ê¸°ê°„ë§Œë£Œ ì²´í¬\n-        let displayStatus = record.enrollmentStatus;\n-        let statusText = '';\n-        \n-        if (record.enrollmentStatus === 'active' && record.programType === 'ê¸°ê°„ì œ' && record.endDate) {\n-          const today = new Date();\n-          const endDate = new Date(record.endDate);\n-          today.setHours(0, 0, 0, 0);\n-          endDate.setHours(23, 59, 59, 999);\n-          \n-          if (endDate < today) {\n-            displayStatus = 'completed';\n-            statusText = 'ë§Œë£Œ';\n-          } else {\n-            statusText = 'ìˆ˜ê°•ì¤‘';\n-          }\n-        } else {\n-          switch (record.enrollmentStatus) {\n-            case 'active': statusText = 'ìˆ˜ê°•ì¤‘'; break;\n-            case 'completed': statusText = 'ì™„ë£Œ'; break;\n-            case 'suspended': statusText = 'ì¤‘ë‹¨'; break;\n-            case 'cancelled': statusText = 'ì·¨ì†Œ'; break;\n-            case 'unpaid': statusText = 'ë¯¸ìˆ˜'; break;\n-            case 'hold': statusText = 'í™€ë“œ'; break;\n-            default: statusText = record.enrollmentStatus;\n-          }\n-        }\n-        \n-        return (\n-          <StatusBadge \n-            $status={displayStatus}\n-            $clickable={record.enrollmentStatus === 'unpaid'}\n-            onClick={record.enrollmentStatus === 'unpaid' ? (e) => {\n-              e.stopPropagation(); // row í´ë¦­ ì´ë²¤íŠ¸ ì°¨ë‹¨\n-              handleUnpaidClick(record);\n-            } : undefined}\n-            title={record.enrollmentStatus === 'unpaid' ? 'í´ë¦­í•˜ì—¬ ì™„ë£Œ ì²˜ë¦¬' : ''}\n-          >\n-            {statusText}\n-          </StatusBadge>\n-        );\n-      }\n-    }\n-  ];\n-\n-  // ê²°ê³¼ ì¹´ìš´íŠ¸ ì •ë³´ ì»´í¬ë„ŒíŠ¸\n-  const resultCountInfo = (\n-    <>\n-      {showUnpaidOnlyState ? 'ë¯¸ìˆ˜ ìˆ˜ê°•: ' : ''}{filteredEnrollments.length}ê±´ \n-      (ì™„ë£Œ: {filteredEnrollments.filter(e => e.enrollmentStatus === 'completed').length}ê±´, \n-      ë¯¸ìˆ˜: {filteredEnrollments.filter(e => e.enrollmentStatus === 'unpaid').length}ê±´)\n-      <br />\n-      <span style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n-        ê¸°ê°„: {getDateRangeDisplay()} | ì „ì²´: {courseEnrollments.length}ê±´\n-      </span>\n-    </>\n-  );\n-\n-  if (loading) {\n-    return (\n-      <PageContainer>\n-        <DataTable\n-          title=\"ìˆ˜ê°• ì´ë ¥\"\n-          columns={columns}\n-          data={[]}\n-          loading={true}\n-        />\n-      </PageContainer>\n-    );\n-  }\n-\n-  return (\n-    <PageContainer>\n-      {/* SearchAreaëŠ” ëª¨ë‹¬ì´ ì•„ë‹ ë•Œë§Œ í‘œì‹œ */}\n-      {!isModal && (\n-        <SearchArea\n-        leftContent={\n-          <div style={{ display: 'flex', gap: '12px', alignItems: 'center', flexWrap: 'wrap' }}>\n-            <Button onClick={handleOpenRegistrationModal}>\n-              + ìƒˆ ìˆ˜ê°• ë“±ë¡\n-            </Button>\n-            <UnpaidFilter\n-              active={showUnpaidOnlyState}\n-              unpaidCount={unpaidMetaInfo.unpaidCourseCount}\n-              totalAmount={unpaidMetaInfo.totalUnpaidAmount}\n-              onClick={() => setShowUnpaidOnlyState(!showUnpaidOnlyState)}\n-            />\n-          </div>\n-        }\n-        selectedPeriod={selectedPeriod}\n-        onPeriodChange={setSelectedPeriod}\n-        customStartDate={customStartDate}\n-        customEndDate={customEndDate}\n-        onCustomStartDateChange={setCustomStartDate}\n-        onCustomEndDateChange={setCustomEndDate}\n-        dateRangeDisplay={getDateRangeDisplay()}\n-        searchValue={searchQuery}\n-        onSearchChange={setSearchQuery}\n-        onSearch={handleSearch}\n-        searchPlaceholder=\"íšŒì›ëª…, ìƒí’ˆëª…, í”„ë¡œê·¸ë¨ëª…, ì§€ì ëª…, ì½”ì¹˜ëª…ìœ¼ë¡œ ê²€ìƒ‰...\"\n-        autoSearchOnDateChange={false}\n-      />\n-      )}\n-\n-      <DataTable\n-        title=\"ìˆ˜ê°• ì´ë ¥\"\n-        columns={columns}\n-        data={filteredEnrollments}\n-        loading={loading}\n-        emptyText=\"ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤\"\n-        emptyDescription=\"ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.\"\n-        resultCount={resultCountInfo}\n-        onRowClick={(record) => {\n-          // ê´€ë¦¬ ê°€ëŠ¥í•œ ìˆ˜ê°•ê¶Œë§Œ í´ë¦­ ê°€ëŠ¥ (active, unpaid, hold ìƒíƒœ)\n-          if (record.enrollmentStatus === 'active' || record.enrollmentStatus === 'unpaid' || record.enrollmentStatus === 'hold') {\n-            handleOpenTransferModal(record);\n-          }\n-        }}\n-        pagination={{\n-          enabled: true,\n-          pageSize: 15,\n-          pageSizeOptions: [15, 30, 100],\n-          showTotal: true\n-        }}\n-      />\n-\n-      {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n-      <CourseRegistrationModal\n-        isOpen={showRegistrationModal}\n-        onClose={handleCloseRegistrationModal}\n-        onSuccess={handleRegistrationSuccess}\n-      />\n-\n-      {/* ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ */}\n-      {showCompleteModal && selectedEnrollment && (\n-        <Modal \n-          isOpen={showCompleteModal}\n-          onClose={handleCloseCompleteModal}\n-          width=\"min(95vw, 500px)\"\n-          header=\"ë¯¸ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬\"\n-          body={\n-            <ModalContent>\n-              <WarningText>\n-                âš ï¸ ë¯¸ìˆ˜ê¸ˆì„ ì™„ë£Œ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n-              </WarningText>\n-\n-              <InfoRow>\n-                <InfoLabel>ê²°ì œ ë°©ë²•:</InfoLabel>\n-                <div style={{ flex: 1, marginLeft: '12px' }}>\n-                  <CustomDropdown\n-                    value={selectedPaymentMethod}\n-                    onChange={setSelectedPaymentMethod}\n-                    options={paymentMethodOptions}\n-                    inModal={true}\n-                  />\n-                </div>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>íšŒì›ëª…:</InfoLabel>\n-                <InfoValue>{selectedEnrollment.memberName}</InfoValue>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>ìƒí’ˆëª…:</InfoLabel>\n-                <InfoValue>{selectedEnrollment.productName}</InfoValue>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>í”„ë¡œê·¸ë¨:</InfoLabel>\n-                <InfoValue>{selectedEnrollment.programName} ({selectedEnrollment.programType})</InfoValue>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>ì§€ì :</InfoLabel>\n-                <InfoValue>{selectedEnrollment.branchName}</InfoValue>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>ë‹´ë‹¹ì½”ì¹˜:</InfoLabel>\n-                <InfoValue>{selectedEnrollment.coachName}</InfoValue>\n-              </InfoRow>\n-              \n-              <InfoRow>\n-                <InfoLabel>ë¯¸ìˆ˜ê¸ˆì•¡:</InfoLabel>\n-                <ModalUnpaidAmount>{selectedEnrollment.unpaidAmount?.toLocaleString() || 0}ì›</ModalUnpaidAmount>\n-              </InfoRow>\n-              \n-              <div style={{ \n-                padding: '12px', \n-                backgroundColor: '#f0f9ff', \n-                border: '1px solid #93c5fd', \n-                borderRadius: '8px',\n-                fontSize: '14px',\n-                color: '#1e40af',\n-                marginTop: '16px'\n-              }}>\n-                ğŸ’¡ ì™„ë£Œ ì²˜ë¦¬ ì‹œ í•´ë‹¹ ê¸ˆì•¡ì´ ê²°ì œ ë‚´ì—­ì— ìë™ìœ¼ë¡œ ë“±ë¡ë©ë‹ˆë‹¤.<br/>\n-                ìˆ˜ê°• ìƒíƒœëŠ” ë‚¨ì€ ê¸°ê°„/íšŸìˆ˜ì— ë”°ë¼ 'ìˆ˜ê°•ì¤‘' ë˜ëŠ” 'ì™„ë£Œ'ë¡œ ìë™ ë³€ê²½ë©ë‹ˆë‹¤.\n-              </div>\n-            </ModalContent>\n-          }\n-          footer={\n-            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px', width: '100%' }}>\n-              <Button variant=\"secondary\" onClick={handleCloseCompleteModal} disabled={isProcessing}>\n-                ì·¨ì†Œ\n-              </Button>\n-              <Button onClick={handleCompletePayment} disabled={isProcessing}>\n-                {isProcessing ? 'ì²˜ë¦¬ ì¤‘...' : 'ì™„ë£Œ ì²˜ë¦¬'}\n-              </Button>\n-            </div>\n-          }\n-        />\n-      )}\n-\n-      {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n-      <CourseManagementModal\n-        isOpen={showTransferModal}\n-        onClose={handleCloseTransferModal}\n-        onSuccess={handleTransferSuccess}\n-        courseEnrollment={selectedForTransfer}\n-      />\n-    </PageContainer>\n-  );\n-};\n-\n-export default CourseHistory;\n"
                },
                {
                    "date": 1765690156603,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -187,8 +187,16 @@\n     unpaidCourseCount: 0,\n     totalUnpaidAmount: 0\n   });\n   \n+  // ë§Œë£Œ ê´€ë ¨ ìƒíƒœ\n+  const [expiredMetaInfo, setExpiredMetaInfo] = useState<{ expiredCourseCount: number }>({\n+    expiredCourseCount: 0\n+  });\n+  const [showExpiredModal, setShowExpiredModal] = useState<boolean>(false);\n+  const [expiredEnrollments, setExpiredEnrollments] = useState<CourseEnrollment[]>([]);\n+  const [selectedExpiredEnrollments, setSelectedExpiredEnrollments] = useState<string[]>([]);\n+  \n   // ì™„ë£Œ ì²˜ë¦¬ ëª¨ë‹¬ ê´€ë ¨ ìƒíƒœ\n   const [showCompleteModal, setShowCompleteModal] = useState<boolean>(false);\n   const [selectedEnrollment, setSelectedEnrollment] = useState<CourseEnrollment | null>(null);\n   \n@@ -245,8 +253,69 @@\n       handleSearch();\n     }, 100);\n   };\n \n+  // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œ ì„ íƒ/í•´ì œ\n+  const handleExpiredSelection = (enrollmentId: string) => {\n+    setSelectedExpiredEnrollments(prev => {\n+      if (prev.includes(enrollmentId)) {\n+        return prev.filter(id => id !== enrollmentId);\n+      } else {\n+        return [...prev, enrollmentId];\n+      }\n+    });\n+  };\n+\n+  // ì „ì²´ ì„ íƒ/í•´ì œ\n+  const handleSelectAllExpired = () => {\n+    if (selectedExpiredEnrollments.length === expiredEnrollments.length) {\n+      setSelectedExpiredEnrollments([]);\n+    } else {\n+      setSelectedExpiredEnrollments(expiredEnrollments.map(e => e.id!));\n+    }\n+  };\n+\n+  // ë§Œë£Œ ì²˜ë¦¬ ì‹¤í–‰\n+  const handleProcessExpired = async () => {\n+    if (selectedExpiredEnrollments.length === 0) {\n+      toast.error('ì²˜ë¦¬í•  ìˆ˜ê°•ê¶Œì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n+      return;\n+    }\n+\n+    try {\n+      setIsProcessing(true);\n+      \n+      // ì„ íƒëœ ìˆ˜ê°•ê¶Œë“¤ì„ completedë¡œ ì—…ë°ì´íŠ¸\n+      for (const enrollmentId of selectedExpiredEnrollments) {\n+        await dbManager.updateCourseEnrollment(enrollmentId, {\n+          enrollmentStatus: 'completed'\n+        });\n+      }\n+      \n+      toast.success(`${selectedExpiredEnrollments.length}ê±´ì˜ ë§Œë£Œ ìˆ˜ê°•ê¶Œì´ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.`);\n+      \n+      // ìƒíƒœ ì´ˆê¸°í™” ë° ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n+      setShowExpiredModal(false);\n+      setSelectedExpiredEnrollments([]);\n+      setExpiredEnrollments([]);\n+      \n+      // ë°ì´í„° ìƒˆë¡œê³ ì¹¨\n+      await loadCourseEnrollments();\n+      \n+    } catch (error) {\n+      console.error('ë§Œë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n+      toast.error('ë§Œë£Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n+    } finally {\n+      setIsProcessing(false);\n+    }\n+  };\n+\n+  // ë§Œë£Œ ì²˜ë¦¬ ëª¨ë‹¬ ë‹«ê¸°\n+  const handleCloseExpiredModal = () => {\n+    setShowExpiredModal(false);\n+    setSelectedExpiredEnrollments([]);\n+  };\n+\n   // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n   const loadUnpaidMetaInfo = useCallback(async () => {\n     try {\n       const allEnrollments = await dbManager.getAllCourseEnrollments();\n@@ -259,8 +328,34 @@\n       console.error('ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);\n     }\n   }, []);\n \n+  // ë§Œë£Œ ë©”íƒ€ì •ë³´ ë¡œë“œ ë° ë§Œë£Œ ê°ì§€\n+  const loadExpiredMetaInfo = useCallback(async () => {\n+    try {\n+      const allEnrollments = await dbManager.getAllCourseEnrollments();\n+      const today = new Date();\n+      today.setHours(0, 0, 0, 0);\n+      \n+      const expiredEnrollments = allEnrollments.filter(enrollment => \n+        enrollment.enrollmentStatus === 'active' &&\n+        enrollment.programType === 'ê¸°ê°„ì œ' &&\n+        enrollment.endDate &&\n+        new Date(enrollment.endDate) < today\n+      );\n+      \n+      setExpiredMetaInfo({ expiredCourseCount: expiredEnrollments.length });\n+      \n+      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œì´ ìˆê³  ëª¨ë‹¬ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ íŒì—… í‘œì‹œ\n+      if (expiredEnrollments.length > 0 && !isModal && !showExpiredModal) {\n+        setExpiredEnrollments(expiredEnrollments);\n+        setShowExpiredModal(true);\n+      }\n+    } catch (error) {\n+      console.error('ë§Œë£Œ ë©”íƒ€ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);\n+    }\n+  }, [isModal, showExpiredModal]);\n+\n   // ì§„í–‰ìƒí™© ê³„ì‚° í•¨ìˆ˜\n   const getProgressInfo = useCallback(async (enrollment: CourseEnrollment): Promise<string> => {\n     if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n       // ì´ë²¤íŠ¸ ì†Œì‹±: ì‹¤ì‹œê°„ ì™„ë£Œ íšŸìˆ˜ ê³„ì‚°\n@@ -335,44 +430,17 @@\n       \n       // ë¯¸ìˆ˜ ë©”íƒ€ì •ë³´ ë¡œë“œ\n       await loadUnpaidMetaInfo();\n       \n+      // ë§Œë£Œ ë©”íƒ€ì •ë³´ ë¡œë“œ\n+      await loadExpiredMetaInfo();\n+      \n       const allEnrollments = await dbManager.getAllCourseEnrollments();\n       console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥ ìˆ˜:', allEnrollments.length);\n       \n-      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œë“¤ì„ ì°¾ì•„ì„œ ì‹¤ì œ DB ìƒíƒœ ì—…ë°ì´íŠ¸\n-      const today = new Date();\n-      today.setHours(0, 0, 0, 0);\n+      // ê¸°ë³¸ ë°ì´í„° ë¡œë“œ (ìë™ ë§Œë£Œ ì²˜ë¦¬ ì œê±°)\n+      const updatedEnrollments = allEnrollments;\n       \n-      const expiredEnrollments = allEnrollments.filter(enrollment => \n-        enrollment.enrollmentStatus === 'active' &&\n-        enrollment.programType === 'ê¸°ê°„ì œ' &&\n-        enrollment.endDate &&\n-        new Date(enrollment.endDate) < today\n-      );\n-      \n-      console.log('=== ë§Œë£Œ ì²˜ë¦¬ ë””ë²„ê¹… ===');\n-      console.log('ë§Œë£Œ ëŒ€ìƒ ìˆ˜ê°•ê¶Œ:', expiredEnrollments.length);\n-      expiredEnrollments.forEach(e => {\n-        console.log(`- ${e.memberName}: ${e.productName} (ì¢…ë£Œì¼: ${e.endDate})`);\n-      });\n-      \n-      // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œë“¤ì„ completedë¡œ ì—…ë°ì´íŠ¸\n-      for (const enrollment of expiredEnrollments) {\n-        try {\n-          await dbManager.updateCourseEnrollment(enrollment.id, {\n-            enrollmentStatus: 'completed'\n-          });\n-          console.log(`ìˆ˜ê°•ê¶Œ ë§Œë£Œ ì²˜ë¦¬ ì™„ë£Œ: ${enrollment.productName} (${enrollment.memberName})`);\n-        } catch (error) {\n-          console.error('ë§Œë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:', error);\n-        }\n-      }\n-      \n-      // ì—…ë°ì´íŠ¸ í›„ ë‹¤ì‹œ ë°ì´í„° ë¡œë“œ (ë§Œë£Œ ì²˜ë¦¬ëœ í•­ëª©ë“¤ ë°˜ì˜)\n-      const updatedEnrollments = expiredEnrollments.length > 0 ? \n-        await dbManager.getAllCourseEnrollments() : allEnrollments;\n-      \n       console.log('=== ë°ì´í„° ë¡œë“œ ë””ë²„ê¹… ===');\n       console.log('ì „ì²´ ìˆ˜ê°• ì´ë ¥:', updatedEnrollments.length);\n       console.log('ìˆ˜ê°• ì´ë ¥ ìƒì„¸:', updatedEnrollments.map(e => ({\n         memberName: e.memberName,\n"
                },
                {
                    "date": 1765690250984,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n import { dbManager, type CourseEnrollment } from '../../../utils/indexedDB';\n import { getCompletedSessions } from '../../../utils/db/ReservationHelper';\n import { SearchArea, type PeriodOption } from '../../../components/SearchArea';\n import UnpaidFilter from '../../../components/SearchArea/UnpaidFilterButton';\n+import ExpiredFilter from '../../../components/SearchArea/ExpiredFilterButton';\n import Modal from '../../../components/Modal';\n import CustomDropdown from '../../../components/CustomDropdown';\n import DataTable, { type TableColumn } from '../../../components/DataTable';\n import CourseRegistrationModal from './CourseRegistrationModal';\n@@ -157,8 +158,72 @@\n   flex-direction: column;\n   gap: 2px;\n `;\n \n+const ExpiredModalContent = styled.div`\n+  text-align: left;\n+`;\n+\n+const ExpiredListContainer = styled.div`\n+  max-height: 400px;\n+  overflow-y: auto;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  margin: 16px 0;\n+`;\n+\n+const ExpiredItem = styled.div<{ $selected: boolean }>`\n+  display: flex;\n+  align-items: center;\n+  padding: 12px;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  background: ${props => props.$selected ? '#f0f9ff' : 'transparent'};\n+  cursor: pointer;\n+  transition: all 0.2s;\n+  \n+  &:hover {\n+    background: ${props => props.$selected ? '#e0f2fe' : '#f8fafc'};\n+  }\n+  \n+  &:last-child {\n+    border-bottom: none;\n+  }\n+`;\n+\n+const CheckboxInput = styled.input`\n+  margin-right: 12px;\n+  cursor: pointer;\n+`;\n+\n+const ExpiredItemInfo = styled.div`\n+  flex: 1;\n+`;\n+\n+const ExpiredItemName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.onBackground};\n+  margin-bottom: 4px;\n+`;\n+\n+const ExpiredItemDetail = styled.div`\n+  font-size: 12px;\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const SelectAllContainer = styled.div`\n+  display: flex;\n+  align-items: center;\n+  padding: 12px;\n+  background: #f8fafc;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  font-weight: 600;\n+`;\n+\n+const ExpiredCount = styled.span`\n+  color: #d97706;\n+  font-weight: 600;\n+`;\n+\n interface CourseHistoryProps {\n   preselectedMemberId?: string;\n   showUnpaidOnly?: boolean;\n   onUnpaidComplete?: () => void;\n@@ -455,8 +520,9 @@\n       const currentStartDate = startDate ?? customStartDate;\n       const currentEndDate = endDate ?? customEndDate;\n       \n       let dateRange: { start: Date; end: Date };\n+      const today = new Date();\n       const rangeStartDate = new Date();\n       \n       switch (currentPeriod) {\n         case '1month':\n@@ -540,9 +606,9 @@\n       console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n     } finally {\n       setLoading(false);\n     }\n-  }, [loadUnpaidMetaInfo, selectedPeriod, customStartDate, customEndDate, getProgressInfo]);\n+  }, [loadUnpaidMetaInfo, loadExpiredMetaInfo, selectedPeriod, customStartDate, customEndDate, getProgressInfo, preselectedMemberId]);\n \n   // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì´ˆê¸° ë°ì´í„° ë¡œë“œ (1ê°œì›” ê¸°ì¤€)\n   useEffect(() => {\n     const initializeData = async () => {\n@@ -986,8 +1052,12 @@\n               unpaidCount={unpaidMetaInfo.unpaidCourseCount}\n               totalAmount={unpaidMetaInfo.totalUnpaidAmount}\n               onClick={() => setShowUnpaidOnlyState(!showUnpaidOnlyState)}\n             />\n+            <ExpiredFilter\n+              expiredCount={expiredMetaInfo.expiredCourseCount}\n+              onClick={() => setShowExpiredModal(true)}\n+            />\n           </div>\n         }\n         selectedPeriod={selectedPeriod}\n         onPeriodChange={setSelectedPeriod}\n@@ -1114,15 +1184,102 @@\n           }\n         />\n       )}\n \n-      {/* ìƒˆ ìˆ˜ê°• ë“±ë¡ ëª¨ë‹¬ */}\n+      {/* ìˆ˜ê°•ê¶Œ ê´€ë¦¬ ëª¨ë‹¬ */}\n       <CourseManagementModal\n         isOpen={showTransferModal}\n         onClose={handleCloseTransferModal}\n         onSuccess={handleTransferSuccess}\n         courseEnrollment={selectedForTransfer}\n       />\n+\n+      {/* ë§Œë£Œ ì²˜ë¦¬ ëª¨ë‹¬ */}\n+      {showExpiredModal && (\n+        <Modal \n+          isOpen={showExpiredModal}\n+          onClose={handleCloseExpiredModal}\n+          width=\"min(95vw, 600px)\"\n+          header={`ë§Œë£Œëœ ìˆ˜ê°•ê¶Œ ì²˜ë¦¬ (${expiredEnrollments.length}ê±´)`}\n+          body={\n+            <ExpiredModalContent>\n+              <WarningText>\n+                âš ï¸ ê¸°ê°„ì´ ë§Œë£Œëœ ìˆ˜ê°•ê¶Œë“¤ì´ ìˆìŠµë‹ˆë‹¤. ì™„ë£Œ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n+              </WarningText>\n+\n+              <ExpiredListContainer>\n+                <SelectAllContainer>\n+                  <CheckboxInput\n+                    type=\"checkbox\"\n+                    checked={selectedExpiredEnrollments.length === expiredEnrollments.length && expiredEnrollments.length > 0}\n+                    onChange={handleSelectAllExpired}\n+                  />\n+                  ì „ì²´ ì„ íƒ ({selectedExpiredEnrollments.length}/{expiredEnrollments.length})\n+                </SelectAllContainer>\n+                \n+                {expiredEnrollments.map((enrollment) => (\n+                  <ExpiredItem\n+                    key={enrollment.id}\n+                    $selected={selectedExpiredEnrollments.includes(enrollment.id!)}\n+                    onClick={() => handleExpiredSelection(enrollment.id!)}\n+                  >\n+                    <CheckboxInput\n+                      type=\"checkbox\"\n+                      checked={selectedExpiredEnrollments.includes(enrollment.id!)}\n+                      onChange={() => handleExpiredSelection(enrollment.id!)}\n+                    />\n+                    <ExpiredItemInfo>\n+                      <ExpiredItemName>\n+                        {enrollment.memberName} - {enrollment.productName}\n+                      </ExpiredItemName>\n+                      <ExpiredItemDetail>\n+                        í”„ë¡œê·¸ë¨: {enrollment.programName} ({enrollment.programType}) | \n+                        ì§€ì : {enrollment.branchName} | \n+                        ë‹´ë‹¹ì½”ì¹˜: {enrollment.coachName}\n+                      </ExpiredItemDetail>\n+                      <ExpiredItemDetail style={{ marginTop: '2px', color: '#d97706' }}>\n+                        ì¢…ë£Œì¼: {formatDate(enrollment.endDate)} \n+                        {enrollment.endDate && ` (${Math.abs(Math.ceil((new Date().getTime() - new Date(enrollment.endDate).getTime()) / (1000 * 3600 * 24)))}ì¼ ê²½ê³¼)`}\n+                      </ExpiredItemDetail>\n+                    </ExpiredItemInfo>\n+                  </ExpiredItem>\n+                ))}\n+              </ExpiredListContainer>\n+              \n+              <div style={{ \n+                padding: '12px', \n+                backgroundColor: '#f0f9ff', \n+                border: '1px solid #93c5fd', \n+                borderRadius: '8px',\n+                fontSize: '14px',\n+                color: '#1e40af',\n+                marginTop: '16px'\n+              }}>\n+                ğŸ’¡ ì„ íƒëœ ìˆ˜ê°•ê¶Œë“¤ì´ 'ì™„ë£Œ' ìƒíƒœë¡œ ë³€ê²½ë©ë‹ˆë‹¤.<br/>\n+                ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ìˆìœ¼ë©°, í•„ìš”ì‹œ ìˆ˜ê°•ê¶Œ ê´€ë¦¬ì—ì„œ ìƒíƒœë¥¼ ë‹¤ì‹œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n+              </div>\n+            </ExpiredModalContent>\n+          }\n+          footer={\n+            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', width: '100%' }}>\n+              <ExpiredCount>\n+                ì„ íƒë¨: {selectedExpiredEnrollments.length}ê±´\n+              </ExpiredCount>\n+              <div style={{ display: 'flex', gap: '12px' }}>\n+                <Button variant=\"secondary\" onClick={handleCloseExpiredModal} disabled={isProcessing}>\n+                  ë‚˜ì¤‘ì— ì²˜ë¦¬\n+                </Button>\n+                <Button \n+                  onClick={handleProcessExpired} \n+                  disabled={isProcessing || selectedExpiredEnrollments.length === 0}\n+                >\n+                  {isProcessing ? 'ì²˜ë¦¬ ì¤‘...' : `${selectedExpiredEnrollments.length}ê±´ ì™„ë£Œ ì²˜ë¦¬`}\n+                </Button>\n+              </div>\n+            </div>\n+          }\n+        />\n+      )}\n     </PageContainer>\n   );\n };\n \n"
                },
                {
                    "date": 1765690325710,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -400,14 +400,21 @@\n       const allEnrollments = await dbManager.getAllCourseEnrollments();\n       const today = new Date();\n       today.setHours(0, 0, 0, 0);\n       \n-      const expiredEnrollments = allEnrollments.filter(enrollment => \n-        enrollment.enrollmentStatus === 'active' &&\n-        enrollment.programType === 'ê¸°ê°„ì œ' &&\n-        enrollment.endDate &&\n-        new Date(enrollment.endDate) < today\n-      );\n+      const expiredEnrollments = allEnrollments.filter(enrollment => {\n+        // active ë˜ëŠ” unpaid ìƒíƒœì¸ ê²½ìš°ë§Œ ë§Œë£Œ ì²´í¬ (completedëŠ” ì´ë¯¸ ì²˜ë¦¬ëœ ê²ƒì´ë¯€ë¡œ ì œì™¸)\n+        if (!['active', 'unpaid'].includes(enrollment.enrollmentStatus)) {\n+          return false;\n+        }\n+        \n+        // ê¸°ê°„ì œì™€ íšŸìˆ˜ì œ ëª¨ë‘ ìœ íš¨ê¸°ê°„ ì²´í¬\n+        if (enrollment.endDate && new Date(enrollment.endDate) < today) {\n+          return true;\n+        }\n+        \n+        return false;\n+      });\n       \n       setExpiredMetaInfo({ expiredCourseCount: expiredEnrollments.length });\n       \n       // ë§Œë£Œëœ ìˆ˜ê°•ê¶Œì´ ìˆê³  ëª¨ë‹¬ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ íŒì—… í‘œì‹œ\n@@ -421,28 +428,54 @@\n   }, [isModal, showExpiredModal]);\n \n   // ì§„í–‰ìƒí™© ê³„ì‚° í•¨ìˆ˜\n   const getProgressInfo = useCallback(async (enrollment: CourseEnrollment): Promise<string> => {\n+    let progressText = '';\n+    let isExpired = false;\n+    \n     if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n       // ì´ë²¤íŠ¸ ì†Œì‹±: ì‹¤ì‹œê°„ ì™„ë£Œ íšŸìˆ˜ ê³„ì‚°\n       const completedSessions = await getCompletedSessions(enrollment.id);\n       const remaining = enrollment.sessionCount - completedSessions;\n-      return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n+      progressText = `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n+      \n+      // íšŸìˆ˜ì œë„ ìœ íš¨ê¸°ê°„ ì²´í¬\n+      if (enrollment.endDate) {\n+        const today = new Date();\n+        const endDate = new Date(enrollment.endDate);\n+        today.setHours(0, 0, 0, 0);\n+        endDate.setHours(0, 0, 0, 0);\n+        if (endDate < today) {\n+          isExpired = true;\n+        }\n+      }\n     } else if (enrollment.programType === 'ê¸°ê°„ì œ' && enrollment.endDate) {\n       const today = new Date();\n       const endDate = new Date(enrollment.endDate);\n+      today.setHours(0, 0, 0, 0);\n+      endDate.setHours(0, 0, 0, 0);\n       const timeDiff = endDate.getTime() - today.getTime();\n       const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n       \n       if (daysDiff > 0) {\n-        return `${daysDiff}ì¼ ë‚¨ìŒ`;\n+        progressText = `${daysDiff}ì¼ ë‚¨ìŒ`;\n       } else if (daysDiff === 0) {\n-        return 'ì˜¤ëŠ˜ ì¢…ë£Œ';\n+        progressText = 'ì˜¤ëŠ˜ ì¢…ë£Œ';\n+        isExpired = true;\n       } else {\n-        return `${Math.abs(daysDiff)}ì¼ ê²½ê³¼`;\n+        progressText = `${Math.abs(daysDiff)}ì¼ ê²½ê³¼`;\n+        isExpired = true;\n       }\n+    } else {\n+      progressText = 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n     }\n-    return 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n+    \n+    // ê¸°ê°„ë§Œë£Œ ì‹œ ì¶”ê°€ í‘œì‹œ\n+    if (isExpired) {\n+      progressText += ' [ê¸°ê°„ë§Œë£Œ]';\n+    }\n+    \n+    return progressText;\n   }, []);\n \n   // ê¸°ê°„ë³„ ê²€ìƒ‰ ë²”ìœ„ ê³„ì‚°\n   const getDateRange = useCallback(() => {\n"
                }
            ],
            "date": 1760758580231,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { AppColors } from '../../../styles/colors';\nimport { AppTextStyles } from '../../../styles/textStyles';\nimport { dbManager, type CourseEnrollment } from '../../../utils/indexedDB';\n\nconst PageContainer = styled.div`\n  width: 100%;\n`;\n\nconst SearchSection = styled.div`\n  background: ${AppColors.surface};\n  border: 1px solid ${AppColors.borderLight};\n  border-radius: 16px;\n  padding: 24px;\n  margin-bottom: 24px;\n  box-shadow: 0 1px 2px rgba(16, 24, 40, 0.04);\n`;\n\nconst SearchRow = styled.div`\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  margin-bottom: 16px;\n`;\n\nconst SearchInput = styled.input`\n  flex: 1;\n  padding: 12px;\n  border: 1px solid ${AppColors.borderLight};\n  border-radius: 8px;\n  font-size: ${AppTextStyles.body1.fontSize};\n  outline: none;\n  \n  &:focus {\n    border-color: ${AppColors.primary};\n  }\n  \n  &::placeholder {\n    color: ${AppColors.onInput1};\n  }\n`;\n\nconst Button = styled.button<{ variant?: 'primary' | 'secondary' }>`\n  padding: 12px 18px;\n  border: ${props => props.variant === 'secondary' ? `1px solid ${AppColors.borderLight}` : 'none'};\n  border-radius: 8px;\n  background: ${props => props.variant === 'secondary' ? AppColors.surface : AppColors.primary};\n  color: ${props => props.variant === 'secondary' ? AppColors.onSurface : AppColors.onPrimary};\n  font-size: ${AppTextStyles.body1.fontSize};\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  \n  &:hover {\n    opacity: 0.9;\n    transform: translateY(-1px);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\nconst FilterRow = styled.div<{ $visible: boolean }>`\n  display: ${props => props.$visible ? 'flex' : 'none'};\n  gap: 8px;\n  align-items: center;\n  flex-wrap: wrap;\n`;\n\nconst FilterChip = styled.button<{ $active: boolean }>`\n  padding: 6px 12px;\n  border: 1px solid ${props => props.$active ? AppColors.primary : AppColors.borderLight};\n  border-radius: 20px;\n  background: ${props => props.$active ? AppColors.primary : AppColors.surface};\n  color: ${props => props.$active ? AppColors.onPrimary : AppColors.onSurface};\n  font-size: ${AppTextStyles.label2.fontSize};\n  cursor: pointer;\n  transition: all 0.2s;\n  \n  &:hover {\n    border-color: ${AppColors.primary};\n    background: ${props => props.$active ? AppColors.primary : 'rgba(0, 123, 255, 0.1)'};\n  }\n`;\n\nconst ResultsSection = styled.div`\n  background: ${AppColors.surface};\n  border: 1px solid ${AppColors.borderLight};\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 1px 2px rgba(16, 24, 40, 0.04);\n`;\n\nconst ResultsHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  border-bottom: 1px solid ${AppColors.borderLight};\n`;\n\nconst ResultsTitle = styled.h2`\n  font-size: ${AppTextStyles.title3.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onBackground};\n  margin: 0;\n`;\n\nconst ResultsCount = styled.span`\n  font-size: ${AppTextStyles.body2.fontSize};\n  color: ${AppColors.onInput1};\n`;\n\nconst TableContainer = styled.div`\n  overflow-x: auto;\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n`;\n\nconst TableHeader = styled.thead`\n  background: #f8f9fa;\n`;\n\nconst TableRow = styled.tr`\n  border-bottom: 1px solid ${AppColors.borderLight};\n  \n  &:hover {\n    background: #f8f9fa;\n  }\n`;\n\nconst TableHeaderCell = styled.th`\n  padding: 12px 16px;\n  text-align: left;\n  font-size: ${AppTextStyles.label2.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onInput1};\n  border-bottom: 1px solid ${AppColors.borderLight};\n`;\n\nconst TableCell = styled.td`\n  padding: 12px 16px;\n  font-size: ${AppTextStyles.body2.fontSize};\n  color: ${AppColors.onBackground};\n  vertical-align: middle;\n`;\n\nconst StatusBadge = styled.span<{ $status: 'completed' | 'unpaid' }>`\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n  background: ${props => props.$status === 'completed' ? '#e7f5e7' : '#fff2f2'};\n  color: ${props => props.$status === 'completed' ? '#2d5a2d' : '#8b1538'};\n`;\n\nconst ProgressInfo = styled.div`\n  font-size: 12px;\n  color: ${AppColors.onInput1};\n  margin-top: 4px;\n`;\n\nconst PriceInfo = styled.div`\n  text-align: right;\n`;\n\nconst PaidAmount = styled.div`\n  color: ${AppColors.primary};\n  font-weight: 600;\n`;\n\nconst UnpaidAmount = styled.div<{ $hasUnpaid: boolean }>`\n  color: ${props => props.$hasUnpaid ? '#d32f2f' : AppColors.onInput1};\n  font-size: 12px;\n  margin-top: 2px;\n`;\n\nconst EmptyState = styled.div`\n  padding: 60px 24px;\n  text-align: center;\n  color: ${AppColors.onInput1};\n`;\n\nconst LoadingState = styled.div`\n  padding: 60px 24px;\n  text-align: center;\n  color: ${AppColors.onInput1};\n`;\n\nconst CourseHistory: React.FC = () => {\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const [courseEnrollments, setCourseEnrollments] = useState<CourseEnrollment[]>([]);\n  const [filteredEnrollments, setFilteredEnrollments] = useState<CourseEnrollment[]>([]);\n  const [showFilters, setShowFilters] = useState<boolean>(false);\n  const [activeFilters, setActiveFilters] = useState<string[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    loadCourseEnrollments();\n  }, []);\n\n  const loadCourseEnrollments = async () => {\n    try {\n      setLoading(true);\n      const enrollments = await dbManager.getAllCourseEnrollments();\n      setCourseEnrollments(enrollments);\n      setFilteredEnrollments(enrollments);\n    } catch (error) {\n      console.error('ìˆ˜ê°• ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSearch = async () => {\n    await loadCourseEnrollments();\n    \n    let filtered = courseEnrollments;\n    \n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase().trim();\n      filtered = filtered.filter(enrollment =>\n        enrollment.memberName.toLowerCase().includes(query) ||\n        enrollment.productName.toLowerCase().includes(query) ||\n        enrollment.programName.toLowerCase().includes(query) ||\n        enrollment.branchName.toLowerCase().includes(query) ||\n        enrollment.coachName.toLowerCase().includes(query)\n      );\n    }\n    \n    if (activeFilters.length > 0) {\n      filtered = filtered.filter(enrollment => {\n        return activeFilters.some(filter => {\n          switch (filter) {\n            case 'ì™„ë£Œ':\n              return enrollment.enrollmentStatus === 'completed';\n            case 'ë¯¸ìˆ˜':\n              return enrollment.enrollmentStatus === 'unpaid';\n            case 'íšŸìˆ˜ì œ':\n              return enrollment.programType === 'íšŸìˆ˜ì œ';\n            case 'ê¸°ê°„ì œ':\n              return enrollment.programType === 'ê¸°ê°„ì œ';\n            default:\n              return enrollment.branchName === filter;\n          }\n        });\n      });\n    }\n    \n    setFilteredEnrollments(filtered);\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSearch();\n    }\n  };\n\n  const toggleFilter = (filter: string) => {\n    setActiveFilters(prev => \n      prev.includes(filter) \n        ? prev.filter(f => f !== filter)\n        : [...prev, filter]\n    );\n  };\n\n  const clearFilters = () => {\n    setActiveFilters([]);\n    setSearchQuery('');\n    setFilteredEnrollments(courseEnrollments);\n  };\n\n  const formatDate = (date: Date | null | undefined) => {\n    return date ? new Date(date).toLocaleDateString() : '-';\n  };\n\n  const getProgressInfo = (enrollment: CourseEnrollment) => {\n    if (enrollment.programType === 'íšŸìˆ˜ì œ' && enrollment.sessionCount) {\n      const remaining = enrollment.sessionCount - (enrollment.completedSessions || 0);\n      return `${remaining}/${enrollment.sessionCount}íšŒ ë‚¨ìŒ`;\n    } else if (enrollment.programType === 'ê¸°ê°„ì œ' && enrollment.endDate) {\n      const today = new Date();\n      const endDate = new Date(enrollment.endDate);\n      const timeDiff = endDate.getTime() - today.getTime();\n      const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n      \n      if (daysDiff > 0) {\n        return `${daysDiff}ì¼ ë‚¨ìŒ`;\n      } else if (daysDiff === 0) {\n        return 'ì˜¤ëŠ˜ ì¢…ë£Œ';\n      } else {\n        return `${Math.abs(daysDiff)}ì¼ ê²½ê³¼`;\n      }\n    }\n    return 'ì§„í–‰ë¥  ë¯¸ì„¤ì •';\n  };\n\n  const branchNames = Array.from(new Set(courseEnrollments.map(e => e.branchName))).filter(Boolean);\n  const filterOptions = ['ì™„ë£Œ', 'ë¯¸ìˆ˜', 'íšŸìˆ˜ì œ', 'ê¸°ê°„ì œ', ...branchNames];\n\n  if (loading) {\n    return (\n      <PageContainer>\n        <LoadingState>\n          <h3>ìˆ˜ê°• ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</h3>\n        </LoadingState>\n      </PageContainer>\n    );\n  }\n\n  return (\n    <PageContainer>\n      <SearchSection>\n        <SearchRow>\n          <SearchInput\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"íšŒì›ëª…, ìƒí’ˆëª…, í”„ë¡œê·¸ë¨ëª…, ì§€ì ëª…, ì½”ì¹˜ëª…ìœ¼ë¡œ ê²€ìƒ‰...\"\n          />\n          <Button onClick={handleSearch}>ê²€ìƒ‰</Button>\n          <Button variant=\"secondary\" onClick={() => setShowFilters(!showFilters)}>\n            í•„í„°\n          </Button>\n          <Button variant=\"secondary\" onClick={loadCourseEnrollments}>\n            ìƒˆë¡œê³ ì¹¨\n          </Button>\n          {(activeFilters.length > 0 || searchQuery) && (\n            <Button variant=\"secondary\" onClick={clearFilters}>\n              ì´ˆê¸°í™”\n            </Button>\n          )}\n        </SearchRow>\n        \n        <FilterRow $visible={showFilters}>\n          {filterOptions.map(filter => (\n            <FilterChip\n              key={filter}\n              $active={activeFilters.includes(filter)}\n              onClick={() => toggleFilter(filter)}\n            >\n              {filter}\n            </FilterChip>\n          ))}\n        </FilterRow>\n      </SearchSection>\n\n      <ResultsSection>\n        <ResultsHeader>\n          <ResultsTitle>ìˆ˜ê°• ì´ë ¥</ResultsTitle>\n          <ResultsCount>ì´ {filteredEnrollments.length}ê±´</ResultsCount>\n        </ResultsHeader>\n\n        {filteredEnrollments.length > 0 ? (\n          <TableContainer>\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHeaderCell>íšŒì›ëª…</TableHeaderCell>\n                  <TableHeaderCell>ìƒí’ˆëª…</TableHeaderCell>\n                  <TableHeaderCell>í”„ë¡œê·¸ë¨</TableHeaderCell>\n                  <TableHeaderCell>ì§„í–‰ìƒí™©</TableHeaderCell>\n                  <TableHeaderCell>ì§€ì </TableHeaderCell>\n                  <TableHeaderCell>ë‹´ë‹¹ì½”ì¹˜</TableHeaderCell>\n                  <TableHeaderCell>ê²°ì œì •ë³´</TableHeaderCell>\n                  <TableHeaderCell>ìˆ˜ê°•ê¸°ê°„</TableHeaderCell>\n                  <TableHeaderCell>ìƒíƒœ</TableHeaderCell>\n                </TableRow>\n              </TableHeader>\n              <tbody>\n                {filteredEnrollments.map(enrollment => (\n                  <TableRow key={enrollment.id}>\n                    <TableCell>{enrollment.memberName}</TableCell>\n                    <TableCell>\n                      <div>{enrollment.productName}</div>\n                      <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n                        {enrollment.productPrice.toLocaleString()}ì›\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <div>{enrollment.programName}</div>\n                      <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n                        {enrollment.programType}\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <ProgressInfo>\n                        {getProgressInfo(enrollment)}\n                      </ProgressInfo>\n                    </TableCell>\n                    <TableCell>{enrollment.branchName}</TableCell>\n                    <TableCell>{enrollment.coachName}</TableCell>\n                    <TableCell>\n                      <PriceInfo>\n                        <PaidAmount>\n                          {enrollment.paidAmount.toLocaleString()}ì›\n                        </PaidAmount>\n                        <UnpaidAmount $hasUnpaid={enrollment.unpaidAmount > 0}>\n                          {enrollment.unpaidAmount > 0 ? \n                            `ë¯¸ìˆ˜: ${enrollment.unpaidAmount.toLocaleString()}ì›` : \n                            'ì™„ë‚©'\n                          }\n                        </UnpaidAmount>\n                      </PriceInfo>\n                    </TableCell>\n                    <TableCell>\n                      <div>{formatDate(enrollment.startDate)}</div>\n                      {enrollment.endDate && (\n                        <div style={{ fontSize: '12px', color: AppColors.onInput1 }}>\n                          ~ {formatDate(enrollment.endDate)}\n                        </div>\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      <StatusBadge $status={enrollment.enrollmentStatus}>\n                        {enrollment.enrollmentStatus === 'completed' ? 'ì™„ë£Œ' : 'ë¯¸ìˆ˜'}\n                      </StatusBadge>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </tbody>\n            </Table>\n          </TableContainer>\n        ) : (\n          <EmptyState>\n            <h3>ìˆ˜ê°• ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤</h3>\n            <p>ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ìˆ˜ê°•ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”.</p>\n          </EmptyState>\n        )}\n      </ResultsSection>\n    </PageContainer>\n  );\n};\n\nexport default CourseHistory;\n"
        }
    ]
}