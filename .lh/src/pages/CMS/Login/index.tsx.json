{
    "sourceFile": "src/pages/CMS/Login/index.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1757827333310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1757827890531,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -130,9 +130,9 @@\n   return (\n     <Container className=\"cms-layout\">\n       <LoginFormContainer>\n         <LogoContainer>\n-          <Logo src=\"/logo.svg\" alt=\"BidSpace Logo\" />\n+          <Logo src=\"/logo.svg\" alt=\"Lavida Logo\" />\n         </LogoContainer>\n         \n         <FormTitle>ë¡œê·¸ì¸</FormTitle>\n         \n"
                },
                {
                    "date": 1759911046517,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,8 +7,10 @@\n import { AppIdTextField } from '../../../customComponents/AppIdTextField';\n import { AppPwdTextField, PwdFieldType } from '../../../customComponents/AppPwdTextField';\n import { useAdminAuth } from '../../../context/AdminAuthContext';\n import PrimaryButton from '../../../components/PrimaryButton';\n+import { dbManager } from '../../../utils/indexedDB';\n+import { autoInitializeSystem } from '../../../utils/systemInit';\n \n const Container = styled.div`\n   display: flex;\n   justify-content: center;\n@@ -71,14 +73,19 @@\n   useEffect(() => {\n     // Contextê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë˜ê³ , ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆê³ , í˜„ì¬ ë¡œê·¸ì¸ ì‹œë„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸\n     if (ready && isLoggedIn && !isLoading) {\n       console.log('ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìŒ, CMS í˜ì´ì§€ë¡œ ì´ë™');\n-      window.location.href = '/cms/admin';\n+      window.location.href = '/cms/dashboard';\n     }\n   }, [ready, isLoggedIn, isLoading]);\n \n-  const userIdRegex = /^(?=.*[A-Za-z])(?=.*[0-9])[A-Za-z0-9]{6,20}$/;\n-  const passwordRegex = /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?~^<>,.&+=])[A-Za-z\\d$@$!%*#?~^<>,.&+=]{8,}$/;\n+  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì‹œìŠ¤í…œ ì´ˆê¸°í™”\n+  useEffect(() => {\n+    const initSystem = async () => {\n+      await autoInitializeSystem();\n+    };\n+    initSystem();\n+  }, []);\n \n   const handleLogin = async () => {\n     if (isLoading) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n \n@@ -89,35 +96,67 @@\n \n     if (!userId) {\n       setIdError(\"ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n       hasError = true;\n-    } else if (!userIdRegex.test(userId)) {\n-      setIdError(\"ì•„ì´ë””ëŠ” ì˜ë¬¸ê³¼ ìˆ«ìë¥¼ ëª¨ë‘ í¬í•¨í•˜ì—¬ 6~20ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n-      hasError = true;\n     }\n \n     if (!password) {\n       setPwdError(\"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n       hasError = true;\n-    } else if (!passwordRegex.test(password)) {\n-      setPwdError(\"ë¹„ë°€ë²ˆí˜¸ëŠ” ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ ëª¨ë‘ í¬í•¨í•˜ì—¬ 8ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n-      hasError = true;\n     }\n \n     if (hasError) return;\n \n     setIsLoading(true);\n \n-    // ë”ë¯¸ ë¡œê·¸ì¸ ì²´í¬\n-    if (userId === 'lavida01' && password === 'a!111111') {\n-      // ì„±ê³µ\n-      const dummyToken = 'dummy_access_token';\n-      login(userId, dummyToken);\n+    try {\n+      // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§ì› ì •ë³´ ì¡°íšŒ\n+      const staff = await dbManager.getStaffByLoginId(userId);\n+      \n+      if (!staff) {\n+        toast.error(\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê³„ì •ì…ë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ë¹„ë°€ë²ˆí˜¸ í™•ì¸\n+      if (staff.password !== password) {\n+        toast.error(\"ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ê¶Œí•œ í™•ì¸ (MASTER, EDITORë§Œ ë¡œê·¸ì¸ í—ˆìš©)\n+      if (staff.permission !== 'MASTER' && staff.permission !== 'EDITOR') {\n+        toast.error(\"CMS ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ë¡œê·¸ì¸ ì„±ê³µ\n+      const accessToken = `staff_${staff.id}_${Date.now()}`;\n+      login(userId, accessToken);\n       toast.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\n-      window.location.href = '/cms/admin';\n-    } else {\n-      // ì‹¤íŒ¨\n-      toast.error(\"ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\", {\n+      window.location.href = '/cms/dashboard';\n+\n+    } catch (error) {\n+      console.error('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n+      toast.error(\"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", {\n         autoClose: 5000,\n         hideProgressBar: false,\n         closeOnClick: true,\n         pauseOnHover: true,\n"
                },
                {
                    "date": 1759912385133,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,8 @@\n import { AppPwdTextField, PwdFieldType } from '../../../customComponents/AppPwdTextField';\n import { useAdminAuth } from '../../../context/AdminAuthContext';\n import PrimaryButton from '../../../components/PrimaryButton';\n import { dbManager } from '../../../utils/indexedDB';\n-import { autoInitializeSystem } from '../../../utils/systemInit';\n \n const Container = styled.div`\n   display: flex;\n   justify-content: center;\n@@ -77,16 +76,8 @@\n       window.location.href = '/cms/dashboard';\n     }\n   }, [ready, isLoggedIn, isLoading]);\n \n-  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì‹œìŠ¤í…œ ì´ˆê¸°í™”\n-  useEffect(() => {\n-    const initSystem = async () => {\n-      await autoInitializeSystem();\n-    };\n-    initSystem();\n-  }, []);\n-\n   const handleLogin = async () => {\n     if (isLoading) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n \n     setIdError(null);\n"
                },
                {
                    "date": 1760074699391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -125,8 +125,20 @@\n         setIsLoading(false);\n         return;\n       }\n \n+      // ê³„ì • í™œì„± ìƒíƒœ í™•ì¸\n+      if (!staff.isActive) {\n+        toast.error(\"ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n       // ê¶Œí•œ í™•ì¸ (MASTER, EDITORë§Œ ë¡œê·¸ì¸ í—ˆìš©)\n       if (staff.permission !== 'MASTER' && staff.permission !== 'EDITOR') {\n         toast.error(\"CMS ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", {\n           autoClose: 5000,\n"
                },
                {
                    "date": 1760075648009,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -137,10 +137,10 @@\n         setIsLoading(false);\n         return;\n       }\n \n-      // ê¶Œí•œ í™•ì¸ (MASTER, EDITORë§Œ ë¡œê·¸ì¸ í—ˆìš©)\n-      if (staff.permission !== 'MASTER' && staff.permission !== 'EDITOR') {\n+      // ê¶Œí•œ í™•ì¸ (MASTER, EDITOR, VIEWER ëª¨ë‘ ë¡œê·¸ì¸ í—ˆìš©)\n+      if (!['MASTER', 'EDITOR', 'VIEWER'].includes(staff.permission)) {\n         toast.error(\"CMS ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", {\n           autoClose: 5000,\n           hideProgressBar: false,\n           closeOnClick: true,\n"
                },
                {
                    "date": 1760703784423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,219 @@\n+import React, { useState, useEffect } from 'react';\n+import styled from 'styled-components';\n+import { toast } from 'react-toastify';\n+import { AppColors } from '../../../styles/colors';\n+import { AppTextStyles } from '../../../styles/textStyles';\n+import { FormTitle } from '../../../customComponents/FormTitle';\n+import { AppIdTextField } from '../../../customComponents/AppIdTextField';\n+import { AppPwdTextField, PwdFieldType } from '../../../customComponents/AppPwdTextField';\n+import { useAdminAuth } from '../../../context/AdminAuthContext';\n+import PrimaryButton from '../../../components/PrimaryButton';\n+import { dbManager } from '../../../utils/indexedDB';\n+\n+const Container = styled.div`\n+  display: flex;\n+  justify-content: center;\n+  align-items: center;\n+  min-height: 100vh;\n+  background-color: ${AppColors.background};\n+  padding: 20px;\n+`;\n+\n+const LoginFormContainer = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: flex-start;\n+  width: 100%;\n+  max-width: 400px;\n+  gap: 24px;\n+`;\n+\n+const LogoContainer = styled.div`\n+  display: flex;\n+  justify-content: center;\n+  width: 100%;\n+  margin-bottom: 16px;\n+`;\n+\n+const Logo = styled.img`\n+  width: 120px;\n+  height: auto;\n+`;\n+\n+const FormWrapper = styled.div`\n+  width: 100%;\n+  display: flex;\n+  flex-direction: column;\n+  gap: 16px;\n+`;\n+\n+const ButtonWrapper = styled.div`\n+  width: 100%;\n+  margin-top: 8px;\n+`;\n+\n+const HelpText = styled.p`\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  color: ${AppColors.onInput2};\n+  text-align: center;\n+  line-height: 1.5;\n+  margin: 0;\n+`;\n+\n+const CMSLogin: React.FC = () => {\n+  const [userId, setUserId] = useState('');\n+  const [password, setPassword] = useState('');\n+  const [idError, setIdError] = useState<string | null>(null);\n+  const [pwdError, setPwdError] = useState<string | null>(null);\n+  const [isLoading, setIsLoading] = useState(false);\n+\n+  const { login, isLoggedIn, ready } = useAdminAuth();\n+\n+  useEffect(() => {\n+    // Contextê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë˜ê³ , ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆê³ , í˜„ì¬ ë¡œê·¸ì¸ ì‹œë„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸\n+    if (ready && isLoggedIn && !isLoading) {\n+      console.log('ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìŒ, CMS í˜ì´ì§€ë¡œ ì´ë™');\n+      window.location.href = '/cms/dashboard';\n+    }\n+  }, [ready, isLoggedIn, isLoading]);\n+\n+  const handleLogin = async () => {\n+    if (isLoading) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n+\n+    setIdError(null);\n+    setPwdError(null);\n+\n+    let hasError = false;\n+\n+    if (!userId) {\n+      setIdError(\"ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n+      hasError = true;\n+    }\n+\n+    if (!password) {\n+      setPwdError(\"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n+      hasError = true;\n+    }\n+\n+    if (hasError) return;\n+\n+    setIsLoading(true);\n+\n+    try {\n+      // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§ì› ì •ë³´ ì¡°íšŒ\n+      const staff = await dbManager.getStaffByLoginId(userId);\n+      \n+      if (!staff) {\n+        toast.error(\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê³„ì •ì…ë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ë¹„ë°€ë²ˆí˜¸ í™•ì¸\n+      if (staff.password !== password) {\n+        toast.error(\"ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ê³„ì • í™œì„± ìƒíƒœ í™•ì¸\n+      if (!staff.isActive) {\n+        toast.error(\"ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ê¶Œí•œ í™•ì¸ (MASTER, EDITOR, VIEWER ëª¨ë‘ ë¡œê·¸ì¸ í—ˆìš©)\n+      if (!['MASTER', 'EDITOR', 'VIEWER'].includes(staff.permission)) {\n+        toast.error(\"CMS ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ë¡œê·¸ì¸ ì„±ê³µ\n+      const accessToken = `staff_${staff.id}_${Date.now()}`;\n+      login(userId, accessToken);\n+      toast.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\n+      window.location.href = '/cms/dashboard';\n+\n+    } catch (error) {\n+      console.error('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n+      toast.error(\"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", {\n+        autoClose: 5000,\n+        hideProgressBar: false,\n+        closeOnClick: true,\n+        pauseOnHover: true,\n+      });\n+    }\n+\n+    setIsLoading(false);\n+  };\n+\n+  return (\n+    <Container className=\"cms-layout\">\n+      <LoginFormContainer>\n+        <LogoContainer>\n+          <Logo src=\"/logo192.png\" alt=\"Lavida Logo\" />\n+        </LogoContainer>\n+        \n+        <FormTitle>ë¡œê·¸ì¸</FormTitle>\n+        \n+        <FormWrapper>\n+          <div>\n+            <AppIdTextField\n+              value={userId}\n+              onChange={(e) => setUserId(e.target.value)}\n+              showValidationMessage={false}\n+              errorMessage={idError || undefined}\n+            />\n+          </div>\n+          \n+          <div>\n+            <AppPwdTextField\n+              value={password}\n+              onChange={(e) => setPassword(e.target.value)}\n+              fieldType={PwdFieldType.PASSWORD}\n+              showValidationMessage={false}\n+              errorMessage={pwdError || undefined}\n+            />\n+          </div>\n+        </FormWrapper>\n+        \n+        <ButtonWrapper>\n+          <PrimaryButton\n+            onClick={handleLogin}\n+            disabled={isLoading}\n+          >\n+            {isLoading ? \"ë¡œê·¸ì¸ ì¤‘...\" : \"ë¡œê·¸ì¸\"}\n+          </PrimaryButton>\n+        </ButtonWrapper>\n+        \n+        <HelpText>\n+          ì‹œìŠ¤í…œ ê³„ì •ì´ ì—†ë‹¤ë©´, ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ ë°”ëë‹ˆë‹¤.\n+        </HelpText>\n+      </LoginFormContainer>\n+    </Container>\n+  );\n+};\n+\n+export default CMSLogin;\n"
                },
                {
                    "date": 1760755500677,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,309 @@\n+import React, { useState, useEffect } from 'react';\n+import styled from 'styled-components';\n+import { toast } from 'react-toastify';\n+import { AppColors } from '../../../styles/colors';\n+import { AppTextStyles } from '../../../styles/textStyles';\n+import { FormTitle } from '../../../customComponents/FormTitle';\n+import { AppIdTextField } from '../../../customComponents/AppIdTextField';\n+import { AppPwdTextField, PwdFieldType } from '../../../customComponents/AppPwdTextField';\n+import { useAdminAuth } from '../../../context/AdminAuthContext';\n+import PrimaryButton from '../../../components/PrimaryButton';\n+import { dbManager } from '../../../utils/indexedDB';\n+\n+const Container = styled.div`\n+  display: flex;\n+  justify-content: center;\n+  align-items: center;\n+  min-height: 100vh;\n+  background-color: ${AppColors.background};\n+  padding: 20px;\n+`;\n+\n+const LoginFormContainer = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: flex-start;\n+  width: 100%;\n+  max-width: 400px;\n+  gap: 24px;\n+`;\n+\n+const LogoContainer = styled.div`\n+  display: flex;\n+  justify-content: center;\n+  width: 100%;\n+  margin-bottom: 16px;\n+`;\n+\n+const Logo = styled.img`\n+  width: 120px;\n+  height: auto;\n+`;\n+\n+const FormWrapper = styled.div`\n+  width: 100%;\n+  display: flex;\n+  flex-direction: column;\n+  gap: 16px;\n+`;\n+\n+const ButtonWrapper = styled.div`\n+  width: 100%;\n+  margin-top: 8px;\n+`;\n+\n+const HelpText = styled.p`\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  color: ${AppColors.onInput2};\n+  text-align: center;\n+  line-height: 1.5;\n+  margin: 0;\n+`;\n+\n+const CMSLogin: React.FC = () => {\n+  const [userId, setUserId] = useState('');\n+  const [password, setPassword] = useState('');\n+  const [idError, setIdError] = useState<string | null>(null);\n+  const [pwdError, setPwdError] = useState<string | null>(null);\n+  const [isLoading, setIsLoading] = useState(false);\n+  const [systemStatus, setSystemStatus] = useState<'checking' | 'ready' | 'initializing'>('checking');\n+\n+  const { login, isLoggedIn, ready } = useAdminAuth();\n+\n+  useEffect(() => {\n+    // Contextê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë˜ê³ , ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆê³ , í˜„ì¬ ë¡œê·¸ì¸ ì‹œë„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸\n+    if (ready && isLoggedIn && !isLoading) {\n+      console.log('ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìŒ, CMS í˜ì´ì§€ë¡œ ì´ë™');\n+      window.location.href = '/cms/dashboard';\n+    }\n+  }, [ready, isLoggedIn, isLoading]);\n+\n+  useEffect(() => {\n+    // ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸\n+    const checkSystemStatus = async () => {\n+      try {\n+        setSystemStatus('checking');\n+        \n+        // IndexedDB ì—°ê²° ëŒ€ê¸°\n+        let dbReady = false;\n+        let attempts = 0;\n+        const maxAttempts = 15;\n+        \n+        while (!dbReady && attempts < maxAttempts) {\n+          try {\n+            await dbManager.getAllBranches();\n+            dbReady = true;\n+          } catch (error) {\n+            attempts++;\n+            console.log(`ğŸ”„ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì¤‘... (${attempts}/${maxAttempts})`);\n+            await new Promise(resolve => setTimeout(resolve, 500));\n+          }\n+        }\n+        \n+        if (!dbReady) {\n+          console.warn('âš ï¸ IndexedDB ì—°ê²° ì‹œê°„ ì´ˆê³¼, ê³„ì† ì§„í–‰');\n+        }\n+        \n+        // ì‹œìŠ¤í…œ ê´€ë¦¬ì ì¡´ì¬ ì—¬ë¶€ í™•ì¸\n+        const systemAdmin = await dbManager.getStaffByLoginId('system_admin');\n+        \n+        if (systemAdmin) {\n+          console.log('âœ… ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ');\n+          setSystemStatus('ready');\n+        } else {\n+          console.log('â³ ì‹œìŠ¤í…œ ê´€ë¦¬ì ìƒì„± ì¤‘...');\n+          setSystemStatus('initializing');\n+          \n+          // ì‹œìŠ¤í…œ ê´€ë¦¬ìê°€ ìƒì„±ë  ë•Œê¹Œì§€ ëŒ€ê¸°\n+          await waitForSystemAdmin();\n+        }\n+      } catch (error) {\n+        console.error('ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);\n+        setSystemStatus('ready'); // ì˜¤ë¥˜ ì‹œì—ë„ ê³„ì† ì§„í–‰\n+      }\n+    };\n+    \n+    checkSystemStatus();\n+  }, []);\n+\n+  const waitForSystemAdmin = async () => {\n+    let attempts = 0;\n+    const maxAttempts = 30; // 15ì´ˆê¹Œì§€ ëŒ€ê¸°\n+    \n+    while (attempts < maxAttempts) {\n+      try {\n+        const systemAdmin = await dbManager.getStaffByLoginId('system_admin');\n+        if (systemAdmin) {\n+          console.log('âœ… ì‹œìŠ¤í…œ ê´€ë¦¬ì ìƒì„± ì™„ë£Œ');\n+          setSystemStatus('ready');\n+          return;\n+        }\n+        \n+        attempts++;\n+        await new Promise(resolve => setTimeout(resolve, 500));\n+      } catch (error) {\n+        attempts++;\n+        await new Promise(resolve => setTimeout(resolve, 500));\n+      }\n+    }\n+    \n+    console.log('â° ì‹œìŠ¤í…œ ê´€ë¦¬ì ìƒì„± ëŒ€ê¸° ì‹œê°„ ì´ˆê³¼, ê³„ì† ì§„í–‰');\n+    setSystemStatus('ready');\n+  };\n+\n+  const handleLogin = async () => {\n+    if (isLoading) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n+\n+    setIdError(null);\n+    setPwdError(null);\n+\n+    let hasError = false;\n+\n+    if (!userId) {\n+      setIdError(\"ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n+      hasError = true;\n+    }\n+\n+    if (!password) {\n+      setPwdError(\"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n+      hasError = true;\n+    }\n+\n+    if (hasError) return;\n+\n+    setIsLoading(true);\n+\n+    try {\n+      // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§ì› ì •ë³´ ì¡°íšŒ\n+      const staff = await dbManager.getStaffByLoginId(userId);\n+      \n+      if (!staff) {\n+        toast.error(\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê³„ì •ì…ë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ë¹„ë°€ë²ˆí˜¸ í™•ì¸\n+      if (staff.password !== password) {\n+        toast.error(\"ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ê³„ì • í™œì„± ìƒíƒœ í™•ì¸\n+      if (!staff.isActive) {\n+        toast.error(\"ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ê¶Œí•œ í™•ì¸ (MASTER, EDITOR, VIEWER ëª¨ë‘ ë¡œê·¸ì¸ í—ˆìš©)\n+      if (!['MASTER', 'EDITOR', 'VIEWER'].includes(staff.permission)) {\n+        toast.error(\"CMS ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ë¡œê·¸ì¸ ì„±ê³µ\n+      const accessToken = `staff_${staff.id}_${Date.now()}`;\n+      login(userId, accessToken);\n+      toast.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\n+      window.location.href = '/cms/dashboard';\n+\n+    } catch (error) {\n+      console.error('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n+      toast.error(\"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", {\n+        autoClose: 5000,\n+        hideProgressBar: false,\n+        closeOnClick: true,\n+        pauseOnHover: true,\n+      });\n+    }\n+\n+    setIsLoading(false);\n+  };\n+\n+  return (\n+    <Container className=\"cms-layout\">\n+      <LoginFormContainer>\n+        <LogoContainer>\n+          <Logo src=\"/logo192.png\" alt=\"Lavida Logo\" />\n+        </LogoContainer>\n+        \n+        <FormTitle>ë¡œê·¸ì¸</FormTitle>\n+        \n+        {systemStatus === 'checking' && (\n+          <HelpText>\n+            ğŸ”„ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤...\n+          </HelpText>\n+        )}\n+        \n+        {systemStatus === 'initializing' && (\n+          <HelpText>\n+            â³ ì‹œìŠ¤í…œì„ ì´ˆê¸°í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...\n+          </HelpText>\n+        )}\n+        \n+        {systemStatus === 'ready' && (\n+          <>\n+            <FormWrapper>\n+              <div>\n+                <AppIdTextField\n+                  value={userId}\n+                  onChange={(e) => setUserId(e.target.value)}\n+                  showValidationMessage={false}\n+                  errorMessage={idError || undefined}\n+                />\n+              </div>\n+              \n+              <div>\n+                <AppPwdTextField\n+                  value={password}\n+                  onChange={(e) => setPassword(e.target.value)}\n+                  fieldType={PwdFieldType.PASSWORD}\n+                  showValidationMessage={false}\n+                  errorMessage={pwdError || undefined}\n+                />\n+              </div>\n+            </FormWrapper>\n+            \n+            <ButtonWrapper>\n+              <PrimaryButton\n+                onClick={handleLogin}\n+                disabled={isLoading}\n+              >\n+                {isLoading ? \"ë¡œê·¸ì¸ ì¤‘...\" : \"ë¡œê·¸ì¸\"}\n+              </PrimaryButton>\n+            </ButtonWrapper>\n+            \n+            <HelpText>\n+              ì‹œìŠ¤í…œ ê³„ì •ì´ ì—†ë‹¤ë©´, ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ ë°”ëë‹ˆë‹¤.\n+            </HelpText>\n+          </>\n+        )}\n+      </LoginFormContainer>\n+    </Container>\n+  );\n+};\n+\n+export default CMSLogin;\n"
                },
                {
                    "date": 1761648628613,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,9 +73,9 @@\n   useEffect(() => {\n     // Contextê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë˜ê³ , ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆê³ , í˜„ì¬ ë¡œê·¸ì¸ ì‹œë„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸\n     if (ready && isLoggedIn && !isLoading) {\n       console.log('ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìŒ, CMS í˜ì´ì§€ë¡œ ì´ë™');\n-      window.location.href = '/cms/dashboard';\n+      window.location.href = '/cms/member/search';\n     }\n   }, [ready, isLoggedIn, isLoading]);\n \n   useEffect(() => {\n@@ -227,9 +227,9 @@\n       // ë¡œê·¸ì¸ ì„±ê³µ\n       const accessToken = `staff_${staff.id}_${Date.now()}`;\n       login(userId, accessToken);\n       toast.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\n-      window.location.href = '/cms/dashboard';\n+      window.location.href = '/cms/member/search';\n \n     } catch (error) {\n       console.error('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n       toast.error(\"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", {\n@@ -306,442 +306,4 @@\n   );\n };\n \n export default CMSLogin;\n-import React, { useState, useEffect } from 'react';\n-import styled from 'styled-components';\n-import { toast } from 'react-toastify';\n-import { AppColors } from '../../../styles/colors';\n-import { AppTextStyles } from '../../../styles/textStyles';\n-import { FormTitle } from '../../../customComponents/FormTitle';\n-import { AppIdTextField } from '../../../customComponents/AppIdTextField';\n-import { AppPwdTextField, PwdFieldType } from '../../../customComponents/AppPwdTextField';\n-import { useAdminAuth } from '../../../context/AdminAuthContext';\n-import PrimaryButton from '../../../components/PrimaryButton';\n-import { dbManager } from '../../../utils/indexedDB';\n-\n-const Container = styled.div`\n-  display: flex;\n-  justify-content: center;\n-  align-items: center;\n-  min-height: 100vh;\n-  background-color: ${AppColors.background};\n-  padding: 20px;\n-`;\n-\n-const LoginFormContainer = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  align-items: flex-start;\n-  width: 100%;\n-  max-width: 400px;\n-  gap: 24px;\n-`;\n-\n-const LogoContainer = styled.div`\n-  display: flex;\n-  justify-content: center;\n-  width: 100%;\n-  margin-bottom: 16px;\n-`;\n-\n-const Logo = styled.img`\n-  width: 120px;\n-  height: auto;\n-`;\n-\n-const FormWrapper = styled.div`\n-  width: 100%;\n-  display: flex;\n-  flex-direction: column;\n-  gap: 16px;\n-`;\n-\n-const ButtonWrapper = styled.div`\n-  width: 100%;\n-  margin-top: 8px;\n-`;\n-\n-const HelpText = styled.p`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onInput2};\n-  text-align: center;\n-  line-height: 1.5;\n-  margin: 0;\n-`;\n-\n-const CMSLogin: React.FC = () => {\n-  const [userId, setUserId] = useState('');\n-  const [password, setPassword] = useState('');\n-  const [idError, setIdError] = useState<string | null>(null);\n-  const [pwdError, setPwdError] = useState<string | null>(null);\n-  const [isLoading, setIsLoading] = useState(false);\n-\n-  const { login, isLoggedIn, ready } = useAdminAuth();\n-\n-  useEffect(() => {\n-    // Contextê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë˜ê³ , ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆê³ , í˜„ì¬ ë¡œê·¸ì¸ ì‹œë„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸\n-    if (ready && isLoggedIn && !isLoading) {\n-      console.log('ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìŒ, CMS í˜ì´ì§€ë¡œ ì´ë™');\n-      window.location.href = '/cms/dashboard';\n-    }\n-  }, [ready, isLoggedIn, isLoading]);\n-\n-  const handleLogin = async () => {\n-    if (isLoading) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n-\n-    setIdError(null);\n-    setPwdError(null);\n-\n-    let hasError = false;\n-\n-    if (!userId) {\n-      setIdError(\"ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n-      hasError = true;\n-    }\n-\n-    if (!password) {\n-      setPwdError(\"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n-      hasError = true;\n-    }\n-\n-    if (hasError) return;\n-\n-    setIsLoading(true);\n-\n-    try {\n-      // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§ì› ì •ë³´ ì¡°íšŒ\n-      const staff = await dbManager.getStaffByLoginId(userId);\n-      \n-      if (!staff) {\n-        toast.error(\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê³„ì •ì…ë‹ˆë‹¤.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ë¹„ë°€ë²ˆí˜¸ í™•ì¸\n-      if (staff.password !== password) {\n-        toast.error(\"ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ê³„ì • í™œì„± ìƒíƒœ í™•ì¸\n-      if (!staff.isActive) {\n-        toast.error(\"ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ê¶Œí•œ í™•ì¸ (MASTER, EDITOR, VIEWER ëª¨ë‘ ë¡œê·¸ì¸ í—ˆìš©)\n-      if (!['MASTER', 'EDITOR', 'VIEWER'].includes(staff.permission)) {\n-        toast.error(\"CMS ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ë¡œê·¸ì¸ ì„±ê³µ\n-      const accessToken = `staff_${staff.id}_${Date.now()}`;\n-      login(userId, accessToken);\n-      toast.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\n-      window.location.href = '/cms/dashboard';\n-\n-    } catch (error) {\n-      console.error('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n-      toast.error(\"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", {\n-        autoClose: 5000,\n-        hideProgressBar: false,\n-        closeOnClick: true,\n-        pauseOnHover: true,\n-      });\n-    }\n-\n-    setIsLoading(false);\n-  };\n-\n-  return (\n-    <Container className=\"cms-layout\">\n-      <LoginFormContainer>\n-        <LogoContainer>\n-          <Logo src=\"/logo192.png\" alt=\"Lavida Logo\" />\n-        </LogoContainer>\n-        \n-        <FormTitle>ë¡œê·¸ì¸</FormTitle>\n-        \n-        <FormWrapper>\n-          <div>\n-            <AppIdTextField\n-              value={userId}\n-              onChange={(e) => setUserId(e.target.value)}\n-              showValidationMessage={false}\n-              errorMessage={idError || undefined}\n-            />\n-          </div>\n-          \n-          <div>\n-            <AppPwdTextField\n-              value={password}\n-              onChange={(e) => setPassword(e.target.value)}\n-              fieldType={PwdFieldType.PASSWORD}\n-              showValidationMessage={false}\n-              errorMessage={pwdError || undefined}\n-            />\n-          </div>\n-        </FormWrapper>\n-        \n-        <ButtonWrapper>\n-          <PrimaryButton\n-            onClick={handleLogin}\n-            disabled={isLoading}\n-          >\n-            {isLoading ? \"ë¡œê·¸ì¸ ì¤‘...\" : \"ë¡œê·¸ì¸\"}\n-          </PrimaryButton>\n-        </ButtonWrapper>\n-        \n-        <HelpText>\n-          ì‹œìŠ¤í…œ ê³„ì •ì´ ì—†ë‹¤ë©´, ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ ë°”ëë‹ˆë‹¤.\n-        </HelpText>\n-      </LoginFormContainer>\n-    </Container>\n-  );\n-};\n-\n-export default CMSLogin;\n-import React, { useState, useEffect } from 'react';\n-import styled from 'styled-components';\n-import { toast } from 'react-toastify';\n-import { AppColors } from '../../../styles/colors';\n-import { AppTextStyles } from '../../../styles/textStyles';\n-import { FormTitle } from '../../../customComponents/FormTitle';\n-import { AppIdTextField } from '../../../customComponents/AppIdTextField';\n-import { AppPwdTextField, PwdFieldType } from '../../../customComponents/AppPwdTextField';\n-import { useAdminAuth } from '../../../context/AdminAuthContext';\n-import PrimaryButton from '../../../components/PrimaryButton';\n-import { dbManager } from '../../../utils/indexedDB';\n-\n-const Container = styled.div`\n-  display: flex;\n-  justify-content: center;\n-  align-items: center;\n-  min-height: 100vh;\n-  background-color: ${AppColors.background};\n-  padding: 20px;\n-`;\n-\n-const LoginFormContainer = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  align-items: flex-start;\n-  width: 100%;\n-  max-width: 400px;\n-  gap: 24px;\n-`;\n-\n-const LogoContainer = styled.div`\n-  display: flex;\n-  justify-content: center;\n-  width: 100%;\n-  margin-bottom: 16px;\n-`;\n-\n-const Logo = styled.img`\n-  width: 120px;\n-  height: auto;\n-`;\n-\n-const FormWrapper = styled.div`\n-  width: 100%;\n-  display: flex;\n-  flex-direction: column;\n-  gap: 16px;\n-`;\n-\n-const ButtonWrapper = styled.div`\n-  width: 100%;\n-  margin-top: 8px;\n-`;\n-\n-const HelpText = styled.p`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onInput2};\n-  text-align: center;\n-  line-height: 1.5;\n-  margin: 0;\n-`;\n-\n-const CMSLogin: React.FC = () => {\n-  const [userId, setUserId] = useState('');\n-  const [password, setPassword] = useState('');\n-  const [idError, setIdError] = useState<string | null>(null);\n-  const [pwdError, setPwdError] = useState<string | null>(null);\n-  const [isLoading, setIsLoading] = useState(false);\n-\n-  const { login, isLoggedIn, ready } = useAdminAuth();\n-\n-  useEffect(() => {\n-    // Contextê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë˜ê³ , ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆê³ , í˜„ì¬ ë¡œê·¸ì¸ ì‹œë„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸\n-    if (ready && isLoggedIn && !isLoading) {\n-      console.log('ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìŒ, CMS í˜ì´ì§€ë¡œ ì´ë™');\n-      window.location.href = '/cms/dashboard';\n-    }\n-  }, [ready, isLoggedIn, isLoading]);\n-\n-  const handleLogin = async () => {\n-    if (isLoading) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n-\n-    setIdError(null);\n-    setPwdError(null);\n-\n-    let hasError = false;\n-\n-    if (!userId) {\n-      setIdError(\"ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n-      hasError = true;\n-    }\n-\n-    if (!password) {\n-      setPwdError(\"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n-      hasError = true;\n-    }\n-\n-    if (hasError) return;\n-\n-    setIsLoading(true);\n-\n-    try {\n-      // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§ì› ì •ë³´ ì¡°íšŒ\n-      const staff = await dbManager.getStaffByLoginId(userId);\n-      \n-      if (!staff) {\n-        toast.error(\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê³„ì •ì…ë‹ˆë‹¤.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ë¹„ë°€ë²ˆí˜¸ í™•ì¸\n-      if (staff.password !== password) {\n-        toast.error(\"ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ê³„ì • í™œì„± ìƒíƒœ í™•ì¸\n-      if (!staff.isActive) {\n-        toast.error(\"ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ê¶Œí•œ í™•ì¸ (MASTER, EDITOR, VIEWER ëª¨ë‘ ë¡œê·¸ì¸ í—ˆìš©)\n-      if (!['MASTER', 'EDITOR', 'VIEWER'].includes(staff.permission)) {\n-        toast.error(\"CMS ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ë¡œê·¸ì¸ ì„±ê³µ\n-      const accessToken = `staff_${staff.id}_${Date.now()}`;\n-      login(userId, accessToken);\n-      toast.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\n-      window.location.href = '/cms/dashboard';\n-\n-    } catch (error) {\n-      console.error('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n-      toast.error(\"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", {\n-        autoClose: 5000,\n-        hideProgressBar: false,\n-        closeOnClick: true,\n-        pauseOnHover: true,\n-      });\n-    }\n-\n-    setIsLoading(false);\n-  };\n-\n-  return (\n-    <Container className=\"cms-layout\">\n-      <LoginFormContainer>\n-        <LogoContainer>\n-          <Logo src=\"/logo.svg\" alt=\"Lavida Logo\" />\n-        </LogoContainer>\n-        \n-        <FormTitle>ë¡œê·¸ì¸</FormTitle>\n-        \n-        <FormWrapper>\n-          <div>\n-            <AppIdTextField\n-              value={userId}\n-              onChange={(e) => setUserId(e.target.value)}\n-              showValidationMessage={false}\n-              errorMessage={idError || undefined}\n-            />\n-          </div>\n-          \n-          <div>\n-            <AppPwdTextField\n-              value={password}\n-              onChange={(e) => setPassword(e.target.value)}\n-              fieldType={PwdFieldType.PASSWORD}\n-              showValidationMessage={false}\n-              errorMessage={pwdError || undefined}\n-            />\n-          </div>\n-        </FormWrapper>\n-        \n-        <ButtonWrapper>\n-          <PrimaryButton\n-            onClick={handleLogin}\n-            disabled={isLoading}\n-          >\n-            {isLoading ? \"ë¡œê·¸ì¸ ì¤‘...\" : \"ë¡œê·¸ì¸\"}\n-          </PrimaryButton>\n-        </ButtonWrapper>\n-        \n-        <HelpText>\n-          ì‹œìŠ¤í…œ ê³„ì •ì´ ì—†ë‹¤ë©´, ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ ë°”ëë‹ˆë‹¤.\n-        </HelpText>\n-      </LoginFormContainer>\n-    </Container>\n-  );\n-};\n-\n-export default CMSLogin;\n"
                },
                {
                    "date": 1761650177346,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -246,9 +246,9 @@\n   return (\n     <Container className=\"cms-layout\">\n       <LoginFormContainer>\n         <LogoContainer>\n-          <Logo src=\"/logo192.png\" alt=\"Lavida Logo\" />\n+          <Logo src={`${process.env.PUBLIC_URL}/logo192.png`} alt=\"Lavida Logo\" />\n         </LogoContainer>\n         \n         <FormTitle>ë¡œê·¸ì¸</FormTitle>\n         \n"
                },
                {
                    "date": 1761650403299,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,6 @@\n import React, { useState, useEffect } from 'react';\n+import { useNavigate } from 'react-router-dom';\n import styled from 'styled-components';\n import { toast } from 'react-toastify';\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n@@ -60,8 +61,9 @@\n   margin: 0;\n `;\n \n const CMSLogin: React.FC = () => {\n+  const navigate = useNavigate();\n   const [userId, setUserId] = useState('');\n   const [password, setPassword] = useState('');\n   const [idError, setIdError] = useState<string | null>(null);\n   const [pwdError, setPwdError] = useState<string | null>(null);\n@@ -73,11 +75,11 @@\n   useEffect(() => {\n     // Contextê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë˜ê³ , ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆê³ , í˜„ì¬ ë¡œê·¸ì¸ ì‹œë„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸\n     if (ready && isLoggedIn && !isLoading) {\n       console.log('ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìŒ, CMS í˜ì´ì§€ë¡œ ì´ë™');\n-      window.location.href = '/cms/member/search';\n+      navigate('/cms/member/search');\n     }\n-  }, [ready, isLoggedIn, isLoading]);\n+  }, [ready, isLoggedIn, isLoading, navigate]);\n \n   useEffect(() => {\n     // ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸\n     const checkSystemStatus = async () => {\n@@ -227,9 +229,9 @@\n       // ë¡œê·¸ì¸ ì„±ê³µ\n       const accessToken = `staff_${staff.id}_${Date.now()}`;\n       login(userId, accessToken);\n       toast.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\n-      window.location.href = '/cms/member/search';\n+      navigate('/cms/member/search');\n \n     } catch (error) {\n       console.error('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n       toast.error(\"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", {\n"
                },
                {
                    "date": 1761907538671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,9 +67,8 @@\n   const [password, setPassword] = useState('');\n   const [idError, setIdError] = useState<string | null>(null);\n   const [pwdError, setPwdError] = useState<string | null>(null);\n   const [isLoading, setIsLoading] = useState(false);\n-  const [systemStatus, setSystemStatus] = useState<'checking' | 'ready' | 'initializing'>('checking');\n \n   const { login, isLoggedIn, ready } = useAdminAuth();\n \n   useEffect(() => {\n@@ -79,81 +78,8 @@\n       navigate('/cms/member/search');\n     }\n   }, [ready, isLoggedIn, isLoading, navigate]);\n \n-  useEffect(() => {\n-    // ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸\n-    const checkSystemStatus = async () => {\n-      try {\n-        setSystemStatus('checking');\n-        \n-        // IndexedDB ì—°ê²° ëŒ€ê¸°\n-        let dbReady = false;\n-        let attempts = 0;\n-        const maxAttempts = 15;\n-        \n-        while (!dbReady && attempts < maxAttempts) {\n-          try {\n-            await dbManager.getAllBranches();\n-            dbReady = true;\n-          } catch (error) {\n-            attempts++;\n-            console.log(`ğŸ”„ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì¤‘... (${attempts}/${maxAttempts})`);\n-            await new Promise(resolve => setTimeout(resolve, 500));\n-          }\n-        }\n-        \n-        if (!dbReady) {\n-          console.warn('âš ï¸ IndexedDB ì—°ê²° ì‹œê°„ ì´ˆê³¼, ê³„ì† ì§„í–‰');\n-        }\n-        \n-        // ì‹œìŠ¤í…œ ê´€ë¦¬ì ì¡´ì¬ ì—¬ë¶€ í™•ì¸\n-        const systemAdmin = await dbManager.getStaffByLoginId('system_admin');\n-        \n-        if (systemAdmin) {\n-          console.log('âœ… ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ');\n-          setSystemStatus('ready');\n-        } else {\n-          console.log('â³ ì‹œìŠ¤í…œ ê´€ë¦¬ì ìƒì„± ì¤‘...');\n-          setSystemStatus('initializing');\n-          \n-          // ì‹œìŠ¤í…œ ê´€ë¦¬ìê°€ ìƒì„±ë  ë•Œê¹Œì§€ ëŒ€ê¸°\n-          await waitForSystemAdmin();\n-        }\n-      } catch (error) {\n-        console.error('ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);\n-        setSystemStatus('ready'); // ì˜¤ë¥˜ ì‹œì—ë„ ê³„ì† ì§„í–‰\n-      }\n-    };\n-    \n-    checkSystemStatus();\n-  }, []);\n-\n-  const waitForSystemAdmin = async () => {\n-    let attempts = 0;\n-    const maxAttempts = 30; // 15ì´ˆê¹Œì§€ ëŒ€ê¸°\n-    \n-    while (attempts < maxAttempts) {\n-      try {\n-        const systemAdmin = await dbManager.getStaffByLoginId('system_admin');\n-        if (systemAdmin) {\n-          console.log('âœ… ì‹œìŠ¤í…œ ê´€ë¦¬ì ìƒì„± ì™„ë£Œ');\n-          setSystemStatus('ready');\n-          return;\n-        }\n-        \n-        attempts++;\n-        await new Promise(resolve => setTimeout(resolve, 500));\n-      } catch (error) {\n-        attempts++;\n-        await new Promise(resolve => setTimeout(resolve, 500));\n-      }\n-    }\n-    \n-    console.log('â° ì‹œìŠ¤í…œ ê´€ë¦¬ì ìƒì„± ëŒ€ê¸° ì‹œê°„ ì´ˆê³¼, ê³„ì† ì§„í–‰');\n-    setSystemStatus('ready');\n-  };\n-\n   const handleLogin = async () => {\n     if (isLoading) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n \n     setIdError(null);\n@@ -253,57 +179,41 @@\n         </LogoContainer>\n         \n         <FormTitle>ë¡œê·¸ì¸</FormTitle>\n         \n-        {systemStatus === 'checking' && (\n-          <HelpText>\n-            ğŸ”„ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤...\n-          </HelpText>\n-        )}\n+        <FormWrapper>\n+          <div>\n+            <AppIdTextField\n+              value={userId}\n+              onChange={(e) => setUserId(e.target.value)}\n+              showValidationMessage={false}\n+              errorMessage={idError || undefined}\n+            />\n+          </div>\n+          \n+          <div>\n+            <AppPwdTextField\n+              value={password}\n+              onChange={(e) => setPassword(e.target.value)}\n+              fieldType={PwdFieldType.PASSWORD}\n+              showValidationMessage={false}\n+              errorMessage={pwdError || undefined}\n+            />\n+          </div>\n+        </FormWrapper>\n         \n-        {systemStatus === 'initializing' && (\n-          <HelpText>\n-            â³ ì‹œìŠ¤í…œì„ ì´ˆê¸°í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...\n-          </HelpText>\n-        )}\n+        <ButtonWrapper>\n+          <PrimaryButton\n+            onClick={handleLogin}\n+            disabled={isLoading}\n+          >\n+            {isLoading ? \"ë¡œê·¸ì¸ ì¤‘...\" : \"ë¡œê·¸ì¸\"}\n+          </PrimaryButton>\n+        </ButtonWrapper>\n         \n-        {systemStatus === 'ready' && (\n-          <>\n-            <FormWrapper>\n-              <div>\n-                <AppIdTextField\n-                  value={userId}\n-                  onChange={(e) => setUserId(e.target.value)}\n-                  showValidationMessage={false}\n-                  errorMessage={idError || undefined}\n-                />\n-              </div>\n-              \n-              <div>\n-                <AppPwdTextField\n-                  value={password}\n-                  onChange={(e) => setPassword(e.target.value)}\n-                  fieldType={PwdFieldType.PASSWORD}\n-                  showValidationMessage={false}\n-                  errorMessage={pwdError || undefined}\n-                />\n-              </div>\n-            </FormWrapper>\n-            \n-            <ButtonWrapper>\n-              <PrimaryButton\n-                onClick={handleLogin}\n-                disabled={isLoading}\n-              >\n-                {isLoading ? \"ë¡œê·¸ì¸ ì¤‘...\" : \"ë¡œê·¸ì¸\"}\n-              </PrimaryButton>\n-            </ButtonWrapper>\n-            \n-            <HelpText>\n-              ì‹œìŠ¤í…œ ê³„ì •ì´ ì—†ë‹¤ë©´, ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ ë°”ëë‹ˆë‹¤.\n-            </HelpText>\n-          </>\n-        )}\n+        <HelpText>\n+          ì‹œìŠ¤í…œ ê³„ì •ì´ ì—†ë‹¤ë©´, ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ ë°”ëë‹ˆë‹¤.\n+        </HelpText>\n       </LoginFormContainer>\n     </Container>\n   );\n };\n"
                },
                {
                    "date": 1761907659822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,8 +170,14 @@\n \n     setIsLoading(false);\n   };\n \n+  const handleKeyPress = (e: React.KeyboardEvent) => {\n+    if (e.key === 'Enter') {\n+      handleLogin();\n+    }\n+  };\n+\n   return (\n     <Container className=\"cms-layout\">\n       <LoginFormContainer>\n         <LogoContainer>\n@@ -179,9 +185,9 @@\n         </LogoContainer>\n         \n         <FormTitle>ë¡œê·¸ì¸</FormTitle>\n         \n-        <FormWrapper>\n+        <FormWrapper onKeyDown={handleKeyPress}>\n           <div>\n             <AppIdTextField\n               value={userId}\n               onChange={(e) => setUserId(e.target.value)}\n"
                },
                {
                    "date": 1765881332107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -180,9 +180,9 @@\n   return (\n     <Container className=\"cms-layout\">\n       <LoginFormContainer>\n         <LogoContainer>\n-          <Logo src={`${process.env.PUBLIC_URL}/logo192.png`} alt=\"Lavida Logo\" />\n+          <Logo src={`${process.env.PUBLIC_URL}/logo.png`} alt=\"Lavida Logo\" />\n         </LogoContainer>\n         \n         <FormTitle>ë¡œê·¸ì¸</FormTitle>\n         \n"
                },
                {
                    "date": 1765881352140,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,227 @@\n+import React, { useState, useEffect } from 'react';\n+import { useNavigate } from 'react-router-dom';\n+import styled from 'styled-components';\n+import { toast } from 'react-toastify';\n+import { AppColors } from '../../../styles/colors';\n+import { AppTextStyles } from '../../../styles/textStyles';\n+import { FormTitle } from '../../../customComponents/FormTitle';\n+import { AppIdTextField } from '../../../customComponents/AppIdTextField';\n+import { AppPwdTextField, PwdFieldType } from '../../../customComponents/AppPwdTextField';\n+import { useAdminAuth } from '../../../context/AdminAuthContext';\n+import PrimaryButton from '../../../components/PrimaryButton';\n+import { dbManager } from '../../../utils/indexedDB';\n+\n+const Container = styled.div`\n+  display: flex;\n+  justify-content: center;\n+  align-items: center;\n+  min-height: 100vh;\n+  background-color: ${AppColors.background};\n+  padding: 20px;\n+`;\n+\n+const LoginFormContainer = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  align-items: flex-start;\n+  width: 100%;\n+  max-width: 400px;\n+  gap: 24px;\n+`;\n+\n+const LogoContainer = styled.div`\n+  display: flex;\n+  justify-content: center;\n+  width: 100%;\n+  margin-bottom: 16px;\n+`;\n+\n+const Logo = styled.img`\n+  width: 160px;\n+  height: auto;\n+`;\n+\n+const FormWrapper = styled.div`\n+  width: 100%;\n+  display: flex;\n+  flex-direction: column;\n+  gap: 16px;\n+`;\n+\n+const ButtonWrapper = styled.div`\n+  width: 100%;\n+  margin-top: 8px;\n+`;\n+\n+const HelpText = styled.p`\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  color: ${AppColors.onInput2};\n+  text-align: center;\n+  line-height: 1.5;\n+  margin: 0;\n+`;\n+\n+const CMSLogin: React.FC = () => {\n+  const navigate = useNavigate();\n+  const [userId, setUserId] = useState('');\n+  const [password, setPassword] = useState('');\n+  const [idError, setIdError] = useState<string | null>(null);\n+  const [pwdError, setPwdError] = useState<string | null>(null);\n+  const [isLoading, setIsLoading] = useState(false);\n+\n+  const { login, isLoggedIn, ready } = useAdminAuth();\n+\n+  useEffect(() => {\n+    // Contextê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë˜ê³ , ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆê³ , í˜„ì¬ ë¡œê·¸ì¸ ì‹œë„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸\n+    if (ready && isLoggedIn && !isLoading) {\n+      console.log('ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìŒ, CMS í˜ì´ì§€ë¡œ ì´ë™');\n+      navigate('/cms/member/search');\n+    }\n+  }, [ready, isLoggedIn, isLoading, navigate]);\n+\n+  const handleLogin = async () => {\n+    if (isLoading) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n+\n+    setIdError(null);\n+    setPwdError(null);\n+\n+    let hasError = false;\n+\n+    if (!userId) {\n+      setIdError(\"ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n+      hasError = true;\n+    }\n+\n+    if (!password) {\n+      setPwdError(\"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n+      hasError = true;\n+    }\n+\n+    if (hasError) return;\n+\n+    setIsLoading(true);\n+\n+    try {\n+      // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§ì› ì •ë³´ ì¡°íšŒ\n+      const staff = await dbManager.getStaffByLoginId(userId);\n+      \n+      if (!staff) {\n+        toast.error(\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê³„ì •ì…ë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ë¹„ë°€ë²ˆí˜¸ í™•ì¸\n+      if (staff.password !== password) {\n+        toast.error(\"ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ê³„ì • í™œì„± ìƒíƒœ í™•ì¸\n+      if (!staff.isActive) {\n+        toast.error(\"ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ê¶Œí•œ í™•ì¸ (MASTER, EDITOR, VIEWER ëª¨ë‘ ë¡œê·¸ì¸ í—ˆìš©)\n+      if (!['MASTER', 'EDITOR', 'VIEWER'].includes(staff.permission)) {\n+        toast.error(\"CMS ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", {\n+          autoClose: 5000,\n+          hideProgressBar: false,\n+          closeOnClick: true,\n+          pauseOnHover: true,\n+        });\n+        setIsLoading(false);\n+        return;\n+      }\n+\n+      // ë¡œê·¸ì¸ ì„±ê³µ\n+      const accessToken = `staff_${staff.id}_${Date.now()}`;\n+      login(userId, accessToken);\n+      toast.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\n+      navigate('/cms/member/search');\n+\n+    } catch (error) {\n+      console.error('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n+      toast.error(\"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", {\n+        autoClose: 5000,\n+        hideProgressBar: false,\n+        closeOnClick: true,\n+        pauseOnHover: true,\n+      });\n+    }\n+\n+    setIsLoading(false);\n+  };\n+\n+  const handleKeyPress = (e: React.KeyboardEvent) => {\n+    if (e.key === 'Enter') {\n+      handleLogin();\n+    }\n+  };\n+\n+  return (\n+    <Container className=\"cms-layout\">\n+      <LoginFormContainer>\n+        <LogoContainer>\n+          <Logo src={`${process.env.PUBLIC_URL}/logo.png`} alt=\"Lavida Logo\" />\n+        </LogoContainer>\n+        \n+        <FormTitle>ë¡œê·¸ì¸</FormTitle>\n+        \n+        <FormWrapper onKeyDown={handleKeyPress}>\n+          <div>\n+            <AppIdTextField\n+              value={userId}\n+              onChange={(e) => setUserId(e.target.value)}\n+              showValidationMessage={false}\n+              errorMessage={idError || undefined}\n+            />\n+          </div>\n+          \n+          <div>\n+            <AppPwdTextField\n+              value={password}\n+              onChange={(e) => setPassword(e.target.value)}\n+              fieldType={PwdFieldType.PASSWORD}\n+              showValidationMessage={false}\n+              errorMessage={pwdError || undefined}\n+            />\n+          </div>\n+        </FormWrapper>\n+        \n+        <ButtonWrapper>\n+          <PrimaryButton\n+            onClick={handleLogin}\n+            disabled={isLoading}\n+          >\n+            {isLoading ? \"ë¡œê·¸ì¸ ì¤‘...\" : \"ë¡œê·¸ì¸\"}\n+          </PrimaryButton>\n+        </ButtonWrapper>\n+        \n+        <HelpText>\n+          ì‹œìŠ¤í…œ ê³„ì •ì´ ì—†ë‹¤ë©´, ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ ë°”ëë‹ˆë‹¤.\n+        </HelpText>\n+      </LoginFormContainer>\n+    </Container>\n+  );\n+};\n+\n+export default CMSLogin;\n"
                },
                {
                    "date": 1765881361478,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n   margin-bottom: 16px;\n `;\n \n const Logo = styled.img`\n-  width: 160px;\n+  width: 200px;\n   height: auto;\n `;\n \n const FormWrapper = styled.div`\n@@ -224,231 +224,4 @@\n   );\n };\n \n export default CMSLogin;\n-import React, { useState, useEffect } from 'react';\n-import { useNavigate } from 'react-router-dom';\n-import styled from 'styled-components';\n-import { toast } from 'react-toastify';\n-import { AppColors } from '../../../styles/colors';\n-import { AppTextStyles } from '../../../styles/textStyles';\n-import { FormTitle } from '../../../customComponents/FormTitle';\n-import { AppIdTextField } from '../../../customComponents/AppIdTextField';\n-import { AppPwdTextField, PwdFieldType } from '../../../customComponents/AppPwdTextField';\n-import { useAdminAuth } from '../../../context/AdminAuthContext';\n-import PrimaryButton from '../../../components/PrimaryButton';\n-import { dbManager } from '../../../utils/indexedDB';\n-\n-const Container = styled.div`\n-  display: flex;\n-  justify-content: center;\n-  align-items: center;\n-  min-height: 100vh;\n-  background-color: ${AppColors.background};\n-  padding: 20px;\n-`;\n-\n-const LoginFormContainer = styled.div`\n-  display: flex;\n-  flex-direction: column;\n-  align-items: flex-start;\n-  width: 100%;\n-  max-width: 400px;\n-  gap: 24px;\n-`;\n-\n-const LogoContainer = styled.div`\n-  display: flex;\n-  justify-content: center;\n-  width: 100%;\n-  margin-bottom: 16px;\n-`;\n-\n-const Logo = styled.img`\n-  width: 120px;\n-  height: auto;\n-`;\n-\n-const FormWrapper = styled.div`\n-  width: 100%;\n-  display: flex;\n-  flex-direction: column;\n-  gap: 16px;\n-`;\n-\n-const ButtonWrapper = styled.div`\n-  width: 100%;\n-  margin-top: 8px;\n-`;\n-\n-const HelpText = styled.p`\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onInput2};\n-  text-align: center;\n-  line-height: 1.5;\n-  margin: 0;\n-`;\n-\n-const CMSLogin: React.FC = () => {\n-  const navigate = useNavigate();\n-  const [userId, setUserId] = useState('');\n-  const [password, setPassword] = useState('');\n-  const [idError, setIdError] = useState<string | null>(null);\n-  const [pwdError, setPwdError] = useState<string | null>(null);\n-  const [isLoading, setIsLoading] = useState(false);\n-\n-  const { login, isLoggedIn, ready } = useAdminAuth();\n-\n-  useEffect(() => {\n-    // Contextê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë˜ê³ , ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆê³ , í˜„ì¬ ë¡œê·¸ì¸ ì‹œë„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸\n-    if (ready && isLoggedIn && !isLoading) {\n-      console.log('ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìŒ, CMS í˜ì´ì§€ë¡œ ì´ë™');\n-      navigate('/cms/member/search');\n-    }\n-  }, [ready, isLoggedIn, isLoading, navigate]);\n-\n-  const handleLogin = async () => {\n-    if (isLoading) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n-\n-    setIdError(null);\n-    setPwdError(null);\n-\n-    let hasError = false;\n-\n-    if (!userId) {\n-      setIdError(\"ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n-      hasError = true;\n-    }\n-\n-    if (!password) {\n-      setPwdError(\"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n-      hasError = true;\n-    }\n-\n-    if (hasError) return;\n-\n-    setIsLoading(true);\n-\n-    try {\n-      // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§ì› ì •ë³´ ì¡°íšŒ\n-      const staff = await dbManager.getStaffByLoginId(userId);\n-      \n-      if (!staff) {\n-        toast.error(\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê³„ì •ì…ë‹ˆë‹¤.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ë¹„ë°€ë²ˆí˜¸ í™•ì¸\n-      if (staff.password !== password) {\n-        toast.error(\"ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ê³„ì • í™œì„± ìƒíƒœ í™•ì¸\n-      if (!staff.isActive) {\n-        toast.error(\"ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ê¶Œí•œ í™•ì¸ (MASTER, EDITOR, VIEWER ëª¨ë‘ ë¡œê·¸ì¸ í—ˆìš©)\n-      if (!['MASTER', 'EDITOR', 'VIEWER'].includes(staff.permission)) {\n-        toast.error(\"CMS ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\", {\n-          autoClose: 5000,\n-          hideProgressBar: false,\n-          closeOnClick: true,\n-          pauseOnHover: true,\n-        });\n-        setIsLoading(false);\n-        return;\n-      }\n-\n-      // ë¡œê·¸ì¸ ì„±ê³µ\n-      const accessToken = `staff_${staff.id}_${Date.now()}`;\n-      login(userId, accessToken);\n-      toast.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\n-      navigate('/cms/member/search');\n-\n-    } catch (error) {\n-      console.error('ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n-      toast.error(\"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\", {\n-        autoClose: 5000,\n-        hideProgressBar: false,\n-        closeOnClick: true,\n-        pauseOnHover: true,\n-      });\n-    }\n-\n-    setIsLoading(false);\n-  };\n-\n-  const handleKeyPress = (e: React.KeyboardEvent) => {\n-    if (e.key === 'Enter') {\n-      handleLogin();\n-    }\n-  };\n-\n-  return (\n-    <Container className=\"cms-layout\">\n-      <LoginFormContainer>\n-        <LogoContainer>\n-          <Logo src={`${process.env.PUBLIC_URL}/logo.png`} alt=\"Lavida Logo\" />\n-        </LogoContainer>\n-        \n-        <FormTitle>ë¡œê·¸ì¸</FormTitle>\n-        \n-        <FormWrapper onKeyDown={handleKeyPress}>\n-          <div>\n-            <AppIdTextField\n-              value={userId}\n-              onChange={(e) => setUserId(e.target.value)}\n-              showValidationMessage={false}\n-              errorMessage={idError || undefined}\n-            />\n-          </div>\n-          \n-          <div>\n-            <AppPwdTextField\n-              value={password}\n-              onChange={(e) => setPassword(e.target.value)}\n-              fieldType={PwdFieldType.PASSWORD}\n-              showValidationMessage={false}\n-              errorMessage={pwdError || undefined}\n-            />\n-          </div>\n-        </FormWrapper>\n-        \n-        <ButtonWrapper>\n-          <PrimaryButton\n-            onClick={handleLogin}\n-            disabled={isLoading}\n-          >\n-            {isLoading ? \"ë¡œê·¸ì¸ ì¤‘...\" : \"ë¡œê·¸ì¸\"}\n-          </PrimaryButton>\n-        </ButtonWrapper>\n-        \n-        <HelpText>\n-          ì‹œìŠ¤í…œ ê³„ì •ì´ ì—†ë‹¤ë©´, ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ ë°”ëë‹ˆë‹¤.\n-        </HelpText>\n-      </LoginFormContainer>\n-    </Container>\n-  );\n-};\n-\n-export default CMSLogin;\n"
                }
            ],
            "date": 1757827333310,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { toast } from 'react-toastify';\nimport { AppColors } from '../../../styles/colors';\nimport { AppTextStyles } from '../../../styles/textStyles';\nimport { FormTitle } from '../../../customComponents/FormTitle';\nimport { AppIdTextField } from '../../../customComponents/AppIdTextField';\nimport { AppPwdTextField, PwdFieldType } from '../../../customComponents/AppPwdTextField';\nimport { useAdminAuth } from '../../../context/AdminAuthContext';\nimport PrimaryButton from '../../../components/PrimaryButton';\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  background-color: ${AppColors.background};\n  padding: 20px;\n`;\n\nconst LoginFormContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: 100%;\n  max-width: 400px;\n  gap: 24px;\n`;\n\nconst LogoContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  margin-bottom: 16px;\n`;\n\nconst Logo = styled.img`\n  width: 120px;\n  height: auto;\n`;\n\nconst FormWrapper = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n`;\n\nconst ButtonWrapper = styled.div`\n  width: 100%;\n  margin-top: 8px;\n`;\n\nconst HelpText = styled.p`\n  font-size: ${AppTextStyles.body2.fontSize};\n  color: ${AppColors.onInput2};\n  text-align: center;\n  line-height: 1.5;\n  margin: 0;\n`;\n\nconst CMSLogin: React.FC = () => {\n  const [userId, setUserId] = useState('');\n  const [password, setPassword] = useState('');\n  const [idError, setIdError] = useState<string | null>(null);\n  const [pwdError, setPwdError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const { login, isLoggedIn, ready } = useAdminAuth();\n\n  useEffect(() => {\n    // Contextê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë˜ê³ , ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆê³ , í˜„ì¬ ë¡œê·¸ì¸ ì‹œë„ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸\n    if (ready && isLoggedIn && !isLoading) {\n      console.log('ì´ë¯¸ ë¡œê·¸ì¸ë˜ì–´ ìˆìŒ, CMS í˜ì´ì§€ë¡œ ì´ë™');\n      window.location.href = '/cms/admin';\n    }\n  }, [ready, isLoggedIn, isLoading]);\n\n  const userIdRegex = /^(?=.*[A-Za-z])(?=.*[0-9])[A-Za-z0-9]{6,20}$/;\n  const passwordRegex = /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?~^<>,.&+=])[A-Za-z\\d$@$!%*#?~^<>,.&+=]{8,}$/;\n\n  const handleLogin = async () => {\n    if (isLoading) return; // ì´ë¯¸ ë¡œë”© ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€\n\n    setIdError(null);\n    setPwdError(null);\n\n    let hasError = false;\n\n    if (!userId) {\n      setIdError(\"ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n      hasError = true;\n    } else if (!userIdRegex.test(userId)) {\n      setIdError(\"ì•„ì´ë””ëŠ” ì˜ë¬¸ê³¼ ìˆ«ìë¥¼ ëª¨ë‘ í¬í•¨í•˜ì—¬ 6~20ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n      hasError = true;\n    }\n\n    if (!password) {\n      setPwdError(\"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n      hasError = true;\n    } else if (!passwordRegex.test(password)) {\n      setPwdError(\"ë¹„ë°€ë²ˆí˜¸ëŠ” ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ ëª¨ë‘ í¬í•¨í•˜ì—¬ 8ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\n      hasError = true;\n    }\n\n    if (hasError) return;\n\n    setIsLoading(true);\n\n    // ë”ë¯¸ ë¡œê·¸ì¸ ì²´í¬\n    if (userId === 'lavida01' && password === 'a!111111') {\n      // ì„±ê³µ\n      const dummyToken = 'dummy_access_token';\n      login(userId, dummyToken);\n      toast.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\");\n      window.location.href = '/cms/admin';\n    } else {\n      // ì‹¤íŒ¨\n      toast.error(\"ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\", {\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n      });\n    }\n\n    setIsLoading(false);\n  };\n\n  return (\n    <Container className=\"cms-layout\">\n      <LoginFormContainer>\n        <LogoContainer>\n          <Logo src=\"/logo.svg\" alt=\"BidSpace Logo\" />\n        </LogoContainer>\n        \n        <FormTitle>ë¡œê·¸ì¸</FormTitle>\n        \n        <FormWrapper>\n          <div>\n            <AppIdTextField\n              value={userId}\n              onChange={(e) => setUserId(e.target.value)}\n              showValidationMessage={false}\n              errorMessage={idError || undefined}\n            />\n          </div>\n          \n          <div>\n            <AppPwdTextField\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              fieldType={PwdFieldType.PASSWORD}\n              showValidationMessage={false}\n              errorMessage={pwdError || undefined}\n            />\n          </div>\n        </FormWrapper>\n        \n        <ButtonWrapper>\n          <PrimaryButton\n            onClick={handleLogin}\n            disabled={isLoading}\n          >\n            {isLoading ? \"ë¡œê·¸ì¸ ì¤‘...\" : \"ë¡œê·¸ì¸\"}\n          </PrimaryButton>\n        </ButtonWrapper>\n        \n        <HelpText>\n          ì‹œìŠ¤í…œ ê³„ì •ì´ ì—†ë‹¤ë©´, ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜ ë°”ëë‹ˆë‹¤.\n        </HelpText>\n      </LoginFormContainer>\n    </Container>\n  );\n};\n\nexport default CMSLogin;\n"
        }
    ]
}