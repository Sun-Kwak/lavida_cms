{
    "sourceFile": "src/pages/CMS/Terms/MembershipTerms.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1760163881524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1760165251569,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,125 @@\n-import React from 'react';\n+import React, { useState, useEffect, useCallback } from 'react';\n import styled from 'styled-components';\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n+import CustomTiptapEditor from '../../../components/Editor/CustomTiptapEditor';\n+import { toast } from 'react-toastify';\n+import { dbManager, TermsDocument } from '../../../utils/indexedDB';\n+import { devLog } from '../../../utils/devLogger';\n \n+const MembershipTerms: React.FC = () => {\n+  const [content, setContent] = useState<string>(\"\");\n+  const [currentDocument, setCurrentDocument] = useState<TermsDocument | null>(null);\n+  const [isLoading, setIsLoading] = useState<boolean>(false);\n+\n+  // 문서 로딩\n+  const loadDocument = useCallback(async () => {\n+    try {\n+      setIsLoading(true);\n+      const activeDoc = await dbManager.getActiveTermsDocument('member_terms');\n+      if (activeDoc) {\n+        setCurrentDocument(activeDoc);\n+        setContent(activeDoc.content);\n+        devLog(\"회원 이용약관 문서 로딩:\", activeDoc);\n+      } else {\n+        setCurrentDocument(null);\n+        setContent(\"\");\n+        devLog(\"새 회원 이용약관 문서 생성 준비\");\n+      }\n+    } catch (err: any) {\n+      devLog(\"회원 이용약관 문서 로딩 실패:\", err);\n+      toast.error(\"문서를 불러오는데 실패했습니다.\");\n+    } finally {\n+      setIsLoading(false);\n+    }\n+  }, []);\n+\n+  // 문서 저장\n+  const handleSave = async () => {\n+    if (!content.trim()) {\n+      toast.error(\"문서 내용을 입력해주세요.\");\n+      return;\n+    }\n+\n+    try {\n+      setIsLoading(true);\n+      \n+      if (currentDocument) {\n+        // 기존 문서 수정\n+        const updatedDoc = await dbManager.updateTermsDocument(currentDocument.id, {\n+          title: \"회원 이용약관\",\n+          content: content.trim(),\n+          isActive: true\n+        });\n+\n+        if (updatedDoc) {\n+          setCurrentDocument(updatedDoc);\n+          toast.success(\"회원 이용약관이 성공적으로 수정되었습니다!\");\n+        }\n+      } else {\n+        // 새 문서 생성\n+        const newDoc = await dbManager.addTermsDocument({\n+          type: 'member_terms',\n+          title: \"회원 이용약관\",\n+          content: content.trim(),\n+          isActive: true\n+        });\n+\n+        setCurrentDocument(newDoc);\n+        toast.success(\"회원 이용약관이 성공적으로 저장되었습니다!\");\n+      }\n+\n+      await loadDocument();\n+    } catch (err: any) {\n+      devLog(\"회원 이용약관 저장 실패:\", err);\n+      toast.error(`문서 저장에 실패했습니다: ${err.message}`);\n+    } finally {\n+      setIsLoading(false);\n+    }\n+  };\n+\n+  // 에디터 내용 업데이트\n+  const handleEditorUpdate = (newContent: string) => {\n+    setContent(newContent);\n+  };\n+\n+  useEffect(() => {\n+    loadDocument();\n+  }, [loadDocument]);\n+\n+  return (\n+    <Container>\n+      <Title>회원 이용약관</Title>\n+\n+      {/* 저장 버튼 */}\n+      <ButtonContainer>\n+        <SaveButton \n+          onClick={handleSave} \n+          disabled={isLoading}\n+        >\n+          {isLoading ? \"저장 중...\" : \"저장하기\"}\n+        </SaveButton>\n+      </ButtonContainer>\n+\n+      {/* 에디터 */}\n+      <EditorContainer>\n+        {isLoading ? (\n+          <LoadingMessage>로딩 중...</LoadingMessage>\n+        ) : (\n+          <CustomTiptapEditor\n+            enableImageUpload={false}\n+            key={`member-terms-${currentDocument?.id || 'new'}`}\n+            initialContent={content}\n+            onEditorUpdate={handleEditorUpdate}\n+            height={600}\n+          />\n+        )}\n+      </EditorContainer>\n+    </Container>\n+  );\n+};\n+\n const Container = styled.div`\n   padding: 24px;\n   background-color: ${AppColors.surface};\n   min-height: 100vh;\n@@ -12,87 +128,52 @@\n const Title = styled.h1`\n   font-size: ${AppTextStyles.title1.fontSize};\n   font-weight: 700;\n   color: ${AppColors.onSurface};\n-  margin-bottom: 24px;\n+  margin: 0 0 24px 0;\n `;\n \n-const Content = styled.div`\n-  background-color: ${AppColors.background};\n-  padding: 32px;\n-  border-radius: 12px;\n-  border: 1px solid ${AppColors.borderLight};\n+const ButtonContainer = styled.div`\n+  display: flex;\n+  justify-content: flex-end;\n+  gap: 12px;\n+  margin-bottom: 20px;\n+  flex-wrap: wrap;\n `;\n \n-const Section = styled.div`\n-  margin-bottom: 32px;\n+const SaveButton = styled.button`\n+  padding: 12px 24px;\n+  border: none;\n+  border-radius: 8px;\n+  font-size: 14px;\n+  font-weight: bold;\n+  cursor: pointer;\n+  background-color: #007bff;\n+  color: white;\n+  transition: all 0.2s ease;\n+\n+  &:hover {\n+    background-color: #0056b3;\n+  }\n+\n+  &:disabled {\n+    background-color: #6c757d;\n+    cursor: not-allowed;\n+  }\n `;\n \n-const SectionTitle = styled.h2`\n-  font-size: ${AppTextStyles.title3.fontSize};\n-  font-weight: 600;\n-  color: ${AppColors.onSurface};\n-  margin-bottom: 16px;\n+const EditorContainer = styled.div`\n+  background-color: transparent;\n+  border-radius: 8px;\n+  min-height: 600px;\n+  border: 1px solid #ddd;\n+  padding: 20px;\n `;\n \n-const SectionContent = styled.p`\n-  font-size: ${AppTextStyles.body1.fontSize};\n-  color: ${AppColors.onSurface};\n-  line-height: 1.6;\n-  margin-bottom: 12px;\n+const LoadingMessage = styled.div`\n+  text-align: center;\n+  padding: 20px;\n+  color: #6c757d;\n+  font-size: 16px;\n `;\n \n-const MembershipTerms: React.FC = () => {\n-  return (\n-    <Container>\n-      <Title>회원 이용약관</Title>\n-      <Content>\n-        <Section>\n-          <SectionTitle>제1조 (회원가입)</SectionTitle>\n-          <SectionContent>\n-            1. 회원가입은 회사가 정한 가입양식에 따라 회원정보를 기입한 후 이 약관에 동의한다는 의사표시를 함으로써 신청합니다.\n-          </SectionContent>\n-          <SectionContent>\n-            2. 회사는 다음 각 호에 해당하는 신청에 대하여는 승낙하지 않을 수 있습니다:\n-            - 실명이 아니거나 타인의 명의를 이용한 경우\n-            - 허위의 정보를 기재하거나, 회사가 제시하는 내용을 기재하지 않은 경우\n-          </SectionContent>\n-        </Section>\n-\n-        <Section>\n-          <SectionTitle>제2조 (회원의 권리와 의무)</SectionTitle>\n-          <SectionContent>\n-            1. 회원은 서비스를 이용할 권리를 가집니다.\n-          </SectionContent>\n-          <SectionContent>\n-            2. 회원은 회사의 정당한 영업활동을 방해하는 행위를 하여서는 안 됩니다.\n-          </SectionContent>\n-          <SectionContent>\n-            3. 회원은 개인정보 변경시 즉시 온라인으로 수정하거나 전화, 기타 방법으로 회사에 그 변경사실을 알려야 합니다.\n-          </SectionContent>\n-        </Section>\n-\n-        <Section>\n-          <SectionTitle>제3조 (서비스 이용시간)</SectionTitle>\n-          <SectionContent>\n-            1. 서비스 이용시간은 회사의 업무상 또는 기술상 특별한 지장이 없는 한 연중무휴, 1일 24시간을 원칙으로 합니다.\n-          </SectionContent>\n-          <SectionContent>\n-            2. 단, 정기점검 등의 필요로 회사가 정한 날이나 시간은 예외로 합니다.\n-          </SectionContent>\n-        </Section>\n-\n-        <Section>\n-          <SectionTitle>제4조 (서비스 이용료 및 결제)</SectionTitle>\n-          <SectionContent>\n-            1. 서비스 이용료는 회사의 정책 및 운영의 필요에 따라 결정됩니다.\n-          </SectionContent>\n-          <SectionContent>\n-            2. 이용료는 월 단위 또는 이용 기간에 따라 산정되며, 선납을 원칙으로 합니다.\n-          </SectionContent>\n-        </Section>\n-      </Content>\n-    </Container>\n-  );\n-};\n-\n export default MembershipTerms;\n"
                },
                {
                    "date": 1761911068676,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n   // 문서 로딩\n   const loadDocument = useCallback(async () => {\n     try {\n       setIsLoading(true);\n-      const activeDoc = await dbManager.getActiveTermsDocument('member_terms');\n+      const activeDoc = await dbManager.terms.getActiveTermsDocument('member_terms');\n       if (activeDoc) {\n         setCurrentDocument(activeDoc);\n         setContent(activeDoc.content);\n         devLog(\"회원 이용약관 문서 로딩:\", activeDoc);\n@@ -45,9 +45,9 @@\n       setIsLoading(true);\n       \n       if (currentDocument) {\n         // 기존 문서 수정\n-        const updatedDoc = await dbManager.updateTermsDocument(currentDocument.id, {\n+        const updatedDoc = await dbManager.terms.updateTermsDocument(currentDocument.id, {\n           title: \"회원 이용약관\",\n           content: content.trim(),\n           isActive: true\n         });\n@@ -57,9 +57,9 @@\n           toast.success(\"회원 이용약관이 성공적으로 수정되었습니다!\");\n         }\n       } else {\n         // 새 문서 생성\n-        const newDoc = await dbManager.addTermsDocument({\n+        const newDoc = await dbManager.terms.addTermsDocument({\n           type: 'member_terms',\n           title: \"회원 이용약관\",\n           content: content.trim(),\n           isActive: true\n"
                }
            ],
            "date": 1760163881524,
            "name": "Commit-0",
            "content": "import React from 'react';\nimport styled from 'styled-components';\nimport { AppColors } from '../../../styles/colors';\nimport { AppTextStyles } from '../../../styles/textStyles';\n\nconst Container = styled.div`\n  padding: 24px;\n  background-color: ${AppColors.surface};\n  min-height: 100vh;\n`;\n\nconst Title = styled.h1`\n  font-size: ${AppTextStyles.title1.fontSize};\n  font-weight: 700;\n  color: ${AppColors.onSurface};\n  margin-bottom: 24px;\n`;\n\nconst Content = styled.div`\n  background-color: ${AppColors.background};\n  padding: 32px;\n  border-radius: 12px;\n  border: 1px solid ${AppColors.borderLight};\n`;\n\nconst Section = styled.div`\n  margin-bottom: 32px;\n`;\n\nconst SectionTitle = styled.h2`\n  font-size: ${AppTextStyles.title3.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onSurface};\n  margin-bottom: 16px;\n`;\n\nconst SectionContent = styled.p`\n  font-size: ${AppTextStyles.body1.fontSize};\n  color: ${AppColors.onSurface};\n  line-height: 1.6;\n  margin-bottom: 12px;\n`;\n\nconst MembershipTerms: React.FC = () => {\n  return (\n    <Container>\n      <Title>회원 이용약관</Title>\n      <Content>\n        <Section>\n          <SectionTitle>제1조 (회원가입)</SectionTitle>\n          <SectionContent>\n            1. 회원가입은 회사가 정한 가입양식에 따라 회원정보를 기입한 후 이 약관에 동의한다는 의사표시를 함으로써 신청합니다.\n          </SectionContent>\n          <SectionContent>\n            2. 회사는 다음 각 호에 해당하는 신청에 대하여는 승낙하지 않을 수 있습니다:\n            - 실명이 아니거나 타인의 명의를 이용한 경우\n            - 허위의 정보를 기재하거나, 회사가 제시하는 내용을 기재하지 않은 경우\n          </SectionContent>\n        </Section>\n\n        <Section>\n          <SectionTitle>제2조 (회원의 권리와 의무)</SectionTitle>\n          <SectionContent>\n            1. 회원은 서비스를 이용할 권리를 가집니다.\n          </SectionContent>\n          <SectionContent>\n            2. 회원은 회사의 정당한 영업활동을 방해하는 행위를 하여서는 안 됩니다.\n          </SectionContent>\n          <SectionContent>\n            3. 회원은 개인정보 변경시 즉시 온라인으로 수정하거나 전화, 기타 방법으로 회사에 그 변경사실을 알려야 합니다.\n          </SectionContent>\n        </Section>\n\n        <Section>\n          <SectionTitle>제3조 (서비스 이용시간)</SectionTitle>\n          <SectionContent>\n            1. 서비스 이용시간은 회사의 업무상 또는 기술상 특별한 지장이 없는 한 연중무휴, 1일 24시간을 원칙으로 합니다.\n          </SectionContent>\n          <SectionContent>\n            2. 단, 정기점검 등의 필요로 회사가 정한 날이나 시간은 예외로 합니다.\n          </SectionContent>\n        </Section>\n\n        <Section>\n          <SectionTitle>제4조 (서비스 이용료 및 결제)</SectionTitle>\n          <SectionContent>\n            1. 서비스 이용료는 회사의 정책 및 운영의 필요에 따라 결정됩니다.\n          </SectionContent>\n          <SectionContent>\n            2. 이용료는 월 단위 또는 이용 기간에 따라 산정되며, 선납을 원칙으로 합니다.\n          </SectionContent>\n        </Section>\n      </Content>\n    </Container>\n  );\n};\n\nexport default MembershipTerms;\n"
        }
    ]
}