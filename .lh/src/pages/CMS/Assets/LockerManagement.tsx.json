{
    "sourceFile": "src/pages/CMS/Assets/LockerManagement.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 36,
            "patches": [
                {
                    "date": 1760163881525,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1760165866469,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,8 +22,95 @@\n   border-radius: 12px;\n   border: 1px solid ${AppColors.borderLight};\n `;\n \n+const ActionSection = styled.div`\n+  display: flex;\n+  gap: 16px;\n+  margin-bottom: 24px;\n+  align-items: center;\n+`;\n+\n+const ActionButton = styled.button`\n+  padding: 8px 16px;\n+  border: 1px solid ${AppColors.primary};\n+  border-radius: 6px;\n+  background-color: ${AppColors.primary};\n+  color: ${AppColors.onPrimary};\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  cursor: pointer;\n+  transition: all 0.2s ease;\n+\n+  &:hover {\n+    background-color: ${AppColors.secondary};\n+  }\n+\n+  &:disabled {\n+    background-color: ${AppColors.borderLight};\n+    color: ${AppColors.onInput2};\n+    cursor: not-allowed;\n+  }\n+`;\n+\n+const SecondaryButton = styled(ActionButton)`\n+  background-color: ${AppColors.surface};\n+  color: ${AppColors.primary};\n+\n+  &:hover {\n+    background-color: ${AppColors.primary + '10'};\n+  }\n+`;\n+\n+const Input = styled.input`\n+  padding: 8px 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  background-color: ${AppColors.surface};\n+  color: ${AppColors.onSurface};\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  width: 100px;\n+\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const Modal = styled.div<{ $isOpen: boolean }>`\n+  position: fixed;\n+  top: 0;\n+  left: 0;\n+  right: 0;\n+  bottom: 0;\n+  background-color: rgba(0, 0, 0, 0.5);\n+  display: ${props => props.$isOpen ? 'flex' : 'none'};\n+  align-items: center;\n+  justify-content: center;\n+  z-index: 1000;\n+`;\n+\n+const ModalContent = styled.div`\n+  background-color: ${AppColors.background};\n+  padding: 24px;\n+  border-radius: 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  min-width: 300px;\n+`;\n+\n+const ModalTitle = styled.h3`\n+  font-size: ${AppTextStyles.title3.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.onSurface};\n+  margin-bottom: 16px;\n+`;\n+\n+const ModalButtons = styled.div`\n+  display: flex;\n+  gap: 12px;\n+  justify-content: flex-end;\n+  margin-top: 20px;\n+`;\n+\n const FilterSection = styled.div`\n   display: flex;\n   gap: 16px;\n   margin-bottom: 24px;\n@@ -57,9 +144,9 @@\n   gap: 16px;\n   margin-bottom: 32px;\n `;\n \n-const LockerItem = styled.div<{ $status: 'available' | 'occupied' | 'maintenance' }>`\n+const LockerItem = styled.div<{ $status: 'available' | 'occupied' | 'maintenance' | 'pending' }>`\n   aspect-ratio: 1;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n@@ -71,8 +158,10 @@\n       case 'occupied':\n         return AppColors.error;\n       case 'maintenance':\n         return AppColors.warning;\n+      case 'pending':\n+        return AppColors.info;\n       default:\n         return AppColors.borderLight;\n     }\n   }};\n@@ -84,8 +173,10 @@\n       case 'occupied':\n         return AppColors.error + '10';\n       case 'maintenance':\n         return AppColors.warning + '10';\n+      case 'pending':\n+        return AppColors.info + '10';\n       default:\n         return AppColors.surface;\n     }\n   }};\n@@ -104,9 +195,9 @@\n   color: ${AppColors.onSurface};\n   margin-bottom: 4px;\n `;\n \n-const LockerStatus = styled.div<{ $status: 'available' | 'occupied' | 'maintenance' }>`\n+const LockerStatus = styled.div<{ $status: 'available' | 'occupied' | 'maintenance' | 'pending' }>`\n   font-size: ${AppTextStyles.label2.fontSize};\n   color: ${props => {\n     switch (props.$status) {\n       case 'available':\n@@ -114,8 +205,10 @@\n       case 'occupied':\n         return AppColors.error;\n       case 'maintenance':\n         return AppColors.warning;\n+      case 'pending':\n+        return AppColors.info;\n       default:\n         return AppColors.onInput2;\n     }\n   }};\n@@ -145,47 +238,77 @@\n   font-size: ${AppTextStyles.body2.fontSize};\n   color: ${AppColors.onSurface};\n `;\n \n+// 라커 타입 정의\n+interface Locker {\n+  id: number;\n+  number: string;\n+  status: 'available' | 'occupied' | 'maintenance' | 'pending';\n+  branchId: string;\n+  userId?: string;\n+}\n+\n+// 지점 타입 정의\n+interface Branch {\n+  id: string;\n+  name: string;\n+}\n+\n const LockerManagement: React.FC = () => {\n-  const [selectedFloor, setSelectedFloor] = useState<string>('1');\n-  const [selectedType, setSelectedType] = useState<string>('all');\n+  const [selectedBranch, setSelectedBranch] = useState<string>('branch1');\n+  const [lockers, setLockers] = useState<Locker[]>([]);\n+  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n+  const [addCount, setAddCount] = useState<number>(1);\n+  const [selectedLocker, setSelectedLocker] = useState<Locker | null>(null);\n \n-  // 샘플 락커 데이터\n-  const generateLockers = () => {\n-    const lockers = [];\n-    const totalLockers = selectedFloor === '1' ? 120 : 80;\n+  // 지점 데이터\n+  const branches: Branch[] = [\n+    { id: 'branch1', name: '강남점' },\n+    { id: 'branch2', name: '홍대점' },\n+    { id: 'branch3', name: '신촌점' },\n+  ];\n+\n+  // 지점별 라커 데이터 초기화\n+  const initializeLockers = () => {\n+    const initialLockers: Locker[] = [];\n     \n-    for (let i = 1; i <= totalLockers; i++) {\n-      const lockerNumber = `${selectedFloor}${i.toString().padStart(3, '0')}`;\n-      let status: 'available' | 'occupied' | 'maintenance';\n-      \n-      // 임의로 상태 배정\n-      const rand = Math.random();\n-      if (rand < 0.6) {\n-        status = 'occupied';\n-      } else if (rand < 0.9) {\n-        status = 'available';\n-      } else {\n-        status = 'maintenance';\n+    branches.forEach(branch => {\n+      // 각 지점마다 초기 라커 20개씩 생성\n+      for (let i = 1; i <= 20; i++) {\n+        let status: 'available' | 'occupied' | 'maintenance' | 'pending';\n+        \n+        // 임의로 상태 배정\n+        const rand = Math.random();\n+        if (rand < 0.5) {\n+          status = 'occupied';\n+        } else if (rand < 0.8) {\n+          status = 'available';\n+        } else if (rand < 0.9) {\n+          status = 'maintenance';\n+        } else {\n+          status = 'pending';\n+        }\n+        \n+        initialLockers.push({\n+          id: parseInt(`${branch.id.slice(-1)}${i.toString().padStart(3, '0')}`),\n+          number: i.toString(),\n+          status,\n+          branchId: branch.id,\n+          userId: status === 'occupied' ? `user${Math.floor(Math.random() * 100)}` : undefined\n+        });\n       }\n-      \n-      lockers.push({\n-        number: lockerNumber,\n-        status,\n-        type: i <= totalLockers / 2 ? 'standard' : 'large'\n-      });\n-    }\n+    });\n     \n-    return lockers;\n+    setLockers(initialLockers);\n   };\n \n-  const lockers = generateLockers();\n+  // 컴포넌트 마운트 시 라커 초기화\n+  React.useEffect(() => {\n+    initializeLockers();\n+  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n \n-  const filteredLockers = lockers.filter(locker => {\n-    if (selectedType === 'all') return true;\n-    return locker.type === selectedType;\n-  });\n+  const currentBranchLockers = lockers.filter(locker => locker.branchId === selectedBranch);\n \n   const getStatusText = (status: string) => {\n     switch (status) {\n       case 'available':\n@@ -193,42 +316,67 @@\n       case 'occupied':\n         return '사용중';\n       case 'maintenance':\n         return '점검중';\n+      case 'pending':\n+        return '승인요청';\n       default:\n         return '알 수 없음';\n     }\n   };\n \n-  const handleLockerClick = (lockerNumber: string, status: string) => {\n-    alert(`락커 ${lockerNumber} - 상태: ${getStatusText(status)}`);\n+  const handleAddLockers = () => {\n+    const maxNumber = Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0);\n+    const newLockers: Locker[] = [];\n+    \n+    for (let i = 1; i <= addCount; i++) {\n+      const newNumber = maxNumber + i;\n+      newLockers.push({\n+        id: parseInt(`${selectedBranch.slice(-1)}${newNumber.toString().padStart(3, '0')}`),\n+        number: newNumber.toString(),\n+        status: 'available',\n+        branchId: selectedBranch\n+      });\n+    }\n+    \n+    setLockers(prev => [...prev, ...newLockers]);\n+    setIsAddModalOpen(false);\n+    setAddCount(1);\n   };\n \n+  const handleToggleMaintenance = (locker: Locker) => {\n+    setLockers(prev => prev.map(l => \n+      l.id === locker.id \n+        ? { ...l, status: l.status === 'maintenance' ? 'available' : 'maintenance' }\n+        : l\n+    ));\n+  };\n+\n+  const handleDeleteLocker = (locker: Locker) => {\n+    if (window.confirm(`라커 ${locker.number}번을 삭제하시겠습니까?`)) {\n+      setLockers(prev => prev.filter(l => l.id !== locker.id));\n+    }\n+  };\n+\n+  const handleLockerClick = (locker: Locker) => {\n+    setSelectedLocker(locker);\n+  };\n+\n   return (\n     <Container>\n-      <Title>락커 관리</Title>\n+      <Title>라커 관리</Title>\n       <Content>\n         <FilterSection>\n-          <FilterLabel>층수:</FilterLabel>\n+          <FilterLabel>지점:</FilterLabel>\n           <FilterSelect\n-            value={selectedFloor}\n-            onChange={(e) => setSelectedFloor(e.target.value)}\n+            value={selectedBranch}\n+            onChange={(e) => setSelectedBranch(e.target.value)}\n           >\n-            <option value=\"1\">1층</option>\n-            <option value=\"2\">2층</option>\n-            <option value=\"3\">3층</option>\n+            {branches.map(branch => (\n+              <option key={branch.id} value={branch.id}>{branch.name}</option>\n+            ))}\n           </FilterSelect>\n \n-          <FilterLabel>타입:</FilterLabel>\n-          <FilterSelect\n-            value={selectedType}\n-            onChange={(e) => setSelectedType(e.target.value)}\n-          >\n-            <option value=\"all\">전체</option>\n-            <option value=\"standard\">일반형</option>\n-            <option value=\"large\">대형</option>\n-          </FilterSelect>\n-\n           <StatusLegend>\n             <LegendItem>\n               <LegendColor $color={AppColors.success} />\n               <LegendText>사용가능</LegendText>\n@@ -240,25 +388,97 @@\n             <LegendItem>\n               <LegendColor $color={AppColors.warning} />\n               <LegendText>점검중</LegendText>\n             </LegendItem>\n+            <LegendItem>\n+              <LegendColor $color={AppColors.info} />\n+              <LegendText>승인요청</LegendText>\n+            </LegendItem>\n           </StatusLegend>\n         </FilterSection>\n \n+        <ActionSection>\n+          <ActionButton onClick={() => setIsAddModalOpen(true)}>\n+            라커 추가\n+          </ActionButton>\n+          <Input\n+            type=\"number\"\n+            min=\"1\"\n+            max=\"50\"\n+            value={addCount}\n+            onChange={(e) => setAddCount(parseInt(e.target.value) || 1)}\n+            placeholder=\"추가 개수\"\n+          />\n+        </ActionSection>\n+\n         <LockerGrid>\n-          {filteredLockers.map((locker) => (\n+          {currentBranchLockers.map((locker) => (\n             <LockerItem\n-              key={locker.number}\n+              key={locker.id}\n               $status={locker.status}\n-              onClick={() => handleLockerClick(locker.number, locker.status)}\n+              onClick={() => handleLockerClick(locker)}\n             >\n               <LockerNumber>{locker.number}</LockerNumber>\n               <LockerStatus $status={locker.status}>\n                 {getStatusText(locker.status)}\n               </LockerStatus>\n             </LockerItem>\n           ))}\n         </LockerGrid>\n+\n+        {/* 라커 추가 모달 */}\n+        <Modal $isOpen={isAddModalOpen}>\n+          <ModalContent>\n+            <ModalTitle>라커 추가</ModalTitle>\n+            <p>추가할 라커 개수: {addCount}개</p>\n+            <p>번호: {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + 1}번부터</p>\n+            <ModalButtons>\n+              <SecondaryButton onClick={() => setIsAddModalOpen(false)}>\n+                취소\n+              </SecondaryButton>\n+              <ActionButton onClick={handleAddLockers}>\n+                추가\n+              </ActionButton>\n+            </ModalButtons>\n+          </ModalContent>\n+        </Modal>\n+\n+        {/* 라커 상세 모달 */}\n+        <Modal $isOpen={!!selectedLocker}>\n+          <ModalContent>\n+            <ModalTitle>라커 {selectedLocker?.number}번</ModalTitle>\n+            <p>상태: {selectedLocker ? getStatusText(selectedLocker.status) : ''}</p>\n+            {selectedLocker?.userId && (\n+              <p>사용자: {selectedLocker.userId}</p>\n+            )}\n+            <ModalButtons>\n+              <SecondaryButton onClick={() => setSelectedLocker(null)}>\n+                닫기\n+              </SecondaryButton>\n+              {selectedLocker && selectedLocker.status !== 'occupied' && (\n+                <ActionButton \n+                  onClick={() => {\n+                    handleToggleMaintenance(selectedLocker);\n+                    setSelectedLocker(null);\n+                  }}\n+                >\n+                  {selectedLocker.status === 'maintenance' ? '점검 완료' : '점검중으로 변경'}\n+                </ActionButton>\n+              )}\n+              {selectedLocker && selectedLocker.status === 'available' && (\n+                <ActionButton \n+                  onClick={() => {\n+                    handleDeleteLocker(selectedLocker);\n+                    setSelectedLocker(null);\n+                  }}\n+                  style={{ backgroundColor: AppColors.error }}\n+                >\n+                  삭제\n+                </ActionButton>\n+              )}\n+            </ModalButtons>\n+          </ModalContent>\n+        </Modal>\n       </Content>\n     </Container>\n   );\n };\n"
                },
                {
                    "date": 1760165987562,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import React, { useState } from 'react';\n import styled from 'styled-components';\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n+import { dbManager, type Branch } from '../../../utils/indexedDB';\n \n const Container = styled.div`\n   padding: 24px;\n   background-color: ${AppColors.surface};\n@@ -247,65 +248,82 @@\n   branchId: string;\n   userId?: string;\n }\n \n-// 지점 타입 정의\n-interface Branch {\n-  id: string;\n-  name: string;\n-}\n-\n const LockerManagement: React.FC = () => {\n-  const [selectedBranch, setSelectedBranch] = useState<string>('branch1');\n+  const [selectedBranch, setSelectedBranch] = useState<string>('');\n   const [lockers, setLockers] = useState<Locker[]>([]);\n+  const [branches, setBranches] = useState<Branch[]>([]);\n   const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n   const [addCount, setAddCount] = useState<number>(1);\n   const [selectedLocker, setSelectedLocker] = useState<Locker | null>(null);\n \n-  // 지점 데이터\n-  const branches: Branch[] = [\n-    { id: 'branch1', name: '강남점' },\n-    { id: 'branch2', name: '홍대점' },\n-    { id: 'branch3', name: '신촌점' },\n-  ];\n+  // 지점 데이터 로드\n+  const loadBranches = async () => {\n+    try {\n+      const branchData = await dbManager.getAllBranches();\n+      // '전체' 지점 제외하고 실제 지점만 사용\n+      const filteredBranches = branchData.filter(branch => branch.name !== '전체');\n+      setBranches(filteredBranches);\n+      \n+      // 첫 번째 지점을 기본 선택\n+      if (filteredBranches.length > 0) {\n+        setSelectedBranch(filteredBranches[0].id);\n+      }\n+    } catch (error) {\n+      console.error('지점 데이터 로드 실패:', error);\n+    }\n+  };\n \n   // 지점별 라커 데이터 초기화\n-  const initializeLockers = () => {\n-    const initialLockers: Locker[] = [];\n-    \n-    branches.forEach(branch => {\n-      // 각 지점마다 초기 라커 20개씩 생성\n-      for (let i = 1; i <= 20; i++) {\n-        let status: 'available' | 'occupied' | 'maintenance' | 'pending';\n-        \n-        // 임의로 상태 배정\n-        const rand = Math.random();\n-        if (rand < 0.5) {\n-          status = 'occupied';\n-        } else if (rand < 0.8) {\n-          status = 'available';\n-        } else if (rand < 0.9) {\n-          status = 'maintenance';\n-        } else {\n-          status = 'pending';\n+  const initializeLockers = async () => {\n+    try {\n+      const branchData = await dbManager.getAllBranches();\n+      const filteredBranches = branchData.filter(branch => branch.name !== '전체');\n+      \n+      const initialLockers: Locker[] = [];\n+      \n+      filteredBranches.forEach(branch => {\n+        // 각 지점마다 초기 라커 20개씩 생성\n+        for (let i = 1; i <= 20; i++) {\n+          let status: 'available' | 'occupied' | 'maintenance' | 'pending';\n+          \n+          // 임의로 상태 배정\n+          const rand = Math.random();\n+          if (rand < 0.5) {\n+            status = 'occupied';\n+          } else if (rand < 0.8) {\n+            status = 'available';\n+          } else if (rand < 0.9) {\n+            status = 'maintenance';\n+          } else {\n+            status = 'pending';\n+          }\n+          \n+          initialLockers.push({\n+            id: parseInt(`${branch.id.slice(-1)}${i.toString().padStart(3, '0')}`),\n+            number: i.toString(),\n+            status,\n+            branchId: branch.id,\n+            userId: status === 'occupied' ? `user${Math.floor(Math.random() * 100)}` : undefined\n+          });\n         }\n-        \n-        initialLockers.push({\n-          id: parseInt(`${branch.id.slice(-1)}${i.toString().padStart(3, '0')}`),\n-          number: i.toString(),\n-          status,\n-          branchId: branch.id,\n-          userId: status === 'occupied' ? `user${Math.floor(Math.random() * 100)}` : undefined\n-        });\n-      }\n-    });\n-    \n-    setLockers(initialLockers);\n+      });\n+      \n+      setLockers(initialLockers);\n+    } catch (error) {\n+      console.error('라커 데이터 초기화 실패:', error);\n+    }\n   };\n \n-  // 컴포넌트 마운트 시 라커 초기화\n+  // 컴포넌트 마운트 시 데이터 로드\n   React.useEffect(() => {\n-    initializeLockers();\n+    const initData = async () => {\n+      await loadBranches();\n+      await initializeLockers();\n+    };\n+    \n+    initData();\n   }, []); // eslint-disable-line react-hooks/exhaustive-deps\n \n   const currentBranchLockers = lockers.filter(locker => locker.branchId === selectedBranch);\n \n@@ -370,11 +388,15 @@\n           <FilterSelect\n             value={selectedBranch}\n             onChange={(e) => setSelectedBranch(e.target.value)}\n           >\n-            {branches.map(branch => (\n-              <option key={branch.id} value={branch.id}>{branch.name}</option>\n-            ))}\n+            {branches.length === 0 ? (\n+              <option value=\"\">지점 로딩 중...</option>\n+            ) : (\n+              branches.map(branch => (\n+                <option key={branch.id} value={branch.id}>{branch.name}</option>\n+              ))\n+            )}\n           </FilterSelect>\n \n           <StatusLegend>\n             <LegendItem>\n"
                },
                {
                    "date": 1760166065387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import styled from 'styled-components';\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n import { dbManager, type Branch } from '../../../utils/indexedDB';\n+import CustomDropdown from '../../../components/CustomDropdown';\n \n const Container = styled.div`\n   padding: 24px;\n   background-color: ${AppColors.surface};\n@@ -123,23 +124,8 @@\n   color: ${AppColors.onSurface};\n   font-weight: 500;\n `;\n \n-const FilterSelect = styled.select`\n-  padding: 8px 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  background-color: ${AppColors.surface};\n-  color: ${AppColors.onSurface};\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  cursor: pointer;\n-\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n const LockerGrid = styled.div`\n   display: grid;\n   grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n   gap: 16px;\n@@ -324,8 +310,17 @@\n     \n     initData();\n   }, []); // eslint-disable-line react-hooks/exhaustive-deps\n \n+  // 지점 옵션 변환 함수\n+  const getBranchOptions = () => {\n+    return branches.map(branch => ({\n+      value: branch.id,\n+      label: branch.name,\n+      description: branch.address\n+    }));\n+  };\n+\n   const currentBranchLockers = lockers.filter(locker => locker.branchId === selectedBranch);\n \n   const getStatusText = (status: string) => {\n     switch (status) {\n@@ -384,20 +379,18 @@\n       <Title>라커 관리</Title>\n       <Content>\n         <FilterSection>\n           <FilterLabel>지점:</FilterLabel>\n-          <FilterSelect\n-            value={selectedBranch}\n-            onChange={(e) => setSelectedBranch(e.target.value)}\n-          >\n-            {branches.length === 0 ? (\n-              <option value=\"\">지점 로딩 중...</option>\n-            ) : (\n-              branches.map(branch => (\n-                <option key={branch.id} value={branch.id}>{branch.name}</option>\n-              ))\n-            )}\n-          </FilterSelect>\n+          <div style={{ minWidth: '200px' }}>\n+            <CustomDropdown\n+              value={selectedBranch}\n+              onChange={(value: string) => setSelectedBranch(value)}\n+              options={getBranchOptions()}\n+              placeholder={branches.length === 0 ? \"지점 로딩 중...\" : \"지점을 선택하세요\"}\n+              disabled={branches.length === 0}\n+              inModal={false}\n+            />\n+          </div>\n \n           <StatusLegend>\n             <LegendItem>\n               <LegendColor $color={AppColors.success} />\n"
                },
                {
                    "date": 1761376104773,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n import { dbManager, type Branch } from '../../../utils/indexedDB';\n import CustomDropdown from '../../../components/CustomDropdown';\n+import { SYSTEM_ADMIN_CONFIG } from '../../../constants/staffConstants';\n \n const Container = styled.div`\n   padding: 24px;\n   background-color: ${AppColors.surface};\n@@ -124,8 +125,28 @@\n   color: ${AppColors.onSurface};\n   font-weight: 500;\n `;\n \n+const PriceEditButton = styled.button`\n+  position: absolute;\n+  top: 4px;\n+  right: 4px;\n+  width: 20px;\n+  height: 20px;\n+  border: none;\n+  border-radius: 50%;\n+  background-color: ${AppColors.primary};\n+  color: ${AppColors.onPrimary};\n+  font-size: 10px;\n+  cursor: pointer;\n+  opacity: 0;\n+  transition: opacity 0.2s ease;\n+  \n+  &:hover {\n+    background-color: ${AppColors.secondary};\n+  }\n+`;\n+\n const LockerGrid = styled.div`\n   display: grid;\n   grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n   gap: 16px;\n@@ -168,13 +189,19 @@\n     }\n   }};\n   cursor: pointer;\n   transition: all 0.2s ease;\n+  position: relative;\n+  padding: 8px;\n \n   &:hover {\n     transform: translateY(-2px);\n     box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n   }\n+\n+  &:hover ${PriceEditButton} {\n+    opacity: 1;\n+  }\n `;\n \n const LockerNumber = styled.div`\n   font-size: ${AppTextStyles.body1.fontSize};\n@@ -220,8 +247,49 @@\n   border-radius: 4px;\n   background-color: ${props => props.$color};\n `;\n \n+const LockerPrice = styled.div`\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  color: ${AppColors.primary};\n+  font-weight: 600;\n+  margin-top: 2px;\n+`;\n+\n+const PermissionNotice = styled.div`\n+  background-color: ${AppColors.warning + '15'};\n+  border: 1px solid ${AppColors.warning};\n+  border-radius: 8px;\n+  padding: 12px;\n+  margin-bottom: 16px;\n+  color: ${AppColors.warning};\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n+`;\n+\n+const PriceInputGroup = styled.div`\n+  display: flex;\n+  flex-direction: column;\n+  gap: 8px;\n+  margin: 16px 0;\n+`;\n+\n+const PriceInput = styled.input`\n+  padding: 8px 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  background-color: ${AppColors.surface};\n+  color: ${AppColors.onSurface};\n+  font-size: ${AppTextStyles.body2.fontSize};\n+\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n const LegendText = styled.span`\n   font-size: ${AppTextStyles.body2.fontSize};\n   color: ${AppColors.onSurface};\n `;\n@@ -232,81 +300,117 @@\n   number: string;\n   status: 'available' | 'occupied' | 'maintenance' | 'pending';\n   branchId: string;\n   userId?: string;\n+  price: number; // 라커 가격 추가\n }\n \n+// 사용자 정보 타입\n+interface UserInfo {\n+  id: string;\n+  name: string;\n+  permission: string;\n+  branchId: string;\n+  loginId: string;\n+}\n+\n const LockerManagement: React.FC = () => {\n   const [selectedBranch, setSelectedBranch] = useState<string>('');\n   const [lockers, setLockers] = useState<Locker[]>([]);\n   const [branches, setBranches] = useState<Branch[]>([]);\n   const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n   const [addCount, setAddCount] = useState<number>(1);\n+  const [addPrice, setAddPrice] = useState<number>(50000); // 기본 가격 5만원\n   const [selectedLocker, setSelectedLocker] = useState<Locker | null>(null);\n+  const [isPriceModalOpen, setIsPriceModalOpen] = useState(false);\n+  const [editPrice, setEditPrice] = useState<number>(0);\n+  const [currentUserInfo, setCurrentUserInfo] = useState<UserInfo | null>(null);\n+  const [hasPermission, setHasPermission] = useState(false);\n \n+  // 권한 확인 함수\n+  const checkPermission = async () => {\n+    try {\n+      const adminId = sessionStorage.getItem('adminId');\n+      if (!adminId) {\n+        setHasPermission(false);\n+        return;\n+      }\n+\n+      const allStaff = await dbManager.getAllStaff();\n+      const user = allStaff.find(staff => staff.loginId === adminId);\n+      \n+      if (!user) {\n+        setHasPermission(false);\n+        return;\n+      }\n+\n+      setCurrentUserInfo(user);\n+\n+      // MASTER 권한 또는 시스템 관리자, 또는 EDITOR 권한만 라커 관리 가능\n+      const isMaster = user.permission === 'MASTER';\n+      const isSystemAdmin = adminId === SYSTEM_ADMIN_CONFIG.SYSTEM_ADMIN_LOGIN_ID;\n+      const isEditor = user.permission === 'EDITOR';\n+      \n+      setHasPermission(isMaster || isSystemAdmin || isEditor);\n+\n+      // EDITOR인 경우 본인 지점으로 자동 설정\n+      if (isEditor && !isMaster && !isSystemAdmin) {\n+        setSelectedBranch(user.branchId);\n+      }\n+    } catch (error) {\n+      console.error('권한 확인 실패:', error);\n+      setHasPermission(false);\n+    }\n+  };\n+\n+  // 현재 사용자가 선택된 지점에 대한 편집 권한이 있는지 확인\n+  const canEditBranch = (branchId: string): boolean => {\n+    if (!currentUserInfo) return false;\n+    \n+    const isMaster = currentUserInfo.permission === 'MASTER';\n+    const isSystemAdmin = currentUserInfo.loginId === SYSTEM_ADMIN_CONFIG.SYSTEM_ADMIN_LOGIN_ID;\n+    const isEditorOfBranch = currentUserInfo.permission === 'EDITOR' && currentUserInfo.branchId === branchId;\n+    \n+    return isMaster || isSystemAdmin || isEditorOfBranch;\n+  };\n+\n   // 지점 데이터 로드\n   const loadBranches = async () => {\n     try {\n       const branchData = await dbManager.getAllBranches();\n       // '전체' 지점 제외하고 실제 지점만 사용\n       const filteredBranches = branchData.filter(branch => branch.name !== '전체');\n       setBranches(filteredBranches);\n       \n-      // 첫 번째 지점을 기본 선택\n-      if (filteredBranches.length > 0) {\n-        setSelectedBranch(filteredBranches[0].id);\n+      // EDITOR 권한이 아닌 경우 첫 번째 지점을 기본 선택\n+      if (filteredBranches.length > 0 && !selectedBranch) {\n+        if (!currentUserInfo || currentUserInfo.permission !== 'EDITOR') {\n+          setSelectedBranch(filteredBranches[0].id);\n+        }\n       }\n     } catch (error) {\n       console.error('지점 데이터 로드 실패:', error);\n     }\n   };\n \n-  // 지점별 라커 데이터 초기화\n-  const initializeLockers = async () => {\n+  // 라커 데이터 로드 (더미 데이터 제거, 실제 저장된 라커만 로드)\n+  const loadLockers = async () => {\n     try {\n-      const branchData = await dbManager.getAllBranches();\n-      const filteredBranches = branchData.filter(branch => branch.name !== '전체');\n-      \n-      const initialLockers: Locker[] = [];\n-      \n-      filteredBranches.forEach(branch => {\n-        // 각 지점마다 초기 라커 20개씩 생성\n-        for (let i = 1; i <= 20; i++) {\n-          let status: 'available' | 'occupied' | 'maintenance' | 'pending';\n-          \n-          // 임의로 상태 배정\n-          const rand = Math.random();\n-          if (rand < 0.5) {\n-            status = 'occupied';\n-          } else if (rand < 0.8) {\n-            status = 'available';\n-          } else if (rand < 0.9) {\n-            status = 'maintenance';\n-          } else {\n-            status = 'pending';\n-          }\n-          \n-          initialLockers.push({\n-            id: parseInt(`${branch.id.slice(-1)}${i.toString().padStart(3, '0')}`),\n-            number: i.toString(),\n-            status,\n-            branchId: branch.id,\n-            userId: status === 'occupied' ? `user${Math.floor(Math.random() * 100)}` : undefined\n-          });\n-        }\n-      });\n-      \n-      setLockers(initialLockers);\n+      // 실제 저장된 라커 데이터가 있다면 로드\n+      // 현재는 빈 배열로 시작 (더미 데이터 제거)\n+      setLockers([]);\n     } catch (error) {\n-      console.error('라커 데이터 초기화 실패:', error);\n+      console.error('라커 데이터 로드 실패:', error);\n+      setLockers([]);\n     }\n   };\n \n   // 컴포넌트 마운트 시 데이터 로드\n   React.useEffect(() => {\n     const initData = async () => {\n+      await checkPermission();\n       await loadBranches();\n-      await initializeLockers();\n+      await loadLockers();\n     };\n     \n     initData();\n   }, []); // eslint-disable-line react-hooks/exhaustive-deps\n@@ -337,8 +441,14 @@\n     }\n   };\n \n   const handleAddLockers = () => {\n+    // 권한 확인\n+    if (!canEditBranch(selectedBranch)) {\n+      alert('라커 추가 권한이 없습니다.');\n+      return;\n+    }\n+\n     const maxNumber = Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0);\n     const newLockers: Locker[] = [];\n     \n     for (let i = 1; i <= addCount; i++) {\n@@ -346,9 +456,10 @@\n       newLockers.push({\n         id: parseInt(`${selectedBranch.slice(-1)}${newNumber.toString().padStart(3, '0')}`),\n         number: newNumber.toString(),\n         status: 'available',\n-        branchId: selectedBranch\n+        branchId: selectedBranch,\n+        price: addPrice // 설정된 가격으로 추가\n       });\n     }\n     \n     setLockers(prev => [...prev, ...newLockers]);\n@@ -356,16 +467,28 @@\n     setAddCount(1);\n   };\n \n   const handleToggleMaintenance = (locker: Locker) => {\n+    // 권한 확인\n+    if (!canEditBranch(locker.branchId)) {\n+      alert('라커 상태 변경 권한이 없습니다.');\n+      return;\n+    }\n+\n     setLockers(prev => prev.map(l => \n       l.id === locker.id \n         ? { ...l, status: l.status === 'maintenance' ? 'available' : 'maintenance' }\n         : l\n     ));\n   };\n \n   const handleDeleteLocker = (locker: Locker) => {\n+    // 권한 확인\n+    if (!canEditBranch(locker.branchId)) {\n+      alert('라커 삭제 권한이 없습니다.');\n+      return;\n+    }\n+\n     if (window.confirm(`라커 ${locker.number}번을 삭제하시겠습니까?`)) {\n       setLockers(prev => prev.filter(l => l.id !== locker.id));\n     }\n   };\n@@ -373,21 +496,63 @@\n   const handleLockerClick = (locker: Locker) => {\n     setSelectedLocker(locker);\n   };\n \n+  const handlePriceEdit = (locker: Locker) => {\n+    // 권한 확인\n+    if (!canEditBranch(locker.branchId)) {\n+      alert('라커 가격 수정 권한이 없습니다.');\n+      return;\n+    }\n+\n+    setSelectedLocker(locker);\n+    setEditPrice(locker.price);\n+    setIsPriceModalOpen(true);\n+  };\n+\n+  const handlePriceUpdate = () => {\n+    if (!selectedLocker) return;\n+\n+    setLockers(prev => prev.map(l => \n+      l.id === selectedLocker.id \n+        ? { ...l, price: editPrice }\n+        : l\n+    ));\n+    \n+    setIsPriceModalOpen(false);\n+    setSelectedLocker(null);\n+    setEditPrice(0);\n+  };\n+\n+  const formatPrice = (price: number): string => {\n+    return new Intl.NumberFormat('ko-KR').format(price) + '원';\n+  };\n+\n   return (\n     <Container>\n       <Title>라커 관리</Title>\n       <Content>\n+        {!hasPermission && (\n+          <PermissionNotice>\n+            ⚠️ 라커 관리 권한이 없습니다. MASTER 또는 EDITOR 권한이 필요합니다.\n+          </PermissionNotice>\n+        )}\n+\n+        {currentUserInfo && currentUserInfo.permission === 'EDITOR' && (\n+          <PermissionNotice>\n+            ℹ️ EDITOR 권한으로 소속 지점({branches.find(b => b.id === currentUserInfo.branchId)?.name})의 라커만 관리할 수 있습니다.\n+          </PermissionNotice>\n+        )}\n+\n         <FilterSection>\n           <FilterLabel>지점:</FilterLabel>\n           <div style={{ minWidth: '200px' }}>\n             <CustomDropdown\n               value={selectedBranch}\n               onChange={(value: string) => setSelectedBranch(value)}\n               options={getBranchOptions()}\n               placeholder={branches.length === 0 ? \"지점 로딩 중...\" : \"지점을 선택하세요\"}\n-              disabled={branches.length === 0}\n+              disabled={branches.length === 0 || (currentUserInfo?.permission === 'EDITOR')}\n               inModal={false}\n             />\n           </div>\n \n@@ -410,33 +575,60 @@\n             </LegendItem>\n           </StatusLegend>\n         </FilterSection>\n \n-        <ActionSection>\n-          <ActionButton onClick={() => setIsAddModalOpen(true)}>\n-            라커 추가\n-          </ActionButton>\n-          <Input\n-            type=\"number\"\n-            min=\"1\"\n-            max=\"50\"\n-            value={addCount}\n-            onChange={(e) => setAddCount(parseInt(e.target.value) || 1)}\n-            placeholder=\"추가 개수\"\n-          />\n-        </ActionSection>\n+        {hasPermission && canEditBranch(selectedBranch) && (\n+          <ActionSection>\n+            <ActionButton onClick={() => setIsAddModalOpen(true)}>\n+              라커 추가\n+            </ActionButton>\n+            <Input\n+              type=\"number\"\n+              min=\"1\"\n+              max=\"50\"\n+              value={addCount}\n+              onChange={(e) => setAddCount(parseInt(e.target.value) || 1)}\n+              placeholder=\"추가 개수\"\n+            />\n+            <PriceInput\n+              type=\"number\"\n+              min=\"0\"\n+              step=\"1000\"\n+              value={addPrice}\n+              onChange={(e) => setAddPrice(parseInt(e.target.value) || 0)}\n+              placeholder=\"가격\"\n+            />\n+            <span style={{ fontSize: AppTextStyles.body2.fontSize, color: AppColors.onSurface }}>\n+              원\n+            </span>\n+          </ActionSection>\n+        )}\n \n         <LockerGrid>\n           {currentBranchLockers.map((locker) => (\n             <LockerItem\n               key={locker.id}\n               $status={locker.status}\n               onClick={() => handleLockerClick(locker)}\n             >\n+              {hasPermission && canEditBranch(locker.branchId) && (\n+                <PriceEditButton\n+                  onClick={(e) => {\n+                    e.stopPropagation();\n+                    handlePriceEdit(locker);\n+                  }}\n+                  title=\"가격 수정\"\n+                >\n+                  ₩\n+                </PriceEditButton>\n+              )}\n               <LockerNumber>{locker.number}</LockerNumber>\n               <LockerStatus $status={locker.status}>\n                 {getStatusText(locker.status)}\n               </LockerStatus>\n+              <LockerPrice>\n+                {formatPrice(locker.price)}\n+              </LockerPrice>\n             </LockerItem>\n           ))}\n         </LockerGrid>\n \n@@ -445,8 +637,20 @@\n           <ModalContent>\n             <ModalTitle>라커 추가</ModalTitle>\n             <p>추가할 라커 개수: {addCount}개</p>\n             <p>번호: {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + 1}번부터</p>\n+            <p>가격: {formatPrice(addPrice)}</p>\n+            <PriceInputGroup>\n+              <label>라커 가격:</label>\n+              <PriceInput\n+                type=\"number\"\n+                min=\"0\"\n+                step=\"1000\"\n+                value={addPrice}\n+                onChange={(e) => setAddPrice(parseInt(e.target.value) || 0)}\n+                placeholder=\"가격을 입력하세요\"\n+              />\n+            </PriceInputGroup>\n             <ModalButtons>\n               <SecondaryButton onClick={() => setIsAddModalOpen(false)}>\n                 취소\n               </SecondaryButton>\n@@ -456,21 +660,51 @@\n             </ModalButtons>\n           </ModalContent>\n         </Modal>\n \n+        {/* 라커 가격 수정 모달 */}\n+        <Modal $isOpen={isPriceModalOpen}>\n+          <ModalContent>\n+            <ModalTitle>라커 {selectedLocker?.number}번 가격 수정</ModalTitle>\n+            <PriceInputGroup>\n+              <label>라커 가격:</label>\n+              <PriceInput\n+                type=\"number\"\n+                min=\"0\"\n+                step=\"1000\"\n+                value={editPrice}\n+                onChange={(e) => setEditPrice(parseInt(e.target.value) || 0)}\n+                placeholder=\"가격을 입력하세요\"\n+              />\n+              <span style={{ fontSize: AppTextStyles.label2.fontSize, color: AppColors.onInput1 }}>\n+                현재 가격: {selectedLocker ? formatPrice(selectedLocker.price) : ''}\n+              </span>\n+            </PriceInputGroup>\n+            <ModalButtons>\n+              <SecondaryButton onClick={() => setIsPriceModalOpen(false)}>\n+                취소\n+              </SecondaryButton>\n+              <ActionButton onClick={handlePriceUpdate}>\n+                수정\n+              </ActionButton>\n+            </ModalButtons>\n+          </ModalContent>\n+        </Modal>\n+\n         {/* 라커 상세 모달 */}\n-        <Modal $isOpen={!!selectedLocker}>\n+        <Modal $isOpen={!!selectedLocker && !isPriceModalOpen}>\n           <ModalContent>\n             <ModalTitle>라커 {selectedLocker?.number}번</ModalTitle>\n             <p>상태: {selectedLocker ? getStatusText(selectedLocker.status) : ''}</p>\n+            <p>가격: {selectedLocker ? formatPrice(selectedLocker.price) : ''}</p>\n             {selectedLocker?.userId && (\n               <p>사용자: {selectedLocker.userId}</p>\n             )}\n             <ModalButtons>\n               <SecondaryButton onClick={() => setSelectedLocker(null)}>\n                 닫기\n               </SecondaryButton>\n-              {selectedLocker && selectedLocker.status !== 'occupied' && (\n+              {selectedLocker && hasPermission && canEditBranch(selectedLocker.branchId) && selectedLocker.status !== 'occupied' && (\n                 <ActionButton \n                   onClick={() => {\n                     handleToggleMaintenance(selectedLocker);\n                     setSelectedLocker(null);\n@@ -478,9 +712,9 @@\n                 >\n                   {selectedLocker.status === 'maintenance' ? '점검 완료' : '점검중으로 변경'}\n                 </ActionButton>\n               )}\n-              {selectedLocker && selectedLocker.status === 'available' && (\n+              {selectedLocker && hasPermission && canEditBranch(selectedLocker.branchId) && selectedLocker.status === 'available' && (\n                 <ActionButton \n                   onClick={() => {\n                     handleDeleteLocker(selectedLocker);\n                     setSelectedLocker(null);\n"
                },
                {
                    "date": 1761376273402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -125,28 +125,8 @@\n   color: ${AppColors.onSurface};\n   font-weight: 500;\n `;\n \n-const PriceEditButton = styled.button`\n-  position: absolute;\n-  top: 4px;\n-  right: 4px;\n-  width: 20px;\n-  height: 20px;\n-  border: none;\n-  border-radius: 50%;\n-  background-color: ${AppColors.primary};\n-  color: ${AppColors.onPrimary};\n-  font-size: 10px;\n-  cursor: pointer;\n-  opacity: 0;\n-  transition: opacity 0.2s ease;\n-  \n-  &:hover {\n-    background-color: ${AppColors.secondary};\n-  }\n-`;\n-\n const LockerGrid = styled.div`\n   display: grid;\n   grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n   gap: 16px;\n@@ -196,12 +176,8 @@\n   &:hover {\n     transform: translateY(-2px);\n     box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n   }\n-\n-  &:hover ${PriceEditButton} {\n-    opacity: 1;\n-  }\n `;\n \n const LockerNumber = styled.div`\n   font-size: ${AppTextStyles.body1.fontSize};\n@@ -300,11 +276,16 @@\n   number: string;\n   status: 'available' | 'occupied' | 'maintenance' | 'pending';\n   branchId: string;\n   userId?: string;\n-  price: number; // 라커 가격 추가\n }\n \n+// 지점별 라커 설정 타입\n+interface BranchLockerSettings {\n+  branchId: string;\n+  price: number; // 지점별 라커 가격\n+}\n+\n // 사용자 정보 타입\n interface UserInfo {\n   id: string;\n   name: string;\n@@ -318,15 +299,32 @@\n   const [lockers, setLockers] = useState<Locker[]>([]);\n   const [branches, setBranches] = useState<Branch[]>([]);\n   const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n   const [addCount, setAddCount] = useState<number>(1);\n-  const [addPrice, setAddPrice] = useState<number>(50000); // 기본 가격 5만원\n   const [selectedLocker, setSelectedLocker] = useState<Locker | null>(null);\n-  const [isPriceModalOpen, setIsPriceModalOpen] = useState(false);\n-  const [editPrice, setEditPrice] = useState<number>(0);\n+  const [isPriceSettingModalOpen, setIsPriceSettingModalOpen] = useState(false);\n+  const [branchLockerSettings, setBranchLockerSettings] = useState<BranchLockerSettings[]>([]);\n   const [currentUserInfo, setCurrentUserInfo] = useState<UserInfo | null>(null);\n   const [hasPermission, setHasPermission] = useState(false);\n \n+  // 지점별 라커 가격 가져오기\n+  const getBranchLockerPrice = (branchId: string): number => {\n+    const setting = branchLockerSettings.find(s => s.branchId === branchId);\n+    return setting?.price || 50000; // 기본값 5만원\n+  };\n+\n+  // 지점별 라커 가격 설정\n+  const setBranchLockerPrice = (branchId: string, price: number) => {\n+    setBranchLockerSettings(prev => {\n+      const existing = prev.find(s => s.branchId === branchId);\n+      if (existing) {\n+        return prev.map(s => s.branchId === branchId ? { ...s, price } : s);\n+      } else {\n+        return [...prev, { branchId, price }];\n+      }\n+    });\n+  };\n+\n   // 권한 확인 함수\n   const checkPermission = async () => {\n     try {\n       const adminId = sessionStorage.getItem('adminId');\n@@ -456,10 +454,9 @@\n       newLockers.push({\n         id: parseInt(`${selectedBranch.slice(-1)}${newNumber.toString().padStart(3, '0')}`),\n         number: newNumber.toString(),\n         status: 'available',\n-        branchId: selectedBranch,\n-        price: addPrice // 설정된 가격으로 추가\n+        branchId: selectedBranch\n       });\n     }\n     \n     setLockers(prev => [...prev, ...newLockers]);\n@@ -496,32 +493,20 @@\n   const handleLockerClick = (locker: Locker) => {\n     setSelectedLocker(locker);\n   };\n \n-  const handlePriceEdit = (locker: Locker) => {\n+  const handlePriceSettingOpen = () => {\n     // 권한 확인\n-    if (!canEditBranch(locker.branchId)) {\n-      alert('라커 가격 수정 권한이 없습니다.');\n+    if (!canEditBranch(selectedBranch)) {\n+      alert('라커 가격 설정 권한이 없습니다.');\n       return;\n     }\n-\n-    setSelectedLocker(locker);\n-    setEditPrice(locker.price);\n-    setIsPriceModalOpen(true);\n+    setIsPriceSettingModalOpen(true);\n   };\n \n-  const handlePriceUpdate = () => {\n-    if (!selectedLocker) return;\n-\n-    setLockers(prev => prev.map(l => \n-      l.id === selectedLocker.id \n-        ? { ...l, price: editPrice }\n-        : l\n-    ));\n-    \n-    setIsPriceModalOpen(false);\n-    setSelectedLocker(null);\n-    setEditPrice(0);\n+  const handlePriceSettingUpdate = (newPrice: number) => {\n+    setBranchLockerPrice(selectedBranch, newPrice);\n+    setIsPriceSettingModalOpen(false);\n   };\n \n   const formatPrice = (price: number): string => {\n     return new Intl.NumberFormat('ko-KR').format(price) + '원';\n@@ -577,8 +562,11 @@\n         </FilterSection>\n \n         {hasPermission && canEditBranch(selectedBranch) && (\n           <ActionSection>\n+            <ActionButton onClick={handlePriceSettingOpen}>\n+              금액 설정\n+            </ActionButton>\n             <ActionButton onClick={() => setIsAddModalOpen(true)}>\n               라커 추가\n             </ActionButton>\n             <Input\n@@ -588,18 +576,10 @@\n               value={addCount}\n               onChange={(e) => setAddCount(parseInt(e.target.value) || 1)}\n               placeholder=\"추가 개수\"\n             />\n-            <PriceInput\n-              type=\"number\"\n-              min=\"0\"\n-              step=\"1000\"\n-              value={addPrice}\n-              onChange={(e) => setAddPrice(parseInt(e.target.value) || 0)}\n-              placeholder=\"가격\"\n-            />\n             <span style={{ fontSize: AppTextStyles.body2.fontSize, color: AppColors.onSurface }}>\n-              원\n+              현재 라커 가격: {formatPrice(getBranchLockerPrice(selectedBranch))}\n             </span>\n           </ActionSection>\n         )}\n \n@@ -609,94 +589,80 @@\n               key={locker.id}\n               $status={locker.status}\n               onClick={() => handleLockerClick(locker)}\n             >\n-              {hasPermission && canEditBranch(locker.branchId) && (\n-                <PriceEditButton\n-                  onClick={(e) => {\n-                    e.stopPropagation();\n-                    handlePriceEdit(locker);\n-                  }}\n-                  title=\"가격 수정\"\n-                >\n-                  ₩\n-                </PriceEditButton>\n-              )}\n               <LockerNumber>{locker.number}</LockerNumber>\n               <LockerStatus $status={locker.status}>\n                 {getStatusText(locker.status)}\n               </LockerStatus>\n               <LockerPrice>\n-                {formatPrice(locker.price)}\n+                {formatPrice(getBranchLockerPrice(locker.branchId))}\n               </LockerPrice>\n             </LockerItem>\n           ))}\n         </LockerGrid>\n \n-        {/* 라커 추가 모달 */}\n-        <Modal $isOpen={isAddModalOpen}>\n+        {/* 지점별 라커 가격 설정 모달 */}\n+        <Modal $isOpen={isPriceSettingModalOpen}>\n           <ModalContent>\n-            <ModalTitle>라커 추가</ModalTitle>\n-            <p>추가할 라커 개수: {addCount}개</p>\n-            <p>번호: {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + 1}번부터</p>\n-            <p>가격: {formatPrice(addPrice)}</p>\n+            <ModalTitle>\n+              {branches.find(b => b.id === selectedBranch)?.name} 라커 가격 설정\n+            </ModalTitle>\n             <PriceInputGroup>\n               <label>라커 가격:</label>\n               <PriceInput\n                 type=\"number\"\n                 min=\"0\"\n                 step=\"1000\"\n-                value={addPrice}\n-                onChange={(e) => setAddPrice(parseInt(e.target.value) || 0)}\n+                defaultValue={getBranchLockerPrice(selectedBranch)}\n                 placeholder=\"가격을 입력하세요\"\n+                id=\"branchPriceInput\"\n               />\n+              <span style={{ fontSize: AppTextStyles.label2.fontSize, color: AppColors.onInput1 }}>\n+                현재 가격: {formatPrice(getBranchLockerPrice(selectedBranch))}\n+              </span>\n             </PriceInputGroup>\n             <ModalButtons>\n-              <SecondaryButton onClick={() => setIsAddModalOpen(false)}>\n+              <SecondaryButton onClick={() => setIsPriceSettingModalOpen(false)}>\n                 취소\n               </SecondaryButton>\n-              <ActionButton onClick={handleAddLockers}>\n-                추가\n+              <ActionButton \n+                onClick={() => {\n+                  const input = document.getElementById('branchPriceInput') as HTMLInputElement;\n+                  const newPrice = parseInt(input.value) || 0;\n+                  handlePriceSettingUpdate(newPrice);\n+                }}\n+              >\n+                설정\n               </ActionButton>\n             </ModalButtons>\n           </ModalContent>\n         </Modal>\n \n-        {/* 라커 가격 수정 모달 */}\n-        <Modal $isOpen={isPriceModalOpen}>\n+        {/* 라커 추가 모달 */}\n+        <Modal $isOpen={isAddModalOpen}>\n           <ModalContent>\n-            <ModalTitle>라커 {selectedLocker?.number}번 가격 수정</ModalTitle>\n-            <PriceInputGroup>\n-              <label>라커 가격:</label>\n-              <PriceInput\n-                type=\"number\"\n-                min=\"0\"\n-                step=\"1000\"\n-                value={editPrice}\n-                onChange={(e) => setEditPrice(parseInt(e.target.value) || 0)}\n-                placeholder=\"가격을 입력하세요\"\n-              />\n-              <span style={{ fontSize: AppTextStyles.label2.fontSize, color: AppColors.onInput1 }}>\n-                현재 가격: {selectedLocker ? formatPrice(selectedLocker.price) : ''}\n-              </span>\n-            </PriceInputGroup>\n+            <ModalTitle>라커 추가</ModalTitle>\n+            <p>추가할 라커 개수: {addCount}개</p>\n+            <p>번호: {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + 1}번부터</p>\n+            <p>라커 가격: {formatPrice(getBranchLockerPrice(selectedBranch))}</p>\n             <ModalButtons>\n-              <SecondaryButton onClick={() => setIsPriceModalOpen(false)}>\n+              <SecondaryButton onClick={() => setIsAddModalOpen(false)}>\n                 취소\n               </SecondaryButton>\n-              <ActionButton onClick={handlePriceUpdate}>\n-                수정\n+              <ActionButton onClick={handleAddLockers}>\n+                추가\n               </ActionButton>\n             </ModalButtons>\n           </ModalContent>\n         </Modal>\n \n         {/* 라커 상세 모달 */}\n-        <Modal $isOpen={!!selectedLocker && !isPriceModalOpen}>\n+        <Modal $isOpen={!!selectedLocker}>\n           <ModalContent>\n             <ModalTitle>라커 {selectedLocker?.number}번</ModalTitle>\n             <p>상태: {selectedLocker ? getStatusText(selectedLocker.status) : ''}</p>\n-            <p>가격: {selectedLocker ? formatPrice(selectedLocker.price) : ''}</p>\n+            <p>가격: {selectedLocker ? formatPrice(getBranchLockerPrice(selectedLocker.branchId)) : ''}</p>\n             {selectedLocker?.userId && (\n               <p>사용자: {selectedLocker.userId}</p>\n             )}\n             <ModalButtons>\n"
                },
                {
                    "date": 1761376552460,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -278,14 +278,8 @@\n   branchId: string;\n   userId?: string;\n }\n \n-// 지점별 라커 설정 타입\n-interface BranchLockerSettings {\n-  branchId: string;\n-  price: number; // 지점별 라커 가격\n-}\n-\n // 사용자 정보 타입\n interface UserInfo {\n   id: string;\n   name: string;\n@@ -301,30 +295,18 @@\n   const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n   const [addCount, setAddCount] = useState<number>(1);\n   const [selectedLocker, setSelectedLocker] = useState<Locker | null>(null);\n   const [isPriceSettingModalOpen, setIsPriceSettingModalOpen] = useState(false);\n-  const [branchLockerSettings, setBranchLockerSettings] = useState<BranchLockerSettings[]>([]);\n   const [currentUserInfo, setCurrentUserInfo] = useState<UserInfo | null>(null);\n   const [hasPermission, setHasPermission] = useState(false);\n \n-  // 지점별 라커 가격 가져오기\n-  const getBranchLockerPrice = (branchId: string): number => {\n-    const setting = branchLockerSettings.find(s => s.branchId === branchId);\n-    return setting?.price || 50000; // 기본값 5만원\n+  // 현재 선택된 지점의 라커 가격을 동기화하여 가져오기\n+  const getCurrentBranchLockerPrice = (): number => {\n+    if (!selectedBranch) return 5000;\n+    const branch = branches.find(b => b.id === selectedBranch);\n+    return branch?.lockerPrice || 5000;\n   };\n \n-  // 지점별 라커 가격 설정\n-  const setBranchLockerPrice = (branchId: string, price: number) => {\n-    setBranchLockerSettings(prev => {\n-      const existing = prev.find(s => s.branchId === branchId);\n-      if (existing) {\n-        return prev.map(s => s.branchId === branchId ? { ...s, price } : s);\n-      } else {\n-        return [...prev, { branchId, price }];\n-      }\n-    });\n-  };\n-\n   // 권한 확인 함수\n   const checkPermission = async () => {\n     try {\n       const adminId = sessionStorage.getItem('adminId');\n@@ -502,11 +484,22 @@\n     }\n     setIsPriceSettingModalOpen(true);\n   };\n \n-  const handlePriceSettingUpdate = (newPrice: number) => {\n-    setBranchLockerPrice(selectedBranch, newPrice);\n-    setIsPriceSettingModalOpen(false);\n+  const handlePriceSettingUpdate = async (newPrice: number) => {\n+    try {\n+      const success = await dbManager.updateLockerPrice(selectedBranch, newPrice);\n+      if (success) {\n+        // 지점 데이터를 다시 로드하여 UI 업데이트\n+        await loadBranches();\n+        setIsPriceSettingModalOpen(false);\n+      } else {\n+        alert('라커 가격 설정에 실패했습니다.');\n+      }\n+    } catch (error) {\n+      console.error('라커 가격 설정 실패:', error);\n+      alert('라커 가격 설정 중 오류가 발생했습니다.');\n+    }\n   };\n \n   const formatPrice = (price: number): string => {\n     return new Intl.NumberFormat('ko-KR').format(price) + '원';\n@@ -577,9 +570,9 @@\n               onChange={(e) => setAddCount(parseInt(e.target.value) || 1)}\n               placeholder=\"추가 개수\"\n             />\n             <span style={{ fontSize: AppTextStyles.body2.fontSize, color: AppColors.onSurface }}>\n-              현재 라커 가격: {formatPrice(getBranchLockerPrice(selectedBranch))}\n+              현재 라커 가격: {formatPrice(getCurrentBranchLockerPrice())}\n             </span>\n           </ActionSection>\n         )}\n \n@@ -594,9 +587,9 @@\n               <LockerStatus $status={locker.status}>\n                 {getStatusText(locker.status)}\n               </LockerStatus>\n               <LockerPrice>\n-                {formatPrice(getBranchLockerPrice(locker.branchId))}\n+                {formatPrice(getCurrentBranchLockerPrice())}\n               </LockerPrice>\n             </LockerItem>\n           ))}\n         </LockerGrid>\n@@ -612,14 +605,14 @@\n               <PriceInput\n                 type=\"number\"\n                 min=\"0\"\n                 step=\"1000\"\n-                defaultValue={getBranchLockerPrice(selectedBranch)}\n+                defaultValue={getCurrentBranchLockerPrice()}\n                 placeholder=\"가격을 입력하세요\"\n                 id=\"branchPriceInput\"\n               />\n               <span style={{ fontSize: AppTextStyles.label2.fontSize, color: AppColors.onInput1 }}>\n-                현재 가격: {formatPrice(getBranchLockerPrice(selectedBranch))}\n+                현재 가격: {formatPrice(getCurrentBranchLockerPrice())}\n               </span>\n             </PriceInputGroup>\n             <ModalButtons>\n               <SecondaryButton onClick={() => setIsPriceSettingModalOpen(false)}>\n@@ -643,9 +636,9 @@\n           <ModalContent>\n             <ModalTitle>라커 추가</ModalTitle>\n             <p>추가할 라커 개수: {addCount}개</p>\n             <p>번호: {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + 1}번부터</p>\n-            <p>라커 가격: {formatPrice(getBranchLockerPrice(selectedBranch))}</p>\n+            <p>라커 가격: {formatPrice(getCurrentBranchLockerPrice())}</p>\n             <ModalButtons>\n               <SecondaryButton onClick={() => setIsAddModalOpen(false)}>\n                 취소\n               </SecondaryButton>\n@@ -660,9 +653,9 @@\n         <Modal $isOpen={!!selectedLocker}>\n           <ModalContent>\n             <ModalTitle>라커 {selectedLocker?.number}번</ModalTitle>\n             <p>상태: {selectedLocker ? getStatusText(selectedLocker.status) : ''}</p>\n-            <p>가격: {selectedLocker ? formatPrice(getBranchLockerPrice(selectedLocker.branchId)) : ''}</p>\n+            <p>가격: {formatPrice(getCurrentBranchLockerPrice())}</p>\n             {selectedLocker?.userId && (\n               <p>사용자: {selectedLocker.userId}</p>\n             )}\n             <ModalButtons>\n"
                },
                {
                    "date": 1761376897636,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,23 +62,8 @@\n     background-color: ${AppColors.primary + '10'};\n   }\n `;\n \n-const Input = styled.input`\n-  padding: 8px 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  background-color: ${AppColors.surface};\n-  color: ${AppColors.onSurface};\n-  font-size: ${AppTextStyles.body2.fontSize};\n-  width: 100px;\n-\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n const Modal = styled.div<{ $isOpen: boolean }>`\n   position: fixed;\n   top: 0;\n   left: 0;\n@@ -119,8 +104,15 @@\n   margin-bottom: 24px;\n   align-items: center;\n `;\n \n+const LegendColor = styled.div<{ $color: string }>`\n+  width: 16px;\n+  height: 16px;\n+  border-radius: 4px;\n+  background-color: ${props => props.$color};\n+`;\n+\n const FilterLabel = styled.label`\n   font-size: ${AppTextStyles.body2.fontSize};\n   color: ${AppColors.onSurface};\n   font-weight: 500;\n@@ -204,27 +196,8 @@\n   }};\n   font-weight: 500;\n `;\n \n-const StatusLegend = styled.div`\n-  display: flex;\n-  gap: 24px;\n-  align-items: center;\n-`;\n-\n-const LegendItem = styled.div`\n-  display: flex;\n-  align-items: center;\n-  gap: 8px;\n-`;\n-\n-const LegendColor = styled.div<{ $color: string }>`\n-  width: 16px;\n-  height: 16px;\n-  border-radius: 4px;\n-  background-color: ${props => props.$color};\n-`;\n-\n const LockerPrice = styled.div`\n   font-size: ${AppTextStyles.label2.fontSize};\n   color: ${AppColors.primary};\n   font-weight: 600;\n@@ -264,11 +237,29 @@\n     border-color: ${AppColors.primary};\n   }\n `;\n \n-const LegendText = styled.span`\n+const StatNumber = styled.span`\n+  color: ${AppColors.primary};\n+  font-weight: 600;\n+`;\n+\n+const StatusStats = styled.div`\n+  display: flex;\n+  gap: 24px;\n+  align-items: center;\n+  background-color: ${AppColors.surface};\n+  padding: 12px 16px;\n+  border-radius: 8px;\n+  border: 1px solid ${AppColors.borderLight};\n+`;\n+\n+const StatItem = styled.div`\n+  display: flex;\n+  align-items: center;\n+  gap: 8px;\n   font-size: ${AppTextStyles.body2.fontSize};\n-  color: ${AppColors.onSurface};\n+  font-weight: 500;\n `;\n \n // 라커 타입 정의\n interface Locker {\n@@ -405,8 +396,19 @@\n   };\n \n   const currentBranchLockers = lockers.filter(locker => locker.branchId === selectedBranch);\n \n+  // 상태별 통계 계산\n+  const getLockerStats = () => {\n+    const total = currentBranchLockers.length;\n+    const available = currentBranchLockers.filter(l => l.status === 'available').length;\n+    const occupied = currentBranchLockers.filter(l => l.status === 'occupied').length;\n+    const maintenance = currentBranchLockers.filter(l => l.status === 'maintenance').length;\n+    const pending = currentBranchLockers.filter(l => l.status === 'pending').length;\n+    \n+    return { total, available, occupied, maintenance, pending };\n+  };\n+\n   const getStatusText = (status: string) => {\n     switch (status) {\n       case 'available':\n         return '사용가능';\n@@ -484,8 +486,18 @@\n     }\n     setIsPriceSettingModalOpen(true);\n   };\n \n+  const handleAddModalOpen = () => {\n+    // 권한 확인\n+    if (!canEditBranch(selectedBranch)) {\n+      alert('라커 추가 권한이 없습니다.');\n+      return;\n+    }\n+    setAddCount(1); // 모달 열 때 수량 초기화\n+    setIsAddModalOpen(true);\n+  };\n+\n   const handlePriceSettingUpdate = async (newPrice: number) => {\n     try {\n       const success = await dbManager.updateLockerPrice(selectedBranch, newPrice);\n       if (success) {\n@@ -533,44 +545,47 @@\n               inModal={false}\n             />\n           </div>\n \n-          <StatusLegend>\n-            <LegendItem>\n-              <LegendColor $color={AppColors.success} />\n-              <LegendText>사용가능</LegendText>\n-            </LegendItem>\n-            <LegendItem>\n-              <LegendColor $color={AppColors.error} />\n-              <LegendText>사용중</LegendText>\n-            </LegendItem>\n-            <LegendItem>\n-              <LegendColor $color={AppColors.warning} />\n-              <LegendText>점검중</LegendText>\n-            </LegendItem>\n-            <LegendItem>\n-              <LegendColor $color={AppColors.info} />\n-              <LegendText>승인요청</LegendText>\n-            </LegendItem>\n-          </StatusLegend>\n+          {/* 상태별 통계 표시 */}\n+          {selectedBranch && (\n+            <StatusStats>\n+              <StatItem>\n+                <span>총 라커:</span>\n+                <StatNumber>{getLockerStats().total}개</StatNumber>\n+              </StatItem>\n+              <StatItem>\n+                <LegendColor $color={AppColors.success} />\n+                <span>사용가능:</span>\n+                <StatNumber>{getLockerStats().available}개</StatNumber>\n+              </StatItem>\n+              <StatItem>\n+                <LegendColor $color={AppColors.error} />\n+                <span>사용중:</span>\n+                <StatNumber>{getLockerStats().occupied}개</StatNumber>\n+              </StatItem>\n+              <StatItem>\n+                <LegendColor $color={AppColors.warning} />\n+                <span>점검중:</span>\n+                <StatNumber>{getLockerStats().maintenance}개</StatNumber>\n+              </StatItem>\n+              <StatItem>\n+                <LegendColor $color={AppColors.info} />\n+                <span>승인요청:</span>\n+                <StatNumber>{getLockerStats().pending}개</StatNumber>\n+              </StatItem>\n+            </StatusStats>\n+          )}\n         </FilterSection>\n \n         {hasPermission && canEditBranch(selectedBranch) && (\n           <ActionSection>\n             <ActionButton onClick={handlePriceSettingOpen}>\n               금액 설정\n             </ActionButton>\n-            <ActionButton onClick={() => setIsAddModalOpen(true)}>\n+            <ActionButton onClick={handleAddModalOpen}>\n               라커 추가\n             </ActionButton>\n-            <Input\n-              type=\"number\"\n-              min=\"1\"\n-              max=\"50\"\n-              value={addCount}\n-              onChange={(e) => setAddCount(parseInt(e.target.value) || 1)}\n-              placeholder=\"추가 개수\"\n-            />\n             <span style={{ fontSize: AppTextStyles.body2.fontSize, color: AppColors.onSurface }}>\n               현재 라커 가격: {formatPrice(getCurrentBranchLockerPrice())}\n             </span>\n           </ActionSection>\n@@ -634,17 +649,30 @@\n         {/* 라커 추가 모달 */}\n         <Modal $isOpen={isAddModalOpen}>\n           <ModalContent>\n             <ModalTitle>라커 추가</ModalTitle>\n-            <p>추가할 라커 개수: {addCount}개</p>\n-            <p>번호: {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + 1}번부터</p>\n+            <PriceInputGroup>\n+              <label>추가할 라커 개수:</label>\n+              <PriceInput\n+                type=\"number\"\n+                min=\"1\"\n+                max=\"50\"\n+                value={addCount}\n+                onChange={(e) => setAddCount(parseInt(e.target.value) || 1)}\n+                placeholder=\"추가할 개수를 입력하세요\"\n+              />\n+            </PriceInputGroup>\n+            <p>번호: {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + 1}번부터 {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + addCount}번까지</p>\n             <p>라커 가격: {formatPrice(getCurrentBranchLockerPrice())}</p>\n             <ModalButtons>\n-              <SecondaryButton onClick={() => setIsAddModalOpen(false)}>\n+              <SecondaryButton onClick={() => {\n+                setIsAddModalOpen(false);\n+                setAddCount(1);\n+              }}>\n                 취소\n               </SecondaryButton>\n               <ActionButton onClick={handleAddLockers}>\n-                추가\n+                {addCount}개 추가\n               </ActionButton>\n             </ModalButtons>\n           </ModalContent>\n         </Modal>\n"
                },
                {
                    "date": 1761377685338,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,12 @@\n import React, { useState } from 'react';\n import styled from 'styled-components';\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n-import { dbManager, type Branch } from '../../../utils/indexedDB';\n+import { dbManager, type Branch, type Member, type Locker } from '../../../utils/indexedDB';\n import CustomDropdown from '../../../components/CustomDropdown';\n import { SYSTEM_ADMIN_CONFIG } from '../../../constants/staffConstants';\n+import Modal from '../../../components/Modal';\n \n const Container = styled.div`\n   padding: 24px;\n   background-color: ${AppColors.surface};\n@@ -62,9 +63,9 @@\n     background-color: ${AppColors.primary + '10'};\n   }\n `;\n \n-const Modal = styled.div<{ $isOpen: boolean }>`\n+const ModalOverlay = styled.div<{ $isOpen: boolean }>`\n   position: fixed;\n   top: 0;\n   left: 0;\n   right: 0;\n@@ -260,17 +261,183 @@\n   font-size: ${AppTextStyles.body2.fontSize};\n   font-weight: 500;\n `;\n \n-// 라커 타입 정의\n-interface Locker {\n-  id: number;\n-  number: string;\n-  status: 'available' | 'occupied' | 'maintenance' | 'pending';\n-  branchId: string;\n-  userId?: string;\n-}\n+// 라커 배정 모달 스타일\n+const AssignmentModalContainer = styled.div`\n+  display: flex;\n+  gap: 24px;\n+  height: 600px;\n+  min-width: 900px;\n+  width: 100%;\n+  overflow: hidden;\n+`;\n \n+const LeftPanel = styled.div`\n+  flex: 1;\n+  border-right: 1px solid ${AppColors.borderLight};\n+  padding-right: 24px;\n+  min-width: 0;\n+  display: flex;\n+  flex-direction: column;\n+`;\n+\n+const RightPanel = styled.div`\n+  flex: 1;\n+  padding-left: 24px;\n+  min-width: 0;\n+  display: flex;\n+  flex-direction: column;\n+`;\n+\n+const PanelTitle = styled.h3`\n+  font-size: ${AppTextStyles.title3.fontSize};\n+  font-weight: 600;\n+  margin-bottom: 16px;\n+  color: ${AppColors.onBackground};\n+  border-bottom: 2px solid ${AppColors.primary};\n+  padding-bottom: 8px;\n+`;\n+\n+const SearchInput = styled.input`\n+  width: 100%;\n+  padding: 12px 16px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  margin-bottom: 16px;\n+  box-sizing: border-box;\n+  \n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+    box-shadow: 0 0 0 2px ${AppColors.primary}20;\n+  }\n+`;\n+\n+const SearchResults = styled.div`\n+  flex: 1;\n+  overflow-y: auto;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  width: 100%;\n+  box-sizing: border-box;\n+  min-height: 0;\n+`;\n+\n+const MemberItem = styled.div<{ $selected: boolean }>`\n+  padding: 12px 16px;\n+  border-bottom: 1px solid ${AppColors.borderLight};\n+  cursor: pointer;\n+  transition: all 0.2s;\n+  background: ${props => props.$selected ? AppColors.primary : 'transparent'};\n+  color: ${props => props.$selected ? AppColors.onPrimary : AppColors.onSurface};\n+  \n+  &:hover {\n+    background: ${props => props.$selected ? AppColors.primary : `${AppColors.primary}10`};\n+  }\n+  \n+  &:last-child {\n+    border-bottom: none;\n+  }\n+`;\n+\n+const MemberName = styled.div`\n+  font-weight: 600;\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  margin-bottom: 4px;\n+`;\n+\n+const MemberInfo = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  opacity: 0.8;\n+  line-height: 1.4;\n+`;\n+\n+const SelectedMemberCard = styled.div`\n+  background: ${AppColors.surface};\n+  border: 2px solid ${AppColors.primary};\n+  border-radius: 12px;\n+  padding: 16px;\n+  margin-bottom: 16px;\n+  width: 100%;\n+  box-sizing: border-box;\n+`;\n+\n+const SelectedMemberName = styled.div`\n+  font-size: ${AppTextStyles.title3.fontSize};\n+  font-weight: 700;\n+  color: ${AppColors.primary};\n+  margin-bottom: 8px;\n+`;\n+\n+const SelectedMemberDetails = styled.div`\n+  display: grid;\n+  grid-template-columns: 1fr 1fr;\n+  gap: 8px;\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+`;\n+\n+const FormGroup = styled.div`\n+  margin-bottom: 16px;\n+`;\n+\n+const FormLabel = styled.label`\n+  display: block;\n+  font-size: ${AppTextStyles.body2.fontSize};\n+  font-weight: 500;\n+  color: ${AppColors.onSurface};\n+  margin-bottom: 8px;\n+`;\n+\n+const Select = styled.select`\n+  width: 100%;\n+  padding: 8px 12px;\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 6px;\n+  background-color: ${AppColors.surface};\n+  color: ${AppColors.onSurface};\n+  font-size: ${AppTextStyles.body2.fontSize};\n+\n+  &:focus {\n+    outline: none;\n+    border-color: ${AppColors.primary};\n+  }\n+`;\n+\n+const AmountDisplay = styled.div`\n+  background: ${AppColors.surface};\n+  border: 1px solid ${AppColors.borderLight};\n+  border-radius: 8px;\n+  padding: 12px;\n+  margin: 16px 0;\n+  text-align: center;\n+`;\n+\n+const AmountText = styled.div`\n+  font-size: ${AppTextStyles.body1.fontSize};\n+  color: ${AppColors.onSurface};\n+  margin-bottom: 4px;\n+`;\n+\n+const AmountValue = styled.div`\n+  font-size: ${AppTextStyles.title2.fontSize};\n+  font-weight: 600;\n+  color: ${AppColors.primary};\n+`;\n+\n+const WarningText = styled.div`\n+  background: #fff3cd;\n+  border: 1px solid #ffeaa7;\n+  border-radius: 8px;\n+  padding: 12px;\n+  margin: 16px 0;\n+  color: #856404;\n+  font-size: 14px;\n+  text-align: center;\n+`;\n+\n // 사용자 정보 타입\n interface UserInfo {\n   id: string;\n   name: string;\n@@ -289,8 +456,17 @@\n   const [isPriceSettingModalOpen, setIsPriceSettingModalOpen] = useState(false);\n   const [currentUserInfo, setCurrentUserInfo] = useState<UserInfo | null>(null);\n   const [hasPermission, setHasPermission] = useState(false);\n \n+  // 라커 배정 관련 상태\n+  const [isAssignmentModalOpen, setIsAssignmentModalOpen] = useState(false);\n+  const [selectedLockerForAssignment, setSelectedLockerForAssignment] = useState<Locker | null>(null);\n+  const [searchQuery, setSearchQuery] = useState('');\n+  const [searchResults, setSearchResults] = useState<Member[]>([]);\n+  const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [selectedMonths, setSelectedMonths] = useState(1);\n+  const [paymentMethod, setPaymentMethod] = useState('card');\n+\n   // 현재 선택된 지점의 라커 가격을 동기화하여 가져오기\n   const getCurrentBranchLockerPrice = (): number => {\n     if (!selectedBranch) return 5000;\n     const branch = branches.find(b => b.id === selectedBranch);\n@@ -362,14 +538,20 @@\n       console.error('지점 데이터 로드 실패:', error);\n     }\n   };\n \n-  // 라커 데이터 로드 (더미 데이터 제거, 실제 저장된 라커만 로드)\n+  // 라커 데이터 로드\n   const loadLockers = async () => {\n     try {\n-      // 실제 저장된 라커 데이터가 있다면 로드\n-      // 현재는 빈 배열로 시작 (더미 데이터 제거)\n-      setLockers([]);\n+      if (!selectedBranch) {\n+        setLockers([]);\n+        return;\n+      }\n+      \n+      console.log('라커 데이터 로딩 시작:', selectedBranch);\n+      const branchLockers = await dbManager.getLockersByBranch(selectedBranch);\n+      console.log('로드된 라커 데이터:', branchLockers);\n+      setLockers(branchLockers);\n     } catch (error) {\n       console.error('라커 데이터 로드 실패:', error);\n       setLockers([]);\n     }\n@@ -385,8 +567,15 @@\n     \n     initData();\n   }, []); // eslint-disable-line react-hooks/exhaustive-deps\n \n+  // 지점 변경 시 라커 데이터 다시 로드\n+  React.useEffect(() => {\n+    if (selectedBranch) {\n+      loadLockers();\n+    }\n+  }, [selectedBranch]); // eslint-disable-line react-hooks/exhaustive-deps\n+\n   // 지점 옵션 변환 함수\n   const getBranchOptions = () => {\n     return branches.map(branch => ({\n       value: branch.id,\n@@ -422,63 +611,212 @@\n         return '알 수 없음';\n     }\n   };\n \n-  const handleAddLockers = () => {\n+  const handleAddLockers = async () => {\n     // 권한 확인\n     if (!canEditBranch(selectedBranch)) {\n       alert('라커 추가 권한이 없습니다.');\n       return;\n     }\n \n-    const maxNumber = Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0);\n-    const newLockers: Locker[] = [];\n-    \n-    for (let i = 1; i <= addCount; i++) {\n-      const newNumber = maxNumber + i;\n-      newLockers.push({\n-        id: parseInt(`${selectedBranch.slice(-1)}${newNumber.toString().padStart(3, '0')}`),\n-        number: newNumber.toString(),\n-        status: 'available',\n-        branchId: selectedBranch\n-      });\n+    try {\n+      const selectedBranchData = branches.find(b => b.id === selectedBranch);\n+      if (!selectedBranchData) {\n+        alert('지점 정보를 찾을 수 없습니다.');\n+        return;\n+      }\n+\n+      const maxNumber = Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0);\n+      const newLockersData: Omit<Locker, 'id' | 'createdAt' | 'updatedAt'>[] = [];\n+      \n+      for (let i = 1; i <= addCount; i++) {\n+        const newNumber = (maxNumber + i).toString();\n+        newLockersData.push({\n+          number: newNumber,\n+          status: 'available',\n+          branchId: selectedBranch,\n+          branchName: selectedBranchData.name,\n+          isActive: true\n+        });\n+      }\n+      \n+      console.log('라커 추가 시작:', newLockersData);\n+      const addedLockers = await dbManager.addMultipleLockers(newLockersData);\n+      console.log('라커 추가 완료:', addedLockers);\n+      \n+      // 라커 목록 새로고침\n+      await loadLockers();\n+      \n+      setIsAddModalOpen(false);\n+      setAddCount(1);\n+      \n+      alert(`${addCount}개의 라커가 성공적으로 추가되었습니다.`);\n+    } catch (error) {\n+      console.error('라커 추가 실패:', error);\n+      alert('라커 추가 중 오류가 발생했습니다.');\n     }\n-    \n-    setLockers(prev => [...prev, ...newLockers]);\n-    setIsAddModalOpen(false);\n-    setAddCount(1);\n   };\n \n-  const handleToggleMaintenance = (locker: Locker) => {\n+  const handleToggleMaintenance = async (locker: Locker) => {\n     // 권한 확인\n     if (!canEditBranch(locker.branchId)) {\n       alert('라커 상태 변경 권한이 없습니다.');\n       return;\n     }\n \n-    setLockers(prev => prev.map(l => \n-      l.id === locker.id \n-        ? { ...l, status: l.status === 'maintenance' ? 'available' : 'maintenance' }\n-        : l\n-    ));\n+    try {\n+      const newStatus = locker.status === 'maintenance' ? 'available' : 'maintenance';\n+      await dbManager.updateLocker(locker.id, { status: newStatus });\n+      \n+      // 라커 목록 새로고침\n+      await loadLockers();\n+      \n+      alert(`라커 ${locker.number}번이 ${newStatus === 'maintenance' ? '점검중' : '사용가능'} 상태로 변경되었습니다.`);\n+    } catch (error) {\n+      console.error('라커 상태 변경 실패:', error);\n+      alert('라커 상태 변경 중 오류가 발생했습니다.');\n+    }\n   };\n \n-  const handleDeleteLocker = (locker: Locker) => {\n+  const handleDeleteLocker = async (locker: Locker) => {\n     // 권한 확인\n     if (!canEditBranch(locker.branchId)) {\n       alert('라커 삭제 권한이 없습니다.');\n       return;\n     }\n \n     if (window.confirm(`라커 ${locker.number}번을 삭제하시겠습니까?`)) {\n-      setLockers(prev => prev.filter(l => l.id !== locker.id));\n+      try {\n+        await dbManager.deleteLocker(locker.id);\n+        \n+        // 라커 목록 새로고침\n+        await loadLockers();\n+        \n+        alert(`라커 ${locker.number}번이 삭제되었습니다.`);\n+      } catch (error) {\n+        console.error('라커 삭제 실패:', error);\n+        alert('라커 삭제 중 오류가 발생했습니다.');\n+      }\n     }\n   };\n \n   const handleLockerClick = (locker: Locker) => {\n-    setSelectedLocker(locker);\n+    // 사용 가능한 라커인 경우 배정 모달 열기\n+    if (locker.status === 'available' && hasPermission && canEditBranch(locker.branchId)) {\n+      setSelectedLockerForAssignment(locker);\n+      setIsAssignmentModalOpen(true);\n+      setSelectedMember(null);\n+      setSearchQuery('');\n+      setSearchResults([]);\n+      setSelectedMonths(1);\n+      setPaymentMethod('card');\n+    } else {\n+      // 기존 상세 모달 열기\n+      setSelectedLocker(locker);\n+    }\n   };\n \n+  // 회원 검색 함수\n+  const handleMemberSearch = async (query: string) => {\n+    setSearchQuery(query);\n+    \n+    if (!query.trim()) {\n+      setSearchResults([]);\n+      return;\n+    }\n+\n+    try {\n+      const members = await dbManager.getAllMembers();\n+      const filtered = members.filter(member => \n+        member.isActive && (\n+          member.name.toLowerCase().includes(query.toLowerCase()) ||\n+          member.phone?.includes(query) ||\n+          member.email?.toLowerCase().includes(query.toLowerCase())\n+        )\n+      );\n+      setSearchResults(filtered.slice(0, 10)); // 최대 10개만 표시\n+    } catch (error) {\n+      console.error('회원 검색 실패:', error);\n+      setSearchResults([]);\n+    }\n+  };\n+\n+  // 회원 선택 함수\n+  const handleMemberSelect = (member: Member) => {\n+    setSelectedMember(member);\n+    setSearchQuery(member.name);\n+    setSearchResults([]);\n+  };\n+\n+  // 라커 배정 처리 함수\n+  const handleAssignLocker = async () => {\n+    if (!selectedMember || !selectedLockerForAssignment) {\n+      alert('회원과 라커를 선택해주세요.');\n+      return;\n+    }\n+\n+    try {\n+      const monthlyPrice = getCurrentBranchLockerPrice();\n+      const totalAmount = monthlyPrice * selectedMonths;\n+      \n+      // 결제 정보를 결제 이력에 추가\n+      const paymentData = {\n+        memberId: selectedMember.id,\n+        memberName: selectedMember.name,\n+        branchId: selectedLockerForAssignment.branchId,\n+        branchName: selectedLockerForAssignment.branchName,\n+        coach: selectedMember.coach,\n+        coachName: selectedMember.coachName,\n+        products: [{\n+          id: `locker_${selectedLockerForAssignment.id}`,\n+          name: `라커 ${selectedLockerForAssignment.number}번 (${selectedMonths}개월)`,\n+          price: totalAmount,\n+          quantity: 1,\n+          description: `라커 ${selectedLockerForAssignment.number}번 ${selectedMonths}개월 이용`\n+        }],\n+        totalAmount: totalAmount,\n+        paidAmount: totalAmount,\n+        unpaidAmount: 0,\n+        paymentStatus: 'completed' as const,\n+        paymentMethod: paymentMethod,\n+        paymentDate: new Date(),\n+        paymentType: 'asset' as const,\n+        memo: `라커 ${selectedLockerForAssignment.number}번 배정`\n+      };\n+\n+      // 결제 정보 저장\n+      const paymentId = await dbManager.addPayment(paymentData);\n+      console.log('결제 정보 저장 완료:', paymentId);\n+\n+      // 라커 배정\n+      await dbManager.assignLockerToUser(\n+        selectedLockerForAssignment.id,\n+        selectedMember.id,\n+        selectedMember.name,\n+        selectedMonths,\n+        paymentId\n+      );\n+\n+      // 라커 목록 새로고침\n+      await loadLockers();\n+\n+      setIsAssignmentModalOpen(false);\n+      setSelectedLockerForAssignment(null);\n+      setSelectedMember(null);\n+      \n+      alert(`라커 ${selectedLockerForAssignment.number}번이 ${selectedMember.name}님에게 배정되었습니다.`);\n+    } catch (error) {\n+      console.error('라커 배정 실패:', error);\n+      alert('라커 배정 중 오류가 발생했습니다.');\n+    }\n+  };\n+\n+  // 총 금액 계산\n+  const getTotalAmount = () => {\n+    return getCurrentBranchLockerPrice() * selectedMonths;\n+  };\n+\n   const handlePriceSettingOpen = () => {\n     // 권한 확인\n     if (!canEditBranch(selectedBranch)) {\n       alert('라커 가격 설정 권한이 없습니다.');\n@@ -609,9 +947,9 @@\n           ))}\n         </LockerGrid>\n \n         {/* 지점별 라커 가격 설정 모달 */}\n-        <Modal $isOpen={isPriceSettingModalOpen}>\n+        <ModalOverlay $isOpen={isPriceSettingModalOpen}>\n           <ModalContent>\n             <ModalTitle>\n               {branches.find(b => b.id === selectedBranch)?.name} 라커 가격 설정\n             </ModalTitle>\n@@ -643,12 +981,12 @@\n                 설정\n               </ActionButton>\n             </ModalButtons>\n           </ModalContent>\n-        </Modal>\n+        </ModalOverlay>\n \n         {/* 라커 추가 모달 */}\n-        <Modal $isOpen={isAddModalOpen}>\n+        <ModalOverlay $isOpen={isAddModalOpen}>\n           <ModalContent>\n             <ModalTitle>라커 추가</ModalTitle>\n             <PriceInputGroup>\n               <label>추가할 라커 개수:</label>\n@@ -674,18 +1012,189 @@\n                 {addCount}개 추가\n               </ActionButton>\n             </ModalButtons>\n           </ModalContent>\n-        </Modal>\n+        </ModalOverlay>\n \n+        {/* 라커 배정 모달 */}\n+        <Modal\n+          isOpen={isAssignmentModalOpen}\n+          onClose={() => {\n+            setIsAssignmentModalOpen(false);\n+            setSelectedLockerForAssignment(null);\n+            setSelectedMember(null);\n+            setSearchQuery('');\n+            setSearchResults([]);\n+          }}\n+          width=\"min(95vw, 1000px)\"\n+          header={`라커 ${selectedLockerForAssignment?.number}번 배정`}\n+          body={\n+            <AssignmentModalContainer>\n+              <LeftPanel>\n+                <PanelTitle>회원 검색 및 선택</PanelTitle>\n+                \n+                {!selectedMember ? (\n+                  <>\n+                    <SearchInput\n+                      type=\"text\"\n+                      placeholder=\"회원명, 전화번호, 이메일로 검색...\"\n+                      value={searchQuery}\n+                      onChange={(e) => handleMemberSearch(e.target.value)}\n+                    />\n+                    \n+                    <SearchResults>\n+                      {searchResults.map((member) => (\n+                        <MemberItem\n+                          key={member.id}\n+                          $selected={false}\n+                          onClick={() => handleMemberSelect(member)}\n+                        >\n+                          <MemberName>{member.name}</MemberName>\n+                          <MemberInfo>\n+                            {member.phone && <div>전화: {member.phone}</div>}\n+                            {member.email && <div>이메일: {member.email}</div>}\n+                            {member.birth && <div>생년월일: {member.birth}</div>}\n+                          </MemberInfo>\n+                        </MemberItem>\n+                      ))}\n+                      \n+                      {searchQuery && searchResults.length === 0 && (\n+                        <div style={{ padding: '20px', textAlign: 'center', color: AppColors.onInput1 }}>\n+                          검색 결과가 없습니다.\n+                        </div>\n+                      )}\n+                    </SearchResults>\n+                  </>\n+                ) : (\n+                  <SelectedMemberCard>\n+                    <SelectedMemberName>\n+                      {selectedMember.name}\n+                      <button \n+                        onClick={() => {\n+                          setSelectedMember(null);\n+                          setSearchQuery('');\n+                          setSearchResults([]);\n+                        }}\n+                        style={{ \n+                          float: 'right', \n+                          background: 'none', \n+                          border: 'none', \n+                          fontSize: '14px', \n+                          cursor: 'pointer',\n+                          color: AppColors.primary\n+                        }}\n+                      >\n+                        변경\n+                      </button>\n+                    </SelectedMemberName>\n+                    <SelectedMemberDetails>\n+                      {selectedMember.phone && <div>전화: {selectedMember.phone}</div>}\n+                      {selectedMember.email && <div>이메일: {selectedMember.email}</div>}\n+                      {selectedMember.birth && <div>생년월일: {selectedMember.birth}</div>}\n+                      {selectedMember.address && <div>주소: {selectedMember.address}</div>}\n+                    </SelectedMemberDetails>\n+                  </SelectedMemberCard>\n+                )}\n+              </LeftPanel>\n+              \n+              <RightPanel>\n+                <PanelTitle>라커 배정 정보</PanelTitle>\n+                \n+                {!selectedMember ? (\n+                  <WarningText>\n+                    먼저 왼쪽에서 회원을 선택해주세요.\n+                  </WarningText>\n+                ) : (\n+                  <>\n+                    <FormGroup>\n+                      <FormLabel>라커 번호</FormLabel>\n+                      <PriceInput\n+                        type=\"text\"\n+                        value={selectedLockerForAssignment?.number || ''}\n+                        readOnly\n+                        style={{ backgroundColor: AppColors.borderLight }}\n+                      />\n+                    </FormGroup>\n+\n+                    <FormGroup>\n+                      <FormLabel>이용 기간</FormLabel>\n+                      <Select\n+                        value={selectedMonths}\n+                        onChange={(e) => setSelectedMonths(parseInt(e.target.value))}\n+                      >\n+                        <option value={1}>1개월</option>\n+                        <option value={2}>2개월</option>\n+                        <option value={3}>3개월</option>\n+                        <option value={4}>4개월</option>\n+                        <option value={5}>5개월</option>\n+                        <option value={6}>6개월</option>\n+                        <option value={12}>12개월</option>\n+                      </Select>\n+                    </FormGroup>\n+\n+                    <FormGroup>\n+                      <FormLabel>결제 방법</FormLabel>\n+                      <Select\n+                        value={paymentMethod}\n+                        onChange={(e) => setPaymentMethod(e.target.value)}\n+                      >\n+                        <option value=\"card\">카드</option>\n+                        <option value=\"cash\">현금</option>\n+                        <option value=\"transfer\">계좌이체</option>\n+                      </Select>\n+                    </FormGroup>\n+\n+                    <AmountDisplay>\n+                      <AmountText>총 결제 금액</AmountText>\n+                      <AmountValue>{formatPrice(getTotalAmount())}</AmountValue>\n+                      <div style={{ fontSize: AppTextStyles.label2.fontSize, color: AppColors.onInput1, marginTop: '8px' }}>\n+                        월 {formatPrice(getCurrentBranchLockerPrice())} × {selectedMonths}개월\n+                      </div>\n+                    </AmountDisplay>\n+\n+                    <div style={{ fontSize: AppTextStyles.body3.fontSize, color: AppColors.onInput1 }}>\n+                      <div>시작일: {new Date().toLocaleDateString('ko-KR')}</div>\n+                      <div>종료일: {new Date(Date.now() + selectedMonths * 30 * 24 * 60 * 60 * 1000).toLocaleDateString('ko-KR')}</div>\n+                    </div>\n+                  </>\n+                )}\n+              </RightPanel>\n+            </AssignmentModalContainer>\n+          }\n+          footer={\n+            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px' }}>\n+              <SecondaryButton onClick={() => {\n+                setIsAssignmentModalOpen(false);\n+                setSelectedLockerForAssignment(null);\n+                setSelectedMember(null);\n+                setSearchQuery('');\n+                setSearchResults([]);\n+              }}>\n+                취소\n+              </SecondaryButton>\n+              <ActionButton \n+                onClick={handleAssignLocker}\n+                disabled={!selectedMember}\n+              >\n+                라커 배정\n+              </ActionButton>\n+            </div>\n+          }\n+        />\n+\n         {/* 라커 상세 모달 */}\n-        <Modal $isOpen={!!selectedLocker}>\n+        <ModalOverlay $isOpen={!!selectedLocker}>\n           <ModalContent>\n             <ModalTitle>라커 {selectedLocker?.number}번</ModalTitle>\n             <p>상태: {selectedLocker ? getStatusText(selectedLocker.status) : ''}</p>\n             <p>가격: {formatPrice(getCurrentBranchLockerPrice())}</p>\n-            {selectedLocker?.userId && (\n-              <p>사용자: {selectedLocker.userId}</p>\n+            {selectedLocker?.userName && (\n+              <>\n+                <p>사용자: {selectedLocker.userName}</p>\n+                {selectedLocker.startDate && <p>시작일: {selectedLocker.startDate}</p>}\n+                {selectedLocker.endDate && <p>종료일: {selectedLocker.endDate}</p>}\n+                {selectedLocker.months && <p>이용기간: {selectedLocker.months}개월</p>}\n+              </>\n             )}\n             <ModalButtons>\n               <SecondaryButton onClick={() => setSelectedLocker(null)}>\n                 닫기\n@@ -712,9 +1221,9 @@\n                 </ActionButton>\n               )}\n             </ModalButtons>\n           </ModalContent>\n-        </Modal>\n+        </ModalOverlay>\n       </Content>\n     </Container>\n   );\n };\n"
                },
                {
                    "date": 1761377906221,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,7 @@\n import React, { useState } from 'react';\n import styled from 'styled-components';\n+import { toast } from 'react-toastify';\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n import { dbManager, type Branch, type Member, type Locker } from '../../../utils/indexedDB';\n import CustomDropdown from '../../../components/CustomDropdown';\n@@ -614,16 +615,16 @@\n \n   const handleAddLockers = async () => {\n     // 권한 확인\n     if (!canEditBranch(selectedBranch)) {\n-      alert('라커 추가 권한이 없습니다.');\n+      toast.error('라커 추가 권한이 없습니다.');\n       return;\n     }\n \n     try {\n       const selectedBranchData = branches.find(b => b.id === selectedBranch);\n       if (!selectedBranchData) {\n-        alert('지점 정보를 찾을 수 없습니다.');\n+        toast.error('지점 정보를 찾을 수 없습니다.');\n         return;\n       }\n \n       const maxNumber = Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0);\n@@ -649,19 +650,19 @@\n       \n       setIsAddModalOpen(false);\n       setAddCount(1);\n       \n-      alert(`${addCount}개의 라커가 성공적으로 추가되었습니다.`);\n+      toast.success(`${addCount}개의 라커가 성공적으로 추가되었습니다.`);\n     } catch (error) {\n       console.error('라커 추가 실패:', error);\n-      alert('라커 추가 중 오류가 발생했습니다.');\n+      toast.error('라커 추가 중 오류가 발생했습니다.');\n     }\n   };\n \n   const handleToggleMaintenance = async (locker: Locker) => {\n     // 권한 확인\n     if (!canEditBranch(locker.branchId)) {\n-      alert('라커 상태 변경 권한이 없습니다.');\n+      toast.error('라커 상태 변경 권한이 없습니다.');\n       return;\n     }\n \n     try {\n@@ -670,19 +671,19 @@\n       \n       // 라커 목록 새로고침\n       await loadLockers();\n       \n-      alert(`라커 ${locker.number}번이 ${newStatus === 'maintenance' ? '점검중' : '사용가능'} 상태로 변경되었습니다.`);\n+      toast.success(`라커 ${locker.number}번이 ${newStatus === 'maintenance' ? '점검중' : '사용가능'} 상태로 변경되었습니다.`);\n     } catch (error) {\n       console.error('라커 상태 변경 실패:', error);\n-      alert('라커 상태 변경 중 오류가 발생했습니다.');\n+      toast.error('라커 상태 변경 중 오류가 발생했습니다.');\n     }\n   };\n \n   const handleDeleteLocker = async (locker: Locker) => {\n     // 권한 확인\n     if (!canEditBranch(locker.branchId)) {\n-      alert('라커 삭제 권한이 없습니다.');\n+      toast.error('라커 삭제 권한이 없습니다.');\n       return;\n     }\n \n     if (window.confirm(`라커 ${locker.number}번을 삭제하시겠습니까?`)) {\n@@ -691,12 +692,12 @@\n         \n         // 라커 목록 새로고침\n         await loadLockers();\n         \n-        alert(`라커 ${locker.number}번이 삭제되었습니다.`);\n+        toast.success(`라커 ${locker.number}번이 삭제되었습니다.`);\n       } catch (error) {\n         console.error('라커 삭제 실패:', error);\n-        alert('라커 삭제 중 오류가 발생했습니다.');\n+        toast.error('라커 삭제 중 오류가 발생했습니다.');\n       }\n     }\n   };\n \n@@ -750,9 +751,9 @@\n \n   // 라커 배정 처리 함수\n   const handleAssignLocker = async () => {\n     if (!selectedMember || !selectedLockerForAssignment) {\n-      alert('회원과 라커를 선택해주세요.');\n+      toast.warning('회원과 라커를 선택해주세요.');\n       return;\n     }\n \n     try {\n@@ -803,12 +804,12 @@\n       setIsAssignmentModalOpen(false);\n       setSelectedLockerForAssignment(null);\n       setSelectedMember(null);\n       \n-      alert(`라커 ${selectedLockerForAssignment.number}번이 ${selectedMember.name}님에게 배정되었습니다.`);\n+      toast.success(`라커 ${selectedLockerForAssignment.number}번이 ${selectedMember.name}님에게 배정되었습니다.`);\n     } catch (error) {\n       console.error('라커 배정 실패:', error);\n-      alert('라커 배정 중 오류가 발생했습니다.');\n+      toast.error('라커 배정 중 오류가 발생했습니다.');\n     }\n   };\n \n   // 총 금액 계산\n@@ -818,18 +819,18 @@\n \n   const handlePriceSettingOpen = () => {\n     // 권한 확인\n     if (!canEditBranch(selectedBranch)) {\n-      alert('라커 가격 설정 권한이 없습니다.');\n+      toast.error('라커 가격 설정 권한이 없습니다.');\n       return;\n     }\n     setIsPriceSettingModalOpen(true);\n   };\n \n   const handleAddModalOpen = () => {\n     // 권한 확인\n     if (!canEditBranch(selectedBranch)) {\n-      alert('라커 추가 권한이 없습니다.');\n+      toast.error('라커 추가 권한이 없습니다.');\n       return;\n     }\n     setAddCount(1); // 모달 열 때 수량 초기화\n     setIsAddModalOpen(true);\n@@ -841,14 +842,15 @@\n       if (success) {\n         // 지점 데이터를 다시 로드하여 UI 업데이트\n         await loadBranches();\n         setIsPriceSettingModalOpen(false);\n+        toast.success('라커 가격이 성공적으로 설정되었습니다.');\n       } else {\n-        alert('라커 가격 설정에 실패했습니다.');\n+        toast.error('라커 가격 설정에 실패했습니다.');\n       }\n     } catch (error) {\n       console.error('라커 가격 설정 실패:', error);\n-      alert('라커 가격 설정 중 오류가 발생했습니다.');\n+      toast.error('라커 가격 설정 중 오류가 발생했습니다.');\n     }\n   };\n \n   const formatPrice = (price: number): string => {\n"
                },
                {
                    "date": 1761377971127,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -584,9 +584,11 @@\n       description: branch.address\n     }));\n   };\n \n-  const currentBranchLockers = lockers.filter(locker => locker.branchId === selectedBranch);\n+  const currentBranchLockers = lockers\n+    .filter(locker => locker.branchId === selectedBranch)\n+    .sort((a, b) => parseInt(a.number) - parseInt(b.number));\n \n   // 상태별 통계 계산\n   const getLockerStats = () => {\n     const total = currentBranchLockers.length;\n"
                },
                {
                    "date": 1761378052182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -411,9 +411,9 @@\n   border: 1px solid ${AppColors.borderLight};\n   border-radius: 8px;\n   padding: 12px;\n   margin: 16px 0;\n-  text-align: center;\n+  text-align: left;\n `;\n \n const AmountText = styled.div`\n   font-size: ${AppTextStyles.body1.fontSize};\n@@ -434,9 +434,9 @@\n   padding: 12px;\n   margin: 16px 0;\n   color: #856404;\n   font-size: 14px;\n-  text-align: center;\n+  text-align: left;\n `;\n \n // 사용자 정보 타입\n interface UserInfo {\n"
                },
                {
                    "date": 1761378168505,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -287,8 +287,9 @@\n   padding-left: 24px;\n   min-width: 0;\n   display: flex;\n   flex-direction: column;\n+  text-align: left;\n `;\n \n const PanelTitle = styled.h3`\n   font-size: ${AppTextStyles.title3.fontSize};\n@@ -1154,9 +1155,9 @@\n                         월 {formatPrice(getCurrentBranchLockerPrice())} × {selectedMonths}개월\n                       </div>\n                     </AmountDisplay>\n \n-                    <div style={{ fontSize: AppTextStyles.body3.fontSize, color: AppColors.onInput1 }}>\n+                    <div style={{ fontSize: AppTextStyles.body3.fontSize, color: AppColors.onInput1, textAlign: 'left' }}>\n                       <div>시작일: {new Date().toLocaleDateString('ko-KR')}</div>\n                       <div>종료일: {new Date(Date.now() + selectedMonths * 30 * 24 * 60 * 60 * 1000).toLocaleDateString('ko-KR')}</div>\n                     </div>\n                   </>\n"
                },
                {
                    "date": 1761378296050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -391,23 +391,8 @@\n   color: ${AppColors.onSurface};\n   margin-bottom: 8px;\n `;\n \n-const Select = styled.select`\n-  width: 100%;\n-  padding: 8px 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  background-color: ${AppColors.surface};\n-  color: ${AppColors.onSurface};\n-  font-size: ${AppTextStyles.body2.fontSize};\n-\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n const AmountDisplay = styled.div`\n   background: ${AppColors.surface};\n   border: 1px solid ${AppColors.borderLight};\n   border-radius: 8px;\n@@ -1121,32 +1106,36 @@\n                     </FormGroup>\n \n                     <FormGroup>\n                       <FormLabel>이용 기간</FormLabel>\n-                      <Select\n-                        value={selectedMonths}\n-                        onChange={(e) => setSelectedMonths(parseInt(e.target.value))}\n-                      >\n-                        <option value={1}>1개월</option>\n-                        <option value={2}>2개월</option>\n-                        <option value={3}>3개월</option>\n-                        <option value={4}>4개월</option>\n-                        <option value={5}>5개월</option>\n-                        <option value={6}>6개월</option>\n-                        <option value={12}>12개월</option>\n-                      </Select>\n+                      <CustomDropdown\n+                        value={selectedMonths.toString()}\n+                        onChange={(value: string) => setSelectedMonths(parseInt(value))}\n+                        options={[\n+                          { value: '1', label: '1개월' },\n+                          { value: '2', label: '2개월' },\n+                          { value: '3', label: '3개월' },\n+                          { value: '4', label: '4개월' },\n+                          { value: '5', label: '5개월' },\n+                          { value: '6', label: '6개월' },\n+                          { value: '12', label: '12개월' }\n+                        ]}\n+                        inModal={true}\n+                      />\n                     </FormGroup>\n \n                     <FormGroup>\n                       <FormLabel>결제 방법</FormLabel>\n-                      <Select\n+                      <CustomDropdown\n                         value={paymentMethod}\n-                        onChange={(e) => setPaymentMethod(e.target.value)}\n-                      >\n-                        <option value=\"card\">카드</option>\n-                        <option value=\"cash\">현금</option>\n-                        <option value=\"transfer\">계좌이체</option>\n-                      </Select>\n+                        onChange={(value: string) => setPaymentMethod(value)}\n+                        options={[\n+                          { value: 'card', label: '카드' },\n+                          { value: 'cash', label: '현금' },\n+                          { value: 'transfer', label: '계좌이체' }\n+                        ]}\n+                        inModal={true}\n+                      />\n                     </FormGroup>\n \n                     <AmountDisplay>\n                       <AmountText>총 결제 금액</AmountText>\n"
                },
                {
                    "date": 1761378612875,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -688,8 +688,30 @@\n       }\n     }\n   };\n \n+  const handleUnassignLocker = async (locker: Locker) => {\n+    // 권한 확인\n+    if (!canEditBranch(locker.branchId)) {\n+      toast.error('라커 해제 권한이 없습니다.');\n+      return;\n+    }\n+\n+    if (window.confirm(`라커 ${locker.number}번의 배정을 해제하시겠습니까?`)) {\n+      try {\n+        await dbManager.unassignLocker(locker.id);\n+        \n+        // 라커 목록 새로고침\n+        await loadLockers();\n+        \n+        toast.success(`라커 ${locker.number}번의 배정이 해제되었습니다.`);\n+      } catch (error) {\n+        console.error('라커 해제 실패:', error);\n+        toast.error('라커 해제 중 오류가 발생했습니다.');\n+      }\n+    }\n+  };\n+\n   const handleLockerClick = (locker: Locker) => {\n     // 사용 가능한 라커인 경우 배정 모달 열기\n     if (locker.status === 'available' && hasPermission && canEditBranch(locker.branchId)) {\n       setSelectedLockerForAssignment(locker);\n@@ -1192,8 +1214,19 @@\n             <ModalButtons>\n               <SecondaryButton onClick={() => setSelectedLocker(null)}>\n                 닫기\n               </SecondaryButton>\n+              {selectedLocker && hasPermission && canEditBranch(selectedLocker.branchId) && selectedLocker.status === 'occupied' && (\n+                <ActionButton \n+                  onClick={() => {\n+                    handleUnassignLocker(selectedLocker);\n+                    setSelectedLocker(null);\n+                  }}\n+                  style={{ backgroundColor: AppColors.warning }}\n+                >\n+                  라커 해제\n+                </ActionButton>\n+              )}\n               {selectedLocker && hasPermission && canEditBranch(selectedLocker.branchId) && selectedLocker.status !== 'occupied' && (\n                 <ActionButton \n                   onClick={() => {\n                     handleToggleMaintenance(selectedLocker);\n"
                },
                {
                    "date": 1761913200146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,15 +121,17 @@\n `;\n \n const LockerGrid = styled.div`\n   display: grid;\n-  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n+  grid-template-columns: repeat(auto-fill, 140px);\n   gap: 16px;\n   margin-bottom: 32px;\n+  justify-content: start;\n `;\n \n const LockerItem = styled.div<{ $status: 'available' | 'occupied' | 'maintenance' | 'pending' }>`\n-  aspect-ratio: 1;\n+  width: 140px;\n+  height: 140px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n@@ -165,8 +167,9 @@\n   cursor: pointer;\n   transition: all 0.2s ease;\n   position: relative;\n   padding: 8px;\n+  box-sizing: border-box;\n \n   &:hover {\n     transform: translateY(-2px);\n     box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n@@ -205,8 +208,28 @@\n   font-weight: 600;\n   margin-top: 2px;\n `;\n \n+const LockerUserInfo = styled.div`\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  color: ${AppColors.onSurface};\n+  text-align: center;\n+  margin-top: 4px;\n+  line-height: 1.2;\n+`;\n+\n+const LockerUserName = styled.div`\n+  font-weight: 600;\n+  color: ${AppColors.error};\n+  font-size: ${AppTextStyles.label1.fontSize};\n+`;\n+\n+const LockerPeriod = styled.div`\n+  font-size: ${AppTextStyles.label2.fontSize};\n+  color: ${AppColors.onInput1};\n+  margin-top: 2px;\n+`;\n+\n const PermissionNotice = styled.div`\n   background-color: ${AppColors.warning + '15'};\n   border: 1px solid ${AppColors.warning};\n   border-radius: 8px;\n@@ -951,11 +974,25 @@\n               <LockerNumber>{locker.number}</LockerNumber>\n               <LockerStatus $status={locker.status}>\n                 {getStatusText(locker.status)}\n               </LockerStatus>\n-              <LockerPrice>\n-                {formatPrice(getCurrentBranchLockerPrice())}\n-              </LockerPrice>\n+              {locker.status === 'occupied' && locker.userName ? (\n+                <LockerUserInfo>\n+                  <LockerUserName>{locker.userName}</LockerUserName>\n+                  {locker.endDate && (\n+                    <LockerPeriod>\n+                      ~{new Date(locker.endDate).toLocaleDateString('ko-KR', { \n+                        month: 'short', \n+                        day: 'numeric' \n+                      })}\n+                    </LockerPeriod>\n+                  )}\n+                </LockerUserInfo>\n+              ) : (\n+                <LockerPrice>\n+                  {formatPrice(getCurrentBranchLockerPrice())}\n+                </LockerPrice>\n+              )}\n             </LockerItem>\n           ))}\n         </LockerGrid>\n \n"
                },
                {
                    "date": 1762068189642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -474,8 +474,14 @@\n   const [searchResults, setSearchResults] = useState<Member[]>([]);\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n   const [selectedMonths, setSelectedMonths] = useState(1);\n   const [paymentMethod, setPaymentMethod] = useState('card');\n+  const [startDate, setStartDate] = useState(new Date().toISOString().split('T')[0]);\n+  const [endDate, setEndDate] = useState(() => {\n+    const date = new Date();\n+    date.setMonth(date.getMonth() + 1);\n+    return date.toISOString().split('T')[0];\n+  });\n \n   // 현재 선택된 지점의 라커 가격을 동기화하여 가져오기\n   const getCurrentBranchLockerPrice = (): number => {\n     if (!selectedBranch) return 5000;\n@@ -743,8 +749,14 @@\n       setSearchQuery('');\n       setSearchResults([]);\n       setSelectedMonths(1);\n       setPaymentMethod('card');\n+      // 시작일과 종료일 초기화\n+      const today = new Date().toISOString().split('T')[0];\n+      setStartDate(today);\n+      const defaultEndDate = new Date();\n+      defaultEndDate.setMonth(defaultEndDate.getMonth() + 1);\n+      setEndDate(defaultEndDate.toISOString().split('T')[0]);\n     } else {\n       // 기존 상세 모달 열기\n       setSelectedLocker(locker);\n     }\n@@ -781,8 +793,26 @@\n     setSearchQuery(member.name);\n     setSearchResults([]);\n   };\n \n+  // 개월 수 변경 시 종료일 자동 계산\n+  const handleMonthsChange = (months: number) => {\n+    setSelectedMonths(months);\n+    const start = new Date(startDate);\n+    const end = new Date(start);\n+    end.setMonth(end.getMonth() + months);\n+    setEndDate(end.toISOString().split('T')[0]);\n+  };\n+\n+  // 시작일 변경 시 종료일 자동 계산\n+  const handleStartDateChange = (date: string) => {\n+    setStartDate(date);\n+    const start = new Date(date);\n+    const end = new Date(start);\n+    end.setMonth(end.getMonth() + selectedMonths);\n+    setEndDate(end.toISOString().split('T')[0]);\n+  };\n+\n   // 라커 배정 처리 함수\n   const handleAssignLocker = async () => {\n     if (!selectedMember || !selectedLockerForAssignment) {\n       toast.warning('회원과 라커를 선택해주세요.');\n@@ -805,30 +835,32 @@\n           id: `locker_${selectedLockerForAssignment.id}`,\n           name: `라커 ${selectedLockerForAssignment.number}번 (${selectedMonths}개월)`,\n           price: totalAmount,\n           quantity: 1,\n-          description: `라커 ${selectedLockerForAssignment.number}번 ${selectedMonths}개월 이용`\n+          description: `라커 ${selectedLockerForAssignment.number}번 ${selectedMonths}개월 이용 (${startDate} ~ ${endDate})`\n         }],\n         totalAmount: totalAmount,\n         paidAmount: totalAmount,\n         unpaidAmount: 0,\n         paymentStatus: 'completed' as const,\n         paymentMethod: paymentMethod,\n         paymentDate: new Date(),\n         paymentType: 'asset' as const,\n-        memo: `라커 ${selectedLockerForAssignment.number}번 배정`\n+        memo: `라커 ${selectedLockerForAssignment.number}번 배정 (${startDate} ~ ${endDate})`\n       };\n \n       // 결제 정보 저장\n       const paymentId = await dbManager.addPayment(paymentData);\n       console.log('결제 정보 저장 완료:', paymentId);\n \n-      // 라커 배정\n-      await dbManager.assignLockerToUser(\n+      // 라커 배정 (사용자 정의 시작일/종료일 사용)\n+      await dbManager.assignLockerToUserWithDates(\n         selectedLockerForAssignment.id,\n         selectedMember.id,\n         selectedMember.name,\n         selectedMonths,\n+        startDate,\n+        endDate,\n         paymentId\n       );\n \n       // 라커 목록 새로고침\n@@ -1167,9 +1199,9 @@\n                     <FormGroup>\n                       <FormLabel>이용 기간</FormLabel>\n                       <CustomDropdown\n                         value={selectedMonths.toString()}\n-                        onChange={(value: string) => setSelectedMonths(parseInt(value))}\n+                        onChange={(value: string) => handleMonthsChange(parseInt(value))}\n                         options={[\n                           { value: '1', label: '1개월' },\n                           { value: '2', label: '2개월' },\n                           { value: '3', label: '3개월' },\n@@ -1182,8 +1214,26 @@\n                       />\n                     </FormGroup>\n \n                     <FormGroup>\n+                      <FormLabel>시작일</FormLabel>\n+                      <PriceInput\n+                        type=\"date\"\n+                        value={startDate}\n+                        onChange={(e) => handleStartDateChange(e.target.value)}\n+                      />\n+                    </FormGroup>\n+\n+                    <FormGroup>\n+                      <FormLabel>종료일</FormLabel>\n+                      <PriceInput\n+                        type=\"date\"\n+                        value={endDate}\n+                        onChange={(e) => setEndDate(e.target.value)}\n+                      />\n+                    </FormGroup>\n+\n+                    <FormGroup>\n                       <FormLabel>결제 방법</FormLabel>\n                       <CustomDropdown\n                         value={paymentMethod}\n                         onChange={(value: string) => setPaymentMethod(value)}\n@@ -1204,10 +1254,13 @@\n                       </div>\n                     </AmountDisplay>\n \n                     <div style={{ fontSize: AppTextStyles.body3.fontSize, color: AppColors.onInput1, textAlign: 'left' }}>\n-                      <div>시작일: {new Date().toLocaleDateString('ko-KR')}</div>\n-                      <div>종료일: {new Date(Date.now() + selectedMonths * 30 * 24 * 60 * 60 * 1000).toLocaleDateString('ko-KR')}</div>\n+                      <div>시작일: {new Date(startDate).toLocaleDateString('ko-KR')}</div>\n+                      <div>종료일: {new Date(endDate).toLocaleDateString('ko-KR')}</div>\n+                      <div style={{ marginTop: '8px', color: AppColors.onInput2 }}>\n+                        총 이용 기간: {Math.ceil((new Date(endDate).getTime() - new Date(startDate).getTime()) / (1000 * 60 * 60 * 24))}일\n+                      </div>\n                     </div>\n                   </>\n                 )}\n               </RightPanel>\n@@ -1220,8 +1273,12 @@\n                 setSelectedLockerForAssignment(null);\n                 setSelectedMember(null);\n                 setSearchQuery('');\n                 setSearchResults([]);\n+                setStartDate(new Date().toISOString().split('T')[0]);\n+                const defaultEndDate = new Date();\n+                defaultEndDate.setMonth(defaultEndDate.getMonth() + 1);\n+                setEndDate(defaultEndDate.toISOString().split('T')[0]);\n               }}>\n                 취소\n               </SecondaryButton>\n               <ActionButton \n"
                },
                {
                    "date": 1762068330529,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n import { AppColors } from '../../../styles/colors';\n import { AppTextStyles } from '../../../styles/textStyles';\n import { dbManager, type Branch, type Member, type Locker } from '../../../utils/indexedDB';\n import CustomDropdown from '../../../components/CustomDropdown';\n+import CustomDateInput from '../../../components/CustomDateInput';\n import { SYSTEM_ADMIN_CONFIG } from '../../../constants/staffConstants';\n import Modal from '../../../components/Modal';\n \n const Container = styled.div`\n@@ -446,8 +447,23 @@\n   font-size: 14px;\n   text-align: left;\n `;\n \n+const FieldRow = styled.div`\n+  display: flex;\n+  gap: 16px;\n+  margin-bottom: 16px;\n+`;\n+\n+const FieldColumn = styled.div`\n+  flex: 1;\n+  display: flex;\n+  flex-direction: column;\n+  gap: 8px;\n+  min-width: 0;\n+  overflow: hidden;\n+`;\n+\n // 사용자 정보 타입\n interface UserInfo {\n   id: string;\n   name: string;\n@@ -1213,25 +1229,28 @@\n                         inModal={true}\n                       />\n                     </FormGroup>\n \n-                    <FormGroup>\n-                      <FormLabel>시작일</FormLabel>\n-                      <PriceInput\n-                        type=\"date\"\n-                        value={startDate}\n-                        onChange={(e) => handleStartDateChange(e.target.value)}\n-                      />\n-                    </FormGroup>\n+                    <FieldRow>\n+                      <FieldColumn>\n+                        <FormLabel>시작일</FormLabel>\n+                        <CustomDateInput\n+                          value={startDate}\n+                          onChange={handleStartDateChange}\n+                          placeholder=\"시작일을 선택하세요\"\n+                        />\n+                      </FieldColumn>\n \n-                    <FormGroup>\n-                      <FormLabel>종료일</FormLabel>\n-                      <PriceInput\n-                        type=\"date\"\n-                        value={endDate}\n-                        onChange={(e) => setEndDate(e.target.value)}\n-                      />\n-                    </FormGroup>\n+                      <FieldColumn>\n+                        <FormLabel>종료일</FormLabel>\n+                        <CustomDateInput\n+                          value={endDate}\n+                          onChange={(value: string) => setEndDate(value)}\n+                          placeholder=\"종료일을 선택하세요\"\n+                          min={startDate}\n+                        />\n+                      </FieldColumn>\n+                    </FieldRow>\n \n                     <FormGroup>\n                       <FormLabel>결제 방법</FormLabel>\n                       <CustomDropdown\n"
                },
                {
                    "date": 1762068408829,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1201,17 +1201,8 @@\n                     먼저 왼쪽에서 회원을 선택해주세요.\n                   </WarningText>\n                 ) : (\n                   <>\n-                    <FormGroup>\n-                      <FormLabel>라커 번호</FormLabel>\n-                      <PriceInput\n-                        type=\"text\"\n-                        value={selectedLockerForAssignment?.number || ''}\n-                        readOnly\n-                        style={{ backgroundColor: AppColors.borderLight }}\n-                      />\n-                    </FormGroup>\n \n                     <FormGroup>\n                       <FormLabel>이용 기간</FormLabel>\n                       <CustomDropdown\n"
                },
                {
                    "date": 1762068831879,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -482,8 +482,18 @@\n   const [isPriceSettingModalOpen, setIsPriceSettingModalOpen] = useState(false);\n   const [currentUserInfo, setCurrentUserInfo] = useState<UserInfo | null>(null);\n   const [hasPermission, setHasPermission] = useState(false);\n \n+  // 라커 수정 관련 상태\n+  const [isEditMode, setIsEditMode] = useState(false);\n+  const [editMember, setEditMember] = useState<Member | null>(null);\n+  const [editStartDate, setEditStartDate] = useState('');\n+  const [editEndDate, setEditEndDate] = useState('');\n+  const [editMonths, setEditMonths] = useState(1);\n+  const [editSearchQuery, setEditSearchQuery] = useState('');\n+  const [editSearchResults, setEditSearchResults] = useState<Member[]>([]);\n+  const [editMemo, setEditMemo] = useState('');\n+\n   // 라커 배정 관련 상태\n   const [isAssignmentModalOpen, setIsAssignmentModalOpen] = useState(false);\n   const [selectedLockerForAssignment, setSelectedLockerForAssignment] = useState<Locker | null>(null);\n   const [searchQuery, setSearchQuery] = useState('');\n@@ -742,9 +752,27 @@\n     }\n \n     if (window.confirm(`라커 ${locker.number}번의 배정을 해제하시겠습니까?`)) {\n       try {\n-        await dbManager.unassignLocker(locker.id);\n+        // 해제 이력 추가\n+        const changeDate = new Date().toLocaleString('ko-KR');\n+        const changedBy = currentUserInfo?.name || 'Unknown';\n+        const unassignMemo = `[${changeDate}] ${changedBy} - 라커 해제\\n` +\n+          `해제 전: ${locker.userName || '없음'} (${locker.startDate || '없음'} ~ ${locker.endDate || '없음'})`;\n+\n+        const existingHistory = locker.changeHistory || [];\n+        const updatedHistory = [...existingHistory, unassignMemo];\n+\n+        await dbManager.updateLocker(locker.id, {\n+          status: 'available',\n+          userId: undefined,\n+          userName: undefined,\n+          startDate: undefined,\n+          endDate: undefined,\n+          months: undefined,\n+          paymentId: undefined,\n+          changeHistory: updatedHistory\n+        });\n         \n         // 라커 목록 새로고침\n         await loadLockers();\n         \n@@ -878,8 +906,23 @@\n         endDate,\n         paymentId\n       );\n \n+      // 배정 이력 추가\n+      const changeDate = new Date().toLocaleString('ko-KR');\n+      const changedBy = currentUserInfo?.name || 'Unknown';\n+      const assignMemo = `[${changeDate}] ${changedBy} - 라커 최초 배정\\n` +\n+        `배정: ${selectedMember.name} (${startDate} ~ ${endDate}, ${selectedMonths}개월)`;\n+\n+      // 라커에 이력 추가\n+      const currentLocker = await dbManager.getLockerById(selectedLockerForAssignment.id);\n+      const existingHistory = currentLocker?.changeHistory || [];\n+      const updatedHistory = [...existingHistory, assignMemo];\n+\n+      await dbManager.updateLocker(selectedLockerForAssignment.id, {\n+        changeHistory: updatedHistory\n+      });\n+\n       // 라커 목록 새로고침\n       await loadLockers();\n \n       setIsAssignmentModalOpen(false);\n@@ -892,8 +935,146 @@\n       toast.error('라커 배정 중 오류가 발생했습니다.');\n     }\n   };\n \n+  // 라커 정보 수정을 위한 헬퍼 함수들\n+  const initializeEditData = async (locker: Locker) => {\n+    if (locker.userId) {\n+      try {\n+        const members = await dbManager.getAllMembers();\n+        const member = members.find(m => m.id === locker.userId);\n+        if (member) {\n+          setEditMember(member);\n+          setEditSearchQuery(member.name);\n+        }\n+      } catch (error) {\n+        console.error('회원 정보 로드 실패:', error);\n+      }\n+    }\n+    \n+    setEditStartDate(locker.startDate || '');\n+    setEditEndDate(locker.endDate || '');\n+    setEditMonths(locker.months || 1);\n+    setEditMemo('');\n+    setEditSearchResults([]);\n+  };\n+\n+  // 수정용 회원 검색\n+  const handleEditMemberSearch = async (query: string) => {\n+    setEditSearchQuery(query);\n+    \n+    if (!query.trim()) {\n+      setEditSearchResults([]);\n+      return;\n+    }\n+\n+    try {\n+      const members = await dbManager.getAllMembers();\n+      const filtered = members.filter(member => \n+        member.isActive && (\n+          member.name.toLowerCase().includes(query.toLowerCase()) ||\n+          member.phone?.includes(query) ||\n+          member.email?.toLowerCase().includes(query.toLowerCase())\n+        )\n+      );\n+      setEditSearchResults(filtered.slice(0, 10));\n+    } catch (error) {\n+      console.error('회원 검색 실패:', error);\n+      setEditSearchResults([]);\n+    }\n+  };\n+\n+  // 수정용 회원 선택\n+  const handleEditMemberSelect = (member: Member) => {\n+    setEditMember(member);\n+    setEditSearchQuery(member.name);\n+    setEditSearchResults([]);\n+  };\n+\n+  // 수정용 개월 수 변경 시 종료일 자동 계산\n+  const handleEditMonthsChange = (months: number) => {\n+    setEditMonths(months);\n+    if (editStartDate) {\n+      const start = new Date(editStartDate);\n+      const end = new Date(start);\n+      end.setMonth(end.getMonth() + months);\n+      setEditEndDate(end.toISOString().split('T')[0]);\n+    }\n+  };\n+\n+  // 수정용 시작일 변경 시 종료일 자동 계산\n+  const handleEditStartDateChange = (date: string) => {\n+    setEditStartDate(date);\n+    const start = new Date(date);\n+    const end = new Date(start);\n+    end.setMonth(end.getMonth() + editMonths);\n+    setEditEndDate(end.toISOString().split('T')[0]);\n+  };\n+\n+  // 라커 정보 수정 처리\n+  const handleUpdateLocker = async () => {\n+    if (!selectedLocker || !editMember) {\n+      toast.warning('필수 정보를 입력해주세요.');\n+      return;\n+    }\n+\n+    if (!editMemo.trim()) {\n+      toast.warning('수정 사유를 입력해주세요.');\n+      return;\n+    }\n+\n+    try {\n+      const oldData = {\n+        userId: selectedLocker.userId,\n+        userName: selectedLocker.userName,\n+        startDate: selectedLocker.startDate,\n+        endDate: selectedLocker.endDate,\n+        months: selectedLocker.months\n+      };\n+\n+      const newData = {\n+        userId: editMember.id,\n+        userName: editMember.name,\n+        startDate: editStartDate,\n+        endDate: editEndDate,\n+        months: editMonths\n+      };\n+\n+      // 수정 이력 메모 생성\n+      const changeDate = new Date().toLocaleString('ko-KR');\n+      const changedBy = currentUserInfo?.name || 'Unknown';\n+      \n+      const historyMemo = `[${changeDate}] ${changedBy} - ${editMemo.trim()}\\n` +\n+        `변경 전: ${oldData.userName || '없음'} (${oldData.startDate || '없음'} ~ ${oldData.endDate || '없음'})\\n` +\n+        `변경 후: ${newData.userName} (${newData.startDate} ~ ${newData.endDate})`;\n+\n+      // 기존 이력에 새 이력 추가\n+      const existingHistory = selectedLocker.changeHistory || [];\n+      const updatedHistory = [...existingHistory, historyMemo];\n+\n+      // 라커 정보 업데이트 (이력 포함)\n+      await dbManager.updateLocker(selectedLocker.id, {\n+        ...newData,\n+        changeHistory: updatedHistory\n+      });\n+\n+      // 라커 목록 새로고침\n+      await loadLockers();\n+\n+      // 모달 닫기 및 상태 초기화\n+      setSelectedLocker(null);\n+      setIsEditMode(false);\n+      setEditMember(null);\n+      setEditSearchQuery('');\n+      setEditMemo('');\n+      \n+      toast.success(`라커 ${selectedLocker.number}번 정보가 수정되었습니다.`);\n+    } catch (error) {\n+      console.error('라커 정보 수정 실패:', error);\n+      toast.error('라커 정보 수정 중 오류가 발생했습니다.');\n+    }\n+  };\n+\n   // 총 금액 계산\n   const getTotalAmount = () => {\n     return getCurrentBranchLockerPrice() * selectedMonths;\n   };\n@@ -1300,61 +1481,296 @@\n             </div>\n           }\n         />\n \n-        {/* 라커 상세 모달 */}\n-        <ModalOverlay $isOpen={!!selectedLocker}>\n-          <ModalContent>\n-            <ModalTitle>라커 {selectedLocker?.number}번</ModalTitle>\n-            <p>상태: {selectedLocker ? getStatusText(selectedLocker.status) : ''}</p>\n-            <p>가격: {formatPrice(getCurrentBranchLockerPrice())}</p>\n-            {selectedLocker?.userName && (\n-              <>\n-                <p>사용자: {selectedLocker.userName}</p>\n-                {selectedLocker.startDate && <p>시작일: {selectedLocker.startDate}</p>}\n-                {selectedLocker.endDate && <p>종료일: {selectedLocker.endDate}</p>}\n-                {selectedLocker.months && <p>이용기간: {selectedLocker.months}개월</p>}\n-              </>\n-            )}\n-            <ModalButtons>\n-              <SecondaryButton onClick={() => setSelectedLocker(null)}>\n-                닫기\n+        {/* 라커 상세/수정 모달 */}\n+        <Modal\n+          isOpen={!!selectedLocker}\n+          onClose={() => {\n+            setSelectedLocker(null);\n+            setIsEditMode(false);\n+            setEditMember(null);\n+            setEditSearchQuery('');\n+            setEditSearchResults([]);\n+            setEditMemo('');\n+          }}\n+          width=\"min(95vw, 600px)\"\n+          header={`라커 ${selectedLocker?.number}번 ${isEditMode ? '수정' : '정보'}`}\n+          body={\n+            selectedLocker && (\n+              <div style={{ padding: '8px 0' }}>\n+                {!isEditMode ? (\n+                  // 정보 표시 모드\n+                  <div>\n+                    <div style={{ marginBottom: '16px' }}>\n+                      <strong>상태:</strong> {selectedLocker ? getStatusText(selectedLocker.status) : ''}\n+                    </div>\n+                    <div style={{ marginBottom: '16px' }}>\n+                      <strong>가격:</strong> {formatPrice(getCurrentBranchLockerPrice())}\n+                    </div>\n+                    {selectedLocker.userName && (\n+                      <>\n+                        <div style={{ marginBottom: '16px' }}>\n+                          <strong>사용자:</strong> {selectedLocker.userName}\n+                        </div>\n+                        {selectedLocker.startDate && (\n+                          <div style={{ marginBottom: '16px' }}>\n+                            <strong>시작일:</strong> {new Date(selectedLocker.startDate).toLocaleDateString('ko-KR')}\n+                          </div>\n+                        )}\n+                        {selectedLocker.endDate && (\n+                          <div style={{ marginBottom: '16px' }}>\n+                            <strong>종료일:</strong> {new Date(selectedLocker.endDate).toLocaleDateString('ko-KR')}\n+                          </div>\n+                        )}\n+                        {selectedLocker.months && (\n+                          <div style={{ marginBottom: '16px' }}>\n+                            <strong>이용기간:</strong> {selectedLocker.months}개월\n+                          </div>\n+                        )}\n+                        {selectedLocker.changeHistory && selectedLocker.changeHistory.length > 0 && (\n+                          <div style={{ marginBottom: '16px' }}>\n+                            <strong>수정 이력:</strong>\n+                            <div style={{ \n+                              marginTop: '8px',\n+                              padding: '12px',\n+                              backgroundColor: AppColors.surface,\n+                              borderRadius: '6px',\n+                              border: `1px solid ${AppColors.borderLight}`,\n+                              maxHeight: '200px',\n+                              overflowY: 'auto'\n+                            }}>\n+                              {selectedLocker.changeHistory.map((history, index) => (\n+                                <div \n+                                  key={index} \n+                                  style={{ \n+                                    fontSize: AppTextStyles.body3.fontSize,\n+                                    color: AppColors.onInput1,\n+                                    marginBottom: index < selectedLocker.changeHistory!.length - 1 ? '12px' : '0',\n+                                    paddingBottom: index < selectedLocker.changeHistory!.length - 1 ? '12px' : '0',\n+                                    borderBottom: index < selectedLocker.changeHistory!.length - 1 ? `1px solid ${AppColors.borderLight}` : 'none',\n+                                    whiteSpace: 'pre-line'\n+                                  }}\n+                                >\n+                                  {history}\n+                                </div>\n+                              ))}\n+                            </div>\n+                          </div>\n+                        )}\n+                      </>\n+                    )}\n+                  </div>\n+                ) : (\n+                  // 수정 모드\n+                  <div>\n+                    <FormGroup>\n+                      <FormLabel>사용자 변경</FormLabel>\n+                      {!editMember ? (\n+                        <>\n+                          <SearchInput\n+                            type=\"text\"\n+                            placeholder=\"회원명, 전화번호, 이메일로 검색...\"\n+                            value={editSearchQuery}\n+                            onChange={(e) => handleEditMemberSearch(e.target.value)}\n+                          />\n+                          \n+                          {editSearchResults.length > 0 && (\n+                            <SearchResults style={{ maxHeight: '150px' }}>\n+                              {editSearchResults.map((member) => (\n+                                <MemberItem\n+                                  key={member.id}\n+                                  $selected={false}\n+                                  onClick={() => handleEditMemberSelect(member)}\n+                                >\n+                                  <MemberName>{member.name}</MemberName>\n+                                  <MemberInfo>\n+                                    {member.phone && <div>전화: {member.phone}</div>}\n+                                    {member.email && <div>이메일: {member.email}</div>}\n+                                  </MemberInfo>\n+                                </MemberItem>\n+                              ))}\n+                            </SearchResults>\n+                          )}\n+                        </>\n+                      ) : (\n+                        <SelectedMemberCard>\n+                          <SelectedMemberName>\n+                            {editMember.name}\n+                            <button \n+                              onClick={() => {\n+                                setEditMember(null);\n+                                setEditSearchQuery('');\n+                                setEditSearchResults([]);\n+                              }}\n+                              style={{ \n+                                float: 'right', \n+                                background: 'none', \n+                                border: 'none', \n+                                fontSize: '14px', \n+                                cursor: 'pointer',\n+                                color: AppColors.primary\n+                              }}\n+                            >\n+                              변경\n+                            </button>\n+                          </SelectedMemberName>\n+                          <SelectedMemberDetails>\n+                            {editMember.phone && <div>전화: {editMember.phone}</div>}\n+                            {editMember.email && <div>이메일: {editMember.email}</div>}\n+                          </SelectedMemberDetails>\n+                        </SelectedMemberCard>\n+                      )}\n+                    </FormGroup>\n+\n+                    <FormGroup>\n+                      <FormLabel>이용 기간</FormLabel>\n+                      <CustomDropdown\n+                        value={editMonths.toString()}\n+                        onChange={(value: string) => handleEditMonthsChange(parseInt(value))}\n+                        options={[\n+                          { value: '1', label: '1개월' },\n+                          { value: '2', label: '2개월' },\n+                          { value: '3', label: '3개월' },\n+                          { value: '4', label: '4개월' },\n+                          { value: '5', label: '5개월' },\n+                          { value: '6', label: '6개월' },\n+                          { value: '12', label: '12개월' }\n+                        ]}\n+                        inModal={true}\n+                      />\n+                    </FormGroup>\n+\n+                    <FieldRow>\n+                      <FieldColumn>\n+                        <FormLabel>시작일</FormLabel>\n+                        <CustomDateInput\n+                          value={editStartDate}\n+                          onChange={handleEditStartDateChange}\n+                          placeholder=\"시작일을 선택하세요\"\n+                        />\n+                      </FieldColumn>\n+\n+                      <FieldColumn>\n+                        <FormLabel>종료일</FormLabel>\n+                        <CustomDateInput\n+                          value={editEndDate}\n+                          onChange={(value: string) => setEditEndDate(value)}\n+                          placeholder=\"종료일을 선택하세요\"\n+                          min={editStartDate}\n+                        />\n+                      </FieldColumn>\n+                    </FieldRow>\n+\n+                    <FormGroup>\n+                      <FormLabel>수정 사유 (필수)</FormLabel>\n+                      <textarea\n+                        value={editMemo}\n+                        onChange={(e) => setEditMemo(e.target.value)}\n+                        placeholder=\"수정 사유를 입력해주세요\"\n+                        style={{\n+                          width: '100%',\n+                          height: '80px',\n+                          padding: '8px 12px',\n+                          border: `1px solid ${AppColors.borderLight}`,\n+                          borderRadius: '6px',\n+                          backgroundColor: AppColors.surface,\n+                          color: AppColors.onSurface,\n+                          fontSize: AppTextStyles.body2.fontSize,\n+                          resize: 'vertical',\n+                          boxSizing: 'border-box'\n+                        }}\n+                      />\n+                    </FormGroup>\n+\n+                    {editMember && editStartDate && editEndDate && (\n+                      <AmountDisplay>\n+                        <AmountText>수정 후 정보</AmountText>\n+                        <div style={{ fontSize: AppTextStyles.body2.fontSize, color: AppColors.onSurface }}>\n+                          <div>사용자: {editMember.name}</div>\n+                          <div>기간: {new Date(editStartDate).toLocaleDateString('ko-KR')} ~ {new Date(editEndDate).toLocaleDateString('ko-KR')}</div>\n+                          <div>이용기간: {editMonths}개월</div>\n+                        </div>\n+                      </AmountDisplay>\n+                    )}\n+                  </div>\n+                )}\n+              </div>\n+            )\n+          }\n+          footer={\n+            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px' }}>\n+              <SecondaryButton onClick={() => {\n+                if (isEditMode) {\n+                  setIsEditMode(false);\n+                  setEditMember(null);\n+                  setEditSearchQuery('');\n+                  setEditSearchResults([]);\n+                  setEditMemo('');\n+                } else {\n+                  setSelectedLocker(null);\n+                }\n+              }}>\n+                {isEditMode ? '취소' : '닫기'}\n               </SecondaryButton>\n-              {selectedLocker && hasPermission && canEditBranch(selectedLocker.branchId) && selectedLocker.status === 'occupied' && (\n-                <ActionButton \n-                  onClick={() => {\n-                    handleUnassignLocker(selectedLocker);\n-                    setSelectedLocker(null);\n-                  }}\n-                  style={{ backgroundColor: AppColors.warning }}\n-                >\n-                  라커 해제\n-                </ActionButton>\n+              \n+              {selectedLocker && hasPermission && canEditBranch(selectedLocker.branchId) && selectedLocker.status === 'occupied' && !isEditMode && (\n+                <>\n+                  <ActionButton \n+                    onClick={async () => {\n+                      setIsEditMode(true);\n+                      await initializeEditData(selectedLocker);\n+                    }}\n+                  >\n+                    수정\n+                  </ActionButton>\n+                  <ActionButton \n+                    onClick={() => {\n+                      handleUnassignLocker(selectedLocker);\n+                      setSelectedLocker(null);\n+                    }}\n+                    style={{ backgroundColor: AppColors.warning }}\n+                  >\n+                    라커 해제\n+                  </ActionButton>\n+                </>\n               )}\n-              {selectedLocker && hasPermission && canEditBranch(selectedLocker.branchId) && selectedLocker.status !== 'occupied' && (\n-                <ActionButton \n-                  onClick={() => {\n-                    handleToggleMaintenance(selectedLocker);\n-                    setSelectedLocker(null);\n-                  }}\n-                >\n-                  {selectedLocker.status === 'maintenance' ? '점검 완료' : '점검중으로 변경'}\n-                </ActionButton>\n+              \n+              {selectedLocker && hasPermission && canEditBranch(selectedLocker.branchId) && selectedLocker.status !== 'occupied' && !isEditMode && (\n+                <>\n+                  <ActionButton \n+                    onClick={() => {\n+                      handleToggleMaintenance(selectedLocker);\n+                      setSelectedLocker(null);\n+                    }}\n+                  >\n+                    {selectedLocker.status === 'maintenance' ? '점검 완료' : '점검중으로 변경'}\n+                  </ActionButton>\n+                  {selectedLocker.status === 'available' && (\n+                    <ActionButton \n+                      onClick={() => {\n+                        handleDeleteLocker(selectedLocker);\n+                        setSelectedLocker(null);\n+                      }}\n+                      style={{ backgroundColor: AppColors.error }}\n+                    >\n+                      삭제\n+                    </ActionButton>\n+                  )}\n+                </>\n               )}\n-              {selectedLocker && hasPermission && canEditBranch(selectedLocker.branchId) && selectedLocker.status === 'available' && (\n+              \n+              {isEditMode && (\n                 <ActionButton \n-                  onClick={() => {\n-                    handleDeleteLocker(selectedLocker);\n-                    setSelectedLocker(null);\n-                  }}\n-                  style={{ backgroundColor: AppColors.error }}\n+                  onClick={handleUpdateLocker}\n+                  disabled={!editMember || !editMemo.trim()}\n                 >\n-                  삭제\n+                  수정 완료\n                 </ActionButton>\n               )}\n-            </ModalButtons>\n-          </ModalContent>\n-        </ModalOverlay>\n+            </div>\n+          }\n+        />\n       </Content>\n     </Container>\n   );\n };\n"
                },
                {
                    "date": 1762068933841,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -447,8 +447,29 @@\n   font-size: 14px;\n   text-align: left;\n `;\n \n+const LockerInfoRow = styled.div`\n+  display: flex;\n+  gap: 24px;\n+  margin-bottom: 12px;\n+`;\n+\n+const LockerInfoItem = styled.div`\n+  flex: 1;\n+  text-align: left;\n+  \n+  strong {\n+    font-weight: 600;\n+    color: ${AppColors.onSurface};\n+    margin-right: 8px;\n+  }\n+  \n+  span {\n+    color: ${AppColors.onInput1};\n+  }\n+`;\n+\n const FieldRow = styled.div`\n   display: flex;\n   gap: 16px;\n   margin-bottom: 16px;\n@@ -1500,66 +1521,77 @@\n               <div style={{ padding: '8px 0' }}>\n                 {!isEditMode ? (\n                   // 정보 표시 모드\n                   <div>\n-                    <div style={{ marginBottom: '16px' }}>\n-                      <strong>상태:</strong> {selectedLocker ? getStatusText(selectedLocker.status) : ''}\n-                    </div>\n-                    <div style={{ marginBottom: '16px' }}>\n-                      <strong>가격:</strong> {formatPrice(getCurrentBranchLockerPrice())}\n-                    </div>\n+                    <LockerInfoRow>\n+                      <LockerInfoItem>\n+                        <strong>상태:</strong>\n+                        <span>{selectedLocker ? getStatusText(selectedLocker.status) : ''}</span>\n+                      </LockerInfoItem>\n+                      <LockerInfoItem>\n+                        <strong>가격:</strong>\n+                        <span>{formatPrice(getCurrentBranchLockerPrice())}</span>\n+                      </LockerInfoItem>\n+                    </LockerInfoRow>\n+                    \n                     {selectedLocker.userName && (\n                       <>\n-                        <div style={{ marginBottom: '16px' }}>\n-                          <strong>사용자:</strong> {selectedLocker.userName}\n-                        </div>\n-                        {selectedLocker.startDate && (\n-                          <div style={{ marginBottom: '16px' }}>\n-                            <strong>시작일:</strong> {new Date(selectedLocker.startDate).toLocaleDateString('ko-KR')}\n-                          </div>\n+                        <LockerInfoRow>\n+                          <LockerInfoItem>\n+                            <strong>사용자:</strong>\n+                            <span>{selectedLocker.userName}</span>\n+                          </LockerInfoItem>\n+                          <LockerInfoItem>\n+                            <strong>이용기간:</strong>\n+                            <span>{selectedLocker.months}개월</span>\n+                          </LockerInfoItem>\n+                        </LockerInfoRow>\n+                        \n+                        {selectedLocker.startDate && selectedLocker.endDate && (\n+                          <LockerInfoRow>\n+                            <LockerInfoItem>\n+                              <strong>시작일:</strong>\n+                              <span>{new Date(selectedLocker.startDate).toLocaleDateString('ko-KR')}</span>\n+                            </LockerInfoItem>\n+                            <LockerInfoItem>\n+                              <strong>종료일:</strong>\n+                              <span>{new Date(selectedLocker.endDate).toLocaleDateString('ko-KR')}</span>\n+                            </LockerInfoItem>\n+                          </LockerInfoRow>\n                         )}\n-                        {selectedLocker.endDate && (\n-                          <div style={{ marginBottom: '16px' }}>\n-                            <strong>종료일:</strong> {new Date(selectedLocker.endDate).toLocaleDateString('ko-KR')}\n-                          </div>\n-                        )}\n-                        {selectedLocker.months && (\n-                          <div style={{ marginBottom: '16px' }}>\n-                            <strong>이용기간:</strong> {selectedLocker.months}개월\n-                          </div>\n-                        )}\n-                        {selectedLocker.changeHistory && selectedLocker.changeHistory.length > 0 && (\n-                          <div style={{ marginBottom: '16px' }}>\n-                            <strong>수정 이력:</strong>\n-                            <div style={{ \n-                              marginTop: '8px',\n-                              padding: '12px',\n-                              backgroundColor: AppColors.surface,\n-                              borderRadius: '6px',\n-                              border: `1px solid ${AppColors.borderLight}`,\n-                              maxHeight: '200px',\n-                              overflowY: 'auto'\n-                            }}>\n-                              {selectedLocker.changeHistory.map((history, index) => (\n-                                <div \n-                                  key={index} \n-                                  style={{ \n-                                    fontSize: AppTextStyles.body3.fontSize,\n-                                    color: AppColors.onInput1,\n-                                    marginBottom: index < selectedLocker.changeHistory!.length - 1 ? '12px' : '0',\n-                                    paddingBottom: index < selectedLocker.changeHistory!.length - 1 ? '12px' : '0',\n-                                    borderBottom: index < selectedLocker.changeHistory!.length - 1 ? `1px solid ${AppColors.borderLight}` : 'none',\n-                                    whiteSpace: 'pre-line'\n-                                  }}\n-                                >\n-                                  {history}\n-                                </div>\n-                              ))}\n-                            </div>\n-                          </div>\n-                        )}\n                       </>\n                     )}\n+                    \n+                    {selectedLocker.changeHistory && selectedLocker.changeHistory.length > 0 && (\n+                      <div style={{ marginTop: '20px' }}>\n+                        <strong>수정 이력:</strong>\n+                        <div style={{ \n+                          marginTop: '8px',\n+                          padding: '12px',\n+                          backgroundColor: AppColors.surface,\n+                          borderRadius: '6px',\n+                          border: `1px solid ${AppColors.borderLight}`,\n+                          maxHeight: '200px',\n+                          overflowY: 'auto'\n+                        }}>\n+                          {selectedLocker.changeHistory.map((history, index) => (\n+                            <div \n+                              key={index} \n+                              style={{ \n+                                fontSize: AppTextStyles.body3.fontSize,\n+                                color: AppColors.onInput1,\n+                                marginBottom: index < selectedLocker.changeHistory!.length - 1 ? '12px' : '0',\n+                                paddingBottom: index < selectedLocker.changeHistory!.length - 1 ? '12px' : '0',\n+                                borderBottom: index < selectedLocker.changeHistory!.length - 1 ? `1px solid ${AppColors.borderLight}` : 'none',\n+                                whiteSpace: 'pre-line'\n+                              }}\n+                            >\n+                              {history}\n+                            </div>\n+                          ))}\n+                        </div>\n+                      </div>\n+                    )}\n                   </div>\n                 ) : (\n                   // 수정 모드\n                   <div>\n"
                },
                {
                    "date": 1762068961817,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1561,18 +1561,19 @@\n                       </>\n                     )}\n                     \n                     {selectedLocker.changeHistory && selectedLocker.changeHistory.length > 0 && (\n-                      <div style={{ marginTop: '20px' }}>\n+                      <div style={{ marginTop: '20px', textAlign: 'left' }}>\n                         <strong>수정 이력:</strong>\n                         <div style={{ \n                           marginTop: '8px',\n                           padding: '12px',\n                           backgroundColor: AppColors.surface,\n                           borderRadius: '6px',\n                           border: `1px solid ${AppColors.borderLight}`,\n                           maxHeight: '200px',\n-                          overflowY: 'auto'\n+                          overflowY: 'auto',\n+                          textAlign: 'left'\n                         }}>\n                           {selectedLocker.changeHistory.map((history, index) => (\n                             <div \n                               key={index} \n@@ -1581,9 +1582,10 @@\n                                 color: AppColors.onInput1,\n                                 marginBottom: index < selectedLocker.changeHistory!.length - 1 ? '12px' : '0',\n                                 paddingBottom: index < selectedLocker.changeHistory!.length - 1 ? '12px' : '0',\n                                 borderBottom: index < selectedLocker.changeHistory!.length - 1 ? `1px solid ${AppColors.borderLight}` : 'none',\n-                                whiteSpace: 'pre-line'\n+                                whiteSpace: 'pre-line',\n+                                textAlign: 'left'\n                               }}\n                             >\n                               {history}\n                             </div>\n"
                },
                {
                    "date": 1762339677927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n import { AppTextStyles } from '../../../styles/textStyles';\n import { dbManager, type Branch, type Member, type Locker } from '../../../utils/indexedDB';\n import CustomDropdown from '../../../components/CustomDropdown';\n import CustomDateInput from '../../../components/CustomDateInput';\n+import NumberTextField from '../../../components/NumberTextField';\n import { SYSTEM_ADMIN_CONFIG } from '../../../constants/staffConstants';\n import Modal from '../../../components/Modal';\n \n const Container = styled.div`\n@@ -249,22 +250,8 @@\n   gap: 8px;\n   margin: 16px 0;\n `;\n \n-const PriceInput = styled.input`\n-  padding: 8px 12px;\n-  border: 1px solid ${AppColors.borderLight};\n-  border-radius: 6px;\n-  background-color: ${AppColors.surface};\n-  color: ${AppColors.onSurface};\n-  font-size: ${AppTextStyles.body2.fontSize};\n-\n-  &:focus {\n-    outline: none;\n-    border-color: ${AppColors.primary};\n-  }\n-`;\n-\n const StatNumber = styled.span`\n   color: ${AppColors.primary};\n   font-weight: 600;\n `;\n@@ -500,8 +487,9 @@\n   const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n   const [addCount, setAddCount] = useState<number>(1);\n   const [selectedLocker, setSelectedLocker] = useState<Locker | null>(null);\n   const [isPriceSettingModalOpen, setIsPriceSettingModalOpen] = useState(false);\n+  const [tempPrice, setTempPrice] = useState<number>(0); // 임시 가격 상태 추가\n   const [currentUserInfo, setCurrentUserInfo] = useState<UserInfo | null>(null);\n   const [hasPermission, setHasPermission] = useState(false);\n \n   // 라커 수정 관련 상태\n@@ -1105,8 +1093,9 @@\n     if (!canEditBranch(selectedBranch)) {\n       toast.error('라커 가격 설정 권한이 없습니다.');\n       return;\n     }\n+    setTempPrice(getCurrentBranchLockerPrice()); // 현재 가격으로 초기화\n     setIsPriceSettingModalOpen(true);\n   };\n \n   const handleAddModalOpen = () => {\n@@ -1253,15 +1242,15 @@\n               {branches.find(b => b.id === selectedBranch)?.name} 라커 가격 설정\n             </ModalTitle>\n             <PriceInputGroup>\n               <label>라커 가격:</label>\n-              <PriceInput\n-                type=\"number\"\n-                min=\"0\"\n-                step=\"1000\"\n-                defaultValue={getCurrentBranchLockerPrice()}\n+              <NumberTextField\n+                value={tempPrice}\n+                onChange={(value) => setTempPrice(value || 0)}\n+                min={0}\n+                step={1000}\n                 placeholder=\"가격을 입력하세요\"\n-                id=\"branchPriceInput\"\n+                width=\"100%\"\n               />\n               <span style={{ fontSize: AppTextStyles.label2.fontSize, color: AppColors.onInput1 }}>\n                 현재 가격: {formatPrice(getCurrentBranchLockerPrice())}\n               </span>\n@@ -1271,11 +1260,9 @@\n                 취소\n               </SecondaryButton>\n               <ActionButton \n                 onClick={() => {\n-                  const input = document.getElementById('branchPriceInput') as HTMLInputElement;\n-                  const newPrice = parseInt(input.value) || 0;\n-                  handlePriceSettingUpdate(newPrice);\n+                  handlePriceSettingUpdate(tempPrice);\n                 }}\n               >\n                 설정\n               </ActionButton>\n@@ -1288,15 +1275,15 @@\n           <ModalContent>\n             <ModalTitle>라커 추가</ModalTitle>\n             <PriceInputGroup>\n               <label>추가할 라커 개수:</label>\n-              <PriceInput\n-                type=\"number\"\n-                min=\"1\"\n-                max=\"50\"\n+              <NumberTextField\n                 value={addCount}\n-                onChange={(e) => setAddCount(parseInt(e.target.value) || 1)}\n+                onChange={(value) => setAddCount(value || 1)}\n+                min={1}\n+                max={50}\n                 placeholder=\"추가할 개수를 입력하세요\"\n+                width=\"100%\"\n               />\n             </PriceInputGroup>\n             <p>번호: {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + 1}번부터 {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + addCount}번까지</p>\n             <p>라커 가격: {formatPrice(getCurrentBranchLockerPrice())}</p>\n"
                },
                {
                    "date": 1762339949665,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -671,8 +671,14 @@\n       toast.error('라커 추가 권한이 없습니다.');\n       return;\n     }\n \n+    // Validation 체크\n+    if (!addCount || addCount < 1 || addCount > 50) {\n+      toast.error('라커 개수를 올바르게 입력해주세요. (1개 ~ 50개)');\n+      return;\n+    }\n+\n     try {\n       const selectedBranchData = branches.find(b => b.id === selectedBranch);\n       if (!selectedBranchData) {\n         toast.error('지점 정보를 찾을 수 없습니다.');\n@@ -1108,8 +1114,14 @@\n     setIsAddModalOpen(true);\n   };\n \n   const handlePriceSettingUpdate = async (newPrice: number) => {\n+    // Validation 체크\n+    if (!newPrice || newPrice <= 0) {\n+      toast.error('가격을 올바르게 입력해주세요. (1원 이상)');\n+      return;\n+    }\n+\n     try {\n       const success = await dbManager.updateLockerPrice(selectedBranch, newPrice);\n       if (success) {\n         // 지점 데이터를 다시 로드하여 UI 업데이트\n@@ -1245,9 +1257,8 @@\n               <label>라커 가격:</label>\n               <NumberTextField\n                 value={tempPrice}\n                 onChange={(value) => setTempPrice(value || 0)}\n-                min={0}\n                 step={1000}\n                 placeholder=\"가격을 입력하세요\"\n                 width=\"100%\"\n               />\n@@ -1278,10 +1289,8 @@\n               <label>추가할 라커 개수:</label>\n               <NumberTextField\n                 value={addCount}\n                 onChange={(value) => setAddCount(value || 1)}\n-                min={1}\n-                max={50}\n                 placeholder=\"추가할 개수를 입력하세요\"\n                 width=\"100%\"\n               />\n             </PriceInputGroup>\n"
                },
                {
                    "date": 1762340058610,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -484,12 +484,12 @@\n   const [selectedBranch, setSelectedBranch] = useState<string>('');\n   const [lockers, setLockers] = useState<Locker[]>([]);\n   const [branches, setBranches] = useState<Branch[]>([]);\n   const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n-  const [addCount, setAddCount] = useState<number>(1);\n+  const [addCount, setAddCount] = useState<number | undefined>(1);\n   const [selectedLocker, setSelectedLocker] = useState<Locker | null>(null);\n   const [isPriceSettingModalOpen, setIsPriceSettingModalOpen] = useState(false);\n-  const [tempPrice, setTempPrice] = useState<number>(0); // 임시 가격 상태 추가\n+  const [tempPrice, setTempPrice] = useState<number | undefined>(0); // 임시 가격 상태 - undefined 허용\n   const [currentUserInfo, setCurrentUserInfo] = useState<UserInfo | null>(null);\n   const [hasPermission, setHasPermission] = useState(false);\n \n   // 라커 수정 관련 상태\n@@ -1113,9 +1113,9 @@\n     setAddCount(1); // 모달 열 때 수량 초기화\n     setIsAddModalOpen(true);\n   };\n \n-  const handlePriceSettingUpdate = async (newPrice: number) => {\n+  const handlePriceSettingUpdate = async (newPrice: number | undefined) => {\n     // Validation 체크\n     if (!newPrice || newPrice <= 0) {\n       toast.error('가격을 올바르게 입력해주세요. (1원 이상)');\n       return;\n@@ -1255,13 +1255,14 @@\n             </ModalTitle>\n             <PriceInputGroup>\n               <label>라커 가격:</label>\n               <NumberTextField\n-                value={tempPrice}\n-                onChange={(value) => setTempPrice(value || 0)}\n+                value={tempPrice ?? ''}\n+                onChange={(value) => setTempPrice(value)}\n                 step={1000}\n                 placeholder=\"가격을 입력하세요\"\n                 width=\"100%\"\n+                allowEmpty={true}\n               />\n               <span style={{ fontSize: AppTextStyles.label2.fontSize, color: AppColors.onInput1 }}>\n                 현재 가격: {formatPrice(getCurrentBranchLockerPrice())}\n               </span>\n@@ -1287,15 +1288,16 @@\n             <ModalTitle>라커 추가</ModalTitle>\n             <PriceInputGroup>\n               <label>추가할 라커 개수:</label>\n               <NumberTextField\n-                value={addCount}\n-                onChange={(value) => setAddCount(value || 1)}\n+                value={addCount ?? ''}\n+                onChange={(value) => setAddCount(value)}\n                 placeholder=\"추가할 개수를 입력하세요\"\n                 width=\"100%\"\n+                allowEmpty={true}\n               />\n             </PriceInputGroup>\n-            <p>번호: {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + 1}번부터 {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + addCount}번까지</p>\n+            <p>번호: {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + 1}번부터 {Math.max(...currentBranchLockers.map(l => parseInt(l.number)), 0) + (addCount || 1)}번까지</p>\n             <p>라커 가격: {formatPrice(getCurrentBranchLockerPrice())}</p>\n             <ModalButtons>\n               <SecondaryButton onClick={() => {\n                 setIsAddModalOpen(false);\n"
                },
                {
                    "date": 1762340084377,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1305,9 +1305,9 @@\n               }}>\n                 취소\n               </SecondaryButton>\n               <ActionButton onClick={handleAddLockers}>\n-                {addCount}개 추가\n+                {addCount || 1}개 추가\n               </ActionButton>\n             </ModalButtons>\n           </ModalContent>\n         </ModalOverlay>\n"
                },
                {
                    "date": 1762342717318,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1323,8 +1323,9 @@\n             setSearchResults([]);\n           }}\n           width=\"min(95vw, 1000px)\"\n           header={`라커 ${selectedLockerForAssignment?.number}번 배정`}\n+          disableOutsideClick={true}\n           body={\n             <AssignmentModalContainer>\n               <LeftPanel>\n                 <PanelTitle>회원 검색 및 선택</PanelTitle>\n"
                },
                {
                    "date": 1762342760448,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1248,9 +1248,9 @@\n         </LockerGrid>\n \n         {/* 지점별 라커 가격 설정 모달 */}\n         <ModalOverlay $isOpen={isPriceSettingModalOpen}>\n-          <ModalContent>\n+          <ModalContent onClick={(e) => e.stopPropagation()}>\n             <ModalTitle>\n               {branches.find(b => b.id === selectedBranch)?.name} 라커 가격 설정\n             </ModalTitle>\n             <PriceInputGroup>\n@@ -1514,8 +1514,9 @@\n             setEditMemo('');\n           }}\n           width=\"min(95vw, 600px)\"\n           header={`라커 ${selectedLocker?.number}번 ${isEditMode ? '수정' : '정보'}`}\n+          disableOutsideClick={true}\n           body={\n             selectedLocker && (\n               <div style={{ padding: '8px 0' }}>\n                 {!isEditMode ? (\n"
                },
                {
                    "date": 1762342787433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,8 @@\n `;\n \n const ModalContent = styled.div`\n   background-color: ${AppColors.background};\n-  padding: 24px;\n   border-radius: 12px;\n   border: 1px solid ${AppColors.borderLight};\n   min-width: 300px;\n `;\n@@ -1283,9 +1282,9 @@\n         </ModalOverlay>\n \n         {/* 라커 추가 모달 */}\n         <ModalOverlay $isOpen={isAddModalOpen}>\n-          <ModalContent>\n+          <ModalContent onClick={(e) => e.stopPropagation()}>\n             <ModalTitle>라커 추가</ModalTitle>\n             <PriceInputGroup>\n               <label>추가할 라커 개수:</label>\n               <NumberTextField\n"
                },
                {
                    "date": 1762342805172,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -606,8 +606,26 @@\n       setLockers([]);\n     }\n   };\n \n+  // ESC 키 처리\n+  React.useEffect(() => {\n+    const handleEscapeKey = (event: KeyboardEvent) => {\n+      if (event.key === 'Escape') {\n+        if (isPriceSettingModalOpen) {\n+          setIsPriceSettingModalOpen(false);\n+        } else if (isAddModalOpen) {\n+          setIsAddModalOpen(false);\n+        }\n+      }\n+    };\n+\n+    document.addEventListener('keydown', handleEscapeKey);\n+    return () => {\n+      document.removeEventListener('keydown', handleEscapeKey);\n+    };\n+  }, [isPriceSettingModalOpen, isAddModalOpen]);\n+\n   // 컴포넌트 마운트 시 데이터 로드\n   React.useEffect(() => {\n     const initData = async () => {\n       await checkPermission();\n"
                },
                {
                    "date": 1762342839017,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -275,9 +275,8 @@\n \n // 라커 배정 모달 스타일\n const AssignmentModalContainer = styled.div`\n   display: flex;\n-  gap: 24px;\n   height: 600px;\n   min-width: 900px;\n   width: 100%;\n   overflow: hidden;\n"
                },
                {
                    "date": 1763375401611,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -848,9 +848,11 @@\n \n     try {\n       const members = await dbManager.getAllMembers();\n       const filtered = members.filter(member => \n-        member.isActive && (\n+        member.isActive &&\n+        member.branchId === selectedBranch && // 선택된 지점의 회원만\n+        (\n           member.name.toLowerCase().includes(query.toLowerCase()) ||\n           member.phone?.includes(query) ||\n           member.email?.toLowerCase().includes(query.toLowerCase())\n         )\n@@ -1000,9 +1002,11 @@\n \n     try {\n       const members = await dbManager.getAllMembers();\n       const filtered = members.filter(member => \n-        member.isActive && (\n+        member.isActive &&\n+        member.branchId === selectedBranch && // 선택된 지점의 회원만\n+        (\n           member.name.toLowerCase().includes(query.toLowerCase()) ||\n           member.phone?.includes(query) ||\n           member.email?.toLowerCase().includes(query.toLowerCase())\n         )\n"
                },
                {
                    "date": 1763375561318,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,8 +84,9 @@\n   background-color: ${AppColors.background};\n   border-radius: 12px;\n   border: 1px solid ${AppColors.borderLight};\n   min-width: 300px;\n+  padding: 24px;\n `;\n \n const ModalTitle = styled.h3`\n   font-size: ${AppTextStyles.title3.fontSize};\n"
                },
                {
                    "date": 1763375918771,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -469,8 +469,15 @@\n   min-width: 0;\n   overflow: hidden;\n `;\n \n+const InfoText = styled.div`\n+  font-size: ${AppTextStyles.body3.fontSize};\n+  color: ${AppColors.onInput1};\n+  margin-top: 8px;\n+  line-height: 1.4;\n+`;\n+\n // 사용자 정보 타입\n interface UserInfo {\n   id: string;\n   name: string;\n@@ -506,10 +513,13 @@\n   const [selectedLockerForAssignment, setSelectedLockerForAssignment] = useState<Locker | null>(null);\n   const [searchQuery, setSearchQuery] = useState('');\n   const [searchResults, setSearchResults] = useState<Member[]>([]);\n   const [selectedMember, setSelectedMember] = useState<Member | null>(null);\n+  const [memberPointBalance, setMemberPointBalance] = useState<number>(0);\n+  const [pointPayment, setPointPayment] = useState<number>(0);\n   const [selectedMonths, setSelectedMonths] = useState(1);\n   const [paymentMethod, setPaymentMethod] = useState('card');\n+  const [receivedAmount, setReceivedAmount] = useState<number>(0);\n   const [startDate, setStartDate] = useState(new Date().toISOString().split('T')[0]);\n   const [endDate, setEndDate] = useState(() => {\n     const date = new Date();\n     date.setMonth(date.getMonth() + 1);\n@@ -865,12 +875,21 @@\n     }\n   };\n \n   // 회원 선택 함수\n-  const handleMemberSelect = (member: Member) => {\n+  const handleMemberSelect = async (member: Member) => {\n     setSelectedMember(member);\n     setSearchQuery(member.name);\n     setSearchResults([]);\n+    \n+    // 포인트 잔액 로드\n+    try {\n+      const pointBalance = await dbManager.getMemberPointBalance(member.id);\n+      setMemberPointBalance(pointBalance);\n+    } catch (error) {\n+      console.error('포인트 잔액 조회 실패:', error);\n+      setMemberPointBalance(0);\n+    }\n   };\n \n   // 개월 수 변경 시 종료일 자동 계산\n   const handleMonthsChange = (months: number) => {\n@@ -878,8 +897,13 @@\n     const start = new Date(startDate);\n     const end = new Date(start);\n     end.setMonth(end.getMonth() + months);\n     setEndDate(end.toISOString().split('T')[0]);\n+    \n+    // 받은 금액 재계산\n+    const monthlyPrice = getCurrentBranchLockerPrice();\n+    const totalAmount = monthlyPrice * months;\n+    setReceivedAmount(Math.max(0, totalAmount - pointPayment));\n   };\n \n   // 시작일 변경 시 종료일 자동 계산\n   const handleStartDateChange = (date: string) => {\n@@ -889,47 +913,92 @@\n     end.setMonth(end.getMonth() + selectedMonths);\n     setEndDate(end.toISOString().split('T')[0]);\n   };\n \n+  // 포인트 결제 금액 변경\n+  const handlePointPaymentChange = (value: number) => {\n+    const totalAmount = getTotalAmount();\n+    const maxPoint = Math.min(memberPointBalance, totalAmount);\n+    const newPointPayment = Math.max(0, Math.min(value, maxPoint));\n+    \n+    setPointPayment(newPointPayment);\n+    setReceivedAmount(Math.max(0, totalAmount - newPointPayment));\n+  };\n+\n+  // 전체 포인트 사용\n+  const handleUseAllPoints = () => {\n+    const totalAmount = getTotalAmount();\n+    const maxUsablePoint = Math.min(memberPointBalance, totalAmount);\n+    \n+    setPointPayment(maxUsablePoint);\n+    setReceivedAmount(Math.max(0, totalAmount - maxUsablePoint));\n+  };\n+\n   // 라커 배정 처리 함수\n   const handleAssignLocker = async () => {\n     if (!selectedMember || !selectedLockerForAssignment) {\n       toast.warning('회원과 라커를 선택해주세요.');\n       return;\n     }\n \n+    // 포인트 결제가 잔액을 초과하는지 확인\n+    if (pointPayment > memberPointBalance) {\n+      toast.error(`포인트 잔액이 부족합니다. (잔액: ${memberPointBalance.toLocaleString()}원)`);\n+      return;\n+    }\n+\n     try {\n       const monthlyPrice = getCurrentBranchLockerPrice();\n       const totalAmount = monthlyPrice * selectedMonths;\n+      const cashPayment = receivedAmount || 0;\n+      const totalReceived = pointPayment + cashPayment;\n       \n-      // 결제 정보를 결제 이력에 추가\n-      const paymentData = {\n-        memberId: selectedMember.id,\n-        memberName: selectedMember.name,\n-        branchId: selectedLockerForAssignment.branchId,\n-        branchName: selectedLockerForAssignment.branchName,\n-        coach: selectedMember.coach,\n-        coachName: selectedMember.coachName,\n+      // 초과 금액 확인 및 보너스 포인트 계산\n+      if (totalReceived > totalAmount) {\n+        const excessAmount = totalReceived - totalAmount;\n+        let confirmMessage = `총 받은 금액이 결제 금액보다 ${excessAmount.toLocaleString()}원 많습니다.\\n초과 금액은 포인트로 적립됩니다.`;\n+        \n+        if (excessAmount >= 1000000) {\n+          const millionUnits = Math.floor(excessAmount / 1000000);\n+          const bonusPoints = millionUnits * 100000;\n+          confirmMessage += `\\n\\n🎁 보너스 혜택: 추가 ${bonusPoints.toLocaleString()}원 더 적립됩니다!`;\n+          confirmMessage += `\\n(${millionUnits}개 100만원 단위 × 10만원 보너스)`;\n+        }\n+        \n+        confirmMessage += `\\n\\n계속 진행하시겠습니까?`;\n+        \n+        const confirmed = window.confirm(confirmMessage);\n+        if (!confirmed) return;\n+      }\n+      \n+      // 통합 주문 처리를 통한 라커 배정\n+      const orderId = await dbManager.processOrderWithPayments({\n+        memberInfo: {\n+          id: selectedMember.id,\n+          name: selectedMember.name,\n+          branchId: selectedLockerForAssignment.branchId,\n+          branchName: selectedLockerForAssignment.branchName,\n+          coach: selectedMember.coach,\n+          coachName: selectedMember.coachName\n+        },\n         products: [{\n           id: `locker_${selectedLockerForAssignment.id}`,\n           name: `라커 ${selectedLockerForAssignment.number}번 (${selectedMonths}개월)`,\n           price: totalAmount,\n-          quantity: 1,\n-          description: `라커 ${selectedLockerForAssignment.number}번 ${selectedMonths}개월 이용 (${startDate} ~ ${endDate})`\n+          programId: 'locker',\n+          programName: '라커',\n+          programType: 'locker'\n         }],\n-        totalAmount: totalAmount,\n-        paidAmount: totalAmount,\n-        unpaidAmount: 0,\n-        paymentStatus: 'completed' as const,\n-        paymentMethod: paymentMethod,\n-        paymentDate: new Date(),\n-        paymentType: 'asset' as const,\n-        memo: `라커 ${selectedLockerForAssignment.number}번 배정 (${startDate} ~ ${endDate})`\n-      };\n+        payments: {\n+          cash: paymentMethod === 'cash' ? cashPayment : 0,\n+          card: paymentMethod === 'card' ? cashPayment : 0,\n+          transfer: paymentMethod === 'transfer' ? cashPayment : 0,\n+          points: pointPayment\n+        },\n+        orderType: 'course_enrollment' // 기존 타입 사용\n+      });\n \n-      // 결제 정보 저장\n-      const paymentId = await dbManager.addPayment(paymentData);\n-      console.log('결제 정보 저장 완료:', paymentId);\n+      console.log('라커 배정 주문 처리 완료:', orderId);\n \n       // 라커 배정 (사용자 정의 시작일/종료일 사용)\n       await dbManager.assignLockerToUserWithDates(\n         selectedLockerForAssignment.id,\n@@ -937,9 +1006,9 @@\n         selectedMember.name,\n         selectedMonths,\n         startDate,\n         endDate,\n-        paymentId\n+        orderId\n       );\n \n       // 배정 이력 추가\n       const changeDate = new Date().toLocaleString('ko-KR');\n@@ -961,8 +1030,11 @@\n \n       setIsAssignmentModalOpen(false);\n       setSelectedLockerForAssignment(null);\n       setSelectedMember(null);\n+      setMemberPointBalance(0);\n+      setPointPayment(0);\n+      setReceivedAmount(0);\n       \n       toast.success(`라커 ${selectedLockerForAssignment.number}번이 ${selectedMember.name}님에게 배정되었습니다.`);\n     } catch (error) {\n       console.error('라커 배정 실패:', error);\n@@ -1485,8 +1557,112 @@\n                         월 {formatPrice(getCurrentBranchLockerPrice())} × {selectedMonths}개월\n                       </div>\n                     </AmountDisplay>\n \n+                    {/* 포인트 결제 섹션 */}\n+                    <div style={{\n+                      background: `${AppColors.primary}10`,\n+                      border: `1px solid ${AppColors.primary}30`,\n+                      borderRadius: '8px',\n+                      padding: '16px',\n+                      margin: '16px 0'\n+                    }}>\n+                      <FormLabel>포인트 결제</FormLabel>\n+                      <InfoText>\n+                        사용 가능한 포인트: {memberPointBalance.toLocaleString()}원\n+                      </InfoText>\n+                      <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginTop: '8px' }}>\n+                        <NumberTextField\n+                          value={pointPayment || 0}\n+                          onChange={(value) => handlePointPaymentChange(value || 0)}\n+                          placeholder=\"포인트 사용 금액\"\n+                          width=\"100%\"\n+                          allowEmpty={true}\n+                        />\n+                        <button\n+                          onClick={handleUseAllPoints}\n+                          style={{\n+                            background: AppColors.primary,\n+                            color: AppColors.onPrimary,\n+                            border: 'none',\n+                            borderRadius: '4px',\n+                            padding: '6px 12px',\n+                            fontSize: AppTextStyles.body3.fontSize,\n+                            cursor: 'pointer',\n+                            whiteSpace: 'nowrap'\n+                          }}\n+                        >\n+                          전액 사용\n+                        </button>\n+                      </div>\n+                      {pointPayment > memberPointBalance && (\n+                        <InfoText style={{ color: '#d32f2f' }}>\n+                          포인트 잔액을 초과할 수 없습니다.\n+                        </InfoText>\n+                      )}\n+                    </div>\n+\n+                    {/* 받은 금액 */}\n+                    <FormGroup>\n+                      <FormLabel>받은금액 (현금/카드)</FormLabel>\n+                      <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\n+                        <NumberTextField\n+                          value={receivedAmount !== undefined ? receivedAmount : Math.max(0, getTotalAmount() - pointPayment)}\n+                          onChange={(value) => setReceivedAmount(value || 0)}\n+                          placeholder=\"받은 금액을 입력하세요\"\n+                          width=\"100%\"\n+                          allowEmpty={true}\n+                        />\n+                        <button\n+                          type=\"button\"\n+                          onClick={() => {\n+                            const cashAmount = Math.max(0, getTotalAmount() - pointPayment);\n+                            setReceivedAmount(cashAmount);\n+                          }}\n+                          style={{\n+                            minHeight: '48px',\n+                            padding: '14px 16px',\n+                            border: '1px solid #ddd',\n+                            borderRadius: '12px',\n+                            backgroundColor: '#fff',\n+                            cursor: 'pointer',\n+                            fontSize: '12px',\n+                            whiteSpace: 'nowrap',\n+                            transition: 'all 0.2s ease'\n+                          }}\n+                          onMouseEnter={(e) => {\n+                            e.currentTarget.style.borderColor = '#37bbd6';\n+                            e.currentTarget.style.boxShadow = '0 2px 8px rgba(55, 187, 214, 0.1)';\n+                          }}\n+                          onMouseLeave={(e) => {\n+                            e.currentTarget.style.borderColor = '#ddd';\n+                            e.currentTarget.style.boxShadow = 'none';\n+                          }}\n+                        >\n+                          필요 금액으로 설정\n+                        </button>\n+                      </div>\n+                      {receivedAmount !== getTotalAmount() - pointPayment && (\n+                        <InfoText>\n+                          {receivedAmount > getTotalAmount() - pointPayment\n+                            ? (() => {\n+                                const excessAmount = receivedAmount - (getTotalAmount() - pointPayment);\n+                                let message = `초과금액: ${excessAmount.toLocaleString()}원 (포인트로 적립 예정)`;\n+                                \n+                                if (excessAmount >= 1000000) {\n+                                  const millionUnits = Math.floor(excessAmount / 1000000);\n+                                  const bonusPoints = millionUnits * 100000;\n+                                  message += ` + 보너스 ${bonusPoints.toLocaleString()}원`;\n+                                }\n+                                \n+                                return message;\n+                              })()\n+                            : `부족금액: ${((getTotalAmount() - pointPayment) - receivedAmount).toLocaleString()}원 (미수금으로 처리 예정)`\n+                          }\n+                        </InfoText>\n+                      )}\n+                    </FormGroup>\n+\n                     <div style={{ fontSize: AppTextStyles.body3.fontSize, color: AppColors.onInput1, textAlign: 'left' }}>\n                       <div>시작일: {new Date(startDate).toLocaleDateString('ko-KR')}</div>\n                       <div>종료일: {new Date(endDate).toLocaleDateString('ko-KR')}</div>\n                       <div style={{ marginTop: '8px', color: AppColors.onInput2 }}>\n"
                },
                {
                    "date": 1763376100097,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -298,8 +298,18 @@\n   min-width: 0;\n   display: flex;\n   flex-direction: column;\n   text-align: left;\n+  overflow-y: auto;\n+  max-height: 600px;\n+  \n+  /* 스크롤바 숨기기 */\n+  scrollbar-width: none; /* Firefox */\n+  -ms-overflow-style: none; /* Internet Explorer 10+ */\n+  \n+  &::-webkit-scrollbar {\n+    display: none; /* Chrome, Safari, Opera */\n+  }\n `;\n \n const PanelTitle = styled.h3`\n   font-size: ${AppTextStyles.title3.fontSize};\n@@ -333,8 +343,16 @@\n   border-radius: 8px;\n   width: 100%;\n   box-sizing: border-box;\n   min-height: 0;\n+  \n+  /* 스크롤바 숨기기 */\n+  scrollbar-width: none; /* Firefox */\n+  -ms-overflow-style: none; /* Internet Explorer 10+ */\n+  \n+  &::-webkit-scrollbar {\n+    display: none; /* Chrome, Safari, Opera */\n+  }\n `;\n \n const MemberItem = styled.div<{ $selected: boolean }>`\n   padding: 12px 16px;\n"
                },
                {
                    "date": 1763376176610,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -849,8 +849,11 @@\n     if (locker.status === 'available' && hasPermission && canEditBranch(locker.branchId)) {\n       setSelectedLockerForAssignment(locker);\n       setIsAssignmentModalOpen(true);\n       setSelectedMember(null);\n+      setMemberPointBalance(0);\n+      setPointPayment(0);\n+      setReceivedAmount(0);\n       setSearchQuery('');\n       setSearchResults([]);\n       setSelectedMonths(1);\n       setPaymentMethod('card');\n@@ -906,8 +909,14 @@\n     } catch (error) {\n       console.error('포인트 잔액 조회 실패:', error);\n       setMemberPointBalance(0);\n     }\n+    \n+    // 포인트 및 받은금액 초기화\n+    setPointPayment(0);\n+    const monthlyPrice = getCurrentBranchLockerPrice();\n+    const totalAmount = monthlyPrice * selectedMonths;\n+    setReceivedAmount(totalAmount);\n   };\n \n   // 개월 수 변경 시 종료일 자동 계산\n   const handleMonthsChange = (months: number) => {\n@@ -1429,8 +1438,11 @@\n           onClose={() => {\n             setIsAssignmentModalOpen(false);\n             setSelectedLockerForAssignment(null);\n             setSelectedMember(null);\n+            setMemberPointBalance(0);\n+            setPointPayment(0);\n+            setReceivedAmount(0);\n             setSearchQuery('');\n             setSearchResults([]);\n           }}\n           width=\"min(95vw, 1000px)\"\n@@ -1697,8 +1709,11 @@\n               <SecondaryButton onClick={() => {\n                 setIsAssignmentModalOpen(false);\n                 setSelectedLockerForAssignment(null);\n                 setSelectedMember(null);\n+                setMemberPointBalance(0);\n+                setPointPayment(0);\n+                setReceivedAmount(0);\n                 setSearchQuery('');\n                 setSearchResults([]);\n                 setStartDate(new Date().toISOString().split('T')[0]);\n                 const defaultEndDate = new Date();\n"
                },
                {
                    "date": 1763376531999,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1020,9 +1020,9 @@\n           card: paymentMethod === 'card' ? cashPayment : 0,\n           transfer: paymentMethod === 'transfer' ? cashPayment : 0,\n           points: pointPayment\n         },\n-        orderType: 'course_enrollment' // 기존 타입 사용\n+        orderType: 'asset_assignment' // 라커 배정용 타입\n       });\n \n       console.log('라커 배정 주문 처리 완료:', orderId);\n \n"
                }
            ],
            "date": 1760163881525,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { AppColors } from '../../../styles/colors';\nimport { AppTextStyles } from '../../../styles/textStyles';\n\nconst Container = styled.div`\n  padding: 24px;\n  background-color: ${AppColors.surface};\n  min-height: 100vh;\n`;\n\nconst Title = styled.h1`\n  font-size: ${AppTextStyles.title1.fontSize};\n  font-weight: 700;\n  color: ${AppColors.onSurface};\n  margin-bottom: 24px;\n`;\n\nconst Content = styled.div`\n  background-color: ${AppColors.background};\n  padding: 32px;\n  border-radius: 12px;\n  border: 1px solid ${AppColors.borderLight};\n`;\n\nconst FilterSection = styled.div`\n  display: flex;\n  gap: 16px;\n  margin-bottom: 24px;\n  align-items: center;\n`;\n\nconst FilterLabel = styled.label`\n  font-size: ${AppTextStyles.body2.fontSize};\n  color: ${AppColors.onSurface};\n  font-weight: 500;\n`;\n\nconst FilterSelect = styled.select`\n  padding: 8px 12px;\n  border: 1px solid ${AppColors.borderLight};\n  border-radius: 6px;\n  background-color: ${AppColors.surface};\n  color: ${AppColors.onSurface};\n  font-size: ${AppTextStyles.body2.fontSize};\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n    border-color: ${AppColors.primary};\n  }\n`;\n\nconst LockerGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n  gap: 16px;\n  margin-bottom: 32px;\n`;\n\nconst LockerItem = styled.div<{ $status: 'available' | 'occupied' | 'maintenance' }>`\n  aspect-ratio: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid ${props => {\n    switch (props.$status) {\n      case 'available':\n        return AppColors.success;\n      case 'occupied':\n        return AppColors.error;\n      case 'maintenance':\n        return AppColors.warning;\n      default:\n        return AppColors.borderLight;\n    }\n  }};\n  border-radius: 8px;\n  background-color: ${props => {\n    switch (props.$status) {\n      case 'available':\n        return AppColors.success + '10';\n      case 'occupied':\n        return AppColors.error + '10';\n      case 'maintenance':\n        return AppColors.warning + '10';\n      default:\n        return AppColors.surface;\n    }\n  }};\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  }\n`;\n\nconst LockerNumber = styled.div`\n  font-size: ${AppTextStyles.body1.fontSize};\n  font-weight: 600;\n  color: ${AppColors.onSurface};\n  margin-bottom: 4px;\n`;\n\nconst LockerStatus = styled.div<{ $status: 'available' | 'occupied' | 'maintenance' }>`\n  font-size: ${AppTextStyles.label2.fontSize};\n  color: ${props => {\n    switch (props.$status) {\n      case 'available':\n        return AppColors.success;\n      case 'occupied':\n        return AppColors.error;\n      case 'maintenance':\n        return AppColors.warning;\n      default:\n        return AppColors.onInput2;\n    }\n  }};\n  font-weight: 500;\n`;\n\nconst StatusLegend = styled.div`\n  display: flex;\n  gap: 24px;\n  align-items: center;\n`;\n\nconst LegendItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst LegendColor = styled.div<{ $color: string }>`\n  width: 16px;\n  height: 16px;\n  border-radius: 4px;\n  background-color: ${props => props.$color};\n`;\n\nconst LegendText = styled.span`\n  font-size: ${AppTextStyles.body2.fontSize};\n  color: ${AppColors.onSurface};\n`;\n\nconst LockerManagement: React.FC = () => {\n  const [selectedFloor, setSelectedFloor] = useState<string>('1');\n  const [selectedType, setSelectedType] = useState<string>('all');\n\n  // 샘플 락커 데이터\n  const generateLockers = () => {\n    const lockers = [];\n    const totalLockers = selectedFloor === '1' ? 120 : 80;\n    \n    for (let i = 1; i <= totalLockers; i++) {\n      const lockerNumber = `${selectedFloor}${i.toString().padStart(3, '0')}`;\n      let status: 'available' | 'occupied' | 'maintenance';\n      \n      // 임의로 상태 배정\n      const rand = Math.random();\n      if (rand < 0.6) {\n        status = 'occupied';\n      } else if (rand < 0.9) {\n        status = 'available';\n      } else {\n        status = 'maintenance';\n      }\n      \n      lockers.push({\n        number: lockerNumber,\n        status,\n        type: i <= totalLockers / 2 ? 'standard' : 'large'\n      });\n    }\n    \n    return lockers;\n  };\n\n  const lockers = generateLockers();\n\n  const filteredLockers = lockers.filter(locker => {\n    if (selectedType === 'all') return true;\n    return locker.type === selectedType;\n  });\n\n  const getStatusText = (status: string) => {\n    switch (status) {\n      case 'available':\n        return '사용가능';\n      case 'occupied':\n        return '사용중';\n      case 'maintenance':\n        return '점검중';\n      default:\n        return '알 수 없음';\n    }\n  };\n\n  const handleLockerClick = (lockerNumber: string, status: string) => {\n    alert(`락커 ${lockerNumber} - 상태: ${getStatusText(status)}`);\n  };\n\n  return (\n    <Container>\n      <Title>락커 관리</Title>\n      <Content>\n        <FilterSection>\n          <FilterLabel>층수:</FilterLabel>\n          <FilterSelect\n            value={selectedFloor}\n            onChange={(e) => setSelectedFloor(e.target.value)}\n          >\n            <option value=\"1\">1층</option>\n            <option value=\"2\">2층</option>\n            <option value=\"3\">3층</option>\n          </FilterSelect>\n\n          <FilterLabel>타입:</FilterLabel>\n          <FilterSelect\n            value={selectedType}\n            onChange={(e) => setSelectedType(e.target.value)}\n          >\n            <option value=\"all\">전체</option>\n            <option value=\"standard\">일반형</option>\n            <option value=\"large\">대형</option>\n          </FilterSelect>\n\n          <StatusLegend>\n            <LegendItem>\n              <LegendColor $color={AppColors.success} />\n              <LegendText>사용가능</LegendText>\n            </LegendItem>\n            <LegendItem>\n              <LegendColor $color={AppColors.error} />\n              <LegendText>사용중</LegendText>\n            </LegendItem>\n            <LegendItem>\n              <LegendColor $color={AppColors.warning} />\n              <LegendText>점검중</LegendText>\n            </LegendItem>\n          </StatusLegend>\n        </FilterSection>\n\n        <LockerGrid>\n          {filteredLockers.map((locker) => (\n            <LockerItem\n              key={locker.number}\n              $status={locker.status}\n              onClick={() => handleLockerClick(locker.number, locker.status)}\n            >\n              <LockerNumber>{locker.number}</LockerNumber>\n              <LockerStatus $status={locker.status}>\n                {getStatusText(locker.status)}\n              </LockerStatus>\n            </LockerItem>\n          ))}\n        </LockerGrid>\n      </Content>\n    </Container>\n  );\n};\n\nexport default LockerManagement;\n"
        }
    ]
}