{
    "sourceFile": "src/App.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1757827860828,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1759899370650,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,17 @@\n import React from 'react';\n import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\n import { ToastContainer } from 'react-toastify';\n-import 'react-toastify/dist/ReactToastify.css';\n import UserPage from './pages/UserPage';\n import CMSRoutes from './pages/CMS';\n import { AdminAuthProvider } from './context/AdminAuthContext';\n import { DeviceProvider } from './context/DeviceContext';\n-import './App.css';\n \n+// 개발 환경에서 IndexedDB 개발자 도구 활성화\n+if (process.env.NODE_ENV === 'development') {\n+  import('./utils/devDBUtils');\n+}\n+\n function App() {\n   return (\n     <AdminAuthProvider>\n       <DeviceProvider>\n"
                },
                {
                    "date": 1759911046492,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,56 @@\n+import React, { useEffect } from 'react';\n+import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\n+import { ToastContainer } from 'react-toastify';\n+import UserPage from './pages/UserPage';\n+import CMSRoutes from './pages/CMS';\n+import { AdminAuthProvider } from './context/AdminAuthContext';\n+import { DeviceProvider } from './context/DeviceContext';\n+import { autoInitializeSystem } from './utils/systemInit';\n+\n+// 개발 환경에서 IndexedDB 개발자 도구 활성화\n+if (process.env.NODE_ENV === 'development') {\n+  import('./utils/devDBUtils');\n+}\n+\n+function App() {\n+  // 앱 시작 시 시스템 초기화\n+  useEffect(() => {\n+    const initSystem = async () => {\n+      await autoInitializeSystem();\n+    };\n+    initSystem();\n+  }, []);\n+\n+  return (\n+    <AdminAuthProvider>\n+      <DeviceProvider>\n+        <Router>\n+          <div className=\"App\">\n+            <Routes>\n+              {/* 루트 경로: 사용자 화면 */}\n+              <Route path=\"/\" element={<UserPage />} />\n+              \n+              {/* CMS 경로들 */}\n+              <Route path=\"/cms/*\" element={<CMSRoutes />} />\n+            </Routes>\n+            \n+            {/* Toast 알림 컨테이너 */}\n+            <ToastContainer\n+              position=\"top-right\"\n+              autoClose={3000}\n+              hideProgressBar={false}\n+              newestOnTop={false}\n+              closeOnClick\n+              rtl={false}\n+              pauseOnFocusLoss\n+              draggable\n+              pauseOnHover\n+            />\n+          </div>\n+        </Router>\n+      </DeviceProvider>\n+    </AdminAuthProvider>\n+  );\n+}\n+\n+export default App;\n"
                },
                {
                    "date": 1760256036862,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,51 +53,4 @@\n   );\n }\n \n export default App;\n-import React from 'react';\n-import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\n-import { ToastContainer } from 'react-toastify';\n-import UserPage from './pages/UserPage';\n-import CMSRoutes from './pages/CMS';\n-import { AdminAuthProvider } from './context/AdminAuthContext';\n-import { DeviceProvider } from './context/DeviceContext';\n-\n-// 개발 환경에서 IndexedDB 개발자 도구 활성화\n-if (process.env.NODE_ENV === 'development') {\n-  import('./utils/devDBUtils');\n-}\n-\n-function App() {\n-  return (\n-    <AdminAuthProvider>\n-      <DeviceProvider>\n-        <Router>\n-          <div className=\"App\">\n-            <Routes>\n-              {/* 루트 경로: 사용자 화면 */}\n-              <Route path=\"/\" element={<UserPage />} />\n-              \n-              {/* CMS 경로들 */}\n-              <Route path=\"/cms/*\" element={<CMSRoutes />} />\n-            </Routes>\n-            \n-            {/* Toast 알림 컨테이너 */}\n-            <ToastContainer\n-              position=\"top-right\"\n-              autoClose={3000}\n-              hideProgressBar={false}\n-              newestOnTop={false}\n-              closeOnClick\n-              rtl={false}\n-              pauseOnFocusLoss\n-              draggable\n-              pauseOnHover\n-            />\n-          </div>\n-        </Router>\n-      </DeviceProvider>\n-    </AdminAuthProvider>\n-  );\n-}\n-\n-export default App;\n"
                },
                {
                    "date": 1760755500679,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n import CMSRoutes from './pages/CMS';\n import { AdminAuthProvider } from './context/AdminAuthContext';\n import { DeviceProvider } from './context/DeviceContext';\n import { autoInitializeSystem } from './utils/systemInit';\n+import { dbManager } from './utils/indexedDB';\n \n // 개발 환경에서 IndexedDB 개발자 도구 활성화\n if (process.env.NODE_ENV === 'development') {\n   import('./utils/devDBUtils');\n@@ -15,13 +16,56 @@\n function App() {\n   // 앱 시작 시 시스템 초기화\n   useEffect(() => {\n     const initSystem = async () => {\n-      await autoInitializeSystem();\n+      try {\n+        console.log('🚀 App 시작: 시스템 초기화를 시작합니다...');\n+        \n+        // IndexedDB가 완전히 초기화될 때까지 대기\n+        await waitForDatabase();\n+        \n+        // 시스템 초기화 (시스템 관리자 자동 생성)\n+        console.log('📊 시스템 관리자 자동 생성을 시작합니다...');\n+        await autoInitializeSystem();\n+        \n+        console.log('✅ 시스템 초기화 완료');\n+      } catch (error) {\n+        console.error('❌ 시스템 초기화 실패:', error);\n+      }\n     };\n+    \n     initSystem();\n   }, []);\n \n+  /**\n+   * IndexedDB가 완전히 준비될 때까지 대기\n+   */\n+  const waitForDatabase = async (): Promise<void> => {\n+    let attempts = 0;\n+    const maxAttempts = 10; // 시도 횟수 줄임\n+    \n+    while (attempts < maxAttempts) {\n+      try {\n+        // IndexedDB 연결 테스트 - 더 간단한 테스트\n+        const allBranches = await dbManager.getAllBranches();\n+        console.log('✅ IndexedDB 연결 확인 완료, 지점 수:', allBranches.length);\n+        return;\n+      } catch (error) {\n+        attempts++;\n+        console.log(`🔄 IndexedDB 연결 대기 중... (${attempts}/${maxAttempts})`);\n+        \n+        if (attempts >= maxAttempts) {\n+          console.warn('⚠️ IndexedDB 연결 대기 시간 초과, 계속 진행합니다...');\n+          return; // 실패해도 계속 진행\n+        }\n+        \n+        // 대기 시간을 점진적으로 증가\n+        const waitTime = Math.min(500 * attempts, 2000);\n+        await new Promise(resolve => setTimeout(resolve, waitTime));\n+      }\n+    }\n+  };\n+\n   return (\n     <AdminAuthProvider>\n       <DeviceProvider>\n         <Router>\n"
                },
                {
                    "date": 1761379597433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\n import { ToastContainer } from 'react-toastify';\n import UserPage from './pages/UserPage';\n import CMSRoutes from './pages/CMS';\n+import ExercisePrescriptionPage from './pages/ExercisePrescriptionPage';\n import { AdminAuthProvider } from './context/AdminAuthContext';\n import { DeviceProvider } from './context/DeviceContext';\n import { autoInitializeSystem } from './utils/systemInit';\n import { dbManager } from './utils/indexedDB';\n@@ -73,8 +74,11 @@\n             <Routes>\n               {/* 루트 경로: 사용자 화면 */}\n               <Route path=\"/\" element={<UserPage />} />\n               \n+              {/* 운동처방 페이지 */}\n+              <Route path=\"/exercise-prescription\" element={<ExercisePrescriptionPage />} />\n+              \n               {/* CMS 경로들 */}\n               <Route path=\"/cms/*\" element={<CMSRoutes />} />\n             </Routes>\n             \n"
                },
                {
                    "date": 1761649777934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,9 +68,9 @@\n \n   return (\n     <AdminAuthProvider>\n       <DeviceProvider>\n-        <Router>\n+        <Router basename=\"/lavida_cms\">\n           <div className=\"App\">\n             <Routes>\n               {/* 루트 경로: 사용자 화면 */}\n               <Route path=\"/\" element={<UserPage />} />\n"
                }
            ],
            "date": 1757827860828,
            "name": "Commit-0",
            "content": "import React from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport UserPage from './pages/UserPage';\nimport CMSRoutes from './pages/CMS';\nimport { AdminAuthProvider } from './context/AdminAuthContext';\nimport { DeviceProvider } from './context/DeviceContext';\nimport './App.css';\n\nfunction App() {\n  return (\n    <AdminAuthProvider>\n      <DeviceProvider>\n        <Router>\n          <div className=\"App\">\n            <Routes>\n              {/* 루트 경로: 사용자 화면 */}\n              <Route path=\"/\" element={<UserPage />} />\n              \n              {/* CMS 경로들 */}\n              <Route path=\"/cms/*\" element={<CMSRoutes />} />\n            </Routes>\n            \n            {/* Toast 알림 컨테이너 */}\n            <ToastContainer\n              position=\"top-right\"\n              autoClose={3000}\n              hideProgressBar={false}\n              newestOnTop={false}\n              closeOnClick\n              rtl={false}\n              pauseOnFocusLoss\n              draggable\n              pauseOnHover\n            />\n          </div>\n        </Router>\n      </DeviceProvider>\n    </AdminAuthProvider>\n  );\n}\n\nexport default App;\n"
        }
    ]
}