{
    "sourceFile": "src/App.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1757827860828,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1759899370650,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,17 @@\n import React from 'react';\n import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\n import { ToastContainer } from 'react-toastify';\n-import 'react-toastify/dist/ReactToastify.css';\n import UserPage from './pages/UserPage';\n import CMSRoutes from './pages/CMS';\n import { AdminAuthProvider } from './context/AdminAuthContext';\n import { DeviceProvider } from './context/DeviceContext';\n-import './App.css';\n \n+// ê°œë°œ í™˜ê²½ì—ì„œ IndexedDB ê°œë°œì ë„êµ¬ í™œì„±í™”\n+if (process.env.NODE_ENV === 'development') {\n+  import('./utils/devDBUtils');\n+}\n+\n function App() {\n   return (\n     <AdminAuthProvider>\n       <DeviceProvider>\n"
                },
                {
                    "date": 1759911046492,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,56 @@\n+import React, { useEffect } from 'react';\n+import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\n+import { ToastContainer } from 'react-toastify';\n+import UserPage from './pages/UserPage';\n+import CMSRoutes from './pages/CMS';\n+import { AdminAuthProvider } from './context/AdminAuthContext';\n+import { DeviceProvider } from './context/DeviceContext';\n+import { autoInitializeSystem } from './utils/systemInit';\n+\n+// ê°œë°œ í™˜ê²½ì—ì„œ IndexedDB ê°œë°œì ë„êµ¬ í™œì„±í™”\n+if (process.env.NODE_ENV === 'development') {\n+  import('./utils/devDBUtils');\n+}\n+\n+function App() {\n+  // ì•± ì‹œì‘ ì‹œ ì‹œìŠ¤í…œ ì´ˆê¸°í™”\n+  useEffect(() => {\n+    const initSystem = async () => {\n+      await autoInitializeSystem();\n+    };\n+    initSystem();\n+  }, []);\n+\n+  return (\n+    <AdminAuthProvider>\n+      <DeviceProvider>\n+        <Router>\n+          <div className=\"App\">\n+            <Routes>\n+              {/* ë£¨íŠ¸ ê²½ë¡œ: ì‚¬ìš©ì í™”ë©´ */}\n+              <Route path=\"/\" element={<UserPage />} />\n+              \n+              {/* CMS ê²½ë¡œë“¤ */}\n+              <Route path=\"/cms/*\" element={<CMSRoutes />} />\n+            </Routes>\n+            \n+            {/* Toast ì•Œë¦¼ ì»¨í…Œì´ë„ˆ */}\n+            <ToastContainer\n+              position=\"top-right\"\n+              autoClose={3000}\n+              hideProgressBar={false}\n+              newestOnTop={false}\n+              closeOnClick\n+              rtl={false}\n+              pauseOnFocusLoss\n+              draggable\n+              pauseOnHover\n+            />\n+          </div>\n+        </Router>\n+      </DeviceProvider>\n+    </AdminAuthProvider>\n+  );\n+}\n+\n+export default App;\n"
                },
                {
                    "date": 1760256036862,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,51 +53,4 @@\n   );\n }\n \n export default App;\n-import React from 'react';\n-import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\n-import { ToastContainer } from 'react-toastify';\n-import UserPage from './pages/UserPage';\n-import CMSRoutes from './pages/CMS';\n-import { AdminAuthProvider } from './context/AdminAuthContext';\n-import { DeviceProvider } from './context/DeviceContext';\n-\n-// ê°œë°œ í™˜ê²½ì—ì„œ IndexedDB ê°œë°œì ë„êµ¬ í™œì„±í™”\n-if (process.env.NODE_ENV === 'development') {\n-  import('./utils/devDBUtils');\n-}\n-\n-function App() {\n-  return (\n-    <AdminAuthProvider>\n-      <DeviceProvider>\n-        <Router>\n-          <div className=\"App\">\n-            <Routes>\n-              {/* ë£¨íŠ¸ ê²½ë¡œ: ì‚¬ìš©ì í™”ë©´ */}\n-              <Route path=\"/\" element={<UserPage />} />\n-              \n-              {/* CMS ê²½ë¡œë“¤ */}\n-              <Route path=\"/cms/*\" element={<CMSRoutes />} />\n-            </Routes>\n-            \n-            {/* Toast ì•Œë¦¼ ì»¨í…Œì´ë„ˆ */}\n-            <ToastContainer\n-              position=\"top-right\"\n-              autoClose={3000}\n-              hideProgressBar={false}\n-              newestOnTop={false}\n-              closeOnClick\n-              rtl={false}\n-              pauseOnFocusLoss\n-              draggable\n-              pauseOnHover\n-            />\n-          </div>\n-        </Router>\n-      </DeviceProvider>\n-    </AdminAuthProvider>\n-  );\n-}\n-\n-export default App;\n"
                },
                {
                    "date": 1760755500679,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n import CMSRoutes from './pages/CMS';\n import { AdminAuthProvider } from './context/AdminAuthContext';\n import { DeviceProvider } from './context/DeviceContext';\n import { autoInitializeSystem } from './utils/systemInit';\n+import { dbManager } from './utils/indexedDB';\n \n // ê°œë°œ í™˜ê²½ì—ì„œ IndexedDB ê°œë°œì ë„êµ¬ í™œì„±í™”\n if (process.env.NODE_ENV === 'development') {\n   import('./utils/devDBUtils');\n@@ -15,13 +16,56 @@\n function App() {\n   // ì•± ì‹œì‘ ì‹œ ì‹œìŠ¤í…œ ì´ˆê¸°í™”\n   useEffect(() => {\n     const initSystem = async () => {\n-      await autoInitializeSystem();\n+      try {\n+        console.log('ğŸš€ App ì‹œì‘: ì‹œìŠ¤í…œ ì´ˆê¸°í™”ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...');\n+        \n+        // IndexedDBê°€ ì™„ì „íˆ ì´ˆê¸°í™”ë  ë•Œê¹Œì§€ ëŒ€ê¸°\n+        await waitForDatabase();\n+        \n+        // ì‹œìŠ¤í…œ ì´ˆê¸°í™” (ì‹œìŠ¤í…œ ê´€ë¦¬ì ìë™ ìƒì„±)\n+        console.log('ğŸ“Š ì‹œìŠ¤í…œ ê´€ë¦¬ì ìë™ ìƒì„±ì„ ì‹œì‘í•©ë‹ˆë‹¤...');\n+        await autoInitializeSystem();\n+        \n+        console.log('âœ… ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');\n+      } catch (error) {\n+        console.error('âŒ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);\n+      }\n     };\n+    \n     initSystem();\n   }, []);\n \n+  /**\n+   * IndexedDBê°€ ì™„ì „íˆ ì¤€ë¹„ë  ë•Œê¹Œì§€ ëŒ€ê¸°\n+   */\n+  const waitForDatabase = async (): Promise<void> => {\n+    let attempts = 0;\n+    const maxAttempts = 10; // ì‹œë„ íšŸìˆ˜ ì¤„ì„\n+    \n+    while (attempts < maxAttempts) {\n+      try {\n+        // IndexedDB ì—°ê²° í…ŒìŠ¤íŠ¸ - ë” ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸\n+        const allBranches = await dbManager.getAllBranches();\n+        console.log('âœ… IndexedDB ì—°ê²° í™•ì¸ ì™„ë£Œ, ì§€ì  ìˆ˜:', allBranches.length);\n+        return;\n+      } catch (error) {\n+        attempts++;\n+        console.log(`ğŸ”„ IndexedDB ì—°ê²° ëŒ€ê¸° ì¤‘... (${attempts}/${maxAttempts})`);\n+        \n+        if (attempts >= maxAttempts) {\n+          console.warn('âš ï¸ IndexedDB ì—°ê²° ëŒ€ê¸° ì‹œê°„ ì´ˆê³¼, ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤...');\n+          return; // ì‹¤íŒ¨í•´ë„ ê³„ì† ì§„í–‰\n+        }\n+        \n+        // ëŒ€ê¸° ì‹œê°„ì„ ì ì§„ì ìœ¼ë¡œ ì¦ê°€\n+        const waitTime = Math.min(500 * attempts, 2000);\n+        await new Promise(resolve => setTimeout(resolve, waitTime));\n+      }\n+    }\n+  };\n+\n   return (\n     <AdminAuthProvider>\n       <DeviceProvider>\n         <Router>\n"
                },
                {
                    "date": 1761379597433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\n import { ToastContainer } from 'react-toastify';\n import UserPage from './pages/UserPage';\n import CMSRoutes from './pages/CMS';\n+import ExercisePrescriptionPage from './pages/ExercisePrescriptionPage';\n import { AdminAuthProvider } from './context/AdminAuthContext';\n import { DeviceProvider } from './context/DeviceContext';\n import { autoInitializeSystem } from './utils/systemInit';\n import { dbManager } from './utils/indexedDB';\n@@ -73,8 +74,11 @@\n             <Routes>\n               {/* ë£¨íŠ¸ ê²½ë¡œ: ì‚¬ìš©ì í™”ë©´ */}\n               <Route path=\"/\" element={<UserPage />} />\n               \n+              {/* ìš´ë™ì²˜ë°© í˜ì´ì§€ */}\n+              <Route path=\"/exercise-prescription\" element={<ExercisePrescriptionPage />} />\n+              \n               {/* CMS ê²½ë¡œë“¤ */}\n               <Route path=\"/cms/*\" element={<CMSRoutes />} />\n             </Routes>\n             \n"
                },
                {
                    "date": 1761649777934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,9 +68,9 @@\n \n   return (\n     <AdminAuthProvider>\n       <DeviceProvider>\n-        <Router>\n+        <Router basename=\"/lavida_cms\">\n           <div className=\"App\">\n             <Routes>\n               {/* ë£¨íŠ¸ ê²½ë¡œ: ì‚¬ìš©ì í™”ë©´ */}\n               <Route path=\"/\" element={<UserPage />} />\n"
                },
                {
                    "date": 1765880708034,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import { ToastContainer } from 'react-toastify';\n import UserPage from './pages/UserPage';\n import CMSRoutes from './pages/CMS';\n import ExercisePrescriptionPage from './pages/ExercisePrescriptionPage';\n+import PaymentPR from './pages/PaymentPR';\n import { AdminAuthProvider } from './context/AdminAuthContext';\n import { DeviceProvider } from './context/DeviceContext';\n import { autoInitializeSystem } from './utils/systemInit';\n import { dbManager } from './utils/indexedDB';\n@@ -77,8 +78,11 @@\n               \n               {/* ìš´ë™ì²˜ë°© í˜ì´ì§€ */}\n               <Route path=\"/exercise-prescription\" element={<ExercisePrescriptionPage />} />\n               \n+              {/* PG ì‹¬ì‚¬ìš© ê²°ì œ í˜ì´ì§€ */}\n+              <Route path=\"/pr\" element={<PaymentPR />} />\n+              \n               {/* CMS ê²½ë¡œë“¤ */}\n               <Route path=\"/cms/*\" element={<CMSRoutes />} />\n             </Routes>\n             \n"
                },
                {
                    "date": 1765880847308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n import React, { useEffect } from 'react';\n import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\n import { ToastContainer } from 'react-toastify';\n-import UserPage from './pages/UserPage';\n import CMSRoutes from './pages/CMS';\n import ExercisePrescriptionPage from './pages/ExercisePrescriptionPage';\n import PaymentPR from './pages/PaymentPR';\n import { AdminAuthProvider } from './context/AdminAuthContext';\n@@ -72,17 +71,14 @@\n       <DeviceProvider>\n         <Router basename=\"/lavida_cms\">\n           <div className=\"App\">\n             <Routes>\n-              {/* ë£¨íŠ¸ ê²½ë¡œ: ì‚¬ìš©ì í™”ë©´ */}\n-              <Route path=\"/\" element={<UserPage />} />\n+              {/* ë£¨íŠ¸ ê²½ë¡œ: PG ì‹¬ì‚¬ìš© ê²°ì œ í˜ì´ì§€ */}\n+              <Route path=\"/\" element={<PaymentPR />} />\n               \n               {/* ìš´ë™ì²˜ë°© í˜ì´ì§€ */}\n               <Route path=\"/exercise-prescription\" element={<ExercisePrescriptionPage />} />\n               \n-              {/* PG ì‹¬ì‚¬ìš© ê²°ì œ í˜ì´ì§€ */}\n-              <Route path=\"/pr\" element={<PaymentPR />} />\n-              \n               {/* CMS ê²½ë¡œë“¤ */}\n               <Route path=\"/cms/*\" element={<CMSRoutes />} />\n             </Routes>\n             \n"
                }
            ],
            "date": 1757827860828,
            "name": "Commit-0",
            "content": "import React from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport UserPage from './pages/UserPage';\nimport CMSRoutes from './pages/CMS';\nimport { AdminAuthProvider } from './context/AdminAuthContext';\nimport { DeviceProvider } from './context/DeviceContext';\nimport './App.css';\n\nfunction App() {\n  return (\n    <AdminAuthProvider>\n      <DeviceProvider>\n        <Router>\n          <div className=\"App\">\n            <Routes>\n              {/* ë£¨íŠ¸ ê²½ë¡œ: ì‚¬ìš©ì í™”ë©´ */}\n              <Route path=\"/\" element={<UserPage />} />\n              \n              {/* CMS ê²½ë¡œë“¤ */}\n              <Route path=\"/cms/*\" element={<CMSRoutes />} />\n            </Routes>\n            \n            {/* Toast ì•Œë¦¼ ì»¨í…Œì´ë„ˆ */}\n            <ToastContainer\n              position=\"top-right\"\n              autoClose={3000}\n              hideProgressBar={false}\n              newestOnTop={false}\n              closeOnClick\n              rtl={false}\n              pauseOnFocusLoss\n              draggable\n              pauseOnHover\n            />\n          </div>\n        </Router>\n      </DeviceProvider>\n    </AdminAuthProvider>\n  );\n}\n\nexport default App;\n"
        }
    ]
}