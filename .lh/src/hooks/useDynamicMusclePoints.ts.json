{
    "sourceFile": "src/hooks/useDynamicMusclePoints.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1764758207266,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764758595043,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,16 +68,19 @@\n \n   const resetMusclePoint = useCallback((muscleId: string, muscleType: 'front' | 'back') => {\n     const currentMuscles = muscleType === 'front' ? frontMuscles : backMuscles;\n     const setMuscles = muscleType === 'front' ? setFrontMuscles : setBackMuscles;\n+    const originalMuscles = muscleType === 'front' ? initialFrontMuscles : initialBackMuscles;\n     \n     const muscle = currentMuscles[muscleId];\n-    if (muscle && muscle.isDynamic) {\n+    const originalMuscle = originalMuscles[muscleId];\n+    if (muscle && muscle.isDynamic && originalMuscle) {\n       setMuscles({\n         ...currentMuscles,\n         [muscleId]: {\n           ...muscle,\n-          point: null,\n+          point: originalMuscle.point, // 원래 기본값으로 복원\n+          linePoints: originalMuscle.linePoints, // 원래 라인포인트로 복원\n           isSelected: false\n         }\n       });\n       \n"
                }
            ],
            "date": 1764758207266,
            "name": "Commit-0",
            "content": "import { useState, useCallback } from 'react';\nimport { \n  MusclePoint, \n  setMusclePoint, \n  clearAllSelections, \n  findMuscleAtPosition,\n  frontMuscles as initialFrontMuscles,\n  backMuscles as initialBackMuscles\n} from '../constants/muscleCoordinates';\n\nexport interface UseDynamicMusclePointsReturn {\n  frontMuscles: { [key: string]: MusclePoint };\n  backMuscles: { [key: string]: MusclePoint };\n  handleMuscleClick: (position: { x: number, y: number }, muscleType: 'front' | 'back') => void;\n  clearSelections: () => void;\n  selectedMuscle: string | null;\n  resetMusclePoint: (muscleId: string, muscleType: 'front' | 'back') => void;\n}\n\nexport const useDynamicMusclePoints = (): UseDynamicMusclePointsReturn => {\n  const [frontMuscles, setFrontMuscles] = useState<{ [key: string]: MusclePoint }>(initialFrontMuscles);\n  const [backMuscles, setBackMuscles] = useState<{ [key: string]: MusclePoint }>(initialBackMuscles);\n  const [selectedMuscle, setSelectedMuscle] = useState<string | null>(null);\n\n  const handleMuscleClick = useCallback((position: { x: number, y: number }, muscleType: 'front' | 'back') => {\n    const currentMuscles = muscleType === 'front' ? frontMuscles : backMuscles;\n    const setMuscles = muscleType === 'front' ? setFrontMuscles : setBackMuscles;\n    \n    // 클릭된 위치에 있는 근육 찾기\n    const clickedMuscleId = findMuscleAtPosition(position, currentMuscles);\n    \n    if (clickedMuscleId) {\n      const clickedMuscle = currentMuscles[clickedMuscleId];\n      \n      // 동적 근육인 경우에만 포인트 설정\n      if (clickedMuscle.isDynamic) {\n        // 모든 선택 해제 후 새로운 포인트 설정\n        const clearedMuscles = clearAllSelections(currentMuscles);\n        const updatedMuscles = setMusclePoint(clickedMuscleId, position, clearedMuscles);\n        \n        if (updatedMuscles) {\n          setMuscles(updatedMuscles);\n          setSelectedMuscle(clickedMuscleId);\n        }\n      } else {\n        // 정적 근육인 경우 단순히 선택만 변경\n        const clearedMuscles = clearAllSelections(currentMuscles);\n        setMuscles({\n          ...clearedMuscles,\n          [clickedMuscleId]: {\n            ...clearedMuscles[clickedMuscleId],\n            isSelected: true\n          }\n        });\n        setSelectedMuscle(clickedMuscleId);\n      }\n    } else {\n      // 빈 공간 클릭시 모든 선택 해제\n      clearSelections();\n    }\n  }, [frontMuscles, backMuscles]);\n\n  const clearSelections = useCallback(() => {\n    setFrontMuscles(clearAllSelections(frontMuscles));\n    setBackMuscles(clearAllSelections(backMuscles));\n    setSelectedMuscle(null);\n  }, [frontMuscles, backMuscles]);\n\n  const resetMusclePoint = useCallback((muscleId: string, muscleType: 'front' | 'back') => {\n    const currentMuscles = muscleType === 'front' ? frontMuscles : backMuscles;\n    const setMuscles = muscleType === 'front' ? setFrontMuscles : setBackMuscles;\n    \n    const muscle = currentMuscles[muscleId];\n    if (muscle && muscle.isDynamic) {\n      setMuscles({\n        ...currentMuscles,\n        [muscleId]: {\n          ...muscle,\n          point: null,\n          isSelected: false\n        }\n      });\n      \n      if (selectedMuscle === muscleId) {\n        setSelectedMuscle(null);\n      }\n    }\n  }, [frontMuscles, backMuscles, selectedMuscle]);\n\n  return {\n    frontMuscles,\n    backMuscles,\n    handleMuscleClick,\n    clearSelections,\n    selectedMuscle,\n    resetMusclePoint\n  };\n};"
        }
    ]
}