{
    "sourceFile": "src/customComponents/AppIdTextField.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1763464456895,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1763464456895,
            "name": "Commit-0",
            "content": "'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { toast } from 'react-toastify';\nimport { AppTextField } from './AppTextField';\n\n// 다국어 텍스트 객체\nconst texts = {\n  ko: {\n    userId: '아이디',\n    placeholder: '영문자와 숫자를 포함한 6~20자',\n    errorMessage: '아이디는 영문자와 숫자를 포함한 6~20자여야 합니다'\n  },\n  en: {\n    userId: 'User ID',\n    placeholder: '6-20 characters with letters and numbers',\n    errorMessage: 'User ID must be 6-20 characters with letters and numbers'\n  },\n};\n\nexport interface AppIdTextFieldProps {\n  value: string;\n  onChange: (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  label?: string;\n  placeholder?: string;\n  errorMessage?: string;\n  readOnly?: boolean;\n  \n  // 아이디 validation 관련\n  onValidationChange?: (isValid: boolean) => void;\n  showValidationMessage?: boolean;\n  \n  // 기타 TextField props\n  autoComplete?: string;\n  autoFocus?: boolean;\n  \n  // 언어 설정\n  language?: 'ko' | 'en';\n}\n\nexport const AppIdTextField: React.FC<AppIdTextFieldProps> = ({\n  value,\n  onChange,\n  label,\n  placeholder,\n  errorMessage,\n  readOnly = false,\n  onValidationChange,\n  showValidationMessage = true,\n  autoComplete = 'username',\n  autoFocus = false,\n  language = 'ko',\n}) => {\n  const [internalError, setInternalError] = useState<string>('');\n  const lastToastShownRef = useRef<boolean>(false);\n\n  const t = texts[language];\n  \n  // 기본값 설정 (언어에 따라)\n  const displayLabel = label || t.userId;\n  const displayPlaceholder = placeholder || t.placeholder;\n\n  // 아이디 validation (영문자와 숫자를 포함한 6~20자)\n  const validateUserId = (value: string) => {\n    const pattern = /^(?=.*[A-Za-z])(?=.*[0-9])[A-Za-z0-9]{6,20}$/;\n    return pattern.test(value);\n  };\n\n  // validation 로직\n  const isValid = validateUserId(value);\n\n  // validation 상태 변경 시 콜백 호출\n  useEffect(() => {\n    if (onValidationChange) {\n      onValidationChange(isValid);\n    }\n  }, [isValid, onValidationChange]);\n\n  // 내부 에러 메시지 처리\n  useEffect(() => {\n    if (value && !isValid && showValidationMessage) {\n      setInternalError(t.errorMessage);\n      // 6자 이상 입력했을 때만 토스트 메시지 표시 (한 번만)\n      if (value.length >= 6 && !lastToastShownRef.current) {\n        toast.error(t.errorMessage);\n        lastToastShownRef.current = true;\n      }\n    } else {\n      setInternalError('');\n      // 에러가 해결되면 토스트 플래그 리셋\n      if (lastToastShownRef.current) {\n        lastToastShownRef.current = false;\n      }\n    }\n  }, [value, isValid, showValidationMessage, t.errorMessage]);\n\n  // 한글과 특수문자 입력 방지 처리 (영문자와 숫자만 허용)\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const inputValue = e.target.value;\n    // 영문자와 숫자만 허용 (한글, 특수문자 제거)\n    const filteredValue = inputValue.replace(/[^A-Za-z0-9]/g, '');\n    \n    // 필터링된 값으로 이벤트 객체 수정\n    e.target.value = filteredValue;\n    onChange(e);\n  };\n\n  // 외부에서 전달된 errorMessage가 우선\n  const displayErrorMessage = errorMessage || internalError;\n\n  return (\n    <AppTextField\n      value={value}\n      onChange={handleChange}\n      label={displayLabel}\n      placeholder={displayPlaceholder}\n      errorMessage={displayErrorMessage}\n      readOnly={readOnly}\n      autoComplete={autoComplete}\n      autoFocus={autoFocus}\n      type=\"text\"\n      inputMode=\"text\"\n    />\n  );\n};\n"
        }
    ]
}