{
    "sourceFile": "src/customComponents/AppPwdTextField.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1763464456895,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1763464456895,
            "name": "Commit-0",
            "content": "'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { toast } from 'react-toastify';\nimport { AppTextField } from './AppTextField';\nimport { AppColors } from '../styles/colors';\n\n// 다국어 텍스트 객체\nconst texts = {\n  ko: {\n    password: '비밀번호',\n    passwordConfirm: '비밀번호 확인',\n    passwordPlaceholder: '(영어 + 숫자 + 특수문자 포함 8자 이상)',\n    passwordConfirmPlaceholder: '비밀번호를 한 번 더 입력해주세요',\n    passwordError: '비밀번호는 영문자, 숫자, 특수문자를 포함하여 8자리 이상이어야 합니다',\n    passwordConfirmError: '비밀번호가 일치하지 않습니다',\n    passwordValid: '✓ 유효한 비밀번호입니다',\n    passwordConfirmValid: '✓ 비밀번호가 일치합니다'\n  },\n  en: {\n    password: 'Password',\n    passwordConfirm: 'Confirm Password',\n    passwordPlaceholder: '(8+ chars with letters, numbers, and symbols)',\n    passwordConfirmPlaceholder: 'Please enter your password again',\n    passwordError: 'Password must be at least 8 characters with letters, numbers, and symbols',\n    passwordConfirmError: 'Passwords do not match',\n    passwordValid: '✓ Valid password',\n    passwordConfirmValid: '✓ Passwords match'\n  },\n};\n\nexport enum PwdFieldType {\n  PASSWORD = 'password',\n  PASSWORD_CONFIRM = 'passwordConfirm'\n}\n\nexport interface AppPwdTextFieldProps {\n  value: string;\n  onChange: (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  fieldType: PwdFieldType;\n  label?: string;\n  placeholder?: string;\n  errorMessage?: string;\n  readOnly?: boolean;\n  \n  // 비밀번호 validation 관련\n  onValidationChange?: (isValid: boolean) => void;\n  showValidationMessage?: boolean;\n  \n  // 비밀번호 확인용 (fieldType이 PASSWORD_CONFIRM일 때)\n  originalPassword?: string;\n  \n  // 기타 TextField props\n  autoComplete?: string;\n  autoFocus?: boolean;\n  \n  // 언어 설정\n  language?: 'ko' | 'en';\n}\n\nexport const AppPwdTextField: React.FC<AppPwdTextFieldProps> = ({\n  value,\n  onChange,\n  fieldType,\n  label,\n  placeholder,\n  errorMessage,\n  readOnly = false,\n  onValidationChange,\n  showValidationMessage = true,\n  originalPassword = '',\n  autoComplete,\n  autoFocus = false,\n  language = 'ko',\n}) => {\n  const [internalError, setInternalError] = useState<string>('');\n  const lastToastShownRef = useRef<boolean>(false);\n\n  const t = texts[language];\n\n  // 기본 라벨과 placeholder 설정\n  const defaultLabel = fieldType === PwdFieldType.PASSWORD ? t.password : t.passwordConfirm;\n  const defaultPlaceholder = fieldType === PwdFieldType.PASSWORD \n    ? t.passwordPlaceholder\n    : t.passwordConfirmPlaceholder;\n  const defaultAutoComplete = fieldType === PwdFieldType.PASSWORD ? 'new-password' : 'new-password';\n\n  // 비밀번호 validation (영문, 숫자, 특수문자 각각 1개 이상 포함, 8자 이상)\n  const validatePassword = (pwd: string) => {\n    const regex = /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/;\n    return regex.test(pwd);\n  };\n\n  // 비밀번호 확인 validation\n  const validatePasswordConfirm = (confirmPwd: string, originalPwd: string) => {\n    return confirmPwd === originalPwd;\n  };\n\n  // validation 로직\n  const isValid = fieldType === PwdFieldType.PASSWORD \n    ? validatePassword(value)\n    : validatePasswordConfirm(value, originalPassword);\n\n  // validation 상태 변경 시 콜백 호출\n  useEffect(() => {\n    if (onValidationChange) {\n      onValidationChange(isValid);\n    }\n  }, [isValid, onValidationChange]);\n\n  // 내부 에러 메시지 처리\n  useEffect(() => {\n    if (value && !isValid && showValidationMessage) {\n      if (fieldType === PwdFieldType.PASSWORD) {\n        setInternalError(t.passwordError);\n        // 8자 이상 입력했을 때만 토스트 메시지 표시 (한 번만)\n        if (value.length >= 8 && !lastToastShownRef.current) {\n          toast.error(t.passwordError);\n          lastToastShownRef.current = true;\n        }\n      } else {\n        setInternalError(t.passwordConfirmError);\n        // 비밀번호 확인은 4자 이상일 때 토스트 표시 (한 번만)\n        if (value.length >= 4 && !lastToastShownRef.current) {\n          toast.error(t.passwordConfirmError);\n          lastToastShownRef.current = true;\n        }\n      }\n    } else {\n      setInternalError('');\n      // 에러가 해결되면 토스트 플래그 리셋\n      if (lastToastShownRef.current) {\n        lastToastShownRef.current = false;\n      }\n    }\n  }, [value, isValid, showValidationMessage, fieldType, t]);\n\n  // 외부에서 전달된 errorMessage가 우선\n  const displayErrorMessage = errorMessage || internalError;\n\n  // const validationMessage = showValidationMessage && value && !displayErrorMessage && isValid ? (\n  //   <div style={{ \n  //     fontSize: '12px', \n  //     color: AppColors.onInput2, \n  //     marginTop: '4px' \n  //   }}>\n  //     {fieldType === PwdFieldType.PASSWORD \n  //       ? t.passwordValid\n  //       : t.passwordConfirmValid}\n  //   </div>\n  // ) : null;\n\n  return (\n    <div>\n      <AppTextField\n        value={value}\n        onChange={onChange}\n        label={label || defaultLabel}\n        placeholder={placeholder || defaultPlaceholder}\n        errorMessage={displayErrorMessage}\n        readOnly={readOnly}\n        isPasswordField={true}\n        showSuffixIcon={true}\n        autoComplete={autoComplete || defaultAutoComplete}\n        autoFocus={autoFocus}\n        type=\"password\"\n      />\n      {/* {validationMessage} */}\n    </div>\n  );\n};\n"
        }
    ]
}