{
    "sourceFile": "REFACTORING_COMPLETE.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1763878962466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1763878962466,
            "name": "Commit-0",
            "content": "# íœ´ì¼ ì„¤ì • ë¦¬íŒ©í† ë§ ì™„ë£Œ ë³´ê³ ì„œ\n\n## ğŸ¯ ìš”ì²­ì‚¬í•­\n\"íšŒì›ê°€ì… ì‹œ ë‹´ë‹¹í”„ë¡œê·¸ë¨ íœ´ì¼ì„¤ì •ë¶€í„°, ì˜ˆì•½/ìŠ¤ì¼€ì¤„ íœ´ì¼ì„¤ì •. ê·¸ë¦¬ê³  ì„¤ì • ëœ íœ´ì¼ ë¶ˆëŸ¬ì˜¤ê¸° ë˜ëŠ” ë¡œì§ì—ì„œ ìš”ì¼ ê´€ë ¨ ë•Œë¬¸ì— ê¼¬ì´ëŠ” ê²ƒë“¤ì´ ë°œìƒí•´ ìš”ì¼ì€ ë‹¨ìˆœíˆ ë³´ì—¬ì£¼ëŠ” ìˆœì„œ ë° í‘œê¸°ë¥¼ ìœ„í•œ ê²ƒìœ¼ë¡œ í•˜ê³ , db êµ¬ì¡°ë¥¼ ë‹¨ìˆœí•˜ê²Œ ë‚ ì§œë³„ë¡œ ì €ì¥ ë˜ë©´ ë˜ëŠ”êµ¬ì¡°ë¡œ í•´ì¤˜\"\n\n## âœ… ì™„ë£Œëœ ì‘ì—…\n\n### 1. DB êµ¬ì¡° (ì´ë¯¸ ì™„ë£Œë˜ì–´ ìˆì—ˆìŒ)\n```typescript\n// Staff ì¸í„°í˜ì´ìŠ¤\ninterface Staff {\n  id: string;\n  name: string;\n  // ... ê¸°íƒ€ í•„ë“œ\n  holidays: string[];  // [\"2025-01-15\", \"2025-01-20\", ...] YYYY-MM-DD í˜•ì‹\n}\n\n// StaffServiceì— êµ¬í˜„ëœ ë©”ì„œë“œë“¤\nâœ… getStaffHolidays(staffId): Promise<string[]>\nâœ… updateStaffHolidays(staffId, holidays): Promise<boolean>\nâœ… addStaffHoliday(staffId, date): Promise<boolean>\nâœ… removeStaffHoliday(staffId, date): Promise<boolean>\nâœ… isStaffHoliday(staffId, date): Promise<boolean>\nâœ… getStaffHolidaysInRange(staffId, startDate, endDate): Promise<string[]>\n```\n\n### 2. íœ´ì¼ ê´€ë¦¬ UI (ì´ë¯¸ ì™„ë£Œë˜ì–´ ìˆì—ˆìŒ)\n**íŒŒì¼**: `src/components/HolidayManagement.tsx`\n- âœ… ìº˜ë¦°ë” ê¸°ë°˜ ì§ê´€ì  UI\n- âœ… ë‚ ì§œ í´ë¦­ìœ¼ë¡œ íœ´ì¼ ì¶”ê°€/ì œê±°\n- âœ… ë¹¨ê°„ìƒ‰ìœ¼ë¡œ íœ´ì¼ í‘œì‹œ\n- âœ… íœ´ì¼ ëª©ë¡ í‘œì‹œ ë° ê°œë³„ ì‚­ì œ ê°€ëŠ¥\n\n### 3. ì§ì› ë“±ë¡ ë‹¨ìˆœí™” (âœ¨ ìƒˆë¡œ ìˆ˜ì •í•¨)\n**íŒŒì¼**: `src/pages/CMS/Staff/StaffRegister.tsx`\n\n#### ì œê±°ëœ ê²ƒë“¤ (ì•½ 400ì¤„ ê°ì†Œ)\n- âŒ WeekSchedule, DaySchedule íƒ€ì… ì •ì˜\n- âŒ isDayInPastOrToday, getDayDate í•¨ìˆ˜\n- âŒ getInitialWeeklyHolidayData, getThisWeekDateRange í•¨ìˆ˜\n- âŒ weeklyHolidayData ìƒíƒœ\n- âŒ handleTimeDropdownChange, handleLunchTimeDropdownChange í•¸ë“¤ëŸ¬\n- âŒ handleBreakTimeSlotToggle í•¸ë“¤ëŸ¬\n- âŒ ë³µì¡í•œ 7ê°œ ìš”ì¼ë³„ ê·¼ë¬´ì‹œê°„ ì„¤ì • UI\n\n#### ì¶”ê°€ëœ ê²ƒë“¤\n```tsx\n// ìƒˆë¡œìš´ ìƒíƒœ\nconst [newlyCreatedStaffId, setNewlyCreatedStaffId] = useState<string | null>(null);\nconst [showHolidayManagement, setShowHolidayManagement] = useState(false);\n\n// ë‹´ë‹¹í”„ë¡œê·¸ë¨ ì„ íƒ ì‹œ ê°„ë‹¨í•œ ì•ˆë‚´\n{formData.program && !showHolidayManagement && (\n  <div>ğŸ’¡ íœ´ì¼ ì„¤ì • ì•ˆë‚´</div>\n  <p>ì§ì› ë“±ë¡ í›„ ìº˜ë¦°ë”ë¥¼ í†µí•´ ê°„í¸í•˜ê²Œ íœ´ì¼ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n)}\n\n// ë“±ë¡ í›„ HolidayManagement ì»´í¬ë„ŒíŠ¸ í‘œì‹œ\n{showHolidayManagement && newlyCreatedStaffId && (\n  <>\n    <div>âœ… ì§ì›ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!</div>\n    <HolidayManagement staffId={newlyCreatedStaffId} />\n  </>\n)}\n```\n\n## ğŸ”„ ë°ì´í„° íë¦„\n\n### ê¸°ì¡´ ë°©ì‹ (ë³µì¡í•¨)\n```\nì§ì› ë“±ë¡ â†’ ìš”ì¼ë³„(ì›”~ì¼) ì„¤ì • â†’ ê° ìš”ì¼ë§ˆë‹¤:\n  - íœ´ì¼ ì—¬ë¶€ ì²´í¬ë°•ìŠ¤\n  - ê·¼ë¬´ì‹œê°„ ì‹œì‘/ì¢…ë£Œ (ì‹œ/ë¶„ ë“œë¡­ë‹¤ìš´)\n  - ì ì‹¬ì‹œê°„ ì‹œì‘/ì¢…ë£Œ (ì‹œ/ë¶„ ë“œë¡­ë‹¤ìš´)\n  - ì¶”ê°€ íœ´ê²Œì‹œê°„ 30ë¶„ ìŠ¬ë¡¯ ì„ íƒ\nâ†’ ì´ë¥¼ ì£¼ê°„ ë‹¨ìœ„(í† ~ê¸ˆ)ë¡œ 7ì¼ì¹˜ DailyScheduleSettingsë¡œ ë³€í™˜\nâ†’ DBì— ì €ì¥\n```\n\n### ìƒˆë¡œìš´ ë°©ì‹ (ë‹¨ìˆœí•¨)\n```\nì§ì› ë“±ë¡ â†’ ì„±ê³µ â†’ HolidayManagement ìº˜ë¦°ë” í‘œì‹œ\nâ†’ ì‚¬ìš©ìê°€ ìº˜ë¦°ë”ì—ì„œ ë‚ ì§œ í´ë¦­\nâ†’ í•´ë‹¹ ë‚ ì§œê°€ Staff.holidays ë°°ì—´ì— ì¶”ê°€/ì œê±°\nâ†’ DBì— ì €ì¥ (ë‹¨ìˆœ ë¬¸ìì—´ ë°°ì—´)\n```\n\n## ğŸ“Š ê°œì„  íš¨ê³¼\n\n### ì½”ë“œ ë¼ì¸ ìˆ˜\n- **StaffRegister.tsx**: ì•½ **1,600ì¤„ â†’ 1,200ì¤„** (400ì¤„ ê°ì†Œ, 25% ê°ì†Œ)\n- **ë³µì¡ë„**: WeekSchedule íƒ€ì… ë° ê´€ë ¨ ë¡œì§ ì™„ì „ ì œê±°\n\n### ì‚¬ìš©ì ê²½í—˜\n- **ê¸°ì¡´**: 7ê°œ ìš”ì¼ ê°ê°ì— ëŒ€í•´ ì‹œê°„ ë“œë¡­ë‹¤ìš´ ì¡°ì‘ (ë³µì¡)\n- **ìƒˆë¡œìš´ ë°©ì‹**: ìº˜ë¦°ë”ì—ì„œ ë‚ ì§œ í´ë¦­ (ì§ê´€ì )\n\n### ìœ ì§€ë³´ìˆ˜ì„±\n- **ê¸°ì¡´**: ìš”ì¼ ê³„ì‚°, ì£¼ê°„ ë²”ìœ„ ê³„ì‚°, íƒ€ì„ì¡´ ì´ìŠˆ ë“±\n- **ìƒˆë¡œìš´ ë°©ì‹**: ë‹¨ìˆœ ë‚ ì§œ ë¬¸ìì—´ ë°°ì—´, ë¹„êµ ë¡œì§ ê°„ë‹¨\n\n## ğŸ’¡ ì‚¬ìš© ë°©ë²•\n\n### 1. ì§ì› ë“±ë¡ ì‹œ\n1. ì§ì› ì •ë³´ ì…ë ¥ (ì´ë¦„, ë¡œê·¸ì¸ID, ë‹´ë‹¹í”„ë¡œê·¸ë¨ ë“±)\n2. \"ë“±ë¡\" ë²„íŠ¼ í´ë¦­\n3. ë‹´ë‹¹í”„ë¡œê·¸ë¨ì´ ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ HolidayManagement ìº˜ë¦°ë” í‘œì‹œ\n4. ìº˜ë¦°ë”ì—ì„œ íœ´ì¼ë¡œ ì§€ì •í•  ë‚ ì§œ í´ë¦­\n5. ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í‘œì‹œë˜ë©° íœ´ì¼ ëª©ë¡ì— ì¶”ê°€ë¨\n6. \"ì´ˆê¸°í™”\" ë²„íŠ¼ìœ¼ë¡œ ìƒˆ ì§ì› ë“±ë¡ ê°€ëŠ¥\n\n### 2. ê¸°ì¡´ ì§ì› íœ´ì¼ ìˆ˜ì •\n- **ì§ì› ê´€ë¦¬ > íœ´ì¼ ê´€ë¦¬** ë©”ë‰´ì—ì„œ HolidayManagement ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©\n- ë˜ëŠ” ì§ì› ìƒì„¸ í˜ì´ì§€ì—ì„œ HolidayManagement ì„ë² ë“œ\n\n### 3. ì˜ˆì•½/ìŠ¤ì¼€ì¤„ì—ì„œ íœ´ì¼ ì²´í¬\n```typescript\n// ê°„ë‹¨í•œ ì²´í¬\nconst dateString = date.toISOString().split('T')[0]; // \"2025-01-15\"\nconst isHoliday = await dbManager.isStaffHoliday(staffId, dateString);\n\nif (isHoliday) {\n  // íœ´ì¼ì´ë¯€ë¡œ ì˜ˆì•½ ë¶ˆê°€ ì²˜ë¦¬\n}\n```\n\n## ğŸ” ì£¼ìš” ë³€ê²½ íŒŒì¼\n\n### ìˆ˜ì •ëœ íŒŒì¼\n1. **src/pages/CMS/Staff/StaffRegister.tsx** (ëŒ€í­ ë‹¨ìˆœí™”)\n   - WeekSchedule ë¡œì§ ì œê±°\n   - HolidayManagement í†µí•©\n\n### ë³€ê²½ ì—†ìŒ (ì´ë¯¸ ì™„ë£Œë˜ì–´ ìˆì—ˆìŒ)\n1. **src/utils/db/StaffService.ts** - íœ´ì¼ CRUD ë©”ì„œë“œ\n2. **src/components/HolidayManagement.tsx** - ìº˜ë¦°ë” UI\n\n### í–¥í›„ ê°œì„  ê°€ëŠ¥\n1. **src/pages/CMS/Reservation/index.tsx** - ì˜ˆì•½ ì‹œ íœ´ì¼ ì²´í¬\n   - í˜„ì¬: DailyScheduleSettings ì‚¬ìš©\n   - ê°œì„ : `isStaffHoliday()` ìš°ì„  ì²´í¬, ì—†ìœ¼ë©´ ê¸°ì¡´ ë¡œì§ ì‚¬ìš© (ë³‘í–‰ ìš´ì˜)\n\n## ğŸ‰ ê²°ë¡ \n\n**ìš”ì¼ ì¤‘ì‹¬ â†’ ë‚ ì§œ ì¤‘ì‹¬**ìœ¼ë¡œ ì„±ê³µì ìœ¼ë¡œ ë‹¨ìˆœí™”ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n### í•µì‹¬ ì„±ê³¼\nâœ… DBëŠ” ë‹¨ìˆœíˆ ë‚ ì§œ ë¬¸ìì—´ ë°°ì—´ (`Staff.holidays`)\nâœ… ìš”ì¼ì€ UI í‘œì‹œìš©ìœ¼ë¡œë§Œ ì‚¬ìš© (ìº˜ë¦°ë”ì˜ ìš”ì¼ í‘œê¸°)\nâœ… ë³µì¡í•œ ìš”ì¼ ê³„ì‚° ë¡œì§ ì™„ì „ ì œê±°\nâœ… ì‚¬ìš©ì ì¹œí™”ì ì¸ ìº˜ë¦°ë” UI\nâœ… í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€ (ê¸°ì¡´ ì½”ë“œì™€ ë³‘í–‰ ê°€ëŠ¥)\n\n### ì˜ˆì‹œ\n```typescript\n// íœ´ì¼ ì¶”ê°€\nawait dbManager.addStaffHoliday('staff123', '2025-01-15');\n\n// íœ´ì¼ í™•ì¸\nconst isHoliday = await dbManager.isStaffHoliday('staff123', '2025-01-15');\n// â†’ true\n\n// ë²”ìœ„ ì¡°íšŒ\nconst holidays = await dbManager.getStaffHolidaysInRange(\n  'staff123', \n  '2025-01-01', \n  '2025-01-31'\n);\n// â†’ [\"2025-01-15\", \"2025-01-20\"]\n```\n\nì´ì œ íœ´ì¼ ê´€ë¦¬ëŠ” **ë‚ ì§œë§Œ ì €ì¥í•˜ê³  ì²´í¬**í•˜ë©´ ë˜ëŠ” ê°„ë‹¨í•œ êµ¬ì¡°ì…ë‹ˆë‹¤! ğŸŠ\n"
        }
    ]
}