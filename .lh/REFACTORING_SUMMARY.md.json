{
    "sourceFile": "REFACTORING_SUMMARY.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1763878962465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1763878962465,
            "name": "Commit-0",
            "content": "# íœ´ì¼ ì„¤ì • ì‹œìŠ¤í…œ ë¦¬íŒ©í† ë§ ìš”ì•½\n\n## ë³€ê²½ ì‚¬í•­ ìš”ì•½\n\n### ê¸°ì¡´ ë¬¸ì œì \n1. **ìš”ì¼ ê¸°ë°˜ ë³µì¡í•œ ë¡œì§**: WeekSchedule íƒ€ì…ìœ¼ë¡œ ì›”~ì¼ ìš”ì¼ë³„ ì„¤ì •\n2. **ì£¼ê°„ ë‹¨ìœ„ ê³„ì‚°**: ë§¤ë²ˆ \"ì§€ë‚œ í† ìš”ì¼~ë‹¤ìŒ ê¸ˆìš”ì¼\" ê³„ì‚°\n3. **ë°ì´í„° êµ¬ì¡° ë³µì¡**: DayScheduleì— ê·¼ë¬´ì‹œê°„, íœ´ê²Œì‹œê°„, íœ´ì¼ ì—¬ë¶€ ë“± ë³µí•© ë°ì´í„°\n4. **UI ë³µì¡ì„±**: 7ê°œ ìš”ì¼ ê°ê°ì— ëŒ€í•œ ì‹œê°„ ì„¤ì • UI\n\n### í•´ê²° ë°©ì•ˆ\n**í•µì‹¬ ì›ì¹™**: ë‚ ì§œ ê¸°ë°˜ ë‹¨ìˆœí™”, ìš”ì¼ì€ í‘œì‹œìš©ìœ¼ë¡œë§Œ ì‚¬ìš©\n\n#### 1. DB êµ¬ì¡° (ì´ë¯¸ êµ¬í˜„ë¨ âœ…)\n```typescript\n// Staff íƒ€ì…\ninterface Staff {\n  id: string;\n  name: string;\n  // ... ê¸°íƒ€ í•„ë“œ\n  holidays: string[];  // [\"2025-01-15\", \"2025-01-20\", ...] í˜•ì‹\n}\n\n// StaffServiceì— êµ¬í˜„ëœ ë©”ì„œë“œ\n- getStaffHolidays(staffId): Promise<string[]>\n- updateStaffHolidays(staffId, holidays): Promise<boolean>\n- addStaffHoliday(staffId, date): Promise<boolean>  \n- removeStaffHoliday(staffId, date): Promise<boolean>\n- isStaffHoliday(staffId, date): Promise<boolean>\n```\n\n#### 2. íœ´ì¼ ê´€ë¦¬ UI (ì´ë¯¸ êµ¬í˜„ë¨ âœ…)\n`HolidayManagement.tsx` - ìº˜ë¦°ë” ê¸°ë°˜ ì§ê´€ì  UI\n- ë‹¬ë ¥ì—ì„œ ë‚ ì§œ í´ë¦­í•˜ì—¬ íœ´ì¼ ì¶”ê°€/ì œê±°\n- ìš”ì¼ì€ ë‹¬ë ¥ì—ì„œ ìë™ í‘œì‹œ (í‘œì‹œìš©)\n- ë¹¨ê°„ìƒ‰ìœ¼ë¡œ íœ´ì¼ í‘œì‹œ\n\n#### 3. ìˆ˜ì •ì´ í•„ìš”í•œ ë¶€ë¶„\n\n##### A. StaffRegister.tsx (ì§ì› ë“±ë¡)\n**ì œê±°í•  ê²ƒ**:\n- WeekSchedule, DaySchedule íƒ€ì…\n- isDayInPastOrToday, getDayDate, getInitialWeeklyHolidayData í•¨ìˆ˜\n- weeklyHolidayData ìƒíƒœ\n- ì£¼ê°„ íœ´ì¼ ì„¤ì • UI (1200ì¤„ ì´ìƒì˜ ë³µì¡í•œ UI ì½”ë“œ)\n\n**ê°„ë‹¨í•˜ê²Œ êµì²´**:\n```tsx\n{formData.program && (\n  <div style={{ \n    marginTop: '24px', \n    padding: '20px', \n    background: AppColors.surface,\n    borderRadius: '12px',\n    border: `1px solid ${AppColors.borderLight}`\n  }}>\n    <div style={{ fontSize: AppTextStyles.title3.fontSize, fontWeight: 600 }}>\n      â„¹ï¸ íœ´ì¼ ì„¤ì • ì•ˆë‚´\n    </div>\n    <div style={{ fontSize: AppTextStyles.body2.fontSize, marginTop: '12px' }}>\n      ì§ì› ë“±ë¡ í›„ 'ì§ì› ê´€ë¦¬ > íœ´ì¼ ê´€ë¦¬' ë©”ë‰´ì—ì„œ íœ´ì¼ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n      <br/>\n      ë˜ëŠ” ë“±ë¡ ì§í›„ í‘œì‹œë˜ëŠ” HolidayManagement ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\n    </div>\n  </div>\n)}\n\n{newlyCreatedStaffId && (\n  <HolidayManagement staffId={newlyCreatedStaffId} />\n)}\n```\n\n##### B. Reservation/index.tsx (ì˜ˆì•½/ìŠ¤ì¼€ì¤„)\n**ë³€ê²½**:\n```typescript\n// ê¸°ì¡´: ë³µì¡í•œ WeeklyHolidaySettings ë¡œì§\nconst isHoliday = await checkWeeklyHolidaySettings(staffId, day);\n\n// ìƒˆë¡œìš´ ë°©ì‹: ê°„ë‹¨í•œ ë‚ ì§œ ê¸°ë°˜ ì²´í¬\nconst dateString = date.toISOString().split('T')[0]; // \"2025-01-15\"\nconst isHoliday = await dbManager.isStaffHoliday(staffId, dateString);\n```\n\n##### C. weekUtils.ts\n**ìœ ì§€**: UI í‘œì‹œë¥¼ ìœ„í•œ ìœ í‹¸ë¦¬í‹°ë§Œ\n```typescript\n// ìš”ì¼ ì´ë¦„ í‘œì‹œ\nexport const getDayName = (date: Date): string => {\n  const days = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];\n  return days[date.getDay()];\n};\n\n// ì£¼ê°„ ë²”ìœ„ í‘œì‹œ\nexport const getWeekRangeDisplay = (startDate: Date): string => {\n  // UI í‘œì‹œìš©ìœ¼ë¡œë§Œ ì‚¬ìš©\n};\n```\n\n**ì œê±°**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê´€ë ¨ í•¨ìˆ˜ë“¤\n- ìš”ì¼ ê¸°ë°˜ ê³„ì‚°\n- íœ´ì¼ íŒë‹¨ ë¡œì§\n- ì£¼ê°„ ë°ì´í„° ìƒì„± ë¡œì§\n\n## ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ\n\n### ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜\n1. **ìƒˆ ì§ì›**: ìƒˆ ë°©ì‹ìœ¼ë¡œ ë“±ë¡ (holidays ë°°ì—´ ì‚¬ìš©)\n2. **ê¸°ì¡´ ì§ì›**: \n   - holidays ë°°ì—´ì€ ë¹ˆ ë°°ì—´ë¡œ ì‹œì‘\n   - ê´€ë¦¬ìê°€ í•„ìš”ì‹œ HolidayManagementì—ì„œ ì„¤ì •\n   - ê¸°ì¡´ WeeklyHolidaySettings ë°ì´í„°ëŠ” ìœ ì§€ (í˜¸í™˜ì„±)\n\n### ë°ì´í„° ì •í•©ì„±\n- Staff.holidaysê°€ ì†ŒìŠ¤ ì˜¤ë¸Œ íŠ¸ë£¨ìŠ¤\n- ì˜ˆì•½ ì‹œ ë°˜ë“œì‹œ `isStaffHoliday(staffId, date)`ë¡œ í™•ì¸\n- UIëŠ” ìš”ì¼ì„ í‘œì‹œí•˜ì§€ë§Œ, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ë‚ ì§œë§Œ ì‚¬ìš©\n\n## êµ¬í˜„ ìš°ì„ ìˆœìœ„\n\n1. âœ… DB êµ¬ì¡° í™•ì¸ (ì™„ë£Œ)\n2. âœ… HolidayManagement ì»´í¬ë„ŒíŠ¸ (ì™„ë£Œ)  \n3. ğŸ”„ StaffRegister ë‹¨ìˆœí™” (ì§„í–‰ ì¤‘)\n4. â³ Reservation íœ´ì¼ ì²´í¬ ìˆ˜ì •\n5. â³ weekUtils ì •ë¦¬\n\n## ì˜ˆìƒ íš¨ê³¼\n\n### ì½”ë“œ ë¼ì¸ ìˆ˜ ê°ì†Œ\n- StaffRegister.tsx: ~1000ì¤„ ê°ì†Œ\n- Reservation/index.tsx: ~200ì¤„ ê°ì†Œ\n- weekUtils.ts: ~100ì¤„ ê°ì†Œ\n\n### ë³µì¡ë„ ê°ì†Œ\n- ìš”ì¼ ê³„ì‚° ë¡œì§ ì œê±°\n- íƒ€ì„ì¡´ ì´ìŠˆ í•´ì†Œ\n- ë‚ ì§œ ë¬¸ìì—´ ë¹„êµë¡œ ë‹¨ìˆœí™”\n\n### ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ\n- ëª…í™•í•œ ë°ì´í„° ì†ŒìŠ¤ (Staff.holidays)\n- ì§ê´€ì ì¸ API (isStaffHoliday)\n- ë²„ê·¸ ê°€ëŠ¥ì„± ê°ì†Œ\n"
        }
    ]
}